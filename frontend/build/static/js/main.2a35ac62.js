/*! For license information please see main.2a35ac62.js.LICENSE.txt */
(()=>{var __webpack_modules__={14:e=>{e.exports=function(){return!1}},61:e=>{e.exports=function(e,t){return e<t}},112:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>y,BS:()=>u,C7:()=>m,E0:()=>v,Fv:()=>h,LN:()=>d,T$:()=>f,ZJ:()=>c,fS:()=>o,qQ:()=>l,rU:()=>x,wp:()=>p});var r=n(6756),a=n(989),s=n(9250);const i=(0,a.A)("orders/fetchOrders",(async()=>{const e=await fetch(`${s.B8}/api/orders`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch orders");return e.json()}),{useGlobalLoader:!0}),o=(0,a.A)("orders/createOrder",(async e=>{const t=await fetch(`${s.B8}/api/orders/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to create order");return t.json()}),{useGlobalLoader:!0}),l=(0,a.A)("suppliers/fetchSuppliers",(async()=>{const e=await fetch(`${s.B8}/api/orders/suppliers`,{headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch suppliers");return await e.json()}),{useGlobalLoader:!0}),c=(0,a.A)("suppliers/fetchSupplierDetails",(async e=>{const t=await fetch(`${s.B8}/api/orders/supplier/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch supplier details");return t.json()}),{useGlobalLoader:!0}),d=(0,a.A)("items/fetchItems",(async()=>{const e=await fetch(`${s.B8}/api/orders/items`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch items");return e.json()}),{useGlobalLoader:!0}),u=(0,a.A)("pharmacy/fetchSalesBills",(async()=>{const e=await fetch(`${s.B8}/api/pharmacy/sales-bills`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch sales bills");return e.json()}),{useGlobalLoader:!0}),m=(0,a.A)("pharmacy/createSalesBill",(async e=>{const t=await fetch(`${s.B8}/api/pharmacy/create-sales-bill`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to create sales bill");return t.json()}),{useGlobalLoader:!0}),h=(0,a.A)("pharmacy/updateInventoryItem",(async e=>{let{itemId:t,updateData:n}=e;const r=await fetch(`${s.B8}/api/pharmacy/inventory/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"});if(!r.ok)throw new Error("Failed to update inventory item");return r.json()}),{useGlobalLoader:!0}),p=(0,a.A)("pharmacy/createInventoryItem",(async e=>{const t=await fetch(`${s.B8}/api/pharmacy/inventory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to create inventory item");return t.json()}),{useGlobalLoader:!0}),f=(0,a.A)("pharmacy/deleteInventoryItem",(async e=>{if(!(await fetch(`${s.B8}/api/pharmacy/inventory/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete inventory item");return e}),{useGlobalLoader:!0}),v=(0,a.A)("pharmacy/fetchDashboardData",(async e=>{let{startDate:t,endDate:n,range:r}=e;const a=new URLSearchParams({startDate:t,endDate:n}),i=await fetch(`${s.B8}/api/pharmacy/dashboard-data?${a}`,{credentials:"include"});if(!i.ok)throw new Error("Failed to fetch pharmacy dashboard data");return i.json()}),{useGlobalLoader:!0}),g=(0,r.Z0)({name:"pharmacy",initialState:{orders:[],suppliers:[],selectedSupplier:null,items:[],ordersStatus:"idle",suppliersStatus:"idle",supplierDetailsStatus:"idle",itemsStatus:"idle",createOrderStatus:"idle",error:null,salesBills:[],salesBillsStatus:"idle",createSalesBillStatus:"idle",updateInventoryStatus:"idle",createInventoryItemStatus:"idle",deleteInventoryItemStatus:"idle",dashboardData:[],dashboardDataStatus:"idle",dashboardRange:"idle"},reducers:{clearSelectedSupplier:e=>{e.selectedSupplier=null,e.supplierDetailsStatus="idle"}},extraReducers:e=>{e.addCase(i.pending,(e=>{e.ordersStatus="loading"})).addCase(i.fulfilled,((e,t)=>{e.ordersStatus="succeeded",e.orders=t.payload})).addCase(i.rejected,((e,t)=>{e.ordersStatus="failed",e.error=t.error.message})).addCase(o.pending,(e=>{e.createOrderStatus="loading"})).addCase(o.fulfilled,((e,t)=>{e.createOrderStatus="succeeded"})).addCase(o.rejected,((e,t)=>{e.createOrderStatus="failed",e.error=t.error.message})).addCase(l.pending,(e=>{e.suppliersStatus="loading"})).addCase(l.fulfilled,((e,t)=>{e.suppliersStatus="succeeded",e.suppliers=t.payload})).addCase(l.rejected,((e,t)=>{e.suppliersStatus="failed",e.error=t.error.message})).addCase(c.pending,(e=>{e.supplierDetailsStatus="loading"})).addCase(c.fulfilled,((e,t)=>{e.supplierDetailsStatus="succeeded",e.selectedSupplier=t.payload})).addCase(c.rejected,((e,t)=>{e.supplierDetailsStatus="failed",e.error=t.error.message})).addCase(d.pending,(e=>{e.itemsStatus="loading"})).addCase(d.fulfilled,((e,t)=>{e.itemsStatus="succeeded",e.items=t.payload})).addCase(d.rejected,((e,t)=>{e.itemsStatus="failed",e.error=t.error.message})).addCase(u.pending,(e=>{e.salesBillsStatus="loading"})).addCase(u.fulfilled,((e,t)=>{e.salesBillsStatus="succeeded",e.salesBills=t.payload})).addCase(u.rejected,((e,t)=>{e.salesBillsStatus="failed",e.error=t.error.message})).addCase(m.pending,(e=>{e.createSalesBillStatus="loading"})).addCase(m.fulfilled,((e,t)=>{e.createSalesBillStatus="succeeded",e.salesBills.unshift(t.payload)})).addCase(m.rejected,((e,t)=>{e.createSalesBillStatus="failed",e.error=t.error.message})).addCase(h.pending,(e=>{e.updateInventoryStatus="loading"})).addCase(h.fulfilled,((e,t)=>{e.updateInventoryStatus="succeeded";const n=e.items.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.items[n]=t.payload)})).addCase(h.rejected,((e,t)=>{e.updateInventoryStatus="failed",e.error=t.error.message})).addCase(p.pending,(e=>{e.createInventoryItemStatus="loading"})).addCase(p.fulfilled,((e,t)=>{e.createInventoryItemStatus="succeeded",e.items.unshift(t.payload)})).addCase(p.rejected,((e,t)=>{e.createInventoryItemStatus="failed",e.error=t.error.message})).addCase(f.pending,(e=>{e.deleteInventoryItemStatus="loading"})).addCase(f.fulfilled,((e,t)=>{e.deleteInventoryItemStatus="succeeded",e.items=e.items.filter((e=>e._id!==t.payload))})).addCase(f.rejected,((e,t)=>{e.deleteInventoryItemStatus="failed",e.error=t.error.message})).addCase(v.pending,(e=>{e.dashboardDataStatus="loading"})).addCase(v.fulfilled,((e,t)=>{e.dashboardDataStatus="succeeded",e.dashboardData=t.payload})).addCase(v.rejected,((e,t)=>{e.dashboardDataStatus="failed",e.error=t.error.message}))}}),{clearSelectedSupplier:x}=g.actions,y=g.reducer},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},149:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},219:(e,t,n)=>{"use strict";var r=n(3763),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return r.isMemo(e)?i:o[e.$$typeof]||a}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=i;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=h(n);a&&a!==p&&e(t,a,r)}var i=d(n);u&&(i=i.concat(u(n)));for(var o=l(t),f=l(n),v=0;v<i.length;++v){var g=i[v];if(!s[g]&&(!r||!r[g])&&(!f||!f[g])&&(!o||!o[g])){var x=m(n,g);try{c(t,g,x)}catch(y){}}}}return t}},276:(e,t,n)=>{"use strict";n.d(t,{n:()=>u});var r=n(5043),a=n(2814),s=n(7920),i=n(7490),o=n(579),l="focusScope.autoFocusOnMount",c="focusScope.autoFocusOnUnmount",d={bubbles:!1,cancelable:!0},u=r.forwardRef(((e,t)=>{const{loop:n=!1,trapped:u=!1,onMountAutoFocus:p,onUnmountAutoFocus:g,...x}=e,[y,b]=r.useState(null),j=(0,i.c)(p),w=(0,i.c)(g),N=r.useRef(null),_=(0,a.s)(t,(e=>b(e))),S=r.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;r.useEffect((()=>{if(u){let e=function(e){if(S.paused||!y)return;const t=e.target;y.contains(t)?N.current=t:f(N.current,{select:!0})},t=function(e){if(S.paused||!y)return;const t=e.relatedTarget;null!==t&&(y.contains(t)||f(N.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&f(y)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return y&&r.observe(y,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}}),[u,y,S.paused]),r.useEffect((()=>{if(y){v.add(S);const t=document.activeElement;if(!y.contains(t)){const n=new CustomEvent(l,d);y.addEventListener(l,j),y.dispatchEvent(n),n.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.activeElement;for(const r of e)if(f(r,{select:t}),document.activeElement!==n)return}((e=m(y),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&f(y))}return()=>{y.removeEventListener(l,j),setTimeout((()=>{const e=new CustomEvent(c,d);y.addEventListener(c,w),y.dispatchEvent(e),e.defaultPrevented||f(t??document.body,{select:!0}),y.removeEventListener(c,w),v.remove(S)}),0)}}var e}),[y,j,w,S]);const E=r.useCallback((e=>{if(!n&&!u)return;if(S.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[a,s]=function(e){const t=m(e),n=h(t,e),r=h(t.reverse(),e);return[n,r]}(t);a&&s?e.shiftKey||r!==s?e.shiftKey&&r===a&&(e.preventDefault(),n&&f(s,{select:!0})):(e.preventDefault(),n&&f(a,{select:!0})):r===t&&e.preventDefault()}}),[n,u,S.paused]);return(0,o.jsx)(s.sG.div,{tabIndex:-1,...x,ref:_,onKeyDown:E})}));function m(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function h(e,t){for(const n of e)if(!p(n,{upTo:t}))return n}function p(e,t){let{upTo:n}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function f(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}u.displayName="FocusScope";var v=function(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=g(e,t),e.unshift(t)},remove(t){e=g(e,t),e[0]?.resume()}}}();function g(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}},320:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},438:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).get(e)}},503:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});var r=n(5043),a=Boolean(globalThis?.document)?r.useLayoutEffect:()=>{}},539:(e,t,n)=>{var r=n(9742),a=n(7498),s=n(3279);e.exports=function(e){return e&&e.length?r(e,s,a):void 0}},579:(e,t,n)=>{"use strict";e.exports=n(1153)},614:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},620:(e,t,n)=>{var r=n(6913),a=n(4052),s=n(2761);e.exports=function(e){return"string"==typeof e||!a(e)&&s(e)&&"[object String]"==r(e)}},643:(e,t,n)=>{var r=n(7676)("toUpperCase");e.exports=r},644:e=>{e.exports=function(e){return e!==e}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},715:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",s="[^"+t+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+a+")"+"?",c="[\\ufe0e\\ufe0f]?",d=c+l+("(?:\\u200d(?:"+[s,i,o].join("|")+")"+c+l+")*"),u="(?:"+[s+r+"?",r,i,o,n].join("|")+")",m=RegExp(a+"(?="+a+")|"+u+d,"g");e.exports=function(e){return e.match(m)||[]}},755:(e,t,n)=>{var r=n(8895),a=n(7116);e.exports=function e(t,n,s,i,o){var l=-1,c=t.length;for(s||(s=a),o||(o=[]);++l<c;){var d=t[l];n>0&&s(d)?n>1?e(d,n-1,s,i,o):r(o,d):i||(o[o.length]=d)}return o}},781:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},793:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},801:(e,t,n)=>{var r=n(1141),a=n(6686),s=n(9841),i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=o.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):i.test(e)?NaN:+e}},849:(e,t,n)=>{"use strict";n.d(t,{q:()=>a});let r={};function a(){return r}},852:(e,t,n)=>{"use strict";n.d(t,{CTc:()=>i,D3D:()=>m,L64:()=>D,MKb:()=>b,Mtm:()=>x,Pip:()=>E,RiX:()=>w,Srz:()=>d,TBE:()=>l,YJP:()=>p,YtH:()=>_,c11:()=>P,nXn:()=>k,ucK:()=>R,vKP:()=>v});var r=n(5043);function a(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var s=["color"],i=(0,r.forwardRef)((function(e,t){var n=e.color,i=void 0===n?"currentColor":n,o=a(e,s);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),(0,r.createElement)("path",{d:"M4.5 1C4.77614 1 5 1.22386 5 1.5V2H10V1.5C10 1.22386 10.2239 1 10.5 1C10.7761 1 11 1.22386 11 1.5V2H12.5C13.3284 2 14 2.67157 14 3.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V3.5C1 2.67157 1.67157 2 2.5 2H4V1.5C4 1.22386 4.22386 1 4.5 1ZM10 3V3.5C10 3.77614 10.2239 4 10.5 4C10.7761 4 11 3.77614 11 3.5V3H12.5C12.7761 3 13 3.22386 13 3.5V5H2V3.5C2 3.22386 2.22386 3 2.5 3H4V3.5C4 3.77614 4.22386 4 4.5 4C4.77614 4 5 3.77614 5 3.5V3H10ZM2 6V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V6H2ZM7 7.5C7 7.22386 7.22386 7 7.5 7C7.77614 7 8 7.22386 8 7.5C8 7.77614 7.77614 8 7.5 8C7.22386 8 7 7.77614 7 7.5ZM9.5 7C9.22386 7 9 7.22386 9 7.5C9 7.77614 9.22386 8 9.5 8C9.77614 8 10 7.77614 10 7.5C10 7.22386 9.77614 7 9.5 7ZM11 7.5C11 7.22386 11.2239 7 11.5 7C11.7761 7 12 7.22386 12 7.5C12 7.77614 11.7761 8 11.5 8C11.2239 8 11 7.77614 11 7.5ZM11.5 9C11.2239 9 11 9.22386 11 9.5C11 9.77614 11.2239 10 11.5 10C11.7761 10 12 9.77614 12 9.5C12 9.22386 11.7761 9 11.5 9ZM9 9.5C9 9.22386 9.22386 9 9.5 9C9.77614 9 10 9.22386 10 9.5C10 9.77614 9.77614 10 9.5 10C9.22386 10 9 9.77614 9 9.5ZM7.5 9C7.22386 9 7 9.22386 7 9.5C7 9.77614 7.22386 10 7.5 10C7.77614 10 8 9.77614 8 9.5C8 9.22386 7.77614 9 7.5 9ZM5 9.5C5 9.22386 5.22386 9 5.5 9C5.77614 9 6 9.22386 6 9.5C6 9.77614 5.77614 10 5.5 10C5.22386 10 5 9.77614 5 9.5ZM3.5 9C3.22386 9 3 9.22386 3 9.5C3 9.77614 3.22386 10 3.5 10C3.77614 10 4 9.77614 4 9.5C4 9.22386 3.77614 9 3.5 9ZM3 11.5C3 11.2239 3.22386 11 3.5 11C3.77614 11 4 11.2239 4 11.5C4 11.7761 3.77614 12 3.5 12C3.22386 12 3 11.7761 3 11.5ZM5.5 11C5.22386 11 5 11.2239 5 11.5C5 11.7761 5.22386 12 5.5 12C5.77614 12 6 11.7761 6 11.5C6 11.2239 5.77614 11 5.5 11ZM7 11.5C7 11.2239 7.22386 11 7.5 11C7.77614 11 8 11.2239 8 11.5C8 11.7761 7.77614 12 7.5 12C7.22386 12 7 11.7761 7 11.5ZM9.5 11C9.22386 11 9 11.2239 9 11.5C9 11.7761 9.22386 12 9.5 12C9.77614 12 10 11.7761 10 11.5C10 11.2239 9.77614 11 9.5 11Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))})),o=["color"],l=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,o);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),c=["color"],d=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,c);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),u=["color"],m=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,u);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),h=["color"],p=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,h);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),f=["color"],v=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,f);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),g=["color"],x=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,g);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),y=["color"],b=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,y);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),j=["color"],w=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,j);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:s}))})),N=["color"],_=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,N);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M5.5 4.625C6.12132 4.625 6.625 4.12132 6.625 3.5C6.625 2.87868 6.12132 2.375 5.5 2.375C4.87868 2.375 4.375 2.87868 4.375 3.5C4.375 4.12132 4.87868 4.625 5.5 4.625ZM9.5 4.625C10.1213 4.625 10.625 4.12132 10.625 3.5C10.625 2.87868 10.1213 2.375 9.5 2.375C8.87868 2.375 8.375 2.87868 8.375 3.5C8.375 4.12132 8.87868 4.625 9.5 4.625ZM10.625 7.5C10.625 8.12132 10.1213 8.625 9.5 8.625C8.87868 8.625 8.375 8.12132 8.375 7.5C8.375 6.87868 8.87868 6.375 9.5 6.375C10.1213 6.375 10.625 6.87868 10.625 7.5ZM5.5 8.625C6.12132 8.625 6.625 8.12132 6.625 7.5C6.625 6.87868 6.12132 6.375 5.5 6.375C4.87868 6.375 4.375 6.87868 4.375 7.5C4.375 8.12132 4.87868 8.625 5.5 8.625ZM10.625 11.5C10.625 12.1213 10.1213 12.625 9.5 12.625C8.87868 12.625 8.375 12.1213 8.375 11.5C8.375 10.8787 8.87868 10.375 9.5 10.375C10.1213 10.375 10.625 10.8787 10.625 11.5ZM5.5 12.625C6.12132 12.625 6.625 12.1213 6.625 11.5C6.625 10.8787 6.12132 10.375 5.5 10.375C4.87868 10.375 4.375 10.8787 4.375 11.5C4.375 12.1213 4.87868 12.625 5.5 12.625Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),S=["color"],E=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,S);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M8.4449 0.608765C8.0183 -0.107015 6.9817 -0.107015 6.55509 0.608766L0.161178 11.3368C-0.275824 12.07 0.252503 13 1.10608 13H13.8939C14.7475 13 15.2758 12.07 14.8388 11.3368L8.4449 0.608765ZM7.4141 1.12073C7.45288 1.05566 7.54712 1.05566 7.5859 1.12073L13.9798 11.8488C14.0196 11.9154 13.9715 12 13.8939 12H1.10608C1.02849 12 0.980454 11.9154 1.02018 11.8488L7.4141 1.12073ZM6.8269 4.48611C6.81221 4.10423 7.11783 3.78663 7.5 3.78663C7.88217 3.78663 8.18778 4.10423 8.1731 4.48612L8.01921 8.48701C8.00848 8.766 7.7792 8.98664 7.5 8.98664C7.2208 8.98664 6.99151 8.766 6.98078 8.48701L6.8269 4.48611ZM8.24989 10.476C8.24989 10.8902 7.9141 11.226 7.49989 11.226C7.08567 11.226 6.74989 10.8902 6.74989 10.476C6.74989 10.0618 7.08567 9.72599 7.49989 9.72599C7.9141 9.72599 8.24989 10.0618 8.24989 10.476Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),C=["color"],D=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,C);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),T=["color"],k=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,T);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M7.5 0.875C5.49797 0.875 3.875 2.49797 3.875 4.5C3.875 6.15288 4.98124 7.54738 6.49373 7.98351C5.2997 8.12901 4.27557 8.55134 3.50407 9.31167C2.52216 10.2794 2.02502 11.72 2.02502 13.5999C2.02502 13.8623 2.23769 14.0749 2.50002 14.0749C2.76236 14.0749 2.97502 13.8623 2.97502 13.5999C2.97502 11.8799 3.42786 10.7206 4.17091 9.9883C4.91536 9.25463 6.02674 8.87499 7.49995 8.87499C8.97317 8.87499 10.0846 9.25463 10.8291 9.98831C11.5721 10.7206 12.025 11.8799 12.025 13.5999C12.025 13.8623 12.2376 14.0749 12.5 14.0749C12.7623 14.075 12.975 13.8623 12.975 13.6C12.975 11.72 12.4778 10.2794 11.4959 9.31166C10.7244 8.55135 9.70025 8.12903 8.50625 7.98352C10.0187 7.5474 11.125 6.15289 11.125 4.5C11.125 2.49797 9.50203 0.875 7.5 0.875ZM4.825 4.5C4.825 3.02264 6.02264 1.825 7.5 1.825C8.97736 1.825 10.175 3.02264 10.175 4.5C10.175 5.97736 8.97736 7.175 7.5 7.175C6.02264 7.175 4.825 5.97736 4.825 4.5Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),A=["color"],P=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,A);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),O=["color"],R=(0,r.forwardRef)((function(e,t){var n=e.color,s=void 0===n?"currentColor":n,i=a(e,O);return(0,r.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),(0,r.createElement)("path",{d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}))},858:(e,t,n)=>{"use strict";function r(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}n.d(t,{m:()=>r})},914:(e,t,n)=>{var r=n(9841);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},917:(e,t,n)=>{"use strict";n.d(t,{F:()=>i});var r=n(8387);const a=e=>"boolean"===typeof e?`${e}`:0===e?"0":e,s=r.$,i=(e,t)=>n=>{var r;if(null==(null===t||void 0===t?void 0:t.variants))return s(e,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className);const{variants:i,defaultVariants:o}=t,l=Object.keys(i).map((e=>{const t=null===n||void 0===n?void 0:n[e],r=null===o||void 0===o?void 0:o[e];if(null===t)return null;const s=a(t)||a(r);return i[e][s]})),c=n&&Object.entries(n).reduce(((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e}),{}),d=null===t||void 0===t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce(((e,t)=>{let{class:n,className:r,...a}=t;return Object.entries(a).every((e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...o,...c}[t]):{...o,...c}[t]===n}))?[...e,n,r]:e}),[]);return s(e,l,d,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className)}},929:(e,t,n)=>{var r=n(3211),a=n(6571),s=n(9194),i=n(6686);e.exports=function(e,t,n){if(!i(n))return!1;var o=typeof t;return!!("number"==o?a(n)&&s(t,n.length):"string"==o&&t in n)&&r(n[t],e)}},961:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(5043),a=n(8134),s=n(3003),i=n(9250),o=n(9945),l=n(1203);const c={title:{fontSize:"15px",textAlign:"center",marginBottom:"5px",color:"#1a5f7a",fontWeight:"bold"},section:{marginBottom:"3px",display:"flex",flexDirection:"row",alignItems:"flex-start"},sectionTitle:{fontSize:"14px",fontWeight:"bold",color:"#34495e",width:"20%"},sectionContent:{fontSize:"12px",color:"#2c3e50",width:"80%",marginLeft:"5px",whiteSpace:"pre-line"},row:{display:"flex",flexDirection:"row",justifyContent:"flex-start",width:"100%"},label:{fontSize:"14px",color:"black",width:"40%",fontWeight:"bold"},value:{fontSize:"11px",color:"#2c3e50",width:"60%"},text:{fontSize:"11px",marginLeft:"150px"},patientInfoSection:{width:"100%"},column:{width:"33%",paddingRight:"5px"},infoItem:{flex:1,flexBasis:"33%",marginBottom:"3px"},investigationsSection:{marginBottom:"5px"},investigationContainer:{marginLeft:"5px",marginBottom:"5px"},investigationTitle:{fontSize:"9px",marginBottom:"2px",fontWeight:"bold"},investigationRow:{display:"flex",flexDirection:"row",fontSize:"9px",marginBottom:"1px"},investigationCell1:{width:"60%",fontSize:"12px"},investigationCell2:{width:"20%",fontSize:"12px"},columnContainer:{width:"49%",paddingRight:"2px"}},d=e=>e?(0,a.GP)(new Date(e),"dd-MM-yyyy"):"--",u=e=>!!e&&!Object.values(e).every((e=>""===e||null===e||void 0===e)),m=(0,r.forwardRef)(((e,t)=>{var n;let{formData:a,patient:m,formConfig:h,hospital:p,templateString:f}=e;m={...m,age:(0,i.F1)(null===(n=m)||void 0===n?void 0:n.age)};const v=new Function("React","styles","HospitalHeader","formatDate","hasValue",`return (${f});`),g=(0,s.d4)((e=>e.templates.headerTemplateArray)),x=(null===g||void 0===g?void 0:g.length)>0?g[0].value:l.h,y=(0,o.G)(x||l.h);try{return v(r,c,y,d,u)(a,m,p,h,t)}catch(b){return console.error("Error rendering dynamic discharge summary:",b),r.createElement("div",null,"Error rendering discharge summary template")}}))},977:(e,t,n)=>{var r=n(9096),a=n(4416);e.exports=function(e,t){return e&&e.length?a(e,r(t,2)):[]}},989:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(6756),a=n(5126);const s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{useGlobalLoader:s=!0,...i}=n;return(0,r.zD)(e,(async(e,n)=>{s&&n.dispatch((0,a.r)(!0));try{return await t(e,n)}finally{s&&n.dispatch((0,a.r)(!1))}}),i)}},1069:(e,t,n)=>{var r=n(8541);e.exports=function(e){return null==e?"":r(e)}},1140:(e,t,n)=>{"use strict";n.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>i,aR:()=>o});var r=n(5043),a=n(9766),s=n(579);const i=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",n),...r})}));i.displayName="Card";const o=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-4",n),...r})}));o.displayName="CardHeader";const l=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",n),...r})}));l.displayName="CardTitle";const c=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",n),...r})}));c.displayName="CardDescription";const d=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",n),...r})}));d.displayName="CardContent";r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",n),...r})})).displayName="CardFooter"},1141:(e,t,n)=>{var r=n(143),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},1143:(e,t,n)=>{var r=n(3028)(Object.keys,Object);e.exports=r},1153:(e,t,n)=>{"use strict";var r=n(5043),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},1170:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},1176:(e,t,n)=>{"use strict";n.d(t,{o:()=>a});var r=n(2316);function a(e,t){const n=(0,r.a)(e,t?.in);return n.setHours(0,0,0,0),n}},1184:(e,t,n)=>{"use strict";n.d(t,{lg:()=>y,qW:()=>p,bL:()=>x});var r=n(5043),a=n(858),s=n(7920),i=n(2814),o=n(7490);var l,c=n(579),d="dismissableLayer.update",u="dismissableLayer.pointerDownOutside",m="dismissableLayer.focusOutside",h=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),p=r.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:p,onPointerDownOutside:f,onFocusOutside:x,onInteractOutside:y,onDismiss:b,...j}=e,w=r.useContext(h),[N,_]=r.useState(null),S=N?.ownerDocument??globalThis?.document,[,E]=r.useState({}),C=(0,i.s)(t,(e=>_(e))),D=Array.from(w.layers),[T]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),k=D.indexOf(T),A=N?D.indexOf(N):-1,P=w.layersWithOutsidePointerEventsDisabled.size>0,O=A>=k,R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=(0,o.c)(e),a=r.useRef(!1),s=r.useRef((()=>{}));return r.useEffect((()=>{const e=e=>{if(e.target&&!a.current){let r=function(){g(u,n,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=r,t.addEventListener("click",s.current,{once:!0})):r()}else t.removeEventListener("click",s.current);a.current=!1},r=window.setTimeout((()=>{t.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(r),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}}),[t,n]),{onPointerDownCapture:()=>a.current=!0}}((e=>{const t=e.target,n=[...w.branches].some((e=>e.contains(t)));O&&!n&&(f?.(e),y?.(e),e.defaultPrevented||b?.())}),S),M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=(0,o.c)(e),a=r.useRef(!1);return r.useEffect((()=>{const e=e=>{if(e.target&&!a.current){g(m,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)}),[t,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}((e=>{const t=e.target;[...w.branches].some((e=>e.contains(t)))||(x?.(e),y?.(e),e.defaultPrevented||b?.())}),S);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=(0,o.c)(e);r.useEffect((()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})}),[n,t])}((e=>{A===w.layers.size-1&&(p?.(e),!e.defaultPrevented&&b&&(e.preventDefault(),b()))}),S),r.useEffect((()=>{if(N)return n&&(0===w.layersWithOutsidePointerEventsDisabled.size&&(l=S.body.style.pointerEvents,S.body.style.pointerEvents="none"),w.layersWithOutsidePointerEventsDisabled.add(N)),w.layers.add(N),v(),()=>{n&&1===w.layersWithOutsidePointerEventsDisabled.size&&(S.body.style.pointerEvents=l)}}),[N,S,n,w]),r.useEffect((()=>()=>{N&&(w.layers.delete(N),w.layersWithOutsidePointerEventsDisabled.delete(N),v())}),[N,w]),r.useEffect((()=>{const e=()=>E({});return document.addEventListener(d,e),()=>document.removeEventListener(d,e)}),[]),(0,c.jsx)(s.sG.div,{...j,ref:C,style:{pointerEvents:P?O?"auto":"none":void 0,...e.style},onFocusCapture:(0,a.m)(e.onFocusCapture,M.onFocusCapture),onBlurCapture:(0,a.m)(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:(0,a.m)(e.onPointerDownCapture,R.onPointerDownCapture)})}));p.displayName="DismissableLayer";var f=r.forwardRef(((e,t)=>{const n=r.useContext(h),a=r.useRef(null),o=(0,i.s)(t,a);return r.useEffect((()=>{const e=a.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}}),[n.branches]),(0,c.jsx)(s.sG.div,{...e,ref:o})}));function v(){const e=new CustomEvent(d);document.dispatchEvent(e)}function g(e,t,n,r){let{discrete:a}=r;const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),a?(0,s.hO)(i,o):i.dispatchEvent(o)}f.displayName="DismissableLayerBranch";var x=p,y=f},1203:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});const r='\nReact.createElement("div", { className: "mb-2 border-b border-[#000000] pb-2" },\n  React.createElement("div", null,\n    React.createElement("h1", { \n      className: "text-4xl tracking-wide text-center text-[#1a5f7a] uppercase"\n    }, hospitalInfo?.name)\n  ),\n  React.createElement("div", { style: { display: "flex", flexDirection: "row" } },\n    React.createElement("div", { style: { marginLeft: 50 } },\n      React.createElement("img", {\n        src: hospitalInfo?.hospitalLogoBlob,\n        alt: "Clinic Logo",\n        className: "w-[100px] h-[100px]"\n      })\n    ),\n    React.createElement("div", { className: "ml-8" },\n      React.createElement("p", { className: "text-center text-[#333333]" }, \n        hospitalInfo?.address\n      ),\n      React.createElement("h2", { className: "text-center text-[#1a5f7a] text-xl" },\n        hospitalInfo?.doctorName\n      ),\n      React.createElement("p", { className: "text-center text-[#333333]" },\n        hospitalInfo?.doctorInfo\n      ),\n      React.createElement("p", { className: "text-center text-[#333333]" },\n        "Mob : ", hospitalInfo?.contactNumber\n      )\n    ),\n    React.createElement("div", null,\n      React.createElement("img", {\n        src: hospitalInfo?.hospitalLogo2Blob,\n        alt: "Clinic Logo",\n        className: "w-[120px] h-[100px]"\n      })\n    )\n  )\n)'},1208:(e,t,n)=>{"use strict";n.d(t,{a:()=>a});var r=n(2885);function a(e,t,n){return(0,r.P)(e,-t,n)}},1268:(e,t,n)=>{var r=n(5428),a=n(7574),s=n(6832),i=s&&s.isTypedArray,o=i?a(i):r;e.exports=o},1310:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},1340:(e,t,n)=>{var r=n(3211);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1360:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1387:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var a;n.d(t,{AO:()=>u,Gh:()=>R,HS:()=>M,Oi:()=>o,Rr:()=>m,pX:()=>W,pb:()=>k,rc:()=>a,tH:()=>B,ue:()=>f,yD:()=>O,zR:()=>i}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));const s="popstate";function i(e){return void 0===e&&(e={}),h((function(e,t){let{pathname:n,search:r,hash:a}=e.location;return d("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:u(t)}),null,e)}function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,a){return void 0===n&&(n=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function h(e,t,n,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:m=!1}=i,h=l.history,p=a.Pop,f=null,v=g();function g(){return(h.state||{idx:null}).idx}function x(){p=a.Pop;let e=g(),t=null==e?null:e-v;v=e,f&&f({action:p,location:b.location,delta:t})}function y(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:u(e);return n=n.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==v&&(v=0,h.replaceState(r({},h.state,{idx:v}),""));let b={get action(){return p},get location(){return e(l,h)},listen(e){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(s,x),f=e,()=>{l.removeEventListener(s,x),f=null}},createHref:e=>t(l,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=a.Push;let r=d(b.location,e,t);n&&n(r,e),v=g()+1;let s=c(r,v),i=b.createHref(r);try{h.pushState(s,"",i)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(i)}m&&f&&f({action:p,location:b.location,delta:1})},replace:function(e,t){p=a.Replace;let r=d(b.location,e,t);n&&n(r,e),v=g();let s=c(r,v),i=b.createHref(r);h.replaceState(s,"",i),m&&f&&f({action:p,location:b.location,delta:0})},go:e=>h.go(e)};return b}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let a=k(("string"===typeof t?m(t):t).pathname||"/",n);if(null==a)return null;let s=g(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=T(a);i=C(s[o],e,r)}return i}function g(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(o(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let l=M([r,i.relativePath]),c=n.concat(i);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),g(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:E(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of x(e.path))a(e,t,r);else a(e,t)})),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return a?[s,""]:[s];let i=x(r.join("/")),o=[];return o.push(...i.map((e=>""===e?s:[s,e].join("/")))),a&&o.push(...i),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const y=/^:[\w-]+$/,b=3,j=2,w=1,N=10,_=-2,S=e=>"*"===e;function E(e,t){let n=e.split("/"),r=n.length;return n.some(S)&&(r+=_),t&&(r+=j),n.filter((e=>!S(e))).reduce(((e,t)=>e+(y.test(t)?b:""===t?w:N)),r)}function C(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,a={},s="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",d=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:M([s,d.pathname]),pathnameBase:I(M([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=M([s,d.pathnameBase]))}return i}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[n]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:i,pattern:e}}function T(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function k(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function A(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function O(e,t){let n=P(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function R(e,t,n,a){let s;void 0===a&&(a=!1),"string"===typeof e?s=m(e):(s=r({},e),o(!s.pathname||!s.pathname.includes("?"),A("?","pathname","search",s)),o(!s.pathname||!s.pathname.includes("#"),A("#","pathname","hash",s)),o(!s.search||!s.search.includes("#"),A("#","search","hash",s)));let i,l=""===e||""===s.pathname,c=l?"/":s.pathname;if(null==c)i=n;else{let e=t.length-1;if(!a&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:L(r),hash:F(a)}}(s,i),u=c&&"/"!==c&&c.endsWith("/"),h=(l||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const M=e=>e.join("/").replace(/\/\/+/g,"/"),I=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class B extends Error{}function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const $=["post","put","patch","delete"],U=(new Set($),["get",...$]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},1425:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});var r=n(2440),a=n(9415),s=n(2316);function i(e,t){const n=(0,s.a)(e,t?.in),i=n.getFullYear(),o=(0,r.w)(n,0);o.setFullYear(i+1,0,4),o.setHours(0,0,0,0);const l=(0,a.b)(o),c=(0,r.w)(n,0);c.setFullYear(i,0,4),c.setHours(0,0,0,0);const d=(0,a.b)(c);return n.getTime()>=l.getTime()?i+1:n.getTime()>=d.getTime()?i:i-1}},1497:(e,t,n)=>{"use strict";var r=n(3218);function a(){}function s(){}s.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,s,i){if(i!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:a};return n.PropTypes=n,n}},1558:e=>{e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},1620:(e,t,n)=>{"use strict";n.d(t,{k:()=>s});var r=n(849),a=n(2316);function s(e,t){const n=(0,r.q)(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=(0,a.a)(e,t?.in),o=i.getDay(),l=(o<s?7:0)+o-s;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}},1629:(e,t,n)=>{var r=n(6913),a=n(6686);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1664:(e,t,n)=>{"use strict";function r(e,t){let[n,r]=t;return Math.min(r,Math.max(n,e))}n.d(t,{q:()=>r})},1669:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});const r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function a(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const s={date:a({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:a({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:a({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},i={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function o(e){return(t,n)=>{let r;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=n?.width?String(n.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=n?.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function l(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const i=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(i))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(i)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}var c;const d={code:"en-US",formatDistance:(e,t,n)=>{let a;const s=r[e];return a="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:s,formatRelative:(e,t,n,r)=>i[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:o({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:o({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:o({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:o({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:o({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(c={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(c.matchPattern);if(!n)return null;const r=n[0],a=e.match(c.parsePattern);if(!a)return null;let s=c.valueCallback?c.valueCallback(a[0]):a[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:l({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:l({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:l({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:l({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:l({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}}},1672:(e,t,n)=>{"use strict";n.d(t,{A:()=>K});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;function s(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var i=n(5043),o="right-scroll-bar-position",l="width-before-scroll-bar";function c(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var d="undefined"!==typeof window?i.useLayoutEffect:i.useEffect,u=new WeakMap;function m(e,t){var n=function(e,t){var n=(0,i.useState)((function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(e){var t=n.value;t!==e&&(n.value=e,n.callback(e,t))}}}}))[0];return n.callback=t,n.facade}(t||null,(function(t){return e.forEach((function(e){return c(e,t)}))}));return d((function(){var t=u.get(n);if(t){var r=new Set(t),a=new Set(e),s=n.current;r.forEach((function(e){a.has(e)||c(e,null)})),a.forEach((function(e){r.has(e)||c(e,s)}))}u.set(n,e)}),[e]),n}function h(e){return e}function p(e,t){void 0===t&&(t=h);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var a=t(e,r);return n.push(a),function(){n=n.filter((function(e){return e!==a}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var a=n;n=[],a.forEach(e),t=n}var s=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(s)};i(),n={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),n}}}}}var f=function(e){void 0===e&&(e={});var t=p(null);return t.options=r({async:!0,ssr:!1},e),t}(),v=function(){},g=i.forwardRef((function(e,t){var n=i.useRef(null),s=i.useState({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:v}),o=s[0],l=s[1],c=e.forwardProps,d=e.children,u=e.className,h=e.removeScrollBar,p=e.enabled,g=e.shards,x=e.sideCar,y=e.noIsolation,b=e.inert,j=e.allowPinchZoom,w=e.as,N=void 0===w?"div":w,_=e.gapMode,S=a(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=x,C=m([n,t]),D=r(r({},S),o);return i.createElement(i.Fragment,null,p&&i.createElement(E,{sideCar:f,removeScrollBar:h,shards:g,noIsolation:y,inert:b,setCallbacks:l,allowPinchZoom:!!j,lockRef:n,gapMode:_}),c?i.cloneElement(i.Children.only(d),r(r({},D),{ref:C})):i.createElement(N,r({},D,{className:u,ref:C}),d))}));g.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},g.classNames={fullWidth:l,zeroRight:o};var x,y=function(e){var t=e.sideCar,n=a(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return i.createElement(s,r({},n))};y.isSideCarExport=!0;function b(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=x||n.nc;return t&&e.setAttribute("nonce",t),e}var j=function(){var e=0,t=null;return{add:function(n){var r;0==e&&(t=b())&&(!function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}(t,n),r=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(r)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},w=function(){var e=function(){var e=j();return function(t,n){i.useEffect((function(){return e.add(t),function(){e.remove()}}),[t&&n])}}();return function(t){var n=t.styles,r=t.dynamic;return e(n,r),null}},N={left:0,top:0,right:0,gap:0},_=function(e){return parseInt(e||"",10)||0},S=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return N;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[_(n),_(r),_(a)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},E=w(),C="data-scroll-locked",D=function(e,t,n,r){var a=e.left,s=e.top,i=e.right,c=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(c,"px ").concat(r,";\n  }\n  body[").concat(C,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(c,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(o," {\n    right: ").concat(c,"px ").concat(r,";\n  }\n  \n  .").concat(l," {\n    margin-right: ").concat(c,"px ").concat(r,";\n  }\n  \n  .").concat(o," .").concat(o," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(l," .").concat(l," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(C,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(c,"px;\n  }\n")},T=function(){var e=parseInt(document.body.getAttribute(C)||"0",10);return isFinite(e)?e:0},k=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=void 0===r?"margin":r;i.useEffect((function(){return document.body.setAttribute(C,(T()+1).toString()),function(){var e=T()-1;e<=0?document.body.removeAttribute(C):document.body.setAttribute(C,e.toString())}}),[]);var s=i.useMemo((function(){return S(a)}),[a]);return i.createElement(E,{styles:D(s,!t,a,n?"":"!important")})},A=!1;if("undefined"!==typeof window)try{var P=Object.defineProperty({},"passive",{get:function(){return A=!0,!0}});window.addEventListener("test",P,P),window.removeEventListener("test",P,P)}catch(Y){A=!1}var O=!!A&&{passive:!1},R=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},M=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),I(e,r)){var a=L(e,r);if(a[1]>a[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},I=function(e,t){return"v"===e?function(e){return R(e,"overflowY")}(t):function(e){return R(e,"overflowX")}(t)},L=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},F=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},B=function(e){return[e.deltaX,e.deltaY]},W=function(e){return e&&"current"in e?e.current:e},$=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},U=0,z=[];function H(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const V=(q=function(e){var t=i.useRef([]),n=i.useRef([0,0]),r=i.useRef(),a=i.useState(U++)[0],o=i.useState(w)[0],l=i.useRef(e);i.useEffect((function(){l.current=e}),[e]),i.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=s([e.lockRef.current],(e.shards||[]).map(W),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(a))})),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(a))}))}}}),[e.inert,e.lockRef.current,e.shards]);var c=i.useCallback((function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!l.current.allowPinchZoom;var a,s=F(e),i=n.current,o="deltaX"in e?e.deltaX:i[0]-s[0],c="deltaY"in e?e.deltaY:i[1]-s[1],d=e.target,u=Math.abs(o)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var m=M(u,d);if(!m)return!0;if(m?a=u:(a="v"===u?"h":"v",m=M(u,d)),!m)return!1;if(!r.current&&"changedTouches"in e&&(o||c)&&(r.current=a),!a)return!0;var h=r.current||a;return function(e,t,n,r,a){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=s*r,o=n.target,l=t.contains(o),c=!1,d=i>0,u=0,m=0;do{var h=L(e,o),p=h[0],f=h[1]-h[2]-s*p;(p||f)&&I(e,o)&&(u+=f,m+=p),o=o instanceof ShadowRoot?o.host:o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&(a&&Math.abs(u)<1||!a&&i>u)||!d&&(a&&Math.abs(m)<1||!a&&-i>m))&&(c=!0),c}(h,t,e,"h"===h?o:c,!0)}),[]),d=i.useCallback((function(e){var n=e;if(z.length&&z[z.length-1]===o){var r="deltaY"in n?B(n):F(n),a=t.current.filter((function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,a=r,t[0]===a[0]&&t[1]===a[1]);var t,a}))[0];if(a&&a.should)n.cancelable&&n.preventDefault();else if(!a){var s=(l.current.shards||[]).map(W).filter(Boolean).filter((function(e){return e.contains(n.target)}));(s.length>0?c(n,s[0]):!l.current.noIsolation)&&n.cancelable&&n.preventDefault()}}}),[]),u=i.useCallback((function(e,n,r,a){var s={name:e,delta:n,target:r,should:a,shadowParent:H(r)};t.current.push(s),setTimeout((function(){t.current=t.current.filter((function(e){return e!==s}))}),1)}),[]),m=i.useCallback((function(e){n.current=F(e),r.current=void 0}),[]),h=i.useCallback((function(t){u(t.type,B(t),t.target,c(t,e.lockRef.current))}),[]),p=i.useCallback((function(t){u(t.type,F(t),t.target,c(t,e.lockRef.current))}),[]);i.useEffect((function(){return z.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",d,O),document.addEventListener("touchmove",d,O),document.addEventListener("touchstart",m,O),function(){z=z.filter((function(e){return e!==o})),document.removeEventListener("wheel",d,O),document.removeEventListener("touchmove",d,O),document.removeEventListener("touchstart",m,O)}}),[]);var f=e.removeScrollBar,v=e.inert;return i.createElement(i.Fragment,null,v?i.createElement(o,{styles:$(a)}):null,f?i.createElement(k,{gapMode:e.gapMode}):null)},f.useMedium(q),y);var q,G=i.forwardRef((function(e,t){return i.createElement(g,r({},e,{ref:t,sideCar:V}))}));G.classNames=g.classNames;const K=G},1714:(e,t,n)=>{var r=n(1340);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},1733:(e,t,n)=>{var r=n(1775),a=n(4664),s=n(9096);e.exports=function(e,t){var n={};return t=s(t,3),a(e,(function(e,a,s){r(n,a,t(e,a,s))})),n}},1775:(e,t,n)=>{var r=n(5654);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},1844:(e,t,n)=>{"use strict";n.d(t,{x:()=>a});var r=n(2440);function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];const s=r.w.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(s)}},1862:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,q:()=>s});var r=n(5043),a=n(579);function s(e,t){const n=r.createContext(t),s=e=>{const{children:t,...s}=e,i=r.useMemo((()=>s),Object.values(s));return(0,a.jsx)(n.Provider,{value:i,children:t})};return s.displayName=e+"Provider",[s,function(a){const s=r.useContext(n);if(s)return s;if(void 0!==t)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}]}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const s=()=>{const t=n.map((e=>r.createContext(e)));return function(n){const a=n?.[e]||t;return r.useMemo((()=>({[`__scope${e}`]:{...n,[e]:a}})),[n,a])}};return s.scopeName=e,[function(t,s){const i=r.createContext(s),o=n.length;n=[...n,s];const l=t=>{const{scope:n,children:s,...l}=t,c=n?.[e]?.[o]||i,d=r.useMemo((()=>l),Object.values(l));return(0,a.jsx)(c.Provider,{value:d,children:s})};return l.displayName=t+"Provider",[l,function(n,a){const l=a?.[e]?.[o]||i,c=r.useContext(l);if(c)return c;if(void 0!==s)return s;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},o(s,...t)]}function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const a=t[0];if(1===t.length)return a;const s=()=>{const e=t.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(t){const n=e.reduce(((e,n)=>{let{useScope:r,scopeName:a}=n;return{...e,...r(t)[`__scope${a}`]}}),{});return r.useMemo((()=>({[`__scope${a.scopeName}`]:n})),[n])}};return s.scopeName=a.scopeName,s}},1946:(e,t,n)=>{var r=n(1340);e.exports=function(e){return r(this.__data__,e)>-1}},1981:(e,t,n)=>{"use strict";n.d(t,{J:()=>u});var r=n(5043),a=n(7920),s=n(579),i=r.forwardRef(((e,t)=>(0,s.jsx)(a.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));i.displayName="Label";var o=i,l=n(917),c=n(9766);const d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(o,{ref:t,className:(0,c.cn)(d(),n),...r})}));u.displayName=o.displayName},2043:(e,t,n)=>{"use strict";n.d(t,{Mz:()=>R,i3:()=>I,UC:()=>M,bL:()=>O,Bk:()=>g});var r=n(5043),a=n(6178),s=n(7451),i=n(7920),o=n(579),l=r.forwardRef(((e,t)=>{const{children:n,width:r=10,height:a=5,...s}=e;return(0,o.jsx)(i.sG.svg,{...s,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:(0,o.jsx)("polygon",{points:"0,0 30,0 15,10"})})}));l.displayName="Arrow";var c=l,d=n(2814),u=n(1862),m=n(7490),h=n(503),p=n(3124),f="Popper",[v,g]=(0,u.A)(f),[x,y]=v(f),b=e=>{const{__scopePopper:t,children:n}=e,[a,s]=r.useState(null);return(0,o.jsx)(x,{scope:t,anchor:a,onAnchorChange:s,children:n})};b.displayName=f;var j="PopperAnchor",w=r.forwardRef(((e,t)=>{const{__scopePopper:n,virtualRef:a,...s}=e,l=y(j,n),c=r.useRef(null),u=(0,d.s)(t,c);return r.useEffect((()=>{l.onAnchorChange(a?.current||c.current)})),a?null:(0,o.jsx)(i.sG.div,{...s,ref:u})}));w.displayName=j;var N="PopperContent",[_,S]=v(N),E=r.forwardRef(((e,t)=>{const{__scopePopper:n,side:l="bottom",sideOffset:c=0,align:u="center",alignOffset:f=0,arrowPadding:v=0,avoidCollisions:g=!0,collisionBoundary:x=[],collisionPadding:b=0,sticky:j="partial",hideWhenDetached:w=!1,updatePositionStrategy:S="optimized",onPlaced:E,...C}=e,D=y(N,n),[T,O]=r.useState(null),R=(0,d.s)(t,(e=>O(e))),[M,I]=r.useState(null),L=(0,p.X)(M),F=L?.width??0,B=L?.height??0,W=l+("center"!==u?"-"+u:""),$="number"===typeof b?b:{top:0,right:0,bottom:0,left:0,...b},U=Array.isArray(x)?x:[x],z=U.length>0,H={padding:$,boundary:U.filter(k),altBoundary:z},{refs:V,floatingStyles:q,placement:G,isPositioned:K,middlewareData:Y}=(0,a.we)({strategy:"fixed",placement:W,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.ll)(...t,{animationFrame:"always"===S})},elements:{reference:D.anchor},middleware:[(0,a.cY)({mainAxis:c+B,alignmentAxis:f}),g&&(0,a.BN)({mainAxis:!0,crossAxis:!1,limiter:"partial"===j?(0,a.ER)():void 0,...H}),g&&(0,a.UU)({...H}),(0,a.Ej)({...H,apply:e=>{let{elements:t,rects:n,availableWidth:r,availableHeight:a}=e;const{width:s,height:i}=n.reference,o=t.floating.style;o.setProperty("--radix-popper-available-width",`${r}px`),o.setProperty("--radix-popper-available-height",`${a}px`),o.setProperty("--radix-popper-anchor-width",`${s}px`),o.setProperty("--radix-popper-anchor-height",`${i}px`)}}),M&&(0,a.UE)({element:M,padding:v}),A({arrowWidth:F,arrowHeight:B}),w&&(0,a.jD)({strategy:"referenceHidden",...H})]}),[X,Z]=P(G),J=(0,m.c)(E);(0,h.N)((()=>{K&&J?.()}),[K,J]);const Q=Y.arrow?.x,ee=Y.arrow?.y,te=0!==Y.arrow?.centerOffset,[ne,re]=r.useState();return(0,h.N)((()=>{T&&re(window.getComputedStyle(T).zIndex)}),[T]),(0,o.jsx)("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:K?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[Y.transformOrigin?.x,Y.transformOrigin?.y].join(" "),...Y.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,o.jsx)(_,{scope:n,placedSide:X,onArrowChange:I,arrowX:Q,arrowY:ee,shouldHideArrow:te,children:(0,o.jsx)(i.sG.div,{"data-side":X,"data-align":Z,...C,ref:R,style:{...C.style,animation:K?void 0:"none"}})})})}));E.displayName=N;var C="PopperArrow",D={top:"bottom",right:"left",bottom:"top",left:"right"},T=r.forwardRef((function(e,t){const{__scopePopper:n,...r}=e,a=S(C,n),s=D[a.placedSide];return(0,o.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,o.jsx)(c,{...r,ref:t,style:{...r.style,display:"block"}})})}));function k(e){return null!==e}T.displayName=C;var A=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:a}=t,s=0!==a.arrow?.centerOffset,i=s?0:e.arrowWidth,o=s?0:e.arrowHeight,[l,c]=P(n),d={start:"0%",center:"50%",end:"100%"}[c],u=(a.arrow?.x??0)+i/2,m=(a.arrow?.y??0)+o/2;let h="",p="";return"bottom"===l?(h=s?d:`${u}px`,p=-o+"px"):"top"===l?(h=s?d:`${u}px`,p=`${r.floating.height+o}px`):"right"===l?(h=-o+"px",p=s?d:`${m}px`):"left"===l&&(h=`${r.floating.width+o}px`,p=s?d:`${m}px`),{data:{x:h,y:p}}}});function P(e){const[t,n="center"]=e.split("-");return[t,n]}var O=b,R=w,M=E,I=T},2070:(e,t,n)=>{var r=n(7937)(n(6552),"Set");e.exports=r},2074:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},2086:(e,t,n)=>{"use strict";e.exports=n(5082)},2154:(e,t,n)=>{var r=n(5575),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},2165:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n;return r(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}},2191:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>d,Ou:()=>s,mo:()=>i});var r=n(6756),a=n(9250);const s=(0,r.zD)("discharge/dischargePatient",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${a.B8}/api/patients/discharge/${e.patientId||e._id}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){return n(await t.json())}return(await t.json()).admission}catch(r){return n(r.message)}})),i=(0,r.zD)("discharge/saveDischargeData",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${a.B8}/api/patients/SaveButNotDischarge/${e.patientId||e._id}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}})),o=(0,r.Z0)({name:"discharge",initialState:{status:"idle",savingStatus:"idle",error:null,dischargeData:null,formConfig:null},reducers:{setDischargeData:(e,t)=>{e.dischargeData=t.payload},setFormConfig:(e,t)=>{e.formConfig=t.payload}},extraReducers:e=>{e.addCase(s.pending,(e=>{e.status="loading"})).addCase(s.fulfilled,((e,t)=>{e.status="succeeded",e.dischargeData=t.payload.dischargeData,e.formConfig=t.payload.formConfig})).addCase(s.rejected,((e,t)=>{e.status="failed",e.error=t.error.message})).addCase(i.pending,(e=>{e.savingStatus="loading"})).addCase(i.fulfilled,((e,t)=>{e.savingStatus="succeeded",e.dischargeData=t.payload.admission.dischargeData,e.formConfig=t.payload.admission.formConfig})).addCase(i.rejected,((e,t)=>{e.savingStatus="failed",e.error=t.error.message}))}}),{setDischargeData:l,setFormConfig:c}=o.actions,d=o.reducer},2264:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});var r=n(5043),a=n(9766),s=n(579);const i=r.forwardRef(((e,t)=>{let{className:n,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),autoComplete:"off",ref:t,...i})}));i.displayName="Input"},2316:(e,t,n)=>{"use strict";n.d(t,{a:()=>a});var r=n(2440);function a(e,t){return(0,r.w)(t||e,e)}},2322:(e,t,n)=>{var r=n(6913),a=n(5990),s=n(2761),i=Function.prototype,o=Object.prototype,l=i.toString,c=o.hasOwnProperty,d=l.call(Object);e.exports=function(e){if(!s(e)||"[object Object]"!=r(e))return!1;var t=a(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}},2440:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(4524);function a(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&r._P in e?e[r._P](t):e instanceof Date?new e.constructor(t):new Date(t)}},2520:(e,t,n)=>{var r=n(5816),a=n(9096),s=n(9140),i=Math.max;e.exports=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var l=null==n?0:s(n);return l<0&&(l=i(o+l,0)),r(e,a(t,3),l)}},2536:(e,t,n)=>{var r=n(149),a=n(2969),s=n(9096),i=n(8883),o=n(320),l=n(7574),c=n(5893),d=n(3279),u=n(4052);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return u(e)?function(t){return a(t,1===e.length?e[0]:e)}:e})):[d];var m=-1;t=r(t,l(s));var h=i(e,(function(e,n,a){return{criteria:r(t,(function(t){return t(e)})),index:++m,value:e}}));return o(h,(function(e,t){return c(e,t,n)}))}},2541:e=>{e.exports=function(e){return function(){return e}}},2587:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},2597:(e,t,n)=>{var r=n(4052),a=n(9841),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(i.test(e)||!s.test(e)||null!=t&&e in Object(t))}},2622:(e,t,n)=>{var r=n(705);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},2662:(e,t,n)=>{var r=n(5575);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},2698:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});const r='\n(formData, patient, hospital,formConfig, ref) => {\n  const hasComorbidities = formData.comorbidities && (Array.isArray(formData.comorbidities)?formData.comorbidities.some((c) => c.name):true);\n  const hasMedicineAdvice = formData.medicineAdvice && formData.medicineAdvice.some((m) => m.name);\n  const hasInvestigations = formData.investigations && formData.investigations.some((i) => i.name || i.category);\n  const comorbiditiesString = Array.isArray(formData.comorbidities)?formData.comorbidities?.filter((c) => c.name).map((c) => c.name).join(", "):formData.comorbidities;\n\n  const appendComorbidities = (content, type) => {\n    if (!hasComorbidities || formData.comorbidityHandling === "separate") {\n      return content;\n    }\n    if (type === formData.comorbidityHandling) {\n      return `${content}${content ? ", " : ""} ${comorbiditiesString}`;\n    }\n    return content;\n  };\n\n  const formatLabel = (label) => {\n    if (!label) return "";\n    const regex = /^([^)]+)|^(?:\\S+\\s?){1,3}/;\n    const match = label.match(regex);\n    return match ? match[0].trim() : label;\n  };\n\n  const formatDate = (date) => {\n    if (!date) return "--";\n    return new Date(date).toLocaleDateString(\'en-IN\', { day: \'2-digit\', month: \'2-digit\', year: \'numeric\' }).split(\'/\').join(\'-\');\n  };\n\n  const hasValue = (obj) => {\n    if (!obj) return false;\n    return Object.values(obj).some(value => value !== "" && value !== null && value !== undefined);\n  };\n\n  return React.createElement("div", { ref: ref, style: styles.page, className: "print-content" },\n    React.createElement("div", { className: " print:block mb-2" },\n      React.createElement(HospitalHeader, { hospitalInfo: hospital })\n    ),\n    React.createElement("div", { style: styles.title }, "Discharge Summary"),\n    \n    // Patient Info Section\n    React.createElement("div", { style: { ...styles.section } },\n      React.createElement("div", { style: { ...styles.patientInfoSection } },\n        React.createElement("div", { style: { ...styles.row, marginBottom: "2px" } },\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Name: "),\n            React.createElement("span", { style: styles.value }, patient?.name || "--")\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Age/Gender: "),\n            React.createElement("span", { style: styles.value }, \n              patient?.age && patient?.gender ? `${patient?.age}/${patient?.gender}` : "--"\n            )\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "UHID No: "),\n            React.createElement("span", { style: styles.value }, patient?.registrationNumber || "--")\n          )\n        ),\n        React.createElement("div", { style: { ...styles.row, marginBottom: "2px" } },\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "IPD No: "),\n            React.createElement("span", { style: styles.value }, patient?.ipdNumber || "--")\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Admit Date: "),\n            React.createElement("span", { style: styles.value }, formatDate(formData.admissionDate))\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Discharge Date: "),\n            React.createElement("span", { style: styles.value }, formatDate(formData.dateDischarged))\n          )\n        ),\n        React.createElement("div", { style: styles.row },\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Room: "),\n            React.createElement("span", { style: styles.value }, patient?.roomNumber || "--")\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Contact: "),\n            React.createElement("span", { style: styles.value }, patient?.contactNumber || "--")\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Address: "),\n            React.createElement("span", { style: { ...styles.value, whiteSpace: "nowrap", textOverflow: "ellipsis", overflow: "hidden" } },\n              patient?.address || "--"\n            )\n          )\n        )\n      )\n    ),\n\n    // Diagnosis Section\n    formData.diagnosis && React.createElement("div", { style: styles.section },\n      React.createElement("span", { style: styles.sectionTitle }, "Diagnosis:"),\n      React.createElement("span", { style: styles.sectionContent }, \n        appendComorbidities(formData.diagnosis, "diagnosis")\n      )\n    ),\n\n    // Clinical Summary Section\n    formData.clinicalSummary && React.createElement("div", { style: styles.section },\n      React.createElement("span", { style: styles.sectionTitle }, "Clinical Summary:"),\n      React.createElement("span", { style: styles.sectionContent }, \n        appendComorbidities(formData.clinicalSummary, "clinical_summary")\n      )\n    ),\n\n    // Comorbidities Section (if separate)\n    (formData.comorbidityHandling === "separate" && hasComorbidities) && \n    React.createElement("div", { style: styles.section },\n      React.createElement("span", { style: styles.sectionTitle }, "Comorbidities:"),\n      React.createElement("span", { style: styles.sectionContent }, comorbiditiesString)\n    ),\n\n    // Condition on Admission Section\n    formData.conditionOnAdmission && React.createElement("div", { style: styles.section },\n      React.createElement("span", { style: styles.sectionTitle }, "Condition on Admission:"),\n      React.createElement("span", { style: styles.sectionContent }, formData.conditionOnAdmission)\n    ),\n\n    // Admission Vitals Section\n    (formData.vitals?.admission && hasValue(formData.vitals.admission)) && \n    React.createElement("div", { style: styles.section },\n      React.createElement("span", { style: styles.sectionTitle }, "Admission Vitals:"),\n      React.createElement("span", { style: styles.sectionContent },\n        React.createElement("span", null,\n          formData.vitals.admission.bloodPressure && React.createElement("span", null,\n            "BP: ", React.createElement("strong", null, formData.vitals.admission.bloodPressure), " mmHg, "\n          ),\n          formData.vitals.admission.heartRate && React.createElement("span", null,\n            "Heart Rate: ", React.createElement("strong", null, formData.vitals.admission.heartRate), " bpm, "\n          ),\n          formData.vitals.admission.temperature && React.createElement("span", null,\n            "Temperature: ", React.createElement("strong", null, formData.vitals.admission.temperature), "\xb0C, "\n          ),\n          formData.vitals.admission.oxygenSaturation && React.createElement("span", null,\n            "O", React.createElement("sub", null, "2"), " Saturation: ",\n            React.createElement("strong", null, formData.vitals.admission.oxygenSaturation), "%, "\n          ),\n          formData.vitals.admission.respiratoryRate && React.createElement("span", null,\n            "Respiratory Rate: ", React.createElement("strong", null, formData.vitals.admission.respiratoryRate), " breaths/min"\n          )\n        )\n      )\n    ),\n\n    // Investigations Section\n    hasInvestigations && React.createElement("div", { style: { marginBottom: "3px" } },\n      React.createElement("div", null,\n        React.createElement("span", { style: styles.sectionTitle }, "Investigations")\n      ),\n      React.createElement("div", { \n        style: { \n          marginLeft: "15px", \n          marginTop: "5px", \n          width: "100%" \n        } \n      },\n        formData.investigations.map((investigation, index) => {\n          const hasFindings = investigation.report?.findings && \n            Object.values(investigation.report.findings).some(value => value);\n          const reportEntries = Object.entries(investigation.report || {})\n            .filter(([_, testData]) => testData.value);\n          const halfLength = Math.ceil(reportEntries.length / 2);\n\n          return React.createElement("div", {\n            key: index,\n            style: {\n              marginLeft: "5px",\n              marginBottom: "5px",\n              display: "flex",\n              flexDirection: hasFindings ? "row" : "column"\n            }\n          },\n            React.createElement("div", null,\n              React.createElement("div", { \n                style: { \n                  fontSize: "9px", \n                  marginBottom: "2px", \n                  fontWeight: "bold" \n                } \n              },\n                `${investigation.name.toUpperCase()} (${formatDate(investigation.date)})`\n              )\n            ),\n            hasFindings ? \n              React.createElement("div", { style: { display: "flex", flexDirection: "row" } },\n                React.createElement("div", null,\n                  investigation.report.findings && React.createElement("div", {\n                    style: {\n                      marginLeft: "50px",\n                      fontSize: "12px"\n                    }\n                  },\n                    React.createElement("div", { style: { width: "100%", fontSize: "12px",border:"1px solid red" } },\n                      React.createElement("span", null, investigation.report.findings.value)\n                    )\n                  )\n                )\n              ) :\n              React.createElement("div", { style: { display: "flex", flexDirection: "row" } },\n                React.createElement("div", { style: { width: "50%" } },\n                  reportEntries.slice(0, halfLength).map(([testName, testData]) =>\n                    testData.value && React.createElement("div", {\n                      key: testName,\n                      style: { \n                        display: "flex", \n                        flexDirection: "row", \n                        fontSize: "9px", \n                        marginBottom: "1px",\n                        marginLeft: "5px" \n                      }\n                    },\n                      React.createElement("div", { style: { width: "60%", fontSize: "12px" } },\n                        React.createElement("span", null, formatLabel(testData.label) || testName)\n                      ),\n                      React.createElement("div", { style: { width: "20%", fontSize: "12px" } },\n                        React.createElement("span", null, testData.value)\n                      ),\n                      testData.unit && React.createElement("div", { style: { width: "20%", fontSize: "12px" } },\n                        React.createElement("span", null, testData.unit)\n                      )\n                    )\n                  )\n                ),\n                React.createElement("div", { style: { width: "50%" } },\n                  reportEntries.slice(halfLength).map(([testName, testData]) =>\n                    testData.value && React.createElement("div", {\n                      key: testName,\n                      style: { \n                        display: "flex", \n                        flexDirection: "row", \n                        fontSize: "9px", \n                        marginBottom: "1px",\n                        marginLeft: "5px" \n                      }\n                    },\n                      React.createElement("div", { style: { width: "60%", fontSize: "12px" } },\n                        React.createElement("span", null, formatLabel(testData.label) || testName)\n                      ),\n                      React.createElement("div", { style: { width: "20%", fontSize: "12px" } },\n                        React.createElement("span", null, testData.value)\n                      ),\n                      testData.unit && React.createElement("div", { style: { width: "20%", fontSize: "12px" } },\n                        React.createElement("span", null, testData.unit)\n                      )\n                    )\n                  )\n                )\n              )\n          );\n        })\n      )\n    ),\n\n    // Treatment Section\n    formData.treatment && React.createElement("div", { style: styles.section },\n      React.createElement("span", { style: styles.sectionTitle }, "Treatment:"),\n      React.createElement("span", { style: styles.sectionContent }, formData.treatment)\n    ),\n\n    // Discharge Vitals Section\n    (formData.vitals?.discharge && hasValue(formData.vitals.discharge)) && \n    React.createElement("div", { style: styles.section },\n      React.createElement("span", { style: styles.sectionTitle }, "Discharge Vitals:"),\n      React.createElement("span", { style: styles.sectionContent },\n        React.createElement("span", null,\n          formData.vitals.discharge.bloodPressure && React.createElement("span", null,\n            "BP: ", React.createElement("strong", null, formData.vitals.discharge.bloodPressure), " mmHg, "\n          ),\n          formData.vitals.discharge.heartRate && React.createElement("span", null,\n            "Heart Rate: ", React.createElement("strong", null, formData.vitals.discharge.heartRate), " bpm, "\n          ),\n          formData.vitals.discharge.temperature && React.createElement("span", null,\n            "Temperature: ", React.createElement("strong", null, formData.vitals.discharge.temperature), "\xb0C, "\n          ),\n          formData.vitals.discharge.oxygenSaturation && React.createElement("span", null,\n            "O", React.createElement("sub", null, "2"), " Saturation: ",\n            React.createElement("strong", null, formData.vitals.discharge.oxygenSaturation), "%, "\n          ),\n          formData.vitals.discharge.respiratoryRate && React.createElement("span", null,\n            "Respiratory Rate: ", React.createElement("strong", null, formData.vitals.discharge.respiratoryRate), " breaths/min"\n          )\n        )\n      )\n    ),\n\n    // Condition on Discharge Section\n    formData.conditionOnDischarge && React.createElement("div", { style: styles.section },\n      React.createElement("span", { style: styles.sectionTitle }, "Condition on Discharge:"),\n      React.createElement("span", { style: styles.sectionContent }, formData.conditionOnDischarge)\n    ),\n\n    // Medicine/Advice Section\n    hasMedicineAdvice && React.createElement("div", { style: styles.section },\n      React.createElement("span", { style: styles.sectionTitle }, "Medicine/Advice:"),\n      React.createElement("div", { style: { marginLeft: "150px" } },\n        formData.medicineAdvice.map((med, index) => \n          (med.name || med.dosage || med.duration) && \n          React.createElement("div", { \n            key: index,\n            style: { fontSize: "11px", marginBottom: "2px" }\n          },\n            React.createElement("span", { style: { display: "inline-block", width: "20px" } },\n              `${index + 1}.`\n            ),\n            React.createElement("span", { style: { display: "inline-block", minWidth: "200px" } },\n              med.name\n            ),\n            med.dosage && React.createElement("span", { style: { display: "inline-block", minWidth: "150px" } },\n              `Dosage: ${med.dosage}`\n            ),\n            med.duration && React.createElement("span", { style: { display: "inline-block" } },\n              `${med.duration} Days`\n            )\n          )\n        )\n      )\n    ),\n\n    // Additional Notes Section\n    formData.notes && React.createElement("div", { style: styles.section },\n      React.createElement("span", { style: styles.sectionTitle }, "Additional Notes:"),\n      React.createElement("span", { style: styles.sectionContent }, formData.notes)\n    ),\n\n    // Doctor\'s Signature\n    React.createElement("div", { \n      style: { width: "100%", textAlign: "right", marginTop: "10px" }\n    },\n      React.createElement("span", { \n        style: { fontSize: "13px", fontWeight: "bold" }\n      }, "Doctor\'s Signature")\n    )\n  );\n}'},2730:(e,t,n)=>{"use strict";var r=n(5043),a=n(7067);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function f(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function y(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!u.call(p,e)||!u.call(h,e)&&(m.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,x);v[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,x);v[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,x);v[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var I,L=Object.assign;function F(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function $(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case S:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case D:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){Z(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,_e=null;function Se(e){if(e=ya(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=ja(t),we(e.stateNode,e.type,t))}}function Ee(e){Ne?_e?_e.push(e):_e=[e]:Ne=e}function Ce(){if(Ne){var e=Ne,t=_e;if(_e=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function De(e,t){return e(t)}function Te(){}var ke=!1;function Ae(e,t,n){if(ke)return e(t,n);ke=!0;try{return De(e,t,n)}finally{ke=!1,(null!==Ne||null!==_e)&&(Te(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=ja(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(d)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(de){Oe=!1}function Me(e,t,n,r,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Ie=!1,Le=null,Fe=!1,Be=null,We={onError:function(e){Ie=!0,Le=e}};function $e(e,t,n,r,a,s,i,o,l){Ie=!1,Le=null,Me.apply(We,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return He(a),e;if(i===r)return He(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Ke=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Xe=a.unstable_requestPaint,Ze=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,Qe=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~a;0!==o?r=ut(o):0!==(s&=i)&&(r=ut(s))}else 0!==(i=n&~a)?r=ut(i):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,wt,Nt,_t,St,Et=!1,Ct=[],Dt=null,Tt=null,kt=null,At=new Map,Pt=new Map,Ot=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function It(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=ya(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=xa(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,(function(){Nt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ya(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function Wt(){Et=!1,null!==Dt&&Ft(Dt)&&(Dt=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==kt&&Ft(kt)&&(kt=null),At.forEach(Bt),Pt.forEach(Bt)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Wt)))}function Ut(e){function t(t){return $t(t,e)}if(0<Ct.length){$t(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Dt&&$t(Dt,e),null!==Tt&&$t(Tt,e),null!==kt&&$t(kt,e),At.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ot.shift()}var zt=b.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,r){var a=yt,s=zt.transition;zt.transition=null;try{yt=1,Gt(e,t,n,r)}finally{yt=a,zt.transition=s}}function qt(e,t,n,r){var a=yt,s=zt.transition;zt.transition=null;try{yt=4,Gt(e,t,n,r)}finally{yt=a,zt.transition=s}}function Gt(e,t,n,r){if(Ht){var a=Yt(e,t,n,r);if(null===a)Hr(e,t,r,Kt,n),Mt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Dt=It(Dt,e,t,n,r,a),!0;case"dragenter":return Tt=It(Tt,e,t,n,r,a),!0;case"mouseover":return kt=It(kt,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return At.set(s,It(At.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Pt.set(s,It(Pt.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==a;){var s=ya(a);if(null!==s&&jt(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Kt,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=xa(e=je(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Jt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Jt,r=n.length,a="value"in Zt?Zt.value:Zt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return Qt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(cn),un=L({},cn,{view:0,detail:0}),mn=an(un),hn=L({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=an(hn),fn=an(L({},hn,{dataTransfer:0})),vn=an(L({},un,{relatedTarget:0})),gn=an(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(xn),bn=an(L({},cn,{data:0})),jn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Sn(){return _n}var En=L({},un,{key:function(e){if(e.key){var t=jn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(En),Dn=an(L({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(L({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),kn=an(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),On=[9,13,27,32],Rn=d&&"CompositionEvent"in window,Mn=null;d&&"documentMode"in document&&(Mn=document.documentMode);var In=d&&"TextEvent"in window&&!Mn,Ln=d&&(!Rn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Vn(e,t,n,r){Ee(r),0<(t=qr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Gn=null;function Kn(e){Fr(e,0)}function Yn(e){if(G(ba(e)))return e}function Xn(e,t){if("change"===e)return t}var Zn=!1;if(d){var Jn;if(d){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Jn=Qn}else Jn=!1;Zn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Gn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Vn(t,Gn,e,je(e)),Ae(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function ir(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!u.call(t,a)||!or(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=mr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=dr(n,s);var i=dr(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=d&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,xr=null,yr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==vr||vr!==K(r)||("selectionStart"in(r=vr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&lr(xr,r)||(xr=r,0<(r=qr(gr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function jr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:jr("Animation","AnimationEnd"),animationiteration:jr("Animation","AnimationIteration"),animationstart:jr("Animation","AnimationStart"),transitionend:jr("Transition","TransitionEnd")},Nr={},_r={};function Sr(e){if(Nr[e])return Nr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Nr[e]=n[t];return e}d&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Er=Sr("animationend"),Cr=Sr("animationiteration"),Dr=Sr("animationstart"),Tr=Sr("transitionend"),kr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){kr.set(e,t),l(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Rr=Ar[Or];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(Dr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,o,l,c){if($e.apply(this,arguments),Ie){if(!Ie)throw Error(s(198));var d=Le;Ie=!1,Le=null,Fe||(Fe=!0,Be=d)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Lr(a,o,c),s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Lr(a,o,c),s=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[fa];void 0===n&&(n=t[fa]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Wr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[$r]){e[$r]=!0,i.forEach((function(t){"selectionchange"!==t&&(Ir.has(t)||Wr(t,!1,e),Wr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,Wr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Xt(t)){case 1:var a=Vt;break;case 4:a=qt;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=xa(o)))return;if(5===(l=i.tag)||6===l){r=s=i;continue e}o=o.parentNode}}r=r.return}Ae((function(){var r=s,a=je(n),i=[];e:{var o=kr.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=vn;break;case"focusout":c="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Er:case Cr:case Dr:l=gn;break;case Tr:l=kn;break;case"scroll":l=mn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Dn}var d=0!==(4&t),u=!d&&"scroll"===e,m=d?null!==o?o+"Capture":null:o;d=[];for(var h,p=r;null!==p;){var f=(h=p).stateNode;if(5===h.tag&&null!==f&&(h=f,null!==m&&(null!=(f=Pe(p,m))&&d.push(Vr(p,f,h)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,n,a),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!xa(c)&&!c[pa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xa(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=pn,f="onMouseLeave",m="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Dn,f="onPointerLeave",m="onPointerEnter",p="pointer"),u=null==l?o:ba(l),h=null==c?o:ba(c),(o=new d(f,p+"leave",l,n,a)).target=u,o.relatedTarget=h,f=null,xa(a)===r&&((d=new d(m,p+"enter",c,n,a)).target=h,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(m=c,p=0,h=d=l;h;h=Gr(h))p++;for(h=0,f=m;f;f=Gr(f))h++;for(;0<p-h;)d=Gr(d),p--;for(;0<h-p;)m=Gr(m),h--;for(;p--;){if(d===m||null!==m&&d===m.alternate)break e;d=Gr(d),m=Gr(m)}d=null}else d=null;null!==l&&Kr(i,o,l,d,!1),null!==c&&null!==u&&Kr(i,u,c,d,!0)}if("select"===(l=(o=r?ba(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var v=Xn;else if(Hn(o))if(Zn)v=ir;else{v=ar;var g=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(v=sr);switch(v&&(v=v(e,r))?Vn(i,v,n,a):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=r?ba(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,xr=null);break;case"focusout":xr=gr=vr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(i,n,a);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(i,n,a)}var x;if(Rn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Un?Wn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Ln&&"ko"!==n.locale&&(Un||"onCompositionStart"!==y?"onCompositionEnd"===y&&Un&&(x=en()):(Jt="value"in(Zt=a)?Zt.value:Zt.textContent,Un=!0)),0<(g=qr(r,y)).length&&(y=new bn(y,e,null,n,a),i.push({event:y,listeners:g}),x?y.data=x:null!==(x=$n(n))&&(y.data=x))),(x=In?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Rn&&Wn(e,t)?(e=en(),Qt=Jt=Zt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(a=new bn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=x))}Fr(i,t)}))}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Pe(e,n))&&r.unshift(Vr(e,s,a)),null!=(s=Pe(e,t))&&r.push(Vr(e,s,a))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Pe(n,s))&&i.unshift(Vr(n,l,o)):a||null!=(l=Pe(n,s))&&i.push(Vr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(s(425))}function Qr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Ut(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ma="__reactFiber$"+ua,ha="__reactProps$"+ua,pa="__reactContainer$"+ua,fa="__reactEvents$"+ua,va="__reactListeners$"+ua,ga="__reactHandles$"+ua;function xa(e){var t=e[ma];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ma]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=da(e);null!==e;){if(n=e[ma])return n;e=da(e)}return t}n=(e=n).parentNode}return null}function ya(e){return!(e=e[ma]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ja(e){return e[ha]||null}var wa=[],Na=-1;function _a(e){return{current:e}}function Sa(e){0>Na||(e.current=wa[Na],wa[Na]=null,Na--)}function Ea(e,t){Na++,wa[Na]=e.current,e.current=t}var Ca={},Da=_a(Ca),Ta=_a(!1),ka=Ca;function Aa(e,t){var n=e.type.contextTypes;if(!n)return Ca;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Sa(Ta),Sa(Da)}function Ra(e,t,n){if(Da.current!==Ca)throw Error(s(168));Ea(Da,t),Ea(Ta,n)}function Ma(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(s(108,z(e)||"Unknown",a));return L({},n,r)}function Ia(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,ka=Da.current,Ea(Da,e),Ea(Ta,Ta.current),!0}function La(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ma(e,t,ka),r.__reactInternalMemoizedMergedChildContext=e,Sa(Ta),Sa(Da),Ea(Da,e)):Sa(Ta),Ea(Ta,n)}var Fa=null,Ba=!1,Wa=!1;function $a(e){null===Fa?Fa=[e]:Fa.push(e)}function Ua(){if(!Wa&&null!==Fa){Wa=!0;var e=0,t=yt;try{var n=Fa;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fa=null,Ba=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),Ge(Qe,Ua),a}finally{yt=t,Wa=!1}}return null}var za=[],Ha=0,Va=null,qa=0,Ga=[],Ka=0,Ya=null,Xa=1,Za="";function Ja(e,t){za[Ha++]=qa,za[Ha++]=Va,Va=e,qa=t}function Qa(e,t,n){Ga[Ka++]=Xa,Ga[Ka++]=Za,Ga[Ka++]=Ya,Ya=e;var r=Xa;e=Za;var a=32-it(r)-1;r&=~(1<<a),n+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Xa=1<<32-it(t)+a|n<<a|r,Za=s+e}else Xa=1<<s|n<<a|r,Za=e}function es(e){null!==e.return&&(Ja(e,1),Qa(e,1,0))}function ts(e){for(;e===Va;)Va=za[--Ha],za[Ha]=null,qa=za[--Ha],za[Ha]=null;for(;e===Ya;)Ya=Ga[--Ka],Ga[Ka]=null,Za=Ga[--Ka],Ga[Ka]=null,Xa=Ga[--Ka],Ga[Ka]=null}var ns=null,rs=null,as=!1,ss=null;function is(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ya?{id:Xa,overflow:Za}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(n.nextSibling);var r=ns;t&&os(e,t)?is(r,n):(e.flags=-4097&e.flags|2,as=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!as)return ds(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ms(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ca(e.stateNode.nextSibling):null;return!0}function ms(){for(var e=rs;e;)e=ca(e.nextSibling)}function hs(){rs=ns=null,as=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var fs=b.ReactCurrentBatchConfig;function vs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xs(e){return(0,e._init)(e._payload)}function ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===N?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&xs(s)===t.type)?((r=a(t,n.props)).ref=vs(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=vs(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=vs(e,null,t),n.return=e,n;case w:return(t=Fc(t,e.mode,n)).return=e,t;case P:return m(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;gs(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case j:return n.key===a?c(e,t,n,r):null;case w:return n.key===a?d(e,t,n,r):null;case P:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||M(n))return null!==a?null:u(e,t,n,r,null);gs(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case w:return d(t,e=e.get(null===r.key?n:r.key)||null,r,a);case P:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||M(r))return u(t,e=e.get(n)||null,r,a,null);gs(t,r)}return null}function f(a,s,o,l){for(var c=null,d=null,u=s,f=s=0,v=null;null!==u&&f<o.length;f++){u.index>f?(v=u,u=null):v=u.sibling;var g=h(a,u,o[f],l);if(null===g){null===u&&(u=v);break}e&&u&&null===g.alternate&&t(a,u),s=i(g,s,f),null===d?c=g:d.sibling=g,d=g,u=v}if(f===o.length)return n(a,u),as&&Ja(a,f),c;if(null===u){for(;f<o.length;f++)null!==(u=m(a,o[f],l))&&(s=i(u,s,f),null===d?c=u:d.sibling=u,d=u);return as&&Ja(a,f),c}for(u=r(a,u);f<o.length;f++)null!==(v=p(u,a,f,o[f],l))&&(e&&null!==v.alternate&&u.delete(null===v.key?f:v.key),s=i(v,s,f),null===d?c=v:d.sibling=v,d=v);return e&&u.forEach((function(e){return t(a,e)})),as&&Ja(a,f),c}function v(a,o,l,c){var d=M(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,f=o,v=o=0,g=null,x=l.next();null!==f&&!x.done;v++,x=l.next()){f.index>v?(g=f,f=null):g=f.sibling;var y=h(a,f,x.value,c);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(a,f),o=i(y,o,v),null===u?d=y:u.sibling=y,u=y,f=g}if(x.done)return n(a,f),as&&Ja(a,v),d;if(null===f){for(;!x.done;v++,x=l.next())null!==(x=m(a,x.value,c))&&(o=i(x,o,v),null===u?d=x:u.sibling=x,u=x);return as&&Ja(a,v),d}for(f=r(a,f);!x.done;v++,x=l.next())null!==(x=p(f,a,v,x.value,c))&&(e&&null!==x.alternate&&f.delete(null===x.key?v:x.key),o=i(x,o,v),null===u?d=x:u.sibling=x,u=x);return e&&f.forEach((function(e){return t(a,e)})),as&&Ja(a,v),d}return function e(r,s,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){n(r,d.sibling),(s=a(d,i.props.children)).return=r,r=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&xs(c)===d.type){n(r,d.sibling),(s=a(d,i.props)).ref=vs(r,d,i),s.return=r,r=s;break e}n(r,d);break}t(r,d),d=d.sibling}i.type===N?((s=Mc(i.props.children,r.mode,l,i.key)).return=r,r=s):((l=Rc(i.type,i.key,i.props,null,r.mode,l)).ref=vs(r,s,i),l.return=r,r=l)}return o(r);case w:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(r,s.sibling),(s=a(s,i.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(i,r.mode,l)).return=r,r=s}return o(r);case P:return e(r,s,(d=i._init)(i._payload),l)}if(te(i))return f(r,s,i,l);if(M(i))return v(r,s,i,l);gs(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(r,s.sibling),(s=a(s,i)).return=r,r=s):(n(r,s),(s=Lc(i,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var bs=ys(!0),js=ys(!1),ws=_a(null),Ns=null,_s=null,Ss=null;function Es(){Ss=_s=Ns=null}function Cs(e){var t=ws.current;Sa(ws),e._currentValue=t}function Ds(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){Ns=e,Ss=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function ks(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===Ns)throw Error(s(308));_s=e,Ns.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var As=null;function Ps(e){null===As?As=[e]:As.push(e)}function Os(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ps(t)):(n.next=a.next,a.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Is(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Dl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Rs(e,n)}return null===(a=r.interleaved)?(t.next=t,Ps(r)):(t.next=a.next,a.next=t),r.interleaved=t,Rs(e,n)}function Ws(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}function $s(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Us(e,t,n,r){var a=e.updateQueue;Ms=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(i=0,d=c=l=null,o=s;;){var m=o.lane,h=o.eventTime;if((r&m)===m){null!==d&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(m=t,h=n,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(h,u,m);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(m="function"===typeof(p=f.payload)?p.call(h,u,m):p)||void 0===m)break e;u=L({},u,m);break e;case 2:Ms=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(m=a.effects)?a.effects=[o]:m.push(o))}else h={eventTime:h,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=h,l=u):d=d.next=h,i|=m;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(m=o).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Il|=i,e.lanes=i,e.memoizedState=u}}function zs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var Hs={},Vs=_a(Hs),qs=_a(Hs),Gs=_a(Hs);function Ks(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Ea(Gs,t),Ea(qs,e),Ea(Vs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa(Vs),Ea(Vs,t)}function Xs(){Sa(Vs),Sa(qs),Sa(Gs)}function Zs(e){Ks(Gs.current);var t=Ks(Vs.current),n=le(t,e.type);t!==n&&(Ea(qs,e),Ea(Vs,n))}function Js(e){qs.current===e&&(Sa(Vs),Sa(qs))}var Qs=_a(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=b.ReactCurrentDispatcher,ai=b.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,mi=0;function hi(){throw Error(s(321))}function pi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function fi(e,t,n,r,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Ji:Qi,e=n(r,a),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=n(r,a)}while(di)}if(ri.current=Zi,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function vi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function xi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function yi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=xi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=m,o=r):c=c.next=m,ii.lanes|=u,Il|=u}d=d.next}while(null!==d&&d!==i);null===c?o=r:c.next=l,or(r,t.memoizedState)||(yo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Il|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ji(e){var t=xi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);or(i,t.memoizedState)||(yo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function wi(){}function Ni(e,t){var n=ii,r=xi(),a=t(),i=!or(r.memoizedState,a);if(i&&(r.memoizedState=a,yo=!0),r=r.queue,Mi(Ei.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,ki(9,Si.bind(null,n,r,a,t),void 0,null),null===Tl)throw Error(s(349));0!==(30&si)||_i(n,t,a)}return a}function _i(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Si(e,t,n,r){t.value=n,t.getSnapshot=r,Ci(t)&&Di(e)}function Ei(e,t,n){return n((function(){Ci(t)&&Di(e)}))}function Ci(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Di(e){var t=Rs(e,1);null!==t&&nc(t,e,1,-1)}function Ti(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function ki(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ai(){return xi().memoizedState}function Pi(e,t,n,r){var a=gi();ii.flags|=e,a.memoizedState=ki(1|t,n,void 0,void 0===r?null:r)}function Oi(e,t,n,r){var a=xi();r=void 0===r?null:r;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==r&&pi(r,i.deps))return void(a.memoizedState=ki(t,n,s,r))}ii.flags|=e,a.memoizedState=ki(1|t,n,s,r)}function Ri(e,t){return Pi(8390656,8,e,t)}function Mi(e,t){return Oi(2048,8,e,t)}function Ii(e,t){return Oi(4,2,e,t)}function Li(e,t){return Oi(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oi(4,4,Fi.bind(null,t,e),n)}function Wi(){}function $i(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ui(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zi(e,t,n){return 0===(21&si)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n):(or(n,t)||(n=ft(),ii.lanes|=n,Il|=n,e.baseState=!0),t)}function Hi(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{yt=n,ai.transition=r}}function Vi(){return xi().memoizedState}function qi(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ki(e))Yi(t,n);else if(null!==(n=Os(e,t,n,r))){nc(n,e,r,ec()),Xi(n,t,r)}}function Gi(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ki(e))Yi(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(a.next=a,Ps(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Os(e,t,a,r))&&(nc(n,e,r,a=ec()),Xi(n,t,r))}}function Ki(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Yi(e,t){di=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}var Zi={readContext:ks,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},Ji={readContext:ks,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:ks,useEffect:Ri,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pi(4194308,4,Fi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pi(4,2,e,t)},useMemo:function(e,t){var n=gi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Ti,useDebugValue:Wi,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Ti(!1),t=e[0];return e=Hi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,a=gi();if(as){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Tl)throw Error(s(349));0!==(30&si)||_i(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Ri(Ei.bind(null,r,i,e),[e]),r.flags|=2048,ki(9,Si.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=gi(),t=Tl.identifierPrefix;if(as){var n=Za;t=":"+t+"R"+(n=(Xa&~(1<<32-it(Xa)-1)).toString(32)+n),0<(n=ui++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qi={readContext:ks,useCallback:$i,useContext:ks,useEffect:Mi,useImperativeHandle:Bi,useInsertionEffect:Ii,useLayoutEffect:Li,useMemo:Ui,useReducer:bi,useRef:Ai,useState:function(){return bi(yi)},useDebugValue:Wi,useDeferredValue:function(e){return zi(xi(),oi.memoizedState,e)},useTransition:function(){return[bi(yi)[0],xi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1},eo={readContext:ks,useCallback:$i,useContext:ks,useEffect:Mi,useImperativeHandle:Bi,useInsertionEffect:Ii,useLayoutEffect:Li,useMemo:Ui,useReducer:ji,useRef:Ai,useState:function(){return ji(yi)},useDebugValue:Wi,useDeferredValue:function(e){var t=xi();return null===oi?t.memoizedState=e:zi(t,oi.memoizedState,e)},useTransition:function(){return[ji(yi)[0],xi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=Fs(r,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,a))&&(nc(t,e,a,r),Ws(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=Fs(r,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,a))&&(nc(t,e,a,r),Ws(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Fs(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Bs(e,a,r))&&(nc(t,e,r,n),Ws(t,e,r))}};function ao(e,t,n,r,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,s))}function so(e,t,n){var r=!1,a=Ca,s=t.contextType;return"object"===typeof s&&null!==s?s=ks(s):(a=Pa(t)?ka:Da.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Aa(e,a):Ca),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Is(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=ks(s):(s=Pa(t)?ka:Da.current,a.context=Aa(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ro.enqueueReplaceState(a,a.state,null),Us(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var mo="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=r),uo(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new mo;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Bs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var xo=b.ReactCurrentOwner,yo=!1;function bo(e,t,n,r){t.child=null===e?js(t,null,n,r):bs(t,e.child,n,r)}function jo(e,t,n,r,a){n=n.render;var s=t.ref;return Ts(t,a),r=fi(e,t,n,r,s,a),n=vi(),null===e||yo?(as&&n&&es(t),t.flags|=1,bo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function wo(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Ho(e,t,a)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(yo=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,Ho(e,t,a);0!==(131072&e.flags)&&(yo=!0)}}return Eo(e,t,n,r,a)}function _o(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ea(Ol,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ea(Ol,Pl),Pl|=r;return bo(e,t,a,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,r,a){var s=Pa(n)?ka:Da.current;return s=Aa(t,s),Ts(t,a),n=fi(e,t,n,r,s,a),r=vi(),null===e||yo?(as&&r&&es(t),t.flags|=1,bo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function Co(e,t,n,r,a){if(Pa(n)){var s=!0;Ia(t)}else s=!1;if(Ts(t,a),null===t.stateNode)zo(e,t),so(t,n,r),oo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=ks(c):c=Aa(t,c=Pa(n)?ka:Da.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),Ms=!1;var m=t.memoizedState;i.state=m,Us(t,r,i,a),l=t.memoizedState,o!==r||m!==l||Ta.current||Ms?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=Ms||ao(t,n,o,r,m,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ls(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,m=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=ks(l):l=Aa(t,l=Pa(n)?ka:Da.current);var h=n.getDerivedStateFromProps;(d="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||m!==l)&&io(t,i,r,l),Ms=!1,m=t.memoizedState,i.state=m,Us(t,r,i,a);var p=t.memoizedState;o!==u||m!==p||Ta.current||Ms?("function"===typeof h&&(no(t,n,h,r),p=t.memoizedState),(c=Ms||ao(t,n,c,r,m,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Do(e,t,n,r,s,a)}function Do(e,t,n,r,a,s){So(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&La(t,n,!1),Ho(e,t,s);r=t.stateNode,xo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,a&&La(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Ra(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ra(0,t.context,!1),Ys(e,t.containerInfo)}function ko(e,t,n,r,a){return hs(),ps(a),t.flags|=256,bo(e,t,n,r),t.child}var Ao,Po,Oo,Ro,Mo={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,a=t.pendingProps,i=Qs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ea(Qs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Ic(l,a,0,null),e=Mc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Io(n),t.memoizedState=Mo,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,o){if(n)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Ic({mode:"visible",children:r.children},a,0,null),(i=Mc(i,a,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Io(o),t.memoizedState=Mo,i);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Bo(e,t,o,r=co(i=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(r=Tl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Rs(e,a),nc(r,e,a,-1))}return fc(),Bo(e,t,o,r=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,rs=ca(a.nextSibling),ns=t,as=!0,ss=null,null!==e&&(Ga[Ka++]=Xa,Ga[Ka++]=Za,Ga[Ka++]=Ya,Xa=e.id,Za=e.overflow,Ya=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(o){o=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Oc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Oc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Io(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,a}return e=(o=e.child).sibling,a=Oc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Fo(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ds(e.return,t,n)}function $o(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function Uo(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Qs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wo(e,n,t);else if(19===e.tag)Wo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ea(Qs,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),$o(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}$o(t,!0,n,null,s);break;case"together":$o(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Pa(t.type)&&Oa(),qo(t),null;case 3:return r=t.stateNode,Xs(),Sa(Ta),Sa(Da),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Po(e,t),qo(t),null;case 5:Js(t);var a=Ks(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return qo(t),null}if(e=Ks(Vs.current),us(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ma]=t,r[ha]=i,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(a=0;a<Mr.length;a++)Br(Mr[a],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":X(r,i),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Br("invalid",r);break;case"textarea":ae(r,i),Br("invalid",r)}for(var l in xe(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":q(r),Q(r,i,!0);break;case"textarea":q(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Qr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ma]=t,e[ha]=r,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Br("cancel",e),Br("close",e),a=r;break;case"iframe":case"object":case"embed":Br("load",e),a=r;break;case"video":case"audio":for(a=0;a<Mr.length;a++)Br(Mr[a],e);a=r;break;case"source":Br("error",e),a=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),a=r;break;case"details":Br("toggle",e),a=r;break;case"input":X(e,r),a=Y(e,r),Br("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Br("invalid",e)}for(i in xe(n,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ve(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Br("scroll",e):null!=d&&y(e,i,d,l))}switch(n){case"input":q(e),Q(e,r,!1);break;case"textarea":q(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ks(Gs.current),Ks(Vs.current),us(t)){if(r=t.stateNode,n=t.memoizedProps,r[ma]=t,(i=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ma]=t,t.stateNode=r}return qo(t),null;case 13:if(Sa(Qs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ms(),hs(),t.flags|=98560,i=!1;else if(i=us(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ma]=t}else hs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Qs.current)?0===Rl&&(Rl=3):fc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Xs(),Po(e,t),null===e&&Ur(t.stateNode.containerInfo),qo(t),null;case 10:return Cs(t.type._context),qo(t),null;case 19:if(Sa(Qs),null===(i=t.memoizedState))return qo(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Vo(i,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ea(Qs,1&Qs.current|2),t.child}e=e.sibling}null!==i.tail&&Ze()>Ul&&(t.flags|=128,r=!0,Vo(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return qo(t),null}else 2*Ze()-i.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ze(),t.sibling=null,n=Qs.current,Ea(Qs,r?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ko(e,t){switch(ts(t),t.tag){case 1:return Pa(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Sa(Ta),Sa(Da),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Sa(Qs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));hs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(Qs),null;case 4:return Xs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Oo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ks(Vs.current);var s,i=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),i=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(d in xe(n,r),n=null,a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=a?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Br("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Xo=!1,Zo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Qo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){_c(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,n,s)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ma],delete t[ha],delete t[fa],delete t[va],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function ml(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Xo||Qo(n,t);case 6:var r=dl,a=ul;dl=null,ml(e,t,n),ul=a,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Ut(e)):la(dl,n.stateNode));break;case 4:r=dl,a=ul,dl=n.stateNode.containerInfo,ul=!0,ml(e,t,n),dl=r,ul=a;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(n,t,i),a=a.next}while(a!==r)}ml(e,t,n);break;case 1:if(!Xo&&(Qo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){_c(n,t,o)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,ml(e,t,n),Xo=r):ml(e,t,n);break;default:ml(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach((function(t){var r=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));hl(i,o,a),dl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){_c(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(v){_c(e,e.return,v)}try{nl(5,e,e.return)}catch(v){_c(e,e.return,v)}}break;case 1:fl(t,e),gl(e),512&r&&null!==n&&Qo(n,n.return);break;case 5:if(fl(t,e),gl(e),512&r&&null!==n&&Qo(n,n.return),32&e.flags){var a=e.stateNode;try{me(a,"")}catch(v){_c(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Z(a,i),ye(l,o);var d=ye(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];"style"===u?ve(a,m):"dangerouslySetInnerHTML"===u?ue(a,m):"children"===u?me(a,m):y(a,u,m,d)}switch(l){case"input":J(a,i);break;case"textarea":se(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(a,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[ha]=i}catch(v){_c(e,e.return,v)}}break;case 6:if(fl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){_c(e,e.return,v)}}break;case 3:if(fl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(v){_c(e,e.return,v)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||($l=Ze())),4&r&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(d=Xo)||u,fl(t,e),Xo=d):fl(t,e),gl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jo=e,u=e.child;null!==u;){for(m=Jo=u;null!==Jo;){switch(p=(h=Jo).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:Qo(h,h.return);var f=h.stateNode;if("function"===typeof f.componentWillUnmount){r=h,n=h.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(v){_c(r,n,v)}}break;case 5:Qo(h,h.return);break;case 22:if(null!==h.memoizedState){jl(m);continue}}null!==p?(p.return=h,Jo=p):jl(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{a=m.stateNode,d?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=m.stateNode,o=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(v){_c(e,e.return,v)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(v){_c(e,e.return,v)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:fl(t,e),gl(e),4&r&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(me(a,""),r.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){_c(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Jo=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var a=Jo,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Yo;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Yo;var c=Xo;if(Yo=i,(Xo=l)&&!c)for(Jo=a;null!==Jo;)l=(i=Jo).child,22===i.tag&&null!==i.memoizedState?wl(a):null!==l?(l.return=i,Jo=l):wl(a);for(;null!==s;)Jo=s,yl(s,t,n),s=s.sibling;Jo=a,Yo=o,Xo=c}bl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Jo=s):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&zs(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&Ut(m)}}}break;default:throw Error(s(163))}Xo||512&t.flags&&al(t)}catch(h){_c(t,t.return,h)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function jl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_c(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){_c(t,a,l)}}var s=t.return;try{al(t)}catch(l){_c(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){_c(t,i,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var Nl,_l=Math.ceil,Sl=b.ReactCurrentDispatcher,El=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Dl=0,Tl=null,kl=null,Al=0,Pl=0,Ol=_a(0),Rl=0,Ml=null,Il=0,Ll=0,Fl=0,Bl=null,Wl=null,$l=0,Ul=1/0,zl=null,Hl=!1,Vl=null,ql=null,Gl=!1,Kl=null,Yl=0,Xl=0,Zl=null,Jl=-1,Ql=0;function ec(){return 0!==(6&Dl)?Ze():-1!==Jl?Jl:Jl=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Dl)&&0!==Al?Al&-Al:null!==fs.transition?(0===Ql&&(Ql=ft()),Ql):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Zl=null,Error(s(185));gt(e,n,r),0!==(2&Dl)&&e===Tl||(e===Tl&&(0===(2&Dl)&&(Ll|=n),4===Rl&&oc(e,Al)),rc(e,r),1===n&&0===Dl&&0===(1&t.mode)&&(Ul=Ze()+500,Ba&&Ua()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=ht(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=mt(e,e===Tl?Al:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ba=!0,$a(e)}(lc.bind(null,e)):$a(lc.bind(null,e)),ia((function(){0===(6&Dl)&&Ua()})),n=null;else{switch(bt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Jl=-1,Ql=0,0!==(6&Dl))throw Error(s(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=mt(e,e===Tl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var a=Dl;Dl|=2;var i=pc();for(Tl===e&&Al===t||(zl=null,Ul=Ze()+500,mc(e,t));;)try{xc();break}catch(l){hc(e,l)}Es(),Sl.current=i,Dl=a,null!==kl?t=0:(Tl=null,Al=0,t=Rl)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=sc(e,a))),1===t)throw n=Ml,mc(e,0),oc(e,r),rc(e,Ze()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!or(s(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vc(e,r))&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t))throw n=Ml,mc(e,0),oc(e,r),rc(e,Ze()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:jc(e,Wl,zl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=$l+500-Ze())){if(0!==mt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(jc.bind(null,e,Wl,zl),t);break}jc(e,Wl,zl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>a&&(a=o),r&=~i}if(r=a,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ra(jc.bind(null,e,Wl,zl),r);break}jc(e,Wl,zl);break;default:throw Error(s(329))}}}return rc(e,Ze()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Wl,Wl=n,null!==t&&ic(t)),e}function ic(e){null===Wl?Wl=e:Wl.push.apply(Wl,e)}function oc(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Dl))throw Error(s(327));wc();var t=mt(e,0);if(0===(1&t))return rc(e,Ze()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ml,mc(e,0),oc(e,t),rc(e,Ze()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Wl,zl),rc(e,Ze()),null}function cc(e,t){var n=Dl;Dl|=1;try{return e(t)}finally{0===(Dl=n)&&(Ul=Ze()+500,Ba&&Ua())}}function dc(e){null!==Kl&&0===Kl.tag&&0===(6&Dl)&&wc();var t=Dl;Dl|=1;var n=Cl.transition,r=yt;try{if(Cl.transition=null,yt=1,e)return e()}finally{yt=r,Cl.transition=n,0===(6&(Dl=t))&&Ua()}}function uc(){Pl=Ol.current,Sa(Ol)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==kl)for(n=kl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:Xs(),Sa(Ta),Sa(Da),ni();break;case 5:Js(r);break;case 4:Xs();break;case 13:case 19:Sa(Qs);break;case 10:Cs(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Tl=e,kl=e=Oc(e.current,null),Al=Pl=t,Rl=0,Ml=null,Fl=Ll=Il=0,Wl=Bl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}As=null}return e}function hc(e,t){for(;;){var n=kl;try{if(Es(),ri.current=Zi,ci){for(var r=ii.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ci=!1}if(si=0,li=oi=ii=null,di=!1,ui=0,El.current=null,null===n||null===n.return){Rl=1,Ml=t,kl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=vo(o);if(null!==p){p.flags&=-257,go(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var v=new Set;v.add(c),t.updateQueue=v}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(s(426))}else if(as&&1&l.mode){var g=vo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),ps(lo(c,l));break e}}i=c=lo(c,l),4!==Rl&&(Rl=2),null===Bl?Bl=[i]:Bl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,$s(i,ho(0,c,t));break e;case 1:l=c;var x=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof x.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===ql||!ql.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,$s(i,po(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,kl===n&&null!==n&&(kl=n=n.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Zi,null===e?Zi:e}function fc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Tl||0===(268435455&Il)&&0===(268435455&Ll)||oc(Tl,Al)}function vc(e,t){var n=Dl;Dl|=2;var r=pc();for(Tl===e&&Al===t||(zl=null,mc(e,t));;)try{gc();break}catch(a){hc(e,a)}if(Es(),Dl=n,Sl.current=r,null!==kl)throw Error(s(261));return Tl=null,Al=0,Rl}function gc(){for(;null!==kl;)yc(kl)}function xc(){for(;null!==kl&&!Ye();)yc(kl)}function yc(e){var t=Nl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?bc(e):kl=t,El.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Pl)))return void(kl=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(kl=n);if(null===e)return Rl=6,void(kl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kl=t);kl=t=e}while(null!==t);0===Rl&&(Rl=5)}function jc(e,t,n){var r=yt,a=Cl.transition;try{Cl.transition=null,yt=1,function(e,t,n,r){do{wc()}while(null!==Kl);if(0!==(6&Dl))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,i),e===Tl&&(kl=Tl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Tc(tt,(function(){return wc(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=yt;yt=1;var l=Dl;Dl|=4,El.current=null,function(e,t){if(ea=Ht,hr(e=mr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(j){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var p;m!==n||0!==a&&3!==m.nodeType||(l=o+a),m!==i||0!==r&&3!==m.nodeType||(c=o+r),3===m.nodeType&&(o+=m.nodeValue.length),null!==(p=m.firstChild);)h=m,m=p;for(;;){if(m===e)break t;if(h===n&&++d===a&&(l=o),h===i&&++u===r&&(c=o),null!==(p=m.nextSibling))break;h=(m=h).parentNode}m=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ht=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var v=f.memoizedProps,g=f.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:to(t.type,v),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(j){_c(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}f=tl,tl=!1}(e,n),vl(n,e),pr(ta),Ht=!!ea,ta=ea=null,e.current=n,xl(n,e,a),Xe(),Dl=l,yt=o,Cl.transition=i}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Yl=a),i=e.pendingLanes,0===i&&(ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Yl)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===Zl?Xl++:(Xl=0,Zl=e):Xl=0,Ua()}(e,t,n,r)}finally{Cl.transition=a,yt=r}return null}function wc(){if(null!==Kl){var e=bt(Yl),t=Cl.transition,n=yt;try{if(Cl.transition=null,yt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Dl))throw Error(s(331));var a=Dl;for(Dl|=4,Jo=e.current;null!==Jo;){var i=Jo,o=i.child;if(0!==(16&Jo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Jo=d;null!==Jo;){var u=Jo;switch(u.tag){case 0:case 11:case 15:nl(8,u,i)}var m=u.child;if(null!==m)m.return=u,Jo=m;else for(;null!==Jo;){var h=(u=Jo).sibling,p=u.return;if(sl(u),u===d){Jo=null;break}if(null!==h){h.return=p,Jo=h;break}Jo=p}}}var f=i.alternate;if(null!==f){var v=f.child;if(null!==v){f.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Jo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(i=Jo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var x=i.sibling;if(null!==x){x.return=i.return,Jo=x;break e}Jo=i.return}}var y=e.current;for(Jo=y;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=y;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){_c(l,l.return,w)}if(l===o){Jo=null;break e}var j=l.sibling;if(null!==j){j.return=l.return,Jo=j;break e}Jo=l.return}}if(Dl=a,Ua(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(w){}r=!0}return r}finally{yt=n,Cl.transition=t}}return!1}function Nc(e,t,n){e=Bs(e,t=ho(0,t=lo(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function _c(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Bs(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Al&n)===n&&(4===Rl||3===Rl&&(130023424&Al)===Al&&500>Ze()-$l?mc(e,0):Fl|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Rs(e,t))&&(gt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Dc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ec(e,n)}function Tc(e,t){return Ge(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new kc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,a,i){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Mc(n.children,a,i,t);case _:o=8,a|=8;break;case S:return(e=Ac(12,n,t,2|a)).elementType=S,e.lanes=i,e;case T:return(e=Ac(13,n,t,a)).elementType=T,e.lanes=i,e;case k:return(e=Ac(19,n,t,a)).elementType=k,e.lanes=i,e;case O:return Ic(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case C:o=9;break e;case D:o=11;break e;case A:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Mc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Ic(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Wc(e,t,n,r,a,s,i,o,l){return e=new Bc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Is(s),e}function $c(e){if(!e)return Ca;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pa(n))return Ma(e,n,t)}return t}function Uc(e,t,n,r,a,s,i,o,l){return(e=Wc(n,r,!0,e,0,s,0,o,l)).context=$c(null),n=e.current,(s=Fs(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Bs(n,s,a),e.current.lanes=a,gt(e,a,r),rc(e,r),e}function zc(e,t,n,r){var a=t.current,s=ec(),i=tc(a);return n=$c(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bs(a,t,i))&&(nc(e,a,i,s),Ws(e,a,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)yo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:To(t),hs();break;case 5:Zs(t);break;case 1:Pa(t.type)&&Ia(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ea(ws,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ea(Qs,1&Qs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Ea(Qs,1&Qs.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ea(Qs,1&Qs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Uo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(Qs,Qs.current),r)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,n)}return Ho(e,t,n)}(e,t,n);yo=0!==(131072&e.flags)}else yo=!1,as&&0!==(1048576&t.flags)&&Qa(t,qa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zo(e,t),e=t.pendingProps;var a=Aa(t,Da.current);Ts(t,n),a=fi(null,t,r,e,a,n);var i=vi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(r)?(i=!0,Ia(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Is(t),a.updater=ro,t.stateNode=a,a._reactInternals=t,oo(t,r,e,n),t=Do(null,t,r,!0,i,n)):(t.tag=0,as&&i&&es(t),bo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zo(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===D)return 11;if(e===A)return 14}return 2}(r),e=to(r,e),a){case 0:t=Eo(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=jo(null,t,r,e,n);break e;case 14:t=wo(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Eo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 1:return r=t.type,a=t.pendingProps,Co(e,t,r,a=t.elementType===r?a:to(r,a),n);case 3:e:{if(To(t),null===e)throw Error(s(387));r=t.pendingProps,a=(i=t.memoizedState).element,Ls(e,t),Us(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=ko(e,t,r,n,a=lo(Error(s(423)),t));break e}if(r!==a){t=ko(e,t,r,n,a=lo(Error(s(424)),t));break e}for(rs=ca(t.stateNode.containerInfo.firstChild),ns=t,as=!0,ss=null,n=js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hs(),r===a){t=Ho(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Zs(t),null===e&&cs(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,na(r,a)?o=null:null!==i&&na(r,i)&&(t.flags|=32),So(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Lo(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,jo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ea(ws,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===a.children&&!Ta.current){t=Ho(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Fs(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ds(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ds(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ts(t,n),r=r(a=ks(a)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return a=to(r=t.type,t.pendingProps),wo(e,t,r,a=to(r.type,a),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:to(r,a),zo(e,t),t.tag=1,Pa(r)?(e=!0,Ia(t)):e=!1,Ts(t,n),so(t,r,a),oo(t,r,a,n),Do(null,t,r,!0,e,n);case 19:return Uo(e,t,n);case 22:return _o(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Qc(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Hc(i);o.call(e)}}zc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=Hc(i);s.call(e)}}var i=Uc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=i,e[pa]=i.current,Ur(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Wc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pa]=l.current,Ur(8===e.nodeType?e.parentNode:e),dc((function(){zc(t,l,n,r)})),l}(n,t,e,a,r);return Hc(i)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));zc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){zc(null,e,null,null)})),t[pa]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Lt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(xt(t,1|n),rc(t,Ze()),0===(6&Dl)&&(Ul=Ze()+500,Ua()))}break;case 13:dc((function(){var t=Rs(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},wt=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Rs(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},_t=function(){return yt},St=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ja(r);if(!a)throw Error(s(90));G(r),J(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},De=cc,Te=dc;var ed={usingClientEntryPoint:!1,Events:[ya,ba,ja,Ee,Ce,cc]},td={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{at=rd.inject(nd),st=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Wc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return Qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,a,0,i,o),e[pa]=t.current,Ur(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return Qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){Qc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Qc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2750:(e,t,n)=>{"use strict";n.d(t,{N:()=>d});var r=n(4524),a=n(1620),s=n(849),i=n(2440),o=n(9504);function l(e,t){const n=(0,s.q)(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,l=(0,o.h)(e,t),c=(0,i.w)(t?.in||e,0);c.setFullYear(l,0,r),c.setHours(0,0,0,0);return(0,a.k)(c,t)}var c=n(2316);function d(e,t){const n=(0,c.a)(e,t?.in),s=+(0,a.k)(n,t)-+l(n,t);return Math.round(s/r.my)+1}},2754:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2777:(e,t,n)=>{var r=n(5193),a=n(2761),s=Object.prototype,i=s.hasOwnProperty,o=s.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!o.call(e,"callee")};e.exports=l},2794:(e,t,n)=>{var r=n(9742),a=n(7498),s=n(9096);e.exports=function(e,t){return e&&e.length?r(e,s(t,2),a):void 0}},2814:(e,t,n)=>{"use strict";n.d(t,{s:()=>i,t:()=>s});var r=n(5043);function a(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map((t=>{const r=a(t,e);return n||"function"!=typeof r||(n=!0),r}));if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():a(t[e],null)}}}}function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useCallback(s(...t),t)}},2866:(e,t,n)=>{var r=n(2969);e.exports=function(e){return function(t){return r(t,e)}}},2885:(e,t,n)=>{"use strict";n.d(t,{P:()=>s});var r=n(2440),a=n(2316);function s(e,t,n){const s=(0,a.a)(e,n?.in);if(isNaN(t))return(0,r.w)(n?.in||e,NaN);if(!t)return s;const i=s.getDate(),o=(0,r.w)(n?.in||e,s.getTime());o.setMonth(s.getMonth()+t+1,0);return i>=o.getDate()?o:(s.setFullYear(o.getFullYear(),o.getMonth(),i),s)}},2894:(e,t,n)=>{"use strict";n.d(t,{C:()=>i});var r=n(5043),a=n(2814),s=n(503);var i=e=>{const{present:t,children:n}=e,i=function(e){const[t,n]=r.useState(),a=r.useRef({}),i=r.useRef(e),l=r.useRef("none"),c=e?"mounted":"unmounted",[d,u]=function(e,t){return r.useReducer(((e,n)=>t[e][n]??e),e)}(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect((()=>{const e=o(a.current);l.current="mounted"===d?e:"none"}),[d]),(0,s.N)((()=>{const t=a.current,n=i.current;if(n!==e){const r=l.current,a=o(t);if(e)u("MOUNT");else if("none"===a||"none"===t?.display)u("UNMOUNT");else{u(n&&r!==a?"ANIMATION_OUT":"UNMOUNT")}i.current=e}}),[e,u]),(0,s.N)((()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,r=r=>{const s=o(a.current).includes(r.animationName);if(r.target===t&&s&&(u("ANIMATION_END"),!i.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout((()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)}))}},s=e=>{e.target===t&&(l.current=o(a.current))};return t.addEventListener("animationstart",s),t.addEventListener("animationcancel",r),t.addEventListener("animationend",r),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",s),t.removeEventListener("animationcancel",r),t.removeEventListener("animationend",r)}}u("ANIMATION_END")}),[t,u]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:r.useCallback((e=>{e&&(a.current=getComputedStyle(e)),n(e)}),[])}}(t),l="function"===typeof n?n({present:i.isPresent}):r.Children.only(n),c=(0,a.s)(i.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(l));return"function"===typeof n||i.isPresent?r.cloneElement(l,{ref:c}):null};function o(e){return e?.animationName||"none"}i.displayName="Presence"},2929:(e,t,n)=>{var r=n(6552).Uint8Array;e.exports=r},2969:(e,t,n)=>{var r=n(5324),a=n(914);e.exports=function(e,t){for(var n=0,s=(t=r(t,e)).length;null!=e&&n<s;)e=e[a(t[n++])];return n&&n==s?e:void 0}},3003:(e,t,n)=>{"use strict";n.d(t,{Kq:()=>f,d4:()=>_,wA:()=>j});var r=n(5043),a=n(7237);function s(e){e()}var i={notify(){},get:()=>[]};function o(e,t){let n,r=i,a=0,o=!1;function l(){u.onStateChange&&u.onStateChange()}function c(){a++,n||(n=t?t.addNestedSub(l):e.subscribe(l),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){s((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){r&&null!==e&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function d(){a--,n&&0===a&&(n(),n=void 0,r.clear(),r=i)}const u={addNestedSub:function(e){c();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),d())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:l,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,c())},tryUnsubscribe:function(){o&&(o=!1,d())},getListeners:()=>r};return u}var l=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),c=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),d=(()=>l||c?r.useLayoutEffect:r.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var u=Symbol.for("react-redux-context"),m="undefined"!==typeof globalThis?globalThis:{};function h(){if(!r.createContext)return{};const e=m[u]??=new Map;let t=e.get(r.createContext);return t||(t=r.createContext(null),e.set(r.createContext,t)),t}var p=h();var f=function(e){const{children:t,context:n,serverState:a,store:s}=e,i=r.useMemo((()=>{const e=o(s);return{store:s,subscription:e,getServerState:a?()=>a:void 0}}),[s,a]),l=r.useMemo((()=>s.getState()),[s]);d((()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==s.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[i,l]);const c=n||p;return r.createElement(c.Provider,{value:i},t)};function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return function(){return r.useContext(e)}}var g=v();function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;const t=e===p?g:v(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var y=x();function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;const t=e===p?y:x(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var j=b(),w=(e,t)=>e===t;function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;const t=e===p?g:v(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:s=w}="function"===typeof n?{equalityFn:n}:n;const i=t(),{store:o,subscription:l,getServerState:c}=i,d=(r.useRef(!0),r.useCallback({[e.name]:t=>e(t)}[e.name],[e])),u=(0,a.useSyncExternalStoreWithSelector)(l.addNestedSub,o.getState,c||o.getState,d,s);return r.useDebugValue(u),u};return Object.assign(n,{withTypes:()=>n}),n}var _=N()},3028:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},3097:(e,t,n)=>{var r=n(2969);e.exports=function(e,t,n){var a=null==e?void 0:r(e,t);return void 0===a?n:a}},3124:(e,t,n)=>{"use strict";n.d(t,{X:()=>s});var r=n(5043),a=n(503);function s(e){const[t,n]=r.useState(void 0);return(0,a.N)((()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let a,s;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,s=t.blockSize}else a=e.offsetWidth,s=e.offsetHeight;n({width:a,height:s})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)}),[e]),t}},3141:function(e,t,n){var r,a;"undefined"!=typeof self&&self,e.exports=(r=n(5043),a=n(7950),function(){"use strict";var e={328:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PrintContextConsumer=t.PrintContext=void 0;var r=n(496),a=Object.prototype.hasOwnProperty.call(r,"createContext");t.PrintContext=a?r.createContext({}):null,t.PrintContextConsumer=t.PrintContext?t.PrintContext.Consumer:function(){return null}},428:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReactToPrint=void 0;var r=n(316),a=n(496),s=n(190),i=n(328),o=n(940),l=function(e){function t(){var t=e.apply(this,r.__spreadArray([],r.__read(arguments),!1))||this;return t.startPrint=function(e){var n=t.props,r=n.onAfterPrint,a=n.onPrintError,s=n.print,i=n.documentTitle;setTimeout((function(){var n,o;if(e.contentWindow)if(e.contentWindow.focus(),s)s(e).then((function(){return null==r?void 0:r()})).then((function(){return t.handleRemoveIframe()})).catch((function(e){a?a("print",e):t.logMessages(["An error was thrown by the specified `print` function"])}));else{if(e.contentWindow.print){var l=null!==(o=null===(n=e.contentDocument)||void 0===n?void 0:n.title)&&void 0!==o?o:"",c=e.ownerDocument.title;i&&(e.ownerDocument.title=i,e.contentDocument&&(e.contentDocument.title=i)),e.contentWindow.print(),i&&(e.ownerDocument.title=c,e.contentDocument&&(e.contentDocument.title=l))}else t.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);null==r||r(),t.handleRemoveIframe()}else t.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])}),500)},t.triggerPrint=function(e){var n=t.props,r=n.onBeforePrint,a=n.onPrintError;if(r){var s=r();s&&"function"==typeof s.then?s.then((function(){t.startPrint(e)})).catch((function(e){a&&a("onBeforePrint",e)})):t.startPrint(e)}else t.startPrint(e)},t.handlePrint=function(e){var n=t.props,a=n.bodyClass,i=n.content,o=n.copyStyles,l=n.fonts,c=n.pageStyle,d=n.nonce,u="function"==typeof e?e():null;if(u&&"function"==typeof i&&t.logMessages(['"react-to-print" received a `content` prop and a content param passed the callback return by `useReactToPrint. The `content` prop will be ignored.'],"warning"),u||"function"!=typeof i||(u=i()),void 0!==u)if(null!==u){var m=document.createElement("iframe");m.width="".concat(document.documentElement.clientWidth,"px"),m.height="".concat(document.documentElement.clientHeight,"px"),m.style.position="absolute",m.style.top="-".concat(document.documentElement.clientHeight+100,"px"),m.style.left="-".concat(document.documentElement.clientWidth+100,"px"),m.id="printWindow",m.srcdoc="<!DOCTYPE html>";var h=(0,s.findDOMNode)(u);if(h){var p=h.cloneNode(!0),f=p instanceof Text,v=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),g=f?[]:p.querySelectorAll("img"),x=f?[]:p.querySelectorAll("video"),y=l?l.length:0;t.numResourcesToLoad=v.length+g.length+x.length+y,t.resourcesLoaded=[],t.resourcesErrored=[];var b=function(e,n){t.resourcesLoaded.includes(e)?t.logMessages(["Tried to mark a resource that has already been handled",e],"debug"):(n?(t.logMessages(r.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],r.__read(n),!1)),t.resourcesErrored.push(e)):t.resourcesLoaded.push(e),t.resourcesLoaded.length+t.resourcesErrored.length===t.numResourcesToLoad&&t.triggerPrint(m))};m.onload=function(){var e,n,s,i;m.onload=null;var u=m.contentDocument||(null===(n=m.contentWindow)||void 0===n?void 0:n.document);if(u){u.body.appendChild(p),l&&((null===(s=m.contentDocument)||void 0===s?void 0:s.fonts)&&(null===(i=m.contentWindow)||void 0===i?void 0:i.FontFace)?l.forEach((function(e){var t=new FontFace(e.family,e.source,{weight:e.weight,style:e.style});m.contentDocument.fonts.add(t),t.loaded.then((function(){b(t)})).catch((function(e){b(t,["Failed loading the font:",t,"Load error:",e])}))})):(l.forEach((function(e){return b(e)})),t.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var v="function"==typeof c?c():c;if("string"!=typeof v)t.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof v,'". Styles from `pageStyle` will not be applied.')]);else{var y=u.createElement("style");d&&(y.setAttribute("nonce",d),u.head.setAttribute("nonce",d)),y.appendChild(u.createTextNode(v)),u.head.appendChild(y)}if(a&&(e=u.body.classList).add.apply(e,r.__spreadArray([],r.__read(a.split(" ")),!1)),!f){for(var j=f?[]:h.querySelectorAll("canvas"),w=u.querySelectorAll("canvas"),N=0;N<j.length;++N){var _=j[N],S=w[N].getContext("2d");S&&S.drawImage(_,0,0)}var E=function(e){var t=g[e],n=t.getAttribute("src");if(n){var r=new Image;r.onload=function(){return b(t)},r.onerror=function(e,n,r,a,s){return b(t,["Error loading <img>",t,"Error",s])},r.src=n}else b(t,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',t])};for(N=0;N<g.length;N++)E(N);var C=function(e){var t=x[e];t.preload="auto";var n=t.getAttribute("poster");if(n){var r=new Image;r.onload=function(){return b(t)},r.onerror=function(e,r,a,s,i){return b(t,["Error loading video poster",n,"for video",t,"Error:",i])},r.src=n}else t.readyState>=2?b(t):(t.onloadeddata=function(){return b(t)},t.onerror=function(e,n,r,a,s){return b(t,["Error loading video",t,"Error",s])},t.onstalled=function(){return b(t,["Loading video stalled, skipping",t])})};for(N=0;N<x.length;N++)C(N);var D="input",T=h.querySelectorAll(D),k=u.querySelectorAll(D);for(N=0;N<T.length;N++)k[N].value=T[N].value;var A="input[type=checkbox],input[type=radio]",P=h.querySelectorAll(A),O=u.querySelectorAll(A);for(N=0;N<P.length;N++)O[N].checked=P[N].checked;var R="select",M=h.querySelectorAll(R),I=u.querySelectorAll(R);for(N=0;N<M.length;N++)I[N].value=M[N].value}if(o)for(var L=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']"),F=function(e,n){var r=L[e];if("style"===r.tagName.toLowerCase()){var a=u.createElement(r.tagName),s=r.sheet;if(s){var i="";try{for(var o=s.cssRules.length,l=0;l<o;++l)"string"==typeof s.cssRules[l].cssText&&(i+="".concat(s.cssRules[l].cssText,"\r\n"))}catch(e){t.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",r],"warning")}a.setAttribute("id","react-to-print-".concat(e)),d&&a.setAttribute("nonce",d),a.appendChild(u.createTextNode(i)),u.head.appendChild(a)}}else if(r.getAttribute("href"))if(r.hasAttribute("disabled"))t.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",r],"warning"),b(r);else{for(var c=u.createElement(r.tagName),m=(l=0,r.attributes.length);l<m;++l){var h=r.attributes[l];h&&c.setAttribute(h.nodeName,h.nodeValue||"")}c.onload=function(){return b(c)},c.onerror=function(e,t,n,r,a){return b(c,["Failed to load",c,"Error:",a])},d&&c.setAttribute("nonce",d),u.head.appendChild(c)}else t.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",r],"warning"),b(r)},B=(N=0,L.length);N<B;++N)F(N)}0!==t.numResourcesToLoad&&o||t.triggerPrint(m)},t.handleRemoveIframe(!0),document.body.appendChild(m)}else t.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else t.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else t.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},t.handleRemoveIframe=function(e){var n=t.props.removeAfterPrint;if(e||n){var r=document.getElementById("printWindow");r&&document.body.removeChild(r)}},t.logMessages=function(e,n){void 0===n&&(n="error"),t.props.suppressErrors||("error"===n?console.error(e):"warning"===n?console.warn(e):"debug"===n&&console.debug(e))},t}return r.__extends(t,e),t.prototype.handleClick=function(e,t){var n=this,r=this.props,a=r.onBeforeGetContent,s=r.onPrintError;if(a){var i=a();i&&"function"==typeof i.then?i.then((function(){return n.handlePrint(t)})).catch((function(e){s&&s("onBeforeGetContent",e)})):this.handlePrint(t)}else this.handlePrint(t)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.trigger;if(n)return a.cloneElement(n(),{onClick:this.handleClick.bind(this)});if(!i.PrintContext)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var r={handlePrint:this.handleClick.bind(this)};return a.createElement(i.PrintContext.Provider,{value:r},t)},t.defaultProps=o.defaultProps,t}(a.Component);t.ReactToPrint=l},940:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=void 0,t.defaultProps={copyStyles:!0,pageStyle:"\n        @page {\n            /* Remove browser default header (title) and footer (url) */\n            margin: 0;\n        }\n        @media print {\n            body {\n                /* Tell browsers to print background colors */\n                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */\n                color-adjust: exact; /* Firefox */\n            }\n        }\n    ",removeAfterPrint:!1,suppressErrors:!1}},892:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useReactToPrint=void 0;var r=n(316),a=n(496),s=n(428),i=n(940),o=n(860),l=Object.prototype.hasOwnProperty.call(a,"useMemo")&&Object.prototype.hasOwnProperty.call(a,"useCallback");t.useReactToPrint=function(e){if(!l)return e.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var t=a.useMemo((function(){return new s.ReactToPrint(r.__assign(r.__assign({},i.defaultProps),e))}),[e]);return a.useCallback((function(e,n){return(0,o.wrapCallbackWithArgs)(t,t.handleClick,n)(e)}),[t])}},860:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCallbackWithArgs=void 0;var r=n(316);t.wrapCallbackWithArgs=function(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return t.apply(e,r.__spreadArray(r.__spreadArray([],r.__read(a),!1),r.__read(n),!1))}}},496:function(e){e.exports=r},190:function(e){e.exports=a},316:function(e,t,n){n.r(t),n.d(t,{__addDisposableResource:function(){return R},__assign:function(){return s},__asyncDelegator:function(){return S},__asyncGenerator:function(){return _},__asyncValues:function(){return E},__await:function(){return N},__awaiter:function(){return p},__classPrivateFieldGet:function(){return A},__classPrivateFieldIn:function(){return O},__classPrivateFieldSet:function(){return P},__createBinding:function(){return v},__decorate:function(){return o},__disposeResources:function(){return I},__esDecorate:function(){return c},__exportStar:function(){return g},__extends:function(){return a},__generator:function(){return f},__importDefault:function(){return k},__importStar:function(){return T},__makeTemplateObject:function(){return C},__metadata:function(){return h},__param:function(){return l},__propKey:function(){return u},__read:function(){return y},__rest:function(){return i},__runInitializers:function(){return d},__setFunctionName:function(){return m},__spread:function(){return b},__spreadArray:function(){return w},__spreadArrays:function(){return j},__values:function(){return x}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function o(e,t,n,r){var a,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(s<3?a(i):s>3?a(t,n,i):a(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i}function l(e,t){return function(n,r){t(n,r,e)}}function c(e,t,n,r,a,s){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=r.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?r.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),m=!1,h=n.length-1;h>=0;h--){var p={};for(var f in r)p[f]="access"===f?{}:r[f];for(var f in r.access)p.access[f]=r.access[f];p.addInitializer=function(e){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(e||null))};var v=(0,n[h])("accessor"===l?{get:u.get,set:u.set}:u[c],p);if("accessor"===l){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(o=i(v.get))&&(u.get=o),(o=i(v.set))&&(u.set=o),(o=i(v.init))&&a.unshift(o)}else(o=i(v))&&("field"===l?a.unshift(o):u[c]=o)}d&&Object.defineProperty(d,r.name,u),m=!0}function d(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function m(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var v=Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function g(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||v(t,e,n)}function x(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return i}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function j(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,a++)r[a]=s[i];return r}function w(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function N(e){return this instanceof N?(this.v=e,this):new N(e)}function _(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),s=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){a[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||o(e,t)}))})}function o(e,t){try{(n=a[e](t)).value instanceof N?Promise.resolve(n.value.v).then(l,c):d(s[0][2],n)}catch(e){d(s[0][3],e)}var n}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function S(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,a){t[r]=e[r]?function(t){return(n=!n)?{value:N(e[r](t)),done:!1}:a?a(t):t}:a}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=x(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,a){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,a,(t=e[n](t)).done,t.value)}))}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var D=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&v(t,e,n);return D(t,e),t}function k(e){return e&&e.__esModule?e:{default:e}}function A(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function P(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n}function O(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function R(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if("function"!=typeof r)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var M="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function I(e){function t(t){e.error=e.hasError?new M(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function n(){for(;e.stack.length;){var r=e.stack.pop();try{var a=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(a).then(n,(function(e){return t(e),n()}))}catch(e){t(e)}}if(e.hasError)throw e.error}()}t.default={__extends:a,__assign:s,__rest:i,__decorate:o,__param:l,__metadata:h,__awaiter:p,__generator:f,__createBinding:v,__exportStar:g,__values:x,__read:y,__spread:b,__spreadArrays:j,__spreadArray:w,__await:N,__asyncGenerator:_,__asyncDelegator:S,__asyncValues:E,__makeTemplateObject:C,__importStar:T,__importDefault:k,__classPrivateFieldGet:A,__classPrivateFieldSet:P,__classPrivateFieldIn:O,__addDisposableResource:R,__disposeResources:I}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return function(){var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.useReactToPrint=e.ReactToPrint=e.PrintContextConsumer=void 0;var t=n(328);Object.defineProperty(e,"PrintContextConsumer",{enumerable:!0,get:function(){return t.PrintContextConsumer}});var r=n(428);Object.defineProperty(e,"ReactToPrint",{enumerable:!0,get:function(){return r.ReactToPrint}});var a=n(892);Object.defineProperty(e,"useReactToPrint",{enumerable:!0,get:function(){return a.useReactToPrint}});var i=n(428);e.default=i.ReactToPrint}(),s}())},3168:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(5043);function a(e){const t=r.useRef({value:e,previous:e});return r.useMemo((()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous)),[e])}},3204:(e,t,n)=>{var r=n(3343),a=n(2777),s=n(4052),i=n(4543),o=n(9194),l=n(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=s(e),d=!n&&a(e),u=!n&&!d&&i(e),m=!n&&!d&&!u&&l(e),h=n||d||u||m,p=h?r(e.length,String):[],f=p.length;for(var v in e)!t&&!c.call(e,v)||h&&("length"==v||u&&("offset"==v||"parent"==v)||m&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||o(v,f))||p.push(v);return p}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},3216:(e,t,n)=>{"use strict";var r;n.d(t,{$P:()=>h,BV:()=>L,C5:()=>R,Ix:()=>I,V8:()=>O,Zp:()=>g,g:()=>x,jb:()=>c,qh:()=>M,x$:()=>y,zy:()=>f});var a=n(5043),s=n(1387);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const o=a.createContext(null);const l=a.createContext(null);const c=a.createContext(null);const d=a.createContext(null);const u=a.createContext({outlet:null,matches:[],isDataRoute:!1});const m=a.createContext(null);function h(e,t){let{relative:n}=void 0===t?{}:t;p()||(0,s.Oi)(!1);let{basename:r,navigator:i}=a.useContext(c),{hash:o,pathname:l,search:d}=y(e,{relative:n}),u=l;return"/"!==r&&(u="/"===l?r:(0,s.HS)([r,l])),i.createHref({pathname:u,search:d,hash:o})}function p(){return null!=a.useContext(d)}function f(){return p()||(0,s.Oi)(!1),a.useContext(d).location}function v(e){a.useContext(c).static||a.useLayoutEffect(e)}function g(){let{isDataRoute:e}=a.useContext(u);return e?function(){let{router:e}=D(E.UseNavigateStable),t=k(C.UseNavigateStable),n=a.useRef(!1);return v((()=>{n.current=!0})),a.useCallback((function(r,a){void 0===a&&(a={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,i({fromRouteId:t},a)))}),[e,t])}():function(){p()||(0,s.Oi)(!1);let e=a.useContext(o),{basename:t,future:n,navigator:r}=a.useContext(c),{matches:i}=a.useContext(u),{pathname:l}=f(),d=JSON.stringify((0,s.yD)(i,n.v7_relativeSplatPath)),m=a.useRef(!1);return v((()=>{m.current=!0})),a.useCallback((function(n,a){if(void 0===a&&(a={}),!m.current)return;if("number"===typeof n)return void r.go(n);let i=(0,s.Gh)(n,JSON.parse(d),l,"path"===a.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:(0,s.HS)([t,i.pathname])),(a.replace?r.replace:r.push)(i,a.state,a)}),[t,r,d,l,e])}()}function x(){let{matches:e}=a.useContext(u),t=e[e.length-1];return t?t.params:{}}function y(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=a.useContext(c),{matches:i}=a.useContext(u),{pathname:o}=f(),l=JSON.stringify((0,s.yD)(i,r.v7_relativeSplatPath));return a.useMemo((()=>(0,s.Gh)(e,JSON.parse(l),o,"path"===n)),[e,l,o,n])}function b(e,t,n,r){p()||(0,s.Oi)(!1);let{navigator:o,static:l}=a.useContext(c),{matches:m}=a.useContext(u),h=m[m.length-1],v=h?h.params:{},g=(h&&h.pathname,h?h.pathnameBase:"/");h&&h.route;let x,y=f();if(t){var b;let e="string"===typeof t?(0,s.Rr)(t):t;"/"===g||(null==(b=e.pathname)?void 0:b.startsWith(g))||(0,s.Oi)(!1),x=e}else x=y;let j=x.pathname||"/",w=j;if("/"!==g){let e=g.replace(/^\//,"").split("/");w="/"+j.replace(/^\//,"").split("/").slice(e.length).join("/")}let N=!l&&n&&n.matches&&n.matches.length>0?n.matches:(0,s.ue)(e,{pathname:w});let _=S(N&&N.map((e=>Object.assign({},e,{params:Object.assign({},v,e.params),pathname:(0,s.HS)([g,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?g:(0,s.HS)([g,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),m,n,r);return t&&_?a.createElement(d.Provider,{value:{location:i({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:s.rc.Pop}},_):_}function j(){let e=function(){var e;let t=a.useContext(m),n=T(C.UseRouteError),r=k(C.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=(0,s.pX)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),n?a.createElement("pre",{style:i},n):null,null)}const w=a.createElement(j,null);class N extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(u.Provider,{value:this.props.routeContext},a.createElement(m.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _(e){let{routeContext:t,match:n,children:r}=e,s=a.useContext(o);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),a.createElement(u.Provider,{value:t},r)}function S(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let l=e,c=null==(i=n)?void 0:i.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||(0,s.Oi)(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let a=0;a<l.length;a++){let e=l[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=a),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight(((e,r,s)=>{let i,o=!1,m=null,h=null;var p;n&&(i=c&&r.route.id?c[r.route.id]:void 0,m=r.route.errorElement||w,d&&(u<0&&0===s?(p="route-fallback",!1||A[p]||(A[p]=!0),o=!0,h=null):u===s&&(o=!0,h=r.route.hydrateFallbackElement||null)));let f=t.concat(l.slice(0,s+1)),v=()=>{let t;return t=i?m:o?h:r.route.Component?a.createElement(r.route.Component,null):r.route.element?r.route.element:e,a.createElement(_,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?a.createElement(N,{location:n.location,revalidation:n.revalidation,component:m,error:i,children:v(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):v()}),null)}var E=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(E||{}),C=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(C||{});function D(e){let t=a.useContext(o);return t||(0,s.Oi)(!1),t}function T(e){let t=a.useContext(l);return t||(0,s.Oi)(!1),t}function k(e){let t=function(){let e=a.useContext(u);return e||(0,s.Oi)(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||(0,s.Oi)(!1),n.route.id}const A={};const P=(e,t,n)=>{};function O(e,t){void 0===(null==e?void 0:e.v7_startTransition)&&P("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),void 0!==(null==e?void 0:e.v7_relativeSplatPath)||t&&t.v7_relativeSplatPath||P("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(void 0===t.v7_fetcherPersist&&P("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===t.v7_normalizeFormMethod&&P("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===t.v7_partialHydration&&P("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===t.v7_skipActionErrorRevalidation&&P("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}(r||(r=n.t(a,2))).startTransition;function R(e){let{to:t,replace:n,state:r,relative:i}=e;p()||(0,s.Oi)(!1);let{future:o,static:l}=a.useContext(c),{matches:d}=a.useContext(u),{pathname:m}=f(),h=g(),v=(0,s.Gh)(t,(0,s.yD)(d,o.v7_relativeSplatPath),m,"path"===i),x=JSON.stringify(v);return a.useEffect((()=>h(JSON.parse(x),{replace:n,state:r,relative:i})),[h,x,i,n,r]),null}function M(e){(0,s.Oi)(!1)}function I(e){let{basename:t="/",children:n=null,location:r,navigationType:o=s.rc.Pop,navigator:l,static:u=!1,future:m}=e;p()&&(0,s.Oi)(!1);let h=t.replace(/^\/*/,"/"),f=a.useMemo((()=>({basename:h,navigator:l,static:u,future:i({v7_relativeSplatPath:!1},m)})),[h,m,l,u]);"string"===typeof r&&(r=(0,s.Rr)(r));let{pathname:v="/",search:g="",hash:x="",state:y=null,key:b="default"}=r,j=a.useMemo((()=>{let e=(0,s.pb)(v,h);return null==e?null:{location:{pathname:e,search:g,hash:x,state:y,key:b},navigationType:o}}),[h,v,g,x,y,b,o]);return null==j?null:a.createElement(c.Provider,{value:f},a.createElement(d.Provider,{children:n,value:j}))}function L(e){let{children:t,location:n}=e;return b(F(t),n)}new Promise((()=>{}));a.Component;function F(e,t){void 0===t&&(t=[]);let n=[];return a.Children.forEach(e,((e,r)=>{if(!a.isValidElement(e))return;let i=[...t,r];if(e.type===a.Fragment)return void n.push.apply(n,F(e.props.children,i));e.type!==M&&(0,s.Oi)(!1),e.props.index&&e.props.children&&(0,s.Oi)(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=F(e.props.children,i)),n.push(o)})),n}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3279:e=>{e.exports=function(e){return e}},3321:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(5043),a=n(7950),s=n(7920),i=n(503),o=n(579),l=r.forwardRef(((e,t)=>{const{container:n,...l}=e,[c,d]=r.useState(!1);(0,i.N)((()=>d(!0)),[]);const u=n||c&&globalThis?.document?.body;return u?a.createPortal((0,o.jsx)(s.sG.div,{...l,ref:t}),u):null}));l.displayName="Portal"},3331:(e,t,n)=>{var r=n(9676),a=n(929),s=n(7303);e.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&a(t,n,i)&&(n=i=void 0),t=s(t),void 0===n?(n=t,t=0):n=s(n),i=void 0===i?t<n?1:-1:s(i),r(t,n,i,e)}}},3340:(e,t,n)=>{"use strict";n.d(t,{A0:()=>o,BF:()=>l,Gg:()=>c,Hj:()=>d,XI:()=>i,nA:()=>m,nd:()=>u});var r=n(5043),a=n(9766),s=n(579);const i=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",n),...r})})}));i.displayName="Table";const o=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b [&_tr]:bg-primary/20 [&_tr:hover]:bg-primary/20",n),...r})}));o.displayName="TableHeader";const l=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",n),...r})}));l.displayName="TableBody";const c=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...r})}));c.displayName="TableFooter";const d=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...r})}));d.displayName="TableRow";const u=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,a.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...r})}));u.displayName="TableHead";const m=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,a.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...r})}));m.displayName="TableCell";r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",n),...r})})).displayName="TableCaption"},3343:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},3366:(e,t,n)=>{var r=n(7894),a=n(9057);e.exports=function(e,t){return null!=e&&a(e,t,r)}},3390:(e,t,n)=>{"use strict";n.d(t,{$:()=>c,r:()=>l});var r=n(5043),a=n(6851),s=n(917),i=n(9766),o=n(579);const l=(0,s.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-1 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef(((e,t)=>{let{className:n,variant:r,size:s,asChild:c=!1,...d}=e;const u=c?a.DX:"button";return(0,o.jsx)(u,{className:(0,i.cn)(l({variant:r,size:s,className:n})),ref:t,...d})}));c.displayName="Button"},3400:(e,t,n)=>{"use strict";n.d(t,{V:()=>Dt});var r={};n.r(r),n.d(r,{Button:()=>oe,CaptionLabel:()=>le,Chevron:()=>ce,Day:()=>de,DayButton:()=>ue,Dropdown:()=>me,DropdownNav:()=>he,Footer:()=>pe,Month:()=>fe,MonthCaption:()=>ve,MonthGrid:()=>ge,Months:()=>xe,MonthsDropdown:()=>je,Nav:()=>we,NextMonthButton:()=>Ne,Option:()=>_e,PreviousMonthButton:()=>Se,Root:()=>Ee,Select:()=>Ce,Week:()=>De,WeekNumber:()=>Ae,WeekNumberHeader:()=>Pe,Weekday:()=>Te,Weekdays:()=>ke,Weeks:()=>Oe,YearsDropdown:()=>Re});var a={};n.r(a),n.d(a,{formatCaption:()=>Ie,formatDay:()=>Fe,formatMonthCaption:()=>Le,formatMonthDropdown:()=>Be,formatWeekNumber:()=>We,formatWeekNumberHeader:()=>$e,formatWeekdayName:()=>Ue,formatYearCaption:()=>He,formatYearDropdown:()=>ze});var s={};n.r(s),n.d(s,{labelCaption:()=>qe,labelDay:()=>Ye,labelDayButton:()=>Ke,labelGrid:()=>Ve,labelGridcell:()=>Ge,labelMonthDropdown:()=>Ze,labelNav:()=>Xe,labelNext:()=>Je,labelPrevious:()=>Qe,labelWeekNumber:()=>tt,labelWeekNumberHeader:()=>nt,labelWeekday:()=>et,labelYearDropdown:()=>rt});var i,o,l,c=n(5043),d=n(852);!function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"}(i||(i={})),function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"}(o||(o={})),function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"}(l||(l={}));Symbol.for("constructDateFrom");const u={},m={};function h(e,t){try{const n=(u[e]||=new Intl.DateTimeFormat("en-GB",{timeZone:e,hour:"numeric",timeZoneName:"longOffset"}).format)(t).split("GMT")[1]||"";return n in m?m[n]:f(n,n.split(":"))}catch{if(e in m)return m[e];const t=e?.match(p);return t?f(e,t.slice(1)):NaN}}const p=/([+-]\d\d):?(\d\d)?/;function f(e,t){const n=+t[0],r=+(t[1]||0);return m[e]=n>0?60*n+r:60*n-r}class v extends Date{constructor(){super();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.length>1&&"string"===typeof t[t.length-1]&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(h(this.timeZone,this))?this.setTime(NaN):t.length?"number"===typeof t[0]&&(1===t.length||2===t.length&&"number"!==typeof t[1])?this.setTime(t[0]):"string"===typeof t[0]?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),y(this),x(this)):this.setTime(Date.now())}static tz(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?new v(...n,e):new v(Date.now(),e)}withTimeZone(e){return new v(+this,e)}getTimezoneOffset(){return-h(this.timeZone,this)}setTime(e){return Date.prototype.setTime.apply(this,arguments),x(this),+this}[Symbol.for("constructDateFrom")](e){return new v(+new Date(e),this.timeZone)}}const g=/^(get|set)(?!UTC)/;function x(e){e.internal.setTime(+e),e.internal.setUTCMinutes(e.internal.getUTCMinutes()-e.getTimezoneOffset())}function y(e){const t=h(e.timeZone,e),n=new Date(+e);n.setUTCHours(n.getUTCHours()-1);const r=-new Date(+e).getTimezoneOffset(),a=r- -new Date(+n).getTimezoneOffset(),s=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();a&&s&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+a);const i=r-t;i&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+i);const o=h(e.timeZone,e),l=-new Date(+e).getTimezoneOffset()-o-i;if(o!==t&&l){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+l);const t=o-h(e.timeZone,e);t&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+t),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+t))}}Object.getOwnPropertyNames(Date.prototype).forEach((e=>{if(!g.test(e))return;const t=e.replace(g,"$1UTC");v.prototype[t]&&(e.startsWith("get")?v.prototype[e]=function(){return this.internal[t]()}:(v.prototype[e]=function(){var e;return Date.prototype[t].apply(this.internal,arguments),e=this,Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),y(e),+this},v.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),x(this),+this}))}));class b extends v{static tz(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?new b(...n,e):new b(Date.now(),e)}toISOString(){const[e,t,n]=this.tzComponents(),r=`${e}${t}:${n}`;return this.internal.toISOString().slice(0,-1)+r}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,t,n,r]=this.internal.toUTCString().split(" ");return`${e?.slice(0,-1)} ${n} ${t} ${r}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[t,n,r]=this.tzComponents();return`${e} GMT${t}${n}${r} (${function(e,t){return new Intl.DateTimeFormat("en-GB",{timeZone:e,timeZoneName:"long"}).format(t).slice(12)}(this.timeZone,this)})`}toLocaleString(e,t){return Date.prototype.toLocaleString.call(this,e,{...t,timeZone:t?.timeZone||this.timeZone})}toLocaleDateString(e,t){return Date.prototype.toLocaleDateString.call(this,e,{...t,timeZone:t?.timeZone||this.timeZone})}toLocaleTimeString(e,t){return Date.prototype.toLocaleTimeString.call(this,e,{...t,timeZone:t?.timeZone||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset();return[e>0?"-":"+",String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),String(Math.abs(e)%60).padStart(2,"0")]}withTimeZone(e){return new b(+this,e)}[Symbol.for("constructDateFrom")](e){return new b(+new Date(e),this.timeZone)}}var j=n(6981),w=n(2885);function N(e,t,n){return(0,j.f)(e,7*t,n)}function _(e,t,n){return(0,w.P)(e,12*t,n)}var S=n(8848),E=n(1844);function C(e,t,n){const[r,a]=(0,E.x)(n?.in,e,t);return 12*(r.getFullYear()-a.getFullYear())+(r.getMonth()-a.getMonth())}var D=n(5172),T=n(2440);function k(e,t){const{start:n,end:r}=(0,D.P)(t?.in,e);let a=+n>+r;const s=a?+n:+r,i=a?r:n;i.setHours(0,0,0,0),i.setDate(1);let o=t?.step??1;if(!o)return[];o<0&&(o=-o,a=!a);const l=[];for(;+i<=s;)l.push((0,T.w)(n,i)),i.setMonth(i.getMonth()+o);return a?l.reverse():l}var A=n(8605);function P(e,t){return(0,A.$)(e,{...t,weekStartsOn:1})}var O=n(3695),R=n(2316);function M(e,t){const n=(0,R.a)(e,t?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}var I=n(8134),L=n(5385);function F(e,t){return(0,R.a)(e,t?.in).getMonth()}function B(e,t){return(0,R.a)(e,t?.in).getFullYear()}var W=n(2750);function $(e,t){return+(0,R.a)(e)>+(0,R.a)(t)}var U=n(7358),z=n(8521),H=n(6465),V=n(5757);function q(e,t,n){const[r,a]=(0,E.x)(n?.in,e,t);return r.getFullYear()===a.getFullYear()}function G(e,t){let n,r=t?.in;return e.forEach((e=>{r||"object"!==typeof e||(r=T.w.bind(null,e));const t=(0,R.a)(e,r);(!n||n<t||isNaN(+t))&&(n=t)})),(0,T.w)(r,n||NaN)}function K(e,t){let n,r=t?.in;return e.forEach((e=>{r||"object"!==typeof e||(r=T.w.bind(null,e));const t=(0,R.a)(e,r);(!n||n>t||isNaN(+t))&&(n=t)})),(0,T.w)(r,n||NaN)}function Y(e,t){const n=(0,R.a)(e,t?.in),r=n.getFullYear(),a=n.getMonth(),s=(0,T.w)(n,0);return s.setFullYear(r,a+1,0),s.setHours(0,0,0,0),s.getDate()}function X(e,t,n){const r=(0,R.a)(e,n?.in),a=r.getFullYear(),s=r.getDate(),i=(0,T.w)(n?.in||e,0);i.setFullYear(a,t,15),i.setHours(0,0,0,0);const o=Y(i);return r.setMonth(t,Math.min(s,o)),r}function Z(e,t,n){const r=(0,R.a)(e,n?.in);return isNaN(+r)?(0,T.w)(n?.in||e,NaN):(r.setFullYear(t),r)}var J=n(1176),Q=n(9415),ee=n(4912),te=n(1620),ne=n(8621),re=n(1669);function ae(e,t){const n=t.startOfMonth(e),r=n.getDay();return 1===r?n:0===r?t.addDays(n,-6):t.addDays(n,-1*(r-1))}class se{constructor(e,t){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?b.tz(this.options.timeZone):new this.Date,this.newDate=(e,t,n)=>this.overrides?.newDate?this.overrides.newDate(e,t,n):this.options.timeZone?new b(e,t,n,this.options.timeZone):new Date(e,t,n),this.addDays=(e,t)=>this.overrides?.addDays?.(e,t)??(0,j.f)(e,t),this.addMonths=(e,t)=>this.overrides?.addMonths?.(e,t)??(0,w.P)(e,t),this.addWeeks=(e,t)=>this.overrides?.addWeeks?.(e,t)??N(e,t),this.addYears=(e,t)=>this.overrides?.addYears?.(e,t)??_(e,t),this.differenceInCalendarDays=(e,t)=>this.overrides?.differenceInCalendarDays?.(e,t)??(0,S.m)(e,t),this.differenceInCalendarMonths=(e,t)=>this.overrides?.differenceInCalendarMonths?.(e,t)??C(e,t),this.eachMonthOfInterval=e=>this.overrides?.eachMonthOfInterval?.(e)??k(e),this.endOfBroadcastWeek=(e,t)=>this.overrides?.endOfBroadcastWeek?.(e,t)??function(e,t){const n=ae(e,t),r=function(e,t){const n=t.startOfMonth(e),r=n.getDay()>0?n.getDay():7,a=t.addDays(e,1-r),s=t.addDays(a,34);return t.getMonth(e)===t.getMonth(s)?5:4}(e,t);return t.addDays(n,7*r-1)}(e,this),this.endOfISOWeek=e=>this.overrides?.endOfISOWeek?.(e)??P(e),this.endOfMonth=e=>this.overrides?.endOfMonth?.(e)??(0,O.p)(e),this.endOfWeek=(e,t)=>this.overrides?.endOfWeek?.(e,t??this.options)??(0,A.$)(e,t??this.options),this.endOfYear=e=>this.overrides?.endOfYear?.(e)??M(e),this.format=(e,t,n)=>{const r=this.overrides?.format?.(e,t,n??this.options)??(0,I.GP)(e,t,n??this.options);return this.options.numerals&&"latn"!==this.options.numerals?this.replaceDigits(r):r},this.getISOWeek=e=>this.overrides?.getISOWeek?.(e)??(0,L.s)(e),this.getMonth=e=>this.overrides?.getMonth?.(e)??F(e),this.getYear=e=>this.overrides?.getYear?.(e)??B(e),this.getWeek=(e,t)=>this.overrides?.getWeek?.(e,t??this.options)??(0,W.N)(e,t??this.options),this.isAfter=(e,t)=>this.overrides?.isAfter?.(e,t)??$(e,t),this.isBefore=(e,t)=>this.overrides?.isBefore?.(e,t)??(0,U.Y)(e,t),this.isDate=e=>this.overrides?.isDate?.(e)??(0,z.$)(e),this.isSameDay=(e,t)=>this.overrides?.isSameDay?.(e,t)??(0,H.r)(e,t),this.isSameMonth=(e,t)=>this.overrides?.isSameMonth?.(e,t)??(0,V.t)(e,t),this.isSameYear=(e,t)=>this.overrides?.isSameYear?.(e,t)??q(e,t),this.max=e=>this.overrides?.max?.(e)??G(e),this.min=e=>this.overrides?.min?.(e)??K(e),this.setMonth=(e,t)=>this.overrides?.setMonth?.(e,t)??X(e,t),this.setYear=(e,t)=>this.overrides?.setYear?.(e,t)??Z(e,t),this.startOfBroadcastWeek=(e,t)=>this.overrides?.startOfBroadcastWeek?.(e,t??this)??ae(e,t??this),this.startOfDay=e=>this.overrides?.startOfDay?.(e)??(0,J.o)(e),this.startOfISOWeek=e=>this.overrides?.startOfISOWeek?.(e)??(0,Q.b)(e),this.startOfMonth=e=>this.overrides?.startOfMonth?.(e)??(0,ee.w)(e),this.startOfWeek=e=>this.overrides?.startOfWeek?.(e)??(0,te.k)(e,this.options),this.startOfYear=e=>this.overrides?.startOfYear?.(e)??(0,ne.D)(e),this.options={locale:re.c,...e},this.overrides=t}getDigitMap(){const{numerals:e="latn"}=this.options,t=new Intl.NumberFormat("en-US",{numberingSystem:e}),n={};for(let r=0;r<10;r++)n[r.toString()]=t.format(r);return n}replaceDigits(e){const t=this.getDigitMap();return e.replace(/\d/g,(e=>t[e]||e))}formatNumber(e){return this.replaceDigits(e.toString())}}const ie=new se;function oe(e){return c.createElement("button",{...e})}function le(e){return c.createElement("span",{...e})}function ce(e){const{size:t=24,orientation:n="left",className:r}=e;return c.createElement("svg",{className:r,width:t,height:t,viewBox:"0 0 24 24"},"up"===n&&c.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),"down"===n&&c.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),"left"===n&&c.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),"right"===n&&c.createElement("polygon",{points:"8 18.612 14.1888889 12.5 8 6.37733333 9.91111111 4.5 18 12.5 9.91111111 20.5"}))}function de(e){const{day:t,modifiers:n,...r}=e;return c.createElement("td",{...r})}function ue(e){const{day:t,modifiers:n,...r}=e,a=c.useRef(null);return c.useEffect((()=>{n.focused&&a.current?.focus()}),[n.focused]),c.createElement("button",{ref:a,...r})}function me(e){const{options:t,className:n,components:r,classNames:a,...s}=e,o=[a[i.Dropdown],n].join(" "),l=t?.find((e=>{let{value:t}=e;return t===s.value}));return c.createElement("span",{"data-disabled":s.disabled,className:a[i.DropdownRoot]},c.createElement(r.Select,{className:o,...s},t?.map((e=>{let{value:t,label:n,disabled:a}=e;return c.createElement(r.Option,{key:t,value:t,disabled:a},n)}))),c.createElement("span",{className:a[i.CaptionLabel],"aria-hidden":!0},l?.label,c.createElement(r.Chevron,{orientation:"down",size:18,className:a[i.Chevron]})))}function he(e){return c.createElement("div",{...e})}function pe(e){return c.createElement("div",{...e})}function fe(e){const{calendarMonth:t,displayIndex:n,...r}=e;return c.createElement("div",{...r},e.children)}function ve(e){const{calendarMonth:t,displayIndex:n,...r}=e;return c.createElement("div",{...r})}function ge(e){return c.createElement("table",{...e})}function xe(e){return c.createElement("div",{...e})}const ye=(0,c.createContext)(void 0);function be(){const e=(0,c.useContext)(ye);if(void 0===e)throw new Error("useDayPicker() must be used within a custom component.");return e}function je(e){const{components:t}=be();return c.createElement(t.Dropdown,{...e})}function we(e){const{onPreviousClick:t,onNextClick:n,previousMonth:r,nextMonth:a,...s}=e,{components:o,classNames:l,labels:{labelPrevious:d,labelNext:u}}=be();return c.createElement("nav",{...s},c.createElement(o.PreviousMonthButton,{type:"button",className:l[i.PreviousMonthButton],tabIndex:r?void 0:-1,disabled:!r||void 0,"aria-label":d(r),onClick:e.onPreviousClick},c.createElement(o.Chevron,{disabled:!r||void 0,className:l[i.Chevron],orientation:"left"})),c.createElement(o.NextMonthButton,{type:"button",className:l[i.NextMonthButton],tabIndex:a?void 0:-1,disabled:!a||void 0,"aria-label":u(a),onClick:e.onNextClick},c.createElement(o.Chevron,{disabled:!a||void 0,orientation:"right",className:l[i.Chevron]})))}function Ne(e){const{components:t}=be();return c.createElement(t.Button,{...e})}function _e(e){return c.createElement("option",{...e})}function Se(e){const{components:t}=be();return c.createElement(t.Button,{...e})}function Ee(e){return c.createElement("div",{...e})}function Ce(e){return c.createElement("select",{...e})}function De(e){const{week:t,...n}=e;return c.createElement("tr",{...n})}function Te(e){return c.createElement("th",{...e})}function ke(e){return c.createElement("thead",{"aria-hidden":!0},c.createElement("tr",{...e}))}function Ae(e){const{week:t,...n}=e;return c.createElement("th",{...n})}function Pe(e){return c.createElement("th",{...e})}function Oe(e){return c.createElement("tbody",{...e})}function Re(e){const{components:t}=be();return c.createElement(t.Dropdown,{...e})}function Me(){const e={};for(const t in i)e[i[t]]=`rdp-${i[t]}`;for(const t in o)e[o[t]]=`rdp-${o[t]}`;for(const t in l)e[l[t]]=`rdp-${l[t]}`;return e}function Ie(e,t,n){return(n??new se(t)).format(e,"LLLL y")}const Le=Ie;function Fe(e,t,n){return(n??new se(t)).format(e,"d")}function Be(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie).format(e,"LLLL")}function We(e){return e<10?`0${e.toLocaleString()}`:`${e.toLocaleString()}`}function $e(){return""}function Ue(e,t,n){return(n??new se(t)).format(e,"cccccc")}function ze(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie).format(e,"yyyy")}const He=ze;function Ve(e,t,n){return(n??new se(t)).format(e,"LLLL y")}const qe=Ve;function Ge(e,t,n,r){let a=(r??new se(n)).format(e,"PPPP");return t?.today&&(a=`Today, ${a}`),a}function Ke(e,t,n,r){let a=(r??new se(n)).format(e,"PPPP");return t.today&&(a=`Today, ${a}`),t.selected&&(a=`${a}, selected`),a}const Ye=Ke;function Xe(){return""}function Ze(e){return"Choose the Month"}function Je(e){return"Go to the Next Month"}function Qe(e){return"Go to the Previous Month"}function et(e,t,n){return(n??new se(t)).format(e,"cccc")}function tt(e,t){return`Week ${e}`}function nt(e){return"Week Number"}function rt(e){return"Choose the Year"}function at(e,t){const{month:n,defaultMonth:r,today:a=t.today(),numberOfMonths:s=1,endMonth:i,startMonth:o}=e;let l=n||r||a;const{differenceInCalendarMonths:c,addMonths:d,startOfMonth:u}=t;if(i&&c(i,l)<0){l=d(i,-1*(s-1))}return o&&c(l,o)<0&&(l=o),u(l)}class st{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ie;this.date=e,this.displayMonth=t,this.outside=Boolean(t&&!n.isSameMonth(e,t)),this.dateLib=n}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class it{constructor(e,t){this.date=e,this.weeks=t}}class ot{constructor(e,t){this.days=t,this.weekNumber=e}}function lt(e,t){const[n,r]=(0,c.useState)(e);return[void 0===t?n:t,r]}function ct(e,t){const[n,r]=function(e,t){let{startMonth:n,endMonth:r}=e;const{startOfYear:a,startOfDay:s,startOfMonth:i,endOfMonth:o,addYears:l,endOfYear:c,newDate:d,today:u}=t,{fromYear:m,toYear:h,fromMonth:p,toMonth:f}=e;!n&&p&&(n=p),!n&&m&&(n=t.newDate(m,0,1)),!r&&f&&(r=f),!r&&h&&(r=d(h,11,31));const v="dropdown"===e.captionLayout||"dropdown-years"===e.captionLayout;return n?n=i(n):m?n=d(m,0,1):!n&&v&&(n=a(l(e.today??u(),-100))),r?r=o(r):h?r=d(h,11,31):!r&&v&&(r=c(e.today??u())),[n?s(n):n,r?s(r):r]}(e,t),{startOfMonth:a,endOfMonth:s}=t,i=at(e,t),[o,l]=lt(i,e.month?i:void 0);(0,c.useEffect)((()=>{const n=at(e,t);l(n)}),[e.timeZone]);const d=function(e,t,n,r){const{numberOfMonths:a=1}=n,s=[];for(let i=0;i<a;i++){const n=r.addMonths(e,i);if(t&&n>t)break;s.push(n)}return s}(o,r,e,t),u=function(e,t,n,r){const a=e[0],s=e[e.length-1],{ISOWeek:i,fixedWeeks:o,broadcastCalendar:l}=n??{},{addDays:c,differenceInCalendarDays:d,differenceInCalendarMonths:u,endOfBroadcastWeek:m,endOfISOWeek:h,endOfMonth:p,endOfWeek:f,isAfter:v,startOfBroadcastWeek:g,startOfISOWeek:x,startOfWeek:y}=r,b=l?g(a,r):i?x(a):y(a),j=d(l?m(s,r):i?h(p(s)):f(p(s)),b),w=u(s,a)+1,N=[];for(let S=0;S<=j;S++){const e=c(b,S);if(t&&v(e,t))break;N.push(e)}const _=(l?35:42)*w;if(o&&N.length<_){const e=_-N.length;for(let t=0;t<e;t++){const e=c(N[N.length-1],1);N.push(e)}}return N}(d,e.endMonth?s(e.endMonth):void 0,e,t),m=function(e,t,n,r){const{addDays:a,endOfBroadcastWeek:s,endOfISOWeek:i,endOfMonth:o,endOfWeek:l,getISOWeek:c,getWeek:d,startOfBroadcastWeek:u,startOfISOWeek:m,startOfWeek:h}=r,p=e.reduce(((e,p)=>{const f=n.broadcastCalendar?u(p,r):n.ISOWeek?m(p):h(p),v=n.broadcastCalendar?s(p,r):n.ISOWeek?i(o(p)):l(o(p)),g=t.filter((e=>e>=f&&e<=v)),x=n.broadcastCalendar?35:42;if(n.fixedWeeks&&g.length<x){const e=t.filter((e=>{const t=x-g.length;return e>v&&e<=a(v,t)}));g.push(...e)}const y=g.reduce(((e,t)=>{const a=n.ISOWeek?c(t):d(t),s=e.find((e=>e.weekNumber===a)),i=new st(t,p,r);return s?s.days.push(i):e.push(new ot(a,[i])),e}),[]),b=new it(p,y);return e.push(b),e}),[]);return n.reverseMonths?p.reverse():p}(d,u,e,t),h=function(e){return e.reduce(((e,t)=>[...e,...t.weeks]),[])}(m),p=m.reduce(((e,t)=>[...e,...t.weeks.reduce(((e,t)=>[...e,...t.days]),[])]),[]);const f=function(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:s}=n,{startOfMonth:i,addMonths:o,differenceInCalendarMonths:l}=r,c=a?s??1:1,d=i(e);return t&&l(d,t)<=0?void 0:o(d,-c)}(o,n,e,t),v=function(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:s=1}=n,{startOfMonth:i,addMonths:o,differenceInCalendarMonths:l}=r,c=a?s:1,d=i(e);return t&&l(t,e)<s?void 0:o(d,c)}(o,r,e,t),{disableNavigation:g,onMonthChange:x}=e,y=e=>{if(g)return;let t=a(e);n&&t<a(n)&&(t=a(n)),r&&t>a(r)&&(t=a(r)),l(t),x?.(t)};return{months:m,weeks:h,days:p,navStart:n,navEnd:r,previousMonth:f,nextMonth:v,goToMonth:y,goToDay:e=>{(e=>h.some((t=>t.days.some((t=>t.isEqualTo(e))))))(e)||y(e.date)}}}function dt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ie,{from:a,to:s}=e;const{differenceInCalendarDays:i,isSameDay:o}=r;if(a&&s){i(s,a)<0&&([a,s]=[s,a]);return i(t,a)>=(n?1:0)&&i(s,t)>=(n?1:0)}return!n&&s?o(s,t):!(n||!a)&&o(a,t)}function ut(e){return Boolean(e&&"object"===typeof e&&"before"in e&&"after"in e)}function mt(e){return Boolean(e&&"object"===typeof e&&"from"in e)}function ht(e){return Boolean(e&&"object"===typeof e&&"after"in e)}function pt(e){return Boolean(e&&"object"===typeof e&&"before"in e)}function ft(e){return Boolean(e&&"object"===typeof e&&"dayOfWeek"in e)}function vt(e,t){return Array.isArray(e)&&e.every(t.isDate)}function gt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ie;const r=Array.isArray(t)?t:[t],{isSameDay:a,differenceInCalendarDays:s,isAfter:i}=n;return r.some((t=>{if("boolean"===typeof t)return t;if(n.isDate(t))return a(e,t);if(vt(t,n))return t.includes(e);if(mt(t))return dt(t,e,!1,n);if(ft(t))return Array.isArray(t.dayOfWeek)?t.dayOfWeek.includes(e.getDay()):t.dayOfWeek===e.getDay();if(ut(t)){const n=s(t.before,e)>0,r=s(t.after,e)<0;return i(t.before,t.after)?r&&n:n||r}return ht(t)?s(e,t.after)>0:pt(t)?s(t.before,e)>0:"function"===typeof t&&t(e)}))}function xt(e,t,n,r,a,s,i){let o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(o>365)return;const l=function(e,t,n,r,a,s,i){const{ISOWeek:o,broadcastCalendar:l}=s,{addDays:c,addMonths:d,addWeeks:u,addYears:m,endOfBroadcastWeek:h,endOfISOWeek:p,endOfWeek:f,max:v,min:g,startOfBroadcastWeek:x,startOfISOWeek:y,startOfWeek:b}=i;let j={day:c,week:u,month:d,year:m,startOfWeek:e=>l?x(e,i):o?y(e):b(e),endOfWeek:e=>l?h(e,i):o?p(e):f(e)}[e](n,"after"===t?1:-1);return"before"===t&&r?j=v([r,j]):"after"===t&&a&&(j=g([a,j])),j}(e,t,n.date,r,a,s,i),c=Boolean(s.disabled&&gt(l,s.disabled,i)),d=Boolean(s.hidden&&gt(l,s.hidden,i)),u=new st(l,l,i);return c||d?xt(e,t,u,r,a,s,i,o+1):u}function yt(e,t,n,r,a){const{autoFocus:s}=e,[i,l]=(0,c.useState)(),d=function(e,t,n,r){let a,s=0,i=!1;for(;s<e.length&&!i;){const l=e[s],c=t(l);c[o.disabled]||c[o.hidden]||c[o.outside]||(c[o.focused]||r?.isEqualTo(l)||n(l.date)||c[o.today])&&(a=l,i=!0),s++}return a||(a=e.find((e=>{const n=t(e);return!n[o.disabled]&&!n[o.hidden]&&!n[o.outside]}))),a}(t.days,n,r||(()=>!1),i),[u,m]=(0,c.useState)(s?d:void 0);return{isFocusTarget:e=>Boolean(d?.isEqualTo(e)),setFocused:m,focused:u,blur:()=>{l(u),m(void 0)},moveFocus:(n,r)=>{if(!u)return;const s=xt(n,r,u,t.navStart,t.navEnd,e,a);s&&(t.goToDay(s),m(s))}}}function bt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ie;return dt(e,t.from,!1,n)||dt(e,t.to,!1,n)||dt(t,e.from,!1,n)||dt(t,e.to,!1,n)}function jt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ie;const r=Array.isArray(t)?t:[t],a=r.filter((e=>"function"!==typeof e)).some((t=>{if("boolean"===typeof t)return t;if(n.isDate(t))return dt(e,t,!1,n);if(vt(t,n))return t.some((t=>dt(e,t,!1,n)));if(mt(t))return!(!t.from||!t.to)&&bt(e,{from:t.from,to:t.to},n);if(ft(t))return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ie;const r=Array.isArray(t)?t:[t];let a=e.from;const s=n.differenceInCalendarDays(e.to,e.from),i=Math.min(s,6);for(let o=0;o<=i;o++){if(r.includes(a.getDay()))return!0;a=n.addDays(a,1)}return!1}(e,t.dayOfWeek,n);if(ut(t)){return n.isAfter(t.before,t.after)?bt(e,{from:n.addDays(t.after,1),to:n.addDays(t.before,-1)},n):gt(e.from,t,n)||gt(e.to,t,n)}return!(!ht(t)&&!pt(t))&&(gt(e.from,t,n)||gt(e.to,t,n))}));if(a)return!0;const s=r.filter((e=>"function"===typeof e));if(s.length){let t=e.from;const r=n.differenceInCalendarDays(e.to,e.from);for(let e=0;e<=r;e++){if(s.some((e=>e(t))))return!0;t=n.addDays(t,1)}}return!1}function wt(e,t){const{disabled:n,excludeDisabled:r,selected:a,required:s,onSelect:i}=e,[o,l]=lt(a,i?a:void 0),c=i?a:o;return{selected:c,select:(a,o,d)=>{const{min:u,max:m}=e,h=a?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ie;const{from:i,to:o}=t||{},{isSameDay:l,isAfter:c,isBefore:d}=s;let u;if(i||o){if(i&&!o)u=l(i,e)?a?{from:i,to:void 0}:void 0:d(e,i)?{from:e,to:i}:{from:i,to:e};else if(i&&o)if(l(i,e)&&l(o,e))u=a?{from:i,to:o}:void 0;else if(l(i,e))u={from:i,to:n>0?void 0:e};else if(l(o,e))u={from:e,to:n>0?void 0:e};else if(d(e,i))u={from:e,to:o};else if(c(e,i))u={from:i,to:e};else{if(!c(e,o))throw new Error("Invalid range");u={from:i,to:e}}}else u={from:e,to:n>0?void 0:e};if(u?.from&&u?.to){const t=s.differenceInCalendarDays(u.to,u.from);(r>0&&t>r||n>1&&t<n)&&(u={from:e,to:void 0})}return u}(a,c,u,m,s,t):void 0;return r&&n&&h?.from&&h.to&&jt({from:h.from,to:h.to},n,t)&&(h.from=a,h.to=void 0),i||l(h),i?.(h,a,o,d),h},isSelected:e=>c&&dt(c,e,!1,t)}}function Nt(e,t){const n=function(e,t){const{selected:n,required:r,onSelect:a}=e,[s,i]=lt(n,a?n:void 0),o=a?n:s,{isSameDay:l}=t;return{selected:o,select:(e,t,n)=>{let s=e;return!r&&o&&o&&l(e,o)&&(s=void 0),a||i(s),a?.(s,e,t,n),s},isSelected:e=>!!o&&l(o,e)}}(e,t),r=function(e,t){const{selected:n,required:r,onSelect:a}=e,[s,i]=lt(n,a?n:void 0),o=a?n:s,{isSameDay:l}=t,c=e=>o?.some((t=>l(t,e)))??!1,{min:d,max:u}=e;return{selected:o,select:(e,t,n)=>{let s=[...o??[]];if(c(e)){if(o?.length===d)return;if(r&&1===o?.length)return;s=o?.filter((t=>!l(t,e)))}else s=o?.length===u?[e]:[...s,e];return a||i(s),a?.(s,e,t,n),s},isSelected:c}}(e,t),a=wt(e,t);switch(e.mode){case"single":return n;case"multiple":return r;case"range":return a;default:return}}function _t(e){const{components:t,formatters:n,labels:d,dateLib:u,locale:m,classNames:h}=(0,c.useMemo)((()=>{const t={...re.c,...e.locale};return{dateLib:new se({locale:t,weekStartsOn:e.broadcastCalendar?1:e.weekStartsOn,firstWeekContainsDate:e.firstWeekContainsDate,useAdditionalWeekYearTokens:e.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:e.useAdditionalDayOfYearTokens,timeZone:e.timeZone,numerals:e.numerals},e.dateLib),components:(i=e.components,{...r,...i}),formatters:(n=e.formatters,n?.formatMonthCaption&&!n.formatCaption&&(n.formatCaption=n.formatMonthCaption),n?.formatYearCaption&&!n.formatYearDropdown&&(n.formatYearDropdown=n.formatYearCaption),{...a,...n}),labels:{...s,...e.labels},locale:t,classNames:{...Me(),...e.classNames}};var n,i}),[e.locale,e.broadcastCalendar,e.weekStartsOn,e.firstWeekContainsDate,e.useAdditionalWeekYearTokens,e.useAdditionalDayOfYearTokens,e.timeZone,e.numerals,e.dateLib,e.components,e.formatters,e.labels,e.classNames]),{captionLayout:p,mode:f,onDayBlur:v,onDayClick:g,onDayFocus:x,onDayKeyDown:y,onDayMouseEnter:b,onDayMouseLeave:j,onNextClick:w,onPrevClick:N,showWeekNumber:_,styles:S}=e,{formatCaption:E,formatDay:C,formatMonthDropdown:D,formatWeekNumber:T,formatWeekNumberHeader:k,formatWeekdayName:A,formatYearDropdown:P}=n,O=ct(e,u),{days:R,months:M,navStart:I,navEnd:L,previousMonth:F,nextMonth:B,goToMonth:W}=O,$=function(e,t,n){const{disabled:r,hidden:a,modifiers:s,showOutsideDays:i,broadcastCalendar:l,today:c}=t,{isSameDay:d,isSameMonth:u,startOfMonth:m,isBefore:h,endOfMonth:p,isAfter:f}=n,v=t.startMonth&&m(t.startMonth),g=t.endMonth&&p(t.endMonth),x={[o.focused]:[],[o.outside]:[],[o.disabled]:[],[o.hidden]:[],[o.today]:[]},y={};for(const o of e){const{date:e,displayMonth:t}=o,m=Boolean(t&&!u(e,t)),p=Boolean(v&&h(e,v)),b=Boolean(g&&f(e,g)),j=Boolean(r&&gt(e,r,n)),w=Boolean(a&&gt(e,a,n))||p||b||!l&&!i&&m||l&&!1===i&&m,N=d(e,c??n.today());m&&x.outside.push(o),j&&x.disabled.push(o),w&&x.hidden.push(o),N&&x.today.push(o),s&&Object.keys(s).forEach((t=>{const r=s?.[t];r&&gt(e,r,n)&&(y[t]?y[t].push(o):y[t]=[o])}))}return e=>{const t={[o.focused]:!1,[o.disabled]:!1,[o.hidden]:!1,[o.outside]:!1,[o.today]:!1},n={};for(const r in x){const n=x[r];t[r]=n.some((t=>t===e))}for(const r in y)n[r]=y[r].some((t=>t===e));return{...t,...n}}}(R,e,u),{isSelected:U,select:z,selected:H}=Nt(e,u)??{},{blur:V,focused:q,isFocusTarget:G,moveFocus:K,setFocused:Y}=yt(e,O,$,U??(()=>!1),u),{labelDayButton:X,labelGridcell:Z,labelGrid:J,labelMonthDropdown:Q,labelNav:ee,labelWeekday:te,labelWeekNumber:ne,labelWeekNumberHeader:ae,labelYearDropdown:ie}=d,oe=(0,c.useMemo)((()=>function(e,t,n){const r=e.today(),a=n?e.startOfBroadcastWeek(r,e):t?e.startOfISOWeek(r):e.startOfWeek(r),s=[];for(let i=0;i<7;i++){const t=e.addDays(a,i);s.push(t)}return s}(u,e.ISOWeek)),[u,e.ISOWeek]),le=void 0!==f||void 0!==g,ce=(0,c.useCallback)((()=>{F&&(W(F),N?.(F))}),[F,W,N]),de=(0,c.useCallback)((()=>{B&&(W(B),w?.(B))}),[W,B,w]),ue=(0,c.useCallback)(((e,t)=>n=>{n.preventDefault(),n.stopPropagation(),Y(e),z?.(e.date,t,n),g?.(e.date,t,n)}),[z,g,Y]),me=(0,c.useCallback)(((e,t)=>n=>{Y(e),x?.(e.date,t,n)}),[x,Y]),he=(0,c.useCallback)(((e,t)=>n=>{V(),v?.(e.date,t,n)}),[V,v]),pe=(0,c.useCallback)(((t,n)=>r=>{const a={ArrowLeft:["day","rtl"===e.dir?"after":"before"],ArrowRight:["day","rtl"===e.dir?"before":"after"],ArrowDown:["week","after"],ArrowUp:["week","before"],PageUp:[r.shiftKey?"year":"month","before"],PageDown:[r.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(a[r.key]){r.preventDefault(),r.stopPropagation();const[e,t]=a[r.key];K(e,t)}y?.(t.date,n,r)}),[K,y,e.dir]),fe=(0,c.useCallback)(((e,t)=>n=>{b?.(e.date,t,n)}),[b]),ve=(0,c.useCallback)(((e,t)=>n=>{j?.(e.date,t,n)}),[j]),ge=(0,c.useCallback)((e=>t=>{const n=Number(t.target.value),r=u.setMonth(u.startOfMonth(e),n);W(r)}),[u,W]),xe=(0,c.useCallback)((e=>t=>{const n=Number(t.target.value),r=u.setYear(u.startOfMonth(e),n);W(r)}),[u,W]),{className:be,style:je}=(0,c.useMemo)((()=>({className:[h[i.Root],e.className].filter(Boolean).join(" "),style:{...S?.[i.Root],...e.style}})),[h,e.className,e.style,S]),we=function(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0};return Object.entries(e).forEach((e=>{let[n,r]=e;n.startsWith("data-")&&(t[n]=r)})),t}(e),Ne={dayPickerProps:e,selected:H,select:z,isSelected:U,months:M,nextMonth:B,previousMonth:F,goToMonth:W,getModifiers:$,components:t,classNames:h,styles:S,labels:d,formatters:n};return c.createElement(ye.Provider,{value:Ne},c.createElement(t.Root,{className:be,style:je,dir:e.dir,id:e.id,lang:e.lang,nonce:e.nonce,title:e.title,role:e.role,"aria-label":e["aria-label"],...we},c.createElement(t.Months,{className:h[i.Months],style:S?.[i.Months]},!e.hideNavigation&&c.createElement(t.Nav,{className:h[i.Nav],style:S?.[i.Nav],"aria-label":ee(),onPreviousClick:ce,onNextClick:de,previousMonth:F,nextMonth:B}),M.map(((r,a)=>{const s=function(e,t,n,r,a){const{startOfMonth:s,startOfYear:i,endOfYear:o,eachMonthOfInterval:l,getMonth:c}=a;return l({start:i(e),end:o(e)}).map((e=>{const i=r.formatMonthDropdown(e,a);return{value:c(e),label:i,disabled:t&&e<s(t)||n&&e>s(n)||!1}}))}(r.date,I,L,n,u),d=function(e,t,n,r){if(!e)return;if(!t)return;const{startOfYear:a,endOfYear:s,addYears:i,getYear:o,isBefore:l,isSameYear:c}=r,d=a(e),u=s(t),m=[];let h=d;for(;l(h,u)||c(h,u);)m.push(h),h=i(h,1);return m.map((e=>{const t=n.formatYearDropdown(e,r);return{value:o(e),label:t,disabled:!1}}))}(I,L,n,u);return c.createElement(t.Month,{className:h[i.Month],style:S?.[i.Month],key:a,displayIndex:a,calendarMonth:r},c.createElement(t.MonthCaption,{className:h[i.MonthCaption],style:S?.[i.MonthCaption],calendarMonth:r,displayIndex:a},p?.startsWith("dropdown")?c.createElement(t.DropdownNav,{className:h[i.Dropdowns],style:S?.[i.Dropdowns]},"dropdown"===p||"dropdown-months"===p?c.createElement(t.MonthsDropdown,{className:h[i.MonthsDropdown],"aria-label":Q(),classNames:h,components:t,disabled:Boolean(e.disableNavigation),onChange:ge(r.date),options:s,style:S?.[i.Dropdown],value:u.getMonth(r.date)}):c.createElement("span",{role:"status","aria-live":"polite"},D(r.date,u)),"dropdown"===p||"dropdown-years"===p?c.createElement(t.YearsDropdown,{className:h[i.YearsDropdown],"aria-label":ie(u.options),classNames:h,components:t,disabled:Boolean(e.disableNavigation),onChange:xe(r.date),options:d,style:S?.[i.Dropdown],value:u.getYear(r.date)}):c.createElement("span",{role:"status","aria-live":"polite"},P(r.date,u))):c.createElement(t.CaptionLabel,{className:h[i.CaptionLabel],role:"status","aria-live":"polite"},E(r.date,u.options,u))),c.createElement(t.MonthGrid,{role:"grid","aria-multiselectable":"multiple"===f||"range"===f,"aria-label":J(r.date,u.options,u)||void 0,className:h[i.MonthGrid],style:S?.[i.MonthGrid]},!e.hideWeekdays&&c.createElement(t.Weekdays,{className:h[i.Weekdays],style:S?.[i.Weekdays]},_&&c.createElement(t.WeekNumberHeader,{"aria-label":ae(u.options),className:h[i.WeekNumberHeader],style:S?.[i.WeekNumberHeader],scope:"col"},k()),oe.map(((e,n)=>c.createElement(t.Weekday,{"aria-label":te(e,u.options,u),className:h[i.Weekday],key:n,style:S?.[i.Weekday],scope:"col"},A(e,u.options,u))))),c.createElement(t.Weeks,{className:h[i.Weeks],style:S?.[i.Weeks]},r.weeks.map(((n,r)=>c.createElement(t.Week,{className:h[i.Week],key:n.weekNumber,style:S?.[i.Week],week:n},_&&c.createElement(t.WeekNumber,{week:n,style:S?.[i.WeekNumber],"aria-label":ne(n.weekNumber,{locale:m}),className:h[i.WeekNumber],scope:"row",role:"rowheader"},T(n.weekNumber)),n.days.map((n=>{const{date:r}=n,a=$(n);if(a[o.focused]=!a.hidden&&Boolean(q?.isEqualTo(n)),a[l.selected]=!a.disabled&&(U?.(r)||a.selected),mt(H)){const{from:e,to:t}=H;a[l.range_start]=Boolean(e&&t&&u.isSameDay(r,e)),a[l.range_end]=Boolean(e&&t&&u.isSameDay(r,t)),a[l.range_middle]=dt(H,r,!0,u)}const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={...t?.[i.Day]};return Object.entries(e).filter((e=>{let[,t]=e;return!0===t})).forEach((e=>{let[t]=e;r={...r,...n?.[t]}})),r}(a,S,e.modifiersStyles),d=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.entries(e).filter((e=>{let[,t]=e;return!0===t})).reduce(((e,r)=>{let[a]=r;return n[a]?e.push(n[a]):t[o[a]]?e.push(t[o[a]]):t[l[a]]&&e.push(t[l[a]]),e}),[t[i.Day]])}(a,h,e.modifiersClassNames),m=le||a.hidden?void 0:Z(r,a,u.options,u);return c.createElement(t.Day,{key:`${u.format(r,"yyyy-MM-dd")}_${u.format(n.displayMonth,"yyyy-MM")}`,day:n,modifiers:a,className:d.join(" "),style:s,role:"gridcell","aria-selected":a.selected||void 0,"aria-label":m,"data-day":u.format(r,"yyyy-MM-dd"),"data-month":n.outside?u.format(r,"yyyy-MM"):void 0,"data-selected":a.selected||void 0,"data-disabled":a.disabled||void 0,"data-hidden":a.hidden||void 0,"data-outside":n.outside||void 0,"data-focused":a.focused||void 0,"data-today":a.today||void 0},!a.hidden&&le?c.createElement(t.DayButton,{className:h[i.DayButton],style:S?.[i.DayButton],type:"button",day:n,modifiers:a,disabled:a.disabled||void 0,tabIndex:G(n)?0:-1,"aria-label":X(r,a,u.options,u),onClick:ue(n,a),onBlur:he(n,a),onFocus:me(n,a),onKeyDown:pe(n,a),onMouseEnter:fe(n,a),onMouseLeave:ve(n,a)},C(r,u.options,u)):!a.hidden&&C(n.date,u.options,u))}))))))))}))),e.footer&&c.createElement(t.Footer,{className:h[i.Footer],style:S?.[i.Footer],role:"status","aria-live":"polite"},e.footer)))}var St=n(9766),Et=n(3390),Ct=n(579);function Dt(e){let{className:t,classNames:n,showOutsideDays:r=!0,...a}=e;return(0,Ct.jsx)(_t,{showOutsideDays:r,className:(0,St.cn)("p-3",t),style:{width:248.8*a.numberOfMonths+"px"},classNames:{months:"relative flex flex-col gap-y-4 sm:flex-row sm:gap-y-0",month_caption:"relative mx-10 flex h-7 items-center justify-center",weekdays:"flex flex-row",weekday:"w-8 text-[0.8rem] font-normal text-muted-foreground",month:"w-full gap-y-4 overflow-x-hidden",caption:"relative flex items-center justify-center pt-1",caption_label:"truncate text-sm font-medium",button_next:(0,St.cn)((0,Et.r)({variant:"outline",className:"absolute right-0 h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"})),button_previous:(0,St.cn)((0,Et.r)({variant:"outline",className:"absolute left-0 h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"})),nav:"flex items-start",month_grid:"mt-4",week:"mt-2 flex w-full",day:"flex size-8 flex-1 items-center justify-center rounded-md p-0 text-sm [&:has(button)]:hover:!bg-accent [&:has(button)]:hover:text-accent-foreground [&:has(button)]:hover:aria-selected:!bg-primary [&:has(button)]:hover:aria-selected:text-primary-foreground",day_button:(0,St.cn)((0,Et.r)({variant:"ghost"}),"h-8 w-8 p-0 font-normal transition-none hover:bg-transparent hover:text-inherit aria-selected:opacity-100"),range_start:"day-range-start rounded-s-md",range_end:"day-range-end rounded-e-md",selected:"bg-primary text-primary-foreground hover:!bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",today:"bg-accent text-accent-foreground",outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",disabled:"text-muted-foreground opacity-50",range_middle:"rounded-none aria-selected:bg-accent aria-selected:text-accent-foreground hover:aria-selected:!bg-accent hover:aria-selected:text-accent-foreground",hidden:"invisible hidden",...n},components:{IconLeft:e=>{let{...t}=e;return(0,Ct.jsx)(d.YJP,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,Ct.jsx)(d.vKP,{className:"h-4 w-4"})}},...a})}Dt.displayName="Calendar"},3404:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=!0,a="Invariant failed";function s(e,t){if(!e){if(r)throw new Error(a);var n="function"===typeof t?t():t,s=n?"".concat(a,": ").concat(n):a;throw new Error(s)}}},3411:(e,t,n)=>{var r=n(149),a=n(9096),s=n(8883),i=n(4052);e.exports=function(e,t){return(i(e)?r:s)(e,a(t,3))}},3416:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});var r=n(5043),a=n(9766),s=n(579);const i=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("textarea",{className:(0,a.cn)("flex min-h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...r})}));i.displayName="Textarea"},3440:(e,t,n)=>{var r=n(6552)["__core-js_shared__"];e.exports=r},3538:(e,t,n)=>{var r=n(755),a=n(3411);e.exports=function(e,t){return r(a(e,t),1)}},3642:(e,t,n)=>{"use strict";n.d(t,{i:()=>s});var r=n(5043),a=n(7490);function s(e){let{prop:t,defaultProp:n,onChange:s=()=>{}}=e;const[i,o]=function(e){let{defaultProp:t,onChange:n}=e;const s=r.useState(t),[i]=s,o=r.useRef(i),l=(0,a.c)(n);return r.useEffect((()=>{o.current!==i&&(l(i),o.current=i)}),[i,o,l]),s}({defaultProp:n,onChange:s}),l=void 0!==t,c=l?t:i,d=(0,a.c)(s);return[c,r.useCallback((e=>{if(l){const n="function"===typeof e?e(t):e;n!==t&&d(n)}else o(e)}),[l,t,o,d])]}},3668:(e,t,n)=>{var r=n(8902),a=n(2587),s=n(8114);e.exports=function(e,t,n,i,o,l){var c=1&n,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var m=l.get(e),h=l.get(t);if(m&&h)return m==t&&h==e;var p=-1,f=!0,v=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<d;){var g=e[p],x=t[p];if(i)var y=c?i(x,g,p,t,e,l):i(g,x,p,e,t,l);if(void 0!==y){if(y)continue;f=!1;break}if(v){if(!a(t,(function(e,t){if(!s(v,t)&&(g===e||o(g,e,n,i,l)))return v.push(t)}))){f=!1;break}}else if(g!==x&&!o(g,x,n,i,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},3695:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});var r=n(2316);function a(e,t){const n=(0,r.a)(e,t?.in),a=n.getMonth();return n.setFullYear(n.getFullYear(),a+1,0),n.setHours(23,59,59,999),n}},3713:(e,t,n)=>{var r=n(6140),a=n(1143),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},3781:(e,t,n)=>{var r=n(9417),a=n(8673);e.exports=function(e){for(var t=a(e),n=t.length;n--;){var s=t[n],i=e[s];t[n]=[s,i,r(i)]}return t}},3800:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(5043),a=n(3003),s=n(9250),i=n(9945),o=n(1203),l=n(8739);const c={page:{fontFamily:"Tinos, serif",backgroundColor:"white",width:"210mm",minHeight:"297mm",margin:"0 auto",boxSizing:"border-box",position:"relative","@media print":{pageBreakInside:"auto",pageBreakAfter:"auto",pageBreakBefore:"auto"}},headerContainer:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem",pageBreakInside:"avoid",breakInside:"avoid-page"},header:{marginBottom:"5px",borderBottom:"1px solid #000000",paddingBottom:"2px",pageBreakAfter:"avoid"},clinicName:{fontSize:"24pt",textAlign:"center",fontFamily:"Tinos, serif",marginBottom:"3mm",color:"#1a5f7a",fontWeight:"bold"},clinicInfo:{fontSize:"10pt",textAlign:"center",color:"#333333",marginBottom:"2mm",flex:1},doctorInfo:{fontSize:"12pt",textAlign:"center",marginTop:"3mm",letterSpacing:"1pt",color:"#1a5f7a"},reportContainer:{marginTop:"5px",borderTop:"2px solid #ecf0f1",borderBottom:"2px solid #ecf0f1",paddingBottom:"60mm"},reportRow:{display:"flex",borderBottom:"1px solid #ecf0f1",padding:"3px 0",alignItems:"center",pageBreakInside:"avoid",breakInside:"avoid-page"},reportRowHeader:{backgroundColor:"#f8f9fa",padding:"8px 0",pageBreakAfter:"avoid"},headerName:{fontSize:"11pt",fontWeight:"bold",paddingRight:"2mm"},headerUnit:{fontSize:"11pt",fontWeight:"bold",textAlign:"center"},headerValue:{fontSize:"11pt",fontWeight:"bold",textAlign:"center"},headerRange:{fontSize:"11pt",fontWeight:"bold",textAlign:"right"},testName:{fontSize:"10pt",color:"#2c3e50",fontWeight:"bold",paddingRight:"2mm"},testValue:{width:"25%",fontSize:"10pt",textAlign:"center"},testUnit:{width:"20%",fontSize:"10pt",textAlign:"center"},testRange:{width:"25%",fontSize:"10pt",textAlign:"right"},patientDetails:{marginTop:"5px",padding:"8px",backgroundColor:"#f8f9fa",borderRadius:"2mm",border:"1px solid #e2e8f0",pageBreakInside:"avoid",breakInside:"avoid-page"},patientColumn:{flex:1,padding:"0 2mm"},patientInfo:{display:"flex",marginBottom:"2mm",alignItems:"center"},patientLabel:{fontSize:"10pt",fontWeight:"bold",color:"#34495e",marginRight:"2mm",minWidth:"20mm"},patientValue:{fontSize:"10pt",color:"#2c3e50"},reportTitle:{textAlign:"center",margin:"10px 0",pageBreakAfter:"avoid"},reportTitleH2:{margin:0,fontSize:"14pt",fontWeight:"bold",textDecoration:"underline"},footer:{position:"absolute",bottom:"7mm",left:"10mm",right:"10mm",paddingTop:"5mm","@media print":{position:"fixed",backgroundColor:"white"}},footerText:{fontSize:"8pt",color:"#666",marginBottom:"2mm",textAlign:"center"},signature:{marginTop:"10mm",textAlign:"right",paddingRight:"20mm",borderTop:"1px solid #000",paddingTop:"4mm"},signatureText:{fontSize:"10pt",fontWeight:"bold"}},d=r.forwardRef(((e,t)=>{let{reportData:n,patientData:d,hospital:u}=e;const m=(0,a.d4)((e=>e.templates.headerTemplateArray)),h=(0,a.d4)((e=>e.templates.labReportUiTemplate)),p=(null===m||void 0===m?void 0:m.length)>0?m[0].value:o.h,f=(0,i.G)(p||o.h),v=new Function("React","HospitalHeader","styles",`return (${h||l.k});`);try{var g;return v(r,f,c)(n,{...d,age:(0,s.F1)((null===(g=d.patient)||void 0===g?void 0:g.age)||d.age)},u,t)}catch(x){return console.error("Error rendering dynamic lab report:",x),r.createElement("div",null,"Error rendering lab report template")}}))},3871:e=>{e.exports=function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+t];return s}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},3932:(e,t,n)=>{var r=n(396),a=n(2866),s=n(2597),i=n(914);e.exports=function(e){return s(e)?r(i(e)):a(e)}},3950:(e,t,n)=>{var r=n(6686),a=n(4757),s=n(801),i=Math.max,o=Math.min;e.exports=function(e,t,n){var l,c,d,u,m,h,p=0,f=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var n=l,r=c;return l=c=void 0,p=t,u=e.apply(r,n)}function y(e){var n=e-h;return void 0===h||n>=t||n<0||v&&e-p>=d}function b(){var e=a();if(y(e))return j(e);m=setTimeout(b,function(e){var n=t-(e-h);return v?o(n,d-(e-p)):n}(e))}function j(e){return m=void 0,g&&l?x(e):(l=c=void 0,u)}function w(){var e=a(),n=y(e);if(l=arguments,c=this,h=e,n){if(void 0===m)return function(e){return p=e,m=setTimeout(b,t),f?x(e):u}(h);if(v)return clearTimeout(m),m=setTimeout(b,t),x(h)}return void 0===m&&(m=setTimeout(b,t)),u}return t=s(t)||0,r(n)&&(f=!!n.leading,d=(v="maxWait"in n)?i(s(n.maxWait)||0,t):d,g="trailing"in n?!!n.trailing:g),w.cancel=function(){void 0!==m&&clearTimeout(m),p=0,l=h=c=m=void 0},w.flush=function(){return void 0===m?u:j(a())},w}},4020:e=>{e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},4052:e=>{var t=Array.isArray;e.exports=t},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},4079:(e,t,n)=>{var r=n(8259),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,i=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,n,r,a){t.push(r?a.replace(s,"$1"):n||e)})),t}));e.exports=i},4160:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},4190:(e,t,n)=>{var r=n(1340);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function x(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=g.prototype;var b=y.prototype=new x;b.constructor=y,f(b,g.prototype),b.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,a)&&!_.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:N.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function D(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===s?"."+D(l,0):s,j(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),T(i,t,a,"",(function(e){return e}))):null!=i&&(E(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",j(e))for(var c=0;c<e.length;c++){var d=s+D(o=e[c],c);l+=T(o,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,a,d=s+D(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:N};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=i,t.PureComponent=y,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=f({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!_.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},4204:(e,t,n)=>{"use strict";n.d(t,{jH:()=>s});var r=n(5043),a=(n(579),r.createContext(void 0));function s(e){const t=r.useContext(a);return e||t||"ltr"}},4223:(e,t,n)=>{var r=n(3331)();e.exports=r},4258:(e,t,n)=>{var r=n(5906)();e.exports=r},4259:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]])},4262:(e,t,n)=>{var r=n(8895),a=n(4052);e.exports=function(e,t,n){var s=t(e);return a(e)?s:r(s,n(e))}},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4416:(e,t,n)=>{var r=n(8902),a=n(5866),s=n(1558),i=n(8114),o=n(8182),l=n(2074);e.exports=function(e,t,n){var c=-1,d=a,u=e.length,m=!0,h=[],p=h;if(n)m=!1,d=s;else if(u>=200){var f=t?null:o(e);if(f)return l(f);m=!1,d=i,p=new r}else p=t?[]:h;e:for(;++c<u;){var v=e[c],g=t?t(v):v;if(v=n||0!==v?v:0,m&&g===g){for(var x=p.length;x--;)if(p[x]===g)continue e;t&&p.push(g),h.push(v)}else d(p,g,n)||(p!==h&&p.push(g),h.push(v))}return h}},4451:(e,t,n)=>{"use strict";n.d(t,{b:()=>o,s:()=>i});var r=n(5043),a=n(7920),s=n(579),i=r.forwardRef(((e,t)=>(0,s.jsx)(a.sG.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));i.displayName="VisuallyHidden";var o=i},4490:(e,t,n)=>{"use strict";var r;n.d(t,{B:()=>l});var a=n(5043),s=n(503),i=(r||(r=n.t(a,2)))["useId".toString()]||(()=>{}),o=0;function l(e){const[t,n]=a.useState(i());return(0,s.N)((()=>{e||n((e=>e??String(o++)))}),[e]),e||(t?`radix-${t}`:"")}},4524:(e,t,n)=>{"use strict";n.d(t,{Cg:()=>s,_P:()=>l,_m:()=>o,my:()=>r,s0:()=>i,w4:()=>a});Math.pow(10,8);const r=6048e5,a=864e5,s=6e4,i=36e5,o=1e3,l=Symbol.for("constructDateFrom")},4543:(e,t,n)=>{e=n.nmd(e);var r=n(6552),a=n(14),s=t&&!t.nodeType&&t,i=s&&e&&!e.nodeType&&e,o=i&&i.exports===s?r.Buffer:void 0,l=(o?o.isBuffer:void 0)||a;e.exports=l},4545:(e,t,n)=>{var r=n(7160);e.exports=function(){this.__data__=new r,this.size=0}},4552:(e,t,n)=>{var r=n(9812),a=Object.prototype,s=a.hasOwnProperty,i=a.toString,o=r?r.toStringTag:void 0;e.exports=function(e){var t=s.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch(l){}var a=i.call(e);return r&&(t?e[o]=n:delete e[o]),a}},4597:(e,t,n)=>{var r=n(2587),a=n(9096),s=n(2165),i=n(4052),o=n(929);e.exports=function(e,t,n){var l=i(e)?r:s;return n&&o(e,t,n)&&(t=void 0),l(e,a(t,3))}},4612:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<a&&0>s(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,h=3,p=!1,f=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function j(e){if(v=!1,b(e),!f)if(null!==r(c))f=!0,O(w);else{var t=r(d);null!==t&&R(j,t.startTime-e)}}function w(e,n){f=!1,v&&(v=!1,x(E),E=-1),p=!0;var s=h;try{for(b(n),m=r(c);null!==m&&(!(m.expirationTime>n)||e&&!T());){var i=m.callback;if("function"===typeof i){m.callback=null,h=m.priorityLevel;var o=i(m.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?m.callback=o:m===r(c)&&a(c),b(n)}else a(c);m=r(c)}if(null!==m)var l=!0;else{var u=r(d);null!==u&&R(j,u.startTime-n),l=!1}return l}finally{m=null,h=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,_=!1,S=null,E=-1,C=5,D=-1;function T(){return!(t.unstable_now()-D<C)}function k(){if(null!==S){var e=t.unstable_now();D=e;var n=!0;try{n=S(!0,e)}finally{n?N():(_=!1,S=null)}}else _=!1}if("function"===typeof y)N=function(){y(k)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=k,N=function(){P.postMessage(null)}}else N=function(){g(k,0)};function O(e){S=e,_||(_=!0,N())}function R(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(d,e),null===r(c)&&e===r(d)&&(v?(x(E),E=-1):v=!0,R(j,s-i))):(e.sortIndex=o,n(c,e),f||p||(f=!0,O(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4664:(e,t,n)=>{var r=n(4258),a=n(8673);e.exports=function(e,t){return e&&r(e,t,a)}},4746:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,a){return n=!!t(e,r,a)})),n}},4757:(e,t,n)=>{var r=n(6552);e.exports=function(){return r.Date.now()}},4816:(e,t,n)=>{var r=n(7251),a=n(7159),s=n(438),i=n(9394),o=n(6874);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=i,l.prototype.set=o,e.exports=l},4912:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(2316);function a(e,t){const n=(0,r.a)(e,t?.in);return n.setDate(1),n.setHours(0,0,0,0),n}},4942:(e,t,n)=>{"use strict";n.d(t,{Ss:()=>l,ef:()=>i,xM:()=>o});const r=/^D+$/,a=/^Y+$/,s=["D","DD","YY","YYYY"];function i(e){return r.test(e)}function o(e){return a.test(e)}function l(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(r),s.includes(e))throw new RangeError(r)}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,m=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,x=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function j(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case u:case s:case o:case i:case h:return e;default:switch(e=e&&e.$$typeof){case c:case m:case v:case f:case l:return e;default:return t}}case a:return t}}}function w(e){return j(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=m,t.Fragment=s,t.Lazy=v,t.Memo=f,t.Portal=a,t.Profiler=o,t.StrictMode=i,t.Suspense=h,t.isAsyncMode=function(e){return w(e)||j(e)===d},t.isConcurrentMode=w,t.isContextConsumer=function(e){return j(e)===c},t.isContextProvider=function(e){return j(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return j(e)===m},t.isFragment=function(e){return j(e)===s},t.isLazy=function(e){return j(e)===v},t.isMemo=function(e){return j(e)===f},t.isPortal=function(e){return j(e)===a},t.isProfiler=function(e){return j(e)===o},t.isStrictMode=function(e){return j(e)===i},t.isSuspense=function(e){return j(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===u||e===o||e===i||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===m||e.$$typeof===x||e.$$typeof===y||e.$$typeof===b||e.$$typeof===g)},t.typeOf=j},5029:(e,t,n)=>{var r=n(6989),a=n(3097),s=n(3366),i=n(2597),o=n(9417),l=n(1310),c=n(914);e.exports=function(e,t){return i(e)&&o(t)?l(c(e),t):function(n){var i=a(n,e);return void 0===i&&i===t?s(n,e):r(t,i,3)}}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5082:(e,t)=>{"use strict";var n=60103,r=60106,a=60107,s=60108,i=60114,o=60109,l=60110,c=60112,d=60113,u=60120,m=60115,h=60116,p=60121,f=60122,v=60117,g=60129,x=60131;if("function"===typeof Symbol&&Symbol.for){var y=Symbol.for;n=y("react.element"),r=y("react.portal"),a=y("react.fragment"),s=y("react.strict_mode"),i=y("react.profiler"),o=y("react.provider"),l=y("react.context"),c=y("react.forward_ref"),d=y("react.suspense"),u=y("react.suspense_list"),m=y("react.memo"),h=y("react.lazy"),p=y("react.block"),f=y("react.server.block"),v=y("react.fundamental"),g=y("react.debug_trace_mode"),x=y("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case i:case s:case d:case u:return e;default:switch(e=e&&e.$$typeof){case l:case c:case h:case m:case o:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return b(e)===l}},5126:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,r:()=>a});const r=(0,n(6756).Z0)({name:"loader",initialState:{isLoading:!0},reducers:{setLoading:(e,t)=>{e.isLoading=t.payload}}}),{setLoading:a}=r.actions,s=r.reducer},5172:(e,t,n)=>{"use strict";n.d(t,{P:()=>a});var r=n(1844);function a(e,t){const[n,a]=(0,r.x)(e,t.start,t.end);return{start:n,end:a}}},5173:(e,t,n)=>{e.exports=n(1497)()},5179:(e,t,n)=>{"use strict";n.d(t,{G$:()=>G,Hs:()=>j,UC:()=>te,VY:()=>re,ZL:()=>Q,bL:()=>Z,bm:()=>ae,hE:()=>ne,hJ:()=>ee,l9:()=>J});var r=n(5043),a=n(858),s=n(2814),i=n(1862),o=n(4490),l=n(3642),c=n(1184),d=n(276),u=n(3321),m=n(2894),h=n(7920),p=n(6590),f=n(1672),v=n(5754),g=n(6851),x=n(579),y="Dialog",[b,j]=(0,i.A)(y),[w,N]=b(y),_=e=>{const{__scopeDialog:t,children:n,open:a,defaultOpen:s,onOpenChange:i,modal:c=!0}=e,d=r.useRef(null),u=r.useRef(null),[m=!1,h]=(0,l.i)({prop:a,defaultProp:s,onChange:i});return(0,x.jsx)(w,{scope:t,triggerRef:d,contentRef:u,contentId:(0,o.B)(),titleId:(0,o.B)(),descriptionId:(0,o.B)(),open:m,onOpenChange:h,onOpenToggle:r.useCallback((()=>h((e=>!e))),[h]),modal:c,children:n})};_.displayName=y;var S="DialogTrigger",E=r.forwardRef(((e,t)=>{const{__scopeDialog:n,...r}=e,i=N(S,n),o=(0,s.s)(t,i.triggerRef);return(0,x.jsx)(h.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":V(i.open),...r,ref:o,onClick:(0,a.m)(e.onClick,i.onOpenToggle)})}));E.displayName=S;var C="DialogPortal",[D,T]=b(C,{forceMount:void 0}),k=e=>{const{__scopeDialog:t,forceMount:n,children:a,container:s}=e,i=N(C,t);return(0,x.jsx)(D,{scope:t,forceMount:n,children:r.Children.map(a,(e=>(0,x.jsx)(m.C,{present:n||i.open,children:(0,x.jsx)(u.Z,{asChild:!0,container:s,children:e})})))})};k.displayName=C;var A="DialogOverlay",P=r.forwardRef(((e,t)=>{const n=T(A,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=N(A,e.__scopeDialog);return s.modal?(0,x.jsx)(m.C,{present:r||s.open,children:(0,x.jsx)(O,{...a,ref:t})}):null}));P.displayName=A;var O=r.forwardRef(((e,t)=>{const{__scopeDialog:n,...r}=e,a=N(A,n);return(0,x.jsx)(f.A,{as:g.DX,allowPinchZoom:!0,shards:[a.contentRef],children:(0,x.jsx)(h.sG.div,{"data-state":V(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})})),R="DialogContent",M=r.forwardRef(((e,t)=>{const n=T(R,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=N(R,e.__scopeDialog);return(0,x.jsx)(m.C,{present:r||s.open,children:s.modal?(0,x.jsx)(I,{...a,ref:t}):(0,x.jsx)(L,{...a,ref:t})})}));M.displayName=R;var I=r.forwardRef(((e,t)=>{const n=N(R,e.__scopeDialog),i=r.useRef(null),o=(0,s.s)(t,n.contentRef,i);return r.useEffect((()=>{const e=i.current;if(e)return(0,v.Eq)(e)}),[]),(0,x.jsx)(F,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.m)(e.onCloseAutoFocus,(e=>{e.preventDefault(),n.triggerRef.current?.focus()})),onPointerDownOutside:(0,a.m)(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()})),onFocusOutside:(0,a.m)(e.onFocusOutside,(e=>e.preventDefault()))})})),L=r.forwardRef(((e,t)=>{const n=N(R,e.__scopeDialog),a=r.useRef(!1),s=r.useRef(!1);return(0,x.jsx)(F,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||n.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const r=t.target,i=n.triggerRef.current?.contains(r);i&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})})),F=r.forwardRef(((e,t)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,...l}=e,u=N(R,n),m=r.useRef(null),h=(0,s.s)(t,m);return(0,p.Oh)(),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.n,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:i,onUnmountAutoFocus:o,children:(0,x.jsx)(c.qW,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":V(u.open),...l,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Y,{titleId:u.titleId}),(0,x.jsx)(X,{contentRef:m,descriptionId:u.descriptionId})]})]})})),B="DialogTitle",W=r.forwardRef(((e,t)=>{const{__scopeDialog:n,...r}=e,a=N(B,n);return(0,x.jsx)(h.sG.h2,{id:a.titleId,...r,ref:t})}));W.displayName=B;var $="DialogDescription",U=r.forwardRef(((e,t)=>{const{__scopeDialog:n,...r}=e,a=N($,n);return(0,x.jsx)(h.sG.p,{id:a.descriptionId,...r,ref:t})}));U.displayName=$;var z="DialogClose",H=r.forwardRef(((e,t)=>{const{__scopeDialog:n,...r}=e,s=N(z,n);return(0,x.jsx)(h.sG.button,{type:"button",...r,ref:t,onClick:(0,a.m)(e.onClick,(()=>s.onOpenChange(!1)))})}));function V(e){return e?"open":"closed"}H.displayName=z;var q="DialogTitleWarning",[G,K]=(0,i.q)(q,{contentName:R,titleName:B,docsSlug:"dialog"}),Y=e=>{let{titleId:t}=e;const n=K(q),a=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return r.useEffect((()=>{if(t){document.getElementById(t)||console.error(a)}}),[a,t]),null},X=e=>{let{contentRef:t,descriptionId:n}=e;const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${K("DialogDescriptionWarning").contentName}}.`;return r.useEffect((()=>{const e=t.current?.getAttribute("aria-describedby");if(n&&e){document.getElementById(n)||console.warn(a)}}),[a,t,n]),null},Z=_,J=E,Q=k,ee=P,te=M,ne=W,re=U,ae=H},5193:(e,t,n)=>{var r=n(6913),a=n(2761);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},5204:(e,t,n)=>{var r=n(7937)(n(6552),"Map");e.exports=r},5268:(e,t,n)=>{var r=n(9160);e.exports=function(e){return r(e)&&e!=+e}},5295:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},5324:(e,t,n)=>{var r=n(4052),a=n(2597),s=n(4079),i=n(1069);e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:s(i(e))}},5385:(e,t,n)=>{"use strict";n.d(t,{s:()=>c});var r=n(4524),a=n(9415),s=n(2440),i=n(1425);function o(e,t){const n=(0,i.p)(e,t),r=(0,s.w)(t?.in||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),(0,a.b)(r)}var l=n(2316);function c(e,t){const n=(0,l.a)(e,t?.in),s=+(0,a.b)(n)-+o(n);return Math.round(s/r.my)+1}},5387:(e,t,n)=>{var r=n(7937)(n(6552),"Promise");e.exports=r},5428:(e,t,n)=>{var r=n(6913),a=n(6173),s=n(2761),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&a(e.length)&&!!i[r(e)]}},5463:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var r=n(5043),a=n(1862),s=n(2814),i=n(6851),o=n(579);function l(e){const t=e+"CollectionProvider",[n,l]=(0,a.A)(t),[c,d]=n(t,{collectionRef:{current:null},itemMap:new Map}),u=e=>{const{scope:t,children:n}=e,a=r.useRef(null),s=r.useRef(new Map).current;return(0,o.jsx)(c,{scope:t,itemMap:s,collectionRef:a,children:n})};u.displayName=t;const m=e+"CollectionSlot",h=r.forwardRef(((e,t)=>{const{scope:n,children:r}=e,a=d(m,n),l=(0,s.s)(t,a.collectionRef);return(0,o.jsx)(i.DX,{ref:l,children:r})}));h.displayName=m;const p=e+"CollectionItemSlot",f="data-radix-collection-item",v=r.forwardRef(((e,t)=>{const{scope:n,children:a,...l}=e,c=r.useRef(null),u=(0,s.s)(t,c),m=d(p,n);return r.useEffect((()=>(m.itemMap.set(c,{ref:c,...l}),()=>{m.itemMap.delete(c)}))),(0,o.jsx)(i.DX,{[f]:"",ref:u,children:a})}));return v.displayName=p,[{Provider:u,Slot:h,ItemSlot:v},function(t){const n=d(e+"CollectionConsumer",t);return r.useCallback((()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${f}]`));return Array.from(n.itemMap.values()).sort(((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current)))}),[n.collectionRef,n.itemMap])},l]}},5469:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5538:(e,t,n)=>{var r=n(7160),a=n(4545),s=n(793),i=n(7760),o=n(3892),l=n(6788);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=s,c.prototype.get=i,c.prototype.has=o,c.prototype.set=l,e.exports=c},5575:(e,t,n)=>{var r=n(7937)(Object,"create");e.exports=r},5598:(e,t,n)=>{"use strict";n.d(t,{Cf:()=>h,Es:()=>f,HM:()=>u,L3:()=>v,c7:()=>p,lG:()=>l,rr:()=>g,zM:()=>c});var r=n(5043),a=n(5179),s=n(852),i=n(9766),o=n(579);const l=a.bL,c=a.l9,d=a.ZL,u=a.bm,m=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,o.jsx)(a.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r})}));m.displayName=a.hJ.displayName;const h=r.forwardRef(((e,t)=>{let{className:n,children:r,...l}=e;return(0,o.jsxs)(d,{children:[(0,o.jsx)(m,{}),(0,o.jsxs)(a.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...l,children:[r,(0,o.jsxs)(a.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,o.jsx)(s.MKb,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}));h.displayName=a.UC.displayName;const p=e=>{let{className:t,...n}=e;return(0,o.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};p.displayName="DialogHeader";const f=e=>{let{className:t,...n}=e;return(0,o.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};f.displayName="DialogFooter";const v=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,o.jsx)(a.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...r})}));v.displayName=a.hE.displayName;const g=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,o.jsx)(a.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...r})}));g.displayName=a.VY.displayName},5636:(e,t,n)=>{var r=n(1170),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var s=arguments,i=-1,o=a(s.length-t,0),l=Array(o);++i<o;)l[i]=s[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=s[i];return c[t]=n(l),r(e,this,c)}}},5647:(e,t,n)=>{var r=n(3279),a=n(5636),s=n(6350);e.exports=function(e,t){return s(a(e,t,r),e+"")}},5652:(e,t,n)=>{var r=n(4664),a=n(6516)(r);e.exports=a},5654:(e,t,n)=>{var r=n(7937),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=a},5702:(e,t,n)=>{"use strict";function r(){return"undefined"!==typeof window}function a(e){return o(e)?(e.nodeName||"").toLowerCase():"#document"}function s(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function i(e){var t;return null==(t=(o(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function o(e){return!!r()&&(e instanceof Node||e instanceof s(e).Node)}function l(e){return!!r()&&(e instanceof Element||e instanceof s(e).Element)}function c(e){return!!r()&&(e instanceof HTMLElement||e instanceof s(e).HTMLElement)}function d(e){return!(!r()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof s(e).ShadowRoot)}function u(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=x(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function m(e){return["table","td","th"].includes(a(e))}function h(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(n){return!1}}))}function p(e){const t=v(),n=l(e)?x(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function f(e){let t=b(e);for(;c(t)&&!g(t);){if(p(t))return t;if(h(t))return null;t=b(t)}return null}function v(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function g(e){return["html","body","#document"].includes(a(e))}function x(e){return s(e).getComputedStyle(e)}function y(e){return l(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function b(e){if("html"===a(e))return e;const t=e.assignedSlot||e.parentNode||d(e)&&e.host||i(e);return d(t)?t.host:t}function j(e){const t=b(e);return g(t)?e.ownerDocument?e.ownerDocument.body:e.body:c(t)&&u(t)?t:j(t)}function w(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const a=j(e),i=a===(null==(r=e.ownerDocument)?void 0:r.body),o=s(a);if(i){const e=N(o);return t.concat(o,o.visualViewport||[],u(a)?a:[],e&&n?w(e):[])}return t.concat(a,w(a,[],n))}function N(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}n.d(t,{$4:()=>b,CP:()=>y,L9:()=>x,Lv:()=>m,Tc:()=>v,Tf:()=>h,ZU:()=>u,_m:()=>N,ep:()=>i,eu:()=>g,gJ:()=>f,mq:()=>a,sQ:()=>p,sb:()=>c,v9:()=>w,vq:()=>l,zk:()=>s})},5713:e=>{e.exports=function(){}},5752:(e,t,n)=>{var r=n(9395),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,s,i,o){var l=1&n,c=r(e),d=c.length;if(d!=r(t).length&&!l)return!1;for(var u=d;u--;){var m=c[u];if(!(l?m in t:a.call(t,m)))return!1}var h=o.get(e),p=o.get(t);if(h&&p)return h==t&&p==e;var f=!0;o.set(e,t),o.set(t,e);for(var v=l;++u<d;){var g=e[m=c[u]],x=t[m];if(s)var y=l?s(x,g,m,t,e,o):s(g,x,m,e,t,o);if(!(void 0===y?g===x||i(g,x,n,s,o):y)){f=!1;break}v||(v="constructor"==m)}if(f&&!v){var b=e.constructor,j=t.constructor;b==j||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof j&&j instanceof j||(f=!1)}return o.delete(e),o.delete(t),f}},5754:(e,t,n)=>{"use strict";n.d(t,{Eq:()=>d});var r=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},a=new WeakMap,s=new WeakMap,i={},o=0,l=function(e){return e&&(e.host||l(e.parentNode))},c=function(e,t,n,r){var c=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=l(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);i[n]||(i[n]=new WeakMap);var d=i[n],u=[],m=new Set,h=new Set(c),p=function(e){e&&!m.has(e)&&(m.add(e),p(e.parentNode))};c.forEach(p);var f=function(e){e&&!h.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(m.has(e))f(e);else try{var t=e.getAttribute(r),i=null!==t&&"false"!==t,o=(a.get(e)||0)+1,l=(d.get(e)||0)+1;a.set(e,o),d.set(e,l),u.push(e),1===o&&i&&s.set(e,!0),1===l&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}catch(c){console.error("aria-hidden: cannot operate on ",e,c)}}))};return f(t),m.clear(),o++,function(){u.forEach((function(e){var t=a.get(e)-1,i=d.get(e)-1;a.set(e,t),d.set(e,i),t||(s.has(e)||e.removeAttribute(r),s.delete(e)),i||e.removeAttribute(n)})),--o||(a=new WeakMap,a=new WeakMap,s=new WeakMap,i={})}},d=function(e,t,n){void 0===n&&(n="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),s=t||r(e);return s?(a.push.apply(a,Array.from(s.querySelectorAll("[aria-live]"))),c(a,s,n,"aria-hidden")):function(){return null}}},5757:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var r=n(1844);function a(e,t,n){const[a,s]=(0,r.x)(n?.in,e,t);return a.getFullYear()===s.getFullYear()&&a.getMonth()===s.getMonth()}},5797:(e,t,n)=>{var r=n(4816);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var i=e.apply(this,r);return n.cache=s.set(a,i)||s,i};return n.cache=new(a.Cache||r),n}a.Cache=r,e.exports=a},5816:e=>{e.exports=function(e,t,n,r){for(var a=e.length,s=n+(r?1:-1);r?s--:++s<a;)if(t(e[s],s,e))return s;return-1}},5830:(e,t,n)=>{"use strict";n.d(t,{dj:()=>m,oR:()=>u});var r=n(5043);let a=0;const s=new Map,i=e=>{if(s.has(e))return;const t=setTimeout((()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})}),2e3);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case"DISMISS_TOAST":{const{toastId:n}=t;return n?i(n):e.toasts.forEach((e=>{i(e.id)})),{...e,toasts:e.toasts.map((e=>e.id===n||void 0===n?{...e,open:!1}:e))}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))}}},l=[];let c={toasts:[]};function d(e){c=o(c,e),l.forEach((e=>{e(c)}))}function u(e){let{...t}=e;const n=(a=(a+1)%Number.MAX_SAFE_INTEGER,a.toString()),r=()=>d({type:"DISMISS_TOAST",toastId:n});return d({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||r()}}}),i(n),{id:n,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function m(){const[e,t]=r.useState(c);return r.useEffect((()=>(l.push(t),()=>{const e=l.indexOf(t);e>-1&&l.splice(e,1)})),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},5866:(e,t,n)=>{var r=n(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},5872:(e,t,n)=>{"use strict";n.d(t,{A:()=>N});var r=n(5043),a=n(3390),s=n(2264),i=n(1981),o=n(1140),l=n(3141),c=n(3400),d=n(8106),u=n(8134),m=n(3800),h=n(3416),p=n(7368),f=n(3003),v=n(6195),g=n(5830),x=n(9786),y=n(2754),b=n(579);const j=(e,t,n)=>{var r,a,s,i;if(!e||!t)return"inherit";if(null!==(r=t)&&void 0!==r&&null!==(a=r.toLowerCase())&&void 0!==a&&a.includes("male")&&null!==(s=t)&&void 0!==s&&null!==(i=s.toLowerCase())&&void 0!==i&&i.includes("female")){var o,l;const e=(null===(o=t)||void 0===o||null===(l=o.split(","))||void 0===l?void 0:l.map((e=>null===e||void 0===e?void 0:e.trim()))).find((e=>{var t;return null===e||void 0===e||null===(t=e.toLowerCase())||void 0===t?void 0:t.includes(null===n||void 0===n?void 0:n.toLowerCase())}));e&&(t=e.replace(/\(.*?\)/g,"").trim())}const c=parseFloat(e);if(isNaN(c))return"inherit";if(t.includes("-")){const[e,n]=t.split("-").map((e=>parseFloat(e)));if(!isNaN(e)&&!isNaN(n))return c<e||c>n?"#FF4444":"#2ECC71"}else if(t.startsWith("<")){const e=parseFloat(t.substring(1));if(!isNaN(e))return c>e?"#FF4444":"#2ECC71"}else if(t.startsWith(">")){const e=parseFloat(t.substring(1));if(!isNaN(e))return c<e?"#FF4444":"#2ECC71"}return"inherit"},w=(e,t)=>{var n,r;if(!e||!t)return e;if(null!==(n=e.toLowerCase())&&void 0!==n&&n.includes("male")&&null!==(r=e.toLowerCase())&&void 0!==r&&r.includes("female")){const n=e.split(",").map((e=>e.trim())).find((e=>{var n;return null===(n=e.toLowerCase())||void 0===n?void 0:n.includes(t.toLowerCase())}));if(n)return n.replace(/\(.*?\)/g,"").trim()}return e},N=e=>{let{template:t,patientData:n,onSave:N,onClose:_,searchWhere:S,component:E}=e;const[C,D]=(0,r.useState)([]),[T,k]=(0,r.useState)(new Date),[A,P]=(0,r.useState)([]),[O,R]=(0,r.useState)(null),[M,I]=(0,r.useState)(!1),L=(0,f.d4)((e=>e.hospital.hospitalInfo)),F=(0,f.wA)(),{toast:B}=(0,g.dj)(),W=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(t&&t.fields){const e=(null===n||void 0===n?void 0:n.labReports.filter((e=>e.name.toLowerCase()===t.name.toLowerCase())))||[],r=(null===e||void 0===e?void 0:e.length)>0?new Date(Math.max(...e.map((e=>e.date?new Date(e.date):new Date)))):new Date;P(e),(null===e||void 0===e?void 0:e.length)>0?$(e,r):(k(new Date),R(null),z())}}),[t]);const $=(e,t)=>{const n=e.find((e=>new Date(e.date).toDateString()===t.toDateString()));n?(k(new Date(n.date)),R(new Date(n.date)),U(n)):(k(t),R(null),z())},U=e=>{D(Object.entries(t.fields).map((n=>{var r,a,s,i,o,l,c,d;let[u,m]=n;return{name:u,label:t.name.toLowerCase()===e.name.toLowerCase()?null===(r=e.report)||void 0===r||null===(a=r[u])||void 0===a?void 0:a.label:m.label,unit:t.name.toLowerCase()===e.name.toLowerCase()?null===(s=e.report)||void 0===s||null===(i=s[u])||void 0===i?void 0:i.unit:m.unit,normalRange:t.name.toLowerCase()===e.name.toLowerCase()?null===(o=e.report)||void 0===o||null===(l=o[u])||void 0===l?void 0:l.normalRange:m.normalRange,options:m.options,value:t.name.toLowerCase()===e.name.toLowerCase()?null===(c=e.report)||void 0===c||null===(d=c[u])||void 0===d?void 0:d.value:"",calculationDetails:m.calculationDetails}})))},z=()=>{D(Object.entries(t.fields).map((e=>{let[t,n]=e;return{name:t,label:n.label,unit:n.unit,normalRange:n.normalRange,options:n.options,value:"",calculationDetails:n.calculationDetails}})))},H=(e,t,n)=>{const{value:r}=e.target;D((e=>{const a=e.map((e=>e.name===t?{...e,[n||"value"]:r}:e));return a.map((e=>{if(e.name===t)return e;if(e.calculationDetails&&e.calculationDetails.dependencies.includes(t)){const t=((e,t)=>{if(!e.calculationDetails)return null;const{formula:n,dependencies:r}=e.calculationDetails,a={};for(const i of r){const e=t.find((e=>e.name===i));if(!e||!e.value||""===e.value)return"";const n=parseFloat(e.value);if(isNaN(n))return"";a[i]=n}try{const e=new Function(...r,`return ${n}`)(...r.map((e=>a[e])));return isNaN(e)?"":e.toFixed(2)}catch(s){return console.error("Error calculating formula:",s),""}})(e,a);return{...e,value:t}}return e}))}))},V=(0,l.useReactToPrint)({content:()=>W.current,onBeforeGetContent:()=>(I(!0),new Promise((e=>{setTimeout((()=>{I(!1),e()}),250)})))}),q=async e=>{e.preventDefault();const r={name:t.name,date:(0,u.GP)(T,"yyyy-MM-dd"),report:C.reduce(((e,t)=>(e[t.name]={value:t.value,label:t.label,unit:t.unit,normalRange:t.normalRange},e)),{})};try{const e=await F((0,v.BM)({_id:n._id,labReport:{...r},component:E}));if(!v.BM.fulfilled.match(e))throw new Error("Failed to add lab report");if(B({title:"Success",description:"Lab Report added successfully",variant:"success"}),N){const t=e.payload.visit||e.payload.registration;N(r,t)}}catch(a){console.error("Error adding lab report:",a),B({title:"Error",description:"Failed to add lab report",variant:"destructive"})}},G=(e,t)=>{if("Enter"===e.key){e.preventDefault();const n=document.querySelectorAll('input[tabindex="0"], textarea[tabindex="0"], [data-search-suggestion="true"]'),r=Array.from(n),a=r.find(((e,n)=>n>t));if(!a&&t===r.length-1)return void q(e);if(a)if(a.hasAttribute("data-search-suggestion")){const e=a.querySelector("input");e&&e.focus()}else a.focus()}},K=(e,t,n)=>[void 0,"",null,"N/A","-"].includes(e)&&[void 0,"",null,"N/A","-"].includes(t)&&0===(null===n||void 0===n?void 0:n.length);return(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)(o.Zp,{className:"p-4  w-full",children:(0,b.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h1",{className:"text-xl font-bold mb-2 text-center capitalize",children:t.name}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)(d.AM,{children:[(0,b.jsx)(d.Wv,{asChild:!0,children:(0,b.jsx)(a.$,{variant:"outline",children:(0,u.GP)(T,"PPP")})}),(0,b.jsx)(d.hl,{className:"w-auto p-0",children:(0,b.jsx)(c.V,{mode:"single",selected:T,onSelect:e=>{$(A,e)},initialFocus:!0})})]}),(0,b.jsxs)(a.$,{variant:"outline",type:"button",onClick:V,className:"flex items-center gap-2",children:[(0,b.jsx)(y.A,{className:"h-4 w-4"}),"Print Report"]})]})]}),C.some((e=>"findings"!==e.label.toLowerCase()&&"impressions"!==e.label.toLowerCase()&&(e.unit||e.normalRange)))&&(0,b.jsxs)("div",{className:"grid grid-cols-[4fr_2fr_1fr_3fr] gap-4 mb-2 font-bold bg-gray-100 p-2 rounded",children:[(0,b.jsx)("div",{children:"Test Name"}),(0,b.jsx)("div",{children:"Value"}),(0,b.jsx)("div",{children:"Unit"}),(0,b.jsx)("div",{children:"Normal Range"})]}),(0,b.jsx)(x.JY,{onDragEnd:e=>{if(!e.destination)return;const t=((e,t,n)=>{const r=Array.from(e),[a]=r.splice(t,1);return r.splice(n,0,a),r})(C,e.source.index,e.destination.index);D(t)},children:(0,b.jsx)(x.gL,{droppableId:"fields",children:e=>(0,b.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"space-y-2",children:[C.map(((e,t)=>(0,b.jsx)(x.sx,{draggableId:e.name,index:t,children:(r,a)=>{var o,l,c,d,u,m,f;return(0,b.jsx)("div",{ref:r.innerRef,...r.draggableProps,className:`${"findings"===(null===(o=e.label)||void 0===o?void 0:o.toLowerCase())||"impression"===(null===(l=e.label)||void 0===l?void 0:l.toLowerCase())||K(e.unit,e.normalRange,e.options,e.options)?"col-span-full":"grid grid-cols-[4fr_2fr_1fr_3fr] gap-2 items-center border-b pb-2"} ${a.isDragging?"bg-blue-50 rounded shadow-md":""}`,style:{...r.draggableProps.style},children:"findings"===(null===(c=e.label)||void 0===c?void 0:c.toLowerCase())||"impression"===(null===(d=e.label)||void 0===d?void 0:d.toLowerCase())||K(e.unit,e.normalRange,e.options)?(0,b.jsxs)("div",{className:"col-span-full space-y-1",children:[(0,b.jsx)(i.J,{htmlFor:e.name,className:"mb-1",children:e.label}),(0,b.jsx)(h.T,{id:e.name,value:e.value,onChange:t=>H(t,e.name),onKeyDown:e=>G(e,t),className:"h-32 w-full",tabIndex:0})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[(0,b.jsx)("span",{...r.dragHandleProps,className:"cursor-grab",tabIndex:-1,children:"\u22ee\u22ee"}),(0,b.jsx)(s.p,{value:e.label,onChange:t=>H(t,e.name,"label"),className:"px-1",tabIndex:-1})]}),(0,b.jsx)("div",{children:(null===(u=e.options)||void 0===u?void 0:u.length)>0?(0,b.jsx)("div",{"data-search-suggestion":"true",children:(0,b.jsx)(p.A,{suggestions:null===(m=e.options)||void 0===m?void 0:m.map((e=>({name:e}))),placeholder:`Select ${e.label}`,value:e.value,setValue:t=>H({target:{value:t}},e.name),onSuggestionSelect:t=>{return n=e.name,r=t,void D((e=>e.map((e=>e.name===n?{...e,value:r.name}:e))));var n,r},onKeyDown:e=>G(e,t),tabIndex:0})}):(0,b.jsx)(s.p,{type:(null!==e&&void 0!==e&&e.unit,"text"),id:e.name,name:e.name,value:e.value,onChange:t=>H(t,e.name),onKeyDown:e=>G(e,t),step:"0.01",className:"font-bold",style:{color:j(e.value,e.normalRange,null===n||void 0===n?void 0:n.gender)},tabIndex:0})}),(0,b.jsx)("div",{children:(0,b.jsx)(s.p,{value:e.unit,onChange:t=>H(t,e.name,"unit"),placeholder:"-",className:"px-1",tabIndex:-1})}),(0,b.jsx)("div",{children:(0,b.jsx)(s.p,{value:w(e.normalRange,(null===n||void 0===n?void 0:n.gender)||(null===n||void 0===n||null===(f=n.patient)||void 0===f?void 0:f.gender)),onChange:t=>H(t,e.name,"normalRange"),placeholder:"-",className:"flex-1",tabIndex:-1})})]})})}},e.name))),e.placeholder]})})}),(0,b.jsxs)("div",{className:"flex justify-center space-x-4 mt-6",children:[(0,b.jsx)(a.$,{type:"submit",className:"w-full",children:"Save Lab Report"}),(0,b.jsx)(a.$,{type:"button",className:"w-full",onClick:V,children:"Print Report"})]})]})}),(0,b.jsx)("div",{style:{display:"none"},children:(0,b.jsx)("div",{ref:W,children:(0,b.jsx)(m.A,{reportData:{name:t.name,date:T,notes:t.notes,remarksArray:t.remarksArray,sections:t.sections,order:t.sections?(()=>{const e=[];let n=0;const r=[...t.sections||[]].sort(((e,t)=>e.position-t.position));return r.forEach(((t,a)=>{const s=C.slice(n,t.position);if(e.push(...s.map(((e,t)=>({type:"field",id:e.name,label:e.label,value:e.value,unit:e.unit,normalRange:e.normalRange,position:n+t})))),e.push({type:"section",id:t.name,name:t.name,position:t.position}),n=t.position,a===r.length-1){const t=C.slice(n);e.push(...t.map(((e,t)=>({type:"field",id:e.name,label:e.label,value:e.value,unit:e.unit,normalRange:e.normalRange,position:n+t}))))}})),0===r.length&&e.push(...C.map(((e,t)=>({type:"field",id:e.name,label:e.label,value:e.value,unit:e.unit,normalRange:e.normalRange,position:t})))),e})():C.map(((e,t)=>({type:"field",id:e.name,label:e.label,value:e.value,unit:e.unit,normalRange:e.normalRange,position:t}))),report:C.reduce(((e,t)=>(e[t.label]={value:t.value,unit:t.unit,normalRange:t.normalRange},e)),{})},hospital:L,patientData:n})})})]})}},5893:(e,t,n)=>{var r=n(6599);e.exports=function(e,t,n){for(var a=-1,s=e.criteria,i=t.criteria,o=s.length,l=n.length;++a<o;){var c=r(s[a],i[a]);if(c)return a>=l?c:c*("desc"==n[a]?-1:1)}return e.index-t.index}},5906:e=>{e.exports=function(e){return function(t,n,r){for(var a=-1,s=Object(t),i=r(t),o=i.length;o--;){var l=i[e?o:++a];if(!1===n(s[l],l,s))break}return t}}},5949:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});n(5043);var r=n(917),a=n(9766),s=n(579);const i=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-[#4BB543] text-white shadow hover:bg-[#4BB543]/80",warning:"border-transparent bg-orange-500 text-white shadow hover:bg-orange-500/80",bluish:"border-transparent bg-blue-500 text-white shadow hover:bg-blue-500/80",muted:"border-transparent bg-gray-500 text-white shadow"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:n,...r}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:n}),t),...r})}},5962:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(5043),a=(n(7950),n(2264)),s=n(6817),i=n(8796),o=n(6178),l=n(6604),c=n(579);const d=(0,r.forwardRef)(((e,t)=>{let{suggestions:n=[],placeholder:d,selectedValues:u,setSelectedValues:m,onSuggestionSelect:h,onError:p=!1}=e;const[f,v]=(0,r.useState)([]),[g,x]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),[j,w]=(0,r.useState)(-1),N=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=n.filter((e=>{var t;return null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(y.toLowerCase())}));v(e)}),[y,n]);const _=e=>{if(null===u||void 0===u||!u.some((t=>t.name===e.name))){const t=[...u,e];m(t),h&&h(t)}var n;(b(""),x(!1),t&&null!==t&&void 0!==t&&t.current)&&(null===t||void 0===t||null===(n=t.current)||void 0===n||n.focus())};(0,r.useEffect)((()=>{const e=()=>{g&&null!==t&&void 0!==t&&t.current&&(x(!1),setTimeout((()=>x(!0)),0))};return window.addEventListener("scroll",e,!0),()=>window.removeEventListener("scroll",e,!0)}),[g]);const{refs:S,floatingStyles:E}=(0,i.we)({placement:"bottom-start",middleware:[(0,o.cY)(4),(0,o.UU)({fallbackPlacements:["top-start"]}),(0,o.BN)()],strategy:"absolute"});return(0,c.jsxs)("div",{className:"relative w-full",ref:N,children:[(0,c.jsxs)("div",{ref:S.setReference,className:"relative",children:[(0,c.jsx)(a.p,{ref:t,type:"text",value:y,onChange:e=>{b(e.target.value),x(!0)},onKeyDown:e=>{if("Enter"===e.key)if(e.preventDefault(),-1!==j&&g&&f.length>0)_(f[j]);else{const e=y.trim();if(e&&(null===u||void 0===u||!u.some((t=>t.name===e)))){const n=[...u,{name:e}];m(n),h&&h(n),b(""),x(!1),t&&t.current&&t.current.focus()}}else g&&f.length>0&&("ArrowDown"===e.key?(e.preventDefault(),w((e=>e<f.length-1?e+1:0))):"ArrowUp"===e.key&&(e.preventDefault(),w((e=>e>0?e-1:f.length-1))))},onFocus:()=>x(!0),onBlur:()=>setTimeout((()=>x(!1)),200),placeholder:d||"Search or type",className:"pr-8 hover:cursor-pointer font-semibold w-full "+(p?"border-red-500 focus-visible:ring-red-500":"")}),(0,c.jsx)(s.A,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 opacity-50"})]}),g&&f.length>0&&(0,c.jsx)("div",{ref:S.setFloating,style:{...E,width:"100%",position:"absolute",left:0,marginTop:"4px"},className:"z-[9999] bg-popover rounded-md border shadow-md",children:(0,c.jsx)(l.F,{className:""+(f.length>5?"h-[200px]":""),children:(0,c.jsx)("ul",{children:f.map(((e,t)=>(0,c.jsxs)("li",{onClick:()=>_(e),className:"px-4 py-2 cursor-pointer hover:bg-accent hover:text-accent-foreground flex justify-between items-center\n                      "+(t===j?"bg-accent text-accent-foreground":""),children:[(0,c.jsx)("span",{children:e.name}),e.rate&&(0,c.jsxs)("span",{className:"text-gray-600",children:["\u20b9",e.rate]})]},`${e.name} ${t}`)))})})})]})}))},5967:e=>{e.exports=function(e){return e.split("")}},5990:(e,t,n)=>{var r=n(3028)(Object.getPrototypeOf,Object);e.exports=r},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6140:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6178:(e,t,n)=>{"use strict";n.d(t,{BN:()=>p,ER:()=>f,Ej:()=>g,UE:()=>y,UU:()=>v,cY:()=>h,jD:()=>x,we:()=>u});var r=n(7451),a=n(5043),s=n(7950),i="undefined"!==typeof document?a.useLayoutEffect:a.useEffect;function o(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!o(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;0!==r--;){const n=a[r];if(("_owner"!==n||!e.$$typeof)&&!o(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function l(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function c(e,t){const n=l(e);return Math.round(t*n)/n}function d(e){const t=a.useRef(e);return i((()=>{t.current=e})),t}function u(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:u=[],platform:m,elements:{reference:h,floating:p}={},transform:f=!0,whileElementsMounted:v,open:g}=e,[x,y]=a.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[b,j]=a.useState(u);o(b,u)||j(u);const[w,N]=a.useState(null),[_,S]=a.useState(null),E=a.useCallback((e=>{e!==k.current&&(k.current=e,N(e))}),[]),C=a.useCallback((e=>{e!==A.current&&(A.current=e,S(e))}),[]),D=h||w,T=p||_,k=a.useRef(null),A=a.useRef(null),P=a.useRef(x),O=null!=v,R=d(v),M=d(m),I=d(g),L=a.useCallback((()=>{if(!k.current||!A.current)return;const e={placement:t,strategy:n,middleware:b};M.current&&(e.platform=M.current),(0,r.rD)(k.current,A.current,e).then((e=>{const t={...e,isPositioned:!1!==I.current};F.current&&!o(P.current,t)&&(P.current=t,s.flushSync((()=>{y(t)})))}))}),[b,t,n,M,I]);i((()=>{!1===g&&P.current.isPositioned&&(P.current.isPositioned=!1,y((e=>({...e,isPositioned:!1}))))}),[g]);const F=a.useRef(!1);i((()=>(F.current=!0,()=>{F.current=!1})),[]),i((()=>{if(D&&(k.current=D),T&&(A.current=T),D&&T){if(R.current)return R.current(D,T,L);L()}}),[D,T,L,R,O]);const B=a.useMemo((()=>({reference:k,floating:A,setReference:E,setFloating:C})),[E,C]),W=a.useMemo((()=>({reference:D,floating:T})),[D,T]),$=a.useMemo((()=>{const e={position:n,left:0,top:0};if(!W.floating)return e;const t=c(W.floating,x.x),r=c(W.floating,x.y);return f?{...e,transform:"translate("+t+"px, "+r+"px)",...l(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,f,W.floating,x.x,x.y]);return a.useMemo((()=>({...x,update:L,refs:B,elements:W,floatingStyles:$})),[x,L,B,W,$])}const m=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:a}="function"===typeof e?e(t):e;return n&&(s=n,{}.hasOwnProperty.call(s,"current"))?null!=n.current?(0,r.UE)({element:n.current,padding:a}).fn(t):{}:n?(0,r.UE)({element:n,padding:a}).fn(t):{};var s}}),h=(e,t)=>({...(0,r.cY)(e),options:[e,t]}),p=(e,t)=>({...(0,r.BN)(e),options:[e,t]}),f=(e,t)=>({...(0,r.ER)(e),options:[e,t]}),v=(e,t)=>({...(0,r.UU)(e),options:[e,t]}),g=(e,t)=>({...(0,r.Ej)(e),options:[e,t]}),x=(e,t)=>({...(0,r.jD)(e),options:[e,t]}),y=(e,t)=>({...m(e),options:[e,t]})},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6195:(e,t,n)=>{"use strict";n.d(t,{BM:()=>b,Ay:()=>B,Dk:()=>M,FG:()=>O,C$:()=>g,NJ:()=>C,TM:()=>D,s3:()=>k,sw:()=>P,g_:()=>A,uZ:()=>y,PP:()=>f,eg:()=>T,Al:()=>w,h2:()=>N,qf:()=>S,gE:()=>j,xo:()=>v,AX:()=>x,bW:()=>_,zC:()=>L,Cn:()=>R});var r=n(6756);function a(e){if("function"!==typeof e)throw new TypeError(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received "+typeof e)}var s=e=>Array.isArray(e)?e:[e];function i(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var o="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let a,s=0;function i(){let t=n;const{length:i}=arguments;for(let e=0,n=i;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}}const l=t;let c;if(1===t.s)c=t.v;else if(c=e.apply(null,arguments),s++,r){const e=a?.deref?.()??a;null!=e&&r(e,c)&&(c=e,0!==s&&s--);a="object"===typeof c&&null!==c||"function"===typeof c?new o(c):c}return l.s=1,l.v=c,c}return i.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function c(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o="function"===typeof e?{memoize:e,memoizeOptions:n}:e,c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,c=0,d=0,u={},m=t.pop();"object"===typeof m&&(u=m,m=t.pop()),a(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const h={...o,...u},{memoize:p,memoizeOptions:f=[],argsMemoize:v=l,argsMemoizeOptions:g=[],devModeChecks:x={}}=h,y=s(f),b=s(g),j=i(t),w=p((function(){return c++,m.apply(null,arguments)}),...y);const N=v((function(){d++;const e=function(e,t){const n=[],{length:r}=e;for(let a=0;a<r;a++)n.push(e[a].apply(null,t));return n}(j,arguments);return r=w.apply(null,e),r}),...b);return Object.assign(N,{resultFunc:m,memoizedResultFunc:w,dependencies:j,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>r,recomputations:()=>c,resetRecomputations:()=>{c=0},memoize:p,argsMemoize:v})};return Object.assign(c,{withTypes:()=>c}),c}var d=c(l),u=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;!function(e){if("object"!==typeof e)throw new TypeError(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received "+typeof e)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e),r=t(n.map((t=>e[t])),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})}));return r}),{withTypes:()=>u}),m=n(9250),h=n(989),p=n(2191);const f=(0,h.A)("patients/fetchPatients",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${m.B8}/api/patients/details`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({startDate:(null===e||void 0===e?void 0:e.startDate)||null,endDate:(null===e||void 0===e?void 0:e.endDate)||null})});if(!t.ok){return n(await t.json())}const r=await t.json();return{data:r,isToday:!(null===e||void 0===e||!e.startDate)&&new Date(e.startDate).toDateString()===(new Date).toDateString()}}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),v=(0,h.A)("patients/registerPatient",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${m.B8}/api/patients`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),g=(0,h.A)("patients/editPatient",(async(e,t)=>{let{patientData:n,patientID:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${m.B8}/api/patients/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),x=((0,h.A)("patients/revesitPatient",(async(e,t)=>{let{rejectWithValue:n}=t;try{const{submissionData:t,_id:r}=e,a=await fetch(`${m.B8}/api/patients/${r}/revisit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!a.ok){return n(await a.json())}return await a.json()}catch(r){return n(r.message)}})),(0,h.A)("patients/savePrescription",(async e=>{let{selectedVisitId:t,vitals:n,prescription:r,selectedPatientType:a,clinicalSummary:s,notes:i,labTests:o,comorbidities:l,conditionOnAdmission:c,conditionOnDischarge:d}=e;const u=await fetch(`${m.B8}/api/patients/${"OPD"===a?"visit":"admission"}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify("OPD"===a?{prescription:r}:{vitals:n,prescription:r,labTests:o,clinicalSummary:s,notes:i,comorbidities:l,conditionOnAdmission:c,conditionOnDischarge:d})});if(!u.ok)throw new Error("Failed to save data");return await u.json()}),{useGlobalLoader:!0})),y=(0,h.A)("patients/fetchPatientDetails",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${m.B8}/api/patients/${e}`,{headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),b=(0,h.A)("patients/addLabReport",(async(e,t)=>{let{_id:n,labReport:r,component:a}=e,{rejectWithValue:s}=t;try{const e=await fetch(`${m.B8}/api/lab/addLabReport`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({_id:n,labReport:r,component:a})});if(!e.ok){return s(await e.json())}return await e.json()}catch(i){return s(i.message)}}),{useGlobalLoader:!0}),j=(0,h.A)("patients/readmitPatient",(async(e,t)=>{let{patientId:n,admission:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${m.B8}/api/patients/${n}/readmission`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),w=(0,h.A)("patients/fetchVisitDetails",(async(e,t)=>{let{id:n,type:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${m.B8}/api/patients/visit-details`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:n,type:r})});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),N=(0,h.A)("patients/fetchVisitDetailsFull",(async(e,t)=>{let{id:n,type:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${m.B8}/api/patients/visit-details-full`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:n,type:r})});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),_=(0,h.A)("patients/searchPatients",(async(e,t)=>{let{searchQuery:n,page:r,limit:a}=e,{rejectWithValue:s}=t;try{const e=await fetch(`${m.B8}/api/dashboard/search?q=${encodeURIComponent(n)}&page=${r||1}&limit=${a||10}`,{method:"GET",credentials:"include"});if(!e.ok){return s(await e.json())}const t=await e.json();return{results:t,searchQuery:n,currentPage:r,totalPages:t.totalPages}}catch(i){return s(i.message)}}),{useGlobalLoader:!0}),S=(0,h.A)("patients/opdRevisit",(async(e,t)=>{let{patientId:n,visit:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${m.B8}/api/patients/${n}/revisit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),E=(0,h.A)("patients/fetchRegistrationDetails",(async(e,t)=>{let{registrationNumber:n,type:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${m.B8}/api/patients/registration-details`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({registrationNumber:n,type:r})});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),C=(0,h.A)("patients/fetchAdmittedPatients",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${m.B8}/api/patients/admittedpatients`,{headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok){return n(await e.json())}return await e.json()}catch(r){return n(r.message)}})),D=(0,h.A)("patients/fetchAdmittedPatientsSearch",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${m.B8}/api/patients/admittedpatientsSearch`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({searchQuery:e})});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}})),T=(0,h.A)("patients/fetchRegistrationAndIPDNumbers",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${m.B8}/api/patients/registration-ipd-numbers`,{credentials:"include"});if(!e.ok){return n(await e.json())}return await e.json()}catch(r){return n(r.message)}})),k=(0,h.A)("patients/fetchDischargedPatientsByDate",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${m.B8}/api/patients/discharged-by-date`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({dischargeDate:e})});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}})),A=(0,h.A)("patients/fetchOPDDetails",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${m.B8}/api/patients/opd-details`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({visitId:e})});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}})),P=(0,h.A)("patients/fetchIPDAdmissionDetailsFull",(async(e,t)=>{let{admissionId:n}=e,{rejectWithValue:r}=t;try{const e=await fetch(`${m.B8}/api/patients/visit-details-full`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:n,type:"IPD"})});if(!e.ok){return r(await e.json())}return await e.json()}catch(a){return r(a.message)}}),{useGlobalLoader:!0}),O=(0,h.A)("patients/editIPDAdmission",(async(e,t)=>{let{admissionId:n,data:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${m.B8}/api/patients/ipd-admission/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),R=(0,h.A)("patients/updateOperationName",(async(e,t)=>{let{admissionId:n,operationName:r,billId:a,includeInBill:s,serviceDetails:i}=e,{rejectWithValue:o}=t;try{const e=await fetch(`${m.B8}/api/patients/ipd-admission/${n}/operation`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({operationName:r,billId:a,includeInBill:s,serviceDetails:i})});if(!e.ok){return o(await e.json())}return await e.json()}catch(l){return o(l.message)}})),M=(0,h.A)("patients/deletePatient",(async(e,t)=>{let{patientId:n,visitId:r,admissionId:a}=e,{rejectWithValue:s}=t;try{const e=await fetch(`${m.B8}/api/patients/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({visitId:r,admissionId:a})});if(!e.ok){return s(await e.json())}return{result:await e.json()}}catch(i){return s(i.message)}}),{useGlobalLoader:!0}),I=(0,r.Z0)({name:"patients",initialState:{patientlist:[],patientsStatus:"idle",selectedPatient:null,status:"idle",todaysPatientList:[],prescriptionUpdateStatus:"idle",registerPatientStatus:"idle",patientDetails:null,patientDetailsStatus:"idle",addLabReportStatus:"idle",error:null,visitDetails:null,visitDetailsStatus:"idle",searchResults:[],searchQuery:"",searchStatus:"idle",registrationDetails:null,registrationDetailsStatus:"idle",admittedPatients:[],admittedPatientsStatus:"idle",registrationNumber:null,ipdNumber:null,numbersStatus:"idle",editPatientStatus:"idle",opdDetails:null,opdDetailsStatus:"idle",ipdAdmissionDetailsFull:null,ipdAdmissionDetailsFullStatus:"idle",editIPDAdmissionStatus:"idle"},reducers:{setSelectedPatient:(e,t)=>{e.selectedPatient=t.payload},setSelectedPatientForBill:(e,t)=>{e.selectedPatient=e.patientlist.find((e=>e.patient._id===t.payload))}},extraReducers:e=>{e.addCase(f.pending,(e=>{e.status="loading"})).addCase(f.fulfilled,((e,t)=>{e.status="succeeded",e.patientlist=t.payload.data,t.payload.isToday&&(e.todaysPatientList=t.payload.data)})).addCase(f.rejected,((e,t)=>{e.status="failed",e.error=t.error.message})).addCase(x.pending,(e=>{e.prescriptionUpdateStatus="loading"})).addCase(x.fulfilled,((e,t)=>{e.prescriptionUpdateStatus="succeeded";const n=t.payload,r=e.patientlist.findIndex((e=>e._id===n._id));-1!==r&&(e.patientlist[r]={...e.patientlist[r],...n})})).addCase(x.rejected,((e,t)=>{e.prescriptionUpdateStatus="failed",e.error=t.error.message})).addCase(v.pending,(e=>{e.registerPatientStatus="loading"})).addCase(v.fulfilled,((e,t)=>{e.registerPatientStatus="succeeded"})).addCase(v.rejected,((e,t)=>{e.registerPatientStatus="failed",e.error=t.payload})).addCase(y.pending,(e=>{e.patientDetailsStatus="loading"})).addCase(y.fulfilled,((e,t)=>{e.patientDetailsStatus="succeeded",e.patientDetails=t.payload})).addCase(y.rejected,((e,t)=>{e.patientDetailsStatus="failed",e.patientDetails=null})).addCase(b.pending,(e=>{e.addLabReportStatus="loading"})).addCase(b.fulfilled,((e,t)=>{e.addLabReportStatus="succeeded"})).addCase(b.rejected,((e,t)=>{e.addLabReportStatus="failed",e.error=t.payload})).addCase(p.Ou.fulfilled,((e,t)=>{const n=t.payload,{assignedRoom:r,assignedBed:a,department:s,patient:i,...o}=n,l=e.patientlist.findIndex((e=>e._id===n._id));-1!==l&&(e.patientlist[l]={...e.patientlist[l],...o}),e.selectedPatient&&e.selectedPatient._id===n._id&&(e.selectedPatient={...e.selectedPatient,...n})})).addCase(j.pending,(e=>{e.registerPatientStatus="loading"})).addCase(j.fulfilled,((e,t)=>{e.registerPatientStatus="succeeded";const n=t.payload.patient,r=e.patientlist.findIndex((e=>e._id===n._id));-1!==r&&(e.patientlist[r]=n),e.selectedPatient&&e.selectedPatient._id===n._id&&(e.selectedPatient=n)})).addCase(j.rejected,((e,t)=>{e.registerPatientStatus="failed",e.error=t.payload})).addCase(w.pending,(e=>{e.visitDetailsStatus="loading",e.visitDetails=null})).addCase(w.fulfilled,((e,t)=>{e.visitDetailsStatus="succeeded",e.visitDetails=t.payload})).addCase(w.rejected,((e,t)=>{e.visitDetailsStatus="failed",e.visitDetails=null,e.error=t.payload})).addCase(_.pending,(e=>{e.searchStatus="loading"})).addCase(_.fulfilled,((e,t)=>{e.searchStatus="succeeded",e.searchResults=t.payload.results,e.searchQuery=t.payload.searchQuery})).addCase(_.rejected,((e,t)=>{e.searchStatus="failed",e.error=t.payload})).addCase(S.pending,(e=>{e.status="loading"})).addCase(S.fulfilled,((e,t)=>{e.status="succeeded";const n=t.payload.patient,r=e.patientlist.findIndex((e=>e._id===n._id));-1!==r&&(e.patientlist[r]=n),e.selectedPatient&&e.selectedPatient._id===n._id&&(e.selectedPatient=n)})).addCase(S.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(E.pending,(e=>{e.registrationDetailsStatus="loading",e.registrationDetails=null})).addCase(E.fulfilled,((e,t)=>{e.registrationDetailsStatus="succeeded",e.registrationDetails=t.payload})).addCase(E.rejected,((e,t)=>{e.registrationDetailsStatus="failed",e.registrationDetails=null,e.error=t.payload})).addCase(C.pending,(e=>{e.admittedPatientsStatus="loading"})).addCase(C.fulfilled,((e,t)=>{e.admittedPatientsStatus="succeeded",e.admittedPatients=t.payload})).addCase(C.rejected,((e,t)=>{e.admittedPatientsStatus="failed",e.error=t.payload})).addCase(T.pending,(e=>{e.numbersStatus="loading"})).addCase(T.fulfilled,((e,t)=>{e.numbersStatus="succeeded",e.registrationNumber=t.payload.registrationNumber,e.ipdNumber=t.payload.ipdNumber})).addCase(T.rejected,((e,t)=>{e.numbersStatus="failed",e.error=t.payload})).addCase(g.pending,(e=>{e.editPatientStatus="loading"})).addCase(g.fulfilled,((e,t)=>{e.editPatientStatus="succeeded";const n=t.payload,r=e.patientlist.findIndex((e=>e.registrationNumber===n.registrationNumber));-1!==r&&(e.patientlist[r]=n)})).addCase(g.rejected,(e=>{e.editPatientStatus="failed"})).addCase(A.pending,(e=>{e.opdDetailsStatus="loading",e.opdDetails=null})).addCase(A.fulfilled,((e,t)=>{e.opdDetailsStatus="succeeded",e.opdDetails=t.payload})).addCase(A.rejected,((e,t)=>{e.opdDetailsStatus="failed",e.opdDetails=null,e.error=t.payload})).addCase(P.pending,(e=>{e.ipdAdmissionDetailsFullStatus="loading",e.ipdAdmissionDetailsFull=null})).addCase(P.fulfilled,((e,t)=>{e.ipdAdmissionDetailsFullStatus="succeeded",e.ipdAdmissionDetailsFull=t.payload})).addCase(P.rejected,((e,t)=>{e.ipdAdmissionDetailsFullStatus="failed",e.ipdAdmissionDetailsFull=null,e.error=t.payload})).addCase(O.pending,(e=>{e.editIPDAdmissionStatus="loading"})).addCase(O.fulfilled,((e,t)=>{e.editIPDAdmissionStatus="succeeded";const n=t.payload,r=e.patientlist.findIndex((e=>e._id===n._id&&"IPD"===e.type));-1!==r&&(e.patientlist[r]={...e.patientlist[r],...n,doctor:n.assignedDoctor,patient:n.patient});const a=e.admittedPatients.findIndex((e=>e._id===n._id));-1!==a&&(e.admittedPatients[a]={...e.admittedPatients[a],...n,patient:{...e.admittedPatients[a].patient,name:n.patientName,registrationNumber:n.registrationNumber},doctor:n.assignedDoctor}),e.selectedPatient&&e.selectedPatient._id===n._id&&(e.selectedPatient={...e.selectedPatient,...n,doctor:n.assignedDoctor,patient:e.selectedPatient.patient})})).addCase(O.rejected,((e,t)=>{e.editIPDAdmissionStatus="failed",e.error=t.payload})).addCase(R.pending,(e=>{e.status="loading"})).addCase(R.fulfilled,((e,t)=>{e.status="succeeded";const n=t.payload,r=e.patientlist.findIndex((e=>e._id===n._id&&"IPD"===e.type));-1!==r&&(e.patientlist[r].operationName=n.operationName);const a=e.admittedPatients.findIndex((e=>e._id===n._id));-1!==a&&(e.admittedPatients[a].operationName=n.operationName),e.selectedPatient&&e.selectedPatient._id===n._id&&(e.selectedPatient.operationName=n.operationName)})).addCase(R.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(M.pending,(e=>{e.status="loading"})).addCase(M.fulfilled,((e,t)=>{e.status="succeeded";const{patientId:n,visitId:r,admissionId:a}=t.meta.arg;e.patientlist=r||a?e.patientlist.filter((e=>e._id!==(r||a))):e.patientlist.filter((e=>e.patient._id!==n))})).addCase(M.rejected,((e,t)=>{e.status="failed",e.error=t.payload}))}}),{setSelectedPatient:L,setSelectedPatientForBill:F}=I.actions,B=(d([e=>e.patients.selectedPatient,e=>e.patients.patientDetailsStatus],((e,t)=>({patientData:e,status:t}))),d([e=>e.patients.visitDetails,e=>e.patients.visitDetailsStatus],((e,t)=>({visitDetails:e,status:t}))),d([e=>e.patients.registrationDetails,e=>e.patients.registrationDetailsStatus],((e,t)=>({registrationDetails:e,status:t}))),I.reducer)},6210:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},6350:(e,t,n)=>{var r=n(8325),a=n(6578)(r);e.exports=a},6361:(e,t,n)=>{var r=n(6913),a=n(2761);e.exports=function(e){return!0===e||!1===e||a(e)&&"[object Boolean]"==r(e)}},6378:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case s:case o:case i:case m:case h:return e;default:switch(e=e&&e.$$typeof){case d:case c:case u:case f:case p:case l:return e;default:return t}}case a:return t}}}n=Symbol.for("react.module.reference"),t.isFragment=function(e){return g(e)===s}},6399:(e,t,n)=>{var r=n(5538),a=n(3668),s=n(9987),i=n(5752),o=n(6924),l=n(4052),c=n(4543),d=n(1268),u="[object Arguments]",m="[object Array]",h="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,f,v,g){var x=l(e),y=l(t),b=x?m:o(e),j=y?m:o(t),w=(b=b==u?h:b)==h,N=(j=j==u?h:j)==h,_=b==j;if(_&&c(e)){if(!c(t))return!1;x=!0,w=!1}if(_&&!w)return g||(g=new r),x||d(e)?a(e,t,n,f,v,g):s(e,t,b,n,f,v,g);if(!(1&n)){var S=w&&p.call(e,"__wrapped__"),E=N&&p.call(t,"__wrapped__");if(S||E){var C=S?e.value():e,D=E?t.value():t;return g||(g=new r),v(C,D,n,f,g)}}return!!_&&(g||(g=new r),i(e,t,n,f,v,g))}},6465:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var r=n(1844),a=n(1176);function s(e,t,n){const[s,i]=(0,r.x)(n?.in,e,t);return+(0,a.o)(s)===+(0,a.o)(i)}},6516:(e,t,n)=>{var r=n(6571);e.exports=function(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var s=n.length,i=t?s:-1,o=Object(n);(t?i--:++i<s)&&!1!==a(o[i],i,o););return n}}},6532:(e,t,n)=>{var r=n(5538),a=n(6989);e.exports=function(e,t,n,s){var i=n.length,o=i,l=!s;if(null==e)return!o;for(e=Object(e);i--;){var c=n[i];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<o;){var d=(c=n[i])[0],u=e[d],m=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var h=new r;if(s)var p=s(u,m,d,e,t,h);if(!(void 0===p?a(m,u,3,s,h):p))return!1}}return!0}},6552:(e,t,n)=>{var r=n(7105),a="object"==typeof self&&self&&self.Object===Object&&self,s=r||a||Function("return this")();e.exports=s},6571:(e,t,n)=>{var r=n(1629),a=n(6173);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},6578:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var a=t(),s=16-(a-r);if(r=a,s>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},6590:(e,t,n)=>{"use strict";n.d(t,{Oh:()=>s});var r=n(5043),a=0;function s(){r.useEffect((()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??i()),document.body.insertAdjacentElement("beforeend",e[1]??i()),a++,()=>{1===a&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),a--}}),[])}function i(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}},6599:(e,t,n)=>{var r=n(9841);e.exports=function(e,t){if(e!==t){var n=void 0!==e,a=null===e,s=e===e,i=r(e),o=void 0!==t,l=null===t,c=t===t,d=r(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||a&&o&&c||!n&&c||!s)return 1;if(!a&&!i&&!d&&e<t||d&&n&&s&&!a&&!i||l&&n&&s||!o&&s||!c)return-1}return 0}},6600:(e,t,n)=>{var r=n(7937)(n(6552),"WeakMap");e.exports=r},6604:(e,t,n)=>{"use strict";n.d(t,{F:()=>J,$:()=>Q});var r=n(5043),a=n(7920),s=n(2894),i=n(1862),o=n(2814),l=n(7490),c=n(4204),d=n(503),u=n(1664),m=n(858),h=n(579);var p="ScrollArea",[f,v]=(0,i.A)(p),[g,x]=f(p),y=r.forwardRef(((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:i,scrollHideDelay:l=600,...d}=e,[u,m]=r.useState(null),[p,f]=r.useState(null),[v,x]=r.useState(null),[y,b]=r.useState(null),[j,w]=r.useState(null),[N,_]=r.useState(0),[S,E]=r.useState(0),[C,D]=r.useState(!1),[T,k]=r.useState(!1),A=(0,o.s)(t,(e=>m(e))),P=(0,c.jH)(i);return(0,h.jsx)(g,{scope:n,type:s,dir:P,scrollHideDelay:l,scrollArea:u,viewport:p,onViewportChange:f,content:v,onContentChange:x,scrollbarX:y,onScrollbarXChange:b,scrollbarXEnabled:C,onScrollbarXEnabledChange:D,scrollbarY:j,onScrollbarYChange:w,scrollbarYEnabled:T,onScrollbarYEnabledChange:k,onCornerWidthChange:_,onCornerHeightChange:E,children:(0,h.jsx)(a.sG.div,{dir:P,...d,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":S+"px",...e.style}})})}));y.displayName=p;var b="ScrollAreaViewport",j=r.forwardRef(((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:i,...l}=e,c=x(b,n),d=r.useRef(null),u=(0,o.s)(t,d,c.onViewportChange);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),(0,h.jsx)(a.sG.div,{"data-radix-scroll-area-viewport":"",...l,ref:u,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,h.jsx)("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})}));j.displayName=b;var w="ScrollAreaScrollbar",N=r.forwardRef(((e,t)=>{const{forceMount:n,...a}=e,s=x(w,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l="horizontal"===e.orientation;return r.useEffect((()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)})),[l,i,o]),"hover"===s.type?(0,h.jsx)(_,{...a,ref:t,forceMount:n}):"scroll"===s.type?(0,h.jsx)(S,{...a,ref:t,forceMount:n}):"auto"===s.type?(0,h.jsx)(E,{...a,ref:t,forceMount:n}):"always"===s.type?(0,h.jsx)(C,{...a,ref:t}):null}));N.displayName=w;var _=r.forwardRef(((e,t)=>{const{forceMount:n,...a}=e,i=x(w,e.__scopeScrollArea),[o,l]=r.useState(!1);return r.useEffect((()=>{const e=i.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),l(!0)},r=()=>{t=window.setTimeout((()=>l(!1)),i.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}}),[i.scrollArea,i.scrollHideDelay]),(0,h.jsx)(s.C,{present:n||o,children:(0,h.jsx)(E,{"data-state":o?"visible":"hidden",...a,ref:t})})})),S=r.forwardRef(((e,t)=>{const{forceMount:n,...a}=e,i=x(w,e.__scopeScrollArea),o="horizontal"===e.orientation,l=q((()=>d("SCROLL_END")),100),[c,d]=(u="hidden",p={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},r.useReducer(((e,t)=>p[e][t]??e),u));var u,p;return r.useEffect((()=>{if("idle"===c){const e=window.setTimeout((()=>d("HIDE")),i.scrollHideDelay);return()=>window.clearTimeout(e)}}),[c,i.scrollHideDelay,d]),r.useEffect((()=>{const e=i.viewport,t=o?"scrollLeft":"scrollTop";if(e){let n=e[t];const r=()=>{const r=e[t];n!==r&&(d("SCROLL"),l()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}}),[i.viewport,o,d,l]),(0,h.jsx)(s.C,{present:n||"hidden"!==c,children:(0,h.jsx)(C,{"data-state":"hidden"===c?"hidden":"visible",...a,ref:t,onPointerEnter:(0,m.m)(e.onPointerEnter,(()=>d("POINTER_ENTER"))),onPointerLeave:(0,m.m)(e.onPointerLeave,(()=>d("POINTER_LEAVE")))})})})),E=r.forwardRef(((e,t)=>{const n=x(w,e.__scopeScrollArea),{forceMount:a,...i}=e,[o,l]=r.useState(!1),c="horizontal"===e.orientation,d=q((()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;l(c?e:t)}}),10);return G(n.viewport,d),G(n.content,d),(0,h.jsx)(s.C,{present:a||o,children:(0,h.jsx)(C,{"data-state":o?"visible":"hidden",...i,ref:t})})})),C=r.forwardRef(((e,t)=>{const{orientation:n="vertical",...a}=e,s=x(w,e.__scopeScrollArea),i=r.useRef(null),o=r.useRef(0),[l,c]=r.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=W(l.viewport,l.content),u={...a,sizes:l,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function m(e,t){return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ltr";const a=$(n),s=a/2,i=t||s,o=a-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,u="ltr"===r?[0,d]:[-1*d,0];return z([l,c],u)(e)}(e,o.current,l,t)}return"horizontal"===n?(0,h.jsx)(D,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const e=U(s.viewport.scrollLeft,l,s.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollLeft=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollLeft=m(e,s.dir))}}):"vertical"===n?(0,h.jsx)(T,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const e=U(s.viewport.scrollTop,l);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollTop=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollTop=m(e))}}):null})),D=r.forwardRef(((e,t)=>{const{sizes:n,onSizesChange:a,...s}=e,i=x(w,e.__scopeScrollArea),[l,c]=r.useState(),d=r.useRef(null),u=(0,o.s)(t,d,i.onScrollbarXChange);return r.useEffect((()=>{d.current&&c(getComputedStyle(d.current))}),[d]),(0,h.jsx)(P,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":$(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(i.viewport){const r=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),H(r,n)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:B(l.paddingLeft),paddingEnd:B(l.paddingRight)}})}})})),T=r.forwardRef(((e,t)=>{const{sizes:n,onSizesChange:a,...s}=e,i=x(w,e.__scopeScrollArea),[l,c]=r.useState(),d=r.useRef(null),u=(0,o.s)(t,d,i.onScrollbarYChange);return r.useEffect((()=>{d.current&&c(getComputedStyle(d.current))}),[d]),(0,h.jsx)(P,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":$(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(i.viewport){const r=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),H(r,n)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:B(l.paddingTop),paddingEnd:B(l.paddingBottom)}})}})})),[k,A]=f(w),P=r.forwardRef(((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:i,onThumbChange:c,onThumbPointerUp:d,onThumbPointerDown:u,onThumbPositionChange:p,onDragScroll:f,onWheelScroll:v,onResize:g,...y}=e,b=x(w,n),[j,N]=r.useState(null),_=(0,o.s)(t,(e=>N(e))),S=r.useRef(null),E=r.useRef(""),C=b.viewport,D=s.content-s.viewport,T=(0,l.c)(v),A=(0,l.c)(p),P=q(g,10);function O(e){if(S.current){const t=e.clientX-S.current.left,n=e.clientY-S.current.top;f({x:t,y:n})}}return r.useEffect((()=>{const e=e=>{const t=e.target,n=j?.contains(t);n&&T(e,D)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})}),[C,j,D,T]),r.useEffect(A,[s,A]),G(j,P),G(b.content,P),(0,h.jsx)(k,{scope:n,scrollbar:j,hasThumb:i,onThumbChange:(0,l.c)(c),onThumbPointerUp:(0,l.c)(d),onThumbPositionChange:A,onThumbPointerDown:(0,l.c)(u),children:(0,h.jsx)(a.sG.div,{...y,ref:_,style:{position:"absolute",...y.style},onPointerDown:(0,m.m)(e.onPointerDown,(e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),S.current=j.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),O(e)}})),onPointerMove:(0,m.m)(e.onPointerMove,O),onPointerUp:(0,m.m)(e.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=E.current,b.viewport&&(b.viewport.style.scrollBehavior=""),S.current=null}))})})})),O="ScrollAreaThumb",R=r.forwardRef(((e,t)=>{const{forceMount:n,...r}=e,a=A(O,e.__scopeScrollArea);return(0,h.jsx)(s.C,{present:n||a.hasThumb,children:(0,h.jsx)(M,{ref:t,...r})})})),M=r.forwardRef(((e,t)=>{const{__scopeScrollArea:n,style:s,...i}=e,l=x(O,n),c=A(O,n),{onThumbPositionChange:d}=c,u=(0,o.s)(t,(e=>c.onThumbChange(e))),p=r.useRef(void 0),f=q((()=>{p.current&&(p.current(),p.current=void 0)}),100);return r.useEffect((()=>{const e=l.viewport;if(e){const t=()=>{if(f(),!p.current){const t=V(e,d);p.current=t,d()}};return d(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[l.viewport,f,d]),(0,h.jsx)(a.sG.div,{"data-state":c.hasThumb?"visible":"hidden",...i,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:(0,m.m)(e.onPointerDownCapture,(e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;c.onThumbPointerDown({x:n,y:r})})),onPointerUp:(0,m.m)(e.onPointerUp,c.onThumbPointerUp)})}));R.displayName=O;var I="ScrollAreaCorner",L=r.forwardRef(((e,t)=>{const n=x(I,e.__scopeScrollArea),r=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&r?(0,h.jsx)(F,{...e,ref:t}):null}));L.displayName=I;var F=r.forwardRef(((e,t)=>{const{__scopeScrollArea:n,...s}=e,i=x(I,n),[o,l]=r.useState(0),[c,d]=r.useState(0),u=Boolean(o&&c);return G(i.scrollbarX,(()=>{const e=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(e),d(e)})),G(i.scrollbarY,(()=>{const e=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(e),l(e)})),u?(0,h.jsx)(a.sG.div,{...s,ref:t,style:{width:o,height:c,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...e.style}}):null}));function B(e){return e?parseInt(e,10):0}function W(e,t){const n=e/t;return isNaN(n)?0:n}function $(e){const t=W(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function U(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ltr";const r=$(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,i=t.content-t.viewport,o=s-r,l="ltr"===n?[0,i]:[-1*i,0],c=(0,u.q)(e,l);return z([0,i],[0,o])(c)}function z(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function H(e,t){return e>0&&e<t}var V=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const s={left:e.scrollLeft,top:e.scrollTop},i=n.left!==s.left,o=n.top!==s.top;(i||o)&&t(),n=s,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function q(e,t){const n=(0,l.c)(e),a=r.useRef(0);return r.useEffect((()=>()=>window.clearTimeout(a.current)),[]),r.useCallback((()=>{window.clearTimeout(a.current),a.current=window.setTimeout(n,t)}),[n,t])}function G(e,t){const n=(0,l.c)(t);(0,d.N)((()=>{let t=0;if(e){const r=new ResizeObserver((()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)}));return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}}),[e,n])}var K=y,Y=j,X=L,Z=n(9766);const J=r.forwardRef(((e,t)=>{let{className:n,children:r,...a}=e;return(0,h.jsxs)(K,{ref:t,className:(0,Z.cn)("relative overflow-hidden",n),...a,children:[(0,h.jsx)(Y,{className:"h-full w-full rounded-[inherit]",children:r}),(0,h.jsx)(Q,{}),(0,h.jsx)(X,{})]})}));J.displayName=K.displayName;const Q=r.forwardRef(((e,t)=>{let{className:n,orientation:r="vertical",...a}=e;return(0,h.jsx)(N,{ref:t,orientation:r,className:(0,Z.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...a,children:(0,h.jsx)(R,{className:"relative flex-1 rounded-full bg-border"})})}));Q.displayName=N.displayName},6638:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m,I7:()=>u,QK:()=>i,Vx:()=>c,X_:()=>d,jc:()=>l,ub:()=>o});var r=n(6756),a=n(989),s=n(9250);const i=(0,a.A)("templates/fetchTemplates",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${s.B8}/api/hospitals/template/read`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch templates");return await e.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),o=(0,a.A)("templates/updateTemplate",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${s.B8}/api/hospitals/template/create`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update template");return await t.json()}catch(r){return n(r.message)}})),l=(0,a.A)("templates/bulkUpload",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${s.B8}/api/hospitals/template/bulk-upload`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to bulk upload templates");return await t.json()}catch(r){return n(r.message)}})),c=(0,r.zD)("templates/updateServiceBillCollections",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${s.B8}/api/hospitals/template/service_collections`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update service bill collections");return await t.json()}catch(r){return n(r.message)}})),d=(0,a.A)("templates/editTemplate",(async(e,t)=>{let{field:n,index:r,newValue:a}=e,{rejectWithValue:i}=t;try{const e=await fetch(`${s.B8}/api/hospitals/template/edit`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({field:n,index:r,newValue:a})});if(!e.ok)throw new Error("Failed to update template");return await e.json()}catch(o){return i(o.message)}})),u=(0,a.A)("templates/deleteTemplate",(async(e,t)=>{let{field:n,index:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${s.B8}/api/hospitals/template/delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({field:n,index:r})});if(!e.ok)throw new Error("Failed to delete template");return await e.json()}catch(i){return a(i.message)}})),m=(0,r.Z0)({name:"templates",initialState:{birthCertificateTemplate:"",labTestsTemplate:[],headerTemplateArray:[],diagnosisTemplate:[],mergeTemplate:"",dischargeSummaryTemplateArray:[],dischargeFormTemplateArray:[],opdPrescriptionTemplateArray:[],opdRxTemplateArray:[],consentFormTemplateArray:[],status:"idle",error:null,serviceBillCollections:[],dischargeFormTemplates:null,updateTempleteStatus:"idle",labBillingTemplate:"",opdBillTokenTemplate:""},reducers:{},extraReducers:e=>{e.addCase(i.pending,(e=>{e.status="loading"})).addCase(i.fulfilled,((e,t)=>{e.status="succeeded",e.labTestsTemplate=t.payload.labTestsTemplate,e.headerTemplateArray=t.payload.headerTemplateArray||[],e.headerTemplate=t.payload.headerTemplate||"",e.dischargeSummaryTemplate=t.payload.dischargeSummaryTemplate||"",e.diagnosisTemplate=t.payload.diagnosisTemplate,e.dischargeSummaryTemplateArray=t.payload.dischargeSummaryTemplateArray||[],e.dischargeFormTemplateArray=t.payload.dischargeFormTemplateArray||[],e.opdPrescriptionTemplateArray=t.payload.opdPrescriptionTemplateArray||[],e.opdRxTemplateArray=t.payload.opdRxTemplateArray||[],e.comorbidities=t.payload.comorbidities,e.medicinelist=t.payload.medicinelist,e.mergeTemplate=t.payload.mergeTemplate,e.serviceBillCollections=t.payload.service_collections,e.dischargeFormTemplates=t.payload.dischargeFormTemplates,e.consentFormTemplateArray=t.payload.consentFormArray,e.birthCertificateTemplate=t.payload.birthCertificateTemplate,e.labReportUiTemplate=t.payload.labReportUiTemplate,e.labBillingTemplate=t.payload.labBillingTemplate||"",e.opdBillTokenTemplate=t.payload.opdBillTokenTemplate||""})).addCase(i.rejected,((e,t)=>{e.status="failed",e.error=t.payload.message||"Failed to fetch templates"})).addCase(o.pending,(e=>{e.updateTempleteStatus="loading"})).addCase(o.fulfilled,((e,t)=>{e.updateTempleteStatus="succeeded",t.payload.diagnosisTemplate&&(e.diagnosisTemplate=t.payload.diagnosisTemplate),t.payload.medicinelist&&(e.medicinelist=t.payload.medicinelist),t.payload.comorbidities&&(e.comorbidities=t.payload.comorbidities),t.payload.labTestsTemplate&&(e.labTestsTemplate=t.payload.labTestsTemplate),t.payload.headerTemplateArray&&(e.headerTemplateArray=t.payload.headerTemplateArray||[]),t.payload.dischargeSummaryTemplateArray&&(e.dischargeSummaryTemplateArray=t.payload.dischargeSummaryTemplateArray||[]),t.payload.dischargeFormTemplateArray&&(e.dischargeFormTemplateArray=t.payload.dischargeFormTemplateArray||[]),t.payload.opdPrescriptionTemplateArray&&(e.opdPrescriptionTemplateArray=t.payload.opdPrescriptionTemplateArray||[]),t.payload.opdRxTemplateArray&&(e.opdRxTemplateArray=t.payload.opdRxTemplateArray||[]),t.payload.opdBillTokenTemplate&&(e.opdBillTokenTemplate=t.payload.opdBillTokenTemplate)})).addCase(o.rejected,((e,t)=>{e.updateTempleteStatus="failed",e.error=t.payload.message||"Failed to update template"})).addCase(c.fulfilled,((e,t)=>{e.serviceBillCollections=t.payload})).addCase(d.pending,(e=>{e.updateTempleteStatus="loading"})).addCase(d.fulfilled,((e,t)=>{e.updateTempleteStatus="succeeded",e.labTestsTemplate=t.payload.labTestsTemplate,e.headerTemplateArray=t.payload.headerTemplateArray||[],e.dischargeSummaryTemplateArray=t.payload.dischargeSummaryTemplateArray||[],e.dischargeFormTemplateArray=t.payload.dischargeFormTemplateArray||[],e.opdPrescriptionTemplateArray=t.payload.opdPrescriptionTemplateArray||[],e.opdRxTemplateArray=t.payload.opdRxTemplateArray||[],e.consentFormTemplateArray=t.payload.consentFormArray})).addCase(d.rejected,((e,t)=>{e.updateTempleteStatus="failed",e.error=t.payload.message||"Failed to update template"})).addCase(u.pending,(e=>{e.updateTempleteStatus="loading"})).addCase(u.fulfilled,((e,t)=>{e.updateTempleteStatus="succeeded",e.labTestsTemplate=t.payload.labTestsTemplate,e.headerTemplateArray=t.payload.headerTemplateArray||[],e.dischargeSummaryTemplateArray=t.payload.dischargeSummaryTemplateArray||[],e.dischargeFormTemplateArray=t.payload.dischargeFormTemplateArray||[],e.opdPrescriptionTemplateArray=t.payload.opdPrescriptionTemplateArray||[],e.opdRxTemplateArray=t.payload.opdRxTemplateArray||[],e.consentFormTemplateArray=t.payload.consentFormArray})).addCase(u.rejected,((e,t)=>{e.updateTempleteStatus="failed",e.error=t.payload.message||"Failed to delete template"})).addCase(l.pending,(e=>{e.status="loading"})).addCase(l.fulfilled,((e,t)=>{e.status="succeeded",t.payload.labTestsTemplate&&(e.labTestsTemplate=t.payload.labTestsTemplate)})).addCase(l.rejected,((e,t)=>{e.status="failed",e.error=t.payload}))}}).reducer},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6691:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var r=n(2316);function a(e,t){const n=(0,r.a)(e,t?.in);return n.setHours(23,59,59,999),n}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},6745:(e,t,n)=>{var r=n(9742),a=n(61),s=n(3279);e.exports=function(e){return e&&e.length?r(e,s,a):void 0}},6756:(e,t,n)=>{"use strict";function r(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}n.d(t,{U1:()=>he,zD:()=>we,Z0:()=>De});var a=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),s=()=>Math.random().toString(36).substring(7).split("").join("."),i={INIT:`@@redux/INIT${s()}`,REPLACE:`@@redux/REPLACE${s()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${s()}`};function o(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function l(e,t,n){if("function"!==typeof e)throw new Error(r(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(r(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(r(1));return n(l)(e,t)}let s=e,c=t,d=new Map,u=d,m=0,h=!1;function p(){u===d&&(u=new Map,d.forEach(((e,t)=>{u.set(t,e)})))}function f(){if(h)throw new Error(r(3));return c}function v(e){if("function"!==typeof e)throw new Error(r(4));if(h)throw new Error(r(5));let t=!0;p();const n=m++;return u.set(n,e),function(){if(t){if(h)throw new Error(r(6));t=!1,p(),u.delete(n),d=null}}}function g(e){if(!o(e))throw new Error(r(7));if("undefined"===typeof e.type)throw new Error(r(8));if("string"!==typeof e.type)throw new Error(r(17));if(h)throw new Error(r(9));try{h=!0,c=s(c,e)}finally{h=!1}return(d=u).forEach((e=>{e()})),e}g({type:i.INIT});return{dispatch:g,subscribe:v,getState:f,replaceReducer:function(e){if("function"!==typeof e)throw new Error(r(10));s=e,g({type:i.REPLACE})},[a]:function(){const e=v;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(r(11));function n(){const e=t;e.next&&e.next(f())}n();return{unsubscribe:e(n)}},[a](){return this}}}}}function c(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const a=t[r];0,"function"===typeof e[a]&&(n[a]=e[a])}const a=Object.keys(n);let s;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:i.INIT}))throw new Error(r(12));if("undefined"===typeof n(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error(r(13))}))}(n)}catch(o){s=o}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(s)throw s;let i=!1;const o={};for(let s=0;s<a.length;s++){const l=a[s],c=n[l],d=e[l],u=c(d,t);if("undefined"===typeof u){t&&t.type;throw new Error(r(14))}o[l]=u,i=i||u!==d}return i=i||a.length!==Object.keys(e).length,i?o:e}}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function u(e){return t=>{let{dispatch:n,getState:r}=t;return t=>a=>"function"===typeof a?a(n,r,e):t(a)}}var m=u(),h=u,p=Symbol.for("immer-nothing"),f=Symbol.for("immer-draftable"),v=Symbol.for("immer-state");function g(e){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var x=Object.getPrototypeOf;function y(e){return!!e&&!!e[v]}function b(e){return!!e&&(w(e)||Array.isArray(e)||!!e[f]||!!e.constructor?.[f]||C(e)||D(e))}var j=Object.prototype.constructor.toString();function w(e){if(!e||"object"!==typeof e)return!1;const t=x(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===j}function N(e,t){0===_(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function _(e){const t=e[v];return t?t.type_:Array.isArray(e)?1:C(e)?2:D(e)?3:0}function S(e,t){return 2===_(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function E(e,t,n){const r=_(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function C(e){return e instanceof Map}function D(e){return e instanceof Set}function T(e){return e.copy_||e.base_}function k(e,t){if(C(e))return new Map(e);if(D(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=w(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[v];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const a=n[r],s=t[a];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(x(e),t)}{const t=x(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function A(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return O(e)||y(e)||!b(e)||(_(e)>1&&(e.set=e.add=e.clear=e.delete=P),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return A(n,!0)}))),e}function P(){g(2)}function O(e){return Object.isFrozen(e)}var R,M={};function I(e){const t=M[e];return t||g(0),t}function L(){return R}function F(e,t){t&&(I("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function B(e){W(e),e.drafts_.forEach(U),e.drafts_=null}function W(e){e===R&&(R=e.parent_)}function $(e){return R={drafts_:[],parent_:R,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function U(e){const t=e[v];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function z(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[v].modified_&&(B(t),g(4)),b(e)&&(e=H(t,e),t.parent_||q(t,e)),t.patches_&&I("Patches").generateReplacementPatches_(n[v].base_,e,t.patches_,t.inversePatches_)):e=H(t,n,[]),B(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==p?e:void 0}function H(e,t,n){if(O(t))return t;const r=t[v];if(!r)return N(t,((a,s)=>V(e,r,t,a,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return q(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let a=t,s=!1;3===r.type_&&(a=new Set(t),t.clear(),s=!0),N(a,((a,i)=>V(e,r,t,a,i,n,s))),q(e,t,!1),n&&e.patches_&&I("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function V(e,t,n,r,a,s,i){if(y(a)){const i=H(e,a,s&&t&&3!==t.type_&&!S(t.assigned_,r)?s.concat(r):void 0);if(E(n,r,i),!y(i))return;e.canAutoFreeze_=!1}else i&&n.add(a);if(b(a)&&!O(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;H(e,a),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||q(e,a)}}function q(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&A(t,n)}var G={get(e,t){if(t===v)return e;const n=T(e);if(!S(n,t))return function(e,t,n){const r=X(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!b(r)?r:r===Y(e.base_,t)?(J(e),e.copy_[t]=Q(r,e)):r},has:(e,t)=>t in T(e),ownKeys:e=>Reflect.ownKeys(T(e)),set(e,t,n){const r=X(T(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=Y(T(e),t),i=r?.[v];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((a=n)===(s=r)?0!==a||1/a===1/s:a!==a&&s!==s)&&(void 0!==n||S(e.base_,t)))return!0;J(e),Z(e)}var a,s;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Y(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,J(e),Z(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=T(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){g(11)},getPrototypeOf:e=>x(e.base_),setPrototypeOf(){g(12)}},K={};function Y(e,t){const n=e[v];return(n?T(n):e)[t]}function X(e,t){if(!(t in e))return;let n=x(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=x(n)}}function Z(e){e.modified_||(e.modified_=!0,e.parent_&&Z(e.parent_))}function J(e){e.copy_||(e.copy_=k(e.base_,e.scope_.immer_.useStrictShallowCopy_))}N(G,((e,t)=>{K[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),K.deleteProperty=function(e,t){return K.set.call(this,e,t,void 0)},K.set=function(e,t,n){return G.set.call(this,e[0],t,n,e[0])};function Q(e,t){const n=C(e)?I("MapSet").proxyMap_(e,t):D(e)?I("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:L(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,s=G;n&&(a=[r],s=K);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return r.draft_=o,r.revoke_=i,o}(e,t);return(t?t.scope_:L()).drafts_.push(n),n}function ee(e){if(!b(e)||O(e))return e;const t=e[v];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=k(e,t.scope_.immer_.useStrictShallowCopy_)}else n=k(e,!0);return N(n,((e,t)=>{E(n,e,ee(t))})),t&&(t.finalized_=!1),n}var te=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];return r.produce(e,(e=>t.call(this,e,...s)))}}let r;if("function"!==typeof t&&g(6),void 0!==n&&"function"!==typeof n&&g(7),b(e)){const a=$(this),s=Q(e,void 0);let i=!0;try{r=t(s),i=!1}finally{i?B(a):W(a)}return F(a,n),z(r,a)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===p&&(r=void 0),this.autoFreeze_&&A(r,!0),n){const t=[],a=[];I("Patches").generateReplacementPatches_(e,r,t,a),n(t,a)}return r}g(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...a)))};let r,a;return[this.produce(e,n,((e,t)=>{r=e,a=t})),r,a]},"boolean"===typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){b(e)||g(8),y(e)&&(e=function(e){y(e)||g(10);return ee(e)}(e));const t=$(this),n=Q(e,void 0);return n[v].isManual_=!0,W(t),n}finishDraft(e,t){const n=e&&e[v];n&&n.isManual_||g(9);const{scope_:r}=n;return F(r,t),z(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=I("Patches").applyPatches_;return y(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},ne=te.produce;te.produceWithPatches.bind(te),te.setAutoFreeze.bind(te),te.setUseStrictShallowCopy.bind(te),te.applyPatches.bind(te),te.createDraft.bind(te),te.finishDraft.bind(te);var re="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?d:d.apply(null,arguments)},ae=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,e=>e&&"function"===typeof e.match);function se(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Ae(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return o(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var ie=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function oe(e){return b(e)?ne(e,(()=>{})):e}function le(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var ce=()=>function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let s=new ie;return t&&("boolean"===typeof t?s.push(m):s.push(h(t.extraArgument))),s},de="RTK_autoBatch",ue=e=>t=>{setTimeout(t,e)},me=e=>function(t){const{autoBatch:n=!0}=t??{};let r=new ie(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,a=!1,s=!1;const i=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:ue(10):"callback"===e.type?e.queueNotification:ue(e.timeout),l=()=>{s=!1,a&&(a=!1,i.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return i.add(e),()=>{t(),i.delete(e)}},dispatch(e){try{return r=!e?.meta?.[de],a=!r,a&&(s||(s=!0,o(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function he(e){const t=ce(),{reducer:n,middleware:a,devTools:s=!0,preloadedState:i,enhancers:u}=e||{};let m,h;if("function"===typeof n)m=n;else{if(!o(n))throw new Error(Ae(1));m=c(n)}h="function"===typeof a?a(t):t();let p=d;s&&(p=re({trace:!1,..."object"===typeof s&&s}));const f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,a)=>{const s=e(n,a);let i=()=>{throw new Error(r(15))};const o={getState:s.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i(e,...n)}},l=t.map((e=>e(o)));return i=d(...l)(s.dispatch),{...s,dispatch:i}}}(...h),v=me(f);return l(m,i,p(..."function"===typeof u?u(v):v()))}function pe(e){const t={},n=[];let r;const a={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Ae(28));if(r in t)throw new Error(Ae(29));return t[r]=n,a},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(r=e,a)};return e(a),[t,n,r]}var fe=(e,t)=>ae(e)?e.match(t):e(t);function ve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.some((t=>fe(t,e)))}var ge=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},xe=["name","message","stack","code"],ye=class{constructor(e,t){this.payload=e,this.meta=t}_type},be=class{constructor(e,t){this.payload=e,this.meta=t}_type},je=e=>{if("object"===typeof e&&null!==e){const t={};for(const n of xe)"string"===typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},we=(()=>{function e(e,t,n){const r=se(e+"/fulfilled",((e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}}))),a=se(e+"/pending",((e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}}))),s=se(e+"/rejected",((e,t,r,a,s)=>({payload:a,error:(n&&n.serializeError||je)(e||"Rejected"),meta:{...s||{},arg:r,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===e?.name,condition:"ConditionError"===e?.name}})));return Object.assign((function(e){return(i,o,l)=>{const c=n?.idGenerator?n.idGenerator(e):ge(),d=new AbortController;let u,m;function h(e){m=e,d.abort()}const p=async function(){let p;try{let s=n?.condition?.(e,{getState:o,extra:l});if(null!==(f=s)&&"object"===typeof f&&"function"===typeof f.then&&(s=await s),!1===s||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const v=new Promise(((e,t)=>{u=()=>{t({name:"AbortError",message:m||"Aborted"})},d.signal.addEventListener("abort",u)}));i(a(c,e,n?.getPendingMeta?.({requestId:c,arg:e},{getState:o,extra:l}))),p=await Promise.race([v,Promise.resolve(t(e,{dispatch:i,getState:o,extra:l,requestId:c,signal:d.signal,abort:h,rejectWithValue:(e,t)=>new ye(e,t),fulfillWithValue:(e,t)=>new be(e,t)})).then((t=>{if(t instanceof ye)throw t;return t instanceof be?r(t.payload,c,e,t.meta):r(t,c,e)}))])}catch(v){p=v instanceof ye?s(null,c,e,v.payload,v.meta):s(v,c,e)}finally{u&&d.signal.removeEventListener("abort",u)}var f;return n&&!n.dispatchConditionRejection&&s.match(p)&&p.meta.condition||i(p),p}();return Object.assign(p,{abort:h,requestId:c,arg:e,unwrap:()=>p.then(Ne)})}}),{pending:a,rejected:s,fulfilled:r,settled:ve(s,r),typePrefix:e})}return e.withTypes=()=>e,e})();function Ne(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var _e=Symbol.for("rtk-slice-createasyncthunk");function Se(e,t){return`${e}/${t}`}function Ee(){let{creators:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e?.asyncThunk?.[_e];return function(e){const{name:n,reducerPath:r=n}=e;if(!n)throw new Error(Ae(11));const a=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(a),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Ae(12));if(n in i.sliceCaseReducersByType)throw new Error(Ae(13));return i.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(i.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?pe(e.extraReducers):[e.extraReducers],a={...t,...i.sliceCaseReducersByType};return function(e,t){let n,[r,a,s]=pe(t);if("function"===typeof e)n=()=>oe(e());else{const t=oe(e);n=()=>t}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,i=[r[t.type],...a.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===i.filter((e=>!!e)).length&&(i=[s]),i.reduce(((e,n)=>{if(n){if(y(e)){const r=n(e,t);return void 0===r?e:r}if(b(e))return ne(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e}),e)}return i.getInitialState=n,i}(e.initialState,(e=>{for(let t in a)e.addCase(t,a[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}s.forEach((r=>{const s=a[r],i={reducerName:r,type:Se(n,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let r,a,{type:s,reducerName:i,createNotation:o}=e;if("reducer"in t){if(o&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Ae(17));r=t.reducer,a=t.prepare}else r=t;n.addCase(s,r).exposeCaseReducer(i,r).exposeAction(i,a?se(s,a):se(s))}(i,s,o):function(e,t,n,r){let{type:a,reducerName:s}=e;if(!r)throw new Error(Ae(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=t,m=r(a,i,u);n.exposeAction(s,m),o&&n.addCase(m.fulfilled,o);l&&n.addCase(m.pending,l);c&&n.addCase(m.rejected,c);d&&n.addMatcher(m.settled,d);n.exposeCaseReducer(s,{fulfilled:o||Te,pending:l||Te,rejected:c||Te,settled:d||Te})}(i,s,o,t)}));const c=e=>e,d=new Map;let u;function m(e,t){return u||(u=l()),u(e,t)}function h(){return u||(u=l()),u.getInitialState()}function p(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let r=e[t];return"undefined"===typeof r&&n&&(r=h()),r}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const r=le(d,n,(()=>new WeakMap));return le(r,t,(()=>{const r={};for(const[a,s]of Object.entries(e.selectors??{}))r[a]=Ce(s,t,h,n);return r}))}return{reducerPath:t,getSelectors:a,get selectors(){return a(r)},selectSlice:r}}const f={name:n,reducer:m,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:h,...p(r),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=t??r;return e.inject({reducerPath:a,reducer:m},n),{...f,...p(a,!0)}}};return f}}function Ce(e,t,n,r){function a(a){let s=t(a);"undefined"===typeof s&&r&&(s=n());for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return e(s,...o)}return a.unwrapped=e,a}var De=Ee();function Te(){}var{assign:ke}=Object;Symbol.for("rtk-state-proxy-original");function Ae(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}},6788:(e,t,n)=>{var r=n(7160),a=n(5204),s=n(4816);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!a||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new s(i)}return n.set(e,t),this.size=n.size,this}},6817:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]])},6832:(e,t,n)=>{e=n.nmd(e);var r=n(7105),a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,i=s&&s.exports===a&&r.process,o=function(){try{var e=s&&s.require&&s.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=o},6851:(e,t,n)=>{"use strict";n.d(t,{DX:()=>i,xV:()=>l});var r=n(5043),a=n(2814),s=n(579),i=r.forwardRef(((e,t)=>{const{children:n,...a}=e,i=r.Children.toArray(n),l=i.find(c);if(l){const e=l.props.children,n=i.map((t=>t===l?r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null:t));return(0,s.jsx)(o,{...a,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,n):null})}return(0,s.jsx)(o,{...a,ref:t,children:n})}));i.displayName="Slot";var o=r.forwardRef(((e,t)=>{const{children:n,...s}=e;if(r.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=function(){s(...arguments),a(...arguments)}:a&&(n[r]=a):"style"===r?n[r]={...a,...s}:"className"===r&&(n[r]=[a,s].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==r.Fragment&&(i.ref=t?(0,a.t)(t,e):e),r.cloneElement(n,i)}return r.Children.count(n)>1?r.Children.only(null):null}));o.displayName="SlotClone";var l=e=>{let{children:t}=e;return(0,s.jsx)(s.Fragment,{children:t})};function c(e){return r.isValidElement(e)&&e.type===l}},6874:(e,t,n)=>{var r=n(2622);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},6913:(e,t,n)=>{var r=n(9812),a=n(4552),s=n(6095),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):s(e)}},6924:(e,t,n)=>{var r=n(7685),a=n(5204),s=n(5387),i=n(2070),o=n(6600),l=n(6913),c=n(6996),d="[object Map]",u="[object Promise]",m="[object Set]",h="[object WeakMap]",p="[object DataView]",f=c(r),v=c(a),g=c(s),x=c(i),y=c(o),b=l;(r&&b(new r(new ArrayBuffer(1)))!=p||a&&b(new a)!=d||s&&b(s.resolve())!=u||i&&b(new i)!=m||o&&b(new o)!=h)&&(b=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return p;case v:return d;case g:return u;case x:return m;case y:return h}return t}),e.exports=b},6954:(e,t,n)=>{var r=n(1629),a=n(7857),s=n(6686),i=n(6996),o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,m=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||a(e))&&(r(e)?m:o).test(i(e))}},6981:(e,t,n)=>{"use strict";n.d(t,{f:()=>s});var r=n(2440),a=n(2316);function s(e,t,n){const s=(0,a.a)(e,n?.in);return isNaN(t)?(0,r.w)(n?.in||e,NaN):t?(s.setDate(s.getDate()+t),s):s}},6989:(e,t,n)=>{var r=n(6399),a=n(2761);e.exports=function e(t,n,s,i,o){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!==t&&n!==n:r(t,n,s,i,e,o))}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},7002:(e,t,n)=>{var r=n(5295),a=n(4746),s=n(9096),i=n(4052),o=n(929);e.exports=function(e,t,n){var l=i(e)?r:a;return n&&o(e,t,n)&&(t=void 0),l(e,s(t,3))}},7067:(e,t,n)=>{"use strict";e.exports=n(4612)},7099:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});const r=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},a=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},s={p:a,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return r(e,t);let o;switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",r(s,t)).replace("{{time}}",a(i,t))}}},7105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},7116:(e,t,n)=>{var r=n(9812),a=n(2777),s=n(4052),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||a(e)||!!(i&&e&&e[i])}},7152:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var r=n(5043),a=n(3390),s=n(1140),i=n(1981),o=n(2264),l=n(7459),c=n(6604),d=n(9786),u=n(6210),m=n(614),h=n(1360),p=n(781),f=n(4259),v=n(7365),g=n(9989),x=n(8414),y=n(5598),b=n(5830),j=n(3416),w=n(3003),N=n(579);const _=[{value:"text",label:"Text Input"},{value:"textarea",label:"Text Area"},{value:"date",label:"Date"},{value:"time",label:"Time"},{value:"multiselect",label:"Multi Select"},{value:"vitals",label:"Vitals"},{value:"investigations",label:"Investigations"},{value:"medicineAdvice",label:"Medicine Advice"}],S={diagnosis:{type:"multiselect",component:"MultiSelectInput",suggestions:"diagnosisTemplate",width:"full",requiresTemplate:!0},comorbidities:{type:"multiselect",component:"MultiSelectInput",suggestions:"comorbidities",width:"full",extraComponent:"ComorbidityHandling",requiresTemplate:!0}},E=e=>{let{config:t,enabledFields:n,onSave:E,onCancel:C,initialValues:D={}}=e;const{toast:T}=(0,b.dj)(),{updateTempleteStatus:k}=(0,w.d4)((e=>e.templates)),[A,P]=(0,r.useState)(null),[O,R]=(0,r.useState)(null),[M,I]=(0,r.useState)(null),[L,F]=(0,r.useState)(D.templateName||""),[B,W]=(0,r.useState)(D.isDefault||!1),[$,U]=(0,r.useState)({name:"",content:""}),[z,H]=(0,r.useState)((()=>((e,t)=>{const n=e.sections.map((e=>{const n=t.sections.find((t=>t.id===e.id)),r=new Map(e.fields.map((e=>[e.id,e])));let a=[];return n?(a=n.fields.map((t=>({...r.get(t.id)||t,...t,hidden:!1,templates:t.templates||[],sectionId:e.id}))),e.fields.forEach((t=>{n.fields.some((e=>e.id===t.id))||a.push({...t,hidden:!0,templates:t.templates||[],sectionId:e.id})}))):a=e.fields.map((t=>({...t,hidden:!0,templates:t.templates||[],sectionId:e.id}))),{...e,fields:a}})),r=t.sections.filter((t=>!e.sections.some((e=>e.id===t.id)))).map((e=>({...e,fields:e.fields.map((t=>({...t,hidden:!1,templates:t.templates||[],sectionId:e.id})))})));return{...e,sections:[...n,...r]}})(t,n))),V=(e,t,n)=>{H((r=>({...r,sections:r.sections.map((r=>r.id!==e?r:{...r,fields:r.fields.map((e=>{if(e.id!==t)return e;const a={...e,...n,sectionId:r.id,templates:n.templates||e.templates||[]};return S[e.id]?{...a,...S[e.id]}:a}))}))})))},q=(e,t)=>e!==t&&z.sections.some((n=>n.fields.some((n=>n.id===e&&n.id!==t)))),G=e=>{let{sectionId:t}=e;const[n,s]=(0,r.useState)({label:"",type:"text",id:""});return(0,N.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-secondary/5 rounded-md",children:[(0,N.jsx)(o.p,{placeholder:"Field Label",value:n.label,onChange:e=>s({...n,label:e.target.value}),className:"h-8"}),(0,N.jsx)(o.p,{placeholder:"Field ID",value:n.id,onChange:e=>s({...n,id:e.target.value}),className:"h-8"}),(0,N.jsxs)(x.l6,{value:n.type,onValueChange:e=>s({...n,type:e}),children:[(0,N.jsx)(x.bq,{className:"w-[140px] h-8",children:(0,N.jsx)(x.yv,{placeholder:"Field Type"})}),(0,N.jsx)(x.gC,{children:_.map((e=>(0,N.jsx)(x.eb,{value:e.value,children:e.label},e.value)))})]}),(0,N.jsx)(a.$,{size:"sm",variant:"ghost",onClick:()=>{q(n.id)?T({title:"Error",description:"Field ID must be unique",variant:"destructive"}):((e,t)=>{H((n=>({...n,sections:n.sections.map((n=>{if(n.id!==e)return n;const r=Object.entries(S).find((e=>{let[n,r]=e;return r.type===t.type})),a={id:t.id,label:t.label,type:t.type,hidden:!1,width:"full",sectionId:n.id,templates:[],..."multiselect"===t.type&&{component:"MultiSelectInput",suggestions:"[]"},...r&&r[1]};return{...n,fields:[...n.fields,a]}}))}))),R(null)})(t,n)},disabled:!n.label||!n.type||!n.id,children:(0,N.jsx)(u.A,{className:"h-4 w-4"})}),(0,N.jsx)(a.$,{size:"sm",variant:"ghost",onClick:()=>R(null),children:(0,N.jsx)(m.A,{className:"h-4 w-4"})})]})},K=e=>{var t;let{field:n}=e;const[l,d]=(0,r.useState)({...n}),[u,p]=(0,r.useState)({name:"",content:""}),f=(e,t)=>{d((n=>({...n,[e]:t})))},v=()=>{I(null)};return(0,N.jsxs)(y.Cf,{className:"max-w-4xl max-h-[90vh] flex flex-col gap-0 p-0",onInteractOutside:v,children:[(0,N.jsx)(y.c7,{className:"px-6 py-4 border-b",children:(0,N.jsxs)(y.L3,{children:["Field Settings: ",n.label]})}),(0,N.jsx)(c.F,{className:"p-4 h-[90vh]",children:(0,N.jsxs)("div",{className:"space-y-4",children:[(0,N.jsx)(s.Zp,{className:"p-4",children:(0,N.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,N.jsxs)("div",{className:"space-y-2",children:[(0,N.jsx)(i.J,{className:"text-sm font-medium",children:"Field ID"}),(0,N.jsx)(o.p,{value:l.id,onChange:e=>f("id",e.target.value),placeholder:"Unique field identifier",className:"h-9"})]}),(0,N.jsxs)("div",{className:"space-y-2",children:[(0,N.jsx)(i.J,{className:"text-sm font-medium",children:"Field Label"}),(0,N.jsx)(o.p,{value:l.label,onChange:e=>f("label",e.target.value),placeholder:"Field label",className:"h-9"})]}),(0,N.jsxs)("div",{className:"space-y-2",children:[(0,N.jsx)(i.J,{className:"text-sm font-medium",children:"Field Type"}),(0,N.jsxs)(x.l6,{value:l.type,onValueChange:e=>f("type",e),children:[(0,N.jsx)(x.bq,{className:"h-9",children:(0,N.jsx)(x.yv,{})}),(0,N.jsx)(x.gC,{children:_.map((e=>(0,N.jsx)(x.eb,{value:e.value,children:e.label},e.value)))})]})]})]})}),"textarea"===n.type&&"clinicalInfo"===n.sectionId&&(0,N.jsx)(s.Zp,{className:"p-4",children:(0,N.jsxs)("div",{className:"space-y-4",children:[(0,N.jsx)(i.J,{className:"text-lg font-semibold",children:"Pre-saved Templates"}),(0,N.jsxs)("div",{className:"space-y-4",children:[null===(t=l.templates)||void 0===t?void 0:t.map(((e,t)=>(0,N.jsx)("div",{className:"flex items-start gap-2 p-3 bg-secondary/10 rounded-md border",children:(0,N.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,N.jsxs)("div",{className:"flex items-center justify-between",children:[(0,N.jsx)(i.J,{className:"font-medium",children:e.name}),(0,N.jsx)(a.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{d((t=>({...t,templates:t.templates.filter(((t,n)=>n!==e))})))})(t),children:(0,N.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,N.jsx)("div",{className:"text-sm text-muted-foreground",children:e.content})]})},t))),(0,N.jsxs)("div",{className:"space-y-3 border-t pt-4",children:[(0,N.jsx)(i.J,{className:"text-sm font-medium",children:"Add New Template"}),(0,N.jsxs)("div",{className:"space-y-3",children:[(0,N.jsx)(o.p,{placeholder:"Template Name",value:u.name,onChange:e=>p((t=>({...t,name:e.target.value}))),className:"h-9"}),(0,N.jsx)(j.T,{placeholder:"Template Content",value:u.content,onChange:e=>p((t=>({...t,content:e.target.value}))),className:"min-h-[100px]"}),(0,N.jsxs)(a.$,{type:"button",variant:"outline",onClick:()=>{u.name&&u.content?(d((e=>({...e,templates:[...e.templates||[],u]}))),p({name:"",content:""})):T({title:"Error",description:"Both template name and content are required",variant:"destructive"})},className:"w-full h-9",children:[(0,N.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Add Template"]})]})]})]})]})})]})}),(0,N.jsx)(y.Es,{className:"px-6 py-4 border-t",children:(0,N.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,N.jsx)(a.$,{variant:"outline",onClick:v,children:"Cancel"}),(0,N.jsx)(a.$,{disabled:"loading"===k,onClick:()=>{q(l.id,n.id)?T({title:"Error",description:"Field ID must be unique",variant:"destructive"}):(V(n.sectionId,n.id,l),I(null))},children:"loading"===k?"Saving ":"Save Settings"})]})})]})};return(0,N.jsxs)(s.Zp,{className:"w-full max-w-2xl mx-auto flex flex-col h-[600px] min-h-[400px] max-h-[90vh]",children:[(0,N.jsx)(s.aR,{className:"border-b py-3",children:(0,N.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,N.jsxs)("div",{className:"flex justify-between items-center",children:[(0,N.jsx)(s.ZB,{children:"Customize Form Fields"}),(0,N.jsx)(a.$,{variant:"ghost",size:"sm",onClick:C,children:(0,N.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,N.jsxs)("div",{className:"flex items-center gap-4",children:[(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)(i.J,{htmlFor:"templateName",className:"text-sm font-medium mb-1",children:"Template Name"}),(0,N.jsx)(o.p,{id:"templateName",placeholder:"Enter template name",value:L,onChange:e=>F(e.target.value),className:"h-8"})]}),(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsx)(l.d,{id:"isDefault",checked:B,onCheckedChange:W}),(0,N.jsx)(i.J,{htmlFor:"isDefault",className:"text-sm",children:"Set as default"})]})]})]})}),(0,N.jsx)(c.F,{className:"flex-1",children:(0,N.jsx)(s.Wu,{className:"p-4",children:(0,N.jsx)(d.JY,{onDragEnd:e=>{if(!e.destination)return;const{source:t,destination:n}=e,r=t.droppableId,a=z.sections.find((e=>e.id===r)),s=Array.from(a.fields),[i]=s.splice(t.index,1);s.splice(n.index,0,i),H({...z,sections:z.sections.map((e=>e.id===r?{...e,fields:s}:e))})},children:z.sections.map((e=>(0,N.jsxs)("div",{className:"mb-4 last:mb-0",children:[(0,N.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,N.jsx)("h3",{className:"text-lg font-semibold",children:e.title||e.id}),(0,N.jsxs)(a.$,{variant:"ghost",size:"sm",onClick:()=>R(e.id),children:[(0,N.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Add Field"]})]}),O===e.id&&(0,N.jsx)(G,{sectionId:e.id}),(0,N.jsx)(d.gL,{droppableId:e.id,children:t=>(0,N.jsxs)("div",{...t.droppableProps,ref:t.innerRef,className:"space-y-1.5",children:[e.fields.map(((t,n)=>(0,N.jsx)(d.sx,{draggableId:t.id,index:n,children:n=>(0,N.jsxs)("div",{ref:n.innerRef,...n.draggableProps,className:"flex items-center justify-between p-2 bg-secondary/10 rounded-md "+(t.hidden?"opacity-50":""),children:[(0,N.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,N.jsx)("div",{...n.dragHandleProps,children:(0,N.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})}),A===t.id?(0,N.jsx)("div",{className:"flex items-center gap-2 flex-1",children:(0,N.jsx)(o.p,{value:t.label,onChange:n=>V(e.id,t.id,{label:n.target.value}),className:"h-7 text-sm",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&P(null)}})}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(i.J,{className:"text-sm flex-1",children:[t.label,S[t.id]&&(0,N.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Template Required)"})]}),(0,N.jsxs)(y.lG,{open:(null===M||void 0===M?void 0:M.id)===t.id,children:[(0,N.jsx)(y.zM,{asChild:!0,children:(0,N.jsx)(a.$,{variant:"ghost",size:"sm",className:"h-7 w-7",onClick:()=>I(t),children:(0,N.jsx)(v.A,{className:"h-3 w-3"})})}),(null===M||void 0===M?void 0:M.id)===t.id&&(0,N.jsx)(K,{field:t})]}),(0,N.jsx)(a.$,{variant:"ghost",size:"sm",className:"h-7 w-7",onClick:()=>P(t.id),children:(0,N.jsx)(g.A,{className:"h-3 w-3"})})]})]}),(0,N.jsx)("div",{className:"flex items-center gap-2",children:(0,N.jsx)(l.d,{checked:!t.hidden,onCheckedChange:()=>{return n=e.id,r=t.id,void H({...z,sections:z.sections.map((e=>e.id!==n?e:{...e,fields:e.fields.map((e=>e.id!==r?e:{...e,hidden:!e.hidden}))}))});var n,r}})})]})},t.id))),t.placeholder]})})]},e.id)))})})}),(0,N.jsx)("div",{className:"p-3 border-t mt-auto",children:(0,N.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,N.jsx)(a.$,{variant:"outline",onClick:C,size:"sm",children:"Cancel"}),(0,N.jsx)(a.$,{onClick:()=>{if(!L.trim())return void T({title:"Error",description:"Template name is required",variant:"destructive"});const e={...z,sections:z.sections.map((e=>({...e,fields:e.fields.filter((e=>!e.hidden)).map((e=>{var t;const n={...e};return delete n.sectionId,null!==(t=n.templates)&&void 0!==t&&t.length||delete n.templates,n}))})))};E({name:L,value:e,isDefault:B})},size:"sm",children:"Save Changes"})]})})]})}},7159:(e,t,n)=>{var r=n(2622);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},7160:(e,t,n)=>{var r=n(7563),a=n(9935),s=n(4190),i=n(1946),o=n(1714);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=i,l.prototype.set=o,e.exports=l},7237:(e,t,n)=>{"use strict";e.exports=n(8365)},7251:(e,t,n)=>{var r=n(8724),a=n(7160),s=n(5204);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||a),string:new r}}},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,i){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new a(r,s||e,i),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,s=r.length,i=new Array(s);a<s;a++)i[a]=r[a].fn;return i},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,a,s,i){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,a),!0;case 5:return d.fn.call(d.context,t,r,a,s),!0;case 6:return d.fn.call(d.context,t,r,a,s,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var m,h=d.length;for(c=0;c<h;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,a);break;default:if(!l)for(m=1,l=new Array(u-1);m<u;m++)l[m-1]=arguments[m];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,a){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||a&&!o.once||r&&o.context!==r||i(this,s);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||a&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:i(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},7303:(e,t,n)=>{var r=n(801),a=1/0;e.exports=function(e){return e?(e=r(e))===a||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},7358:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var r=n(2316);function a(e,t){return+(0,r.a)(e)<+(0,r.a)(t)}},7365:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7368:(e,t,n)=>{"use strict";n.d(t,{A:()=>m,P:()=>u});var r=n(5043),a=n(2264),s=n(5949),i=n(6817),o=n(8796),l=n(6178),c=n(6604),d=n(579);const u=(0,r.forwardRef)(((e,t)=>{let{suggestions:n=[],placeholder:u,value:m,setValue:h,onSuggestionSelect:p,showStock:f=!1}=e;const[v,g]=(0,r.useState)([]),[x,y]=(0,r.useState)(!1),[b,j]=(0,r.useState)(-1),w=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=[...n.filter((e=>{var t,n,r;return null===e||void 0===e||null===(t=e.name)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(null===(r=m||"")||void 0===r?void 0:r.toLowerCase())}))].sort(((e,t)=>e.isTemplate&&!t.isTemplate?-1:!e.isTemplate&&t.isTemplate?1:0));g(e),j(-1)}),[m,n]);const{refs:N,floatingStyles:_}=(0,o.we)({placement:"bottom-start",middleware:[(0,l.cY)(4),(0,l.UU)({fallbackPlacements:["top-start"]}),(0,l.BN)()],strategy:"absolute"});return(0,r.useEffect)((()=>{if(b>=0&&w.current){const e=w.current.children[b];e&&e.scrollIntoView({block:"nearest"})}}),[b]),(0,d.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,d.jsxs)("div",{className:"relative ",ref:N.setReference,children:[(0,d.jsx)(a.p,{ref:t,type:"text",value:m,onChange:e=>{h(e.target.value),y(!0)},onKeyDown:e=>{"ArrowDown"===e.key?(e.preventDefault(),j((e=>e<v.length-1?e+1:e))):"ArrowUp"===e.key?(e.preventDefault(),j((e=>e>0?e-1:-1))):"Enter"===e.key&&b>=0&&(h(v[b].name),y(!1),p&&p(v[b]))},onFocus:()=>y(!0),onBlur:()=>setTimeout((()=>y(!1)),200),placeholder:u||"Search or type",className:"pr-8 hover:cursor-pointer font-semibold"}),(0,d.jsx)(i.A,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 opacity-50 "})]}),x&&v.length>0&&(0,d.jsx)("div",{ref:N.setFloating,style:{..._,width:"100%",position:"absolute",left:0,marginTop:"4px"},className:"z-[9999] bg-popover rounded-md border shadow-md",children:(0,d.jsx)(c.F,{className:""+(v.length>5?"h-[200px]":""),children:(0,d.jsx)("ul",{children:v.map(((e,n)=>(0,d.jsx)("li",{onClick:()=>(e=>{h(e.name),y(!1),p&&p(e),t&&t.current&&t.current.focus()})(e),className:`px-4 py-2 cursor-pointer hover:bg-accent hover:text-accent-foreground ${n===b?"bg-accent text-accent-foreground":""} ${e.isTemplate?"border-l-4 border-blue-500":""}`,children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"capitalize",children:e.name}),e.isTemplate&&(0,d.jsx)(s.E,{variant:"secondary",className:"bg-blue-100 text-blue-700 text-xs",children:"Template"})]}),f&&void 0!==e.quantity&&(0,d.jsx)(s.E,{variant:e.quantity<=100?"destructive":"success",children:e.quantity})]})},e._id)))})})})]})})),m=u},7424:(e,t,n)=>{var r=n(755),a=n(2536),s=n(5647),i=n(929),o=s((function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),a(e,r(t,1),[])}));e.exports=o},7451:(e,t,n)=>{"use strict";n.d(t,{UE:()=>X,ll:()=>H,rD:()=>J,UU:()=>G,jD:()=>Y,ER:()=>Z,cY:()=>V,BN:()=>q,Ej:()=>K});const r=["top","right","bottom","left"],a=Math.min,s=Math.max,i=Math.round,o=Math.floor,l=e=>({x:e,y:e}),c={left:"right",right:"left",bottom:"top",top:"bottom"},d={start:"end",end:"start"};function u(e,t,n){return s(e,a(t,n))}function m(e,t){return"function"===typeof e?e(t):e}function h(e){return e.split("-")[0]}function p(e){return e.split("-")[1]}function f(e){return"x"===e?"y":"x"}function v(e){return"y"===e?"height":"width"}function g(e){return["top","bottom"].includes(h(e))?"y":"x"}function x(e){return f(g(e))}function y(e){return e.replace(/start|end/g,(e=>d[e]))}function b(e){return e.replace(/left|right|bottom|top/g,(e=>c[e]))}function j(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function w(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function N(e,t,n){let{reference:r,floating:a}=e;const s=g(t),i=x(t),o=v(i),l=h(t),c="y"===s,d=r.x+r.width/2-a.width/2,u=r.y+r.height/2-a.height/2,m=r[o]/2-a[o]/2;let f;switch(l){case"top":f={x:d,y:r.y-a.height};break;case"bottom":f={x:d,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:u};break;case"left":f={x:r.x-a.width,y:u};break;default:f={x:r.x,y:r.y}}switch(p(t)){case"start":f[i]-=m*(n&&c?-1:1);break;case"end":f[i]+=m*(n&&c?-1:1)}return f}async function _(e,t){var n;void 0===t&&(t={});const{x:r,y:a,platform:s,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:p=0}=m(t,e),f=j(p),v=o[h?"floating"===u?"reference":"floating":u],g=w(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(v)))||n?v:v.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),x="floating"===u?{x:r,y:a,width:i.floating.width,height:i.floating.height}:i.reference,y=await(null==s.getOffsetParent?void 0:s.getOffsetParent(o.floating)),b=await(null==s.isElement?void 0:s.isElement(y))&&await(null==s.getScale?void 0:s.getScale(y))||{x:1,y:1},N=w(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:y,strategy:l}):x);return{top:(g.top-N.top+f.top)/b.y,bottom:(N.bottom-g.bottom+f.bottom)/b.y,left:(g.left-N.left+f.left)/b.x,right:(N.right-g.right+f.right)/b.x}}function S(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function E(e){return r.some((t=>e[t]>=0))}var C=n(5702);function D(e){const t=(0,C.L9)(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=(0,C.sb)(e),s=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=i(n)!==s||i(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function T(e){return(0,C.vq)(e)?e:e.contextElement}function k(e){const t=T(e);if(!(0,C.sb)(t))return l(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:s}=D(t);let o=(s?i(n.width):n.width)/r,c=(s?i(n.height):n.height)/a;return o&&Number.isFinite(o)||(o=1),c&&Number.isFinite(c)||(c=1),{x:o,y:c}}const A=l(0);function P(e){const t=(0,C.zk)(e);return(0,C.Tc)()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:A}function O(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const a=e.getBoundingClientRect(),s=T(e);let i=l(1);t&&(r?(0,C.vq)(r)&&(i=k(r)):i=k(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==(0,C.zk)(e))&&t}(s,n,r)?P(s):l(0);let c=(a.left+o.x)/i.x,d=(a.top+o.y)/i.y,u=a.width/i.x,m=a.height/i.y;if(s){const e=(0,C.zk)(s),t=r&&(0,C.vq)(r)?(0,C.zk)(r):r;let n=e,a=(0,C._m)(n);for(;a&&r&&t!==n;){const e=k(a),t=a.getBoundingClientRect(),r=(0,C.L9)(a),s=t.left+(a.clientLeft+parseFloat(r.paddingLeft))*e.x,i=t.top+(a.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,d*=e.y,u*=e.x,m*=e.y,c+=s,d+=i,n=(0,C.zk)(a),a=(0,C._m)(n)}}return w({width:u,height:m,x:c,y:d})}function R(e,t){const n=(0,C.CP)(e).scrollLeft;return t?t.left+n:O((0,C.ep)(e)).left+n}function M(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:R(e,r)),y:r.top+t.scrollTop}}function I(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=(0,C.zk)(e),r=(0,C.ep)(e),a=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,o=0,l=0;if(a){s=a.width,i=a.height;const e=(0,C.Tc)();(!e||e&&"fixed"===t)&&(o=a.offsetLeft,l=a.offsetTop)}return{width:s,height:i,x:o,y:l}}(e,n);else if("document"===t)r=function(e){const t=(0,C.ep)(e),n=(0,C.CP)(e),r=e.ownerDocument.body,a=s(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=s(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+R(e);const l=-n.scrollTop;return"rtl"===(0,C.L9)(r).direction&&(o+=s(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:l}}((0,C.ep)(e));else if((0,C.vq)(t))r=function(e,t){const n=O(e,!0,"fixed"===t),r=n.top+e.clientTop,a=n.left+e.clientLeft,s=(0,C.sb)(e)?k(e):l(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:a*s.x,y:r*s.y}}(t,n);else{const n=P(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return w(r)}function L(e,t){const n=(0,C.$4)(e);return!(n===t||!(0,C.vq)(n)||(0,C.eu)(n))&&("fixed"===(0,C.L9)(n).position||L(n,t))}function F(e,t,n){const r=(0,C.sb)(t),a=(0,C.ep)(t),s="fixed"===n,i=O(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const c=l(0);if(r||!r&&!s)if(("body"!==(0,C.mq)(t)||(0,C.ZU)(a))&&(o=(0,C.CP)(t)),r){const e=O(t,!0,s,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else a&&(c.x=R(a));const d=!a||r||s?l(0):M(a,o);return{x:i.left+o.scrollLeft-c.x-d.x,y:i.top+o.scrollTop-c.y-d.y,width:i.width,height:i.height}}function B(e){return"static"===(0,C.L9)(e).position}function W(e,t){if(!(0,C.sb)(e)||"fixed"===(0,C.L9)(e).position)return null;if(t)return t(e);let n=e.offsetParent;return(0,C.ep)(e)===n&&(n=n.ownerDocument.body),n}function $(e,t){const n=(0,C.zk)(e);if((0,C.Tf)(e))return n;if(!(0,C.sb)(e)){let t=(0,C.$4)(e);for(;t&&!(0,C.eu)(t);){if((0,C.vq)(t)&&!B(t))return t;t=(0,C.$4)(t)}return n}let r=W(e,t);for(;r&&(0,C.Lv)(r)&&B(r);)r=W(r,t);return r&&(0,C.eu)(r)&&B(r)&&!(0,C.sQ)(r)?n:r||(0,C.gJ)(e)||n}const U={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const s="fixed"===a,i=(0,C.ep)(r),o=!!t&&(0,C.Tf)(t.floating);if(r===i||o&&s)return n;let c={scrollLeft:0,scrollTop:0},d=l(1);const u=l(0),m=(0,C.sb)(r);if((m||!m&&!s)&&(("body"!==(0,C.mq)(r)||(0,C.ZU)(i))&&(c=(0,C.CP)(r)),(0,C.sb)(r))){const e=O(r);d=k(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!i||m||s?l(0):M(i,c,!0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:n.y*d.y-c.scrollTop*d.y+u.y+h.y}},getDocumentElement:C.ep,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[..."clippingAncestors"===n?(0,C.Tf)(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=(0,C.v9)(e,[],!1).filter((e=>(0,C.vq)(e)&&"body"!==(0,C.mq)(e))),a=null;const s="fixed"===(0,C.L9)(e).position;let i=s?(0,C.$4)(e):e;for(;(0,C.vq)(i)&&!(0,C.eu)(i);){const t=(0,C.L9)(i),n=(0,C.sQ)(i);n||"fixed"!==t.position||(a=null),(s?!n&&!a:!n&&"static"===t.position&&a&&["absolute","fixed"].includes(a.position)||(0,C.ZU)(i)&&!n&&L(e,i))?r=r.filter((e=>e!==i)):a=t,i=(0,C.$4)(i)}return t.set(e,r),r}(t,this._c):[].concat(n),r],l=o[0],c=o.reduce(((e,n)=>{const r=I(t,n,i);return e.top=s(r.top,e.top),e.right=a(r.right,e.right),e.bottom=a(r.bottom,e.bottom),e.left=s(r.left,e.left),e}),I(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:$,getElementRects:async function(e){const t=this.getOffsetParent||$,n=this.getDimensions,r=await n(e.floating);return{reference:F(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=D(e);return{width:t,height:n}},getScale:k,isElement:C.vq,isRTL:function(e){return"rtl"===(0,C.L9)(e).direction}};function z(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function H(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:l=!0,elementResize:c="function"===typeof ResizeObserver,layoutShift:d="function"===typeof IntersectionObserver,animationFrame:u=!1}=r,m=T(e),h=i||l?[...m?(0,C.v9)(m):[],...(0,C.v9)(t)]:[];h.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),l&&e.addEventListener("resize",n)}));const p=m&&d?function(e,t){let n,r=null;const i=(0,C.ep)(e);function l(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function c(d,u){void 0===d&&(d=!1),void 0===u&&(u=1),l();const m=e.getBoundingClientRect(),{left:h,top:p,width:f,height:v}=m;if(d||t(),!f||!v)return;const g={rootMargin:-o(p)+"px "+-o(i.clientWidth-(h+f))+"px "+-o(i.clientHeight-(p+v))+"px "+-o(h)+"px",threshold:s(0,a(1,u))||1};let x=!0;function y(t){const r=t[0].intersectionRatio;if(r!==u){if(!x)return c();r?c(!1,r):n=setTimeout((()=>{c(!1,1e-7)}),1e3)}1!==r||z(m,e.getBoundingClientRect())||c(),x=!1}try{r=new IntersectionObserver(y,{...g,root:i.ownerDocument})}catch(b){r=new IntersectionObserver(y,g)}r.observe(e)}(!0),l}(m,n):null;let f,v=-1,g=null;c&&(g=new ResizeObserver((e=>{let[r]=e;r&&r.target===m&&g&&(g.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame((()=>{var e;null==(e=g)||e.observe(t)}))),n()})),m&&!u&&g.observe(m),g.observe(t));let x=u?O(e):null;return u&&function t(){const r=O(e);x&&!z(x,r)&&n();x=r,f=requestAnimationFrame(t)}(),n(),()=>{var e;h.forEach((e=>{i&&e.removeEventListener("scroll",n),l&&e.removeEventListener("resize",n)})),null==p||p(),null==(e=g)||e.disconnect(),g=null,u&&cancelAnimationFrame(f)}}const V=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:s,placement:i,middlewareData:o}=t,l=await async function(e,t){const{placement:n,platform:r,elements:a}=e,s=await(null==r.isRTL?void 0:r.isRTL(a.floating)),i=h(n),o=p(n),l="y"===g(n),c=["left","top"].includes(i)?-1:1,d=s&&l?-1:1,u=m(t,e);let{mainAxis:f,crossAxis:v,alignmentAxis:x}="number"===typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"===typeof x&&(v="end"===o?-1*x:x),l?{x:v*d,y:f*c}:{x:f*c,y:v*d}}(t,e);return i===(null==(n=o.offset)?void 0:n.placement)&&null!=(r=o.arrow)&&r.alignmentOffset?{}:{x:a+l.x,y:s+l.y,data:{...l,placement:i}}}}},q=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=m(e,t),c={x:n,y:r},d=await _(t,l),p=g(h(a)),v=f(p);let x=c[v],y=c[p];if(s){const e="y"===v?"bottom":"right";x=u(x+d["y"===v?"top":"left"],x,x-d[e])}if(i){const e="y"===p?"bottom":"right";y=u(y+d["y"===p?"top":"left"],y,y-d[e])}const b=o.fn({...t,[v]:x,[p]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[v]:s,[p]:i}}}}}},G=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:s,rects:i,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:N=!0,...S}=m(e,t);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const E=h(a),C=g(o),D=h(o)===o,T=await(null==l.isRTL?void 0:l.isRTL(c.floating)),k=f||(D||!N?[b(o)]:function(e){const t=b(e);return[y(e),t,y(t)]}(o)),A="none"!==w;!f&&A&&k.push(...function(e,t,n,r){const a=p(e);let s=function(e,t,n){const r=["left","right"],a=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?s:i;default:return[]}}(h(e),"start"===n,r);return a&&(s=s.map((e=>e+"-"+a)),t&&(s=s.concat(s.map(y)))),s}(o,N,w,T));const P=[o,...k],O=await _(t,S),R=[];let M=(null==(r=s.flip)?void 0:r.overflows)||[];if(d&&R.push(O[E]),u){const e=function(e,t,n){void 0===n&&(n=!1);const r=p(e),a=x(e),s=v(a);let i="x"===a?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=b(i)),[i,b(i)]}(a,i,T);R.push(O[e[0]],O[e[1]])}if(M=[...M,{placement:a,overflows:R}],!R.every((e=>e<=0))){var I,L;const e=((null==(I=s.flip)?void 0:I.index)||0)+1,t=P[e];if(t)return{data:{index:e,overflows:M},reset:{placement:t}};let n=null==(L=M.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:L.placement;if(!n)switch(j){case"bestFit":{var F;const e=null==(F=M.filter((e=>{if(A){const t=g(e.placement);return t===C||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:F[0];e&&(n=e);break}case"initialPlacement":n=o}if(a!==n)return{reset:{placement:n}}}return{}}}},K=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:l,elements:c}=t,{apply:d=()=>{},...u}=m(e,t),f=await _(t,u),v=h(i),x=p(i),y="y"===g(i),{width:b,height:j}=o.floating;let w,N;"top"===v||"bottom"===v?(w=v,N=x===(await(null==l.isRTL?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(N=v,w="end"===x?"top":"bottom");const S=j-f.top-f.bottom,E=b-f.left-f.right,C=a(j-f[w],S),D=a(b-f[N],E),T=!t.middlewareData.shift;let k=C,A=D;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(A=E),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(k=S),T&&!x){const e=s(f.left,0),t=s(f.right,0),n=s(f.top,0),r=s(f.bottom,0);y?A=b-2*(0!==e||0!==t?e+t:s(f.left,f.right)):k=j-2*(0!==n||0!==r?n+r:s(f.top,f.bottom))}await d({...t,availableWidth:A,availableHeight:k});const P=await l.getDimensions(c.floating);return b!==P.width||j!==P.height?{reset:{rects:!0}}:{}}}},Y=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=m(e,t);switch(r){case"referenceHidden":{const e=S(await _(t,{...a,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:E(e)}}}case"escaped":{const e=S(await _(t,{...a,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:E(e)}}}default:return{}}}}},X=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:h=0}=m(e,t)||{};if(null==d)return{};const f=j(h),g={x:n,y:r},y=x(s),b=v(y),w=await o.getDimensions(d),N="y"===y,_=N?"top":"left",S=N?"bottom":"right",E=N?"clientHeight":"clientWidth",C=i.reference[b]+i.reference[y]-g[y]-i.floating[b],D=g[y]-i.reference[y],T=await(null==o.getOffsetParent?void 0:o.getOffsetParent(d));let k=T?T[E]:0;k&&await(null==o.isElement?void 0:o.isElement(T))||(k=l.floating[E]||i.floating[b]);const A=C/2-D/2,P=k/2-w[b]/2-1,O=a(f[_],P),R=a(f[S],P),M=O,I=k-w[b]-R,L=k/2-w[b]/2+A,F=u(M,L,I),B=!c.arrow&&null!=p(s)&&L!==F&&i.reference[b]/2-(L<M?O:R)-w[b]/2<0,W=B?L<M?L-M:L-I:0;return{[y]:g[y]+W,data:{[y]:F,centerOffset:L-F-W,...B&&{alignmentOffset:W}},reset:B}}}),Z=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:s,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=m(e,t),d={x:n,y:r},u=g(a),p=f(u);let v=d[p],x=d[u];const y=m(o,t),b="number"===typeof y?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const e="y"===p?"height":"width",t=s.reference[p]-s.floating[e]+b.mainAxis,n=s.reference[p]+s.reference[e]-b.mainAxis;v<t?v=t:v>n&&(v=n)}if(c){var j,w;const e="y"===p?"width":"height",t=["top","left"].includes(h(a)),n=s.reference[u]-s.floating[e]+(t&&(null==(j=i.offset)?void 0:j[u])||0)+(t?0:b.crossAxis),r=s.reference[u]+s.reference[e]+(t?0:(null==(w=i.offset)?void 0:w[u])||0)-(t?b.crossAxis:0);x<n?x=n:x>r&&(x=r)}return{[p]:v,[u]:x}}}},J=(e,t,n)=>{const r=new Map,a={platform:U,...n},s={...a.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:s=[],platform:i}=n,o=s.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:u}=N(c,r,l),m=r,h={},p=0;for(let f=0;f<o.length;f++){const{name:n,fn:s}=o[f],{x:v,y:g,data:x,reset:y}=await s({x:d,y:u,initialPlacement:r,placement:m,strategy:a,middlewareData:h,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=v?v:d,u=null!=g?g:u,h={...h,[n]:{...h[n],...x}},y&&p<=50&&(p++,"object"===typeof y&&(y.placement&&(m=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:a}):y.rects),({x:d,y:u}=N(c,m,l))),f=-1)}return{x:d,y:u,placement:m,strategy:a,middlewareData:h}})(e,t,{...a,platform:s})}},7459:(e,t,n)=>{"use strict";n.d(t,{d:()=>S});var r=n(5043),a=n(858),s=n(2814),i=n(1862),o=n(3642),l=n(3168),c=n(3124),d=n(7920),u=n(579),m="Switch",[h,p]=(0,i.A)(m),[f,v]=h(m),g=r.forwardRef(((e,t)=>{const{__scopeSwitch:n,name:i,checked:l,defaultChecked:c,required:m,disabled:h,value:p="on",onCheckedChange:v,form:g,...x}=e,[y,w]=r.useState(null),N=(0,s.s)(t,(e=>w(e))),_=r.useRef(!1),S=!y||(g||!!y.closest("form")),[E=!1,C]=(0,o.i)({prop:l,defaultProp:c,onChange:v});return(0,u.jsxs)(f,{scope:n,checked:E,disabled:h,children:[(0,u.jsx)(d.sG.button,{type:"button",role:"switch","aria-checked":E,"aria-required":m,"data-state":j(E),"data-disabled":h?"":void 0,disabled:h,value:p,...x,ref:N,onClick:(0,a.m)(e.onClick,(e=>{C((e=>!e)),S&&(_.current=e.isPropagationStopped(),_.current||e.stopPropagation())}))}),S&&(0,u.jsx)(b,{control:y,bubbles:!_.current,name:i,value:p,checked:E,required:m,disabled:h,form:g,style:{transform:"translateX(-100%)"}})]})}));g.displayName=m;var x="SwitchThumb",y=r.forwardRef(((e,t)=>{const{__scopeSwitch:n,...r}=e,a=v(x,n);return(0,u.jsx)(d.sG.span,{"data-state":j(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})}));y.displayName=x;var b=e=>{const{control:t,checked:n,bubbles:a=!0,...s}=e,i=r.useRef(null),o=(0,l.Z)(n),d=(0,c.X)(t);return r.useEffect((()=>{const e=i.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==n&&r){const t=new Event("click",{bubbles:a});r.call(e,n),e.dispatchEvent(t)}}),[o,n,a]),(0,u.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function j(e){return e?"checked":"unchecked"}var w=g,N=y,_=n(9766);const S=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,u.jsx)(w,{className:(0,_.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...r,ref:t,children:(0,u.jsx)(N,{className:(0,_.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}));S.displayName=w.displayName},7490:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=n(5043);function a(e){const t=r.useRef(e);return r.useEffect((()=>{t.current=e})),r.useMemo((()=>function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current?.(...n)}),[])}},7498:e=>{e.exports=function(e,t){return e>t}},7529:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,s=[];++n<r;){var i=e[n];t(i,n,e)&&(s[a++]=i)}return s}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},7615:(e,t,n)=>{var r=n(5575);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},7676:(e,t,n)=>{var r=n(8189),a=n(6311),s=n(9115),i=n(1069);e.exports=function(e){return function(t){t=i(t);var n=a(t)?s(t):void 0,o=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return o[e]()+l}}},7685:(e,t,n)=>{var r=n(7937)(n(6552),"DataView");e.exports=r},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},7784:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043);const a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(((e,t,n)=>Boolean(e)&&n.indexOf(e)===t)).join(" ")};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const i=(0,r.forwardRef)(((e,t)=>{let{color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...s,width:i,height:i,stroke:n,strokeWidth:l?24*Number(o)/Number(i):o,className:a("lucide",c),...m},[...u.map((e=>{let[t,n]=e;return(0,r.createElement)(t,n)})),...Array.isArray(d)?d:[d]])})),o=(e,t)=>{const n=(0,r.forwardRef)(((n,s)=>{let{className:o,...l}=n;return(0,r.createElement)(i,{ref:s,iconNode:t,className:a(`lucide-${c=e,c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,o),...l});var c}));return n.displayName=`${e}`,n}},7828:e=>{e.exports=function(){return[]}},7857:(e,t,n)=>{var r=n(3440),a=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7920:(e,t,n)=>{"use strict";n.d(t,{hO:()=>l,sG:()=>o});var r=n(5043),a=n(7950),s=n(6851),i=n(579),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const n=r.forwardRef(((e,n)=>{const{asChild:r,...a}=e,o=r?s.DX:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(o,{...a,ref:n})}));return n.displayName=`Primitive.${t}`,{...e,[t]:n}}),{});function l(e,t){e&&a.flushSync((()=>e.dispatchEvent(t)))}},7937:(e,t,n)=>{var r=n(6954),a=n(4657);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8087:(e,t,n)=>{"use strict";n.d(t,{$B:()=>d,Ay:()=>h,PK:()=>l,_Z:()=>c,nB:()=>o,xA:()=>i});var r=n(6756),a=n(9250),s=n(989);const i=(0,s.A)("babies/createBaby",(async e=>{try{const t=await fetch(`${a.B8}/api/babies`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to register baby")}return await t.json()}catch(t){throw t.message||"Failed to register baby"}}),{useGlobalLoader:!0}),o=(0,s.A)("babies/saveCertificate",(async e=>{try{const t=await fetch(`${a.B8}/api/babies/`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to register baby")}return await t.json()}catch(t){throw t.message||"Failed to register baby"}})),l=(0,s.A)("babies/getBabiesByAdmission",(async e=>{try{const t=await fetch(`${a.B8}/api/babies/admission/${e}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch baby records")}return await t.json()}catch(t){throw t.message||"Failed to fetch baby records"}})),c=(0,s.A)("babies/fetchAllBabies",(async()=>{try{const e=await fetch(`${a.B8}/api/babies/`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to fetch babies")}return await e.json()}catch(e){throw e.message||"Failed to fetch babies"}})),d=(0,s.A)("babies/searchByNumber",(async e=>{try{const t=await fetch(`${a.B8}/api/babies/search`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({searchNumber:e})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to search babies")}return await t.json()}catch(t){throw t.message||"Failed to search babies"}})),u=(0,r.Z0)({name:"babies",initialState:{babies:[],currentPatientBabies:[],searchResults:[],status:"idle",fetchCurrentPatientBabiesStatus:"idle",createBabyStatus:"idle",editBabyStatus:"idle",searchStatus:"idle",error:null},reducers:{resetBabyState:e=>{e.status="idle",e.error=null}},extraReducers:e=>{e.addCase(i.pending,(e=>{e.createBabyStatus="loading",e.error=null})).addCase(i.fulfilled,((e,t)=>{e.createBabyStatus="succeeded",e.babies.unshift(t.payload),e.currentPatientBabies.unshift(t.payload)})).addCase(i.rejected,((e,t)=>{e.createBabyStatus="failed",e.error=t.error.message})).addCase(o.pending,(e=>{e.editBabyStatus="loading",e.error=null})).addCase(o.fulfilled,((e,t)=>{e.editBabyStatus="succeeded";const n=e.babies.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.babies[n]=t.payload);const r=e.currentPatientBabies.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.currentPatientBabies[r]=t.payload)})).addCase(o.rejected,((e,t)=>{e.editBabyStatus="failed",e.error=t.error.message})).addCase(l.pending,(e=>{e.fetchCurrentPatientBabiesStatus="loading",e.error=null})).addCase(l.fulfilled,((e,t)=>{e.fetchCurrentPatientBabiesStatus="succeeded",e.currentPatientBabies=t.payload})).addCase(l.rejected,((e,t)=>{e.fetchCurrentPatientBabiesStatus="failed",e.error=t.error.message})).addCase(c.pending,(e=>{e.status="loading",e.error=null})).addCase(c.fulfilled,((e,t)=>{e.status="succeeded",e.babies=t.payload})).addCase(c.rejected,((e,t)=>{e.status="failed",e.error=t.error.message})).addCase(d.pending,(e=>{e.searchStatus="loading",e.error=null})).addCase(d.fulfilled,((e,t)=>{e.searchStatus="succeeded",e.searchResults=t.payload})).addCase(d.rejected,((e,t)=>{e.searchStatus="failed",e.error=t.error.message}))}}),{resetBabyState:m}=u.actions,h=u.reducer},8106:(e,t,n)=>{"use strict";n.d(t,{AM:()=>Y,hl:()=>Z,Wv:()=>X});var r=n(5043),a=n(858),s=n(2814),i=n(1862),o=n(1184),l=n(6590),c=n(276),d=n(4490),u=n(2043),m=n(3321),h=n(2894),p=n(7920),f=n(6851),v=n(3642),g=n(5754),x=n(1672),y=n(579),b="Popover",[j,w]=(0,i.A)(b,[u.Bk]),N=(0,u.Bk)(),[_,S]=j(b),E=e=>{const{__scopePopover:t,children:n,open:a,defaultOpen:s,onOpenChange:i,modal:o=!1}=e,l=N(t),c=r.useRef(null),[m,h]=r.useState(!1),[p=!1,f]=(0,v.i)({prop:a,defaultProp:s,onChange:i});return(0,y.jsx)(u.bL,{...l,children:(0,y.jsx)(_,{scope:t,contentId:(0,d.B)(),triggerRef:c,open:p,onOpenChange:f,onOpenToggle:r.useCallback((()=>f((e=>!e))),[f]),hasCustomAnchor:m,onCustomAnchorAdd:r.useCallback((()=>h(!0)),[]),onCustomAnchorRemove:r.useCallback((()=>h(!1)),[]),modal:o,children:n})})};E.displayName=b;var C="PopoverAnchor",D=r.forwardRef(((e,t)=>{const{__scopePopover:n,...a}=e,s=S(C,n),i=N(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return r.useEffect((()=>(o(),()=>l())),[o,l]),(0,y.jsx)(u.Mz,{...i,...a,ref:t})}));D.displayName=C;var T="PopoverTrigger",k=r.forwardRef(((e,t)=>{const{__scopePopover:n,...r}=e,i=S(T,n),o=N(n),l=(0,s.s)(t,i.triggerRef),c=(0,y.jsx)(p.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":z(i.open),...r,ref:l,onClick:(0,a.m)(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:(0,y.jsx)(u.Mz,{asChild:!0,...o,children:c})}));k.displayName=T;var A="PopoverPortal",[P,O]=j(A,{forceMount:void 0}),R=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,s=S(A,t);return(0,y.jsx)(P,{scope:t,forceMount:n,children:(0,y.jsx)(h.C,{present:n||s.open,children:(0,y.jsx)(m.Z,{asChild:!0,container:a,children:r})})})};R.displayName=A;var M="PopoverContent",I=r.forwardRef(((e,t)=>{const n=O(M,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,s=S(M,e.__scopePopover);return(0,y.jsx)(h.C,{present:r||s.open,children:s.modal?(0,y.jsx)(L,{...a,ref:t}):(0,y.jsx)(F,{...a,ref:t})})}));I.displayName=M;var L=r.forwardRef(((e,t)=>{const n=S(M,e.__scopePopover),i=r.useRef(null),o=(0,s.s)(t,i),l=r.useRef(!1);return r.useEffect((()=>{const e=i.current;if(e)return(0,g.Eq)(e)}),[]),(0,y.jsx)(x.A,{as:f.DX,allowPinchZoom:!0,children:(0,y.jsx)(B,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.m)(e.onCloseAutoFocus,(e=>{e.preventDefault(),l.current||n.triggerRef.current?.focus()})),onPointerDownOutside:(0,a.m)(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;l.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:(0,a.m)(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})})})),F=r.forwardRef(((e,t)=>{const n=S(M,e.__scopePopover),a=r.useRef(!1),s=r.useRef(!1);return(0,y.jsx)(B,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||n.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const r=t.target,i=n.triggerRef.current?.contains(r);i&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})})),B=r.forwardRef(((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:h,onInteractOutside:p,...f}=e,v=S(M,n),g=N(n);return(0,l.Oh)(),(0,y.jsx)(c.n,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:(0,y.jsx)(o.qW,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:p,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:h,onDismiss:()=>v.onOpenChange(!1),children:(0,y.jsx)(u.UC,{"data-state":z(v.open),role:"dialog",id:v.contentId,...g,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),W="PopoverClose",$=r.forwardRef(((e,t)=>{const{__scopePopover:n,...r}=e,s=S(W,n);return(0,y.jsx)(p.sG.button,{type:"button",...r,ref:t,onClick:(0,a.m)(e.onClick,(()=>s.onOpenChange(!1)))})}));$.displayName=W;var U=r.forwardRef(((e,t)=>{const{__scopePopover:n,...r}=e,a=N(n);return(0,y.jsx)(u.i3,{...a,...r,ref:t})}));function z(e){return e?"open":"closed"}U.displayName="PopoverArrow";var H=E,V=k,q=R,G=I,K=n(9766);const Y=H,X=V,Z=r.forwardRef(((e,t)=>{let{className:n,align:r="center",sideOffset:a=4,...s}=e;return(0,y.jsx)(q,{children:(0,y.jsx)(G,{ref:t,align:r,sideOffset:a,className:(0,K.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...s})})}));Z.displayName=G.displayName},8114:e=>{e.exports=function(e,t){return e.has(t)}},8134:(e,t,n)=>{"use strict";n.d(t,{GP:()=>R});var r=n(1669),a=n(849),s=n(8848),i=n(8621),o=n(2316);function l(e,t){const n=(0,o.a)(e,t?.in);return(0,s.m)(n,(0,i.D)(n))+1}var c=n(5385),d=n(1425),u=n(2750),m=n(9504);function h(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const p={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return h("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):h(n+1,2)},d:(e,t)=>h(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>h(e.getHours()%12||12,t.length),H:(e,t)=>h(e.getHours(),t.length),m:(e,t)=>h(e.getMinutes(),t.length),s:(e,t)=>h(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return h(Math.trunc(r*Math.pow(10,n-3)),t.length)}},f="midnight",v="noon",g="morning",x="afternoon",y="evening",b="night",j={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return p.y(e,t)},Y:function(e,t,n,r){const a=(0,m.h)(e,r),s=a>0?a:1-a;if("YY"===t){return h(s%100,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):h(s,t.length)},R:function(e,t){return h((0,d.p)(e),t.length)},u:function(e,t){return h(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return h(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return h(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return p.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return h(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=(0,u.N)(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):h(a,t.length)},I:function(e,t,n){const r=(0,c.s)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):h(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):p.d(e,t)},D:function(e,t,n){const r=l(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):h(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return h(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return h(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return h(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(a=12===r?v:0===r?f:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(a=r>=17?y:r>=12?x:r>=4?g:b,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return p.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):p.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):h(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):h(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):p.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):p.s(e,t)},S:function(e,t){return p.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return N(r);case"XXXX":case"XX":return _(r);default:return _(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return N(r);case"xxxx":case"xx":return _(r);default:return _(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+w(r,":");default:return"GMT"+_(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+w(r,":");default:return"GMT"+_(r,":")}},t:function(e,t,n){return h(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return h(+e,t.length)}};function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return 0===s?n+String(a):n+String(a)+t+h(s,2)}function N(e,t){if(e%60===0){return(e>0?"-":"+")+h(Math.abs(e)/60,2)}return _(e,t)}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+h(Math.trunc(r/60),2)+t+h(r%60,2)}var S=n(7099),E=n(4942),C=n(8521);function D(e){return!(!(0,C.$)(e)&&"number"!==typeof e||isNaN(+(0,o.a)(e)))}const T=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,k=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,A=/^'([^]*?)'?$/,P=/''/g,O=/[a-zA-Z]/;function R(e,t,n){const s=(0,a.q)(),i=n?.locale??s.locale??r.c,l=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,d=(0,o.a)(e,n?.in);if(!D(d))throw new RangeError("Invalid time value");let u=t.match(k).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,S.m[t])(e,i.formatLong)}return e})).join("").match(T).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:M(e)};if(j[t])return{isToken:!0,value:e};if(t.match(O))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));i.localize.preprocessor&&(u=i.localize.preprocessor(d,u));const m={firstWeekContainsDate:l,weekStartsOn:c,locale:i};return u.map((r=>{if(!r.isToken)return r.value;const a=r.value;(!n?.useAdditionalWeekYearTokens&&(0,E.xM)(a)||!n?.useAdditionalDayOfYearTokens&&(0,E.ef)(a))&&(0,E.Ss)(a,t,String(e));return(0,j[a[0]])(d,a,i.localize,m)})).join("")}function M(e){const t=e.match(A);return t?t[1].replace(P,"'"):e}},8145:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>DischargeSummary});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5043),react_router_dom__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(3216),react_redux__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(3003),_components_ui_card__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1140),_components_ui_input__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2264),_templates_dischargesummary__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(2698),_components_ui_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3390),_components_ui_textarea__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3416),_assets_Data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9250),_components_ui_label__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1981),_redux_slices_pharmacySlice__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(112),_components_ui_badge__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5949),lucide_react__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(614),lucide_react__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(9292),lucide_react__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(9855),lucide_react__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(781),lucide_react__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(5469),lucide_react__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(6210),lucide_react__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(8326),_TemplateLabReport__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5872),_redux_slices_patientSlice_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6195),_components_custom_MultiSelectInput__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(5962),_components_ui_select__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(8414),_redux_slices_templatesSlice__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(6638),_components_custom_registration_CustomSearchSuggestion__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(7368),react_to_print__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(3141),react_to_print__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(react_to_print__WEBPACK_IMPORTED_MODULE_15__),_components_custom_reports_DischargeSummaryPDF__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(961),_redux_slices_dischargeSlice__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(2191),_hooks_use_toast__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(5830),_components_ui_table__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(3340),_config_dischargeSummaryConfig__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(8901),_components_custom_FormCustomizer__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(7152),_redux_slices_babySlice__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(8087),_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(6604),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(579);const convertTo24Hour=(e,t)=>{if(!e)return"";let[n,r]=e.split(":");return n=parseInt(n),"PM"===t&&12!==n&&(n+=12),"AM"===t&&12===n&&(n=0),`${n.toString().padStart(2,"0")}:${r}`},LabReportTable=e=>{let{report:t}=e;return _jsxs(Table,{children:[_jsx(TableHeader,{children:_jsxs(TableRow,{children:[_jsx(TableHead,{children:"Test"}),_jsx(TableHead,{children:"Result"}),_jsx(TableHead,{children:"Unit"}),_jsx(TableHead,{children:"Normal Range"})]})}),_jsx(TableBody,{children:Object.entries(t).map((e=>{let[t,n]=e;return _jsxs(TableRow,{children:[_jsx(TableCell,{children:n.label}),_jsx(TableCell,{children:n.value}),_jsx(TableCell,{children:n.unit}),_jsx(TableCell,{children:n.normalRange})]},t)}))})]})},FormField=e=>{let{field:t,value:n,label:r,onChange:a,suggestions:s,extraProps:i={}}=e;const o=e=>{const n=e.map((e=>e.name)).join(", ");a({target:{name:t.id,value:n}})},l=e=>{a({target:{name:t.id,value:e}})};switch(t.type){case"text":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex items-center "+("half"===t.width?"sm:col-span-1":"sm:col-span-2"),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_label__WEBPACK_IMPORTED_MODULE_6__.J,{htmlFor:t.id,className:"w-24 font-bold",children:[(null===r||void 0===r?void 0:r.toUpperCase())||t.label,":"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{id:t.id,name:t.id,value:n,onChange:a,className:"h-8",...i})]});case"date":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_label__WEBPACK_IMPORTED_MODULE_6__.J,{htmlFor:t.id,className:"w-24 font-bold",children:[t.label,":"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{id:t.id,name:t.id,type:"date",value:n,onChange:a,className:"h-8",...i})]});case"textarea":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"py-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_6__.J,{htmlFor:t.id,children:t.label}),t.templates&&t.templates.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:t.templates.map(((e,t)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"relative group",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("button",{onClick:()=>{n===e.content?l(""):l(e.content)},className:"px-3 py-1 rounded-full text-sm font-medium transition-colors\n                      "+(n===e.content?"bg-primary text-primary-foreground":"bg-secondary hover:bg-secondary/80"),type:"button",children:e.name}),n!==e.content&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"absolute z-50 invisible group-hover:visible bg-popover text-popover-foreground p-3 rounded-lg shadow-lg min-w-[200px] max-w-[400px] mt-2 left-0 whitespace-pre-wrap text-sm border",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"font-semibold mb-1",children:"Template Preview:"}),e.content]})]},t)))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_4__.T,{id:t.id,name:t.id,value:n,onChange:a,className:"mt-1 min-h-[9rem] leading-tight",...i})]});case"time":{let e=n.split(" ");const s=n?e[0]:"";let o=n&&e[1]||"AM";1===e.length&&(o=(0,_assets_Data__WEBPACK_IMPORTED_MODULE_5__.IF)(s).split(" ")[1]);const l=s;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_label__WEBPACK_IMPORTED_MODULE_6__.J,{htmlFor:t.id,className:"w-24 font-bold",children:[(null===r||void 0===r?void 0:r.toUpperCase())||t.label,":"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{id:t.id,name:t.id,type:"time",value:(0,_assets_Data__WEBPACK_IMPORTED_MODULE_5__.IF)(l).split(" ")[0],onChange:e=>{const n=e.target.value;if(n){const e=(0,_assets_Data__WEBPACK_IMPORTED_MODULE_5__.IF)(n).split(" ");a({target:{name:t.id,value:`${e[0]} ${e[1]||o}`}})}},className:"h-8 w-32",...i}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.l6,{value:o,onValueChange:e=>{if(s){const n=convertTo24Hour(s,e),r=(0,_assets_Data__WEBPACK_IMPORTED_MODULE_5__.IF)(n).split(" ");a({target:{name:t.id,value:`${r[0]} ${e}`}})}},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.bq,{className:"w-20",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.yv,{placeholder:"AM/PM"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.eb,{value:"AM",children:"AM"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.eb,{value:"PM",children:"PM"})]})]})]})]})}case"multiselect":const e="string"===typeof n?n.split(",").map((e=>({name:e.trim()}))).filter((e=>e.name)):Array.isArray(n)?n.map((e=>"string"===typeof e?e.trim():e.name)).filter((e=>""!==(null===e||void 0===e?void 0:e.trim()))).map((e=>({name:e}))):[],c=Array.isArray(s)?s.map((e=>"string"===typeof e?{name:e}:e)):[];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_6__.J,{htmlFor:t.id,children:t.label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"mt-1 space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"flex flex-wrap gap-1",children:e.map(((n,r)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_badge__WEBPACK_IMPORTED_MODULE_8__.E,{variant:"primary",className:"flex items-center bg-blue-100 text-blue-800 px-2 py-1 text-sm rounded",children:[n.name,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_25__.A,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>{const n=e.filter(((e,t)=>t!==r));"diagnosis"===t.id?o(n):a({target:{name:t.id,value:n.map((e=>e.name)).join(", ")}})}})]},r)))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_custom_MultiSelectInput__WEBPACK_IMPORTED_MODULE_11__.A,{suggestions:c,selectedValues:e,setSelectedValues:e=>{"diagnosis"===t.id?o(e):a({target:{name:t.id,value:e.map((e=>e.name)).join(", ")}})},placeholder:`Select ${t.label.toLowerCase()}`,...i}),"ComorbidityHandling"===t.extraComponent&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.l6,{onValueChange:e=>{i.onComorbidityHandlingChange&&i.onComorbidityHandlingChange(e)},defaultValue:i.comorbidityHandling||"separate",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.bq,{className:"w-40",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.yv,{placeholder:"Handle"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.eb,{value:"separate",children:"Separate"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.eb,{value:"clinical_summary",children:"Clinical Summary"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.eb,{value:"diagnosis",children:"Diagnosis"})]})]})]})]});case"checkbox":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("input",{type:"checkbox",id:t.id,checked:n,onChange:e=>a({target:{name:t.id,value:e.target.checked}}),className:"h-4 w-4 rounded border-gray-300"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_6__.J,{htmlFor:t.id,children:t.label})]});case"babyTable":return i.showBabyDetails?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_6__.J,{htmlFor:t.id,children:t.label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(BabyTable,{value:n||[],onChange:e=>a({target:{name:t.id,value:e}})})]}):null;default:return null}},BabyTable=e=>{let{value:t=[],onChange:n}=e;const r=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.wA)(),{searchResults:a,searchStatus:s}=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>e.babies)),i=(e,r,a)=>{const s=t.map(((t,n)=>n===e?{...t,[r]:a}:t));n(s)};return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if("succeeded"===s&&a.length>0){const e=a[0],r=t.map((t=>t.number===e.birthCounter?{...t,sex:e.gender.toLowerCase(),weight:e.weight,date:e.dateOfBirth.split("T")[0],time:e.timeOfBirth,apgar:Object.values(e.apgarScore).join(",")}:t));n(r)}}),[a,s]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"space-y-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_23__.F,{className:"w-full border rounded-lg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"min-w-[800px]",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.XI,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.A0,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.Hj,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nd,{children:"Baby No."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nd,{children:"Sex"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nd,{children:"Weight (g)"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nd,{children:"Date"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nd,{children:"Time"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nd,{children:"APGAR Score"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nd,{children:"Action"})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.BF,{children:t.map(((e,a)=>{var s,o;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.Hj,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nA,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{type:"text",value:e.number,onChange:e=>i(a,"number",e.target.value),className:"flex-1 pr-10"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-transparent ",onClick:t=>{t.stopPropagation(),e.number&&r((0,_redux_slices_babySlice__WEBPACK_IMPORTED_MODULE_22__.$B)(e.number))},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_27__.A,{className:"h-4 w-4 text-muted-foreground cursor-pointer"})})})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nA,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.l6,{value:e.sex,onValueChange:e=>i(a,"sex",e),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.yv,{placeholder:"Sex"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.eb,{value:"male",children:"Male"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.eb,{value:"female",children:"Female"})]})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nA,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{type:"number",step:"0.01",value:e.weight,onChange:e=>i(a,"weight",e.target.value)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nA,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{type:"date",value:e.date,onChange:e=>i(a,"date",e.target.value)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nA,{className:"flex gap-2 items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{type:"time",value:(null===(s=e.time)||void 0===s?void 0:s.split(" ")[0])||"",onChange:e=>((e,t)=>{let[n,r]=t.split(":");n=parseInt(n),0===n&&(n=12),n>12&&(n-=12);const a=n>=12?"PM":"AM",s=`${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")} ${a}`;i(e,"time",s)})(a,e.target.value),className:"w-24"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.l6,{value:(null===(o=e.time)||void 0===o?void 0:o.split(" ")[1])||"AM",onValueChange:t=>{var n;const r=(null===(n=e.time)||void 0===n?void 0:n.split(" ")[0])||"";i(a,"time",`${r} ${t}`)},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.bq,{className:"w-20",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.yv,{placeholder:"AM/PM"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.gC,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.eb,{value:"AM",children:"AM"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_12__.eb,{value:"PM",children:"PM"})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nA,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{type:"text",value:e.apgar,onChange:e=>i(a,"apgar",e.target.value)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_table__WEBPACK_IMPORTED_MODULE_19__.nA,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{variant:"destructive",size:"icon",onClick:()=>(e=>{const r=t.filter(((t,n)=>n!==e)).map(((e,t)=>({...e,number:t+1})));n(r)})(a),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_28__.A,{className:"h-4 w-4"})})})]},a)}))})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_23__.$,{orientation:"horizontal"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{type:"button",variant:"outline",onClick:()=>{n([...t,{number:"",sex:"",weight:"",date:"",time:"",apgar:""}])},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_29__.A,{className:"h-4 w-4 mr-2"})," Add Baby"]})]})};function DischargeSummary(){var _location$state,_location$state2,_location$state5;const{patientId:patientId}=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_30__.g)(),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.wA)(),navigate=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_30__.Zp)(),location=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_30__.zy)(),[patient,setPatient]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),ignoreList=(null===(_location$state=location.state)||void 0===_location$state?void 0:_location$state.ignoreList)||!1,dischargeData=(null===(_location$state2=location.state)||void 0===_location$state2?void 0:_location$state2.dischargeData)||null,[hasDischarged,setHasDischarged]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),dischargeSummaryTemplates=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>e.templates.dischargeSummaryTemplateArray)),[selectedTemplateDischargeSummary,setSelectedTemplateDischargeSummary]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(dischargeSummaryTemplates[0]||{name:"Template 1",value:_templates_dischargesummary__WEBPACK_IMPORTED_MODULE_31__.P}),savedConfig=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>e.templates.dischargeFormTemplateArray)),[formConfig,setFormConfig]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((()=>{var e,t,n;const r=(0,_config_dischargeSummaryConfig__WEBPACK_IMPORTED_MODULE_20__.xX)();return(null!==(e=location.state)&&void 0!==e&&null!==(t=e.selectedTemplate)&&void 0!==t&&t.value||null!==(n=location.state)&&void 0!==n&&n.selectedTemplate)&&(location.state.selectedTemplate.value||location.state.selectedTemplate)||r})),{diagnosisTemplate:diagnosisTemplate=[],comorbidities:comorbidities=[],medicinelist:medicinelist=[]}=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>e.templates)),patientFromStore=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>e.patients.patientlist.find((e=>e._id===patientId)))),labTestsTemplate=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>e.templates.labTestsTemplate)),allLabTests=[...(null===labTestsTemplate||void 0===labTestsTemplate?void 0:labTestsTemplate.map((e=>({name:e.name,isTemplate:!0}))))||[]],initialFormData={admissionDate:"",dateDischarged:"",bookingTime:"",timeDischarged:"",diagnosis:"",clinicalSummary:"",treatment:"",conditionOnAdmission:"",conditionOnDischarge:"",comorbidityHandling:"separate",vitals:{admission:{bloodPressure:"",heartRate:"",temperature:"",oxygenSaturation:"",respiratoryRate:""},discharge:{bloodPressure:"",heartRate:"",temperature:"",oxygenSaturation:"",respiratoryRate:""}},investigations:[{name:"",category:"",isIncluded:!0}],medicineAdvice:[{name:"",dosage:"",duration:""}],notes:"",comorbidities:[{name:""}],hasBabyDetails:!1,babies:[]},[formData,setFormData]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialFormData),getAllFieldIds=e=>{const t=new Set;return e.sections.forEach((e=>{e.fields.forEach((e=>{t.add(e.id)}))})),t},mergeDataWithFormFields=(e,t)=>{var n,r,a;const s=getAllFieldIds(t),i={...initialFormData},o=["admissionDate","dateDischarged","bookingTime","timeDischarged","diagnosis","clinicalSummary","treatment","conditionOnAdmission","conditionOnDischarge","notes","comorbidities"];return o.forEach((t=>{void 0!==(null===e||void 0===e?void 0:e[t])&&(i[t]=e[t])})),(null===e||void 0===e||null===(n=e.medicineAdvice)||void 0===n?void 0:n.length)>0&&(i.medicineAdvice=e.medicineAdvice.map((e=>({name:e.name||"",dosage:e.dosage||"",duration:e.duration||""})))),(null===e||void 0===e||null===(r=e.investigations)||void 0===r?void 0:r.length)>0&&(i.investigations=e.investigations.map((e=>({name:e.name||"",category:e.category||"",report:e.report||null,date:e.date||null})))),(null===e||void 0===e||null===(a=e.comorbidities)||void 0===a?void 0:a.length)>0&&(i.comorbidities=e.comorbidities.map((e=>"string"===typeof e?{name:e}:e))),null!==e&&void 0!==e&&e.vitals&&(i.vitals={admission:{...initialFormData.vitals.admission,...e.vitals.admission||{}},discharge:{...initialFormData.vitals.discharge,...e.vitals.discharge||{}}}),s.forEach((t=>{const n=t.includes(".")?t.split(".").reduce(((e,t)=>null===e||void 0===e?void 0:e[t]),e):null===e||void 0===e?void 0:e[t];if(void 0!==n&&!o.includes(t))if(t.includes(".")){const e=t.split(".");let r=i;e.forEach(((t,a)=>{a===e.length-1?r[t]=n:(r[t]=r[t]||{},r=r[t])}))}else i[t]=n})),i};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{(async()=>{if(!hasDischarged)if(patientFromStore||dischargeData){if(dischargeData){var e,t,n,r,a,s,i,o;const{labReport:l,...c}=dischargeData;if(setPatient(c),dischargeData.formConfig||formConfig){const e=mergeDataWithFormFields(dischargeData.dischargeData||dischargeData,dischargeData.formConfig||formConfig);setFormData(e)}setPatientInfo({name:dischargeData.patientName||(null===(e=dischargeData.patient)||void 0===e?void 0:e.name)||"",age:(null===(t=dischargeData.patient)||void 0===t?void 0:t.age)||"",gender:(null===(n=dischargeData.patient)||void 0===n?void 0:n.gender)||"",contactNumber:dischargeData.contactNumber||(null===(r=dischargeData.patient)||void 0===r?void 0:r.contactNumber)||"",address:(null===(a=dischargeData.patient)||void 0===a?void 0:a.address)||"",roomNumber:(null===(s=dischargeData.assignedRoom)||void 0===s?void 0:s.roomNumber)||"",registrationNumber:dischargeData.registrationNumber||"",ipdNumber:dischargeData.ipdNumber||"",relation:dischargeData.relation?null===(i=dischargeData.relation)||void 0===i?void 0:i.toLowerCase():"",...dischargeData.relation?{[null===(o=dischargeData.relation)||void 0===o?void 0:o.toLowerCase()]:dischargeData.guardianName||""}:{}})}else if(!ignoreList){const{labReport:e,...t}=patientFromStore;setPatient(patientFromStore)}}else try{if(patientId){const e=await dispatch((0,_redux_slices_patientSlice_js__WEBPACK_IMPORTED_MODULE_10__.Al)({id:patientId,type:"IPD"})).unwrap(),{labReport:t,...n}=e;if(setPatient(n),e.dischargeData&&e.formConfig){const t=mergeDataWithFormFields(e.dischargeData,e.formConfig);setFormData(t),setFormConfig(e.formConfig)}}}catch(l){console.error("Error fetching patient details:",l)}})()}),[dispatch,patientId,patientFromStore,null===(_location$state5=location.state)||void 0===_location$state5?void 0:_location$state5.patient,dischargeData,ignoreList,formConfig,hasDischarged]);const medicines=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>e.pharmacy.items)),itemsStatus=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>e.pharmacy.itemsStatus)),hospital=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>e.hospital.hospitalInfo)),templateStatus=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>e.templates.status));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{"idle"===itemsStatus&&dispatch((0,_redux_slices_pharmacySlice__WEBPACK_IMPORTED_MODULE_7__.LN)())}),[dispatch,itemsStatus]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{"idle"===templateStatus&&dispatch((0,_redux_slices_templatesSlice__WEBPACK_IMPORTED_MODULE_13__.QK)())}),[dispatch,templateStatus]);const[selectedTemplate,setSelectedTemplate]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),[isLabReportOpen,setIsLabReportOpen]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[selectedInvestigation,setSelectedInvestigation]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),[patientInfo,setPatientInfo]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({name:"",age:"",gender:"",contactNumber:"",address:"",roomNumber:"",registrationNumber:"",ipdNumber:""});(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{var e,t,n,r,a,s,i,o;patient&&!hasDischarged&&(setFormData((e=>{var t,n,r,a,s,i,o,l,c,d,u,m,h,p,f,v,g,x,y,b,j,w,N;return{...e,admissionDate:patient.bookingDate?new Date(patient.bookingDate).toISOString().split("T")[0]:"",dateDischarged:patient.dateDischarged?new Date(patient.dateDischarged).toISOString().split("T")[0]:"",diagnosis:Array.isArray(patient.diagnosis)?patient.diagnosis.join(", "):patient.diagnosis||"",clinicalSummary:patient.clinicalSummary||"",treatment:patient.treatment||"",conditionOnAdmission:patient.conditionOnAdmission||"",conditionOnDischarge:patient.conditionOnDischarge||"",vitals:{admission:{bloodPressure:(null===(t=patient.vitals)||void 0===t||null===(n=t.admission)||void 0===n?void 0:n.bloodPressure)||"",heartRate:(null===(r=patient.vitals)||void 0===r||null===(a=r.admission)||void 0===a?void 0:a.heartRate)||"",temperature:(null===(s=patient.vitals)||void 0===s||null===(i=s.admission)||void 0===i?void 0:i.temperature)||"",oxygenSaturation:(null===(o=patient.vitals)||void 0===o||null===(l=o.admission)||void 0===l?void 0:l.oxygenSaturation)||"",respiratoryRate:(null===(c=patient.vitals)||void 0===c||null===(d=c.admission)||void 0===d?void 0:d.respiratoryRate)||""},discharge:{bloodPressure:(null===(u=patient.vitals)||void 0===u||null===(m=u.discharge)||void 0===m?void 0:m.bloodPressure)||"",heartRate:(null===(h=patient.vitals)||void 0===h||null===(p=h.discharge)||void 0===p?void 0:p.heartRate)||"",temperature:(null===(f=patient.vitals)||void 0===f||null===(v=f.discharge)||void 0===v?void 0:v.temperature)||"",oxygenSaturation:(null===(g=patient.vitals)||void 0===g||null===(x=g.discharge)||void 0===x?void 0:x.oxygenSaturation)||"",respiratoryRate:(null===(y=patient.vitals)||void 0===y||null===(b=y.discharge)||void 0===b?void 0:b.respiratoryRate)||""}},investigations:(null===(j=patient.labReports)||void 0===j?void 0:j.length)>0?patient.labReports.map((e=>({...e,isIncluded:!0}))):[{name:"",category:"",isIncluded:!0}],medicineAdvice:patient.medicineAdvice||patient.medicineAdvice||(null===(w=patient.dischargeData)||void 0===w?void 0:w.medicineAdvice)||[{name:"",dosage:"",duration:""}],notes:patient.notes||"",comorbidities:(null===(N=patient.comorbidities)||void 0===N?void 0:N.map((e=>({name:e}))))||[{name:""}]}})),setPatientInfo({name:(null===(e=patient.patient)||void 0===e?void 0:e.name)||patient.name||"",age:(null===(t=patient.patient)||void 0===t?void 0:t.age)||patient.age||"",gender:(null===(n=patient.patient)||void 0===n?void 0:n.gender)||patient.gender||"",relation:patient.relation?null===(r=patient.relation)||void 0===r?void 0:r.toLowerCase():"",...patient.relation?{[null===(a=patient.relation)||void 0===a?void 0:a.toLowerCase()]:patient.guardianName||""}:{},contactNumber:(null===(s=patient.patient)||void 0===s?void 0:s.contactNumber)||patient.contactNumber||"",address:(null===(i=patient.patient)||void 0===i?void 0:i.address)||patient.address||"",roomNumber:(null===(o=patient.assignedRoom)||void 0===o?void 0:o.roomNumber)||patient.roomNumber||"",registrationNumber:patient.registrationNumber||patient.registrationNumber||"",ipdNumber:patient.ipdNumber||""}))}),[patient,hasDischarged]);const[selectedReport,setSelectedReport]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),handlePatientInfoChange=e=>{const{name:t,value:n}=e.target;setPatientInfo((e=>({...e,[t]:n})))},handleInputChange=e=>{const{name:t,value:n}=e.target;setFormData((e=>({...e,[t]:n})))},handleDateChange=(e,t)=>{setFormData((n=>({...n,[e]:t})))},handleInvestigationChange=(e,t)=>{const n=[...formData.investigations];n[e]={name:t.name,category:t.category||"",isIncluded:!0},setFormData((e=>({...e,investigations:n})))},handleAddInvestigation=()=>{setFormData((e=>({...e,investigations:[...e.investigations,{name:"",category:"",isIncluded:!0}]})))},toggleInvestigation=e=>{setFormData((t=>({...t,investigations:t.investigations.map(((t,n)=>n===e?{...t,isIncluded:!t.isIncluded}:t))})))},handleRemoveInvestigation=e=>{setFormData((t=>({...t,investigations:t.investigations.filter(((t,n)=>n!==e))})))},handleComorbiditiesChange=e=>{setFormData((t=>({...t,comorbidities:e})))},handleRemoveSelected=e=>{setFormData((t=>({...t,comorbidities:t.comorbidities.filter((t=>t.name!==e))})))},handleComorbidityHandlingChange=e=>{setFormData((t=>({...t,comorbidityHandling:e})))},{toast:toast}=(0,_hooks_use_toast__WEBPACK_IMPORTED_MODULE_18__.dj)(),{status:dischargeStatus,savingStatus:savingStatus}=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>e.discharge)),[isPrintDialogOpen,setIsPrintDialogOpen]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),userPermissions=(0,react_redux__WEBPACK_IMPORTED_MODULE_26__.d4)((e=>{var t,n;return(null===(t=e.user)||void 0===t||null===(n=t.userData)||void 0===n?void 0:n.permissions)||[]})),hasDischargePermission=userPermissions.includes("can_discharge"),handleSubmit=async e=>{if(e.preventDefault(),!hasDischargePermission)return void toast({title:"Permission Denied",description:"You don't have permission to discharge patients.",variant:"destructive"});const t={patientId:patientId||patient._id,...formData,formConfig:formConfig,comorbidities:(()=>{const e=formData.comorbidities;return"string"===typeof e?e.split(",").map((e=>e.trim())):Array.isArray(e)?e.map((e=>"string"===typeof e?e.trim():e.name)).filter((e=>""!==(null===e||void 0===e?void 0:e.trim()))):[]})(),medicineAdvice:formData.medicineAdvice.filter((e=>""!==e.name.trim())).map((e=>({name:e.name,duration:e.duration,dosage:e.dosage}))),investigations:formData.investigations.filter((e=>""!==e.name.trim()&&e.isIncluded)).map((e=>({name:e.name,category:e.category,report:e.report,date:e.date||(new Date).toISOString()})))};try{await dispatch((0,_redux_slices_dischargeSlice__WEBPACK_IMPORTED_MODULE_17__.Ou)(t)).unwrap(),setHasDischarged(!0),toast({title:"Success",description:"Patient discharged successfully",variant:"success"}),handlePrint()}catch(n){toast({title:"Error",description:"Failed to discharge patient. Please try again.",variant:"destructive"})}},handleSave=async e=>{e.preventDefault();const t={patientId:patientId||patient._id,...formData,formConfig:formConfig,comorbidities:(()=>{const e=formData.comorbidities;return"string"===typeof e?e.split(",").map((e=>e.trim())):Array.isArray(e)?e.map((e=>"string"===typeof e?e.trim():e.name)).filter((e=>""!==(null===e||void 0===e?void 0:e.trim()))):[]})(),medicineAdvice:formData.medicineAdvice.filter((e=>""!==e.name.trim())).map((e=>({name:e.name,duration:e.duration,dosage:e.dosage}))),investigations:formData.investigations.filter((e=>""!==e.name.trim()&&e.isIncluded)).map((e=>({name:e.name,category:e.category,report:e.report,date:e.date||(new Date).toISOString()})))};try{await dispatch((0,_redux_slices_dischargeSlice__WEBPACK_IMPORTED_MODULE_17__.mo)(t)).unwrap(),toast({title:"Success",description:"Discharge data saved successfully",variant:"success"})}catch(n){toast({title:"Error",description:"Failed to save discharge data. Please try again.",variant:"destructive"})}},handleTestSelect=e=>{setFormData((t=>({...t,selectedTest:e.name,selectedCategory:e.category})))},handleOpenLabReport=e=>{const t=null===labTestsTemplate||void 0===labTestsTemplate?void 0:labTestsTemplate.find((t=>t.name.toLowerCase()===e.name.toLowerCase()));setSelectedTemplate(t||null),setSelectedInvestigation(e),setIsLabReportOpen(!0)},handleCloseLabReport=()=>{setSelectedInvestigation(null),setSelectedTemplate(null),setIsLabReportOpen(!1)},handleSaveLabReport=e=>{const t=formData.investigations.map((t=>t.name.toLowerCase()===selectedInvestigation.name.toLowerCase()?{...t,name:e.name,report:e.report,date:e.date}:t));t.some((t=>t.name.toLowerCase()===e.name.toLowerCase()))||t.push({name:e.name,report:e.report,date:e.date}),setFormData((e=>({...e,investigations:t}))),setSelectedInvestigation({name:e.name,report:e.report,date:e.date}),toast({title:"Success",description:"Lab report saved successfully",variant:"success"}),handleCloseLabReport()},handleMedicineAdviceChange=(e,t,n,r)=>{setFormData((a=>({...a,[r]:a[r].map(((r,a)=>a===e?{...r,[t]:n}:r))})))},handleMedicineAdviceSuggestionSelect=(e,t,n)=>{handleMedicineAdviceChange(e,"name",t.name,n)},addMedicineAdvice=e=>{setFormData((t=>({...t,[e]:[...t[e]||[],{name:"",dosage:"",duration:""}]})))},removeMedicineAdvice=(e,t)=>{setFormData((n=>{var r;return{...n,[t]:null===(r=n[t])||void 0===r?void 0:r.filter(((t,n)=>n!==e))}}))},handleVitalsChange=(e,t,n)=>{setFormData((r=>({...r,vitals:{...r.vitals,[e]:{...r.vitals[e],[t]:n}}})))},renderVitalsInputs=e=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("span",{className:"w-24",children:"BP:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{placeholder:"mmHg",value:formData.vitals[e].bloodPressure,onChange:t=>handleVitalsChange(e,"bloodPressure",t.target.value),className:"h-8"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("span",{className:"w-24",children:"HR:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{placeholder:"bpm",type:"number",value:formData.vitals[e].heartRate,onChange:t=>handleVitalsChange(e,"heartRate",t.target.value),className:"h-8"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("span",{className:"w-24",children:"Temp:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{placeholder:"\xb0C",type:"number",value:formData.vitals[e].temperature,onChange:t=>handleVitalsChange(e,"temperature",t.target.value),className:"h-8"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("span",{className:"w-24",children:"SpO2:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{placeholder:"%",type:"number",value:formData.vitals[e].oxygenSaturation,onChange:t=>handleVitalsChange(e,"oxygenSaturation",t.target.value),className:"h-8"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("span",{className:"w-24",children:"RR:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{placeholder:"breaths/min",type:"number",value:formData.vitals[e].respiratoryRate,onChange:t=>handleVitalsChange(e,"respiratoryRate",t.target.value),className:"h-8"})]})]}),[customDiagnosis,setCustomDiagnosis]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[customDiagnosesList,setCustomDiagnosesList]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),handleAddDiagnosis=e=>{if(!e.trim())return;const t=formData.diagnosis?formData.diagnosis.split(", "):[];diagnosisTemplate.includes(e)||customDiagnosesList.includes(e)||setCustomDiagnosesList((t=>[...t,e])),t.includes(e)?setFormData((t=>({...t,diagnosis:t.diagnosis.split(", ").filter((t=>t!==e)).join(", ")}))):setFormData((t=>({...t,diagnosis:t.diagnosis?`${t.diagnosis}, ${e}`:e}))),setCustomDiagnosis("")},getMatchingDiagnoses=e=>e?diagnosisTemplate.filter((t=>t.toLowerCase().startsWith(e.toLowerCase()))):[],handleDiagnosisChange=e=>{const t=e.map((e=>e.name)).join(", ");setFormData((e=>({...e,diagnosis:t})))},handleRemoveDiagnosis=e=>{const t=formData.diagnosis.split(", ").filter((t=>t!==e)).join(", ");setFormData((e=>({...e,diagnosis:t})))},renderTextArea=(e,t)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_6__.J,{htmlFor:e,children:t}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_4__.T,{id:e,name:e,value:formData[e],onChange:handleInputChange,className:"mt-1 min-h-[6rem] leading-tight"})]}),handleBack=()=>{navigate(-1)},componentRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),handlePrint=(0,react_to_print__WEBPACK_IMPORTED_MODULE_15__.useReactToPrint)({content:()=>componentRef.current,pageStyle:"\n      @media print {\n        @page {\n          size: A4;\n           margin:20mm;\n          \n        }\n        body {\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-only {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n        .print-content {\n          position: relative;\n          min-height: 100vh;\n         padding:20px;\n        }\n      }\n    "}),[showCustomizer,setShowCustomizer]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[customConfig,setCustomConfig]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),handleCustomizeForm=()=>{setShowCustomizer(!0)},handleSaveCustomConfig=async e=>{try{await dispatch((0,_redux_slices_templatesSlice__WEBPACK_IMPORTED_MODULE_13__.ub)({dischargeFormTemplateArray:[...(savedConfig||[]).filter((t=>t.name!==e.name)),e]})).unwrap(),setFormConfig(e.value),setShowCustomizer(!1),toast({title:"Success",description:"Form template saved successfully",variant:"success"})}catch(t){toast({title:"Error",description:"Failed to save form template",variant:"destructive"})}},handleCancelCustomize=()=>{setShowCustomizer(!1)};return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(formConfig){const e=formConfig.sections.find((e=>"patientInfo"===e.id));if(e){const t={};e.fields.forEach((e=>{t[e.id]=patientInfo[e.id]||""})),setPatientInfo((e=>({...e,...t})))}}}),[formConfig]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"container mx-auto py-2 sm:py-4 px-2 sm:px-4 lg:px-6 max-w-7xl",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_card__WEBPACK_IMPORTED_MODULE_1__.Zp,{className:"w-full shadow-lg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_card__WEBPACK_IMPORTED_MODULE_1__.aR,{className:"bg-primary text-primary-foreground py-2 sm:py-3",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"flex items-center justify-between flex-wrap sm:flex-nowrap gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{variant:"ghost",size:"icon",onClick:handleBack,className:"h-8 w-8 text-primary-foreground hover:text-primary hover:bg-primary-foreground",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_32__.A,{className:"h-4 w-4"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_card__WEBPACK_IMPORTED_MODULE_1__.ZB,{className:"text-lg sm:text-xl",children:"Discharge Summary"})]})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_card__WEBPACK_IMPORTED_MODULE_1__.Wu,{className:"p-2 sm:p-4 md:p-6",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[formConfig.sections.map((section=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:" bg-white rounded-lg p-2 sm:p-4",children:[section.title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("h2",{className:"text-base sm:text-lg font-semibold mb-2 text-primary",children:section.title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:" gap-2 sm:gap-4 text-sm sm:text-base",children:section.fields.map((field=>{if("vitals"===field.type)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:" py-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_6__.J,{htmlFor:field.id,children:field.label}),renderVitalsInputs(field.prefix)]},field.id);if("investigations"===field.type)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:" py-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_6__.J,{htmlFor:field.id,children:field.label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"space-y-2 mt-2",children:[formData.investigations.map(((e,t)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-2 mb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"sm:col-span-3",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_custom_registration_CustomSearchSuggestion__WEBPACK_IMPORTED_MODULE_14__.P,{suggestions:allLabTests,placeholder:"Select investigation",value:e.name,setValue:e=>handleInvestigationChange(t,{name:e}),onSuggestionSelect:e=>handleInvestigationChange(t,e)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{type:"button",variant:e.isIncluded?"default":"outline",size:"icon",onClick:()=>toggleInvestigation(t),"aria-label":"Toggle Investigation",disabled:!e.name,children:e.isIncluded?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_33__.A,{className:"h-4 w-4 text-white-500",strokeWidth:4}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_25__.A,{className:"h-4 w-4 text-red-500 font-bold",strokeWidth:4})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>handleOpenLabReport(e),"aria-label":"Open Lab Report",disabled:!e.name,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_34__.A,{className:"h-5 w-5"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{type:"button",variant:"destructive",size:"icon",onClick:()=>handleRemoveInvestigation(t),disabled:1===formData.investigations.length,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_28__.A,{className:"h-4 w-4"})})]})]},t))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{onClick:handleAddInvestigation,variant:"outline",className:"mt-2 font-semibold",type:"button",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_29__.A,{className:"h-4 w-4 mr-2"})," Add Investigation"]})]})]},field.id);var _formData$field$id;if("medicineAdvice"===field.type)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:" py-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_6__.J,{htmlFor:field.id,children:field.label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"space-y-2 mt-2",children:[null===(_formData$field$id=formData[field.id])||void 0===_formData$field$id?void 0:_formData$field$id.map(((e,t)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-2 mb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_custom_registration_CustomSearchSuggestion__WEBPACK_IMPORTED_MODULE_14__.P,{suggestions:null===medicinelist||void 0===medicinelist?void 0:medicinelist.map((e=>({name:e}))),placeholder:"Select medicine/advice",value:e.name,setValue:e=>handleMedicineAdviceChange(t,"name",e,field.id),onSuggestionSelect:e=>handleMedicineAdviceSuggestionSelect(t,e,field.id)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{type:"text",placeholder:"Dosage",value:e.dosage,onChange:e=>handleMedicineAdviceChange(t,"dosage",e.target.value,field.id),className:"font-medium",onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{type:"text",placeholder:"Duration",value:e.duration,onChange:e=>handleMedicineAdviceChange(t,"duration",e.target.value,field.id),className:"font-medium",onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{type:"button",variant:"destructive",size:"icon",onClick:()=>removeMedicineAdvice(t,field.id),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_28__.A,{className:"h-4 w-4"})})]},t))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{type:"button",onClick:()=>addMedicineAdvice(field.id),variant:"outline",className:"mt-2 font-semibold",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_29__.A,{className:"h-4 w-4 mr-2"})," Add Medicine/Advice"]})]})]},field.id);let value,onChange,label;var _patientInfo$relation;"patientInfo"===section.id?"admissionDate"===field.id||"dateDischarged"===field.id||"timeDischarged"===field.id||"admittedTime"===field.id||"bookingTime"===field.id?(value=("admittedTime"===field.id?formData.admittedTime||formData.bookingTime:formData[field.id])||"",onChange=handleInputChange):(value=patientInfo[field.id]||(null===formData||void 0===formData?void 0:formData[field.id])||"",field.id===(null===patientInfo||void 0===patientInfo||null===(_patientInfo$relation=patientInfo.relation)||void 0===_patientInfo$relation?void 0:_patientInfo$relation.toLowerCase())&&(value=patientInfo[patientInfo.relation.toLowerCase()]||"",label=patientInfo.relation),onChange=handlePatientInfoChange):(value=field.id.includes(".")?field.id.split(".").reduce(((e,t)=>null===e||void 0===e?void 0:e[t]),formData):formData[field.id],onChange=e=>{if("multiselect"===field.type){const t=Array.isArray(e)?e.map((e=>e.name)).join(", "):e.target.value;handleInputChange({target:{name:field.id,value:t}})}else handleInputChange(e)});let suggestions=[];if(field.suggestions)switch(field.suggestions){case"diagnosisTemplate":suggestions=diagnosisTemplate;break;case"comorbidities":suggestions=comorbidities;break;case"medicinelist":suggestions=medicinelist;break;default:try{suggestions=eval(field.suggestions)||[]}catch(e){console.error("Error evaluating suggestions:",e)}}const extraProps={...field.extraProps,onComorbidityHandlingChange:handleComorbidityHandlingChange,comorbidityHandling:formData.comorbidityHandling,showBabyDetails:!field.dependsOn||formData[field.dependsOn]};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(FormField,{field:field,value:value,label:label,onChange:onChange,suggestions:suggestions,extraProps:extraProps},field.id)}))})]},section.id))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end mt-4 space-y-2 sm:space-y-0 sm:space-x-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{type:"button",variant:"outline",onClick:handlePrint,className:"w-full sm:w-auto text-sm sm:text-base py-2 px-4",children:"Print"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{type:"button",onClick:handleSave,variant:"outline",disabled:"loading"===savingStatus||!patientId,className:"w-full sm:w-auto text-sm sm:text-base py-2 px-4",children:"loading"===savingStatus?"Saving...":"Save"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{type:"button",onClick:handleSubmit,disabled:"loading"===dischargeStatus||!patientId||!hasDischargePermission,className:"w-full sm:w-auto text-sm sm:text-base py-2 px-4",children:hasDischargePermission?"loading"===dischargeStatus?"Discharging...":"Discharge":"No Permission to Discharge"})]})]})})]}),showCustomizer&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_custom_FormCustomizer__WEBPACK_IMPORTED_MODULE_21__.A,{config:_config_dischargeSummaryConfig__WEBPACK_IMPORTED_MODULE_20__.wr,enabledFields:formConfig,onSave:handleSaveCustomConfig,onCancel:handleCancelCustomize})})}),isLabReportOpen&&selectedInvestigation&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-2 sm:p-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full sm:w-11/12 md:w-3/4 lg:w-2/3 p-3 sm:p-4 overflow-y-auto max-h-[90vh]",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("div",{className:"flex justify-between items-center mb-2 sm:mb-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsxs)("h2",{className:"text-base sm:text-lg font-semibold",children:["Lab Report: ",selectedInvestigation.name]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{onClick:handleCloseLabReport,variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-10 sm:w-10",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_25__.A,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),selectedTemplate?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_TemplateLabReport__WEBPACK_IMPORTED_MODULE_9__.A,{template:selectedTemplate,patientData:patient,onSave:handleSaveLabReport,onClose:e=>{e?handleSaveLabReport(e):handleCloseLabReport()},component:"DischargeSummary",searchWhere:"ipd"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("h1",{children:"No Template Found"})})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)("div",{style:{display:"none"},className:"print-content",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_24__.jsx)(_components_custom_reports_DischargeSummaryPDF__WEBPACK_IMPORTED_MODULE_16__.A,{ref:componentRef,formData:{...formData,admittedTime:formData.admittedTime||(0,_assets_Data__WEBPACK_IMPORTED_MODULE_5__.IF)(formData.bookingTime),investigations:formData.investigations.filter((e=>""!==e.name.trim()&&e.report&&e.isIncluded)).map((e=>({name:e.name,report:e.report,date:e.date||(new Date).toISOString()}))),comorbidities:(()=>{const e=formData.comorbidities;return"string"===typeof e?e.split(",").map((e=>e.trim())):Array.isArray(e)?e.map((e=>"string"===typeof e?e.trim():e.name)).filter((e=>""!==e.trim())):[]})()},formConfig:formConfig,patient:patientInfo,hospital:hospital,templateString:null===selectedTemplateDischargeSummary||void 0===selectedTemplateDischargeSummary?void 0:selectedTemplateDischargeSummary.value})})]})}},8182:(e,t,n)=>{var r=n(2070),a=n(5713),s=n(2074),i=r&&1/s(new r([,-0]))[1]==1/0?function(e){return new r(e)}:a;e.exports=i},8189:(e,t,n)=>{var r=n(3871);e.exports=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:r(e,t,n)}},8210:function(e,t,n){var r;!function(){"use strict";var a,s=1e9,i={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",d=l+"Exponent out of range: ",u=Math.floor,m=Math.pow,h=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=1e7,f=9007199254740991,v=u(1286742750677284.5),g={};function x(e,t){var n,r,a,s,i,l,c,d,u=e.constructor,m=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),o?D(t,m):t;if(c=e.d,d=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a){for(s<0?(r=c,s=-s,l=d.length):(r=d,a=i,l=c.length),s>(l=(i=Math.ceil(m/7))>l?i+1:l+1)&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for((l=c.length)-(s=d.length)<0&&(s=l,r=d,d=c,c=r),n=0;s;)n=(c[--s]=c[s]+d[s]+n)/p|0,c[s]%=p;for(n&&(c.unshift(n),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,o?D(t,m):t}function y(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function b(e){var t,n,r,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)(n=7-(r=e[t]+"").length)&&(s+=S(n)),s+=r;(n=7-(r=(i=e[t])+"").length)&&(s+=S(n))}else if(0===i)return"0";for(;i%10===0;)i/=10;return s+i}g.absoluteValue=g.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},g.comparedTo=g.cmp=function(e){var t,n,r,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,n=(r=s.d.length)<(a=e.d.length)?r:a;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===a?0:r>a^s.s<0?1:-1},g.decimalPlaces=g.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},g.dividedBy=g.div=function(e){return j(this,new this.constructor(e))},g.dividedToIntegerBy=g.idiv=function(e){var t=this.constructor;return D(j(this,new t(e),0,1),t.precision)},g.equals=g.eq=function(e){return!this.cmp(e)},g.exponent=function(){return N(this)},g.greaterThan=g.gt=function(e){return this.cmp(e)>0},g.greaterThanOrEqualTo=g.gte=function(e){return this.cmp(e)>=0},g.isInteger=g.isint=function(){return this.e>this.d.length-2},g.isNegative=g.isneg=function(){return this.s<0},g.isPositive=g.ispos=function(){return this.s>0},g.isZero=function(){return 0===this.s},g.lessThan=g.lt=function(e){return this.cmp(e)<0},g.lessThanOrEqualTo=g.lte=function(e){return this.cmp(e)<1},g.logarithm=g.log=function(e){var t,n=this,r=n.constructor,s=r.precision,i=s+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(a))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(a)?new r(0):(o=!1,t=j(E(n,i),E(e,i),i),o=!0,D(t,s))},g.minus=g.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?T(t,e):x(t,(e.s=-e.s,e))},g.modulo=g.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(o=!1,t=j(n,e,0,1).times(e),o=!0,n.minus(t)):D(new r(n),a)},g.naturalExponential=g.exp=function(){return w(this)},g.naturalLogarithm=g.ln=function(){return E(this)},g.negated=g.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},g.plus=g.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?x(t,e):T(t,(e.s=-e.s,e))},g.precision=g.sd=function(e){var t,n,r,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=N(a)+1,n=7*(r=a.d.length-1)+1,r=a.d[r]){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},g.squareRoot=g.sqrt=function(){var e,t,n,r,a,s,i,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(l+"NaN")}for(e=N(c),o=!1,0==(a=Math.sqrt(+c))||a==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=u((e+1)/2)-(e<0||e%2),r=new d(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new d(a.toString()),a=i=(n=d.precision)+3;;)if(r=(s=r).plus(j(c,s,i+2)).times(.5),b(s.d).slice(0,i)===(t=b(r.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(D(s,n+1,0),s.times(s).eq(c)){r=s;break}}else if("9999"!=t)break;i+=4}return o=!0,D(r,n)},g.times=g.mul=function(e){var t,n,r,a,s,i,l,c,d,u=this,m=u.constructor,h=u.d,f=(e=new m(e)).d;if(!u.s||!e.s)return new m(0);for(e.s*=u.s,n=u.e+e.e,(c=h.length)<(d=f.length)&&(s=h,h=f,f=s,i=c,c=d,d=i),s=[],r=i=c+d;r--;)s.push(0);for(r=d;--r>=0;){for(t=0,a=c+r;a>r;)l=s[a]+f[r]*h[a-r-1]+t,s[a--]=l%p|0,t=l/p|0;s[a]=(s[a]+t)%p|0}for(;!s[--i];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,o?D(e,m.precision):e},g.toDecimalPlaces=g.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(y(e,0,s),void 0===t?t=r.rounding:y(t,0,8),D(n,e+N(n)+1,t))},g.toExponential=function(e,t){var n,r=this,a=r.constructor;return void 0===e?n=k(r,!0):(y(e,0,s),void 0===t?t=a.rounding:y(t,0,8),n=k(r=D(new a(r),e+1,t),!0,e+1)),n},g.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return void 0===e?k(a):(y(e,0,s),void 0===t?t=i.rounding:y(t,0,8),n=k((r=D(new i(a),e+N(a)+1,t)).abs(),!1,e+N(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)},g.toInteger=g.toint=function(){var e=this,t=e.constructor;return D(new t(e),N(e)+1,t.rounding)},g.toNumber=function(){return+this},g.toPower=g.pow=function(e){var t,n,r,s,i,c,d=this,m=d.constructor,h=+(e=new m(e));if(!e.s)return new m(a);if(!(d=new m(d)).s){if(e.s<1)throw Error(l+"Infinity");return d}if(d.eq(a))return d;if(r=m.precision,e.eq(a))return D(d,r);if(c=(t=e.e)>=(n=e.d.length-1),i=d.s,c){if((n=h<0?-h:h)<=f){for(s=new m(a),t=Math.ceil(r/7+4),o=!1;n%2&&A((s=s.times(d)).d,t),0!==(n=u(n/2));)A((d=d.times(d)).d,t);return o=!0,e.s<0?new m(a).div(s):D(s,r)}}else if(i<0)throw Error(l+"NaN");return i=i<0&&1&e.d[Math.max(t,n)]?-1:1,d.s=1,o=!1,s=e.times(E(d,r+12)),o=!0,(s=w(s)).s=i,s},g.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return void 0===e?r=k(a,(n=N(a))<=i.toExpNeg||n>=i.toExpPos):(y(e,1,s),void 0===t?t=i.rounding:y(t,0,8),r=k(a=D(new i(a),e,t),e<=(n=N(a))||n<=i.toExpNeg,e)),r},g.toSignificantDigits=g.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(y(e,1,s),void 0===t?t=n.rounding:y(t,0,8)),D(new n(this),e,t)},g.toString=g.valueOf=g.val=g.toJSON=function(){var e=this,t=N(e),n=e.constructor;return k(e,t<=n.toExpNeg||t>=n.toExpPos)};var j=function(){function e(e,t){var n,r=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+r,e[a]=n%p|0,r=n/p|0;return r&&e.unshift(r),e}function t(e,t,n,r){var a,s;if(n!=r)s=n>r?1:-1;else for(a=s=0;a<n;a++)if(e[a]!=t[a]){s=e[a]>t[a]?1:-1;break}return s}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*p+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,a,s,i){var o,c,d,u,m,h,f,v,g,x,y,b,j,w,_,S,E,C,T=r.constructor,k=r.s==a.s?1:-1,A=r.d,P=a.d;if(!r.s)return new T(r);if(!a.s)throw Error(l+"Division by zero");for(c=r.e-a.e,E=P.length,_=A.length,v=(f=new T(k)).d=[],d=0;P[d]==(A[d]||0);)++d;if(P[d]>(A[d]||0)&&--c,(b=null==s?s=T.precision:i?s+(N(r)-N(a))+1:s)<0)return new T(0);if(b=b/7+2|0,d=0,1==E)for(u=0,P=P[0],b++;(d<_||u)&&b--;d++)j=u*p+(A[d]||0),v[d]=j/P|0,u=j%P|0;else{for((u=p/(P[0]+1)|0)>1&&(P=e(P,u),A=e(A,u),E=P.length,_=A.length),w=E,x=(g=A.slice(0,E)).length;x<E;)g[x++]=0;(C=P.slice()).unshift(0),S=P[0],P[1]>=p/2&&++S;do{u=0,(o=t(P,g,E,x))<0?(y=g[0],E!=x&&(y=y*p+(g[1]||0)),(u=y/S|0)>1?(u>=p&&(u=p-1),1==(o=t(m=e(P,u),g,h=m.length,x=g.length))&&(u--,n(m,E<h?C:P,h))):(0==u&&(o=u=1),m=P.slice()),(h=m.length)<x&&m.unshift(0),n(g,m,x),-1==o&&(o=t(P,g,E,x=g.length))<1&&(u++,n(g,E<x?C:P,x)),x=g.length):0===o&&(u++,g=[0]),v[d++]=u,o&&g[0]?g[x++]=A[w]||0:(g=[A[w]],x=1)}while((w++<_||void 0!==g[0])&&b--)}return v[0]||v.shift(),f.e=c,D(f,i?s+N(f)+1:s)}}();function w(e,t){var n,r,s,i,l,c=0,u=0,h=e.constructor,p=h.precision;if(N(e)>16)throw Error(d+N(e));if(!e.s)return new h(a);for(null==t?(o=!1,l=p):l=t,i=new h(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(l+=Math.log(m(2,u))/Math.LN10*2+5|0,n=r=s=new h(a),h.precision=l;;){if(r=D(r.times(e),l),n=n.times(++c),b((i=s.plus(j(r,n,l))).d).slice(0,l)===b(s.d).slice(0,l)){for(;u--;)s=D(s.times(s),l);return h.precision=p,null==t?(o=!0,D(s,p)):s}s=i}}function N(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function _(e,t,n){if(t>e.LN10.sd())throw o=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return D(new e(e.LN10),t)}function S(e){for(var t="";e--;)t+="0";return t}function E(e,t){var n,r,s,i,c,d,u,m,h,p=1,f=e,v=f.d,g=f.constructor,x=g.precision;if(f.s<1)throw Error(l+(f.s?"NaN":"-Infinity"));if(f.eq(a))return new g(0);if(null==t?(o=!1,m=x):m=t,f.eq(10))return null==t&&(o=!0),_(g,m);if(m+=10,g.precision=m,r=(n=b(v)).charAt(0),i=N(f),!(Math.abs(i)<15e14))return u=_(g,m+2,x).times(i+""),f=E(new g(r+"."+n.slice(1)),m-10).plus(u),g.precision=x,null==t?(o=!0,D(f,x)):f;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=b((f=f.times(e)).d)).charAt(0),p++;for(i=N(f),r>1?(f=new g("0."+n),i++):f=new g(r+"."+n.slice(1)),d=c=f=j(f.minus(a),f.plus(a),m),h=D(f.times(f),m),s=3;;){if(c=D(c.times(h),m),b((u=d.plus(j(c,new g(s),m))).d).slice(0,m)===b(d.d).slice(0,m))return d=d.times(2),0!==i&&(d=d.plus(_(g,m+2,x).times(i+""))),d=j(d,new g(p),m),g.precision=x,null==t?(o=!0,D(d,x)):d;d=u,s+=2}}function C(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(r,a)){if(a-=r,n=n-r-1,e.e=u(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=7;r<a;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),o&&(e.e>v||e.e<-v))throw Error(d+n)}else e.s=0,e.e=0,e.d=[0];return e}function D(e,t,n){var r,a,s,i,l,c,h,f,g=e.d;for(i=1,s=g[0];s>=10;s/=10)i++;if((r=t-i)<0)r+=7,a=t,h=g[f=0];else{if((f=Math.ceil((r+1)/7))>=(s=g.length))return e;for(h=s=g[f],i=1;s>=10;s/=10)i++;a=(r%=7)-7+i}if(void 0!==n&&(l=h/(s=m(10,i-a-1))%10|0,c=t<0||void 0!==g[f+1]||h%s,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?a>0?h/m(10,i-a):0:g[f-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return c?(s=N(e),g.length=1,t=t-s-1,g[0]=m(10,(7-t%7)%7),e.e=u(-t/7)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(0==r?(g.length=f,s=1,f--):(g.length=f+1,s=m(10,7-r),g[f]=a>0?(h/m(10,i-a)%m(10,a)|0)*s:0),c)for(;;){if(0==f){(g[0]+=s)==p&&(g[0]=1,++e.e);break}if(g[f]+=s,g[f]!=p)break;g[f--]=0,s=1}for(r=g.length;0===g[--r];)g.pop();if(o&&(e.e>v||e.e<-v))throw Error(d+N(e));return e}function T(e,t){var n,r,a,s,i,l,c,d,u,m,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),o?D(t,f):t;if(c=e.d,m=t.d,r=t.e,d=e.e,c=c.slice(),i=d-r){for((u=i<0)?(n=c,i=-i,l=m.length):(n=m,r=d,l=c.length),i>(a=Math.max(Math.ceil(f/7),l)+2)&&(i=a,n.length=1),n.reverse(),a=i;a--;)n.push(0);n.reverse()}else{for((u=(a=c.length)<(l=m.length))&&(l=a),a=0;a<l;a++)if(c[a]!=m[a]){u=c[a]<m[a];break}i=0}for(u&&(n=c,c=m,m=n,t.s=-t.s),l=c.length,a=m.length-l;a>0;--a)c[l++]=0;for(a=m.length;a>i;){if(c[--a]<m[a]){for(s=a;s&&0===c[--s];)c[s]=p-1;--c[s],c[a]+=p}c[a]-=m[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,o?D(t,f):t):new h(0)}function k(e,t,n){var r,a=N(e),s=b(e.d),i=s.length;return t?(n&&(r=n-i)>0?s=s.charAt(0)+"."+s.slice(1)+S(r):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+S(-a-1)+s,n&&(r=n-i)>0&&(s+=S(r))):a>=i?(s+=S(a+1-i),n&&(r=n-a-1)>0&&(s=s+"."+S(r))):((r=a+1)<i&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-i)>0&&(a+1===i&&(s+="."),s+=S(r))),e.s<0?"-"+s:s}function A(e,t){if(e.length>t)return e.length=t,!0}function P(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,a=["precision",1,s,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(r=e[n=a[t]])){if(!(u(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}i=function e(t){var n,r,a;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):C(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!h.test(e))throw Error(c+e);C(t,e)}if(s.prototype=g,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=P,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<a.length;)t.hasOwnProperty(r=a[n++])||(t[r]=this[r]);return s.config(t),s}(i),i.default=i.Decimal=i,a=new i(1),void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},8259:(e,t,n)=>{var r=n(5797);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},8325:(e,t,n)=>{var r=n(2541),a=n(5654),s=n(3279),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:s;e.exports=i},8326:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8365:(e,t,n)=>{"use strict";var r=n(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,i=r.useRef,o=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,d){var u=i(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;u=l((function(){function e(e){if(!o){if(o=!0,s=e,e=r(e),void 0!==d&&m.hasValue){var t=m.value;if(d(t,e))return i=t}return i=e}if(t=i,a(s,e))return t;var n=r(e);return void 0!==d&&d(t,n)?(s=e,t):(s=e,i=n)}var s,i,o=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,d]);var h=s(e,u[0],u[1]);return o((function(){m.hasValue=!0,m.value=h}),[h]),c(h),h}},8387:(e,t,n)=>{"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function a(){for(var e,t,n=0,a="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}n.d(t,{$:()=>a,A:()=>s});const s=a},8414:(e,t,n)=>{"use strict";n.d(t,{l6:()=>Ge,gC:()=>Je,eb:()=>Qe,bq:()=>Ye,yv:()=>Ke});var r=n(5043),a=n(852),s=n(7950),i=n(1664),o=n(858),l=n(5463),c=n(2814),d=n(1862),u=n(4204),m=n(1184),h=n(6590),p=n(276),f=n(4490),v=n(2043),g=n(3321),x=n(7920),y=n(6851),b=n(7490),j=n(3642),w=n(503),N=n(3168),_=n(4451),S=n(5754),E=n(1672),C=n(579),D=[" ","Enter","ArrowUp","ArrowDown"],T=[" ","Enter"],k="Select",[A,P,O]=(0,l.N)(k),[R,M]=(0,d.A)(k,[O,v.Bk]),I=(0,v.Bk)(),[L,F]=R(k),[B,W]=R(k),$=e=>{const{__scopeSelect:t,children:n,open:a,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:m,autoComplete:h,disabled:p,required:g,form:x}=e,y=I(t),[b,w]=r.useState(null),[N,_]=r.useState(null),[S,E]=r.useState(!1),D=(0,u.jH)(d),[T=!1,k]=(0,j.i)({prop:a,defaultProp:s,onChange:i}),[P,O]=(0,j.i)({prop:o,defaultProp:l,onChange:c}),R=r.useRef(null),M=!b||(x||!!b.closest("form")),[F,W]=r.useState(new Set),$=Array.from(F).map((e=>e.props.value)).join(";");return(0,C.jsx)(v.bL,{...y,children:(0,C.jsxs)(L,{required:g,scope:t,trigger:b,onTriggerChange:w,valueNode:N,onValueNodeChange:_,valueNodeHasChildren:S,onValueNodeHasChildrenChange:E,contentId:(0,f.B)(),value:P,onValueChange:O,open:T,onOpenChange:k,dir:D,triggerPointerDownPosRef:R,disabled:p,children:[(0,C.jsx)(A.Provider,{scope:t,children:(0,C.jsx)(B,{scope:e.__scopeSelect,onNativeOptionAdd:r.useCallback((e=>{W((t=>new Set(t).add(e)))}),[]),onNativeOptionRemove:r.useCallback((e=>{W((t=>{const n=new Set(t);return n.delete(e),n}))}),[]),children:n})}),M?(0,C.jsxs)(Te,{"aria-hidden":!0,required:g,tabIndex:-1,name:m,autoComplete:h,value:P,onChange:e=>O(e.target.value),disabled:p,form:x,children:[void 0===P?(0,C.jsx)("option",{value:""}):null,Array.from(F)]},$):null]})})};$.displayName=k;var U="SelectTrigger",z=r.forwardRef(((e,t)=>{const{__scopeSelect:n,disabled:a=!1,...s}=e,i=I(n),l=F(U,n),d=l.disabled||a,u=(0,c.s)(t,l.onTriggerChange),m=P(n),h=r.useRef("touch"),[p,f,g]=ke((e=>{const t=m().filter((e=>!e.disabled)),n=t.find((e=>e.value===l.value)),r=Ae(t,e,n);void 0!==r&&l.onValueChange(r.value)})),y=e=>{d||(l.onOpenChange(!0),g()),e&&(l.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,C.jsx)(v.Mz,{asChild:!0,...i,children:(0,C.jsx)(x.sG.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":De(l.value)?"":void 0,...s,ref:u,onClick:(0,o.m)(s.onClick,(e=>{e.currentTarget.focus(),"mouse"!==h.current&&y(e)})),onPointerDown:(0,o.m)(s.onPointerDown,(e=>{h.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(y(e),e.preventDefault())})),onKeyDown:(0,o.m)(s.onKeyDown,(e=>{const t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||f(e.key),t&&" "===e.key||D.includes(e.key)&&(y(),e.preventDefault())}))})})}));z.displayName=U;var H="SelectValue",V=r.forwardRef(((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:s,placeholder:i="",...o}=e,l=F(H,n),{onValueNodeHasChildrenChange:d}=l,u=void 0!==s,m=(0,c.s)(t,l.onValueNodeChange);return(0,w.N)((()=>{d(u)}),[d,u]),(0,C.jsx)(x.sG.span,{...o,ref:m,style:{pointerEvents:"none"},children:De(l.value)?(0,C.jsx)(C.Fragment,{children:i}):s})}));V.displayName=H;var q=r.forwardRef(((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return(0,C.jsx)(x.sG.span,{"aria-hidden":!0,...a,ref:t,children:r||"\u25bc"})}));q.displayName="SelectIcon";var G=e=>(0,C.jsx)(g.Z,{asChild:!0,...e});G.displayName="SelectPortal";var K="SelectContent",Y=r.forwardRef(((e,t)=>{const n=F(K,e.__scopeSelect),[a,i]=r.useState();if((0,w.N)((()=>{i(new DocumentFragment)}),[]),!n.open){const t=a;return t?s.createPortal((0,C.jsx)(Z,{scope:e.__scopeSelect,children:(0,C.jsx)(A.Slot,{scope:e.__scopeSelect,children:(0,C.jsx)("div",{children:e.children})})}),t):null}return(0,C.jsx)(Q,{...e,ref:t})}));Y.displayName=K;var X=10,[Z,J]=R(K),Q=r.forwardRef(((e,t)=>{const{__scopeSelect:n,position:a="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:l,side:d,sideOffset:u,align:f,alignOffset:v,arrowPadding:g,collisionBoundary:x,collisionPadding:b,sticky:j,hideWhenDetached:w,avoidCollisions:N,..._}=e,D=F(K,n),[T,k]=r.useState(null),[A,O]=r.useState(null),R=(0,c.s)(t,(e=>k(e))),[M,I]=r.useState(null),[L,B]=r.useState(null),W=P(n),[$,U]=r.useState(!1),z=r.useRef(!1);r.useEffect((()=>{if(T)return(0,S.Eq)(T)}),[T]),(0,h.Oh)();const H=r.useCallback((e=>{const[t,...n]=W().map((e=>e.ref.current)),[r]=n.slice(-1),a=document.activeElement;for(const s of e){if(s===a)return;if(s?.scrollIntoView({block:"nearest"}),s===t&&A&&(A.scrollTop=0),s===r&&A&&(A.scrollTop=A.scrollHeight),s?.focus(),document.activeElement!==a)return}}),[W,A]),V=r.useCallback((()=>H([M,T])),[H,M,T]);r.useEffect((()=>{$&&V()}),[$,V]);const{onOpenChange:q,triggerPointerDownPosRef:G}=D;r.useEffect((()=>{if(T){let e={x:0,y:0};const t=t=>{e={x:Math.abs(Math.round(t.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(G.current?.y??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():T.contains(n.target)||q(!1),document.removeEventListener("pointermove",t),G.current=null};return null!==G.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}}),[T,q,G]),r.useEffect((()=>{const e=()=>q(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}}),[q]);const[Y,X]=ke((e=>{const t=W().filter((e=>!e.disabled)),n=t.find((e=>e.ref.current===document.activeElement)),r=Ae(t,e,n);r&&setTimeout((()=>r.ref.current.focus()))})),J=r.useCallback(((e,t,n)=>{const r=!z.current&&!n;(void 0!==D.value&&D.value===t||r)&&(I(e),r&&(z.current=!0))}),[D.value]),Q=r.useCallback((()=>T?.focus()),[T]),ne=r.useCallback(((e,t,n)=>{const r=!z.current&&!n;(void 0!==D.value&&D.value===t||r)&&B(e)}),[D.value]),re="popper"===a?te:ee,ae=re===te?{side:d,sideOffset:u,align:f,alignOffset:v,arrowPadding:g,collisionBoundary:x,collisionPadding:b,sticky:j,hideWhenDetached:w,avoidCollisions:N}:{};return(0,C.jsx)(Z,{scope:n,content:T,viewport:A,onViewportChange:O,itemRefCallback:J,selectedItem:M,onItemLeave:Q,itemTextRefCallback:ne,focusSelectedItem:V,selectedItemText:L,position:a,isPositioned:$,searchRef:Y,children:(0,C.jsx)(E.A,{as:y.DX,allowPinchZoom:!0,children:(0,C.jsx)(p.n,{asChild:!0,trapped:D.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,o.m)(s,(e=>{D.trigger?.focus({preventScroll:!0}),e.preventDefault()})),children:(0,C.jsx)(m.qW,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>D.onOpenChange(!1),children:(0,C.jsx)(re,{role:"listbox",id:D.contentId,"data-state":D.open?"open":"closed",dir:D.dir,onContextMenu:e=>e.preventDefault(),..._,...ae,onPlaced:()=>U(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:(0,o.m)(_.onKeyDown,(e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||X(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=W().filter((e=>!e.disabled)).map((e=>e.ref.current));if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout((()=>H(t))),e.preventDefault()}}))})})})})})}));Q.displayName="SelectContentImpl";var ee=r.forwardRef(((e,t)=>{const{__scopeSelect:n,onPlaced:a,...s}=e,o=F(K,n),l=J(K,n),[d,u]=r.useState(null),[m,h]=r.useState(null),p=(0,c.s)(t,(e=>h(e))),f=P(n),v=r.useRef(!1),g=r.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:j,focusSelectedItem:N}=l,_=r.useCallback((()=>{if(o.trigger&&o.valueNode&&d&&m&&y&&b&&j){const e=o.trigger.getBoundingClientRect(),t=m.getBoundingClientRect(),n=o.valueNode.getBoundingClientRect(),r=j.getBoundingClientRect();if("rtl"!==o.dir){const a=r.left-t.left,s=n.left-a,o=e.left-s,l=e.width+o,c=Math.max(l,t.width),u=window.innerWidth-X,m=(0,i.q)(s,[X,Math.max(X,u-c)]);d.style.minWidth=l+"px",d.style.left=m+"px"}else{const a=t.right-r.right,s=window.innerWidth-n.right-a,o=window.innerWidth-e.right-s,l=e.width+o,c=Math.max(l,t.width),u=window.innerWidth-X,m=(0,i.q)(s,[X,Math.max(X,u-c)]);d.style.minWidth=l+"px",d.style.right=m+"px"}const s=f(),l=window.innerHeight-2*X,c=y.scrollHeight,u=window.getComputedStyle(m),h=parseInt(u.borderTopWidth,10),p=parseInt(u.paddingTop,10),g=parseInt(u.borderBottomWidth,10),x=h+p+c+parseInt(u.paddingBottom,10)+g,w=Math.min(5*b.offsetHeight,x),N=window.getComputedStyle(y),_=parseInt(N.paddingTop,10),S=parseInt(N.paddingBottom,10),E=e.top+e.height/2-X,C=l-E,D=b.offsetHeight/2,T=h+p+(b.offsetTop+D),k=x-T;if(T<=E){const e=s.length>0&&b===s[s.length-1].ref.current;d.style.bottom="0px";const t=m.clientHeight-y.offsetTop-y.offsetHeight,n=T+Math.max(C,D+(e?S:0)+t+g);d.style.height=n+"px"}else{const e=s.length>0&&b===s[0].ref.current;d.style.top="0px";const t=Math.max(E,h+y.offsetTop+(e?_:0)+D)+k;d.style.height=t+"px",y.scrollTop=T-E+y.offsetTop}d.style.margin=`${X}px 0`,d.style.minHeight=w+"px",d.style.maxHeight=l+"px",a?.(),requestAnimationFrame((()=>v.current=!0))}}),[f,o.trigger,o.valueNode,d,m,y,b,j,o.dir,a]);(0,w.N)((()=>_()),[_]);const[S,E]=r.useState();(0,w.N)((()=>{m&&E(window.getComputedStyle(m).zIndex)}),[m]);const D=r.useCallback((e=>{e&&!0===g.current&&(_(),N?.(),g.current=!1)}),[_,N]);return(0,C.jsx)(ne,{scope:n,contentWrapper:d,shouldExpandOnScrollRef:v,onScrollButtonChange:D,children:(0,C.jsx)("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:(0,C.jsx)(x.sG.div,{...s,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})}));ee.displayName="SelectItemAlignedPosition";var te=r.forwardRef(((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=X,...s}=e,i=I(n);return(0,C.jsx)(v.UC,{...i,...s,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})}));te.displayName="SelectPopperPosition";var[ne,re]=R(K,{}),ae="SelectViewport",se=r.forwardRef(((e,t)=>{const{__scopeSelect:n,nonce:a,...s}=e,i=J(ae,n),l=re(ae,n),d=(0,c.s)(t,i.onViewportChange),u=r.useRef(0);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,C.jsx)(A.Slot,{scope:n,children:(0,C.jsx)(x.sG.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:(0,o.m)(s.onScroll,(e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=l;if(r?.current&&n){const e=Math.abs(u.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*X,a=parseFloat(n.style.minHeight),s=parseFloat(n.style.height),i=Math.max(a,s);if(i<r){const a=i+e,s=Math.min(r,a),o=a-s;n.style.height=s+"px","0px"===n.style.bottom&&(t.scrollTop=o>0?o:0,n.style.justifyContent="flex-end")}}}u.current=t.scrollTop}))})})]})}));se.displayName=ae;var ie="SelectGroup",[oe,le]=R(ie),ce=r.forwardRef(((e,t)=>{const{__scopeSelect:n,...r}=e,a=(0,f.B)();return(0,C.jsx)(oe,{scope:n,id:a,children:(0,C.jsx)(x.sG.div,{role:"group","aria-labelledby":a,...r,ref:t})})}));ce.displayName=ie;var de="SelectLabel",ue=r.forwardRef(((e,t)=>{const{__scopeSelect:n,...r}=e,a=le(de,n);return(0,C.jsx)(x.sG.div,{id:a.id,...r,ref:t})}));ue.displayName=de;var me="SelectItem",[he,pe]=R(me),fe=r.forwardRef(((e,t)=>{const{__scopeSelect:n,value:a,disabled:s=!1,textValue:i,...l}=e,d=F(me,n),u=J(me,n),m=d.value===a,[h,p]=r.useState(i??""),[v,g]=r.useState(!1),y=(0,c.s)(t,(e=>u.itemRefCallback?.(e,a,s))),b=(0,f.B)(),j=r.useRef("touch"),w=()=>{s||(d.onValueChange(a),d.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,C.jsx)(he,{scope:n,value:a,disabled:s,textId:b,isSelected:m,onItemTextChange:r.useCallback((e=>{p((t=>t||(e?.textContent??"").trim()))}),[]),children:(0,C.jsx)(A.ItemSlot,{scope:n,value:a,disabled:s,textValue:h,children:(0,C.jsx)(x.sG.div,{role:"option","aria-labelledby":b,"data-highlighted":v?"":void 0,"aria-selected":m&&v,"data-state":m?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...l,ref:y,onFocus:(0,o.m)(l.onFocus,(()=>g(!0))),onBlur:(0,o.m)(l.onBlur,(()=>g(!1))),onClick:(0,o.m)(l.onClick,(()=>{"mouse"!==j.current&&w()})),onPointerUp:(0,o.m)(l.onPointerUp,(()=>{"mouse"===j.current&&w()})),onPointerDown:(0,o.m)(l.onPointerDown,(e=>{j.current=e.pointerType})),onPointerMove:(0,o.m)(l.onPointerMove,(e=>{j.current=e.pointerType,s?u.onItemLeave?.():"mouse"===j.current&&e.currentTarget.focus({preventScroll:!0})})),onPointerLeave:(0,o.m)(l.onPointerLeave,(e=>{e.currentTarget===document.activeElement&&u.onItemLeave?.()})),onKeyDown:(0,o.m)(l.onKeyDown,(e=>{""!==u.searchRef?.current&&" "===e.key||(T.includes(e.key)&&w()," "===e.key&&e.preventDefault())}))})})})}));fe.displayName=me;var ve="SelectItemText",ge=r.forwardRef(((e,t)=>{const{__scopeSelect:n,className:a,style:i,...o}=e,l=F(ve,n),d=J(ve,n),u=pe(ve,n),m=W(ve,n),[h,p]=r.useState(null),f=(0,c.s)(t,(e=>p(e)),u.onItemTextChange,(e=>d.itemTextRefCallback?.(e,u.value,u.disabled))),v=h?.textContent,g=r.useMemo((()=>(0,C.jsx)("option",{value:u.value,disabled:u.disabled,children:v},u.value)),[u.disabled,u.value,v]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=m;return(0,w.N)((()=>(y(g),()=>b(g))),[y,b,g]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.sG.span,{id:u.textId,...o,ref:f}),u.isSelected&&l.valueNode&&!l.valueNodeHasChildren?s.createPortal(o.children,l.valueNode):null]})}));ge.displayName=ve;var xe="SelectItemIndicator",ye=r.forwardRef(((e,t)=>{const{__scopeSelect:n,...r}=e;return pe(xe,n).isSelected?(0,C.jsx)(x.sG.span,{"aria-hidden":!0,...r,ref:t}):null}));ye.displayName=xe;var be="SelectScrollUpButton",je=r.forwardRef(((e,t)=>{const n=J(be,e.__scopeSelect),a=re(be,e.__scopeSelect),[s,i]=r.useState(!1),o=(0,c.s)(t,a.onScrollButtonChange);return(0,w.N)((()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;i(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[n.viewport,n.isPositioned]),s?(0,C.jsx)(_e,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null}));je.displayName=be;var we="SelectScrollDownButton",Ne=r.forwardRef(((e,t)=>{const n=J(we,e.__scopeSelect),a=re(we,e.__scopeSelect),[s,i]=r.useState(!1),o=(0,c.s)(t,a.onScrollButtonChange);return(0,w.N)((()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;i(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[n.viewport,n.isPositioned]),s?(0,C.jsx)(_e,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null}));Ne.displayName=we;var _e=r.forwardRef(((e,t)=>{const{__scopeSelect:n,onAutoScroll:a,...s}=e,i=J("SelectScrollButton",n),l=r.useRef(null),c=P(n),d=r.useCallback((()=>{null!==l.current&&(window.clearInterval(l.current),l.current=null)}),[]);return r.useEffect((()=>()=>d()),[d]),(0,w.N)((()=>{const e=c().find((e=>e.ref.current===document.activeElement));e?.ref.current?.scrollIntoView({block:"nearest"})}),[c]),(0,C.jsx)(x.sG.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:(0,o.m)(s.onPointerDown,(()=>{null===l.current&&(l.current=window.setInterval(a,50))})),onPointerMove:(0,o.m)(s.onPointerMove,(()=>{i.onItemLeave?.(),null===l.current&&(l.current=window.setInterval(a,50))})),onPointerLeave:(0,o.m)(s.onPointerLeave,(()=>{d()}))})})),Se=r.forwardRef(((e,t)=>{const{__scopeSelect:n,...r}=e;return(0,C.jsx)(x.sG.div,{"aria-hidden":!0,...r,ref:t})}));Se.displayName="SelectSeparator";var Ee="SelectArrow",Ce=r.forwardRef(((e,t)=>{const{__scopeSelect:n,...r}=e,a=I(n),s=F(Ee,n),i=J(Ee,n);return s.open&&"popper"===i.position?(0,C.jsx)(v.i3,{...a,...r,ref:t}):null}));function De(e){return""===e||void 0===e}Ce.displayName=Ee;var Te=r.forwardRef(((e,t)=>{const{value:n,...a}=e,s=r.useRef(null),i=(0,c.s)(t,s),o=(0,N.Z)(n);return r.useEffect((()=>{const e=s.current,t=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(o!==n&&r){const t=new Event("change",{bubbles:!0});r.call(e,n),e.dispatchEvent(t)}}),[o,n]),(0,C.jsx)(_.s,{asChild:!0,children:(0,C.jsx)("select",{...a,ref:i,defaultValue:n})})}));function ke(e){const t=(0,b.c)(e),n=r.useRef(""),a=r.useRef(0),s=r.useCallback((e=>{const r=n.current+e;t(r),function e(t){n.current=t,window.clearTimeout(a.current),""!==t&&(a.current=window.setTimeout((()=>e("")),1e3))}(r)}),[t]),i=r.useCallback((()=>{n.current="",window.clearTimeout(a.current)}),[]);return r.useEffect((()=>()=>window.clearTimeout(a.current)),[]),[n,s,i]}function Ae(e,t,n){const r=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,a=n?e.indexOf(n):-1;let s=(i=e,o=Math.max(a,0),i.map(((e,t)=>i[(o+t)%i.length])));var i,o;1===r.length&&(s=s.filter((e=>e!==n)));const l=s.find((e=>e.textValue.toLowerCase().startsWith(r.toLowerCase())));return l!==n?l:void 0}Te.displayName="BubbleSelect";var Pe=$,Oe=z,Re=V,Me=q,Ie=G,Le=Y,Fe=se,Be=ue,We=fe,$e=ge,Ue=ye,ze=je,He=Ne,Ve=Se,qe=n(9766);const Ge=Pe,Ke=Re,Ye=r.forwardRef(((e,t)=>{let{className:n,children:r,...s}=e;return(0,C.jsxs)(Oe,{ref:t,className:(0,qe.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...s,children:[r,(0,C.jsx)(Me,{asChild:!0,children:(0,C.jsx)(a.TBE,{className:"h-4 w-4 opacity-50"})})]})}));Ye.displayName=Oe.displayName;const Xe=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,C.jsx)(ze,{ref:t,className:(0,qe.cn)("flex cursor-default items-center justify-center py-1",n),...r,children:(0,C.jsx)(a.Mtm,{})})}));Xe.displayName=ze.displayName;const Ze=r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,C.jsx)(He,{ref:t,className:(0,qe.cn)("flex cursor-default items-center justify-center py-1",n),...r,children:(0,C.jsx)(a.D3D,{})})}));Ze.displayName=He.displayName;const Je=r.forwardRef(((e,t)=>{let{className:n,children:r,position:a="popper",...s}=e;return(0,C.jsx)(Ie,{children:(0,C.jsxs)(Le,{ref:t,className:(0,qe.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:a,...s,children:[(0,C.jsx)(Xe,{}),(0,C.jsx)(Fe,{className:(0,qe.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,C.jsx)(Ze,{})]})})}));Je.displayName=Le.displayName;r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,C.jsx)(Be,{ref:t,className:(0,qe.cn)("px-2 py-1.5 text-sm font-semibold",n),...r})})).displayName=Be.displayName;const Qe=r.forwardRef(((e,t)=>{let{className:n,children:r,...s}=e;return(0,C.jsxs)(We,{ref:t,className:(0,qe.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...s,children:[(0,C.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,C.jsx)(Ue,{children:(0,C.jsx)(a.Srz,{className:"h-4 w-4"})})}),(0,C.jsx)($e,{children:r})]})}));Qe.displayName=We.displayName;r.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,C.jsx)(Ve,{ref:t,className:(0,qe.cn)("-mx-1 my-1 h-px bg-muted",n),...r})})).displayName=Ve.displayName},8468:(e,t,n)=>{var r=n(5816),a=n(644),s=n(4020);e.exports=function(e,t,n){return t===t?s(e,t,n):r(e,a,n)}},8521:(e,t,n)=>{"use strict";function r(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}n.d(t,{$:()=>r})},8541:(e,t,n)=>{var r=n(9812),a=n(149),s=n(4052),i=n(9841),o=r?r.prototype:void 0,l=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(s(t))return a(t,e)+"";if(i(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},8605:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});var r=n(849),a=n(2316);function s(e,t){const n=(0,r.q)(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=(0,a.a)(e,t?.in),o=i.getDay(),l=6+(o<s?-7:0)-(o-s);return i.setDate(i.getDate()+l),i.setHours(23,59,59,999),i}},8621:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var r=n(2316);function a(e,t){const n=(0,r.a)(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}},8673:(e,t,n)=>{var r=n(3204),a=n(3713),s=n(6571);e.exports=function(e){return s(e)?r(e):a(e)}},8724:(e,t,n)=>{var r=n(7615),a=n(5051),s=n(2154),i=n(8734),o=n(2662);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=i,l.prototype.set=o,e.exports=l},8734:(e,t,n)=>{var r=n(5575),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},8739:(e,t,n)=>{"use strict";n.d(t,{W:()=>a,k:()=>r});const r='(reportData, patientData, hospital, ref) => {\n  const formatDate = (date) => {\n    if (!date) return "";\n    return new Date(date).toLocaleDateString(\'en-IN\', { \n      day: \'2-digit\', \n      month: \'2-digit\', \n      year: \'numeric\' \n    });\n  };\n\n  // Add color calculation functions\n  const getValueColor = (value, normalRange, gender) => {\n    if (!value || !normalRange) return "inherit";\n  \n    // Handle gender-specific ranges\n    if (normalRange.toLowerCase().includes("male") && normalRange.toLowerCase().includes("female")) {\n      const ranges = normalRange.split(/[,;]/).map(r => r.trim());\n      const genderRange = ranges.find(r => \n        r.toLowerCase().includes(gender.toLowerCase()) || \n        r.toLowerCase().startsWith(gender.toLowerCase().charAt(0))\n      );\n      \n      if (genderRange) {\n        normalRange = genderRange\n          .replace(/s*(male|female|m|f)?:?s*/gi, "")\n          .replace(/[()]/g, "")\n          .trim();\n      }\n    }\n  \n    const numericValue = parseFloat(value);\n    if (isNaN(numericValue)) return "inherit";\n  \n    if (normalRange.includes("-")) {\n      const [min, max] = normalRange.split("-").map(v => parseFloat(v));\n      if (!isNaN(min) && !isNaN(max)) {\n        if (numericValue < min) return "#FF4444";\n        if (numericValue > max) return "#FF4444";\n        return "#2ECC71";\n      }\n    } else if (normalRange.startsWith("<")) {\n      const max = parseFloat(normalRange.substring(1));\n      if (!isNaN(max)) return numericValue > max ? "#FF4444" : "#2ECC71";\n    } else if (normalRange.startsWith(">")) {\n      const min = parseFloat(normalRange.substring(1));\n      if (!isNaN(min)) return numericValue < min ? "#FF4444" : "#2ECC71";\n    }\n  \n    return "inherit";\n  };\n\n  const shouldUseTextarea = (unit, normalRange) => {\n    return !(["",undefined,null,"N/A"].includes(unit) && ["",undefined,null,"N/A"].includes(normalRange))\n  };\n\n  const getGenderSpecificRange = (normalRange, gender) => {\n    if (!normalRange || !gender) return normalRange;\n\n    if (normalRange.toLowerCase().includes("male") && normalRange.toLowerCase().includes("female")) {\n      const ranges = normalRange.split(/[,;]/).map(r => r.trim());\n      const genderRange = ranges.find(r => \n        r.toLowerCase().includes(gender.toLowerCase()) || \n        r.toLowerCase().startsWith(gender.toLowerCase().charAt(0))\n      );\n      \n      if (genderRange) {\n        return genderRange\n          .replace(/s*(male|female|m|f)?:?s*/gi, "")\n          .replace(/[()]/g, "")\n          .trim();\n      }\n    }\n    return normalRange;\n  };\n\n  return React.createElement("div", { \n    ref: ref, \n    className: "relative font-[Tinos] bg-white w-[210mm] min-h-[297mm] mx-auto box-border p-[5mm] print:absolute print:left-0 print:top-0 print:w-full print:[&_*]:visible print:visible print:p-5 print:[&_.no-print]:hidden"\n  },\n   \n    React.createElement(HospitalHeader, { hospitalInfo: hospital }),\n\n    React.createElement("div", { \n      className: "mt-[5px] p-2 bg-[#f8f9fa] rounded-[2mm] border border-[#e2e8f0] grid grid-cols-3 gap-2"\n    },\n     \n        React.createElement("div", { className: "flex items-center" },\n          React.createElement("span", { className: " font-bold text-[#34495e] mr-[2mm] min-w-[20mm]" }, "Name:"),\n          React.createElement("span", { className: " text-[#2c3e50]" }, patientData?.patientName)\n        ),\n        React.createElement("div", { className: "flex items-center" },\n          React.createElement("span", { className: " font-bold text-[#34495e] mr-[2mm] min-w-[20mm]" }, "Age/Gender:"),\n          React.createElement("span", { className: " text-[#2c3e50]" }, `${patientData.age}/${patientData?.patient?.gender?.charAt(0) || patientData.gender?.charAt(0)}`)\n        ),\n        React.createElement("div", { className: "flex items-center" },\n          React.createElement("span", { className: " font-bold text-[#34495e] mr-[2mm] min-w-[20mm]" }, "Reg/Lab No:"),\n          React.createElement("span", { className: " text-[#2c3e50]" }, `${patientData?.registrationNumber ? patientData.registrationNumber : "--"}/${patientData?.labNumber ? patientData.labNumber : "--"}`)\n        ),\n        React.createElement("div", { className: "flex items-start min-h-[24px]" },\n          React.createElement("span", { className: "font-bold text-[#34495e] mr-[2mm] min-w-[20mm] mt-[2px]" }, "Address:"),\n          React.createElement("span", { \n            className: "text-[#2c3e50] flex-1 break-words overflow-hidden",\n            style: {\n              lineHeight: \'1.2\',\n              maxHeight: \'2.4em\',\n              overflow: \'hidden\',\n              textOverflow: \'ellipsis\'\n            }\n          }, patientData?.address)\n        ),\n        React.createElement("div", { className: "flex items-center" },\n          React.createElement("span", { className: " font-bold text-[#34495e] mr-[2mm] min-w-[20mm]" }, "Contact:"),\n          React.createElement("span", { className: " text-[#2c3e50]" }, patientData?.contactNumber)\n        ),\n        React.createElement("div", { className: "flex items-center" },\n          React.createElement("span", { className: " font-bold text-[#34495e] mr-[2mm] min-w-[20mm]" }, "Date:"),\n          React.createElement("span", { className: " text-[#2c3e50]" }, formatDate(reportData?.date))\n        )\n    ),\n\n    // Report Title\n    React.createElement("div", { className: "text-center my-1" },\n      React.createElement("h2", { className: "text-[16px] font-bold underline tracking-wider" },\n       reportData?.name\n      )\n    ),\n\n    // Notes if present\n  \n    // Report Content\n    React.createElement("div", { className: "border-t-2 border-b-2 border-[#ecf0f1]" },\n      // Only show table header if there are table-format fields\n      reportData.order && reportData.order.some(item => \n        item.type === \'field\' && shouldUseTextarea(item.unit, item.normalRange)\n      ) && React.createElement("div", { \n        className: "grid grid-cols-12 gap-4 bg-[#f8f9fa] py-1 font-bold text-[14px] mb-2",\n        style: { pageBreakAfter: "avoid" }\n      },\n        React.createElement("div", { className: "col-span-5 font-bold pr-[2mm]" }, "Test Name"),\n        React.createElement("div", { className: "col-span-2 font-bold text-center" }, "Result"),\n        React.createElement("div", { className: "col-span-2 font-bold text-center" }, "Unit"),\n        React.createElement("div", { className: "col-span-3 font-bold text-right" }, "Normal Range")\n      ),\n\n      // Ordered Items (Fields and Sections)\n      reportData.order && reportData.order.map((item, index) => {\n        if (item.type === \'section\') {\n          return React.createElement("div", {\n            key: `section-${index}`,\n            className: "col-span-12  p-1 font-bold text-[14px] text-[#2c3e50]"\n          }, item.name);\n        } else {\n          // Check if field should use textarea format\n          const useTableFormat = shouldUseTextarea(item.unit, item.normalRange);\n          \n          return item.value ? React.createElement("div", {\n            key: `field-${index}`,\n            className: useTableFormat ? \n              "grid grid-cols-12 gap-4 py-[2px] items-center text-[13px]" :\n              "grid grid-cols-12 gap-5 py-[2px] items-baseline"\n          },\n            useTableFormat ? \n              // Table format\n              React.createElement(React.Fragment, null,\n                React.createElement("div", { className: "col-span-5 text-[#2c3e50] pr-[2mm] pl-4 " }, \n                  item.label\n                ),\n                React.createElement("div", {\n                  className: "col-span-2 text-center font-bold",\n                  style: { \n                    color: getValueColor(\n                      item.value, \n                      item.normalRange, \n                      patientData?.gender || patientData?.patient?.gender\n                    )\n                  }\n                }, item.value || \'-\'),\n                React.createElement("div", { className: "col-span-2 text-center" }, \n                  item.unit || \'-\'\n                ),\n                React.createElement("div", { className: "col-span-3 text-right" },\n                  getGenderSpecificRange(\n                    item.normalRange, \n                    patientData?.gender || patientData?.patient?.gender\n                  ) || \'-\'\n                )\n              ) :\n              // Textarea format\n              React.createElement(React.Fragment, null,\n                React.createElement("div", { className: "text-[15px] col-span-2 font-bold" }, \n                  item.label\n                ),\n                React.createElement("div", {\n                  className: "text-[14px] flex col-span-10 whitespace-pre-wrap break-all w-full",\n                  style: {\n                    color: getValueColor(\n                      item.value, \n                      item.normalRange, \n                      patientData?.gender || patientData?.patient?.gender\n                    ),\n                    wordBreak: \'break-word\',\n                    overflowWrap: \'break-word\',\n                    lineHeight: \'1.2\'\n                  }\n                }, item.value || \'\')\n              )\n          ):React.createElement("div",null);\n        }\n      })\n    ),\n      reportData.notes && React.createElement("div", { \n      className: "mb-4 p-2 bg-[#f8f9fa] rounded border border-[#e2e8f0]"\n    },\n      React.createElement("strong", {}, "Notes: "),\n      React.createElement("span", {}, reportData.notes)\n    ),\n\n    // Modified notes section\n    React.createElement("div", {\n      className: "mt-[10px] text-sm"\n    },\n    reportData.remarksArray && reportData.remarksArray.map((noteItem, index) => {\n      if (noteItem.type === "paragraph") {\n        return React.createElement("p", {\n          key: index,\n          className: "whitespace-pre-wrap"\n        }, noteItem.content);\n      } else if (noteItem.type === "header") {\n        return React.createElement("h3", {\n          key: index,\n          className: "text-md font-bold"\n        }, noteItem.content);\n      } else if (noteItem.type === "table") {\n        return React.createElement("table", {\n            key: index,\n            className: "w-full table-fixed border-collapse border border-gray-300 my-4"\n          },\n          React.createElement("thead", null,\n            React.createElement("tr", {\n                className: "bg-gray-100"\n              },\n              noteItem.header.map((heading, hIndex) =>\n                React.createElement("th", {\n                  key: hIndex,\n                  className: "border border-gray-300 p-2 text-left"\n                }, heading)\n              )\n            )\n          ),\n          React.createElement("tbody", null,\n            noteItem.rows.map((row, rIndex) =>\n              React.createElement("tr", {\n                  key: rIndex\n                },\n                row.map((cell, cIndex) =>\n                  React.createElement("td", {\n                    key: cIndex,\n                    className: "border border-gray-300 p-2"\n                  }, cell)\n                )\n              )\n            )\n          )\n        );\n      } else if (noteItem.type === "list") {\n        return React.createElement("ul", {\n          key: index,\n          className: "list-disc list-inside ml-4 my-2"\n        },\n          noteItem.items.map((item, itemIndex) =>\n            React.createElement("li", {\n              key: itemIndex\n            }, item)\n          )\n        );\n      }\n      // Add more types as needed (e.g., "image", "heading")\n      return null;\n    })\n  ),\n\n    // Footer\n     React.createElement("div", { className: "absolute bottom-[24mm] left-[10mm] right-[10mm] text-right pr-[20mm] " },\n        React.createElement("div", { className: "text-[10pt] font-bold " }, "Doctor\'s Signature")\n      ),\n    React.createElement("div", { className: "absolute bottom-[7mm] left-[10mm] right-[10mm] border-t border-black" },\n      React.createElement("div", { className: "text-[10pt] font-bold text-center" },  "NOT VALID FOR MEDICO LEGAL PURPOSE"),\n      React.createElement("div", { className: "text-[8pt] text-[#666] text-center" },\n        "This is a computer-generated report and does not require a physical signature."\n      )\n    )\n  );\n}',a='(reportsData, patientData, hospital, ref) => {\n  const formatDate = (date) => {\n    if (!date) return "";\n    return new Date(date).toLocaleDateString(\'en-IN\', { \n      day: \'2-digit\', \n      month: \'2-digit\', \n      year: \'numeric\' \n    });\n  };\n\n  const getValueColor = (value, normalRange, gender) => {\n    if (!value || !normalRange) return "inherit";\n  \n    if (normalRange.toLowerCase().includes("male") && normalRange.toLowerCase().includes("female")) {\n      const ranges = normalRange.split(/[,;]/).map(r => r.trim());\n      const genderRange = ranges.find(r => \n        r.toLowerCase().includes(gender.toLowerCase()) || \n        r.toLowerCase().startsWith(gender.toLowerCase().charAt(0))\n      );\n      \n      if (genderRange) {\n        normalRange = genderRange\n          .replace(/s*(male|female|m|f)?:?s*/gi, "")\n          .replace(/[()]/g, "")\n          .trim();\n      }\n    }\n  \n    const numericValue = parseFloat(value);\n    if (isNaN(numericValue)) return "inherit";\n  \n    if (normalRange.includes("-")) {\n      const [min, max] = normalRange.split("-").map(v => parseFloat(v));\n      if (!isNaN(min) && !isNaN(max)) {\n        if (numericValue < min) return "#FF4444";\n        if (numericValue > max) return "#FF4444";\n        return "#2ECC71";\n      }\n    } else if (normalRange.startsWith("<")) {\n      const max = parseFloat(normalRange.substring(1));\n      if (!isNaN(max)) return numericValue > max ? "#FF4444" : "#2ECC71";\n    } else if (normalRange.startsWith(">")) {\n      const min = parseFloat(normalRange.substring(1));\n      if (!isNaN(min)) return numericValue < min ? "#FF4444" : "#2ECC71";\n    }\n  \n    return "inherit";\n  };\n\n  const shouldUseTextarea = (unit, normalRange) => {\n    return !(["",undefined,null,"N/A"].includes(unit) && ["",undefined,null,"N/A"].includes(normalRange))\n  };\n\n  const getGenderSpecificRange = (normalRange, gender) => {\n    if (!normalRange || !gender) return normalRange;\n\n    if (normalRange.toLowerCase().includes("male") && normalRange.toLowerCase().includes("female")) {\n      const ranges = normalRange.split(/[,;]/).map(r => r.trim());\n      const genderRange = ranges.find(r => \n        r.toLowerCase().includes(gender.toLowerCase()) || \n        r.toLowerCase().startsWith(gender.toLowerCase().charAt(0))\n      );\n      \n      if (genderRange) {\n        return genderRange\n          .replace(/s*(male|female|m|f)?:?s*/gi, "")\n          .replace(/[()]/g, "")\n          .trim();\n      }\n    }\n    return normalRange;\n  };\n\n  // Group reports by table/non-table format\n  const groupedReports = reportsData.reduce((acc, report) => {\n    // Process report fields and sections into ordered items\n    const orderedItems = report.sections\n      ? (() => {\n          const items = [];\n          let currentPosition = 0;\n\n          // Sort sections by position\n          const sortedSections = [...(report.sections || [])].sort(\n            (a, b) => a.position - b.position\n          );\n\n          // Get all fields as array\n          const fields = Object.entries(report.report || {}).map(([key, value]) => ({\n            id: key,\n            ...value\n          }));\n\n          // Process each section and its fields\n          sortedSections.forEach((section, idx) => {\n            // Add fields before this section\n            const fieldsBeforeSection = fields.slice(\n              currentPosition,\n              section.position\n            );\n            items.push(\n              ...fieldsBeforeSection.map((field, index) => ({\n                type: "field",\n                ...field,\n                position: currentPosition + index,\n              }))\n            );\n\n            // Add the section\n            items.push({\n              type: "section",\n              id: section._id,\n              name: section.name,\n              position: section.position,\n            });\n\n            currentPosition = section.position;\n\n            // If it\'s the last section, add remaining fields\n            if (idx === sortedSections.length - 1) {\n              const remainingFields = fields.slice(currentPosition);\n              items.push(\n                ...remainingFields.map((field, index) => ({\n                  type: "field",\n                  ...field,\n                  position: currentPosition + index,\n                }))\n              );\n            }\n          });\n\n          // If no sections, just add all fields\n          if (sortedSections.length === 0) {\n            items.push(\n              ...fields.map((field, index) => ({\n                type: "field",\n                ...field,\n                position: index,\n              }))\n            );\n          }\n\n          return items;\n        })()\n      : Object.entries(report.report || {}).map(([key, value], index) => ({\n          type: "field",\n          id: key,\n          ...value,\n          position: index,\n        }));\n\n    // Check if report has any table format entries\n    const hasTableEntries = orderedItems.some(\n      item => item.type === "field" && shouldUseTextarea(item.unit, item.normalRange)\n    );\n\n    if (hasTableEntries) {\n      acc.tableReports.push({...report, orderedItems});\n    } else {\n      acc.nonTableReports.push({...report, orderedItems});\n    }\n    return acc;\n  }, { tableReports: [], nonTableReports: [] });\n\n  // Calculate footer height for proper content area sizing\n  const footerHeight = 50; // height in mm\n\n  return React.createElement("div", { \n    ref: ref, \n    className: "relative font-[Tinos] bg-white w-[210mm] min-h-[297mm] mx-auto box-border p-[10mm] print:absolute print:left-0 print:top-0 print:w-full print:[&_*]:visible print:visible print:p-5 print:[&_.no-print]:hidden"\n  },\n   \n\n    React.createElement(HospitalHeader, { hospitalInfo: hospital }),\n\n    React.createElement("div", { \n      className: "mt-[5px] p-2 bg-[#f8f9fa] rounded-[2mm] border border-[#e2e8f0] grid grid-cols-3 gap-2"\n    },\n      React.createElement("div", { className: "flex items-center" },\n        React.createElement("span", { className: "font-bold text-[#34495e] mr-[2mm] min-w-[20mm]" }, "Name:"),\n        React.createElement("span", { className: "text-[#2c3e50]" }, patientData?.patientName)\n      ),\n      React.createElement("div", { className: "flex items-center" },\n        React.createElement("span", { className: "font-bold text-[#34495e] mr-[2mm] min-w-[20mm]" }, "Age/Gender:"),\n        React.createElement("span", { className: "text-[#2c3e50]" }, \n          `${patientData?.age}/${patientData?.patient?.gender || patientData?.gender}`\n        )\n      ),\n      React.createElement("div", { className: "flex items-center" },\n        React.createElement("span", { className: "font-bold text-[#34495e] mr-[2mm] min-w-[20mm]" }, "Reg No/Lab No:"),\n        React.createElement("span", { className: "text-[#2c3e50]" }, \n          `${patientData?.registrationNumber ? patientData.registrationNumber : "--"}/${patientData?.labNumber ? patientData.labNumber : "--"}`\n        )\n      ),\n      React.createElement("div", { className: "flex items-start min-h-[24px]" },\n        React.createElement("span", { className: "font-bold text-[#34495e] mr-[2mm] min-w-[20mm] mt-[2px]" }, "Address:"),\n        React.createElement("span", { \n          className: "text-[#2c3e50] flex-1 break-words overflow-hidden",\n          style: {\n            lineHeight: \'1.2\',\n            maxHeight: \'2.4em\',\n            overflow: \'hidden\',\n            textOverflow: \'ellipsis\'\n          }\n        }, patientData?.address)\n      ),\n      React.createElement("div", { className: "flex items-center" },\n        React.createElement("span", { className: "font-bold text-[#34495e] mr-[2mm] min-w-[20mm]" }, "Contact:"),\n        React.createElement("span", { className: "text-[#2c3e50]" }, patientData?.contactNumber)\n      ),\n      React.createElement("div", { className: "flex items-center" },\n        React.createElement("span", { className: "font-bold text-[#34495e] mr-[2mm] min-w-[20mm]" }, "Date:"),\n        React.createElement("span", { className: "text-[#2c3e50]" }, formatDate(reportsData[0]?.date))\n      )\n    ),\n\n    // Report Title (with page-break-after: avoid to keep with content)\n    React.createElement("div", { className: "text-center my-2" },\n      React.createElement("h2", { className: "text-lg font-bold underline tracking-wider" },\n        reportsData.map(report => report.name).join(", ")\n      )\n    ),\n\n    // Report Content (with padding to avoid footer overlap)\n    React.createElement("div", { className: "border-t-2 border-b-2 border-[#ecf0f1] pb-[10mm]" },\n      // Table format reports\n      groupedReports.tableReports.length > 0 && React.createElement(React.Fragment, null,\n        React.createElement("div", { \n          className: "grid grid-cols-12 gap-4 bg-[#f8f9fa] pt-1 tracking-wide font-bold text-[16px] mb-2",\n        },\n          React.createElement("div", { className: "col-span-5 font-bold pr-[2mm]" }, "Test Name"),\n          React.createElement("div", { className: "col-span-2 font-bold text-center" }, "Result"),\n          React.createElement("div", { className: "col-span-2 font-bold text-center" }, "Unit"),\n          React.createElement("div", { className: "col-span-3 font-bold text-right" }, "Normal Range")\n        ),\n\n        groupedReports.tableReports.map((reportData, reportIndex) => \n          React.createElement("div", { \n            key: reportIndex, \n            className: "mb-1",\n          },\n            React.createElement("h3", { \n              className: "text-base mb-1 tracking-wider font-bold",\n            }, \n              React.createElement("span",{},reportData.name),\n              React.createElement("span",{className:"text-xs pl-3"},formatDate(reportData.date))\n            ),\n            reportData.orderedItems.map((item, index) => \n              item.type === "section" \n                ? React.createElement("div", {\n                    key: `section-${index}`,\n                    className: "col-span-12  pr-[2mm] pl-4 font-bold text-[16px] text-[#2c3e50]"\n                  }, item.name)\n                : item.value ? React.createElement("div", { \n                    key: `table-${reportIndex}-${index}`,\n                    className: "grid grid-cols-12 gap-4 items-center text-[14px]",\n                  },\n                    React.createElement("div", { className: "col-span-5 text-[#2c3e50] pr-[2mm] pl-4" }, item.label),\n                    React.createElement("div", { \n                      className: "col-span-2 text-[10pt] text-center font-bold",\n                      style: { color: getValueColor(item.value, item.normalRange, patientData?.patient?.gender || patientData.gender) }\n                    }, item.value),\n                    React.createElement("div", { className: "col-span-2 text-center" }, item.unit),\n                    React.createElement("div", { className: "col-span-3 text-right" }, \n                      getGenderSpecificRange(item.normalRange, patientData?.patient?.gender || patientData.gender)\n                    )\n                  ) : React.createElement("div",null)\n            )\n          )\n        )\n      ),\n\n      // Non-table format reports\n      groupedReports.nonTableReports.length > 0 && React.createElement(React.Fragment, null,\n        groupedReports.nonTableReports.map((reportData, reportIndex) => \n          React.createElement("div", { \n            key: reportIndex, \n            className: "",\n          },\n            React.createElement("h3", { \n              className: "text-base font-bold tracking-wider",\n            }, \n              React.createElement("span",{},reportData.name),\n              React.createElement("span",{className:"text-xs pl-3"},formatDate(reportData.date))\n            ),\n            reportData.orderedItems.map((item, index) => \n              item.type === "section"\n                ? React.createElement("div", {\n                    key: `section-${index}`,\n                    className: "text-base mb-1 pl-4 text-[#2c3e50]"\n                  }, item.name)\n                : item.value ? React.createElement("div", { \n                    key: `non-table-${reportIndex}-${index}`,\n                    className: "grid grid-cols-12 gap-5 py-1 items-baseline"\n                  },\n                    React.createElement("div", { className: "text-[12pt] pl-4 col-span-2 font-bold" }, item.label),\n                    React.createElement("div", { \n                      className: "text-[11pt] flex col-span-10 whitespace-pre-wrap break-all w-full",\n                      style: {\n                        color: getValueColor(item.value, item.normalRange, patientData?.patient?.gender || patientData.gender),\n                        wordBreak: "break-word",\n                        overflowWrap: "break-word",\n                        lineHeight: "1"\n                      }\n                    }, item.value)\n                  ) : React.createElement("div",null)\n            )\n          )\n        )\n      )\n    )\n    \n  \n  );\n}'},8756:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var r=n(6981);function a(e,t,n){return(0,r.f)(e,-t,n)}},8796:(e,t,n)=>{"use strict";var r;n.d(t,{we:()=>E});var a=n(5043),s=n(5702),i=(n(7950),n(6178));const o={...r||(r=n.t(a,2))},l=o.useInsertionEffect||(e=>e());function c(e){const t=a.useRef((()=>{0}));return l((()=>{t.current=e})),a.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}const d="ArrowUp",u="ArrowDown",m="ArrowLeft",h="ArrowRight";var p="undefined"!==typeof document?a.useLayoutEffect:a.useEffect;const f=[m,h],v=[d,u];let g=!1,x=0;const y=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+x++;const b=o.useId||function(){const[e,t]=a.useState((()=>g?y():void 0));return p((()=>{null==e&&t(y())}),[]),a.useEffect((()=>{g=!0}),[]),e};function j(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}const w=a.createContext(null),N=a.createContext(null),_=()=>{var e;return(null==(e=a.useContext(w))?void 0:e.id)||null},S=()=>a.useContext(N);function E(e){void 0===e&&(e={});const{nodeId:t}=e,n=function(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=b(),i=a.useRef({}),[o]=a.useState((()=>j())),l=null!=_(),[d,u]=a.useState(r.reference),m=c(((e,t,r)=>{i.current.openEvent=e?t:void 0,o.emit("openchange",{open:e,event:t,reason:r,nested:l}),null==n||n(e,t,r)})),h=a.useMemo((()=>({setPositionReference:u})),[]),p=a.useMemo((()=>({reference:d||r.reference||null,floating:r.floating||null,domReference:r.reference})),[d,r.reference,r.floating]);return a.useMemo((()=>({dataRef:i,open:t,onOpenChange:m,elements:p,events:o,floatingId:s,refs:h})),[t,m,p,o,s,h])}({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[l,d]=a.useState(null),[u,m]=a.useState(null),h=(null==o?void 0:o.domReference)||l,f=a.useRef(null),v=S();p((()=>{h&&(f.current=h)}),[h]);const g=(0,i.we)({...e,elements:{...o,...u&&{reference:u}}}),x=a.useCallback((e=>{const t=(0,s.vq)(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;m(t),g.refs.setReference(t)}),[g.refs]),y=a.useCallback((e=>{((0,s.vq)(e)||null===e)&&(f.current=e,d(e)),((0,s.vq)(g.refs.reference.current)||null===g.refs.reference.current||null!==e&&!(0,s.vq)(e))&&g.refs.setReference(e)}),[g.refs]),w=a.useMemo((()=>({...g.refs,setReference:y,setPositionReference:x,domReference:f})),[g.refs,y,x]),N=a.useMemo((()=>({...g.elements,domReference:h})),[g.elements,h]),E=a.useMemo((()=>({...g,...r,refs:w,elements:N,nodeId:t})),[g,w,N,t,r]);return p((()=>{r.dataRef.current.floatingContext=E;const e=null==v?void 0:v.nodesRef.current.find((e=>e.id===t));e&&(e.context=E)})),a.useMemo((()=>({...g,context:E,refs:w,elements:N})),[g,w,N,E])}},8848:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(9219),a=n(1844),s=n(4524),i=n(1176);function o(e,t,n){const[o,l]=(0,a.x)(n?.in,e,t),c=(0,i.o)(o),d=(0,i.o)(l),u=+c-(0,r.G)(c),m=+d-(0,r.G)(d);return Math.round((u-m)/s.w4)}},8883:(e,t,n)=>{var r=n(5652),a=n(6571);e.exports=function(e,t){var n=-1,s=a(e)?Array(e.length):[];return r(e,(function(e,r,a){s[++n]=t(e,r,a)})),s}},8895:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},8901:(e,t,n)=>{"use strict";n.d(t,{wr:()=>r,xX:()=>a});const r={sections:[{id:"patientInfo",title:"Patient Information",className:"bg-secondary/10 rounded-lg p-3 mb-4",fields:[{id:"name",label:"Name",type:"text",width:"full"},{id:"age",label:"Age",type:"text",width:"half"},{id:"gender",label:"Gender",type:"text",width:"half"},{id:"registrationNumber",label:"UHID No",type:"text",width:"full",searchable:!0},{id:"ipdNumber",label:"IPD No",type:"text",width:"full"},{id:"contactNumber",label:"Contact",type:"text",width:"full"},{id:"address",label:"Address",type:"text",width:"full"},{id:"roomNumber",label:"Room",type:"text",width:"full"},{id:"admissionDate",label:"Admit Date",type:"date",width:"full"},{id:"dateDischarged",label:"Discharge Date",type:"date",width:"full"},{id:"timeDischarged",label:"Discharge Time",type:"time",width:"full"},{id:"admittedTime",label:"Admitted Time",type:"time",width:"full"},{id:"husband",label:"Husband Name",type:"text",width:"full"}]},{id:"clinicalInfo",fields:[{id:"diagnosis",label:"Diagnosis",type:"multiselect",component:"MultiSelectInput",suggestions:"diagnosisTemplate",width:"full"},{id:"clinicalSummary",label:"Clinical Summary",type:"textarea",width:"full"},{id:"comorbidities",label:"Comorbidities",type:"multiselect",component:"MultiSelectInput",suggestions:"comorbidities",width:"full",extraComponent:"ComorbidityHandling"},{id:"admissionVitals",label:"Admission Vitals",type:"vitals",prefix:"admission",width:"full"},{id:"conditionOnAdmission",label:"Condition on Admission",type:"textarea",width:"full"},{id:"investigations",label:"Investigations",type:"investigations",width:"full"},{id:"treatment",label:"Treatment",type:"textarea",width:"full"},{id:"babyDetails",label:"Baby Details",type:"babyTable",component:"BabyTable",width:"full"},{id:"dischargeVitals",label:"Discharge Vitals",type:"vitals",prefix:"discharge",width:"full"},{id:"conditionOnDischarge",label:"Condition on Discharge",type:"textarea",width:"full"},{id:"medicineAdvice",label:"Medicine/Advice",type:"medicineAdvice",width:"full"}]}]},a=()=>r},8902:(e,t,n)=>{var r=n(4816),a=n(6179),s=n(6704);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=s,e.exports=i},8990:(e,t,n)=>{var r=n(9995)(n(2520));e.exports=r},9057:(e,t,n)=>{var r=n(5324),a=n(2777),s=n(4052),i=n(9194),o=n(6173),l=n(914);e.exports=function(e,t,n){for(var c=-1,d=(t=r(t,e)).length,u=!1;++c<d;){var m=l(t[c]);if(!(u=null!=e&&n(e,m)))break;e=e[m]}return u||++c!=d?u:!!(d=null==e?0:e.length)&&o(d)&&i(m,d)&&(s(e)||a(e))}},9062:(e,t,n)=>{"use strict";e.exports=n(6378)},9096:(e,t,n)=>{var r=n(9256),a=n(5029),s=n(3279),i=n(4052),o=n(3932);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?i(e)?a(e[0],e[1]):r(e):o(e)}},9115:(e,t,n)=>{var r=n(5967),a=n(6311),s=n(715);e.exports=function(e){return a(e)?s(e):r(e)}},9140:(e,t,n)=>{var r=n(7303);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},9160:(e,t,n)=>{var r=n(6913),a=n(2761);e.exports=function(e){return"number"==typeof e||a(e)&&"[object Number]"==r(e)}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},9219:(e,t,n)=>{"use strict";n.d(t,{G:()=>a});var r=n(2316);function a(e){const t=(0,r.a)(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}},9250:(e,t,n)=>{"use strict";n.d(t,{B8:()=>y,F1:()=>O,GF:()=>A,IF:()=>E,SM:()=>_,Ur:()=>N,Yq:()=>j,aj:()=>w,hn:()=>P,tP:()=>S,vv:()=>b});var r=n(5043),a=n(3390),s=n(8106),i=n(3400),o=n(852),l=n(1208),c=n(8134),d=n(1176),u=n(6691),m=n(8756),h=n(1620),p=n(8605),f=n(4912),v=n(3695),g=n(9766),x=n(579);const y="https://thehospital.in",b=e=>{const t=e%1!==0,n=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:t?2:0}).format(Math.abs(e)).replace(/^(\D+)/,"\u20b9");return e<0?`-${n}`:n},j=e=>{if(!e)return"N/A";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},w={"Patient Management":[{id:"create_patients",label:"Create Patients"},{id:"delete_patients",label:"Delete Patients"},{id:"edit_patients",label:"Edit Patients"},{id:"can_discharge",label:"Can Discharge"},{id:"give_discount",label:"Give Discount"}],"Inventory Management":[{id:"edit_inventory_price",label:"Edit Prices"}],"Financial Management":[{id:"view_financial",label:"View Financial Data"},{id:"edit_bills",label:"Edit Bills"},{id:"view_reports",label:"View Reports"},{id:"record_expense",label:"Record Expense"},{id:"view_otherscollection_all",label:"View Other's collection for all days"},{id:"view_otherscollection_for_just_today",label:"View Other's collection for only today"}],"Staff Management":[{id:"view_staff",label:"View Staff"},{id:"create_staff",label:"Create Staff"},{id:"edit_staff",label:"Edit Staff"},{id:"delete_staff",label:"Delete Staff"}],"Hospital Management":[{id:"edit_hospital",label:"Edit Hospital"}],"Doctor Section":[{id:"make_prescription",label:"Make Prescription"}]},N=e=>{let{from:t,to:n,onSelect:d,onSearch:u,onCancel:m}=e;const[h,p]=(0,r.useState)(!1),f=new Date,v=(0,l.a)(f,1);return(0,x.jsx)("div",{className:(0,g.cn)("grid gap-2"),children:(0,x.jsxs)(s.AM,{open:h,onOpenChange:p,children:[(0,x.jsx)(s.Wv,{asChild:!0,children:(0,x.jsxs)(a.$,{id:"date",variant:"outline",className:(0,g.cn)("w-[300px] justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[(0,x.jsx)(o.CTc,{className:"mr-2 h-4 w-4"}),t?n?(0,x.jsxs)(x.Fragment,{children:[(0,c.GP)(t,"LLL dd, y")," - ",(0,c.GP)(n,"LLL dd, y")]}):(0,c.GP)(t,"LLL dd, y"):(0,x.jsx)("span",{children:"Pick a date range"})]})}),(0,x.jsxs)(s.hl,{className:"w-auto p-0",align:"start",children:[(0,x.jsx)(i.V,{initialFocus:!0,mode:"range",defaultMonth:v,selected:{from:t,to:n},onSelect:d,numberOfMonths:2,toDate:f}),(0,x.jsxs)("div",{className:"flex justify-end gap-2 p-2",children:[(0,x.jsx)(a.$,{variant:"outline",size:"sm",onClick:()=>{m(),p(!1)},children:"Cancel"}),(0,x.jsx)(a.$,{size:"sm",onClick:()=>{u(),p(!1)},children:"Search"})]})]})]})})},_=e=>{const t=new Date;let n,r;switch(e){case"Today":n=(0,d.o)(t),r=(0,u.D)(t);break;case"Yesterday":const e=(0,m.e)(t,1);n=(0,d.o)(e),r=(0,u.D)(e);break;case"This Week":n=(0,h.k)(t,{weekStartsOn:0}),r=(0,p.$)(t,{weekStartsOn:0});break;case"This Month":n=(0,f.w)(t),r=(0,v.p)(t);break;case"Last 7 Days":n=(0,d.o)((0,m.e)(t,6)),r=(0,u.D)(t);break;default:n=(0,d.o)((0,m.e)(t,30)),r=(0,u.D)(t)}return{from:n,to:r}},S=(e,t)=>{if(0===t)return e>0?100:0;const n=(e-t)/Math.abs(t)*100;return Number(n.toFixed(2))},E=e=>{if(!e||"string"!==typeof e)return"";const t=e.trim().replace(/\s+/g," "),n=t.split(" ");if(2===n.length){const[e,t]=n,r=t.toUpperCase();if(e.includes(":")&&("AM"===r||"PM"===r)){const[t,n]=e.split(":"),a=parseInt(t,10),s=parseInt(n,10);if(!isNaN(a)&&!isNaN(s)&&a>=1&&a<=12&&s>=0&&s<=59)return`${t.padStart(2,"0")}:${n.padStart(2,"0")} ${r}`}}try{const[e,n]=t.split(":"),r=parseInt(e,10),a=parseInt(n,10);if(isNaN(r)||isNaN(a)||r<0||r>23||a<0||a>59)return"";const s=r>=12?"PM":"AM";return`${(r%12||12).toString().padStart(2,"0")}:${n.toString().padStart(2,"0")} ${s}`}catch(r){return""}},C=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],D=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],T=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];function k(e){if(0===e)return"";let t="";if(e>=100&&(t+=C[Math.floor(e/100)]+" Hundred ",e%=100),e>=20)t+=D[Math.floor(e/10)]+" ",e%=10;else if(e>=10)return t+=T[e-10]+" ",t.trim();return e>0&&(t+=C[e]+" "),t.trim()}function A(e){if(0===e)return"Zero";const t=Math.floor(e/1e7),n=Math.floor(e%1e7/1e5),r=Math.floor(e%1e5/1e3),a=e%1e3;let s="";return t>0&&(s+=k(t)+" Crore "),n>0&&(s+=k(n)+" Lakh "),r>0&&(s+=k(r)+" Thousand "),a>0&&(s+=k(a)),s.trim()}const P="https://thousandwayshospital.s3.ap-south-1.amazonaws.com";function O(e){let{yearLabel:t="Yrs",monthLabel:n="Months",dayLabel:r="Days"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e||void 0===e||""===e)return"N/A";if("number"===typeof e)return`${e} ${t}`;const a=e.toString().trim().split("-").map((e=>e.trim())).filter(Boolean);let s=0,i=0,o=0;if(1===a.length)s=parseInt(a[0],10)||0;else if(2===a.length){s=parseInt(a[0],10)||0;const e=parseInt(a[1],10)||0;e<=12?i=e:o=e}else a.length>=3&&(s=parseInt(a[0],10)||0,i=parseInt(a[1],10)||0,o=parseInt(a[2],10)||0);const l=[];return s&&l.push(`${s} ${t}`),i&&l.push(`${i} ${n}`),o&&l.push(`${o} ${r}`),l.join(" ").trim()||`0 ${t}`}},9256:(e,t,n)=>{var r=n(6532),a=n(3781),s=n(1310);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},9292:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9364:(e,t,n)=>{var r=n(9742),a=n(9096),s=n(61);e.exports=function(e,t){return e&&e.length?r(e,a(t,2),s):void 0}},9394:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).has(e)}},9395:(e,t,n)=>{var r=n(4262),a=n(9621),s=n(8673);e.exports=function(e){return r(e,s,a)}},9415:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var r=n(1620);function a(e,t){return(0,r.k)(e,{...t,weekStartsOn:1})}},9417:(e,t,n)=>{var r=n(6686);e.exports=function(e){return e===e&&!r(e)}},9504:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n(849),a=n(2440),s=n(1620),i=n(2316);function o(e,t){const n=(0,i.a)(e,t?.in),o=n.getFullYear(),l=(0,r.q)(),c=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??l.firstWeekContainsDate??l.locale?.options?.firstWeekContainsDate??1,d=(0,a.w)(t?.in||e,0);d.setFullYear(o+1,0,c),d.setHours(0,0,0,0);const u=(0,s.k)(d,t),m=(0,a.w)(t?.in||e,0);m.setFullYear(o,0,c),m.setHours(0,0,0,0);const h=(0,s.k)(m,t);return+n>=+u?o+1:+n>=+h?o:o-1}},9621:(e,t,n)=>{var r=n(7529),a=n(7828),s=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return s.call(e,t)})))}:a;e.exports=o},9676:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,a,s){for(var i=-1,o=n(t((r-e)/(a||1)),0),l=Array(o);o--;)l[s?o:++i]=e,e+=a;return l}},9686:e=>{e.exports=function(e){return null==e}},9742:(e,t,n)=>{var r=n(9841);e.exports=function(e,t,n){for(var a=-1,s=e.length;++a<s;){var i=e[a],o=t(i);if(null!=o&&(void 0===l?o===o&&!r(o):n(o,l)))var l=o,c=i}return c}},9766:(e,t,n)=>{"use strict";n.d(t,{cn:()=>Z});var r=n(8387);const a=e=>{const t=l(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),s(n,t)||o(e)},getConflictingClassGroupIds:(e,t)=>{const a=n[e]||[];return t&&r[e]?[...a,...r[e]]:a}}},s=(e,t)=>{if(0===e.length)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?s(e.slice(1),r):void 0;if(a)return a;if(0===t.validators.length)return;const i=e.join("-");return t.validators.find((e=>{let{validator:t}=e;return t(i)}))?.classGroupId},i=/^\[(.+)\]$/,o=e=>{if(i.test(e)){const t=i.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},l=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return m(Object.entries(e.classGroups),n).forEach((e=>{let[n,a]=e;c(a,r,n,t)})),r},c=(e,t,n,r)=>{e.forEach((e=>{if("string"!==typeof e){if("function"===typeof e)return u(e)?void c(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach((e=>{let[a,s]=e;c(s,d(t,a),n,r)}))}else{(""===e?t:d(t,e)).classGroupId=n}}))},d=(e,t)=>{let n=e;return t.split("-").forEach((e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)})),n},u=e=>e.isThemeGetter,m=(e,t)=>t?e.map((e=>{let[n,r]=e;return[n,r.map((e=>"string"===typeof e?t+e:"object"===typeof e?Object.fromEntries(Object.entries(e).map((e=>{let[n,r]=e;return[t+n,r]}))):e))]})):e,h=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(a,s)=>{n.set(a,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(a(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):a(e,t)}}},p=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,a=t[0],s=t.length,i=e=>{const n=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===a&&(r||e.slice(u,u+s)===t)){n.push(e.slice(l,u)),l=u+s;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:n,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return n?e=>n({className:e,parseClassName:i}):i},f=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach((e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)})),t.push(...n.sort()),t},v=/\s+/;function g(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=x(e))&&(r&&(r+=" "),r+=t);return r}const x=e=>{if("string"===typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=x(e[r]))&&(n&&(n+=" "),n+=t);return n};function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let s,i,o,l=function(t){const r=n.reduce(((e,t)=>t(e)),e());return s=(e=>({cache:h(e.cacheSize),parseClassName:p(e),...a(e)}))(r),i=s.cache.get,o=s.cache.set,l=c,c(t)};function c(e){const t=i(e);if(t)return t;const n=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,s=[],i=e.trim().split(v);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=n(e);let m=Boolean(u),h=r(m?d.substring(0,u):d);if(!h){if(!m){o=e+(o.length>0?" "+o:o);continue}if(h=r(d),!h){o=e+(o.length>0?" "+o:o);continue}m=!1}const p=f(t).join(":"),v=c?p+"!":p,g=v+h;if(s.includes(g))continue;s.push(g);const x=a(h,m);for(let n=0;n<x.length;++n){const e=x[n];s.push(v+e)}o=e+(o.length>0?" "+o:o)}return o})(e,s);return o(e,n),n}return function(){return l(g.apply(null,arguments))}}const b=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},j=/^\[(?:([a-z-]+):)?(.+)\]$/i,w=/^\d+\/\d+$/,N=new Set(["px","full","screen"]),_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,S=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,E=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,D=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,T=e=>A(e)||N.has(e)||w.test(e),k=e=>H(e,"length",V),A=e=>Boolean(e)&&!Number.isNaN(Number(e)),P=e=>H(e,"number",A),O=e=>Boolean(e)&&Number.isInteger(Number(e)),R=e=>e.endsWith("%")&&A(e.slice(0,-1)),M=e=>j.test(e),I=e=>_.test(e),L=new Set(["length","size","percentage"]),F=e=>H(e,L,q),B=e=>H(e,"position",q),W=new Set(["image","url"]),$=e=>H(e,W,K),U=e=>H(e,"",G),z=()=>!0,H=(e,t,n)=>{const r=j.exec(e);return!!r&&(r[1]?"string"===typeof t?r[1]===t:t.has(r[1]):n(r[2]))},V=e=>S.test(e)&&!E.test(e),q=()=>!1,G=e=>C.test(e),K=e=>D.test(e),Y=(Symbol.toStringTag,()=>{const e=b("colors"),t=b("spacing"),n=b("blur"),r=b("brightness"),a=b("borderColor"),s=b("borderRadius"),i=b("borderSpacing"),o=b("borderWidth"),l=b("contrast"),c=b("grayscale"),d=b("hueRotate"),u=b("invert"),m=b("gap"),h=b("gradientColorStops"),p=b("gradientColorStopPositions"),f=b("inset"),v=b("margin"),g=b("opacity"),x=b("padding"),y=b("saturate"),j=b("scale"),w=b("sepia"),N=b("skew"),_=b("space"),S=b("translate"),E=()=>["auto",M,t],C=()=>[M,t],D=()=>["",T,k],L=()=>["auto",A,M],W=()=>["","0",M],H=()=>[A,M];return{cacheSize:500,separator:":",theme:{colors:[z],spacing:[T,k],blur:["none","",I,M],brightness:H(),borderColor:[e],borderRadius:["none","","full",I,M],borderSpacing:C(),borderWidth:D(),contrast:H(),grayscale:W(),hueRotate:H(),invert:W(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[R,k],inset:E(),margin:E(),opacity:H(),padding:C(),saturate:H(),scale:H(),sepia:W(),skew:H(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",M]}],container:["container"],columns:[{columns:[I]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",M]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",O,M]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",M]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",O,M]}],"grid-cols":[{"grid-cols":[z]}],"col-start-end":[{col:["auto",{span:["full",O,M]},M]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[z]}],"row-start-end":[{row:["auto",{span:[O,M]},M]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",M]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",M]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",M,t]}],"min-w":[{"min-w":[M,t,"min","max","fit"]}],"max-w":[{"max-w":[M,t,"none","full","min","max","fit","prose",{screen:[I]},I]}],h:[{h:[M,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[M,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[M,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[M,t,"auto","min","max","fit"]}],"font-size":[{text:["base",I,k]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",P]}],"font-family":[{font:[z]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",M]}],"line-clamp":[{"line-clamp":["none",A,P]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",T,M]}],"list-image":[{"list-image":["none",M]}],"list-style-type":[{list:["none","disc","decimal",M]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",T,k]}],"underline-offset":[{"underline-offset":["auto",T,M]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",M]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",M]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",B]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",F]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},$]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[T,M]}],"outline-w":[{outline:[T,k]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[T,k]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",I,U]}],"shadow-color":[{shadow:[z]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",I,M]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",M]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",M]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",M]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[O,M]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",M]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",M]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",M]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[T,k,P]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}),X=y(Y);function Z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return X((0,r.$)(t))}},9786:(e,t,n)=>{"use strict";n.d(t,{JY:()=>Ra,sx:()=>vs,gL:()=>bs});var r=n(5043);function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var h="function"===typeof Symbol&&Symbol.observable||"@@observable",p=function(){return Math.random().toString(36).substring(7).split("").join(".")},f={INIT:"@@redux/INIT"+p(),REPLACE:"@@redux/REPLACE"+p(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+p()}};function v(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function g(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(m(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(m(1));return n(g)(e,t)}if("function"!==typeof e)throw new Error(m(2));var a=e,s=t,i=[],o=i,l=!1;function c(){o===i&&(o=i.slice())}function d(){if(l)throw new Error(m(3));return s}function u(e){if("function"!==typeof e)throw new Error(m(4));if(l)throw new Error(m(5));var t=!0;return c(),o.push(e),function(){if(t){if(l)throw new Error(m(6));t=!1,c();var n=o.indexOf(e);o.splice(n,1),i=null}}}function p(e){if(!v(e))throw new Error(m(7));if("undefined"===typeof e.type)throw new Error(m(8));if(l)throw new Error(m(9));try{l=!0,s=a(s,e)}finally{l=!1}for(var t=i=o,n=0;n<t.length;n++){(0,t[n])()}return e}return p({type:f.INIT}),(r={dispatch:p,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(m(10));a=e,p({type:f.REPLACE})}})[h]=function(){var e,t=u;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(m(11));function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[h]=function(){return this},e},r}function x(e,t){return function(){return t(e.apply(this,arguments))}}function y(e,t){if("function"===typeof e)return x(e,t);if("object"!==typeof e||null===e)throw new Error(m(16));var n={};for(var r in e){var a=e[r];"function"===typeof a&&(n[r]=x(a,t))}return n}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var j=r.createContext(null);var w=function(e){e()},N=function(){return w};var _={notify:function(){},get:function(){return[]}};function S(e,t){var n,r=_;function a(){i.onStateChange&&i.onStateChange()}function s(){n||(n=t?t.addNestedSub(a):e.subscribe(a),r=function(){var e=N(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,a=n={callback:e,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){r&&null!==t&&(r=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}())}var i={addNestedSub:function(e){return s(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:a,isSubscribed:function(){return Boolean(n)},trySubscribe:s,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=_)},getListeners:function(){return r}};return i}var E="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;const C=function(e){var t=e.store,n=e.context,a=e.children,s=(0,r.useMemo)((function(){var e=S(t);return{store:t,subscription:e}}),[t]),i=(0,r.useMemo)((function(){return t.getState()}),[t]);E((function(){var e=s.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[s,i]);var o=n||j;return r.createElement(o.Provider,{value:s},a)};function D(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}var T=n(219),k=n.n(T),A=n(2086),P=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],O=["reactReduxForwardedRef"],R=[],M=[null,null];function I(e,t){var n=e[1];return[t.payload,n+1]}function L(e,t,n){E((function(){return e.apply(void 0,t)}),n)}function F(e,t,n,r,a,s,i){e.current=r,t.current=a,n.current=!1,s.current&&(s.current=null,i())}function B(e,t,n,r,a,s,i,o,l,c){if(e){var d=!1,u=null,m=function(){if(!d){var e,n,m=t.getState();try{e=r(m,a.current)}catch(h){n=h,u=h}n||(u=null),e===s.current?i.current||l():(s.current=e,o.current=e,i.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=m,n.trySubscribe(),m();return function(){if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,u)throw u}}}var W=function(){return[null,0]};function $(e,t){void 0===t&&(t={});var n=t,a=n.getDisplayName,s=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,o=n.methodName,l=void 0===o?"connectAdvanced":o,c=n.renderCountProp,d=void 0===c?void 0:c,u=n.shouldHandleStateChanges,m=void 0===u||u,h=n.storeKey,p=void 0===h?"store":h,f=(n.withRef,n.forwardRef),v=void 0!==f&&f,g=n.context,x=void 0===g?j:g,y=D(n,P),b=x;return function(t){var n=t.displayName||t.name||"Component",a=s(n),o=i({},y,{getDisplayName:s,methodName:l,renderCountProp:d,shouldHandleStateChanges:m,storeKey:p,displayName:a,wrappedComponentName:n,WrappedComponent:t}),c=y.pure;var u=c?r.useMemo:function(e){return e()};function h(n){var a=(0,r.useMemo)((function(){var e=n.reactReduxForwardedRef,t=D(n,O);return[n.context,e,t]}),[n]),s=a[0],l=a[1],c=a[2],d=(0,r.useMemo)((function(){return s&&s.Consumer&&(0,A.isContextConsumer)(r.createElement(s.Consumer,null))?s:b}),[s,b]),h=(0,r.useContext)(d),p=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(h)&&Boolean(h.store);var f=p?n.store:h.store,v=(0,r.useMemo)((function(){return function(t){return e(t.dispatch,o)}(f)}),[f]),g=(0,r.useMemo)((function(){if(!m)return M;var e=S(f,p?null:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[f,p,h]),x=g[0],y=g[1],j=(0,r.useMemo)((function(){return p?h:i({},h,{subscription:x})}),[p,h,x]),w=(0,r.useReducer)(I,R,W),N=w[0][0],_=w[1];if(N&&N.error)throw N.error;var E=(0,r.useRef)(),C=(0,r.useRef)(c),T=(0,r.useRef)(),k=(0,r.useRef)(!1),P=u((function(){return T.current&&c===C.current?T.current:v(f.getState(),c)}),[f,N,c]);L(F,[C,E,k,c,P,T,y]),L(B,[m,f,x,v,C,E,k,T,y,_],[f,x,v]);var $=(0,r.useMemo)((function(){return r.createElement(t,i({},P,{ref:l}))}),[l,t,P]);return(0,r.useMemo)((function(){return m?r.createElement(d.Provider,{value:j},$):$}),[d,$,j])}var f=c?r.memo(h):h;if(f.WrappedComponent=t,f.displayName=h.displayName=a,v){var g=r.forwardRef((function(e,t){return r.createElement(f,i({},e,{reactReduxForwardedRef:t}))}));return g.displayName=a,g.WrappedComponent=t,k()(g,t)}return k()(f,t)}}function U(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function z(e,t){if(U(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!U(e[n[a]],t[n[a]]))return!1;return!0}function H(e){return function(t,n){var r=e(t,n);function a(){return r}return a.dependsOnOwnProps=!1,a}}function V(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function q(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=V(e);var a=r(t,n);return"function"===typeof a&&(r.mapToProps=a,r.dependsOnOwnProps=V(a),a=r(t,n)),a},r}}const G=[function(e){return"function"===typeof e?q(e):void 0},function(e){return e?void 0:H((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?H((function(t){return function(e,t){var n={},r=function(r){var a=e[r];"function"===typeof a&&(n[r]=function(){return t(a.apply(void 0,arguments))})};for(var a in e)r(a);return n}(e,t)})):void 0}];const K=[function(e){return"function"===typeof e?q(e):void 0},function(e){return e?void 0:H((function(){return{}}))}];function Y(e,t,n){return i({},n,e,t)}const X=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,a=n.pure,s=n.areMergedPropsEqual,i=!1;return function(t,n,o){var l=e(t,n,o);return i?a&&s(l,r)||(r=l):(i=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return Y}}];var Z=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function J(e,t,n,r){return function(a,s){return n(e(a,s),t(r,s),s)}}function Q(e,t,n,r,a){var s,i,o,l,c,d=a.areStatesEqual,u=a.areOwnPropsEqual,m=a.areStatePropsEqual,h=!1;function p(a,h){var p=!u(h,i),f=!d(a,s,h,i);return s=a,i=h,p&&f?(o=e(s,i),t.dependsOnOwnProps&&(l=t(r,i)),c=n(o,l,i)):p?(e.dependsOnOwnProps&&(o=e(s,i)),t.dependsOnOwnProps&&(l=t(r,i)),c=n(o,l,i)):f?function(){var t=e(s,i),r=!m(t,o);return o=t,r&&(c=n(o,l,i)),c}():c}return function(a,d){return h?p(a,d):(o=e(s=a,i=d),l=t(r,i),c=n(o,l,i),h=!0,c)}}function ee(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,a=t.initMergeProps,s=D(t,Z),i=n(e,s),o=r(e,s),l=a(e,s);return(s.pure?Q:J)(i,o,l,e,s)}var te=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function ne(e,t,n){for(var r=t.length-1;r>=0;r--){var a=t[r](e);if(a)return a}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function re(e,t){return e===t}function ae(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?$:n,a=t.mapStateToPropsFactories,s=void 0===a?K:a,o=t.mapDispatchToPropsFactories,l=void 0===o?G:o,c=t.mergePropsFactories,d=void 0===c?X:c,u=t.selectorFactory,m=void 0===u?ee:u;return function(e,t,n,a){void 0===a&&(a={});var o=a,c=o.pure,u=void 0===c||c,h=o.areStatesEqual,p=void 0===h?re:h,f=o.areOwnPropsEqual,v=void 0===f?z:f,g=o.areStatePropsEqual,x=void 0===g?z:g,y=o.areMergedPropsEqual,b=void 0===y?z:y,j=D(o,te),w=ne(e,s,"mapStateToProps"),N=ne(t,l,"mapDispatchToProps"),_=ne(n,d,"mergeProps");return r(m,i({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:N,initMergeProps:_,pure:u,areStatesEqual:p,areOwnPropsEqual:v,areStatePropsEqual:x,areMergedPropsEqual:b},j))}}const se=ae();var ie,oe=n(7950);function le(e,t){var n=(0,r.useState)((function(){return{inputs:t,result:e()}}))[0],a=(0,r.useRef)(!0),s=(0,r.useRef)(n),i=a.current||Boolean(t&&s.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,s.current.inputs))?s.current:{inputs:t,result:e()};return(0,r.useEffect)((function(){a.current=!1,s.current=i}),[i]),i.result}ie=oe.unstable_batchedUpdates,w=ie;var ce=le,de=function(e,t){return le((function(){return e}),t)},ue=n(3404),me=function(e){var t=e.top,n=e.right,r=e.bottom,a=e.left;return{top:t,right:n,bottom:r,left:a,width:n-a,height:r-t,x:a,y:t,center:{x:(n+a)/2,y:(r+t)/2}}},he=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},pe=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},fe={top:0,right:0,bottom:0,left:0},ve=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?fe:n,a=e.border,s=void 0===a?fe:a,i=e.padding,o=void 0===i?fe:i,l=me(he(t,r)),c=me(pe(t,s)),d=me(pe(c,o));return{marginBox:l,borderBox:me(t),paddingBox:c,contentBox:d,margin:r,border:s,padding:o}},ge=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&(0,ue.A)(!1),n},xe=function(e,t){var n,r,a=e.borderBox,s=e.border,i=e.margin,o=e.padding,l=(r=t,{top:(n=a).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return ve({borderBox:l,border:s,margin:i,padding:o})},ye=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),xe(e,t)},be=function(e,t){var n={top:ge(t.marginTop),right:ge(t.marginRight),bottom:ge(t.marginBottom),left:ge(t.marginLeft)},r={top:ge(t.paddingTop),right:ge(t.paddingRight),bottom:ge(t.paddingBottom),left:ge(t.paddingLeft)},a={top:ge(t.borderTopWidth),right:ge(t.borderRightWidth),bottom:ge(t.borderBottomWidth),left:ge(t.borderLeftWidth)};return ve({borderBox:e,margin:n,padding:r,border:a})},je=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return be(t,n)},we=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function Ne(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],a=t[n],!(r===a||we(r)&&we(a)))return!1;var r,a;return!0}const _e=function(e,t){var n;void 0===t&&(t=Ne);var r,a=[],s=!1;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return s&&n===this&&t(i,a)||(r=e.apply(this,i),s=!0,n=this,a=i),r}};const Se=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];t=a,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function Ee(e,t){}Ee.bind(null,"warn"),Ee.bind(null,"error");function Ce(){}function De(e,t,n){var r=t.map((function(t){var r=function(e,t){return i({},e,{},t)}(n,t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}}));return function(){r.forEach((function(e){e()}))}}var Te=!0,ke="Invariant failed";function Ae(e){this.message=e}function Pe(e,t){if(!e)throw new Ae(Te?ke:ke+": "+(t||""))}Ae.prototype.toString=function(){return this.message};var Oe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=Ce,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof Ae&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}s(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=De(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof Ae))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(r.Component),Re=function(e){return e+1},Me=function(e,t){var n=e.droppableId===t.droppableId,r=Re(e.index),a=Re(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+a+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+a+"\n  "},Ie=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},Le=function(e){return"\n  The item has returned to its starting position\n  of "+Re(e.index)+"\n"},Fe={dragHandleUsageInstructions:"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",onDragStart:function(e){return"\n  You have lifted an item in position "+Re(e.source.index)+"\n"},onDragUpdate:function(e){var t=e.destination;if(t)return Me(e.source,t);var n=e.combine;return n?Ie(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},onDragEnd:function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Le(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+Me(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+Ie(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Le(e.source)+"\n  "}},Be={x:0,y:0},We=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},$e=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Ue=function(e,t){return e.x===t.x&&e.y===t.y},ze=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},He=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},Ve=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},qe=function(e,t){return Math.min.apply(Math,t.map((function(t){return Ve(e,t)})))},Ge=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},Ke=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},Ye=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Xe=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=me({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):me(e)},Ze=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,a=e.frame,s=function(e,t){return t?Ke(e,t.scroll.diff.displacement):e}(t.marginBox,a),o=function(e,t,n){var r;return n&&n.increasedBy?i({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(s,r,n);return{page:t,withPlaceholder:n,active:Xe(o,a)}},Je=function(e,t){e.frame||Pe(!1);var n=e.frame,r=$e(t,n.scroll.initial),a=ze(r),s=i({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:a},max:n.scroll.max}});return i({},e,{frame:s,subject:Ze({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s})})};function Qe(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function et(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function tt(e,t){if(e.find)return e.find(t);var n=et(e,t);return-1!==n?e[n]:void 0}function nt(e){return Array.prototype.slice.call(e)}var rt=_e((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),at=_e((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),st=_e((function(e){return Qe(e)})),it=_e((function(e){return Qe(e)})),ot=_e((function(e,t){var n=it(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}));return n}));function lt(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function ct(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var dt=_e((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),ut=function(e,t){return e.descriptor.droppableId===t.descriptor.id},mt={point:Be,value:0},ht={invisible:{},visible:{},all:[]},pt={displaced:ht,displacedBy:mt,at:null},ft=function(e,t){return function(n){return e<=n&&n<=t}},vt=function(e){var t=ft(e.top,e.bottom),n=ft(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var a=t(r.top)||t(r.bottom),s=n(r.left)||n(r.right);if(a&&s)return!0;var i=r.top<e.top&&r.bottom>e.bottom,o=r.left<e.left&&r.right>e.right;return!(!i||!o)||(i&&s||o&&a)}},gt=function(e){var t=ft(e.top,e.bottom),n=ft(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},xt={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},yt={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},bt=function(e){var t=e.target,n=e.destination,r=e.viewport,a=e.withDroppableDisplacement,s=e.isVisibleThroughFrameFn,i=a?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:Be;return Ke(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(i,n,s)&&function(e,t,n){return n(t)(e)}(i,r,s)},jt=function(e){return bt(i({},e,{isVisibleThroughFrameFn:vt}))},wt=function(e){return bt(i({},e,{isVisibleThroughFrameFn:gt}))};function Nt(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,a=e.viewport,s=e.forceShouldAnimate,i=e.last;return t.reduce((function(e,t){var o=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return me(he(n,r))}(t,r),l=t.descriptor.id;if(e.all.push(l),!jt({target:o,destination:n,viewport:a,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,n){if("boolean"===typeof n)return n;if(!t)return!0;var r=t.invisible,a=t.visible;if(r[e])return!1;var s=a[e];return!s||s.shouldAnimate}(l,i,s),d={draggableId:l,shouldAnimate:c};return e.visible[l]=d,e}),{all:[],visible:{},invisible:{}})}function _t(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,a=e.destination,s=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:ht,displacedBy:r,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:s}}}}function St(e){var t=e.draggable,n=e.insideDestination,r=e.destination,a=e.viewport,s=e.displacedBy,i=e.last,o=e.index,l=e.forceShouldAnimate,c=ut(t,r);if(null==o)return _t({insideDestination:n,inHomeList:c,displacedBy:s,destination:r});var d=tt(n,(function(e){return e.descriptor.index===o}));if(!d)return _t({insideDestination:n,inHomeList:c,displacedBy:s,destination:r});var u=dt(t,n),m=n.indexOf(d);return{displaced:Nt({afterDragging:u.slice(m),destination:r,displacedBy:s,last:i,viewport:a.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:o}}}}function Et(e,t){return Boolean(t.effected[e])}var Ct=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,a=e.draggables,s=e.destination,i=e.insideDestination,o=e.previousImpact,l=e.viewport,c=e.afterCritical,d=o.at;if(d||Pe(!1),"REORDER"===d.type){var u=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,a=e.location;if(!r.length)return null;var s=a.index,i=t?s+1:s-1,o=r[0].descriptor.index,l=r[r.length-1].descriptor.index;return i<o||i>(n?l:l+1)?null:i}({isMovingForward:t,isInHomeList:n,location:d.destination,insideDestination:i});return null==u?null:St({draggable:r,insideDestination:i,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:u})}var m=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,a=e.combine,s=e.afterCritical;if(!n.isCombineEnabled)return null;var i=a.draggableId,o=r[i].descriptor.index;return Et(i,s)?t?o:o-1:t?o+1:o}({isMovingForward:t,destination:s,displaced:o.displaced,draggables:a,combine:d.combine,afterCritical:c});return null==m?null:St({draggable:r,insideDestination:i,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:m})},Dt=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,a=ct(n);a||Pe(!1);var s=a.draggableId,i=r[s].page.borderBox.center,o=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,a=e.displacedBy,s=Boolean(t.visible[r]||t.invisible[r]);return Et(r,n)?s?Be:ze(a.point):s?a.point:Be}({displaced:n.displaced,afterCritical:t,combineWith:s,displacedBy:n.displacedBy});return We(i,o)},Tt=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},kt=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},At=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return He(t.line,n.marginBox[t.end]+Tt(t,r),kt(t,n.marginBox,r))},Pt=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return He(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),kt(t,n.marginBox,r))},Ot=function(e){var t=e.impact,n=e.draggable,r=e.draggables,a=e.droppable,s=e.afterCritical,i=ot(a.descriptor.id,r),o=n.page,l=a.axis;if(!i.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return He(t.line,n.contentBox[t.start]+Tt(t,r),kt(t,n.contentBox,r))}({axis:l,moveInto:a.page,isMoving:o});var c=t.displaced,d=t.displacedBy,u=c.all[0];if(u){var m=r[u];if(Et(u,s))return Pt({axis:l,moveRelativeTo:m.page,isMoving:o});var h=xe(m.page,d.point);return Pt({axis:l,moveRelativeTo:h,isMoving:o})}var p=i[i.length-1];if(p.descriptor.id===n.descriptor.id)return o.borderBox.center;if(Et(p.descriptor.id,s)){var f=xe(p.page,ze(s.displacedBy.point));return At({axis:l,moveRelativeTo:f,isMoving:o})}return At({axis:l,moveRelativeTo:p.page,isMoving:o})},Rt=function(e,t){var n=e.frame;return n?We(t,n.scroll.diff.displacement):t},Mt=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,a=e.draggables,s=e.afterCritical,i=n.page.borderBox.center,o=t.at;return r&&o?"REORDER"===o.type?Ot({impact:t,draggable:n,draggables:a,droppable:r,afterCritical:s}):Dt({impact:t,draggables:a,afterCritical:s}):i}(e),n=e.droppable;return n?Rt(n,t):t},It=function(e,t){var n=$e(t,e.scroll.initial),r=ze(n);return{frame:me({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Lt(e,t){return e.map((function(e){return t[e]}))}var Ft=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=function(e,t){return We(e.scroll.diff.displacement,t)}(e.viewport,t),a=$e(r,n.page.borderBox.center);return We(n.client.borderBox.center,a)},Bt=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,a=e.viewport,s=e.withDroppableDisplacement,o=e.onlyOnMainAxis,l=void 0!==o&&o,c=$e(r,t.page.borderBox.center),d={target:Ke(t.page.borderBox,c),destination:n,withDroppableDisplacement:s,viewport:a};return l?function(e){return bt(i({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=ft(e.top,e.bottom),r=ft(e.left,e.right);return function(e){return t===xt?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(d):wt(d)},Wt=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,a=e.draggables,s=e.previousImpact,o=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,d=e.afterCritical;if(!r.isEnabled)return null;var u=ot(r.descriptor.id,a),m=ut(n,r),h=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,a=e.insideDestination,s=e.previousImpact;if(!r.isCombineEnabled)return null;if(!lt(s))return null;function o(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return i({},s,{at:t})}var l=s.displaced.all,c=l.length?l[0]:null;if(t)return c?o(c):null;var d=dt(n,a);if(!c)return d.length?o(d[d.length-1].descriptor.id):null;var u=et(d,(function(e){return e.descriptor.id===c}));-1===u&&Pe(!1);var m=u-1;return m<0?null:o(d[m].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:u,previousImpact:s})||Ct({isMovingForward:t,isInHomeList:m,draggable:n,draggables:a,destination:r,insideDestination:u,previousImpact:s,viewport:o,afterCritical:d});if(!h)return null;var p=Mt({impact:h,draggable:n,droppable:r,draggables:a,afterCritical:d});if(Bt({draggable:n,destination:r,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Ft({pageBorderBoxCenter:p,draggable:n,viewport:o}),impact:h,scrollJumpRequest:null};var f=$e(p,l),v=function(e){var t=e.impact,n=e.viewport,r=e.destination,a=e.draggables,s=e.maxScrollChange,o=It(n,We(n.scroll.current,s)),l=r.frame?Je(r,We(r.frame.scroll.current,s)):r,c=t.displaced,d=Nt({afterDragging:Lt(c.all,a),destination:r,displacedBy:t.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),u=Nt({afterDragging:Lt(c.all,a),destination:l,displacedBy:t.displacedBy,viewport:n.frame,last:c,forceShouldAnimate:!1}),m={},h={},p=[c,d,u];return c.all.forEach((function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,p);t?h[e]=t:m[e]=!0})),i({},t,{displaced:{all:c.all,invisible:m,visible:h}})}({impact:h,viewport:o,destination:r,draggables:a,maxScrollChange:f});return{clientSelection:c,impact:v,scrollJumpRequest:f}},$t=function(e){var t=e.subject.active;return t||Pe(!1),t},Ut=function(e,t){var n=e.page.borderBox.center;return Et(e.descriptor.id,t)?$e(n,t.displacedBy.point):n},zt=function(e,t){var n=e.page.borderBox;return Et(e.descriptor.id,t)?Ke(n,ze(t.displacedBy.point)):n},Ht=_e((function(e,t){var n=t[e.line];return{value:n,point:He(e.line,n)}})),Vt=function(e,t){return i({},e,{scroll:i({},e.scroll,{max:t})})},qt=function(e,t,n){var r=e.frame;ut(t,e)&&Pe(!1),e.subject.withPlaceholder&&Pe(!1);var a=Ht(e.axis,t.displaceBy).point,s=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return He(r.line,t[r.line]);var a=e.subject.page.contentBox[r.size],s=ot(e.descriptor.id,n).reduce((function(e,t){return e+t.client.marginBox[r.size]}),0)+t[r.line]-a;return s<=0?null:He(r.line,s)}(e,a,n),o={placeholderSize:a,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return i({},e,{subject:Ze({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame})});var l=s?We(r.scroll.max,s):r.scroll.max,c=Vt(r,l);return i({},e,{subject:Ze({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:c}),frame:c})},Gt=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,a=e.isOver,s=e.draggables,i=e.droppables,o=e.viewport,l=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,a=e.droppables,s=e.viewport,i=r.subject.active;if(!i)return null;var o=r.axis,l=ft(i[o.start],i[o.end]),c=st(a).filter((function(e){return e!==r})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return vt(s.frame)($t(e))})).filter((function(e){var n=$t(e);return t?i[o.crossAxisEnd]<n[o.crossAxisEnd]:n[o.crossAxisStart]<i[o.crossAxisStart]})).filter((function(e){var t=$t(e),n=ft(t[o.start],t[o.end]);return l(t[o.start])||l(t[o.end])||n(i[o.start])||n(i[o.end])})).sort((function(e,n){var r=$t(e)[o.crossAxisStart],a=$t(n)[o.crossAxisStart];return t?r-a:a-r})).filter((function(e,t,n){return $t(e)[o.crossAxisStart]===$t(n[0])[o.crossAxisStart]}));if(!c.length)return null;if(1===c.length)return c[0];var d=c.filter((function(e){return ft($t(e)[o.start],$t(e)[o.end])(n[o.line])}));return 1===d.length?d[0]:d.length>1?d.sort((function(e,t){return $t(e)[o.start]-$t(t)[o.start]}))[0]:c.sort((function(e,t){var r=qe(n,Ye($t(e))),a=qe(n,Ye($t(t)));return r!==a?r-a:$t(e)[o.start]-$t(t)[o.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:a,droppables:i,viewport:o});if(!c)return null;var d=ot(c.descriptor.id,s),u=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,a=e.insideDestination,s=e.afterCritical,i=a.filter((function(e){return wt({target:zt(e,s),destination:r,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(e,n){var a=Ve(t,Rt(r,Ut(e,s))),i=Ve(t,Rt(r,Ut(n,s)));return a<i?-1:i<a?1:e.descriptor.index-n.descriptor.index}));return i[0]||null}({pageBorderBoxCenter:n,viewport:o,destination:c,insideDestination:d,afterCritical:l}),m=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,a=e.draggable,s=e.draggables,i=e.destination,o=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:ht,displacedBy:mt,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},d=Mt({impact:c,draggable:a,droppable:i,draggables:s,afterCritical:l}),u=ut(a,i)?i:qt(i,a,s);return Bt({draggable:a,destination:u,newPageBorderBoxCenter:d,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var m=Boolean(t[i.axis.line]<=n.page.borderBox.center[i.axis.line]),h=function(){var e=n.descriptor.index;return n.descriptor.id===a.descriptor.id||m?e:e+1}(),p=Ht(i.axis,a.displaceBy);return St({draggable:a,insideDestination:r,destination:i,viewport:o,displacedBy:p,last:ht,index:h})}({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:s,moveRelativeTo:u,insideDestination:d,viewport:o,afterCritical:l});if(!m)return null;var h=Mt({impact:m,draggable:r,droppable:c,draggables:s,afterCritical:l});return{clientSelection:Ft({pageBorderBoxCenter:h,draggable:r,viewport:o}),impact:m,scrollJumpRequest:null}},Kt=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},Yt=function(e){var t=e.state,n=e.type,r=function(e,t){var n=Kt(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),a=Boolean(r),s=t.dimensions.droppables[t.critical.droppable.id],i=r||s,o=i.axis.direction,l="vertical"===o&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===o&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(l&&!a)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,d=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,m=t.dimensions,h=m.draggables,p=m.droppables;return l?Wt({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,destination:i,draggables:h,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Gt({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,isOver:i,draggables:h,droppables:p,viewport:t.viewport,afterCritical:t.afterCritical})};function Xt(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Zt(e){var t=ft(e.top,e.bottom),n=ft(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function Jt(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,a=st(r).filter((function(e){if(!e.isEnabled)return!1;var n,r,a=e.subject.active;if(!a)return!1;if(r=a,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(Zt(a)(t.center))return!0;var s=e.axis,i=a.center[s.crossAxisLine],o=t[s.crossAxisStart],l=t[s.crossAxisEnd],c=ft(a[s.crossAxisStart],a[s.crossAxisEnd]),d=c(o),u=c(l);return!d&&!u||(d?o<i:l>i)}));return a.length?1===a.length?a[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,a=n.page.borderBox.center,s=r.map((function(e){var n=e.axis,r=He(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:Ve(a,r)}})).sort((function(e,t){return t.distance-e.distance}));return s[0]?s[0].id:null}({pageBorderBox:t,draggable:n,candidates:a}):null}var Qt=function(e,t){return me(Ke(e,t))};function en(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var tn=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,a=e.droppables,s=e.previousImpact,i=e.viewport,o=e.afterCritical,l=Qt(n.page.borderBox,t),c=Jt({pageBorderBox:l,draggable:n,droppables:a});if(!c)return pt;var d=a[c],u=ot(d.descriptor.id,r),m=function(e,t){var n=e.frame;return n?Qt(t,n.scroll.diff.value):t}(d,l);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,a=e.destination,s=e.insideDestination,i=e.afterCritical;if(!a.isCombineEnabled)return null;var o=a.axis,l=Ht(a.axis,t.displaceBy),c=l.value,d=n[o.start],u=n[o.end],m=tt(dt(t,s),(function(e){var t=e.descriptor.id,n=e.page.borderBox,a=n[o.size]/4,s=Et(t,i),l=en({displaced:r.displaced,id:t});return s?l?u>n[o.start]+a&&u<n[o.end]-a:d>n[o.start]-c+a&&d<n[o.end]-c-a:l?u>n[o.start]+c+a&&u<n[o.end]+c-a:d>n[o.start]+a&&d<n[o.end]-a}));return m?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:a.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:m,draggable:n,previousImpact:s,destination:d,insideDestination:u,afterCritical:o})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,a=e.insideDestination,s=e.last,i=e.viewport,o=e.afterCritical,l=r.axis,c=Ht(r.axis,n.displaceBy),d=c.value,u=t[l.start],m=t[l.end],h=function(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:tt(dt(n,a),(function(e){var t=e.descriptor.id,n=e.page.borderBox.center[l.line],r=Et(t,o),a=en({displaced:s,id:t});return r?a?m<=n:u<n-d:a?m<=n+d:u<n})),inHomeList:ut(n,r)});return St({draggable:n,insideDestination:a,destination:r,viewport:i,last:s,displacedBy:c,index:h})}({pageBorderBoxWithDroppableScroll:m,draggable:n,destination:d,insideDestination:u,last:s.displaced,viewport:i,afterCritical:o})},nn=function(e,t){var n;return i({},e,((n={})[t.descriptor.id]=t,n))},rn=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,a=Kt(t),s=Kt(n);if(!a)return r;if(a===s)return r;var o=r[a];if(!o.subject.withPlaceholder)return r;var l=function(e){var t=e.subject.withPlaceholder;t||Pe(!1);var n=e.frame;if(!n)return i({},e,{subject:Ze({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||Pe(!1);var a=Vt(n,r);return i({},e,{subject:Ze({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null}),frame:a})}(o);return nn(r,l)},an=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,a=e.viewport,s=e.impact,o=e.scrollJumpRequest,l=a||t.viewport,c=r||t.dimensions,d=n||t.current.client.selection,u=$e(d,t.initial.client.selection),m={offset:u,selection:d,borderBoxCenter:We(t.initial.client.borderBoxCenter,u)},h={selection:We(m.selection,l.scroll.current),borderBoxCenter:We(m.borderBoxCenter,l.scroll.current),offset:We(m.offset,l.scroll.diff.value)},p={client:m,page:h};if("COLLECTING"===t.phase)return i({phase:"COLLECTING"},t,{dimensions:c,viewport:l,current:p});var f=c.draggables[t.critical.draggable.id],v=s||tn({pageOffset:h.offset,draggable:f,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),g=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,a=e.previousImpact,s=e.impact,i=rn({previousImpact:a,impact:s,droppables:r}),o=Kt(s);if(!o)return i;var l=r[o];if(ut(t,l))return i;if(l.subject.withPlaceholder)return i;var c=qt(l,t,n);return nn(i,c)}({draggable:f,impact:v,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables});return i({},t,{current:p,dimensions:{draggables:c.draggables,droppables:g},impact:v,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:!o&&null})};var sn=function(e){var t=e.impact,n=e.viewport,r=e.draggables,a=e.destination,s=e.forceShouldAnimate,o=t.displaced,l=function(e,t){return e.map((function(e){return t[e]}))}(o.all,r);return i({},t,{displaced:Nt({afterDragging:l,destination:a,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:s,last:o})})},on=function(e){var t=e.impact,n=e.draggable,r=e.droppable,a=e.draggables,s=e.viewport,i=e.afterCritical,o=Mt({impact:t,draggable:n,draggables:a,droppable:r,afterCritical:i});return Ft({pageBorderBoxCenter:o,draggable:n,viewport:s})},ln=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&Pe(!1);var a=t.impact,s=r||t.viewport,i=n||t.dimensions,o=i.draggables,l=i.droppables,c=o[t.critical.draggable.id],d=Kt(a);d||Pe(!1);var u=l[d],m=sn({impact:a,viewport:s,destination:u,draggables:o}),h=on({impact:m,draggable:c,droppable:u,draggables:o,viewport:s,afterCritical:t.afterCritical});return an({impact:m,clientSelection:h,state:t,dimensions:i,viewport:s})},cn=function(e){var t=e.draggable,n=e.home,r=e.draggables,a=e.viewport,s=Ht(n.axis,t.displaceBy),i=ot(n.descriptor.id,r),o=i.indexOf(t);-1===o&&Pe(!1);var l,c=i.slice(o+1),d=c.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),u={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:s,effected:d};return{impact:{displaced:Nt({afterDragging:c,destination:n,displacedBy:s,last:null,viewport:a.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:u}},dn=function(e){0},un=function(e){0},mn=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,a=r.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,s=function(e){var t=e.frame;return t||Pe(!1),t}(n[t]),o=s.scroll.diff.value,l=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,a=xe(t.client,n),s=ye(a,r);return i({},t,{placeholder:i({},t.placeholder,{client:a}),client:a,page:s})}({draggable:e,offset:We(a,o),initialWindowScroll:r.scroll.initial});return l}))},hn=function(e){return"SNAP"===e.movementMode},pn=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:nn(e.droppables,t)}}(e.dimensions,t);return!hn(e)||n?an({state:e,dimensions:r}):ln({state:e,dimensions:r})};function fn(e){return e.isDragging&&"SNAP"===e.movementMode?i({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var vn={phase:"IDLE",completed:null,shouldFlush:!1},gn=function(e,t){if(void 0===e&&(e=vn),"FLUSH"===t.type)return i({},vn,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&Pe(!1);var n=t.payload,r=n.critical,a=n.clientSelection,s=n.viewport,o=n.dimensions,l=n.movementMode,c=o.draggables[r.draggable.id],d=o.droppables[r.droppable.id],u={selection:a,borderBoxCenter:c.client.borderBox.center,offset:Be},m={client:u,page:{selection:We(u.selection,s.scroll.initial),borderBoxCenter:We(u.selection,s.scroll.initial),offset:We(u.selection,s.scroll.diff.value)}},h=st(o.droppables).every((function(e){return!e.isFixedOnPage})),p=cn({draggable:c,home:d,draggables:o.draggables,viewport:s}),f=p.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:l,dimensions:o,initial:m,current:m,isWindowScrollAllowed:h,impact:f,afterCritical:p.afterCritical,onLiftImpact:f,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&Pe(!1),i({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&Pe(!1),function(e){var t=e.state,n=e.published;dn();var r=n.modified.map((function(e){var n=t.dimensions.droppables[e.droppableId];return Je(n,e.scroll)})),a=i({},t.dimensions.droppables,{},rt(r)),s=at(mn({additions:n.additions,updatedDroppables:a,viewport:t.viewport})),o=i({},t.dimensions.draggables,{},s);n.removals.forEach((function(e){delete o[e]}));var l={droppables:a,draggables:o},c=Kt(t.impact),d=c?l.droppables[c]:null,u=l.draggables[t.critical.draggable.id],m=l.droppables[t.critical.droppable.id],h=cn({draggable:u,home:m,draggables:o,viewport:t.viewport}),p=h.impact,f=h.afterCritical,v=d&&d.isCombineEnabled?t.impact:p,g=tn({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:v,viewport:t.viewport,afterCritical:f});un();var x=i({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:g,onLiftImpact:p,dimensions:l,afterCritical:f,forceShouldAnimate:!1});return"COLLECTING"===t.phase?x:i({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;Xt(e)||Pe(!1);var v=t.payload.client;return Ue(v,e.current.client.selection)?e:an({state:e,clientSelection:v,impact:hn(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return fn(e);if("COLLECTING"===e.phase)return fn(e);Xt(e)||Pe(!1);var g=t.payload,x=g.id,y=g.newScroll,b=e.dimensions.droppables[x];if(!b)return e;var j=Je(b,y);return pn(e,j,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Xt(e)||Pe(!1);var w=t.payload,N=w.id,_=w.isEnabled,S=e.dimensions.droppables[N];S||Pe(!1),S.isEnabled===_&&Pe(!1);var E=i({},S,{isEnabled:_});return pn(e,E,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Xt(e)||Pe(!1);var C=t.payload,D=C.id,T=C.isCombineEnabled,k=e.dimensions.droppables[D];k||Pe(!1),k.isCombineEnabled===T&&Pe(!1);var A=i({},k,{isCombineEnabled:T});return pn(e,A,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;Xt(e)||Pe(!1),e.isWindowScrollAllowed||Pe(!1);var P=t.payload.newScroll;if(Ue(e.viewport.scroll.current,P))return fn(e);var O=It(e.viewport,P);return hn(e)?ln({state:e,viewport:O}):an({state:e,viewport:O})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!Xt(e))return e;var R=t.payload.maxScroll;if(Ue(R,e.viewport.scroll.max))return e;var M=i({},e.viewport,{scroll:i({},e.viewport.scroll,{max:R})});return i({phase:"DRAGGING"},e,{viewport:M})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&Pe(!1);var I=Yt({state:e,type:t.type});return I?an({state:e,impact:I.impact,clientSelection:I.clientSelection,scrollJumpRequest:I.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var L=t.payload.reason;return"COLLECTING"!==e.phase&&Pe(!1),i({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:L})}if("DROP_ANIMATE"===t.type){var F=t.payload,B=F.completed,W=F.dropDuration,$=F.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&Pe(!1),{phase:"DROP_ANIMATING",completed:B,dropDuration:W,newHomeClientOffset:$,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},xn=function(e){return{type:"LIFT",payload:e}},yn=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},bn=function(){return{type:"COLLECTION_STARTING",payload:null}},jn=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},wn=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},Nn=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},_n=function(e){return{type:"MOVE",payload:e}},Sn=function(){return{type:"MOVE_UP",payload:null}},En=function(){return{type:"MOVE_DOWN",payload:null}},Cn=function(){return{type:"MOVE_RIGHT",payload:null}},Dn=function(){return{type:"MOVE_LEFT",payload:null}},Tn=function(){return{type:"FLUSH",payload:null}},kn=function(e){return{type:"DROP_COMPLETE",payload:e}},An=function(e){return{type:"DROP",payload:e}},Pn=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var On="cubic-bezier(.2,1,.1,1)",Rn={drop:0,combining:.7},Mn={drop:.75},In=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",Ln={fluid:"opacity "+In,snap:"transform "+In+", opacity "+In,drop:function(e){var t=e+"s "+On;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+In,placeholder:"height "+In+", width "+In+", margin "+In},Fn=function(e){return Ue(e,Be)?null:"translate("+e.x+"px, "+e.y+"px)"},Bn=Fn,Wn=function(e,t){var n=Fn(e);return n?t?n+" scale("+Mn.drop+")":n:null},$n=.33,Un=.55,zn=Un-$n,Hn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var a=t(),s=r.payload.reason;if("COLLECTING"!==a.phase){if("IDLE"!==a.phase){"DROP_PENDING"===a.phase&&a.isWaiting&&Pe(!1),"DRAGGING"!==a.phase&&"DROP_PENDING"!==a.phase&&Pe(!1);var o=a.critical,l=a.dimensions,c=l.draggables[a.critical.draggable.id],d=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,a=e.home,s=e.viewport,o=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:i({},r,{displaced:ht}),didDropInsideDroppable:!0}:{impact:sn({draggables:t,impact:o,destination:a,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:s,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),u=d.impact,m=d.didDropInsideDroppable,h=m?lt(u):null,p=m?ct(u):null,f={index:o.draggable.index,droppableId:o.droppable.id},v={draggableId:c.descriptor.id,type:c.descriptor.type,source:f,reason:s,mode:a.movementMode,destination:h,combine:p},g=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,a=e.viewport,s=e.afterCritical,i=r.draggables,o=r.droppables,l=Kt(t),c=l?o[l]:null,d=o[n.descriptor.droppableId],u=on({impact:t,draggable:n,draggables:i,afterCritical:s,droppable:c||d,viewport:a});return $e(u,n.client.borderBox.center)}({impact:u,draggable:c,dimensions:l,viewport:a.viewport,afterCritical:a.afterCritical}),x={critical:a.critical,afterCritical:a.afterCritical,result:v,impact:u};if(!Ue(a.current.client.offset,g)||Boolean(v.combine)){var y=function(e){var t=e.current,n=e.destination,r=e.reason,a=Ve(t,n);if(a<=0)return $n;if(a>=1500)return Un;var s=$n+zn*(a/1500);return Number(("CANCEL"===r?.6*s:s).toFixed(2))}({current:a.current.client.offset,destination:g,reason:s});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:g,dropDuration:y,completed:x}))}else n(kn({completed:x}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:s}))}else e(r)}}},Vn=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function qn(e){var t=e.onWindowScroll;var n=Se((function(){t(Vn())})),r=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(n),a=Ce;function s(){return a!==Ce}return{start:function(){s()&&Pe(!1),a=De(window,[r])},stop:function(){s()||Pe(!1),n.cancel(),a(),a=Ce},isActive:s}}var Gn=function(e){var t=qn({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},Kn=function(){var e=[];return{add:function(t){var n=setTimeout((function(){return function(t){var n=et(e,(function(e){return e.timerId===t}));-1===n&&Pe(!1),e.splice(n,1)[0].callback()}(n)})),r={timerId:n,callback:t};e.push(r)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}},Yn=function(e,t){dn(),t(),un()},Xn=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},Zn=function(e,t,n,r){if(e){var a=function(e){var t=!1,n=!1,r=setTimeout((function(){n=!0})),a=function(a){t||n||(t=!0,e(a),clearTimeout(r))};return a.wasCalled=function(){return t},a}(n);e(t,{announce:a}),a.wasCalled()||n(r(t))}else n(r(t))},Jn=function(e,t){var n=function(e,t){var n=Kn(),r=null,a=function(n){r||Pe(!1),r=null,Yn(0,(function(){return Zn(e().onDragEnd,n,t,Fe.onDragEnd)}))};return{beforeCapture:function(t,n){r&&Pe(!1),Yn(0,(function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})}))},beforeStart:function(t,n){r&&Pe(!1),Yn(0,(function(){var r=e().onBeforeDragStart;r&&r(Xn(t,n))}))},start:function(a,s){r&&Pe(!1);var i=Xn(a,s);r={mode:s,lastCritical:a,lastLocation:i.source,lastCombine:null},n.add((function(){Yn(0,(function(){return Zn(e().onDragStart,i,t,Fe.onDragStart)}))}))},update:function(a,s){var o=lt(s),l=ct(s);r||Pe(!1);var c=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(a,r.lastCritical);c&&(r.lastCritical=a);var d,u,m=(u=o,!(null==(d=r.lastLocation)&&null==u||null!=d&&null!=u&&d.droppableId===u.droppableId&&d.index===u.index));m&&(r.lastLocation=o);var h=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(r.lastCombine,l);if(h&&(r.lastCombine=l),c||m||h){var p=i({},Xn(a,r.mode),{combine:l,destination:o});n.add((function(){Yn(0,(function(){return Zn(e().onDragUpdate,p,t,Fe.onDragUpdate)}))}))}},flush:function(){r||Pe(!1),n.flush()},drop:a,abort:function(){if(r){var e=i({},Xn(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});a(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var a=r.payload.critical;return n.beforeStart(a,r.payload.movementMode),t(r),void n.start(a,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var s=r.payload.completed.result;return n.flush(),t(r),void n.drop(s)}if(t(r),"FLUSH"!==r.type){var i=e.getState();"DRAGGING"===i.phase&&n.update(i.critical,i.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},Qn=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&Pe(!1),e.dispatch(kn({completed:r.completed}))}else t(n)}}},er=function(e){var t=null,n=null;return function(r){return function(a){if("FLUSH"!==a.type&&"DROP_COMPLETE"!==a.type&&"DROP_ANIMATION_FINISHED"!==a.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(a),"DROP_ANIMATE"===a.type){var s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((function(){n=null,t=De(window,[s])}))}}}},tr=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(An({reason:r.reason})))}}}},nr=b,rr=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,a=e.styleMarshal,s=e.getResponders,i=e.announce,o=e.autoScroller;return g(gn,nr(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(m(15))},a={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map((function(e){return e(a)}));return r=b.apply(void 0,s)(n.dispatch),u(u({},n),{},{dispatch:r})}}}((t=a,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(a){if("LIFT"===a.type){var s=a.payload,i=s.id,o=s.clientSelection,l=s.movementMode,c=n();"DROP_ANIMATING"===c.phase&&r(kn({completed:c.completed})),"IDLE"!==n().phase&&Pe(!1),r(Tn()),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:i,movementMode:l}});var d={draggableId:i,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},u=e.startPublishing(d),m=u.critical,h=u.dimensions,p=u.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:m,dimensions:h,clientSelection:o,movementMode:l,viewport:p}})}else t(a)}}}}(n),Hn,Qn,er,tr,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var a=t.getState();return"DRAGGING"!==a.phase&&Pe(!1),void e.start(a)}n(r),e.scroll(t.getState())}}}}(o),Gn,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var a=r.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),Jn(s,i))))};var ar=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,a=e.width,s=$e({x:n,y:t},{x:a,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},sr=function(){var e=document.documentElement;return e||Pe(!1),e},ir=function(){var e=sr();return ar({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},or=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry;dn();var a=function(){var e=Vn(),t=ir(),n=e.y,r=e.x,a=sr(),s=a.clientWidth,i=a.clientHeight;return{frame:me({top:n,left:r,right:r+s,bottom:n+i}),scroll:{initial:e,current:e,max:t,diff:{value:Be,displacement:Be}}}}(),s=a.scroll.current,i=t.droppable,o=r.droppable.getAllByType(i.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(s,n)})),l=r.draggable.getAllByType(t.draggable.type).map((function(e){return e.getDimension(s)})),c={draggables:at(l),droppables:rt(o)};return un(),{dimensions:c,critical:t,viewport:a}};function lr(e,t,n){return n.descriptor.id!==t.id&&(n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var cr=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},a=null,s=function(){a||(n.collectionStarting(),a=requestAnimationFrame((function(){a=null,dn();var e=r,s=e.additions,i=e.removals,o=e.modified,l=Object.keys(s).map((function(e){return t.draggable.getById(e).getDimension(Be)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),c=Object.keys(o).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),d={additions:l,removals:Object.keys(i),modified:c};r={additions:{},removals:{},modified:{}},un(),n.publish(d)})))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],s()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],s()},stop:function(){a&&(cancelAnimationFrame(a),a=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(t){n||Pe(!1);var a=n.critical.draggable;"ADDITION"===t.type&&lr(e,a,t.value)&&r.add(t.value),"REMOVAL"===t.type&&lr(e,a,t.value)&&r.remove(t.value)},s={updateDroppableIsEnabled:function(r,a){e.droppable.exists(r)||Pe(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:a})},updateDroppableIsCombineEnabled:function(r,a){n&&(e.droppable.exists(r)||Pe(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:a}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,a){n&&(e.droppable.exists(r)||Pe(!1),t.updateDroppableScroll({id:r,newScroll:a}))},startPublishing:function(t){n&&Pe(!1);var r=e.draggable.getById(t.draggableId),s=e.droppable.getById(r.descriptor.droppableId),i={draggable:r.descriptor,droppable:s.descriptor},o=e.subscribe(a);return n={critical:i,unsubscribe:o},or({critical:i,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),n.unsubscribe(),n=null}}};return s},dr=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},ur=function(e){window.scrollBy(e.x,e.y)},mr=_e((function(e){return st(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),hr=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var a=r[n];return a.frame?a:null}var s=function(e,t){var n=tt(mr(t),(function(t){return t.frame||Pe(!1),Zt(t.frame.pageMarginBox)(e)}));return n}(t,r);return s},pr=.25,fr=.05,vr=28,gr=function(e){return Math.pow(e,2)},xr={stopDampeningAt:1200,accelerateAt:360},yr=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,a=n-t;return 0===a?0:(r-t)/a},br=xr.accelerateAt,jr=xr.stopDampeningAt,wr=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,a=e.shouldUseTimeDampening,s=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return vr;if(e===t.startScrollingFrom)return 1;var n=yr({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=vr*gr(1-n);return Math.ceil(r)}(t,n);return 0===s?0:a?Math.max(function(e,t){var n=t,r=jr,a=Date.now()-n;if(a>=jr)return e;if(a<br)return 1;var s=yr({startOfRange:br,endOfRange:r,current:a}),i=e*gr(s);return Math.ceil(i)}(s,r),1):s},Nr=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,a=e.axis,s=e.shouldUseTimeDampening,i=function(e,t){return{startScrollingFrom:e[t.size]*pr,maxScrollValueAt:e[t.size]*fr}}(t,a);return n[a.end]<n[a.start]?wr({distanceToEdge:n[a.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s}):-1*wr({distanceToEdge:n[a.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s})},_r=Ge((function(e){return 0===e?0:e})),Sr=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,a=e.center,s=e.shouldUseTimeDampening,i={top:a.y-n.top,right:n.right-a.x,bottom:n.bottom-a.y,left:a.x-n.left},o=Nr({container:n,distanceToEdges:i,dragStartTime:t,axis:xt,shouldUseTimeDampening:s}),l=Nr({container:n,distanceToEdges:i,dragStartTime:t,axis:yt,shouldUseTimeDampening:s}),c=_r({x:l,y:o});if(Ue(c,Be))return null;var d=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,a=n.height>t.height,s=n.width>t.width;return s||a?s&&a?null:{x:s?0:r.x,y:a?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return d?Ue(d,Be)?null:d:null},Er=Ge((function(e){return 0===e?0:e>0?1:-1})),Cr=function(){var e=function(e,t){return e<0?e:e>t?e-t:0};return function(t){var n=t.current,r=t.max,a=t.change,s=We(n,a),i={x:e(s.x,r.x),y:e(s.y,r.y)};return Ue(i,Be)?null:i}}(),Dr=function(e){var t=e.max,n=e.current,r=e.change,a={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},s=Er(r),i=Cr({max:a,current:n,change:s});return!i||(0!==s.x&&0===i.x||0!==s.y&&0===i.y)},Tr=function(e,t){return Dr({current:e.scroll.current,max:e.scroll.max,change:t})},kr=function(e,t){var n=e.frame;return!!n&&Dr({current:n.scroll.current,max:n.scroll.max,change:t})},Ar=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,a=e.scrollWindow,s=e.scrollDroppable,i=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,n=e.subject,r=e.center,a=e.dragStartTime,s=e.shouldUseTimeDampening,i=Sr({dragStartTime:a,container:t.frame,subject:n,center:r,shouldUseTimeDampening:s});return i&&Tr(t,i)?i:null}({dragStartTime:n,viewport:t.viewport,subject:o,center:i,shouldUseTimeDampening:r});if(l)return void a(l)}var c=hr({center:i,destination:Kt(t.impact),droppables:t.dimensions.droppables});if(c){var d=function(e){var t=e.droppable,n=e.subject,r=e.center,a=e.dragStartTime,s=e.shouldUseTimeDampening,i=t.frame;if(!i)return null;var o=Sr({dragStartTime:a,container:i.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:s});return o&&kr(t,o)?o:null}({dragStartTime:n,droppable:c,subject:o,center:i,shouldUseTimeDampening:r});d&&s(c.descriptor.id,d)}},Pr=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,a=function(e,t){if(!kr(e,t))return t;var r=function(e,t){var n=e.frame;return n&&kr(e,t)?Cr({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var a=$e(t,r);return n(e.descriptor.id,a),$e(t,a)},s=function(e,t,n){if(!e)return n;if(!Tr(t,n))return n;var a=function(e,t){if(!Tr(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return Cr({current:r,max:n,change:t})}(t,n);if(!a)return r(n),null;var s=$e(n,a);return r(s),$e(n,s)};return function(e){var n=e.scrollJumpRequest;if(n){var r=Kt(e.impact);r||Pe(!1);var i=a(e.dimensions.droppables[r],n);if(i){var o=e.viewport,l=s(e.isWindowScrollAllowed,o,i);l&&function(e,n){var r=We(e.current.client.selection,n);t({client:r})}(e,l)}}}},Or=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,a=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=Se(t),a=Se(n),s=null,i=function(e){s||Pe(!1);var t=s,n=t.shouldUseTimeDampening,i=t.dragStartTime;Ar({state:e,scrollWindow:r,scrollDroppable:a,dragStartTime:i,shouldUseTimeDampening:n})};return{start:function(e){dn(),s&&Pe(!1);var t=Date.now(),n=!1,r=function(){n=!0};Ar({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),s={dragStartTime:t,shouldUseTimeDampening:n},un(),n&&i(e)},stop:function(){s&&(r.cancel(),a.cancel(),s=null)},scroll:i}}({scrollWindow:n,scrollDroppable:t}),s=Pr({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&s(e):a.scroll(e))},start:a.start,stop:a.stop}},Rr="data-rbd",Mr=function(){var e=Rr+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Ir=function(){var e=Rr+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Lr=function(){var e=Rr+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Fr={contextId:Rr+"-scroll-container-context-id"},Br=function(e,t){return e.map((function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""})).join(" ")},Wr=function(e){var t,n=(t=e,function(e){return"["+e+'="'+t+'"]'}),r=function(){var e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:n(Mr.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}}(),a=[function(){var e="\n      transition: "+Ln.outOfTheWay+";\n    ";return{selector:n(Ir.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}}(),r,{selector:n(Lr.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Br(a,"always"),resting:Br(a,"resting"),dragging:Br(a,"dragging"),dropAnimating:Br(a,"dropAnimating"),userCancel:Br(a,"userCancel")}},$r="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect,Ur=function(){var e=document.querySelector("head");return e||Pe(!1),e},zr=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};var Hr=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Vr(e){return e instanceof Hr(e).HTMLElement}function qr(e,t){var n="["+Mr.contextId+'="'+e+'"]',r=nt(document.querySelectorAll(n));if(!r.length)return null;var a=tt(r,(function(e){return e.getAttribute(Mr.draggableId)===t}));return a&&Vr(a)?a:null}function Gr(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach((function(t){return t(e)}))}function r(t){return e.draggables[t]||null}function a(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var a=t.descriptor.id,s=r(a);s&&t.uniqueId===s.uniqueId&&(delete e.draggables[a],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||Pe(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return Qe(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=a(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=a(e);return t||Pe(!1),t},findById:a,exists:function(e){return Boolean(a(e))},getAllByType:function(t){return Qe(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var Kr=r.createContext(null),Yr=function(){var e=document.body;return e||Pe(!1),e},Xr={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Zr=function(e){return"rbd-announcement-"+e};var Jr=0,Qr={separator:"::"};function ea(e,t){return void 0===t&&(t=Qr),ce((function(){return""+e+t.separator+Jr++}),[t.separator,e])}var ta=r.createContext(null);function na(e){0}function ra(e,t){na()}function aa(e){var t=(0,r.useRef)(e);return(0,r.useEffect)((function(){t.current=e})),t}var sa,ia=((sa={})[13]=!0,sa[9]=!0,sa),oa=function(e){ia[e.keyCode]&&e.preventDefault()},la=function(){var e="visibilitychange";return"undefined"===typeof document?e:tt([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}();var ca,da={type:"IDLE"};function ua(e){var t=e.cancel,n=e.completed,r=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,s=e.clientY;if(0===t){var i={x:n,y:s},o=r();if("DRAGGING"===o.type)return e.preventDefault(),void o.actions.move(i);if("PENDING"!==o.type&&Pe(!1),function(e,t){return Math.abs(t.x-e.x)>=5||Math.abs(t.y-e.y)>=5}(o.point,i)){e.preventDefault();var l=o.actions.fluidLift(i);a({type:"DRAGGING",actions:l})}}}},{eventName:"mouseup",fn:function(e){var a=r();"DRAGGING"===a.type?(e.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void oa(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&Pe(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:la,fn:t}]}function ma(){}var ha=((ca={})[34]=!0,ca[33]=!0,ca[36]=!0,ca[35]=!0,ca);function pa(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(ha[r.keyCode]?r.preventDefault():oa(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:la,fn:n}]}var fa={type:"IDLE"};var va={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function ga(e,t){if(null==t)return!1;if(Boolean(va[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&ga(e,t.parentElement)}function xa(e,t){var n=t.target;return!!Vr(n)&&ga(e,n)}var ya=function(e){return me(e.getBoundingClientRect()).center};var ba=function(){var e="matches";return"undefined"===typeof document?e:tt([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function ja(e,t){return null==e?null:e[ba](t)?e:ja(e.parentElement,t)}function wa(e,t){return e.closest?e.closest(t):ja(e,t)}function Na(e,t){var n,r=t.target;if(!((n=r)instanceof Hr(n).Element))return null;var a=function(e){return"["+Mr.contextId+'="'+e+'"]'}(e),s=wa(r,a);return s&&Vr(s)?s:null}function _a(e){e.preventDefault()}function Sa(e){var t=e.expected,n=e.phase,r=e.isLockActive;e.shouldWarn;return!!r()&&t===n}function Ea(e){var t=e.lockAPI,n=e.store,r=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var s=r.draggable.findById(a);return!!s&&(!!s.options.isEnabled&&!!dr(n.getState(),a))}function Ca(e){var t=e.lockAPI,n=e.contextId,r=e.store,a=e.registry,s=e.draggableId,o=e.forceSensorStop,l=e.sourceEvent;if(!Ea({lockAPI:t,store:r,registry:a,draggableId:s}))return null;var c=a.draggable.getById(s),d=function(e,t){var n="["+Ir.contextId+'="'+e+'"]',r=tt(nt(document.querySelectorAll(n)),(function(e){return e.getAttribute(Ir.id)===t}));return r&&Vr(r)?r:null}(n,c.descriptor.id);if(!d)return null;if(l&&!c.options.canDragInteractiveElements&&xa(d,l))return null;var u=t.claim(o||Ce),m="PRE_DRAG";function h(){return c.options.shouldRespectForcePress}function p(){return t.isActive(u)}var f=function(e,t){Sa({expected:e,phase:m,isLockActive:p,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function v(e){function n(){t.release(),m="COMPLETED"}function a(t,a){if(void 0===a&&(a={shouldBlockNextClick:!1}),e.cleanup(),a.shouldBlockNextClick){var s=De(window,[{eventName:"click",fn:_a,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(s)}n(),r.dispatch(An({reason:t}))}return"PRE_DRAG"!==m&&(n(),"PRE_DRAG"!==m&&Pe(!1)),r.dispatch(xn(e.liftActionArgs)),m="DRAGGING",i({isActive:function(){return Sa({expected:"DRAGGING",phase:m,isLockActive:p,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(e){return a("DROP",e)},cancel:function(e){return a("CANCEL",e)}},e.actions)}return{isActive:function(){return Sa({expected:"PRE_DRAG",phase:m,isLockActive:p,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:function(e){var t=Se((function(e){f((function(){return _n({client:e})}))}));return i({},v({liftActionArgs:{id:s,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return f(Sn)},moveRight:function(){return f(Cn)},moveDown:function(){return f(En)},moveLeft:function(){return f(Dn)}};return v({liftActionArgs:{id:s,clientSelection:ya(d),movementMode:"SNAP"},cleanup:Ce,actions:e})},abort:function(){Sa({expected:"PRE_DRAG",phase:m,isLockActive:p,shouldWarn:!0})&&t.release()}}}var Da=[function(e){var t=(0,r.useRef)(da),n=(0,r.useRef)(Ce),a=ce((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var a=e.tryGetLock(r,o,{sourceEvent:t});if(a){t.preventDefault();var s={x:t.clientX,y:t.clientY};n.current(),d(a,s)}}}}}}),[e]),s=ce((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}}),[e]),i=de((function(){n.current=De(window,[s,a],{passive:!1,capture:!0})}),[s,a]),o=de((function(){"IDLE"!==t.current.type&&(t.current=da,n.current(),i())}),[i]),l=de((function(){var e=t.current;o(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[o]),c=de((function(){var e=ua({cancel:l,completed:o,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=De(window,e,{capture:!0,passive:!1})}),[l,o]),d=de((function(e,n){"IDLE"!==t.current.type&&Pe(!1),t.current={type:"PENDING",point:n,actions:e},c()}),[c]);$r((function(){return i(),function(){n.current()}}),[i])},function(e){var t=(0,r.useRef)(ma),n=ce((function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var r=e.findClosestDraggableId(n);if(r){var s=e.tryGetLock(r,l,{sourceEvent:n});if(s){n.preventDefault();var i=!0,o=s.snapLift();t.current(),t.current=De(window,pa(o,l),{capture:!0,passive:!1})}}}function l(){i||Pe(!1),i=!1,t.current(),a()}}}}),[e]),a=de((function(){t.current=De(window,[n],{passive:!1,capture:!0})}),[n]);$r((function(){return a(),function(){t.current()}}),[a])},function(e){var t=(0,r.useRef)(fa),n=(0,r.useRef)(Ce),a=de((function(){return t.current}),[]),s=de((function(e){t.current=e}),[]),i=ce((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var a=e.tryGetLock(r,l,{sourceEvent:t});if(a){var s=t.touches[0],i={x:s.clientX,y:s.clientY};n.current(),m(a,i)}}}}}}),[e]),o=de((function(){n.current=De(window,[i],{capture:!0,passive:!1})}),[i]),l=de((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),s(fa),n.current(),o())}),[o,s]),c=de((function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),d=de((function(){var e={capture:!0,passive:!1},t={cancel:c,completed:l,getPhase:a},r=De(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var a=e.touches[0],s={x:a.clientX,y:a.clientY};e.preventDefault(),n.actions.move(s)}else t()}},{eventName:"touchend",fn:function(e){var a=r();"DRAGGING"===a.type?(e.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&Pe(!1);var a=e.touches[0];if(a&&a.force>=.15){var s=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return s?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();s&&t()}}},{eventName:la,fn:t}]}(t),e),s=De(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:la,fn:t}]}(t),e);n.current=function(){r(),s()}}),[c,a,l]),u=de((function(){var e=a();"PENDING"!==e.type&&Pe(!1);var t=e.actions.fluidLift(e.point);s({type:"DRAGGING",actions:t,hasMoved:!1})}),[a,s]),m=de((function(e,t){"IDLE"!==a().type&&Pe(!1);var n=setTimeout(u,120);s({type:"PENDING",point:t,actions:e,longPressTimerId:n}),d()}),[d,a,s,u]);$r((function(){return o(),function(){n.current();var e=a();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),s(fa))}}),[a,o,s]),$r((function(){return De(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function Ta(e){var t=e.contextId,n=e.store,a=e.registry,s=e.customSensors,i=e.enableDefaultSensors,o=[].concat(i?Da:[],s||[]),l=(0,r.useState)((function(){return function(){var e=null;function t(){e||Pe(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&Pe(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],c=de((function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()}),[l]);$r((function(){var e=n.getState();return n.subscribe((function(){var t=n.getState();c(e,t),e=t}))}),[l,n,c]),$r((function(){return l.tryAbandon}),[l.tryAbandon]);var d=de((function(e){return Ea({lockAPI:l,registry:a,store:n,draggableId:e})}),[l,a,n]),u=de((function(e,r,s){return Ca({lockAPI:l,registry:a,contextId:t,store:n,draggableId:e,forceSensorStop:r,sourceEvent:s&&s.sourceEvent?s.sourceEvent:null})}),[t,l,a,n]),m=de((function(e){return function(e,t){var n=Na(e,t);return n?n.getAttribute(Mr.draggableId):null}(t,e)}),[t]),h=de((function(e){var t=a.draggable.findById(e);return t?t.options:null}),[a.draggable]),p=de((function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch(Tn()))}),[l,n]),f=de(l.isClaimed,[l]),v=ce((function(){return{canGetLock:d,tryGetLock:u,findClosestDraggableId:m,findOptionsForDraggable:h,tryReleaseLock:p,isLockClaimed:f}}),[d,u,m,h,p,f]);na();for(var g=0;g<o.length;g++)o[g](v)}var ka=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function Aa(e){return e.current||Pe(!1),e.current}function Pa(e){var t=e.contextId,n=e.setCallbacks,a=e.sensors,s=e.nonce,o=e.dragHandleUsageInstructions,l=(0,r.useRef)(null);ra();var c=aa(e),d=de((function(){return ka(c.current)}),[c]),u=function(e){var t=ce((function(){return Zr(e)}),[e]),n=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),i(e.style,Xr),Yr().appendChild(e),function(){setTimeout((function(){var t=Yr();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)}))}}),[t]),de((function(e){var t=n.current;t&&(t.textContent=e)}),[])}(t),m=function(e){var t=e.contextId,n=e.text,a=ea("hidden-text",{separator:"-"}),s=ce((function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:a}).contextId+"-"+e.uniqueId;var e}),[a,t]);return(0,r.useEffect)((function(){var e=document.createElement("div");return e.id=s,e.textContent=n,e.style.display="none",Yr().appendChild(e),function(){var t=Yr();t.contains(e)&&t.removeChild(e)}}),[s,n]),s}({contextId:t,text:o}),h=function(e,t){var n=ce((function(){return Wr(e)}),[e]),a=(0,r.useRef)(null),s=(0,r.useRef)(null),i=de(_e((function(e){var t=s.current;t||Pe(!1),t.textContent=e})),[]),o=de((function(e){var t=a.current;t||Pe(!1),t.textContent=e}),[]);$r((function(){(a.current||s.current)&&Pe(!1);var r=zr(t),l=zr(t);return a.current=r,s.current=l,r.setAttribute(Rr+"-always",e),l.setAttribute(Rr+"-dynamic",e),Ur().appendChild(r),Ur().appendChild(l),o(n.always),i(n.resting),function(){var e=function(e){var t=e.current;t||Pe(!1),Ur().removeChild(t),e.current=null};e(a),e(s)}}),[t,o,i,n.always,n.resting,e]);var l=de((function(){return i(n.dragging)}),[i,n.dragging]),c=de((function(e){i("DROP"!==e?n.userCancel:n.dropAnimating)}),[i,n.dropAnimating,n.userCancel]),d=de((function(){s.current&&i(n.resting)}),[i,n.resting]);return ce((function(){return{dragging:l,dropping:c,resting:d}}),[l,c,d])}(t,s),p=de((function(e){Aa(l).dispatch(e)}),[]),f=ce((function(){return y({publishWhileDragging:yn,updateDroppableScroll:jn,updateDroppableIsEnabled:wn,updateDroppableIsCombineEnabled:Nn,collectionStarting:bn},p)}),[p]),v=function(){var e=ce(Gr,[]);return(0,r.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),g=ce((function(){return cr(v,f)}),[v,f]),x=ce((function(){return Or(i({scrollWindow:ur,scrollDroppable:g.scrollDroppable},y({move:_n},p)))}),[g.scrollDroppable,p]),b=function(e){var t=(0,r.useRef)({}),n=(0,r.useRef)(null),a=(0,r.useRef)(null),s=(0,r.useRef)(!1),i=de((function(e,n){var r={id:e,focus:n};return t.current[e]=r,function(){var n=t.current;n[e]!==r&&delete n[e]}}),[]),o=de((function(t){var n=qr(e,t);n&&n!==document.activeElement&&n.focus()}),[e]),l=de((function(e,t){n.current===e&&(n.current=t)}),[]),c=de((function(){a.current||s.current&&(a.current=requestAnimationFrame((function(){a.current=null;var e=n.current;e&&o(e)})))}),[o]),d=de((function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(Mr.draggableId)===e&&(n.current=e)}),[]);return $r((function(){return s.current=!0,function(){s.current=!1;var e=a.current;e&&cancelAnimationFrame(e)}}),[]),ce((function(){return{register:i,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}}),[i,d,c,l])}(t),j=ce((function(){return rr({announce:u,autoScroller:x,dimensionMarshal:g,focusMarshal:b,getResponders:d,styleMarshal:h})}),[u,x,g,b,d,h]);l.current=j;var w=de((function(){var e=Aa(l);"IDLE"!==e.getState().phase&&e.dispatch(Tn())}),[]),N=de((function(){var e=Aa(l).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);n(ce((function(){return{isDragging:N,tryAbort:w}}),[N,w]));var _=de((function(e){return dr(Aa(l).getState(),e)}),[]),S=de((function(){return Xt(Aa(l).getState())}),[]),E=ce((function(){return{marshal:g,focus:b,contextId:t,canLift:_,isMovementAllowed:S,dragHandleUsageInstructionsId:m,registry:v}}),[t,g,m,b,_,S,v]);return Ta({contextId:t,store:j,registry:v,customSensors:a,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,r.useEffect)((function(){return w}),[w]),r.createElement(ta.Provider,{value:E},r.createElement(C,{context:Kr,store:j},e.children))}var Oa=0;function Ra(e){var t=ce((function(){return""+Oa++}),[]),n=e.dragHandleUsageInstructions||Fe.dragHandleUsageInstructions;return r.createElement(Oe,null,(function(a){return r.createElement(Pa,{nonce:e.nonce,contextId:t,setCallbacks:a,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var Ma=function(e){return function(t){return e===t}},Ia=Ma("scroll"),La=Ma("auto"),Fa=(Ma("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),Ba=function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Fa(n,Ia)||Fa(n,La)},Wa=function e(t){return null==t||t===document.body||t===document.documentElement?null:Ba(t)?t:e(t.parentElement)},$a=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Ua=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},za=function(e){return{closestScrollable:Wa(e),isFixedOnPage:Ua(e)}},Ha=function(e){var t=e.ref,n=e.descriptor,r=e.env,a=e.windowScroll,s=e.direction,i=e.isDropDisabled,o=e.isCombineEnabled,l=e.shouldClipSubject,c=r.closestScrollable,d=function(e,t){var n=je(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,s=r+t.scrollHeight,i=a+t.scrollWidth,o=he({top:r,right:i,bottom:s,left:a},n.border);return ve({borderBox:o,margin:n.margin,border:n.border,padding:n.padding})}(t,c),u=ye(d,a),m=function(){if(!c)return null;var e=je(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:ye(e,a),scroll:$a(c),scrollSize:t,shouldClipSubject:l}}(),h=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,a=e.isFixedOnPage,s=e.direction,i=e.client,o=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,t=l.client,n=ar({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:n,diff:{value:Be,displacement:Be}}}}(),d="vertical"===s?xt:yt;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:a,axis:d,isEnabled:n,client:i,page:o,frame:c,subject:Ze({page:o,withPlaceholder:null,axis:d,frame:c})}}({descriptor:n,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:r.isFixedOnPage,direction:s,client:d,page:u,closest:m});return h},Va={passive:!1},qa={passive:!0},Ga=function(e){return e.shouldPublishImmediately?Va:qa};function Ka(e){var t=(0,r.useContext)(e);return t||Pe(!1),t}var Ya=function(e){return e&&e.env.closestScrollable||null};function Xa(){}var Za={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},Ja=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,a=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||"close"===r?Za:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?Ln.placeholder:null}};var Qa=r.memo((function(e){var t=(0,r.useRef)(null),n=de((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),a=e.animate,s=e.onTransitionEnd,i=e.onClose,o=e.contextId,l=(0,r.useState)("open"===e.animate),c=l[0],d=l[1];(0,r.useEffect)((function(){return c?"open"!==a?(n(),d(!1),Xa):t.current?Xa:(t.current=setTimeout((function(){t.current=null,d(!1)})),n):Xa}),[a,c,n]);var u=de((function(e){"height"===e.propertyName&&(s(),"close"===a&&i())}),[a,i,s]),m=Ja({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return r.createElement(e.placeholder.tagName,{style:m,"data-rbd-placeholder-context-id":o,onTransitionEnd:u,ref:e.innerRef})})),es=r.createContext(null);var ts=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return s(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(r.PureComponent),ns=5e3,rs=4500,as=function(e,t){return t?Ln.drop(t.duration):e?Ln.snap:Ln.fluid},ss=function(e,t){return e?t?Rn.drop:Rn.combining:null};function is(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,a=e.dropping,s=Boolean(r),i=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),o=Boolean(a),l=o?Wn(n,s):Bn(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:as(i,a),transform:l,opacity:ss(s,o),zIndex:o?rs:ns,pointerEvents:"none"}}(e):{transform:Bn((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}function os(e){var t=ea("draggable"),n=e.descriptor,a=e.registry,s=e.getDraggableRef,i=e.canDragInteractiveElements,o=e.shouldRespectForcePress,l=e.isEnabled,c=ce((function(){return{canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}}),[i,l,o]),d=de((function(e){var t=s();return t||Pe(!1),function(e,t,n){void 0===n&&(n=Be);var r=window.getComputedStyle(t),a=t.getBoundingClientRect(),s=be(a,r),i=ye(s,n);return{descriptor:e,placeholder:{client:s,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:s.marginBox.width,y:s.marginBox.height},client:s,page:i}}(n,t,e)}),[n,s]),u=ce((function(){return{uniqueId:t,descriptor:n,options:c,getDimension:d}}),[n,d,c,t]),m=(0,r.useRef)(u),h=(0,r.useRef)(!0);$r((function(){return a.draggable.register(m.current),function(){return a.draggable.unregister(m.current)}}),[a.draggable]),$r((function(){if(h.current)h.current=!1;else{var e=m.current;m.current=u,a.draggable.update(u,e)}}),[u,a.draggable])}function ls(e,t,n){ra()}function cs(e){e.preventDefault()}var ds=function(e,t){return e===t},us=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function ms(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var hs={mapped:{type:"SECONDARY",offset:Be,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ms(null)}};var ps=se((function(){var e=function(){var e=_e((function(e,t){return{x:e,y:t}})),t=_e((function(e,t,n,r,a){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(a),dropAnimation:a,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}})),n=_e((function(e,n,r,a,s,i,o){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:s,combineWith:i,mode:n,offset:e,dimension:r,forceShouldAnimate:o,snapshot:t(n,a,s,i,null)}}}));return function(r,a){if(r.isDragging){if(r.critical.draggable.id!==a.draggableId)return null;var s=r.current.client.offset,i=r.dimensions.draggables[a.draggableId],o=Kt(r.impact),l=(d=r.impact).at&&"COMBINE"===d.at.type?d.at.combine.draggableId:null,c=r.forceShouldAnimate;return n(e(s.x,s.y),r.movementMode,i,a.isClone,o,l,c)}var d;if("DROP_ANIMATING"===r.phase){var u=r.completed;if(u.result.draggableId!==a.draggableId)return null;var m=a.isClone,h=r.dimensions.draggables[a.draggableId],p=u.result,f=p.mode,v=us(p),g=function(e){return e.combine?e.combine.draggableId:null}(p),x={duration:r.dropDuration,curve:On,moveTo:r.newHomeClientOffset,opacity:g?Rn.drop:null,scale:g?Mn.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:h,dropping:x,draggingOver:v,combineWith:g,mode:f,forceShouldAnimate:null,snapshot:t(f,m,v,g,x)}}}return null}}(),t=function(){var e=_e((function(e,t){return{x:e,y:t}})),t=_e(ms),n=_e((function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}})),r=function(e){return e?n(Be,e,!0):null},a=function(t,a,s,i){var o=s.displaced.visible[t],l=Boolean(i.inVirtualList&&i.effected[t]),c=ct(s),d=c&&c.draggableId===t?a:null;if(!o){if(!l)return r(d);if(s.displaced.invisible[t])return null;var u=ze(i.displacedBy.point),m=e(u.x,u.y);return n(m,d,!0)}if(l)return r(d);var h=s.displacedBy.point,p=e(h.x,h.y);return n(p,d,o.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:a(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:a(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(n,r){return e(n,r)||t(n,r)||hs}}),{dropAnimationFinished:Pn},null,{context:Kr,pure:!0,areStatePropsEqual:ds})((function(e){var t=(0,r.useRef)(null),n=de((function(e){t.current=e}),[]),a=de((function(){return t.current}),[]),s=Ka(ta),i=s.contextId,o=s.dragHandleUsageInstructionsId,l=s.registry,c=Ka(es),d=c.type,u=c.droppableId,m=ce((function(){return{id:e.draggableId,index:e.index,type:d,droppableId:u}}),[e.draggableId,e.index,d,u]),h=e.children,p=e.draggableId,f=e.isEnabled,v=e.shouldRespectForcePress,g=e.canDragInteractiveElements,x=e.isClone,y=e.mapped,b=e.dropAnimationFinished;ls(),na(),x||os(ce((function(){return{descriptor:m,registry:l,getDraggableRef:a,canDragInteractiveElements:g,shouldRespectForcePress:v,isEnabled:f}}),[m,l,a,g,v,f]));var j=ce((function(){return f?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:cs}:null}),[i,o,p,f]),w=de((function(e){"DRAGGING"===y.type&&y.dropping&&"transform"===e.propertyName&&b()}),[b,y]),N=ce((function(){var e=is(y),t="DRAGGING"===y.type&&y.dropping?w:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":p,style:e,onTransitionEnd:t},dragHandleProps:j}}),[i,j,p,y,w,n]),_=ce((function(){return{draggableId:m.id,type:m.type,source:{index:m.index,droppableId:m.droppableId}}}),[m.droppableId,m.id,m.index,m.type]);return h(N,y.snapshot,_)}));function fs(e){return Ka(es).isUsingCloneFor!==e.draggableId||e.isClone?r.createElement(ps,e):null}function vs(e){var t="boolean"!==typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),a=Boolean(e.shouldRespectForcePress);return r.createElement(fs,i({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:a}))}var gs=function(e,t){return e===t.droppable.type},xs=function(e,t){return t.draggables[e.draggable.id]};var ys={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||Pe(!1),document.body}},bs=se((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=i({},e,{shouldAnimatePlaceholder:!1}),n=_e((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),r=_e((function(r,a,s,i,o,l){var c=o.descriptor.id;if(o.descriptor.droppableId===r){var d=l?{render:l,dragging:n(o.descriptor)}:null,u={isDraggingOver:s,draggingOverWith:s?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:o.placeholder,shouldAnimatePlaceholder:!1,snapshot:u,useClone:d}}if(!a)return t;if(!i)return e;var m={isDraggingOver:s,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:o.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}}));return function(n,a){var s=a.droppableId,i=a.type,o=!a.isDropDisabled,l=a.renderClone;if(n.isDragging){var c=n.critical;if(!gs(i,c))return t;var d=xs(c,n.dimensions),u=Kt(n.impact)===s;return r(s,o,u,u,d,l)}if("DROP_ANIMATING"===n.phase){var m=n.completed;if(!gs(i,m.critical))return t;var h=xs(m.critical,n.dimensions);return r(s,o,us(m.result)===s,Kt(m.impact)===s,h,l)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var p=n.completed;if(!gs(i,p.critical))return t;var f=Kt(p.impact)===s,v=Boolean(p.impact.at&&"COMBINE"===p.impact.at.type),g=p.critical.droppable.id===s;return f?v?e:t:g?e:t}return t}}),{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:Kr,pure:!0,areStatePropsEqual:ds})((function(e){var t=(0,r.useContext)(ta);t||Pe(!1);var n=t.contextId,a=t.isMovementAllowed,s=(0,r.useRef)(null),i=(0,r.useRef)(null),o=e.children,l=e.droppableId,c=e.type,d=e.mode,u=e.direction,m=e.ignoreContainerClipping,h=e.isDropDisabled,p=e.isCombineEnabled,f=e.snapshot,v=e.useClone,g=e.updateViewportMaxScroll,x=e.getContainerForClone,y=de((function(){return s.current}),[]),b=de((function(e){s.current=e}),[]),j=(de((function(){return i.current}),[]),de((function(e){i.current=e}),[]));ra();var w=de((function(){a()&&g({maxScroll:ir()})}),[a,g]);!function(e){var t=(0,r.useRef)(null),n=Ka(ta),a=ea("droppable"),s=n.registry,i=n.marshal,o=aa(e),l=ce((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),c=(0,r.useRef)(l),d=ce((function(){return _e((function(e,n){t.current||Pe(!1);var r={x:e,y:n};i.updateDroppableScroll(l.id,r)}))}),[l.id,i]),u=de((function(){var e=t.current;return e&&e.env.closestScrollable?$a(e.env.closestScrollable):Be}),[]),m=de((function(){var e=u();d(e.x,e.y)}),[u,d]),h=ce((function(){return Se(m)}),[m]),p=de((function(){var e=t.current,n=Ya(e);e&&n||Pe(!1),e.scrollOptions.shouldPublishImmediately?m():h()}),[h,m]),f=de((function(e,r){t.current&&Pe(!1);var a=o.current,s=a.getDroppableRef();s||Pe(!1);var i=za(s),c={ref:s,descriptor:l,env:i,scrollOptions:r};t.current=c;var d=Ha({ref:s,descriptor:l,env:i,windowScroll:e,direction:a.direction,isDropDisabled:a.isDropDisabled,isCombineEnabled:a.isCombineEnabled,shouldClipSubject:!a.ignoreContainerClipping}),u=i.closestScrollable;return u&&(u.setAttribute(Fr.contextId,n.contextId),u.addEventListener("scroll",p,Ga(c.scrollOptions))),d}),[n.contextId,l,p,o]),v=de((function(){var e=t.current,n=Ya(e);return e&&n||Pe(!1),$a(n)}),[]),g=de((function(){var e=t.current;e||Pe(!1);var n=Ya(e);t.current=null,n&&(h.cancel(),n.removeAttribute(Fr.contextId),n.removeEventListener("scroll",p,Ga(e.scrollOptions)))}),[p,h]),x=de((function(e){var n=t.current;n||Pe(!1);var r=Ya(n);r||Pe(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x}),[]),y=ce((function(){return{getDimensionAndWatchScroll:f,getScrollWhileDragging:v,dragStopped:g,scroll:x}}),[g,f,v,x]),b=ce((function(){return{uniqueId:a,descriptor:l,callbacks:y}}),[y,l,a]);$r((function(){return c.current=b.descriptor,s.droppable.register(b),function(){t.current&&g(),s.droppable.unregister(b)}}),[y,l,g,b,i,s.droppable]),$r((function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)}),[e.isDropDisabled,i]),$r((function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,i])}({droppableId:l,type:c,mode:d,direction:u,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:m,getDroppableRef:y});var N=r.createElement(ts,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,a=e.data,s=e.animate;return r.createElement(Qa,{placeholder:a,onClose:t,innerRef:j,animate:s,contextId:n,onTransitionEnd:w})})),_=ce((function(){return{innerRef:b,placeholder:N,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":n}}}),[n,l,N,b]),S=v?v.dragging.draggableId:null,E=ce((function(){return{droppableId:l,type:c,isUsingCloneFor:S}}),[l,S,c]);return r.createElement(es.Provider,{value:E},o(_,f),function(){if(!v)return null;var e=v.dragging,t=v.render,n=r.createElement(fs,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(n,r){return t(n,r,e)}));return oe.createPortal(n,x())}())}));bs.defaultProps=ys},9812:(e,t,n)=>{var r=n(6552).Symbol;e.exports=r},9841:(e,t,n)=>{var r=n(6913),a=n(2761);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},9853:(e,t,n)=>{var r=n(6989);e.exports=function(e,t){return r(e,t)}},9855:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9889:(e,t,n)=>{var r=n(3950),a=n(6686);e.exports=function(e,t,n){var s=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:s,maxWait:t,trailing:i})}},9935:(e,t,n)=>{var r=n(1340),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},9945:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});n(3800);var r=n(5043),a=n(579);const s=e=>r.memo((t=>{let{hospitalInfo:n}=t;const s=new Function("React","hospitalInfo",`return (${e});`);try{return s(r,n)}catch(i){return console.error("Error rendering dynamic component:",i),(0,a.jsx)("div",{children:"Error rendering template"})}}))},9987:(e,t,n)=>{var r=n(9812),a=n(2929),s=n(3211),i=n(3668),o=n(4160),l=n(2074),c=r?r.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,u,m){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=o;case"[object Set]":var p=1&r;if(h||(h=l),e.size!=t.size&&!p)return!1;var f=m.get(e);if(f)return f==t;r|=2,m.set(e,t);var v=i(h(e),h(t),r,c,u,m);return m.delete(e),v;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},9989:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7784).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},9995:(e,t,n)=>{var r=n(9096),a=n(6571),s=n(8673);e.exports=function(e){return function(t,n,i){var o=Object(t);if(!a(t)){var l=r(n,3);t=s(t),n=function(e){return l(o[e],e,o)}}var c=e(t,n,i);return c>-1?o[l?t[c]:c]:void 0}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var a=Object.create(null);__webpack_require__.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var i=2&r&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,__webpack_require__.d(a,s),a}})(),__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="/",__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{scaleBand:()=>Kj,scaleDiverging:()=>UE,scaleDivergingLog:()=>zE,scaleDivergingPow:()=>VE,scaleDivergingSqrt:()=>qE,scaleDivergingSymlog:()=>HE,scaleIdentity:()=>IN,scaleImplicit:()=>qj,scaleLinear:()=>MN,scaleLog:()=>VN,scaleOrdinal:()=>Gj,scalePoint:()=>Xj,scalePow:()=>e_,scaleQuantile:()=>m_,scaleQuantize:()=>h_,scaleRadial:()=>r_,scaleSequential:()=>ME,scaleSequentialLog:()=>IE,scaleSequentialPow:()=>FE,scaleSequentialQuantile:()=>WE,scaleSequentialSqrt:()=>BE,scaleSequentialSymlog:()=>LE,scaleSqrt:()=>t_,scaleSymlog:()=>YN,scaleThreshold:()=>p_,scaleTime:()=>AE,scaleUtc:()=>PE,tickFormat:()=>ON});var t=__webpack_require__(5043),n=__webpack_require__.t(t,2),r=__webpack_require__(4391),a=__webpack_require__(3216),s=__webpack_require__(7950),i=__webpack_require__.t(s,2),o=__webpack_require__(1387);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const d=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(H5){}new Map;const u=n.startTransition;i.flushSync,n.useId;function m(e){let{basename:n,children:r,future:s,window:i}=e,l=t.useRef();null==l.current&&(l.current=(0,o.zR)({window:i,v5Compat:!0}));let c=l.current,[d,m]=t.useState({action:c.action,location:c.location}),{v7_startTransition:h}=s||{},p=t.useCallback((e=>{h&&u?u((()=>m(e))):m(e)}),[m,h]);return t.useLayoutEffect((()=>c.listen(p)),[c,p]),t.useEffect((()=>(0,a.V8)(s)),[s]),t.createElement(a.Ix,{basename:n,children:r,location:d.location,navigationType:d.action,navigator:c,future:s})}const h="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,p=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,f=t.forwardRef((function(e,n){let r,{onClick:s,relative:i,reloadDocument:u,replace:m,state:f,target:v,to:g,preventScrollReset:x,viewTransition:y}=e,b=c(e,d),{basename:j}=t.useContext(a.jb),w=!1;if("string"===typeof g&&p.test(g)&&(r=g,h))try{let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g),n=(0,o.pb)(t.pathname,j);t.origin===e.origin&&null!=n?g=n+t.search+t.hash:w=!0}catch(H5){}let N=(0,a.$P)(g,{relative:i}),_=function(e,n){let{target:r,replace:s,state:i,preventScrollReset:l,relative:c,viewTransition:d}=void 0===n?{}:n,u=(0,a.Zp)(),m=(0,a.zy)(),h=(0,a.x$)(e,{relative:c});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==s?s:(0,o.AO)(m)===(0,o.AO)(h);u(e,{replace:n,state:i,preventScrollReset:l,relative:c,viewTransition:d})}}),[m,u,h,s,i,r,e,l,c,d])}(g,{replace:m,state:f,target:v,preventScrollReset:x,relative:i,viewTransition:y});return t.createElement("a",l({},b,{href:r||N,onClick:w||u?s:function(e){s&&s(e),e.defaultPrevented||_(e)},ref:n,target:v}))}));var v,g,x,y;(g=v||(v={})).UseScrollRestoration="useScrollRestoration",g.UseSubmit="useSubmit",g.UseSubmitFetcher="useSubmitFetcher",g.UseFetcher="useFetcher",g.useViewTransitionState="useViewTransitionState",(y=x||(x={})).UseFetcher="useFetcher",y.UseFetchers="useFetchers",y.UseScrollRestoration="useScrollRestoration";var b=__webpack_require__(6604),j=__webpack_require__(3003),w=__webpack_require__(3390),N=__webpack_require__(7784);const _=(0,N.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var S=__webpack_require__(1360),E=__webpack_require__(9989),C=__webpack_require__(9855),D=__webpack_require__(6210),T=__webpack_require__(614),k=__webpack_require__(1140),A=__webpack_require__(8414),P=__webpack_require__(7152),O=__webpack_require__(8901),R=__webpack_require__(6638),M=__webpack_require__(9250),I=__webpack_require__(6756);const L=(0,I.zD)("staff/fetchStaffMembers",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/staff`,{headers:{"Content-Type":"application/json"},credentials:"include"});if(500===e.status)throw new Error("Server error: 500 Internal Server Error");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(r){return n(r.message)}})),F=(0,I.zD)("staff/createStaffMember",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/staff`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(500===t.status)throw new Error("Server error: 500 Internal Server Error");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return(await t.json()).staff}catch(r){return n(r.message)}})),B=(0,I.zD)("staff/updateStaffMember",(async(e,t)=>{let{id:n,data:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${M.B8}/api/staff/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});if(500===e.status)throw new Error("Server error: 500 Internal Server Error");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(s){return a(s.message)}})),W=(0,I.Z0)({name:"staff",initialState:{staffMembers:[],doctors:[],status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(L.pending,(e=>{e.status="loading"})).addCase(L.fulfilled,((e,t)=>{var n;e.status="succeeded",e.staffMembers=t.payload,e.doctors=null===(n=e.staffMembers)||void 0===n?void 0:n.filter((e=>e.roles.includes("doctor")))})).addCase(L.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(F.pending,(e=>{e.status="loading"})).addCase(F.fulfilled,((e,t)=>{e.status="succeeded",e.staffMembers.push(t.payload)})).addCase(F.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(B.pending,(e=>{e.status="loading"})).addCase(B.fulfilled,((e,t)=>{e.status="succeeded";const n=e.staffMembers.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.staffMembers[n]=t.payload),e.doctors=e.staffMembers.filter((e=>e.roles.includes("doctor")))})).addCase(B.rejected,((e,t)=>{e.status="failed",e.error=t.payload}))}}),{getDoctors:U}=W.actions,z=W.reducer;var H=__webpack_require__(5830),V=__webpack_require__(1862),q=__webpack_require__(2814),G=__webpack_require__(5179),K=__webpack_require__(858),Y=__webpack_require__(6851),X=__webpack_require__(579),Z="AlertDialog",[J,Q]=(0,V.A)(Z,[G.Hs]),ee=(0,G.Hs)(),te=e=>{const{__scopeAlertDialog:t,...n}=e,r=ee(t);return(0,X.jsx)(G.bL,{...r,...n,modal:!0})};te.displayName=Z;var ne=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ee(n);return(0,X.jsx)(G.l9,{...a,...r,ref:t})}));ne.displayName="AlertDialogTrigger";var re=e=>{const{__scopeAlertDialog:t,...n}=e,r=ee(t);return(0,X.jsx)(G.ZL,{...r,...n})};re.displayName="AlertDialogPortal";var ae=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ee(n);return(0,X.jsx)(G.hJ,{...a,...r,ref:t})}));ae.displayName="AlertDialogOverlay";var se="AlertDialogContent",[ie,oe]=J(se),le=t.forwardRef(((e,n)=>{const{__scopeAlertDialog:r,children:a,...s}=e,i=ee(r),o=t.useRef(null),l=(0,q.s)(n,o),c=t.useRef(null);return(0,X.jsx)(G.G$,{contentName:se,titleName:ce,docsSlug:"alert-dialog",children:(0,X.jsx)(ie,{scope:r,cancelRef:c,children:(0,X.jsxs)(G.UC,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:(0,K.m)(s.onOpenAutoFocus,(e=>{e.preventDefault(),c.current?.focus({preventScroll:!0})})),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,X.jsx)(Y.xV,{children:a}),(0,X.jsx)(ve,{contentRef:o})]})})})}));le.displayName=se;var ce="AlertDialogTitle",de=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ee(n);return(0,X.jsx)(G.hE,{...a,...r,ref:t})}));de.displayName=ce;var ue="AlertDialogDescription",me=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ee(n);return(0,X.jsx)(G.VY,{...a,...r,ref:t})}));me.displayName=ue;var he=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ee(n);return(0,X.jsx)(G.bm,{...a,...r,ref:t})}));he.displayName="AlertDialogAction";var pe="AlertDialogCancel",fe=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=oe(pe,n),s=ee(n),i=(0,q.s)(t,a);return(0,X.jsx)(G.bm,{...s,...r,ref:i})}));fe.displayName=pe;var ve=e=>{let{contentRef:n}=e;const r=`\`${se}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${se}\` by passing a \`${ue}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${se}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return t.useEffect((()=>{document.getElementById(n.current?.getAttribute("aria-describedby"))||console.warn(r)}),[r,n]),null},ge=te,xe=ne,ye=re,be=ae,je=le,we=he,Ne=fe,_e=de,Se=me,Ee=__webpack_require__(9766);const Ce=ge,De=xe,Te=ye,ke=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(be,{className:(0,Ee.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r,ref:t})}));ke.displayName=be.displayName;const Ae=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsxs)(Te,{children:[(0,X.jsx)(ke,{}),(0,X.jsx)(je,{ref:t,className:(0,Ee.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...r})]})}));Ae.displayName=je.displayName;const Pe=e=>{let{className:t,...n}=e;return(0,X.jsx)("div",{className:(0,Ee.cn)("flex flex-col space-y-0 text-center sm:text-left",t),...n})};Pe.displayName="AlertDialogHeader";const Oe=e=>{let{className:t,...n}=e;return(0,X.jsx)("div",{className:(0,Ee.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};Oe.displayName="AlertDialogFooter";const Re=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(_e,{ref:t,className:(0,Ee.cn)("text-lg font-semibold",n),...r})}));Re.displayName=_e.displayName;const Me=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(Se,{ref:t,className:(0,Ee.cn)("text-sm text-muted-foreground",n),...r})}));Me.displayName=Se.displayName;const Ie=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(we,{ref:t,className:(0,Ee.cn)((0,w.r)(),n),...r})}));Ie.displayName=we.displayName;const Le=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(Ne,{ref:t,className:(0,Ee.cn)((0,w.r)({variant:"outline"}),"mt-2 sm:mt-0",n),...r})}));function Fe(){var e;const n=(0,a.Zp)(),r=(0,j.wA)(),{toast:s}=(0,H.dj)(),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(null),[m,h]=(0,t.useState)(null),p=(0,j.d4)((e=>e.templates.dischargeFormTemplateArray||[])),f=(0,j.d4)((e=>e.staff.doctors||[]));(0,t.useEffect)((()=>{r(L())}),[r]);return(0,X.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 max-w-7xl",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,X.jsx)(w.$,{onClick:()=>{n(-1)},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Discharge Form Templates"})]}),(0,X.jsx)("div",{className:"mb-6",children:(0,X.jsxs)(w.$,{onClick:()=>{c(null),o(!0)},children:[(0,X.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Create New Template"]})}),(0,X.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:null===p||void 0===p?void 0:p.map((e=>(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{className:"pb-3",children:(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsx)(k.ZB,{className:"text-lg",children:e.name}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>(e=>{c(e),o(!0)})(e),children:(0,X.jsx)(E.A,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>u(e),children:(0,X.jsx)(C.A,{className:"h-4 w-4"})})]})]})}),(0,X.jsx)(k.Wu,{children:(0,X.jsx)("div",{className:"flex items-center text-sm text-muted-foreground",children:e.isDefault&&(0,X.jsxs)("div",{className:"flex items-center text-primary",children:[(0,X.jsx)(D.A,{className:"h-4 w-4 mr-1"}),"Default Template"]})})})]},e.name)))}),i&&(0,X.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,X.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[(0,X.jsx)(P.A,{config:(0,O.xX)(),enabledFields:(null===l||void 0===l?void 0:l.value)||(0,O.xX)(),onSave:async e=>{try{var t;if(null===(t=e.name)||void 0===t||!t.trim())return void s({title:"Error",description:"Template name is required",variant:"destructive"});const n=(l?p.filter((e=>e.name!==l.name)):p).map((t=>({...t,isDefault:!e.isDefault&&t.isDefault}))),a={...e,associatedDoctors:(null===l||void 0===l?void 0:l.associatedDoctors)||[],_id:null===l||void 0===l?void 0:l._id};n.push(a),await r((0,R.ub)({dischargeFormTemplateArray:n})).unwrap(),s({variant:"success",title:"Success",description:"Template saved successfully"}),o(!1),c(null)}catch(n){s({title:"Error",description:"Failed to save template",variant:"destructive"})}},onCancel:()=>{o(!1),c(null)},initialValues:{templateName:(null===l||void 0===l?void 0:l.name)||"",isDefault:(null===l||void 0===l?void 0:l.isDefault)||!1}}),(0,X.jsxs)("div",{className:"mt-1 border-t pt-1",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,X.jsxs)(A.l6,{value:m,onValueChange:h,children:[(0,X.jsx)(A.bq,{className:"w-[200px]",children:(0,X.jsx)(A.yv,{placeholder:"Select a doctor"})}),(0,X.jsx)(A.gC,{children:f.map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.name},e._id)))})]}),(0,X.jsx)(w.$,{onClick:()=>{if(!m)return;const e=f.find((e=>e._id===m));if(!e)return;if(p.some((t=>{var n;return t._id!==(null===l||void 0===l?void 0:l._id)&&(null===(n=t.associatedDoctors)||void 0===n?void 0:n.some((t=>t._id===e._id)))})))return void s({title:"Error",description:"This doctor is already assigned to another template",variant:"destructive"});const t={...l,associatedDoctors:[...(null===l||void 0===l?void 0:l.associatedDoctors)||[],{_id:e._id,name:e.name}]};c(t),h(null)},variant:"secondary",children:"Add Doctor"})]}),(0,X.jsx)("div",{className:"flex flex-wrap gap-2",children:null===l||void 0===l||null===(e=l.associatedDoctors)||void 0===e?void 0:e.map((e=>(0,X.jsxs)("div",{className:"flex items-center gap-2 bg-secondary  rounded",children:[(0,X.jsx)("span",{children:e.name}),(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>(e=>{const t={...l,associatedDoctors:l.associatedDoctors.filter((t=>t._id!==e))};c(t)})(e._id),children:(0,X.jsx)(T.A,{className:"h-3 w-3"})})]},e._id)))})]})]})}),(0,X.jsx)(Ce,{open:!!d,onOpenChange:()=>u(null),children:(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Are you sure?"}),(0,X.jsxs)(Me,{children:['This will permanently delete the template "',null===d||void 0===d?void 0:d.name,'". This action cannot be undone.']})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{children:"Cancel"}),(0,X.jsx)(Ie,{onClick:()=>(async e=>{try{const t=p.filter((t=>t._id!==e._id));await r((0,R.ub)({dischargeFormTemplateArray:t})).unwrap(),s({title:"Success",description:"Template deleted successfully",variant:"success"}),u(null)}catch(t){s({title:"Error",description:"Failed to delete template",variant:"destructive"})}})(d),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}Le.displayName=Ne.displayName;var Be=__webpack_require__(6195);const We=(0,I.zD)("departments/fetchDepartments",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/departments`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(500===e.status)throw new Error("Server error: 500 Internal Server Error");return await e.json()}catch(r){return n(r.message)}})),$e=(0,I.zD)("departments/createDepartment",(async(e,t)=>{let{name:n,staffIds:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${M.B8}/api/departments`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:n,staffIds:r})});if(500===e.status)throw new Error("Server error: 500 Internal Server Error");return await e.json()}catch(s){return a(s.message)}})),Ue=(0,I.zD)("departments/addDoctorToDepartment",(async(e,t)=>{let{departmentId:n,doctorId:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${M.B8}/api/departments/${n}/addDoctor`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({doctorId:r})});if(500===e.status)throw new Error("Server error: 500 Internal Server Error");return await e.json()}catch(s){return a(s.message)}})),ze=(0,I.zD)("departments/removeDoctorFromDepartment",(async(e,t)=>{let{departmentId:n,doctorId:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${M.B8}/api/departments/${n}/removeDoctor`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({doctorId:r})});if(500===e.status)throw new Error("Server error: 500 Internal Server Error");return await e.json()}catch(s){return a(s.message)}})),He=(0,I.zD)("departments/updateDepartment",(async(e,t)=>{let{id:n,name:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${M.B8}/api/departments/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:r})});if(!e.ok)throw new Error("Server error: 500 Internal Server Error");return await e.json()}catch(s){return a(s.message)}})),Ve=(0,I.zD)("departments/deleteDepartment",(async(e,t)=>{let{rejectWithValue:n}=t;try{if(500===(await fetch(`${M.B8}/api/departments/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"})).status)throw new Error("Server error: 500 Internal Server Error");return e}catch(r){return n(r.message)}})),qe=(0,I.Z0)({name:"departments",initialState:{departments:[],status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(We.pending,(e=>{e.status="loading"})).addCase(We.fulfilled,((e,t)=>{e.status="succeeded",e.departments=t.payload})).addCase(We.rejected,((e,t)=>{e.status="failed",e.error=t.payload.error})).addCase($e.fulfilled,((e,t)=>{e.departments.push(t.payload)})).addCase(Ue.fulfilled,((e,t)=>{const n=e.departments.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.departments[n]=t.payload)})).addCase(ze.fulfilled,((e,t)=>{const n=e.departments.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.departments[n]=t.payload)})).addCase(He.fulfilled,((e,t)=>{const n=e.departments.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.departments[n]=t.payload)})).addCase(Ve.fulfilled,((e,t)=>{e.departments=e.departments.filter((e=>e._id!==t.payload))}))}}).reducer;var Ge=__webpack_require__(989);const Ke=(0,Ge.A)("user/loginUser",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Login failed")}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),Ye=(0,Ge.A)("user/fetchUserData",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/staff/me`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(500===e.status)throw new Error("Server error: 500 Internal Server Error");if(!e.ok)throw new Error("Failed to fetch user data");return await e.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),Xe=(0,I.Z0)({name:"user",initialState:{userData:null,status:"idle",error:null,isAuthenticated:!1,loginStatus:"idle",loginError:null},reducers:{clearUserData:e=>{e.userData=null,e.status="idle",e.error=null,e.isAuthenticated=!1,e.loginStatus="idle",e.loginError=null}},extraReducers:e=>{e.addCase(Ke.pending,(e=>{e.loginStatus="loading",e.loginError=null})).addCase(Ke.fulfilled,(e=>{e.loginStatus="succeeded",e.isAuthenticated=!0})).addCase(Ke.rejected,((e,t)=>{e.loginStatus="failed",e.loginError=t.payload,e.isAuthenticated=!1})).addCase(Ye.pending,(e=>{e.status="loading"})).addCase(Ye.fulfilled,((e,t)=>{e.status="succeeded",e.userData=t.payload,e.isAuthenticated=!0})).addCase(Ye.rejected,((e,t)=>{e.status="failed",e.error=t.payload,e.isAuthenticated=!1})).addCase(B.fulfilled,((e,t)=>{e.userData&&e.userData._id===t.payload._id&&(e.userData=t.payload)}))}}),{clearUserData:Ze}=Xe.actions,Je=Xe.reducer,Qe=(0,Ge.A)("rooms/fetchRooms",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/rooms`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to fetch rooms");return e.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),et=(0,Ge.A)("rooms/createRoom",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/rooms`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){return n(await t.json())}return t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),tt=(0,Ge.A)("rooms/updateRoom",(async(e,t)=>{let{id:n,room:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${M.B8}/api/rooms/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});if(!e.ok){return a(await e.json())}return e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),nt=(0,Ge.A)("rooms/deleteRoom",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/rooms/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok){return n(await t.json())}return t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),rt=(0,Ge.A)("rooms/emptyBeds",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/rooms/empty-beds`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){return n(await t.json())}return t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),at=(0,I.Z0)({name:"rooms",initialState:{rooms:[],status:"idle",createRoomStatus:"idle",updateRoomStatus:"idle",deleteRoomStatus:"idle",emptyBedsStatus:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(Qe.pending,(e=>{e.status="loading"})).addCase(Qe.fulfilled,((e,t)=>{e.status="succeeded",e.rooms=t.payload})).addCase(Qe.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(et.pending,(e=>{e.createRoomStatus="loading"})).addCase(et.fulfilled,((e,t)=>{e.createRoomStatus="succeeded",e.rooms.push(t.payload)})).addCase(et.rejected,((e,t)=>{e.createRoomStatus="failed",e.error=t.payload})).addCase(tt.pending,(e=>{e.updateRoomStatus="loading"})).addCase(tt.fulfilled,((e,t)=>{e.updateRoomStatus="succeeded";const n=e.rooms.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.rooms[n]=t.payload)})).addCase(tt.rejected,((e,t)=>{e.updateRoomStatus="failed",e.error=t.payload})).addCase(nt.pending,(e=>{e.deleteRoomStatus="loading"})).addCase(nt.fulfilled,((e,t)=>{e.deleteRoomStatus="succeeded",e.rooms=e.rooms.filter((e=>e._id!==t.payload.room._id))})).addCase(nt.rejected,((e,t)=>{e.deleteRoomStatus="failed",e.error=t.payload})).addCase(rt.pending,(e=>{e.emptyBedsStatus="loading"})).addCase(rt.fulfilled,((e,t)=>{e.emptyBedsStatus="succeeded",t.payload.rooms.forEach((t=>{const n=e.rooms.findIndex((e=>e._id===t._id));-1!==n&&(e.rooms[n]=t)}))})).addCase(rt.rejected,((e,t)=>{e.emptyBedsStatus="failed",e.error=t.payload}))}}).reducer;var st=__webpack_require__(112),it=__webpack_require__(5126);const ot=(0,Ge.A)("billing/createService",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/billing/service`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),lt=(0,Ge.A)("billing/fetchServices",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/billing/services`,{credentials:"include"});if(!e.ok){return n(await e.json())}return await e.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),ct=(0,Ge.A)("billing/updateService",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/billing/service/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),dt=(0,Ge.A)("billing/deleteService",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/billing/service/${e}`,{method:"DELETE",credentials:"include"});if(!t.ok){return n(await t.json())}return e}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),ut=(0,Ge.A)("billing/importServices",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/billing/services/bulk`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({services:e}),credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),mt=(0,I.Z0)({name:"services",initialState:{services:[],servicesStatus:"idle",createServiceStatus:"idle",updateServiceStatus:"idle",deleteServiceStatus:"idle",importServicesStatus:"idle",importServicesError:null,error:null},reducers:{},extraReducers:e=>{e.addCase(ot.pending,(e=>{e.createServiceStatus="loading",e.error=null})).addCase(ot.fulfilled,((e,t)=>{e.createServiceStatus="succeeded",e.services.push(t.payload)})).addCase(ot.rejected,((e,t)=>{e.createServiceStatus="failed",e.error=t.payload})).addCase(lt.pending,(e=>{e.servicesStatus="loading",e.error=null})).addCase(lt.fulfilled,((e,t)=>{e.servicesStatus="succeeded",e.services=t.payload})).addCase(lt.rejected,((e,t)=>{e.servicesStatus="failed",e.error=t.payload})).addCase(ct.pending,(e=>{e.updateServiceStatus="loading",e.error=null})).addCase(ct.fulfilled,((e,t)=>{e.updateServiceStatus="succeeded";const n=e.services.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.services[n]=t.payload)})).addCase(ct.rejected,((e,t)=>{e.updateServiceStatus="failed",e.error=t.payload})).addCase(dt.pending,(e=>{e.deleteServiceStatus="loading",e.error=null})).addCase(dt.fulfilled,((e,t)=>{e.deleteServiceStatus="succeeded",e.services=e.services.filter((e=>e._id!==t.payload))})).addCase(dt.rejected,((e,t)=>{e.deleteServiceStatus="failed",e.error=t.payload}))}}).reducer,ht=(0,Ge.A)("billing/createBill",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/billing/create-bill`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),pt=(0,Ge.A)("billing/fetchBills",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{rejectWithValue:t}=arguments.length>1?arguments[1]:void 0;try{var n,r,a,s;const i=new URLSearchParams;if((null===(n=e.dateRange)||void 0===n||!n.startDate)&&(null===(r=e.dateRange)||void 0===r||!r.endDate))return t("Please select a date range");if(null!==(a=e.dateRange)&&void 0!==a&&a.startDate){const t=new Date(e.dateRange.startDate+"T00:00:00");i.append("startDate",t)}if(null!==(s=e.dateRange)&&void 0!==s&&s.endDate){const t=new Date(e.dateRange.endDate+"T23:59:59");i.append("endDate",t)}const o=`${M.B8}/api/billing/get-bills${i.toString()?`?${i.toString()}`:""}`,l=await fetch(o,{credentials:"include"});if(!l.ok){return t(await l.json())}return await l.json()}catch(i){return t(i.message)}}),{useGlobalLoader:!0}),ft=(0,Ge.A)("billing/updateBill",(async(e,t)=>{let{billId:n,billData:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${M.B8}/api/billing/update-bill/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),vt=(0,Ge.A)("billing/deleteBill",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/billing/delete-bill/${e}`,{method:"DELETE",credentials:"include"});if(!t.ok){return n(await t.json())}return e}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),gt=(0,Ge.A)("bills/addPayment",(async(e,t)=>{let{billId:n,payment:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${M.B8}/api/billing/${n}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),xt=(0,Ge.A)("billing/createOPDProcedureBill",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/billing/create-opd-procedure-bill`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),yt=(0,Ge.A)("billing/fetchBillById",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/billing/get-bill/${e}`,{credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),bt=(0,Ge.A)("billing/searchBillByInvoice",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/billing/search-invoice`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoiceNumber:e}),credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),jt=(0,Ge.A)("bills/deletePayment",(async(e,t)=>{let{billId:n,paymentId:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${M.B8}/api/billing/${n}/payments/${r}`,{method:"DELETE",credentials:"include"});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),wt=(0,Ge.A)("billing/editPayment",(async(e,t)=>{let{billId:n,paymentId:r,paymentData:a}=e,{rejectWithValue:s}=t;try{const e=await fetch(`${M.B8}/api/billing/${n}/payments/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to edit payment")}return await e.json()}catch(i){return s(i.message)}})),Nt=(0,I.Z0)({name:"bills",initialState:{bills:[],billsStatus:"idle",createBillStatus:"idle",updateBillStatus:"idle",error:null,createOPDProcedureBillStatus:"idle",currentBill:null,currentBillStatus:"idle",editPaymentStatus:"idle",editPaymentError:null},reducers:{setCreateBillStatusIdle:e=>{e.createBillStatus="idle",e.updateBillStatus="idle"},updateBillAfterPayment:(e,t)=>{const n=t.payload;e.bills=e.bills.map((e=>e._id===n._id?n:e))}},extraReducers:e=>{e.addCase(ht.pending,(e=>{e.createBillStatus="loading",e.error=null})).addCase(ht.fulfilled,((e,t)=>{e.createBillStatus="succeeded",e.bills.unshift(t.payload)})).addCase(ht.rejected,((e,t)=>{e.createBillStatus="failed",e.error=t.payload})).addCase(pt.pending,(e=>{e.billsStatus="loading",e.error=null})).addCase(pt.fulfilled,((e,t)=>{e.billsStatus="succeeded",e.bills=t.payload})).addCase(pt.rejected,((e,t)=>{e.billsStatus="failed",e.error=t.payload})).addCase(ft.pending,(e=>{e.updateBillStatus="loading",e.error=null})).addCase(ft.fulfilled,((e,t)=>{e.updateBillStatus="succeeded";const n=e.bills.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.bills[n]=t.payload)})).addCase(ft.rejected,((e,t)=>{e.updateBillStatus="failed",e.error=t.payload})).addCase(vt.pending,(e=>{e.error=null})).addCase(vt.fulfilled,((e,t)=>{e.bills=e.bills.filter((e=>e._id!==t.payload))})).addCase(vt.rejected,((e,t)=>{e.error=t.payload})).addCase(gt.fulfilled,((e,t)=>{const n=e.bills.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.bills[n]=t.payload)})).addCase(xt.pending,(e=>{e.createOPDProcedureBillStatus="loading",e.error=null})).addCase(xt.fulfilled,((e,t)=>{e.createOPDProcedureBillStatus="succeeded",e.bills.unshift(t.payload)})).addCase(xt.rejected,((e,t)=>{e.createOPDProcedureBillStatus="failed",e.error=t.payload})).addCase(yt.pending,(e=>{e.currentBillStatus="loading",e.error=null})).addCase(yt.fulfilled,((e,t)=>{e.currentBillStatus="succeeded",e.currentBill=t.payload})).addCase(yt.rejected,((e,t)=>{e.currentBillStatus="failed",e.error=t.payload})).addCase(bt.fulfilled,((e,t)=>{e.billsStatus="succeeded"})).addCase(bt.rejected,((e,t)=>{e.billsStatus="failed",e.error=t.payload})).addCase(jt.fulfilled,((e,t)=>{const n=e.bills.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.bills[n]=t.payload)})).addCase(jt.rejected,((e,t)=>{e.error=t.payload})).addCase(wt.pending,(e=>{e.editPaymentStatus="loading",e.error=null})).addCase(wt.fulfilled,((e,t)=>{var n;e.editPaymentStatus="succeeded";const r=e.bills.findIndex((e=>e._id===t.payload._id));-1!==r&&(e.bills[r]=t.payload),(null===(n=e.currentBill)||void 0===n?void 0:n._id)===t.payload._id&&(e.currentBill=t.payload)})).addCase(wt.rejected,((e,t)=>{e.editPaymentStatus="failed",e.error=t.payload}))}}),{setCreateBillStatusIdle:_t,updateBillAfterPayment:St}=Nt.actions,Et=Nt.reducer,Ct=(0,Ge.A)("hospital/fetchHospitalInfo",(async()=>{const e=await fetch(`${M.B8}/api/hospitals/getHospital`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch hospital data");const t=await e.json();if(t.logo)try{const e=await fetch(t.logo),n=await e.blob();t.hospitalLogoBlob=URL.createObjectURL(n)}catch(n){console.error("Failed to fetch hospital logo:",n),t.hospitalLogoBlob=null}if(t.logo2)try{const e=await fetch(t.logo2),n=await e.blob();t.hospitalLogo2Blob=URL.createObjectURL(n)}catch(n){console.error("Failed to fetch hospital logo2:",n),t.hospitalLogo2Blob=null}if(t.morelogos&&t.morelogos.length>0){t.moreLogosBlobs=[];for(const e of t.morelogos)try{const n=await fetch(e),r=await n.blob();t.moreLogosBlobs.push(URL.createObjectURL(r))}catch(n){console.error("Failed to fetch additional logo:",n),t.moreLogosBlobs.push(null)}}return t}),{useGlobalLoading:!0}),Dt=(0,Ge.A)("hospital/updateHospitalInfo",(async e=>{const t=await fetch(`${M.B8}/api/hospitals/${e.hospitalId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update hospital data");const n=await t.json();if(n.logo)try{const e=await fetch(n.logo),t=await e.blob();n.hospitalLogoBlob=URL.createObjectURL(t)}catch(r){console.error("Failed to fetch updated hospital logo:",r),n.hospitalLogoBlob=null}if(n.logo2)try{const e=await fetch(n.logo2),t=await e.blob();n.hospitalLogo2Blob=URL.createObjectURL(t)}catch(r){console.error("Failed to fetch updated hospital logo2:",r),n.hospitalLogo2Blob=null}if(n.morelogos&&n.morelogos.length>0){n.moreLogosBlobs=[];for(const e of n.morelogos)try{const t=await fetch(e),r=await t.blob();n.moreLogosBlobs.push(URL.createObjectURL(r))}catch(r){console.error("Failed to fetch updated additional logo:",r),n.moreLogosBlobs.push(null)}}return n}),{useGlobalLoading:!0}),Tt=(0,I.Z0)({name:"hospital",initialState:{hospitalInfo:null,hospitalLogoBlob:null,hospitalLogo2Blob:null,moreLogosBlobs:[],hospitalInfoStatus:"idle",updateStatus:"idle",error:null},reducers:{cleanupLogoBlob:e=>{e.hospitalLogoBlob&&(URL.revokeObjectURL(e.hospitalLogoBlob),e.hospitalLogoBlob=null),e.hospitalLogo2Blob&&(URL.revokeObjectURL(e.hospitalLogo2Blob),e.hospitalLogo2Blob=null),e.moreLogosBlobs&&e.moreLogosBlobs.length>0&&(e.moreLogosBlobs.forEach((e=>{e&&URL.revokeObjectURL(e)})),e.moreLogosBlobs=[])}},extraReducers:e=>{e.addCase(Ct.pending,(e=>{e.hospitalInfoStatus="loading",e.hospitalLogoBlob&&URL.revokeObjectURL(e.hospitalLogoBlob),e.hospitalLogo2Blob&&URL.revokeObjectURL(e.hospitalLogo2Blob),e.moreLogosBlobs&&e.moreLogosBlobs.length>0&&(e.moreLogosBlobs.forEach((e=>{e&&URL.revokeObjectURL(e)})),e.moreLogosBlobs=[])})).addCase(Ct.fulfilled,((e,t)=>{e.hospitalInfoStatus="succeeded",e.hospitalInfo=t.payload,e.hospitalLogoBlob=t.payload.hospitalLogoBlob,e.hospitalLogo2Blob=t.payload.hospitalLogo2Blob,e.moreLogosBlobs=t.payload.moreLogosBlobs||[]})).addCase(Ct.rejected,((e,t)=>{e.hospitalInfoStatus="failed",e.error=t.error.message})).addCase(Dt.pending,(e=>{e.updateStatus="loading",e.hospitalLogoBlob&&URL.revokeObjectURL(e.hospitalLogoBlob),e.hospitalLogo2Blob&&URL.revokeObjectURL(e.hospitalLogo2Blob),e.moreLogosBlobs&&e.moreLogosBlobs.length>0&&(e.moreLogosBlobs.forEach((e=>{e&&URL.revokeObjectURL(e)})),e.moreLogosBlobs=[])})).addCase(Dt.fulfilled,((e,t)=>{e.updateStatus="succeeded",e.hospitalInfo=t.payload.hospital,e.hospitalLogoBlob=t.payload.hospital.hospitalLogoBlob,e.hospitalLogo2Blob=t.payload.hospital.hospitalLogo2Blob,e.moreLogosBlobs=t.payload.hospital.moreLogosBlobs||[]})).addCase(Dt.rejected,((e,t)=>{e.updateStatus="failed",e.error=t.error.message}))}}),{cleanupLogoBlob:kt}=Tt.actions,At=Tt.reducer,Pt=(0,Ge.A)("dashboard/fetchData",(async(e,t)=>{let{startDate:n,endDate:r,range:a}=e,{getState:s}=t;s();const i=new URLSearchParams({startDate:n,endDate:r}),o=await fetch(`${M.B8}/api/dashboard/daily-stats?${i}`,{credentials:"include"});if(!o.ok)throw new Error("Failed to fetch dashboard data");return await o.json()}),{useGlobalLoader:!0}),Ot=(0,I.Z0)({name:"dashboard",initialState:{dashboardData:[],dashboardDataStatus:"idle",dashboardRange:"idle",error:null},reducers:{setDashboardDataStatusIdle:e=>{e.dashboardDataStatus="idle"}},extraReducers:e=>{e.addCase(Pt.pending,(e=>{e.dashboardDataStatus="loading"})).addCase(Pt.fulfilled,((e,t)=>{e.dashboardDataStatus="succeeded",e.dashboardData=t.payload,e.dashboardRange=t.meta.arg.range})).addCase(Pt.rejected,((e,t)=>{e.dashboardDataStatus="failed",e.error=t.error.message}))}}),{setDashboardDataStatusIdle:Rt}=Ot.actions,Mt=Ot.reducer;var It=__webpack_require__(2191);const Lt=(0,Ge.A)("expenses/createExpense",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/expenses/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),Ft=(0,Ge.A)("expenses/updateExpense",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/expenses/update/${e._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),Bt=(0,Ge.A)("expenses/payExpense",(async(e,t)=>{let{id:n,paymentData:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${M.B8}/api/expenses/${n}/pay`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),Wt=(0,Ge.A)("expenses/deleteExpense",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/expenses/${e}`,{method:"DELETE",credentials:"include"});if(!t.ok){return n(await t.json())}return e}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),$t=(0,Ge.A)("expenses/fetchExpenses",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=new URL(`${M.B8}/api/expenses`);e&&(e.startDate&&t.searchParams.append("startDate",e.startDate),e.endDate&&t.searchParams.append("endDate",e.endDate));const r=await fetch(t,{method:"GET",credentials:"include"});if(!r.ok){return n(await r.json())}return await r.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),Ut=(0,I.Z0)({name:"expenses",initialState:{expenses:[],expensesStatus:"idle",createExpenseStatus:"idle",updateExpenseStatus:"idle",payExpenseStatus:"idle",deleteExpenseStatus:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(Lt.pending,(e=>{e.createExpenseStatus="loading",e.error=null})).addCase(Lt.fulfilled,((e,t)=>{e.createExpenseStatus="succeeded",e.expenses.unshift(t.payload)})).addCase(Lt.rejected,((e,t)=>{e.createExpenseStatus="failed",e.error=t.payload})).addCase(Ft.pending,(e=>{e.updateExpenseStatus="loading",e.error=null})).addCase(Ft.fulfilled,((e,t)=>{e.updateExpenseStatus="succeeded";const n=e.expenses.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.expenses[n]=t.payload)})).addCase(Ft.rejected,((e,t)=>{e.updateExpenseStatus="failed",e.error=t.payload})).addCase(Bt.pending,(e=>{e.payExpenseStatus="loading",e.error=null})).addCase(Bt.fulfilled,((e,t)=>{e.payExpenseStatus="succeeded";const n=e.expenses.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.expenses[n]=t.payload)})).addCase(Bt.rejected,((e,t)=>{e.payExpenseStatus="failed",e.error=t.payload})).addCase(Wt.pending,(e=>{e.deleteExpenseStatus="loading",e.error=null})).addCase(Wt.fulfilled,((e,t)=>{e.deleteExpenseStatus="succeeded",e.expenses=e.expenses.filter((e=>e._id!==t.payload))})).addCase(Wt.rejected,((e,t)=>{e.deleteExpenseStatus="failed",e.error=t.payload})).addCase($t.pending,(e=>{e.expensesStatus="loading",e.error=null})).addCase($t.fulfilled,((e,t)=>{e.expensesStatus="succeeded",e.expenses=t.payload})).addCase($t.rejected,((e,t)=>{e.expensesStatus="failed",e.error=t.payload}))}}).reducer;var zt=__webpack_require__(8087);const Ht=(0,Ge.A)("payments/fetchPayments",(async(e,t)=>{let{startDate:n,endDate:r}=e,{rejectWithValue:a}=t;try{const e=new URLSearchParams({startDate:n,endDate:r}),t=await fetch(`${M.B8}/api/payments/filter?${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch payments");return await t.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),Vt=(0,Ge.A)("payments/fetchPaymentStats",(async(e,t)=>{let{startDate:n,endDate:r}=e,{rejectWithValue:a}=t;try{const e=new URLSearchParams({startDate:n,endDate:r}),t=await fetch(`${M.B8}/api/payments/statistics?${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch payment statistics");return await t.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),qt=(0,Ge.A)("payments/deletePayment",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/payments/${e}`,{method:"DELETE",credentials:"include"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to delete payment")}return(await t.json()).deletedPaymentId}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),Gt=(0,I.Z0)({name:"payments",initialState:{payments:[],stats:{income:0,expense:0,net:0},status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(Ht.pending,(e=>{e.status="loading"})).addCase(Ht.fulfilled,((e,t)=>{e.status="succeeded",e.payments=t.payload})).addCase(Ht.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(Vt.fulfilled,((e,t)=>{e.stats=t.payload})).addCase(qt.pending,(e=>{e.status="deleting",e.error=null})).addCase(qt.fulfilled,((e,t)=>{if(e.status="succeeded",e.payments=e.payments.filter((e=>e._id!==t.payload)),e.stats&&e.payments.length>0){const t=e.payments.filter((e=>"Income"===e.type)).reduce(((e,t)=>e+(t.amount||0)),0),n=e.payments.filter((e=>"Expense"===e.type)).reduce(((e,t)=>e+(t.amount||0)),0);e.stats={income:t,expense:n,net:t-n}}e.error=null})).addCase(qt.rejected,((e,t)=>{e.status="failed",e.error=t.payload}))}}).reducer,Kt=(0,Ge.A)("lab/fetchRegistrations",(async(e,t)=>{let{startDate:n,endDate:r}=e,{rejectWithValue:a}=t;try{const e=new URLSearchParams({startDate:n,endDate:r}).toString(),t=await fetch(`${M.B8}/api/lab/registrations?${e}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),s=await t.json();return s.success?s.registrations:a(s.message||"Failed to fetch lab registrations")}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),Yt=(0,Ge.A)("lab/createRegistration",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/lab/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}),r=await t.json();return r.success?r.labRegistration:n(r.message||"Failed to create lab registration")}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),Xt=(0,Ge.A)("lab/updateTestStatus",(async(e,t)=>{let{registrationId:n,testName:r,newStatus:a}=e,{rejectWithValue:s}=t;try{const e=await fetch(`${M.B8}/api/lab/update-test-status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({registrationId:n,testName:r,newStatus:a}),credentials:"include"}),t=await e.json();return t.success?t:s(t.message||"Failed to update test status")}catch(i){return s(i.message)}}),{useGlobalLoader:!0}),Zt=(0,Ge.A)("lab/addPayment",(async(e,t)=>{let{labId:n,payment:r}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${M.B8}/api/lab/${n}/payment`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});if(!e.ok)return a("Failed to add payment");return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),Jt=(0,Ge.A)("lab/searchRegistrations",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/lab/search`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({searchQuery:e})}),r=await t.json();return r.success?r.registrations:n(r.message||"Failed to search lab registrations")}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),Qt=(0,Ge.A)("lab/addTests",(async(e,t)=>{let{id:n,labTests:r,testsToRemove:a,paymentInfo:s}=e,{rejectWithValue:i}=t;try{const e=await fetch(`${M.B8}/api/lab/add-tests/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({labTests:r,testsToRemove:a,paymentInfo:{totalAmount:s.totalAmount,amountPaid:s.amountPaid,paymentMethod:s.paymentMethod,additionalDiscount:s.additionalDiscount}}),credentials:"include"});if(!e.ok){return i((await e.json()).message||"Failed to update tests")}return await e.json()}catch(o){return i(o.message||"Failed to update tests")}}),{useGlobalLoader:!0}),en=(0,Ge.A)("lab/updateRegistration",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/lab/update/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}),r=await t.json();return r.success?r.labRegistration:n(r.message||"Failed to update lab registration")}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),tn=(0,Ge.A)("lab/deleteRegistration",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/lab/delete/${e}`,{method:"DELETE",credentials:"include"}),r=await t.json();return r.success?{registrationId:e}:n(r.error||"Failed to delete lab registration")}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),nn=(0,Ge.A)("lab/fetchLabData",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/lab/lab-data`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)return n("Failed to fetch lab data");const t=await e.json();return t.success?t:n(t.message||"Failed to fetch lab data")}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),rn=(0,I.Z0)({name:"lab",initialState:{registrations:[],registrationsStatus:"idle",createRegistrationStatus:"idle",updateRegistrationStatus:"idle",deleteRegistrationStatus:"idle",updateTestStatus:"idle",error:null,searchResults:[],searchStatus:"idle",labCategories:[],labReportFields:{},fetchLabDataStatus:"idle"},reducers:{setCreateRegistrationStatusIdle:e=>{e.createRegistrationStatus="idle"},setUpdateRegistrationStatusIdle:e=>{e.updateRegistrationStatus="idle"},setDeleteRegistrationStatusIdle:e=>{e.deleteRegistrationStatus="idle"},setUpdateTestStatusIdle:e=>{e.updateTestStatus="idle"},clearSearchResults:e=>{e.searchResults=[],e.searchStatus="idle"}},extraReducers:e=>{e.addCase(Kt.pending,(e=>{e.registrationsStatus="loading",e.error=null})).addCase(Kt.fulfilled,((e,t)=>{e.registrationsStatus="succeeded",e.registrations=t.payload})).addCase(Kt.rejected,((e,t)=>{e.registrationsStatus="failed",e.error=t.payload})).addCase(Yt.pending,(e=>{e.createRegistrationStatus="loading",e.error=null})).addCase(Yt.fulfilled,((e,t)=>{e.createRegistrationStatus="succeeded",e.registrations.push(t.payload)})).addCase(Yt.rejected,((e,t)=>{e.createRegistrationStatus="failed",e.error=t.payload})).addCase(Xt.pending,(e=>{e.updateTestStatus="loading",e.error=null})).addCase(Xt.fulfilled,((e,t)=>{e.updateTestStatus="succeeded";const n=e.registrations.findIndex((e=>e._id===t.payload.registration._id));-1!==n&&(e.registrations[n]=t.payload.registration)})).addCase(Xt.rejected,((e,t)=>{e.updateTestStatus="failed",e.error=t.payload})).addCase(Zt.pending,(e=>{e.updateTestStatus="loading"})).addCase(Zt.fulfilled,((e,t)=>{e.updateTestStatus="succeeded";const n=e.registrations.findIndex((e=>e._id===t.payload.labRegistration._id));if(-1!==n){let r={...t.payload.labRegistration,payments:[...e.registrations[n].payments,t.payload.payment]};e.registrations[n]=r}})).addCase(Zt.rejected,((e,t)=>{e.updateTestStatus="failed",e.error=t.payload})).addCase(Jt.pending,(e=>{e.searchStatus="loading",e.error=null})).addCase(Jt.fulfilled,((e,t)=>{e.searchStatus="succeeded",e.searchResults=t.payload})).addCase(Jt.rejected,((e,t)=>{e.searchStatus="failed",e.error=t.payload})).addCase(Qt.pending,(e=>{e.updateTestStatus="loading"})).addCase(Qt.fulfilled,((e,t)=>{e.updateTestStatus="succeeded";const n=e.registrations.findIndex((e=>e._id===t.payload.labRegistration._id));-1!==n&&(e.registrations[n]={...e.registrations[n],...t.payload.labRegistration,payments:t.payload.labRegistration.payments})})).addCase(Qt.rejected,((e,t)=>{var n;e.updateTestStatus="failed",e.error=(null===(n=t.payload)||void 0===n?void 0:n.error)||"Failed to update tests"})).addCase(en.pending,(e=>{e.updateRegistrationStatus="loading",e.error=null})).addCase(en.fulfilled,((e,t)=>{e.updateRegistrationStatus="succeeded";const n=e.registrations.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.registrations[n]=t.payload)})).addCase(en.rejected,((e,t)=>{e.updateRegistrationStatus="failed",e.error=t.payload})).addCase(tn.pending,(e=>{e.deleteRegistrationStatus="loading",e.error=null})).addCase(tn.fulfilled,((e,t)=>{e.deleteRegistrationStatus="succeeded",e.registrations=e.registrations.filter((e=>e._id!==t.payload.registrationId)),e.searchResults=e.searchResults.filter((e=>e._id!==t.payload.registrationId))})).addCase(tn.rejected,((e,t)=>{e.deleteRegistrationStatus="failed",e.error=t.payload})).addCase(nn.pending,(e=>{e.fetchLabDataStatus="loading",e.error=null})).addCase(nn.fulfilled,((e,t)=>{e.fetchLabDataStatus="succeeded",e.labCategories=t.payload.labCategories,e.labReportFields=t.payload.labReportFields})).addCase(nn.rejected,((e,t)=>{e.fetchLabDataStatus="failed",e.error=t.payload}))}}),{setCreateRegistrationStatusIdle:an,setUpdateRegistrationStatusIdle:sn,setUpdateTestStatusIdle:on,clearSearchResults:ln,setDeleteRegistrationStatusIdle:cn}=rn.actions,dn=rn.reducer,un=(0,Ge.A)("hospitalSettings/fetch",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/hospitals/settings`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch hospital settings");return await e.json()}catch(r){return n(r.message)}})),mn=(0,Ge.A)("hospitalSettings/update",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/hospitals/postsettings`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update hospital settings");return await t.json()}catch(r){return n(r.message)}})),hn=(0,I.Z0)({name:"hospitalSettings",initialState:{settings:null,status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(un.pending,(e=>{e.status="loading"})).addCase(un.fulfilled,((e,t)=>{e.status="succeeded",e.settings=t.payload})).addCase(un.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(mn.fulfilled,((e,t)=>{e.settings=t.payload}))}}).reducer,pn=(0,Ge.A)("consultationFees/fetchAll",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/consultation-fees`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok){return n(await e.json())}return await e.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),fn=(0,Ge.A)("consultationFees/update",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/consultation-fees`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),vn=(0,Ge.A)("consultationFees/updateTypes",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/consultation-fees/types`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({types:e})});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),gn=(0,I.Z0)({name:"consultationFees",initialState:{doctorWiseFee:[],consultationTypes:[],masterFollowup:-1,masterConsultationFeesDoctor:{},masterConsultationFeesType:{},status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(pn.pending,(e=>{e.status="loading"})).addCase(pn.fulfilled,((e,t)=>{e.status="succeeded",e.doctorWiseFee=t.payload.doctorWiseFee||[];const n={};t.payload.consultationTypes&&t.payload.doctorWiseFee.length>0&&t.payload.consultationTypes.forEach((e=>{const r=t.payload.doctorWiseFee.map((t=>t.consultationType[e])).filter((e=>void 0!==e)),a=r.length>0&&r.every((e=>e===r[0]));n[e]=a?r[0]:-1})),e.masterConsultationFeesType=n;const r={};t.payload.doctorWiseFee.length>0&&t.payload.doctorWiseFee.forEach((e=>{const t=Object.values(e.consultationType),n=t.length>0&&t.every((e=>e===t[0]));r[e.doctor._id]=n?t[0]:-1})),e.masterConsultationFeesDoctor=r;const a=t.payload.doctorWiseFee.map((e=>e.followUpDateWithin)),s=a.length>0&&a.every((e=>e===a[0]));e.masterFollowup=s?a[0]:-1,e.consultationTypes=t.payload.consultationTypes||[],e.error=null})).addCase(pn.rejected,((e,t)=>{var n;e.status="failed",e.error=(null===(n=t.payload)||void 0===n?void 0:n.message)||"Failed to fetch consultation fees"})).addCase(fn.pending,(e=>{e.status="loading"})).addCase(fn.fulfilled,((e,t)=>{e.status="succeeded",e.doctorWiseFee=t.payload.doctorWiseFee,e.consultationTypes=t.payload.consultationTypes,e.error=null})).addCase(fn.rejected,((e,t)=>{var n;e.status="failed",e.error=(null===(n=t.payload)||void 0===n?void 0:n.message)||"Failed to update consultation fee"})).addCase(vn.pending,(e=>{e.status="loading"})).addCase(vn.fulfilled,((e,t)=>{e.status="succeeded",e.doctorWiseFee=t.payload.doctorWiseFee,e.consultationTypes=t.payload.consultationTypes,e.error=null})).addCase(vn.rejected,((e,t)=>{var n;e.status="failed",e.error=(null===(n=t.payload)||void 0===n?void 0:n.message)||"Failed to update consultation types"}))}}).reducer,xn=(0,Ge.A)("prescriptionTemplates/fetch",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/hospitals/prescription-templates`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch prescription templates");return await e.json()}catch(r){return n(r.message)}})),yn=(0,Ge.A)("prescriptionTemplates/save",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/hospitals/prescription-templates`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({templates:e})});if(!t.ok)throw new Error("Failed to save prescription templates");return await t.json()}catch(r){return n(r.message)}})),bn=(0,I.Z0)({name:"prescriptionTemplates",initialState:{templates:[],status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(xn.pending,(e=>{e.status="loading"})).addCase(xn.fulfilled,((e,t)=>{e.status="succeeded",e.templates=t.payload})).addCase(xn.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(yn.pending,(e=>{e.status="loading"})).addCase(yn.fulfilled,((e,t)=>{e.status="succeeded",e.templates=t.payload})).addCase(yn.rejected,((e,t)=>{e.status="failed",e.error=t.payload}))}}).reducer,jn=(0,Ge.A)("doctorData/updateDoctorData",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/doctor/doctor-data/update`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update doctor data");return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),wn=(0,Ge.A)("doctorData/fetchAllDoctorData",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/doctor/doctor-data`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch all doctor data");return await e.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),Nn=(0,Ge.A)("doctorData/fetchDoctorData",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/doctor/doctor-data/${e}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error("Failed to fetch doctor data");return await t.json()}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),_n={currentDoctorData:{medicines:[],diagnosis:[],comorbidities:[],complaints:[]},allDoctorData:[],copiedData:null,status:"idle",error:null,updateStatus:"idle",updateError:null},Sn=(0,I.Z0)({name:"doctorData",initialState:_n,reducers:{resetDoctorData:e=>{e.currentDoctorData=_n.currentDoctorData,e.status="idle",e.error=null},copyDoctorData:(e,t)=>{const n=t.payload||e.currentDoctorData;e.copiedData={medicines:n.medicines||[],diagnosis:n.diagnosis||[],comorbidities:n.comorbidities||[]}},clearCopiedData:e=>{e.copiedData=null}},extraReducers:e=>{e.addCase(Nn.pending,(e=>{e.status="loading"})).addCase(Nn.fulfilled,((e,t)=>{e.status="succeeded",e.currentDoctorData={medicines:t.payload.medicines||[],diagnosis:t.payload.diagnosis||[],comorbidities:t.payload.comorbidities||[],complaints:t.payload.complaints||[],doctor:t.payload.doctor||""},e.error=null})).addCase(Nn.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(wn.pending,(e=>{e.status="loading"})).addCase(wn.fulfilled,((e,t)=>{e.status="succeeded",e.allDoctorData=t.payload,e.error=null})).addCase(wn.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(jn.pending,(e=>{e.updateStatus="loading"})).addCase(jn.fulfilled,((e,t)=>{e.updateStatus="succeeded",e.currentDoctorData={medicines:t.payload.medicines||[],diagnosis:t.payload.diagnosis||[],comorbidities:t.payload.comorbidities||[],complaints:t.payload.complaints||[],doctor:t.payload.doctor||""};const n=e.allDoctorData.findIndex((e=>e.doctor===t.payload.doctor));-1!==n?e.allDoctorData[n]=t.payload:e.allDoctorData.push(t.payload),e.updateError=null})).addCase(jn.rejected,((e,t)=>{e.updateStatus="failed",e.updateError=t.payload}))}}),{resetDoctorData:En,copyDoctorData:Cn,clearCopiedData:Dn}=Sn.actions,Tn=Sn.reducer,kn={sections:[{id:"prescriptionInfo",title:"Prescription Details",className:"bg-secondary/10 rounded-lg p-3 mb-4",fields:[{id:"chiefComplaints",label:"Chief Complaints",type:"textarea"},{id:"diagnosis",label:"Diagnosis",type:"multiselect",component:"MultiSelectInput",suggestions:"diagnosisTemplate"},{id:"comorbidities",label:"Comorbidities",type:"multiselect",component:"MultiSelectInput",suggestions:"comorbidities",extraComponent:"ComorbidityHandling"},{id:"vitals",label:"Vitals",type:"vitals"},{id:"labTests",label:"Lab Tests",type:"multiselect",suggestions:"labTests"},{id:"treatment",label:"Treatment",type:"textarea"},{id:"medications",label:"Medications",type:"medicineAdvice"},{id:"additionalInstructions",label:"Notes",type:"textarea"},{id:"advice",label:"Advice",type:"textarea"},{id:"followUp",label:"Follow Up",type:"date"}]}]},An=(0,Ge.A)("doctorPrescription/fetchTemplates",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/prescription-templates/default`,{credentials:"include"}),t=await e.json();if(!t.success)throw new Error(t.message||"Failed to fetch templates");return t.template}catch(r){return n(r.message)}}),{useGlobalLoader:!0}),Pn=(0,Ge.A)("doctorPrescription/saveTemplate",(async(e,t)=>{let{rejectWithValue:n,dispatch:r}=t;try{const t=await fetch(`${M.B8}/api/prescription-templates`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),n=await t.json();if(!n.success)throw new Error(n.message||"Failed to save template");return r(An()),n}catch(a){return n(a.message)}}),{useGlobalLoader:!0}),On=(0,I.Z0)({name:"doctorPrescription",initialState:{templates:[],status:"idle",error:null,selectedTemplate:null,formConfig:null,selectedDoctors:[]},reducers:{selectTemplate:(e,t)=>{e.selectedTemplate=t.payload,e.formConfig=t.payload.value,e.selectedDoctors=t.payload.associatedDoctors||[]},updateFormConfig:(e,t)=>{e.formConfig=t.payload},updateSelectedDoctors:(e,t)=>{e.selectedDoctors=t.payload},createNewTemplate:e=>{e.selectedTemplate={name:"New Template",value:kn,associatedDoctors:[]},e.formConfig=kn,e.selectedDoctors=[]},clearSelectedTemplate:e=>{e.selectedTemplate=null,e.formConfig=null,e.selectedDoctors=[]}},extraReducers:e=>{e.addCase(An.pending,(e=>{e.status="loading"})).addCase(An.fulfilled,((e,t)=>{e.status="succeeded",e.templates=t.payload})).addCase(An.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(Pn.pending,(e=>{e.status="loading"})).addCase(Pn.fulfilled,(e=>{e.status="succeeded"})).addCase(Pn.rejected,((e,t)=>{e.status="failed",e.error=t.payload}))}}),{selectTemplate:Rn,updateFormConfig:Mn,updateSelectedDoctors:In,createNewTemplate:Ln,clearSelectedTemplate:Fn}=On.actions,Bn=On.reducer,Wn=(0,I.zD)("textTemplates/fetchAll",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/text-templates`,{credentials:"include"}),t=await e.json();if(!t.success)throw new Error(t.message||"Failed to fetch text templates");return t.templates}catch(r){return n(r.message)}})),$n=(0,I.zD)("textTemplates/save",(async(e,t)=>{let{templateData:n,formTemplate:r,field:a}=e,{rejectWithValue:s,dispatch:i}=t;try{const e=`${M.B8}/api/prescription-templates/textTemplates/${r._id}`,t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({templateData:n,fieldId:a.id})}),s=await t.json();if(!s.success)throw new Error(s.message||"Failed to save template");return i(Wn()),s.suggestion}catch(o){return s(o.message)}})),Un=(0,I.zD)("textTemplates/delete",(async(e,t)=>{let{templateId:n,formTemplate:r,field:a}=e,{rejectWithValue:s,dispatch:i}=t;try{const e=await fetch(`${M.B8}/api/prescription-templates/textTemplates/${r._id}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({fieldId:a.id,templateId:n})}),t=await e.json();if(!t.success)throw new Error(t.message||"Failed to delete template");return i(Wn()),n}catch(o){return s(o.message)}})),zn=(0,I.Z0)({name:"textTemplates",initialState:{templates:[],status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(Wn.pending,(e=>{e.status="loading"})).addCase(Wn.fulfilled,((e,t)=>{e.status="succeeded",e.templates=t.payload})).addCase(Wn.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase($n.pending,(e=>{e.status="loading"})).addCase($n.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(Un.pending,(e=>{e.status="loading"})).addCase(Un.rejected,((e,t)=>{e.status="failed",e.error=t.payload}))}}).reducer,Hn=(0,I.U1)({reducer:{patients:Be.Ay,staff:z,departments:qe,rooms:at,pharmacy:st.Ay,user:Je,loader:it.A,services:mt,bills:Et,hospital:At,templates:R.Ay,dashboard:Mt,discharge:It.Ay,expenses:Ut,babies:zt.Ay,payments:Gt,lab:dn,hospitalSettings:hn,consultationFees:gn,prescriptionTemplates:bn,doctorData:Tn,doctorPrescription:Bn,textTemplates:zn}});var Vn=__webpack_require__(2264),qn=__webpack_require__(3141),Gn=__webpack_require__(9945),Kn=__webpack_require__(1203);const Yn=(0,t.forwardRef)(((e,n)=>{const{patient:r,templateString:a}=e,{hospitalInfo:s}=(0,j.d4)((e=>e.hospital)),i=(0,j.d4)((e=>e.templates.headerTemplateArray)),o=(null===i||void 0===i?void 0:i.length)>0?i[0].value:Kn.h,l=(0,Gn.G)(o),c=new Function("React","HospitalHeader",`return (${a});`);try{var d;return c(t,l)({...r,patient:{...r.patient,age:(0,M.F1)(null===(d=r.patient)||void 0===d?void 0:d.age,{yearLabel:"Years",monthLabel:"Months",dayLabel:"Days"})}},s,n)}catch(u){return console.error("Error rendering Consent form:",u),t.createElement("div",null,"Error rendering Consent form template")}}));var Xn=__webpack_require__(2754),Zn=__webpack_require__(3642),Jn=__webpack_require__(7920),Qn=__webpack_require__(5463),er=__webpack_require__(4204),tr=__webpack_require__(1184),nr=__webpack_require__(6590),rr=__webpack_require__(276),ar=__webpack_require__(4490),sr=__webpack_require__(2043),ir=__webpack_require__(3321),or=__webpack_require__(2894),lr=__webpack_require__(7490),cr="rovingFocusGroup.onEntryFocus",dr={bubbles:!1,cancelable:!0},ur="RovingFocusGroup",[mr,hr,pr]=(0,Qn.N)(ur),[fr,vr]=(0,V.A)(ur,[pr]),[gr,xr]=fr(ur),yr=t.forwardRef(((e,t)=>(0,X.jsx)(mr.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,X.jsx)(mr.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,X.jsx)(br,{...e,ref:t})})})));yr.displayName=ur;var br=t.forwardRef(((e,n)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,h=t.useRef(null),p=(0,q.s)(n,h),f=(0,er.jH)(i),[v=null,g]=(0,Zn.i)({prop:o,defaultProp:l,onChange:c}),[x,y]=t.useState(!1),b=(0,lr.c)(d),j=hr(r),w=t.useRef(!1),[N,_]=t.useState(0);return t.useEffect((()=>{const e=h.current;if(e)return e.addEventListener(cr,b),()=>e.removeEventListener(cr,b)}),[b]),(0,X.jsx)(gr,{scope:r,orientation:a,dir:f,loop:s,currentTabStopId:v,onItemFocus:t.useCallback((e=>g(e)),[g]),onItemShiftTab:t.useCallback((()=>y(!0)),[]),onFocusableItemAdd:t.useCallback((()=>_((e=>e+1))),[]),onFocusableItemRemove:t.useCallback((()=>_((e=>e-1))),[]),children:(0,X.jsx)(Jn.sG.div,{tabIndex:x||0===N?-1:0,"data-orientation":a,...m,ref:p,style:{outline:"none",...e.style},onMouseDown:(0,K.m)(e.onMouseDown,(()=>{w.current=!0})),onFocus:(0,K.m)(e.onFocus,(e=>{const t=!w.current;if(e.target===e.currentTarget&&t&&!x){const t=new CustomEvent(cr,dr);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=j().filter((e=>e.focusable));_r([e.find((e=>e.active)),e.find((e=>e.id===v)),...e].filter(Boolean).map((e=>e.ref.current)),u)}}w.current=!1})),onBlur:(0,K.m)(e.onBlur,(()=>y(!1)))})})})),jr="RovingFocusGroupItem",wr=t.forwardRef(((e,n)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:s=!1,tabStopId:i,...o}=e,l=(0,ar.B)(),c=i||l,d=xr(jr,r),u=d.currentTabStopId===c,m=hr(r),{onFocusableItemAdd:h,onFocusableItemRemove:p}=d;return t.useEffect((()=>{if(a)return h(),()=>p()}),[a,h,p]),(0,X.jsx)(mr.ItemSlot,{scope:r,id:c,focusable:a,active:s,children:(0,X.jsx)(Jn.sG.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:n,onMouseDown:(0,K.m)(e.onMouseDown,(e=>{a?d.onItemFocus(c):e.preventDefault()})),onFocus:(0,K.m)(e.onFocus,(()=>d.onItemFocus(c))),onKeyDown:(0,K.m)(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:Nr[r]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=m().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();const s=a.indexOf(e.currentTarget);a=d.loop?(r=s+1,(n=a).map(((e,t)=>n[(r+t)%n.length]))):a.slice(s+1)}setTimeout((()=>_r(a)))}var n,r}))})})}));wr.displayName=jr;var Nr={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _r(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var Sr=yr,Er=wr,Cr=__webpack_require__(5754),Dr=__webpack_require__(1672),Tr=["Enter"," "],kr=["ArrowUp","PageDown","End"],Ar=["ArrowDown","PageUp","Home",...kr],Pr={ltr:[...Tr,"ArrowRight"],rtl:[...Tr,"ArrowLeft"]},Or={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Rr="Menu",[Mr,Ir,Lr]=(0,Qn.N)(Rr),[Fr,Br]=(0,V.A)(Rr,[Lr,sr.Bk,vr]),Wr=(0,sr.Bk)(),$r=vr(),[Ur,zr]=Fr(Rr),[Hr,Vr]=Fr(Rr),qr=e=>{const{__scopeMenu:n,open:r=!1,children:a,dir:s,onOpenChange:i,modal:o=!0}=e,l=Wr(n),[c,d]=t.useState(null),u=t.useRef(!1),m=(0,lr.c)(i),h=(0,er.jH)(s);return t.useEffect((()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),(0,X.jsx)(sr.bL,{...l,children:(0,X.jsx)(Ur,{scope:n,open:r,onOpenChange:m,content:c,onContentChange:d,children:(0,X.jsx)(Hr,{scope:n,onClose:t.useCallback((()=>m(!1)),[m]),isUsingKeyboardRef:u,dir:h,modal:o,children:a})})})};qr.displayName=Rr;var Gr=t.forwardRef(((e,t)=>{const{__scopeMenu:n,...r}=e,a=Wr(n);return(0,X.jsx)(sr.Mz,{...a,...r,ref:t})}));Gr.displayName="MenuAnchor";var Kr="MenuPortal",[Yr,Xr]=Fr(Kr,{forceMount:void 0}),Zr=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,s=zr(Kr,t);return(0,X.jsx)(Yr,{scope:t,forceMount:n,children:(0,X.jsx)(or.C,{present:n||s.open,children:(0,X.jsx)(ir.Z,{asChild:!0,container:a,children:r})})})};Zr.displayName=Kr;var Jr="MenuContent",[Qr,ea]=Fr(Jr),ta=t.forwardRef(((e,t)=>{const n=Xr(Jr,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=zr(Jr,e.__scopeMenu),i=Vr(Jr,e.__scopeMenu);return(0,X.jsx)(Mr.Provider,{scope:e.__scopeMenu,children:(0,X.jsx)(or.C,{present:r||s.open,children:(0,X.jsx)(Mr.Slot,{scope:e.__scopeMenu,children:i.modal?(0,X.jsx)(na,{...a,ref:t}):(0,X.jsx)(ra,{...a,ref:t})})})})})),na=t.forwardRef(((e,n)=>{const r=zr(Jr,e.__scopeMenu),a=t.useRef(null),s=(0,q.s)(n,a);return t.useEffect((()=>{const e=a.current;if(e)return(0,Cr.Eq)(e)}),[]),(0,X.jsx)(aa,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:(0,K.m)(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})})),ra=t.forwardRef(((e,t)=>{const n=zr(Jr,e.__scopeMenu);return(0,X.jsx)(aa,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})})),aa=t.forwardRef(((e,n)=>{const{__scopeMenu:r,loop:a=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:p,disableOutsideScroll:f,...v}=e,g=zr(Jr,r),x=Vr(Jr,r),y=Wr(r),b=$r(r),j=Ir(r),[w,N]=t.useState(null),_=t.useRef(null),S=(0,q.s)(n,_,g.onContentChange),E=t.useRef(0),C=t.useRef(""),D=t.useRef(0),T=t.useRef(null),k=t.useRef("right"),A=t.useRef(0),P=f?Dr.A:t.Fragment,O=f?{as:Y.DX,allowPinchZoom:!0}:void 0,R=e=>{const t=C.current+e,n=j().filter((e=>!e.disabled)),r=document.activeElement,a=n.find((e=>e.ref.current===r))?.textValue,s=function(e,t,n){const r=t.length>1&&Array.from(t).every((e=>e===t[0])),a=r?t[0]:t,s=n?e.indexOf(n):-1;let i=(o=e,l=Math.max(s,0),o.map(((e,t)=>o[(l+t)%o.length])));var o,l;1===a.length&&(i=i.filter((e=>e!==n)));const c=i.find((e=>e.toLowerCase().startsWith(a.toLowerCase())));return c!==n?c:void 0}(n.map((e=>e.textValue)),t,a),i=n.find((e=>e.textValue===s))?.ref.current;!function e(t){C.current=t,window.clearTimeout(E.current),""!==t&&(E.current=window.setTimeout((()=>e("")),1e3))}(t),i&&setTimeout((()=>i.focus()))};t.useEffect((()=>()=>window.clearTimeout(E.current)),[]),(0,nr.Oh)();const M=t.useCallback((e=>k.current===T.current?.side&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const e=t[s].x,o=t[s].y,l=t[i].x,c=t[i].y;o>r!==c>r&&n<(l-e)*(r-o)/(c-o)+e&&(a=!a)}return a}(n,t)}(e,T.current?.area)),[]);return(0,X.jsx)(Qr,{scope:r,searchRef:C,onItemEnter:t.useCallback((e=>{M(e)&&e.preventDefault()}),[M]),onItemLeave:t.useCallback((e=>{M(e)||(_.current?.focus(),N(null))}),[M]),onTriggerLeave:t.useCallback((e=>{M(e)&&e.preventDefault()}),[M]),pointerGraceTimerRef:D,onPointerGraceIntentChange:t.useCallback((e=>{T.current=e}),[]),children:(0,X.jsx)(P,{...O,children:(0,X.jsx)(rr.n,{asChild:!0,trapped:s,onMountAutoFocus:(0,K.m)(i,(e=>{e.preventDefault(),_.current?.focus({preventScroll:!0})})),onUnmountAutoFocus:o,children:(0,X.jsx)(tr.qW,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:p,children:(0,X.jsx)(Sr,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:a,currentTabStopId:w,onCurrentTabStopIdChange:N,onEntryFocus:(0,K.m)(c,(e=>{x.isUsingKeyboardRef.current||e.preventDefault()})),preventScrollOnEntryFocus:!0,children:(0,X.jsx)(sr.UC,{role:"menu","aria-orientation":"vertical","data-state":Pa(g.open),"data-radix-menu-content":"",dir:x.dir,...y,...v,ref:S,style:{outline:"none",...v.style},onKeyDown:(0,K.m)(v.onKeyDown,(e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&R(e.key));const a=_.current;if(e.target!==a)return;if(!Ar.includes(e.key))return;e.preventDefault();const s=j().filter((e=>!e.disabled)).map((e=>e.ref.current));kr.includes(e.key)&&s.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(s)})),onBlur:(0,K.m)(e.onBlur,(e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(E.current),C.current="")})),onPointerMove:(0,K.m)(e.onPointerMove,Ma((e=>{const t=e.target,n=A.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>A.current?"right":"left";k.current=t,A.current=e.clientX}})))})})})})})})}));ta.displayName=Jr;var sa=t.forwardRef(((e,t)=>{const{__scopeMenu:n,...r}=e;return(0,X.jsx)(Jn.sG.div,{role:"group",...r,ref:t})}));sa.displayName="MenuGroup";var ia=t.forwardRef(((e,t)=>{const{__scopeMenu:n,...r}=e;return(0,X.jsx)(Jn.sG.div,{...r,ref:t})}));ia.displayName="MenuLabel";var oa="MenuItem",la="menu.itemSelect",ca=t.forwardRef(((e,n)=>{const{disabled:r=!1,onSelect:a,...s}=e,i=t.useRef(null),o=Vr(oa,e.__scopeMenu),l=ea(oa,e.__scopeMenu),c=(0,q.s)(n,i),d=t.useRef(!1);return(0,X.jsx)(da,{...s,ref:c,disabled:r,onClick:(0,K.m)(e.onClick,(()=>{const e=i.current;if(!r&&e){const t=new CustomEvent(la,{bubbles:!0,cancelable:!0});e.addEventListener(la,(e=>a?.(e)),{once:!0}),(0,Jn.hO)(e,t),t.defaultPrevented?d.current=!1:o.onClose()}})),onPointerDown:t=>{e.onPointerDown?.(t),d.current=!0},onPointerUp:(0,K.m)(e.onPointerUp,(e=>{d.current||e.currentTarget?.click()})),onKeyDown:(0,K.m)(e.onKeyDown,(e=>{const t=""!==l.searchRef.current;r||t&&" "===e.key||Tr.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))})}));ca.displayName=oa;var da=t.forwardRef(((e,n)=>{const{__scopeMenu:r,disabled:a=!1,textValue:s,...i}=e,o=ea(oa,r),l=$r(r),c=t.useRef(null),d=(0,q.s)(n,c),[u,m]=t.useState(!1),[h,p]=t.useState("");return t.useEffect((()=>{const e=c.current;e&&p((e.textContent??"").trim())}),[i.children]),(0,X.jsx)(Mr.ItemSlot,{scope:r,disabled:a,textValue:s??h,children:(0,X.jsx)(Er,{asChild:!0,...l,focusable:!a,children:(0,X.jsx)(Jn.sG.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...i,ref:d,onPointerMove:(0,K.m)(e.onPointerMove,Ma((e=>{if(a)o.onItemLeave(e);else if(o.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}}))),onPointerLeave:(0,K.m)(e.onPointerLeave,Ma((e=>o.onItemLeave(e)))),onFocus:(0,K.m)(e.onFocus,(()=>m(!0))),onBlur:(0,K.m)(e.onBlur,(()=>m(!1)))})})})})),ua=t.forwardRef(((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return(0,X.jsx)(ya,{scope:e.__scopeMenu,checked:n,children:(0,X.jsx)(ca,{role:"menuitemcheckbox","aria-checked":Oa(n)?"mixed":n,...a,ref:t,"data-state":Ra(n),onSelect:(0,K.m)(a.onSelect,(()=>r?.(!!Oa(n)||!n)),{checkForDefaultPrevented:!1})})})}));ua.displayName="MenuCheckboxItem";var ma="MenuRadioGroup",[ha,pa]=Fr(ma,{value:void 0,onValueChange:()=>{}}),fa=t.forwardRef(((e,t)=>{const{value:n,onValueChange:r,...a}=e,s=(0,lr.c)(r);return(0,X.jsx)(ha,{scope:e.__scopeMenu,value:n,onValueChange:s,children:(0,X.jsx)(sa,{...a,ref:t})})}));fa.displayName=ma;var va="MenuRadioItem",ga=t.forwardRef(((e,t)=>{const{value:n,...r}=e,a=pa(va,e.__scopeMenu),s=n===a.value;return(0,X.jsx)(ya,{scope:e.__scopeMenu,checked:s,children:(0,X.jsx)(ca,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":Ra(s),onSelect:(0,K.m)(r.onSelect,(()=>a.onValueChange?.(n)),{checkForDefaultPrevented:!1})})})}));ga.displayName=va;var xa="MenuItemIndicator",[ya,ba]=Fr(xa,{checked:!1}),ja=t.forwardRef(((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,s=ba(xa,n);return(0,X.jsx)(or.C,{present:r||Oa(s.checked)||!0===s.checked,children:(0,X.jsx)(Jn.sG.span,{...a,ref:t,"data-state":Ra(s.checked)})})}));ja.displayName=xa;var wa=t.forwardRef(((e,t)=>{const{__scopeMenu:n,...r}=e;return(0,X.jsx)(Jn.sG.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})}));wa.displayName="MenuSeparator";var Na=t.forwardRef(((e,t)=>{const{__scopeMenu:n,...r}=e,a=Wr(n);return(0,X.jsx)(sr.i3,{...a,...r,ref:t})}));Na.displayName="MenuArrow";var _a="MenuSub",[Sa,Ea]=Fr(_a),Ca=e=>{const{__scopeMenu:n,children:r,open:a=!1,onOpenChange:s}=e,i=zr(_a,n),o=Wr(n),[l,c]=t.useState(null),[d,u]=t.useState(null),m=(0,lr.c)(s);return t.useEffect((()=>(!1===i.open&&m(!1),()=>m(!1))),[i.open,m]),(0,X.jsx)(sr.bL,{...o,children:(0,X.jsx)(Ur,{scope:n,open:a,onOpenChange:m,content:d,onContentChange:u,children:(0,X.jsx)(Sa,{scope:n,contentId:(0,ar.B)(),triggerId:(0,ar.B)(),trigger:l,onTriggerChange:c,children:r})})})};Ca.displayName=_a;var Da="MenuSubTrigger",Ta=t.forwardRef(((e,n)=>{const r=zr(Da,e.__scopeMenu),a=Vr(Da,e.__scopeMenu),s=Ea(Da,e.__scopeMenu),i=ea(Da,e.__scopeMenu),o=t.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=t.useCallback((()=>{o.current&&window.clearTimeout(o.current),o.current=null}),[]);return t.useEffect((()=>u),[u]),t.useEffect((()=>{const e=l.current;return()=>{window.clearTimeout(e),c(null)}}),[l,c]),(0,X.jsx)(Gr,{asChild:!0,...d,children:(0,X.jsx)(da,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":Pa(r.open),...e,ref:(0,q.t)(n,s.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:(0,K.m)(e.onPointerMove,Ma((t=>{i.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||o.current||(i.onPointerGraceIntentChange(null),o.current=window.setTimeout((()=>{r.onOpenChange(!0),u()}),100))}))),onPointerLeave:(0,K.m)(e.onPointerLeave,Ma((e=>{u();const t=r.content?.getBoundingClientRect();if(t){const n=r.content?.dataset.side,a="right"===n,s=a?-5:5,o=t[a?"left":"right"],c=t[a?"right":"left"];i.onPointerGraceIntentChange({area:[{x:e.clientX+s,y:e.clientY},{x:o,y:t.top},{x:c,y:t.top},{x:c,y:t.bottom},{x:o,y:t.bottom}],side:n}),window.clearTimeout(l.current),l.current=window.setTimeout((()=>i.onPointerGraceIntentChange(null)),300)}else{if(i.onTriggerLeave(e),e.defaultPrevented)return;i.onPointerGraceIntentChange(null)}}))),onKeyDown:(0,K.m)(e.onKeyDown,(t=>{const n=""!==i.searchRef.current;e.disabled||n&&" "===t.key||Pr[a.dir].includes(t.key)&&(r.onOpenChange(!0),r.content?.focus(),t.preventDefault())}))})})}));Ta.displayName=Da;var ka="MenuSubContent",Aa=t.forwardRef(((e,n)=>{const r=Xr(Jr,e.__scopeMenu),{forceMount:a=r.forceMount,...s}=e,i=zr(Jr,e.__scopeMenu),o=Vr(Jr,e.__scopeMenu),l=Ea(ka,e.__scopeMenu),c=t.useRef(null),d=(0,q.s)(n,c);return(0,X.jsx)(Mr.Provider,{scope:e.__scopeMenu,children:(0,X.jsx)(or.C,{present:a||i.open,children:(0,X.jsx)(Mr.Slot,{scope:e.__scopeMenu,children:(0,X.jsx)(aa,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{o.isUsingKeyboardRef.current&&c.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:(0,K.m)(e.onFocusOutside,(e=>{e.target!==l.trigger&&i.onOpenChange(!1)})),onEscapeKeyDown:(0,K.m)(e.onEscapeKeyDown,(e=>{o.onClose(),e.preventDefault()})),onKeyDown:(0,K.m)(e.onKeyDown,(e=>{const t=e.currentTarget.contains(e.target),n=Or[o.dir].includes(e.key);t&&n&&(i.onOpenChange(!1),l.trigger?.focus(),e.preventDefault())}))})})})})}));function Pa(e){return e?"open":"closed"}function Oa(e){return"indeterminate"===e}function Ra(e){return Oa(e)?"indeterminate":e?"checked":"unchecked"}function Ma(e){return t=>"mouse"===t.pointerType?e(t):void 0}Aa.displayName=ka;var Ia=qr,La=Gr,Fa=Zr,Ba=ta,Wa=sa,$a=ia,Ua=ca,za=ua,Ha=fa,Va=ga,qa=ja,Ga=wa,Ka=Na,Ya=Ca,Xa=Ta,Za=Aa,Ja="DropdownMenu",[Qa,es]=(0,V.A)(Ja,[Br]),ts=Br(),[ns,rs]=Qa(Ja),as=e=>{const{__scopeDropdownMenu:n,children:r,dir:a,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=ts(n),d=t.useRef(null),[u=!1,m]=(0,Zn.i)({prop:s,defaultProp:i,onChange:o});return(0,X.jsx)(ns,{scope:n,triggerId:(0,ar.B)(),triggerRef:d,contentId:(0,ar.B)(),open:u,onOpenChange:m,onOpenToggle:t.useCallback((()=>m((e=>!e))),[m]),modal:l,children:(0,X.jsx)(Ia,{...c,open:u,onOpenChange:m,dir:a,modal:l,children:r})})};as.displayName=Ja;var ss="DropdownMenuTrigger",is=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,s=rs(ss,n),i=ts(n);return(0,X.jsx)(La,{asChild:!0,...i,children:(0,X.jsx)(Jn.sG.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:(0,q.t)(t,s.triggerRef),onPointerDown:(0,K.m)(e.onPointerDown,(e=>{r||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())})),onKeyDown:(0,K.m)(e.onKeyDown,(e=>{r||(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())}))})})}));is.displayName=ss;var os=e=>{const{__scopeDropdownMenu:t,...n}=e,r=ts(t);return(0,X.jsx)(Fa,{...r,...n})};os.displayName="DropdownMenuPortal";var ls="DropdownMenuContent",cs=t.forwardRef(((e,n)=>{const{__scopeDropdownMenu:r,...a}=e,s=rs(ls,r),i=ts(r),o=t.useRef(!1);return(0,X.jsx)(Ba,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...a,ref:n,onCloseAutoFocus:(0,K.m)(e.onCloseAutoFocus,(e=>{o.current||s.triggerRef.current?.focus(),o.current=!1,e.preventDefault()})),onInteractOutside:(0,K.m)(e.onInteractOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;s.modal&&!r||(o.current=!0)})),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));cs.displayName=ls;var ds=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ts(n);return(0,X.jsx)(Wa,{...a,...r,ref:t})}));ds.displayName="DropdownMenuGroup";var us=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ts(n);return(0,X.jsx)($a,{...a,...r,ref:t})}));us.displayName="DropdownMenuLabel";var ms=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ts(n);return(0,X.jsx)(Ua,{...a,...r,ref:t})}));ms.displayName="DropdownMenuItem";var hs=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ts(n);return(0,X.jsx)(za,{...a,...r,ref:t})}));hs.displayName="DropdownMenuCheckboxItem";var ps=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ts(n);return(0,X.jsx)(Ha,{...a,...r,ref:t})}));ps.displayName="DropdownMenuRadioGroup";var fs=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ts(n);return(0,X.jsx)(Va,{...a,...r,ref:t})}));fs.displayName="DropdownMenuRadioItem";var vs=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ts(n);return(0,X.jsx)(qa,{...a,...r,ref:t})}));vs.displayName="DropdownMenuItemIndicator";var gs=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ts(n);return(0,X.jsx)(Ga,{...a,...r,ref:t})}));gs.displayName="DropdownMenuSeparator";var xs=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ts(n);return(0,X.jsx)(Ka,{...a,...r,ref:t})}));xs.displayName="DropdownMenuArrow";var ys=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ts(n);return(0,X.jsx)(Xa,{...a,...r,ref:t})}));ys.displayName="DropdownMenuSubTrigger";var bs=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ts(n);return(0,X.jsx)(Za,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));bs.displayName="DropdownMenuSubContent";var js=as,ws=is,Ns=os,_s=cs,Ss=us,Es=ms,Cs=hs,Ds=fs,Ts=vs,ks=gs,As=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:a,defaultOpen:s}=e,i=ts(t),[o=!1,l]=(0,Zn.i)({prop:r,defaultProp:s,onChange:a});return(0,X.jsx)(Ya,{...i,open:o,onOpenChange:l,children:n})},Ps=ys,Os=bs,Rs=__webpack_require__(852);const Ms=js,Is=ws,Ls=As,Fs=t.forwardRef(((e,t)=>{let{className:n,inset:r,children:a,...s}=e;return(0,X.jsxs)(Ps,{ref:t,className:(0,Ee.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",n),...s,children:[a,(0,X.jsx)(Rs.vKP,{className:"ml-auto h-4 w-4"})]})}));Fs.displayName=Ps.displayName;const Bs=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(Os,{ref:t,className:(0,Ee.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})}));Bs.displayName=Os.displayName;const Ws=t.forwardRef(((e,t)=>{let{className:n,sideOffset:r=4,...a}=e;return(0,X.jsx)(Ns,{children:(0,X.jsx)(_s,{ref:t,sideOffset:r,className:(0,Ee.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...a})})}));Ws.displayName=_s.displayName;const $s=t.forwardRef(((e,t)=>{let{className:n,inset:r,...a}=e;return(0,X.jsx)(Es,{ref:t,className:(0,Ee.cn)("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",n),...a})}));$s.displayName=Es.displayName;t.forwardRef(((e,t)=>{let{className:n,children:r,checked:a,...s}=e;return(0,X.jsxs)(Cs,{ref:t,className:(0,Ee.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:a,...s,children:[(0,X.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,X.jsx)(Ts,{children:(0,X.jsx)(Rs.Srz,{className:"h-4 w-4"})})}),r]})})).displayName=Cs.displayName;t.forwardRef(((e,t)=>{let{className:n,children:r,...a}=e;return(0,X.jsxs)(Ds,{ref:t,className:(0,Ee.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...a,children:[(0,X.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,X.jsx)(Ts,{children:(0,X.jsx)(Rs.RiX,{className:"h-4 w-4 fill-current"})})}),r]})})).displayName=Ds.displayName;const Us=t.forwardRef(((e,t)=>{let{className:n,inset:r,...a}=e;return(0,X.jsx)(Ss,{ref:t,className:(0,Ee.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",n),...a})}));Us.displayName=Ss.displayName;const zs=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(ks,{ref:t,className:(0,Ee.cn)("-mx-1 my-1 h-px bg-muted",n),...r})}));zs.displayName=ks.displayName;const Hs='(patient, hospitalInfo, ref) => {\n  const formatDate = (dateString) => {\n    if (!dateString) return "";\n    const date = new Date(dateString);\n    const months = [\'Jan\', \'Feb\', \'Mar\', \'Apr\', \'May\', \'Jun\', \'Jul\', \'Aug\', \'Sep\', \'Oct\', \'Nov\', \'Dec\'];\n    return `${date.getDate().toString().padStart(2, \'0\')}-${months[date.getMonth()]}-${date.getFullYear()}`;\n  };\n\n\n  return React.createElement("div", { ref: ref, className: "print-content", style : {marginTop : "20px"} },\n    React.createElement("div",null,\n      React.createElement(HospitalHeader, { hospitalInfo: hospitalInfo })\n    ),\n    React.createElement("div", { style: { display: "flex", justifyContent: "center", marginBottom: "12px", marginTop : "10px" } },\n      React.createElement("span", { style: { textDecoration: "underline", textDecorationThickness: "2px", textUnderlineOffset: "4px", fontSize: "20px" } }, "Admission Form")\n    ),\n    React.createElement("div", { style: { display: "grid", gridTemplateColumns: "1fr 1fr" } },\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(3, 1fr)" } },\n        React.createElement("span", null, "Patient Name:"),\n        React.createElement("span", { style: { fontWeight: "600", textTransform: "capitalize", gridColumn: "span 2" } }, patient?.patient?.name || "")\n      ),\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(3, 1fr)" } },\n        React.createElement("span", null, "Guardian Name:"),\n        React.createElement("span", { style: { fontWeight: "600", textTransform: "capitalize", gridColumn: "span 2" } }, patient?.guardianName || "")\n      ),\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(3, 1fr)" } },\n        React.createElement("span", null, "UHID Number:"),\n        React.createElement("span", { style: { fontWeight: "600", textTransform: "capitalize", gridColumn: "span 2" } }, patient?.registrationNumber || "")\n      ),\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(3, 1fr)" } },\n        React.createElement("span", null, "IPD Number:"),\n        React.createElement("span", { style: { fontWeight: "600", textTransform: "capitalize", gridColumn: "span 2" } }, patient?.ipdNumber || "")\n      ),\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(3, 1fr)" } },\n        React.createElement("span", null, "Room No:"),\n        React.createElement("span", { style: { fontWeight: "600", textTransform: "capitalize", gridColumn: "span 2" } }, patient?.assignedRoom?.roomNumber || "")\n      ),\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(3, 1fr)" } },\n        React.createElement("span", null, "Age:"),\n        React.createElement("span", { style: { fontWeight: "600", textTransform: "capitalize", gridColumn: "span 2" } }, patient?.patient?.age ? `${patient?.patient?.age}` : "")\n      ),\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(3, 1fr)" } },\n        React.createElement("span", null, "Gender:"),\n        React.createElement("span", { style: { fontWeight: "600", textTransform: "capitalize", gridColumn: "span 2" } }, patient?.patient?.gender || "")\n      ),\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(3, 1fr)" } },\n        React.createElement("span", null, "Address:"),\n        React.createElement("span", { style: { fontWeight: "600", textTransform: "capitalize", gridColumn: "span 2" } }, patient?.patient?.address || "")\n      ),\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(3, 1fr)" } },\n        React.createElement("span", null, "Mobile No:"),\n        React.createElement("span", { style: { fontWeight: "600", textTransform: "capitalize", gridColumn: "span 2" } }, patient?.patient?.contactNumber || "")\n      ),\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(3, 1fr)" } },\n        React.createElement("span", null, "Admission Date:"),\n        React.createElement("span", { style: { fontWeight: "600", textTransform: "capitalize", gridColumn: "span 2" } },\n          `${formatDate(patient?.bookingDate)} ${patient?.bookingTime || ""}`\n        )\n      ),\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(3, 1fr)" } },\n        React.createElement("span", null, "Consultant:"),\n        React.createElement("span", { style: { fontWeight: "600", textTransform: "capitalize", gridColumn: "span 2" } }, patient?.doctor?.name || "")\n      )\n    ),\n    React.createElement("div", { style: { margin: "8px 0", backgroundColor: "black", height: "1px" } }),\n    React.createElement("div", { style: { textDecoration: "underline", fontWeight: "600", margin: "0 16px", textUnderlineOffset: "2px" } }, "Person to notify in case of Emergency"),\n    React.createElement("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "16px", margin: "0 16px" } },\n      React.createElement("div", { style: { textTransform: "capitalize" } }, `Name: ${patient?.guardianName || ""}`),\n      React.createElement("div", null, `Mobile No: ${patient?.patient?.contactNumber || ""}`),\n      React.createElement("div", { style: { textTransform: "capitalize" } }, `Relation with Patient : ${patient?.relation || ""}`)\n    ),\n    React.createElement("div", { style: { display : "flex", flexDirection : "column", gap : "12px", marginTop: "16px", textAlign: "justify", padding: "0 16px" } },\n      React.createElement("p", { style: { fontSize: "18px", fontWeight: "600", marginBottom: "8px" } }, "\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0938\u0939\u092e\u0924\u093f"),\n      React.createElement("p", null,\n        "\u092e\u0948\u0902, __________________________________________ (\u0930\u094b\u0917\u0940/\u0930\u093f\u0936\u094d\u0924\u0947\u0926\u093e\u0930) \u0938\u091a\u0947\u0924 \u092e\u0928 \u0915\u0940 \u0938\u094d\u0925\u093f\u0924\u093f \u092e\u0947\u0902 \u0905\u0938\u094d\u092a\u0924\u093e\u0932 \u0915\u0947 \u0938\u0932\u093e\u0939\u0915\u093e\u0930\u094b\u0902 \u0914\u0930 \u092a\u0948\u0930\u093e\u092e\u0947\u0921\u093f\u0915\u0932 \u0915\u0930\u094d\u092e\u093f\u092f\u094b\u0902 \u0915\u094b \u091a\u093f\u0915\u093f\u0924\u094d\u0938\u093e \u092a\u0930\u0940\u0915\u094d\u0937\u0923, \u092a\u0948\u0925\u094b\u0932\u0949\u091c\u093f\u0915\u0932 \u0914\u0930 \u0930\u0947\u0921\u093f\u092f\u094b\u0932\u0949\u091c\u093f\u0915\u0932 \u0914\u0930 \u092e\u0947\u0921\u093f\u0915\u0932/\u0938\u0930\u094d\u091c\u093f\u0915\u0932 \u0909\u092a\u091a\u093e\u0930 \u092f\u093e \u0915\u093f\u0938\u0940 \u092d\u0940 \u092a\u094d\u0930\u0915\u093e\u0930 \u0915\u0940 \u092a\u094d\u0930\u0915\u094d\u0930\u093f\u092f\u093e \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0938\u0939\u092e\u0924\u093f \u0926\u0947\u0924\u093e \u0939\u0942\u0902 \u0914\u0930 \u0905\u0927\u093f\u0915\u0943\u0924 \u0915\u0930\u0924\u093e \u0939\u0942\u0902\u0964"\n      ),\n      React.createElement("p", null,\n        "\u0913\u092a\u0940\u0921\u0940/\u0906\u0908\u092a\u0940\u0921\u0940 \u092e\u0947\u0902 \u0930\u094b\u0917\u0940 \u0926\u0947\u0916\u092d\u093e\u0932 \u0915\u0947 \u0926\u094c\u0930\u093e\u0928 \u092a\u094d\u0930\u0936\u093e\u0938\u0928\u093f\u0915/\u092c\u0940\u092e\u093e \u0909\u0926\u094d\u0926\u0947\u0936\u094d\u092f \u0915\u0947 \u0932\u093f\u090f \u0915\u093e\u0917\u091c\u093e\u0924 \u0915\u0947 \u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u0940\u0915\u0930\u0923 \u0914\u0930 \u0928\u0948\u0926\u093e\u0928\u093f\u0915 \u0905\u0928\u0941\u0938\u0902\u0927\u093e\u0928 \u0914\u0930 \u0917\u094b\u092a\u0928\u0940\u092f\u0924\u093e \u0915\u0947 \u0932\u093f\u090f \u091c\u093e\u0928\u0915\u093e\u0930\u0940 \u0915\u0947 \u092a\u094d\u0930\u0915\u091f\u0940\u0915\u0930\u0923 \u0915\u0947 \u0938\u093e\u0925 \u0938\u0932\u093e\u0939 \u0926\u0940 \u091c\u093e\u0924\u0940 \u0939\u0948\u0964 \u0939\u092e \u092a\u0942\u0930\u0940 \u0924\u0930\u0939 \u0938\u0902\u0924\u0941\u0937\u094d\u091f \u0939\u0948\u0902 \u0914\u0930 \u0905\u092a\u0928\u0940 \u0907\u091a\u094d\u091b\u093e \u0938\u0947 \u0907\u0932\u093e\u091c/\u0938\u0930\u094d\u091c\u0930\u0940 \u0915\u0930\u093e\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902\u0964"\n      ),\n      React.createElement("p", null,\n        "\u0939\u092e \u0905\u0938\u094d\u092a\u0924\u093e\u0932 \u0915\u0947 \u092c\u093f\u0932 \u0915\u0947 \u0938\u092e\u092f \u092a\u0930 \u092d\u0941\u0917\u0924\u093e\u0928 \u0915\u0947 \u0932\u093f\u090f \u091c\u093f\u092e\u094d\u092e\u0947\u0926\u093e\u0930 \u0939\u094b\u0902\u0917\u0947\u0964 \u0909\u092a\u091a\u093e\u0930/\u0938\u0930\u094d\u091c\u0930\u0940 \u0915\u0947 \u0926\u094c\u0930\u093e\u0928 \u0914\u0930 \u0909\u0938\u0915\u0947 \u0926\u094c\u0930\u093e\u0928 \u0915\u093f\u0938\u0940 \u092d\u0940 \u091c\u091f\u093f\u0932\u0924\u093e \u0915\u0947 \u0932\u093f\u090f \u092e\u0948\u0902 \u0938\u094d\u0935\u092f\u0902 \u091c\u093f\u092e\u094d\u092e\u0947\u0926\u093e\u0930 \u0930\u0939\u0942\u0902\u0917\u093e\u0964 \u0938\u0930\u094d\u091c\u0930\u0940/\u0909\u092a\u091a\u093e\u0930 \u0938\u0947 \u0939\u094b\u0928\u0947 \u0935\u093e\u0932\u0940 \u0915\u093f\u0938\u0940 \u092d\u0940 \u091c\u091f\u093f\u0932\u0924\u093e \u0914\u0930 \u0916\u0924\u0930\u0947 \u0915\u0947 \u0932\u093f\u090f \u0905\u0938\u094d\u092a\u0924\u093e\u0932, \u0905\u0938\u094d\u092a\u0924\u093e\u0932 \u0915\u0930\u094d\u092e\u091a\u093e\u0930\u0940, \u0921\u0949\u0915\u094d\u091f\u0930 \u091c\u093f\u092e\u094d\u092e\u0947\u0926\u093e\u0930 \u0928\u0939\u0940\u0902 \u0939\u094b\u0902\u0917\u0947\u0964"\n      ),\n      React.createElement("p", null,\n        "\u0905\u0938\u094d\u092a\u0924\u093e\u0932 \u0914\u0930 \u0905\u0938\u094d\u092a\u0924\u093e\u0932 \u0915\u0947 \u0915\u0930\u094d\u092e\u091a\u093e\u0930\u0940 \u0915\u093f\u0938\u0940 \u092d\u0940 \u091a\u094b\u0930\u0940 \u0939\u0941\u090f \u0938\u093e\u092e\u093e\u0928 \u0915\u0947 \u0932\u093f\u090f \u091c\u093f\u092e\u094d\u092e\u0947\u0926\u093e\u0930 \u0928\u0939\u0940\u0902 \u0939\u094b\u0902\u0917\u0947, \u092e\u0948\u0902 \u0905\u092a\u0928\u0947 \u0938\u093e\u092e\u093e\u0928 \u0915\u0940 \u0938\u0941\u0930\u0915\u094d\u0937\u093e \u0915\u0947 \u0932\u093f\u090f \u091c\u093f\u092e\u094d\u092e\u0947\u0926\u093e\u0930 \u0939\u0942\u0902\u0964"\n      ),\n      React.createElement("p", null,\n        "\u092e\u0948\u0902\u0928\u0947 \u090a\u092a\u0930 \u0932\u093f\u0916\u0940 \u0938\u092d\u0940 \u092c\u093e\u0924\u0947\u0902 \u092a\u0922\u093c\u0940 \u0939\u0948\u0902 \u0914\u0930 \u092e\u0941\u091d\u0947 \u0938\u092e\u091d\u093e\u092f\u093e \u092d\u0940 \u0917\u092f\u093e \u0939\u0948\u0964"\n      ),\n      React.createElement("p", null,\n        "\u090a\u092a\u0930 \u0926\u0940 \u0917\u0908 \u0938\u092d\u0940 \u091c\u093e\u0928\u0915\u093e\u0930\u093f\u092f\u094b\u0902 \u0915\u094b \u0938\u092e\u091d\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926 \u092e\u0948\u0902 \u0905\u092a\u0928\u0940 \u0905\u0928\u0941\u092e\u0924\u093f \u0926\u0947\u0924\u093e \u0939\u0942\u0902\u0964"\n      )\n    ),\n    React.createElement("div", { style: { marginTop: "50px", display: "flex", justifyContent: "space-between", padding: "0 16px" } },\n      React.createElement("div", { style: { textAlign: "center" } },\n        React.createElement("p", { style: { borderTop: "1px solid black" } }, "Signature of Patient"),\n        React.createElement("p", { style: { textTransform: "uppercase", fontSize: "12px" } }, `(${patient?.patient?.name || ""})`)\n      ),\n      React.createElement("div", { style: { textAlign: "center" } },\n        React.createElement("p", { style: { borderTop: "1px solid black" } }, "Signature of Guardian"),\n        React.createElement("p", { style: { fontSize: "12px", textTransform: "uppercase" } }, patient?.guardianName ? `(${patient?.guardianName})` : "")\n      )\n    )\n  );\n}',Vs=e=>{var n;let{patient:r}=e;const a=(0,j.d4)((e=>e.templates.consentFormTemplateArray)),[s,i]=(0,t.useState)(null),o=(0,t.useRef)(),l=(0,qn.useReactToPrint)({content:()=>o.current,pageStyle:"\n      @page {\n        size: A4;\n        margin: 20mm;\n      }\n      @media print {\n        body {\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-only {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n        .print-content {\n          position: relative;\n          min-height: 100vh;\n          padding: 20px;\n        }\n      }\n    "}),c=e=>{i(e),setTimeout(l,100)};return(null===a||void 0===a?void 0:a.length)<=1?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)($s,{onClick:()=>c(a[0]),children:"Consent Form"}),(0,X.jsx)("div",{style:{display:"none"},children:(0,X.jsx)(Yn,{ref:o,patient:r,templateString:(null===s||void 0===s?void 0:s.value)||Hs})})]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(Ls,{children:[(0,X.jsxs)(Fs,{className:"cursor-pointer",children:[(0,X.jsx)(Xn.A,{className:"h-4 w-4 mr-2"}),"Consent Form"]}),(0,X.jsx)(Bs,{sideOffset:2,alignOffset:-5,children:a.map((e=>(0,X.jsx)($s,{onSelect:t=>{t.preventDefault(),c(e)},children:e.name},e.name)))})]}),(0,X.jsx)("div",{style:{display:"none"},children:(0,X.jsx)(Yn,{ref:o,patient:r,templateString:(null===s||void 0===s?void 0:s.value)||(null===a||void 0===a||null===(n=a[0])||void 0===n?void 0:n.value)})})]})};function qs(){(0,j.d4)((e=>e.hospital.hospitalInfo));const e=(0,j.d4)((e=>e.templates.consentFormTemplateArray)),n=((0,j.wA)(),{patient:{name:"John Doe",age:"45-4",gender:"Male",address:"123 Main St",contactNumber:"1234567890"},guardianName:"Jane Doe",registrationNumber:"REG001",ipdNumber:"IPD001",assignedRoom:{roomNumber:"101"},bookingDate:(new Date).toISOString(),bookingTime:"10:00 AM",doctor:{name:"Dr. Smith"},relation:"Spouse"}),[r,a]=(0,t.useState)([{name:"System Default",value:Hs},...e||[]]),[s,i]=(0,t.useState)(r[0]||{name:"",value:""}),[o,l]=(0,t.useState)(null);return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex flex-col gap-6 mb-6",children:[(0,X.jsx)("div",{className:"flex justify-between items-center",children:(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Consent Form Template Preview"})}),(0,X.jsx)("div",{className:"flex flex-wrap gap-3",children:r.map(((e,t)=>(0,X.jsx)("div",{className:"relative",children:o===t?(0,X.jsx)("div",{className:"flex items-center gap-2",children:(0,X.jsx)(Vn.p,{value:e.name,onChange:t=>((e,t)=>{const n=r.findIndex((t=>t===e));if(-1===n)return;const o=r.map(((e,r)=>r===n?{...e,name:t}:e));a(o),s===e&&i(o[n])})(e,t.target.value),onBlur:()=>l(null),onKeyDown:e=>{"Enter"===e.key&&l(null)},className:"w-[150px]",autoFocus:!0})}):(0,X.jsx)(w.$,{variant:"outline",className:(0,Ee.cn)("relative min-w-[150px]",s===e&&"border-2 border-primary bg-primary/10"),onClick:()=>i(e),onDoubleClick:()=>l(t),children:e.name||"Unnamed Template"})},t)))})]}),(0,X.jsx)("div",{className:"flex justify-center bg-gray-100 p-4 min-h-[calc(100vh-200px)] overflow-auto",children:(0,X.jsxs)("div",{className:"bg-white shadow-lg",style:{width:"210mm",minHeight:"297mm",margin:"0 auto",breakAfter:"always",breakInside:"avoid"},children:[(0,X.jsx)("style",{children:"\n              @media print {\n                .print-content {\n                  page-break-inside: avoid;\n                  page-break-after: always;\n                }\n                \n                h1, h2, h3, table, tr, img {\n                  page-break-inside: avoid;\n                }\n                \n                .page-break-before {\n                  page-break-before: always;\n                }\n                \n                .page-header {\n                  position: running(header);\n                }\n                \n                @page {\n                  size: A4;\n                  margin: 8mm;\n                  @top-center {\n                    content: element(header);\n                  }\n                }\n              }\n            "}),(0,X.jsx)(Yn,{patient:n,templateString:null===s||void 0===s?void 0:s.value})]})})]})}var Gs=__webpack_require__(7368),Ks=__webpack_require__(1981);const Ys=[{name:"General"},{name:"Semi-Private"},{name:"Private"},{name:"ICU"},{name:"Deluxe AC"},{name:"Operation Theater"},{name:"Emergency"}],Xs=()=>{const e=(0,j.wA)(),n=(0,a.Zp)(),r=(0,a.zy)(),{toast:s}=(0,H.dj)(),i=(0,j.d4)((e=>e.rooms.createRoomStatus)),{rooms:o}=(0,j.d4)((e=>e.rooms)),l=new URLSearchParams(r.search).get("edit"),c=Boolean(l),[d,u]=(0,t.useState)({roomNumber:"",type:"",floor:"",capacity:"",ratePerDay:"",beds:[]});(0,t.useEffect)((()=>{if(c){const e=o.find((e=>e._id===l));e&&u({...e,beds:e.beds.map((e=>e.bedNumber))})}}),[c,l,o]);const m=(e,t)=>{u((n=>{const r={...n,[e]:["floor","capacity","ratePerDay"].includes(e)?Number(t):t};if("capacity"===e){const e=Number(t);r.beds=Array.from({length:e},((e,t)=>`${t+1}`))}return r}))},h=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,X.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,X.jsx)("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,X.jsx)(Vn.p,{id:e,type:n,value:d[e],onChange:t=>m(e,t.target.value),placeholder:`Enter ${t.toLowerCase()}`,required:r,className:"w-full"})]})};return(0,X.jsxs)("div",{className:"max-w-2xl mx-auto md:mt-8 p-6 bg-white rounded-lg shadow-md",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,X.jsx)(w.$,{onClick:()=>n(-1),variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsxs)("h2",{className:"text-2xl font-bold",children:[c?"Edit":"Create New"," Room"]})]}),(0,X.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const r=c?tt({id:l,room:d}):et(d);e(r).unwrap().then((()=>{s({title:`Room ${c?"updated":"created"} successfully`,description:`The room has been ${c?"updated":"added"} in the system.`,variant:"success"}),n("/rooms")})).catch((e=>{s({title:`Failed to ${c?"update":"create"} room`,description:e.message||`There was an error ${c?"updating":"creating"} the room. Please try again.`,variant:"destructive"})}))},className:"space-y-6",children:[(0,X.jsxs)("div",{className:"flex flex-wrap gap-4",children:[h("roomNumber","Room Number/Name","text",!0),(0,X.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,X.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Type"}),(0,X.jsx)(Gs.P,{suggestions:Ys,placeholder:"Select room type",value:d.type,setValue:e=>m("type",e),onSuggestionSelect:e=>m("type",e.name)})]})]}),(0,X.jsxs)("div",{className:"flex flex-wrap gap-4",children:[h("floor","Floor","number"),h("capacity","Capacity","number",!0),h("ratePerDay","Rate per Day","number")]}),(()=>{const e=parseInt(d.capacity,10);return isNaN(e)||e<=0?null:(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-medium text-gray-700",children:"Bed Numbers/Names"}),(0,X.jsx)("div",{className:"grid grid-cols-2 gap-2",children:d.beds.map(((e,t)=>(0,X.jsx)(Vn.p,{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...d.beds];n[e]=t,u((e=>({...e,beds:n})))})(t,e.target.value),placeholder:`Bed ${t+1}`,className:"w-full"},t)))})]})})(),(0,X.jsx)(w.$,{type:"submit",className:"w-full text-white",disabled:"loading"===i,children:"loading"===i?c?"Updating...":"Creating...":c?"Update Room":"Create Room"})]})]})},Zs=(0,N.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Js=(0,N.A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Qs=(0,N.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),ei=(0,N.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ti=(0,N.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ni=(0,N.A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ri=(0,N.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ai=(0,N.A)("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]),si=(0,N.A)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),ii=(0,N.A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),oi=(0,N.A)("ReceiptText",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]]),li=(0,N.A)("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),ci=(0,N.A)("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),di=(0,N.A)("BriefcaseMedical",[["path",{d:"M12 11v4",key:"a6ujw6"}],["path",{d:"M14 13h-4",key:"1pl8zg"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M18 6v14",key:"1mu4gy"}],["path",{d:"M6 6v14",key:"1s15cj"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),ui=(0,N.A)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),mi=(0,N.A)("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]),hi=(0,N.A)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var pi=__webpack_require__(7365),fi=__webpack_require__(4451),[vi,gi]=(0,V.A)("Tooltip",[sr.Bk]),xi=(0,sr.Bk)(),yi="TooltipProvider",bi=700,ji="tooltip.open",[wi,Ni]=vi(yi),_i=e=>{const{__scopeTooltip:n,delayDuration:r=bi,skipDelayDuration:a=300,disableHoverableContent:s=!1,children:i}=e,[o,l]=t.useState(!0),c=t.useRef(!1),d=t.useRef(0);return t.useEffect((()=>{const e=d.current;return()=>window.clearTimeout(e)}),[]),(0,X.jsx)(wi,{scope:n,isOpenDelayed:o,delayDuration:r,onOpen:t.useCallback((()=>{window.clearTimeout(d.current),l(!1)}),[]),onClose:t.useCallback((()=>{window.clearTimeout(d.current),d.current=window.setTimeout((()=>l(!0)),a)}),[a]),isPointerInTransitRef:c,onPointerInTransitChange:t.useCallback((e=>{c.current=e}),[]),disableHoverableContent:s,children:i})};_i.displayName=yi;var Si="Tooltip",[Ei,Ci]=vi(Si),Di=e=>{const{__scopeTooltip:n,children:r,open:a,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=Ni(Si,e.__scopeTooltip),d=xi(n),[u,m]=t.useState(null),h=(0,ar.B)(),p=t.useRef(0),f=o??c.disableHoverableContent,v=l??c.delayDuration,g=t.useRef(!1),[x=!1,y]=(0,Zn.i)({prop:a,defaultProp:s,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(ji))):c.onClose(),i?.(e)}}),b=t.useMemo((()=>x?g.current?"delayed-open":"instant-open":"closed"),[x]),j=t.useCallback((()=>{window.clearTimeout(p.current),p.current=0,g.current=!1,y(!0)}),[y]),w=t.useCallback((()=>{window.clearTimeout(p.current),p.current=0,y(!1)}),[y]),N=t.useCallback((()=>{window.clearTimeout(p.current),p.current=window.setTimeout((()=>{g.current=!0,y(!0),p.current=0}),v)}),[v,y]);return t.useEffect((()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)}),[]),(0,X.jsx)(sr.bL,{...d,children:(0,X.jsx)(Ei,{scope:n,contentId:h,open:x,stateAttribute:b,trigger:u,onTriggerChange:m,onTriggerEnter:t.useCallback((()=>{c.isOpenDelayed?N():j()}),[c.isOpenDelayed,N,j]),onTriggerLeave:t.useCallback((()=>{f?w():(window.clearTimeout(p.current),p.current=0)}),[w,f]),onOpen:j,onClose:w,disableHoverableContent:f,children:r})})};Di.displayName=Si;var Ti="TooltipTrigger",ki=t.forwardRef(((e,n)=>{const{__scopeTooltip:r,...a}=e,s=Ci(Ti,r),i=Ni(Ti,r),o=xi(r),l=t.useRef(null),c=(0,q.s)(n,l,s.onTriggerChange),d=t.useRef(!1),u=t.useRef(!1),m=t.useCallback((()=>d.current=!1),[]);return t.useEffect((()=>()=>document.removeEventListener("pointerup",m)),[m]),(0,X.jsx)(sr.Mz,{asChild:!0,...o,children:(0,X.jsx)(Jn.sG.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...a,ref:c,onPointerMove:(0,K.m)(e.onPointerMove,(e=>{"touch"!==e.pointerType&&(u.current||i.isPointerInTransitRef.current||(s.onTriggerEnter(),u.current=!0))})),onPointerLeave:(0,K.m)(e.onPointerLeave,(()=>{s.onTriggerLeave(),u.current=!1})),onPointerDown:(0,K.m)(e.onPointerDown,(()=>{d.current=!0,document.addEventListener("pointerup",m,{once:!0})})),onFocus:(0,K.m)(e.onFocus,(()=>{d.current||s.onOpen()})),onBlur:(0,K.m)(e.onBlur,s.onClose),onClick:(0,K.m)(e.onClick,s.onClose)})})}));ki.displayName=Ti;var Ai="TooltipPortal",[Pi,Oi]=vi(Ai,{forceMount:void 0}),Ri=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,s=Ci(Ai,t);return(0,X.jsx)(Pi,{scope:t,forceMount:n,children:(0,X.jsx)(or.C,{present:n||s.open,children:(0,X.jsx)(ir.Z,{asChild:!0,container:a,children:r})})})};Ri.displayName=Ai;var Mi="TooltipContent",Ii=t.forwardRef(((e,t)=>{const n=Oi(Mi,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...s}=e,i=Ci(Mi,e.__scopeTooltip);return(0,X.jsx)(or.C,{present:r||i.open,children:i.disableHoverableContent?(0,X.jsx)(Wi,{side:a,...s,ref:t}):(0,X.jsx)(Li,{side:a,...s,ref:t})})})),Li=t.forwardRef(((e,n)=>{const r=Ci(Mi,e.__scopeTooltip),a=Ni(Mi,e.__scopeTooltip),s=t.useRef(null),i=(0,q.s)(n,s),[o,l]=t.useState(null),{trigger:c,onClose:d}=r,u=s.current,{onPointerInTransitChange:m}=a,h=t.useCallback((()=>{l(null),m(!1)}),[m]),p=t.useCallback(((e,t)=>{const n=e.currentTarget,r={x:e.clientX,y:e.clientY},a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,a,s)){case s:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),s=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;n.length>=2;){const e=n[n.length-1],r=n[n.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...a,...function(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}(t.getBoundingClientRect())]);l(s),m(!0)}),[m]);return t.useEffect((()=>()=>h()),[h]),t.useEffect((()=>{if(c&&u){const e=e=>p(e,u),t=e=>p(e,c);return c.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}}),[c,u,p,h]),t.useEffect((()=>{if(o){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},r=c?.contains(t)||u?.contains(t),a=!function(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const e=t[s].x,o=t[s].y,l=t[i].x,c=t[i].y;o>r!==c>r&&n<(l-e)*(r-o)/(c-o)+e&&(a=!a)}return a}(n,o);r?h():a&&(h(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[c,u,o,d,h]),(0,X.jsx)(Wi,{...e,ref:i})})),[Fi,Bi]=vi(Si,{isInside:!1}),Wi=t.forwardRef(((e,n)=>{const{__scopeTooltip:r,children:a,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Ci(Mi,r),d=xi(r),{onClose:u}=c;return t.useEffect((()=>(document.addEventListener(ji,u),()=>document.removeEventListener(ji,u))),[u]),t.useEffect((()=>{if(c.trigger){const e=e=>{const t=e.target;t?.contains(c.trigger)&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[c.trigger,u]),(0,X.jsx)(tr.qW,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:(0,X.jsxs)(sr.UC,{"data-state":c.stateAttribute,...d,...l,ref:n,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,X.jsx)(Y.xV,{children:a}),(0,X.jsx)(Fi,{scope:r,isInside:!0,children:(0,X.jsx)(fi.b,{id:c.contentId,role:"tooltip",children:s||a})})]})})}));Ii.displayName=Mi;var $i="TooltipArrow",Ui=t.forwardRef(((e,t)=>{const{__scopeTooltip:n,...r}=e,a=xi(n);return Bi($i,n).isInside?null:(0,X.jsx)(sr.i3,{...a,...r,ref:t})}));Ui.displayName=$i;var zi=Ii;const Hi=_i,Vi=Di,qi=ki,Gi=t.forwardRef(((e,t)=>{let{className:n,sideOffset:r=4,...a}=e;return(0,X.jsx)(zi,{ref:t,sideOffset:r,className:(0,Ee.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...a})}));Gi.displayName=zi.displayName;const Ki=e=>{var t;if(!e)return!0;const n=Hn.getState().user.userData;return!(null===n||void 0===n||!n.isSuperAdmin)||((null===n||void 0===n||null===(t=n.permissions)||void 0===t?void 0:t.includes(e))||!1)},Yi=[{name:"Quick Menu",icon:ii,path:"/"},{name:"Patients List",icon:ri,path:"/patients"},{name:"Billings/Invoices",icon:oi,path:"/billings"},{name:"Expenses/Debit",icon:li,path:"/expenses"},{name:"Doctors",icon:ci,path:"/doctors"},{name:"Pharmacy",icon:di,path:"/pharmacy"},{name:"Lab",icon:ui,path:"/lab/list"},{name:"Rooms",icon:mi,path:"/rooms"},{name:"Services",icon:hi,path:"/services"},{name:"Statistics",icon:si,path:"/statistics",permission:"view_financial"},{name:"Staffs",icon:ri,path:"/staff",permission:"edit_staff"},{name:"Settings",icon:pi.A,path:"/settings",permission:"edit_hospital"}],Xi=e=>{let{className:t}=e;return(0,X.jsxs)("svg",{className:t,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,X.jsx)("circle",{cx:"50",cy:"50",r:"45",fill:"#4299E1"}),(0,X.jsx)("path",{d:"M30 50H70",stroke:"white",strokeWidth:"8",strokeLinecap:"round"})," ",(0,X.jsx)("path",{d:"M50 30V70",stroke:"#48BB78",strokeWidth:"8",strokeLinecap:"round"})," ",(0,X.jsx)("circle",{cx:"50",cy:"50",r:"15",fill:"#F6E05E"})," ",(0,X.jsx)("path",{d:"M50 42V58M42 50H58",stroke:"#4299E1",strokeWidth:"4",strokeLinecap:"round"})," "]})};function Zi(e){let{isCollapsed:t}=e;const n=(0,a.Zp)(),r=(0,a.zy)(),{toast:s}=(0,H.dj)(),{userData:i}=(0,j.d4)((e=>e.user));return(0,X.jsx)("div",{className:(0,Ee.cn)("hidden md:flex flex-col h-full bg-white border-r transition-all duration-300 fixed top-19 left-0 z-10 ",t?"w-16":"w-56"),children:(0,X.jsx)(b.F,{className:"flex-1 overflow-y-auto py-4",children:(0,X.jsx)("ul",{className:"space-y-1 px-3",children:Yi.map((e=>{return(0,X.jsx)("li",{children:(0,X.jsx)(Hi,{children:(0,X.jsxs)(Vi,{children:[(0,X.jsx)(qi,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"ghost",className:(0,Ee.cn)("w-full justify-start",(a=e.path,("/"===a?"/"===r.pathname:r.pathname.startsWith(a))?"bg-blue-400 text-white":"text-gray-600 hover:bg-blue-300 hover:text-white"),t?"px-2":"px-4"),onClick:()=>(e=>{!e.permission||Ki(e.permission)?n(e.path):s({title:"You don't have permission to view this page",description:"Please contact your administrator",variant:"destructive"})})(e),children:[(0,X.jsx)(e.icon,{className:(0,Ee.cn)("h-5 w-5",t?"mr-0":"mr-3")}),!t&&(0,X.jsx)("span",{children:e.name})]})}),t&&(0,X.jsx)(Gi,{side:"right",children:(0,X.jsx)("p",{className:"font-semibold",children:e.name})})]})})},e.name);var a}))})})})}var Ji=__webpack_require__(917);const Qi=G.bL,eo=G.l9,to=(G.bm,G.ZL),no=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(G.hJ,{className:(0,Ee.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r,ref:t})}));no.displayName=G.hJ.displayName;const ro=(0,Ji.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ao=t.forwardRef(((e,t)=>{let{side:n="right",className:r,children:a,...s}=e;return(0,X.jsxs)(to,{children:[(0,X.jsx)(no,{}),(0,X.jsxs)(G.UC,{ref:t,className:(0,Ee.cn)(ro({side:n}),r),...s,children:[(0,X.jsxs)(G.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,X.jsx)(Rs.MKb,{className:"h-4 w-4"}),(0,X.jsx)("span",{className:"sr-only",children:"Close"})]}),a]})]})}));ao.displayName=G.UC.displayName;t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(G.hE,{ref:t,className:(0,Ee.cn)("text-lg font-semibold text-foreground",n),...r})})).displayName=G.hE.displayName;t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(G.VY,{ref:t,className:(0,Ee.cn)("text-sm text-muted-foreground",n),...r})})).displayName=G.VY.displayName;const so=__webpack_require__.p+"static/media/logo.752bc91d93d9c8053fb9.jpeg";function io(){const e=(0,j.wA)(),n=(0,a.Zp)(),r=(0,a.zy)(),s=(0,t.useRef)(null),[i,o]=(0,t.useState)({hospitalId:"",username:"",password:""}),[l,c]=(0,t.useState)(!1),d=(0,j.d4)((e=>e.user.loginStatus)),u=(0,j.d4)((e=>e.user.loginError)),{toast:m}=(0,H.dj)(),[h,p]=(0,t.useState)(!1),v=(0,t.useRef)(null),[g,x]=(0,t.useState)(!1);(0,t.useEffect)((()=>{var e;null!==(e=r.state)&&void 0!==e&&e.scrollToFeatures&&s.current&&s.current.scrollIntoView({behavior:"smooth"})}),[r]);const y=e=>{var t;e.preventDefault(),null===(t=s.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})},b=e=>{const{id:t,value:n}=e.target;o((e=>({...e,[t]:n})))},N=()=>{x(!1)};return(0,X.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,X.jsxs)("header",{className:"px-2 lg:px-6 h-16 flex items-center justify-between bg-white shadow-sm",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsxs)(Qi,{open:g,onOpenChange:x,children:[(0,X.jsx)(eo,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"ghost",size:"icon",className:"md:hidden mr-0",children:[(0,X.jsx)(Zs,{className:"h-6 w-6"}),(0,X.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,X.jsx)(ao,{side:"left",children:(0,X.jsxs)("nav",{className:"flex flex-col gap-4 mt-4",children:[(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",onClick:N,children:"Home"}),(0,X.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:e=>((e,t)=>{N(),"scrollToFeatures"===t&&y(e)})(e,"scrollToFeatures"),children:"Features"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",onClick:N,children:"About"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",onClick:N,children:"Contact"})]})})]}),(0,X.jsxs)(f,{className:"flex items-center justify-center",to:"/",children:[(0,X.jsx)(Xi,{className:"h-6 w-6 sm:h-7 sm:w-7 text-blue-600"}),(0,X.jsx)("span",{className:"ml-2 text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:"The Hospital"})]})]}),(0,X.jsxs)("nav",{className:"hidden md:flex items-center space-x-4",children:[(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",children:"Home"}),(0,X.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:y,children:"Features"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",children:"About"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",children:"Contact"})]}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",className:"md:hidden mr-2",onClick:()=>{v.current&&v.current.scrollIntoView({behavior:"smooth",block:"center"})},children:[(0,X.jsx)(Js,{className:"h-4 w-4 mr-2"}),"Login"]})]}),(0,X.jsxs)("main",{className:"flex-1",children:[(0,X.jsx)("section",{className:"w-full py-12 md:py-24 lg:py-32 bg-white",children:(0,X.jsx)("div",{className:"container px-4 md:px-6",children:(0,X.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1fr_400px] lg:gap-12 xl:grid-cols-[1fr_600px]",children:[(0,X.jsxs)("div",{className:"flex flex-col justify-center space-y-4",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("h1",{className:"text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl lg:text-6xl/none",children:"Streamline Your Hospital Management"}),(0,X.jsx)("p",{className:"max-w-[600px] text-gray-500 md:text-xl",children:"The Hospital provides a comprehensive solution for efficient hospital administration, patient care, and resource management."})]}),(0,X.jsxs)("div",{className:"hidden md:flex lg:flex flex-col gap-2 min-[400px]:flex-row",children:[(0,X.jsx)(w.$,{className:"w-full sm:w-auto inline-flex h-10 items-center justify-center rounded-md bg-blue-600 px-4 sm:px-8 text-sm font-medium text-white shadow transition-colors hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-blue-700 disabled:pointer-events-none disabled:opacity-50",onClick:()=>{v.current&&(v.current.focus(),v.current.scrollIntoView({behavior:"smooth",block:"center"}))},children:"Get Started"}),(0,X.jsx)(w.$,{className:"w-full sm:w-auto inline-flex h-10 items-center justify-center rounded-md border border-gray-200 bg-white px-4 sm:px-8 text-sm font-medium shadow-sm transition-colors hover:bg-gray-100 hover:text-gray-900 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 disabled:pointer-events-none disabled:opacity-50",variant:"outline",onClick:()=>{n("/about")},children:"Learn More"})]})]}),(0,X.jsx)(k.Zp,{className:"w-full max-w-sm mx-auto lg:mx-0",children:(0,X.jsx)(k.Wu,{className:"p-6",children:(0,X.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),i.hospitalId&&i.username&&i.password){c(!0);try{await e(Ke(i)).unwrap(),await e(Ye()),n("/")}catch(r){console.error("Login error:",r),m({title:"Login failed",description:"Please check your credentials and try again.",variant:"destructive"})}finally{c(!1)}}else m({title:"Incomplete form",description:"Please fill in all fields.",variant:"destructive"})},className:"space-y-4",children:[(0,X.jsx)("h2",{className:"text-2xl font-bold text-center",children:"Login"}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"hospitalId",children:"Hospital ID"}),(0,X.jsx)(Vn.p,{className:"w-full font-semibold flex h-10 rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",id:"hospitalId",placeholder:"Enter your hospital ID",type:"text",required:!0,value:i.hospitalId,onChange:b,ref:v})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"username",children:"User ID"}),(0,X.jsx)(Vn.p,{className:"w-full font-semibold flex h-10 rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",id:"username",placeholder:"Enter your user ID",type:"text",required:!0,value:i.username,onChange:b})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"password",children:"Password"}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Vn.p,{className:"w-full flex h-10 rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50 pr-10",id:"password",placeholder:"********",type:h?"text":"password",required:!0,value:i.password,onChange:b}),(0,X.jsx)("button",{type:"button",onClick:()=>{p(!h)},className:"absolute inset-y-0 right-0 flex items-center pr-3",children:h?(0,X.jsx)(Qs,{className:"h-4 w-4 text-gray-400"}):(0,X.jsx)(ei,{className:"h-4 w-4 text-gray-400"})})]})]}),(0,X.jsx)(w.$,{className:"w-full bg-blue-600 text-white hover:bg-blue-700",type:"submit",disabled:l,children:l?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):"Login"}),"failed"===d&&(0,X.jsx)("p",{className:"text-red-500 text-sm",children:u})]})})})]})})}),(0,X.jsx)("section",{id:"features",ref:s,className:"w-full py-12 md:py-24 lg:py-32 bg-gray-100",children:(0,X.jsxs)("div",{className:"container px-4 md:px-6",children:[(0,X.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tighter text-center mb-8 sm:mb-12",children:"Key Features"}),(0,X.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(ni,{className:"h-12 w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-xl font-bold",children:"Secure Patient Records"}),(0,X.jsx)("p",{className:"text-gray-500",children:"Maintain confidential patient information with our state-of-the-art security measures."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(ri,{className:"h-12 w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-xl font-bold",children:"Staff Management"}),(0,X.jsx)("p",{className:"text-gray-500",children:"Efficiently manage schedules, assignments, and performance of your medical staff."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(ai,{className:"h-12 w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-xl font-bold",children:"Pharmacy Management"}),(0,X.jsx)("p",{className:"text-gray-500",children:"Streamline medication dispensing, inventory control, and prescription tracking."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(si,{className:"h-12 w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-xl font-bold",children:"Analytics Dashboard"}),(0,X.jsx)("p",{className:"text-gray-500",children:"Gain insights into hospital operations with comprehensive analytics and reporting."})]})]})]})})]}),(0,X.jsxs)("footer",{className:"flex flex-col sm:flex-row justify-between items-center py-6 px-4 md:px-6 border-t bg-white",children:[(0,X.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(Xi,{className:"h-5 w-5 text-blue-600"}),(0,X.jsx)("p",{className:"text-xs text-gray-500",children:"\xa9 2024 TheHospital. All rights reserved."})]}),(0,X.jsx)("span",{className:"hidden sm:inline text-gray-300",children:"|"}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)("img",{src:so,alt:"Thousand Ways Logo",className:"h-5 w-5 object-contain"}),(0,X.jsxs)("p",{className:"text-xs text-gray-500",children:["Powered by ",(0,X.jsx)("a",{href:"https://thethousandways.com/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 transition-colors",children:"Thousand Ways"})]})]})]}),(0,X.jsxs)("nav",{className:"flex gap-4",children:[(0,X.jsx)(f,{className:"text-xs hover:underline underline-offset-4",to:"/terms",children:"Terms of Service"}),(0,X.jsx)(f,{className:"text-xs hover:underline underline-offset-4",to:"/privacy",children:"Privacy"})]})]})]})}var oo=__webpack_require__(9292);const lo=(0,N.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),co=(0,N.A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),uo=(0,N.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),mo=(0,N.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var ho=__webpack_require__(503),po="Avatar",[fo,vo]=(0,V.A)(po),[go,xo]=fo(po),yo=t.forwardRef(((e,n)=>{const{__scopeAvatar:r,...a}=e,[s,i]=t.useState("idle");return(0,X.jsx)(go,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:(0,X.jsx)(Jn.sG.span,{...a,ref:n})})}));yo.displayName=po;var bo="AvatarImage",jo=t.forwardRef(((e,n)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:s=()=>{},...i}=e,o=xo(bo,r),l=function(e,n){const[r,a]=t.useState("idle");return(0,ho.N)((()=>{if(!e)return void a("error");let t=!0;const r=new window.Image,s=e=>()=>{t&&a(e)};return a("loading"),r.onload=s("loaded"),r.onerror=s("error"),r.src=e,n&&(r.referrerPolicy=n),()=>{t=!1}}),[e,n]),r}(a,i.referrerPolicy),c=(0,lr.c)((e=>{s(e),o.onImageLoadingStatusChange(e)}));return(0,ho.N)((()=>{"idle"!==l&&c(l)}),[l,c]),"loaded"===l?(0,X.jsx)(Jn.sG.img,{...i,ref:n,src:a}):null}));jo.displayName=bo;var wo="AvatarFallback",No=t.forwardRef(((e,n)=>{const{__scopeAvatar:r,delayMs:a,...s}=e,i=xo(wo,r),[o,l]=t.useState(void 0===a);return t.useEffect((()=>{if(void 0!==a){const e=window.setTimeout((()=>l(!0)),a);return()=>window.clearTimeout(e)}}),[a]),o&&"loaded"!==i.imageLoadingStatus?(0,X.jsx)(Jn.sG.span,{...s,ref:n}):null}));No.displayName=wo;var _o=yo,So=jo,Eo=No;const Co=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(_o,{ref:t,className:(0,Ee.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...r})}));Co.displayName=_o.displayName;const Do=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(So,{ref:t,className:(0,Ee.cn)("aspect-square h-full w-full",n),...r})}));Do.displayName=So.displayName;const To=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(Eo,{ref:t,className:(0,Ee.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...r})}));To.displayName=Eo.displayName;var ko=__webpack_require__(8106),Ao="horizontal",Po=["horizontal","vertical"],Oo=t.forwardRef(((e,t)=>{const{decorative:n,orientation:r=Ao,...a}=e,s=function(e){return Po.includes(e)}(r)?r:Ao,i=n?{role:"none"}:{"aria-orientation":"vertical"===s?s:void 0,role:"separator"};return(0,X.jsx)(Jn.sG.div,{"data-orientation":s,...i,...a,ref:t})}));Oo.displayName="Separator";var Ro=Oo;const Mo=t.forwardRef(((e,t)=>{let{className:n,orientation:r="horizontal",decorative:a=!0,...s}=e;return(0,X.jsx)(Ro,{ref:t,decorative:a,orientation:r,className:(0,Ee.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",n),...s})}));Mo.displayName=Ro.displayName;var Io=__webpack_require__(5598);const Lo=e=>{let{isOpen:t,setIsOpen:n}=e;const r=(0,j.d4)((e=>e.hospital.hospitalInfo)),s=(null===r||void 0===r?void 0:r.subscriptionTimeline)||[],i=(0,a.Zp)(),{daysLeft:o,extraDays:l}=(()=>{if(null===r||void 0===r||!r.renewalDate)return{daysLeft:0,isExpired:!0,extraDays:0};const e=new Date,t=new Date(r.renewalDate);e.setHours(0,0,0,0),t.setHours(0,0,0,0);const n=t.getTime()-e.getTime(),a=Math.ceil(n/864e5);return{daysLeft:a,isExpired:a<0,extraDays:a<0?Math.abs(a):0}})(),c=e=>{switch(e){case"install":return"\u2713";case"trial":return"\ud83d\udcc5";case"payment":return"\ud83d\udcb3";default:return"\u2022"}},d=e=>{switch(e){case"install":return"bg-green-500";case"trial":return"bg-blue-500";case"payment":return"bg-purple-500";default:return"bg-gray-500"}};return(0,X.jsx)(Io.lG,{open:t,onOpenChange:n,children:(0,X.jsxs)(Io.Cf,{className:"sm:max-w-[900px]",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{className:"text-2xl font-bold text-red-600",children:"Subscription Renewal Alert"}),(0,X.jsx)(Io.rr,{className:"mt-4",children:o<0?(0,X.jsx)("div",{className:"space-y-2",children:(0,X.jsx)("p",{className:"text-red-600 font-semibold",children:"Your 30 days trial period has ended!"})}):`Your subscription will expire in ${o} days. Renew now to avoid service interruption.`})]}),(0,X.jsx)("div",{className:"grid gap-4",children:(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"bg-red-50 p-2 rounded-lg border-2 border-red-200",children:[(0,X.jsx)("h4",{className:"font-bold text-red-800 text-lg mb-3",children:"\u26a0\ufe0f Important Notice"}),(0,X.jsx)("p",{className:"text-red-700 mb-4 text-sm",children:"Your hospital management services will be discontinued if the subscription is not extended. This may result in:"}),(0,X.jsxs)("ul",{className:"list-disc list-inside text-red-600 space-y-2 ml-2 text-sm",children:[(0,X.jsx)("li",{children:"Loss of access to patient records"}),(0,X.jsx)("li",{children:"Interruption in IPD & OPD services"}),(0,X.jsx)("li",{children:"Discontinuation of billing services"}),(0,X.jsx)("li",{children:"Suspension of all premium features"})]})]}),(0,X.jsxs)("div",{className:"bg-blue-50 p-2 rounded-lg border-2 border-blue-200",children:[(0,X.jsx)("h4",{className:"font-bold text-blue-800 text-lg mb-3",children:"\ud83d\udcde Contact for Renewal"}),(0,X.jsx)("p",{className:"text-blue-700 mb-2 text-sm",children:"Please contact our support team to extend your plan:"}),(0,X.jsx)("p",{className:"font-semibold text-blue-900 mb-1",children:"+91 9942000425"}),(0,X.jsx)("p",{className:"text-sm text-blue-600",children:"Our team is available 24/7 to assist you with the renewal process"})]})]}),(0,X.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,X.jsx)("h4",{className:"font-bold text-gray-800 text-lg mb-6",children:"\ud83d\udccb Subscription Timeline"}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)("div",{className:"absolute left-[45px] top-0 h-full w-0.5 bg-gray-300"}),s.map(((e,t)=>(0,X.jsxs)("div",{className:"flex items-start mb-4 relative",children:[(0,X.jsx)("div",{className:`flex items-center justify-center w-[24px] h-[24px] rounded-full text-white relative z-10 ${d(e.type)}`,children:c(e.type)}),(0,X.jsxs)("div",{className:"ml-8",children:[(0,X.jsx)("h5",{className:"font-semibold text-gray-800",children:e.event}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.date).toLocaleDateString()}),(0,X.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]},t))),(0,X.jsxs)("div",{className:"flex items-start relative",children:[(0,X.jsx)("div",{className:"flex items-center justify-center w-[24px] h-[24px] rounded-full text-white relative z-10 "+(o<0?"bg-red-500":o<=7?"bg-yellow-500":"bg-green-500"),children:o<0?"\u26a0\ufe0f":"\u2713"}),(0,X.jsxs)("div",{className:"ml-8",children:[(0,X.jsx)("h5",{className:"font-semibold text-gray-800",children:"Current Status"}),(0,X.jsx)("p",{className:"text-sm font-medium "+(o<0?"text-red-600":"text-green-600"),children:o<0?`${l} days overdue`:`${o} days remaining`}),(0,X.jsxs)("div",{className:"flex items-center mt-1 space-x-2",children:[(0,X.jsx)("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium "+(o<0?"bg-red-100 text-red-700":o<=7?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:o<0?"Expired":o<=7?"Expiring Soon":"Active"}),(0,X.jsxs)("span",{className:"text-xs text-gray-500",children:[(null===r||void 0===r?void 0:r.planType)||"Trial"," subscription"]})]})]})]})]}),(0,X.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,X.jsx)("div",{className:"flex justify-between items-center text-sm",children:(0,X.jsxs)("span",{className:"text-gray-600",children:["Current Plan: ",(0,X.jsx)("span",{className:"font-semibold",children:(null===r||void 0===r?void 0:r.planType)||"Trial"})]})})})]})]})}),(0,X.jsxs)("div",{className:" bg-red-50 border border-red-200 rounded-md p-3",children:[o<0&&(null===r||void 0===r?void 0:r.discontinuedDaysLeft)>=0&&(0,X.jsxs)("div",{className:"flex",children:[(0,X.jsx)("div",{className:"flex-shrink-0",children:(0,X.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,X.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,X.jsxs)("div",{className:"ml-3",children:[(0,X.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Service Discontinuation Notice"}),(0,X.jsxs)("div",{className:"mt-1 text-sm text-red-700",children:[(0,X.jsxs)("p",{children:["Services will be discontinued in ",(0,X.jsx)("strong",{children:0===(null===r||void 0===r?void 0:r.discontinuedDaysLeft)?"today":(null===r||void 0===r?void 0:r.discontinuedDaysLeft)+" days"}),"."]}),(0,X.jsx)("p",{className:"text-xs mt-1",children:"Please renew your subscription to avoid service interruption."})]})]})]}),o<0&&(null===r||void 0===r?void 0:r.discontinuedDaysLeft)<0&&(0,X.jsxs)("div",{className:"flex",children:[(0,X.jsx)("div",{className:"flex-shrink-0",children:(0,X.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,X.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,X.jsxs)("div",{className:"ml-3",children:[(0,X.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Service Discontinuation Notice"}),(0,X.jsxs)("div",{className:"mt-1 text-sm text-red-700",children:[(0,X.jsx)("p",{children:"All services have been stopped."}),(0,X.jsx)("p",{className:"text-xs mt-1",children:"Please renew your subscription immediately to restore access."})]})]})]})]}),(0,X.jsxs)(Io.Es,{className:"mt-0",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,X.jsx)(w.$,{onClick:()=>{i("/settings/subscription"),n(!1)},children:"Details"})]})]})})},Fo=e=>{let{title:t,description:n,time:r}=e;return(0,X.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,X.jsx)(co,{className:"h-5 w-5 text-blue-500 mt-1"}),(0,X.jsxs)("div",{className:"flex-1",children:[(0,X.jsx)("h4",{className:"text-sm font-medium",children:t}),(0,X.jsx)("p",{className:"text-sm text-gray-500",children:n}),(0,X.jsxs)("div",{className:"flex items-center mt-1 text-xs text-gray-400",children:[(0,X.jsx)(mo,{className:"h-3 w-3 mr-1"}),(0,X.jsx)("span",{children:r})]})]})]})},Bo=e=>{var n,r;let{isCollapsed:s,setIsCollapsed:i,navItems:o}=e;const l=(0,j.d4)((e=>e.user.userData)),c=(0,j.d4)((e=>e.hospital.hospitalInfo)),d=(0,j.wA)(),u=(0,a.Zp)(),m=(0,a.zy)(),{toast:h}=(0,H.dj)(),[p,f]=(0,t.useState)(!1),[v,g]=(0,t.useState)(""),[x,y]=(0,t.useState)([]),[b,N]=(0,t.useState)(!1),_=e=>{if(!e)return null;const t=new Date,n=new Date(e);t.setHours(0,0,0,0),n.setHours(0,0,0,0);const r=n.getTime()-t.getTime();return Math.ceil(r/864e5)},S=[];return(0,X.jsxs)("header",{className:"flex items-center justify-between px-2 sm:px-4 py-2 bg-white z-50 sticky top-0",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsxs)(Qi,{open:p,onOpenChange:f,children:[(0,X.jsx)(eo,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"mr-2 sm:mr-3 md:hidden",children:(0,X.jsx)(Zs,{className:"h-5 w-5 sm:h-10 sm:w-10"})})}),(0,X.jsxs)(ao,{side:"left",className:"w-[250px] sm:w-[250px] pt-6 px-4",children:[(0,X.jsxs)("div",{className:"flex items-center mb-4",children:[(0,X.jsx)(Xi,{className:"h-6 w-6 sm:h-8 sm:w-8"}),(0,X.jsx)("span",{className:"ml-2 text-lg sm:text-xl font-bold text-gray-800",children:"The Hospital"})]}),(0,X.jsx)(Mo,{className:"mb-4"}),(0,X.jsx)("nav",{className:"flex flex-col space-y-1",children:o.map((e=>(0,X.jsxs)(w.$,{variant:"ghost",className:"justify-start "+(m.pathname===e.path?"bg-blue-100 text-blue-900":""),onClick:()=>{return t=e.path,u(t),void f(!1);var t},children:[(0,X.jsx)(e.icon,{className:"mr-2 h-4 w-4"}),e.name]},e.name)))})]})]}),(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>i(!s),className:"mr-2 sm:mr-3 hidden md:flex",children:(0,X.jsx)(Zs,{className:"h-4 w-4"})}),(0,X.jsxs)("div",{className:"hidden sm:flex items-center",children:[(0,X.jsx)(Xi,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,X.jsx)("span",{className:"ml-2 text-base sm:text-lg font-bold text-gray-800",children:"The Hospital"})]})]}),(0,X.jsx)("div",{className:"mx-2 sm:mx-4 flex-grow max-w-xl",children:(0,X.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),v.trim())try{const e=await d((0,Be.bW)({searchQuery:v.trim(),page:1,limit:10}));Be.bW.fulfilled.match(e)?u("/search",{state:{searchResults:e.payload.results,searchQuery:v}}):h({title:"Search failed",description:"There was an error performing the search. Please try again.",variant:"destructive"})}catch(t){console.error("Search error:",t),h({title:"Search failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}},className:"flex",children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"flex absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 pointer-events-none"}),(0,X.jsx)(Vn.p,{type:"search",placeholder:"Patient ID/Name",className:"w-full pl-8 sm:pl-10 pr-2 sm:pr-4 py-1 sm:py-2 text-sm sm:text-base rounded-l-full border-r-0 focus:ring-2 focus:ring-blue-500 focus:ring-offset-0 focus:border-gray-300 focus:outline-none",value:v,onChange:e=>g(e.target.value)})]}),(0,X.jsx)(w.$,{type:"submit",variant:"outline",className:"px-2 sm:px-4 rounded-r-full border-l-0 bg-gray-100 hover:bg-gray-200 focus:ring-0 focus:outline-none",children:(0,X.jsx)(oo.A,{className:"h-4 w-4"})})]})}),(0,X.jsxs)("div",{className:"flex items-center",children:[null!==c&&void 0!==c&&c.renewalDate&&null!==_(c.renewalDate)&&(_(c.renewalDate)<0||_(c.renewalDate)<15)?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("button",{onClick:()=>N(!0),className:"ml-2 from-[#ff0f0f] to-[#ff8383] bg-gradient-to-r pl-5 pr-2  py-1 rounded-md mr-5 relative hover:shadow-lg transition-all duration-300",children:[(0,X.jsx)("div",{className:"h-2 w-2 bg-red-800 rounded-full absolute top-0 right-0 animate-ping"}),(0,X.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-xs text-white",children:"Buy Premium Now"}),(0,X.jsx)("p",{className:"text-[10px] text-white",children:_(c.renewalDate)<0?"Free trails has expired":`Renewal in: ${_(c.renewalDate)} days`})]}),(0,X.jsx)(lo,{className:"h-5 w-5 text-white"})]})]}),(0,X.jsx)(Lo,{isOpen:b,setIsOpen:N,daysLeft:_(c.renewalDate)})]}):null,(0,X.jsxs)(ko.AM,{children:[(0,X.jsx)(ko.Wv,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"ghost",size:"sm",className:"relative hidden sm:inline-flex",children:[(0,X.jsx)(co,{className:"h-4 w-4"}),S.length>0&&(0,X.jsx)("span",{className:"absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full"})]})}),(0,X.jsx)(ko.hl,{className:"w-80 p-0 mt-2",side:"bottom",align:"end",children:(0,X.jsxs)("div",{className:"p-4",children:[(0,X.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Notifications"}),(0,X.jsx)(Mo,{className:"my-2"}),S.length>0?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("div",{className:"space-y-4",children:S.map(((e,t)=>(0,X.jsx)(Fo,{title:e.title,description:e.description,time:e.time},t)))}),(0,X.jsx)(Mo,{className:"my-2"}),(0,X.jsx)(w.$,{variant:"ghost",className:"w-full justify-center mt-2",children:"View All Notifications"})]}):(0,X.jsxs)("div",{className:"text-center py-4",children:[(0,X.jsx)(co,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,X.jsx)("p",{className:"text-sm text-gray-500",children:"No notifications at the moment"})]})]})})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"ghost",size:"sm",className:"ml-2 sm:ml-3 flex items-center justify-end ",children:[(0,X.jsx)(Co,{className:"h-6 w-6 ring-2 ring-primary ring-offset-2 md:ring-0 md:ring-offset-0",children:(0,X.jsx)(To,{children:null===l||void 0===l||null===(n=l.name)||void 0===n||null===(r=n.charAt(0))||void 0===r?void 0:r.toUpperCase()})}),(0,X.jsx)("span",{className:"text-sm capitalize ml-2 hidden lg:inline",children:null===l||void 0===l?void 0:l.name}),(0,X.jsx)(lo,{className:"ml-1 h-3 w-3 hidden lg:inline"})]})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)(Us,{children:"My Account"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>u(`/staff/${null===l||void 0===l?void 0:l._id}`,{state:{staffData:l}}),children:"Profile"}),(0,X.jsx)($s,{onSelect:()=>u("/settings"),children:"Settings"}),(0,X.jsx)(zs,{}),(0,X.jsxs)($s,{onSelect:async()=>{try{(await fetch(`${M.B8}/api/auth/logout`,{method:"POST",credentials:"include"})).ok?(d(Ze()),h({title:"Logged out successfully",description:"You have been logged out of your account.",variant:"success"}),u("/")):h({title:"Logout failed",description:"There was an error logging out. Please try again.",variant:"destructive"})}catch(e){h({title:"Logout failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}},children:[(0,X.jsx)(uo,{className:"mr-2 h-4 w-4"}),(0,X.jsx)("span",{children:"Log out"})]})]})]})]})]})};var Wo=__webpack_require__(3340);const $o=(0,N.A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var Uo=__webpack_require__(5469);const zo=(0,N.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Ho=(0,N.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Vo=(0,N.A)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),qo=(0,N.A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var Go=__webpack_require__(8134);function Ko(e){const[n,r]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{const t=window.matchMedia(e);t.matches!==n&&r(t.matches);const a=()=>r(t.matches);return t.addListener(a),()=>t.removeListener(a)}),[n,e]),n}var Yo=__webpack_require__(5949),Xo=__webpack_require__(3416),Zo=__webpack_require__(5962);const Jo=(0,N.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Qo=e=>{var n,r,a,s,i,o,l,c,d,u,m,h,p,f,v,g,x,y;let{payment:b,payments:N,billData:_,styleData:S}=e;const{hospitalInfo:E}=(0,j.d4)((e=>e.hospital)),C=(0,j.d4)((e=>e.templates.headerTemplateArray)),D=(null===C||void 0===C?void 0:C.length)>0?C[0].value:Kn.h,T=(0,t.useRef)(),k=(0,Gn.G)(D||Kn.h),A=(0,qn.useReactToPrint)({content:()=>T.current,pageStyle:"\n      @page {\n        size: A4;\n        margin: 20mm;\n      }\n      @media print {\n        body {\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-only {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n        .print-content {\n          position: relative;\n          padding: 20px;\n        }\n      }\n    "}),P=N||(b?[b]:[]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(w.$,{variant:S?"outline":"ghost",size:"icon",onClick:A,className:"flex print:hidden justify-center   items-center"+(S?"px-2 w-[150px] ml-2":""),children:[(0,X.jsx)(Xn.A,{className:"h-3 w-3 mr-1"})," ",S?"Print All Payments":""]}),(0,X.jsx)("div",{style:{display:"none"},children:(0,X.jsx)("div",{ref:T,className:"print-content",children:(0,X.jsxs)("div",{className:"border-black border-[1px] mt-5",children:[(0,X.jsx)("div",{className:"hidden print:block ",children:(0,X.jsx)(k,{hospitalInfo:E})}),(0,X.jsxs)("div",{className:"border-black border-b-[1px] text-center text-2xl font-semibold uppercase flex justify-between px-4",children:[(0,X.jsx)("div",{className:"w-1/3",children:_.patientType}),(0,X.jsx)("div",{className:"w-1/3",children:"Receipt"}),(0,X.jsxs)("div",{className:"w-1/3 text-right text-base pt-2",children:[(0,X.jsx)("span",{className:"font-semibold",children:"Invoice No: "}),(null===_||void 0===_?void 0:_.invoiceNumber)||(null===(n=_.billDetails)||void 0===n?void 0:n.invoiceNumber)||""]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 py-2 px-4 border-black border-b-[1px]",children:[(0,X.jsxs)("div",{className:"grid grid-cols-3",children:[(0,X.jsx)("p",{className:"font-semibold",children:"Patient Name:"}),(0,X.jsx)("p",{className:"col-span-2 capitalize",children:(null===_||void 0===_||null===(r=_.patient)||void 0===r?void 0:r.name)||(null===_||void 0===_?void 0:_.patientName)||(null===(a=_.patientInfo)||void 0===a?void 0:a.name)})]}),((null===_||void 0===_||null===(s=_.patient)||void 0===s?void 0:s.registrationNumber)||(null===(i=_.patientInfo)||void 0===i?void 0:i.registrationNumber)||(null===_||void 0===_?void 0:_.registrationNumber))&&(0,X.jsxs)("div",{className:"grid grid-cols-3",children:[(0,X.jsx)("p",{className:"font-semibold",children:"UHID No:"}),(0,X.jsx)("p",{className:"col-span-2 capitalize",children:(null===_||void 0===_||null===(o=_.patient)||void 0===o?void 0:o.registrationNumber)||(null===(l=_.patientInfo)||void 0===l?void 0:l.registrationNumber)||(null===_||void 0===_?void 0:_.registrationNumber)||""})]}),(0,X.jsxs)("div",{className:"grid grid-cols-3",children:[(0,X.jsx)("p",{className:"font-semibold",children:"Age/Gender:"}),(0,X.jsxs)("p",{className:"col-span-2 capitalize",children:[null!==_&&void 0!==_&&null!==(c=_.patient)&&void 0!==c&&c.age||null!==_&&void 0!==_&&_.age||null!==_&&void 0!==_&&null!==(d=_.patientInfo)&&void 0!==d&&d.age?`${(0,M.F1)((null===_||void 0===_||null===(u=_.patient)||void 0===u?void 0:u.age)||(null===_||void 0===_?void 0:_.age)||(null===_||void 0===_||null===(m=_.patientInfo)||void 0===m?void 0:m.age))}`:""," ","/"," ",(null===_||void 0===_||null===(h=_.patient)||void 0===h?void 0:h.gender)||(null===_||void 0===_?void 0:_.gender)||(null===_||void 0===_||null===(p=_.patientInfo)||void 0===p?void 0:p.gender)||""]})]}),P.map((e=>e.paymentNumber)).filter(Boolean).length>0&&(0,X.jsxs)("div",{className:"grid grid-cols-3",children:[(0,X.jsx)("p",{className:"font-semibold",children:"Payment No:"}),(0,X.jsx)("p",{className:"col-span-2 capitalize",children:P.map((e=>e.paymentNumber)).filter(Boolean).join(", ")})]}),(0,X.jsxs)("div",{className:"grid grid-cols-3",children:[(0,X.jsx)("p",{className:"font-semibold",children:"Receipt Date"}),(0,X.jsx)("p",{className:"col-span-2 capitalize",children:(0,Go.GP)(null!==b&&void 0!==b&&b.createdAt?new Date(null===b||void 0===b?void 0:b.createdAt):new Date,"dd-MM-yyyy hh:mm a")})]}),((null===_||void 0===_?void 0:_.procedureName)||(null===(f=_.opdProcedure)||void 0===f?void 0:f.procedureName)||(null===_||void 0===_?void 0:_.operationName))&&(0,X.jsxs)("div",{className:"grid grid-cols-3",children:[(0,X.jsx)("p",{className:"font-semibold",children:null!==_&&void 0!==_&&_.procedureName||null!==(v=_.opdProcedure)&&void 0!==v&&v.procedureName?"Procedure":"Operation"}),(0,X.jsx)("p",{className:"col-span-2 capitalize",children:(null===_||void 0===_?void 0:_.procedureName)||(null===(g=_.opdProcedure)||void 0===g?void 0:g.procedureName)||(null===_||void 0===_?void 0:_.operationName)||""})]}),(null===_||void 0===_||null===(x=_.patientInfo)||void 0===x?void 0:x.ipdNumber)&&(0,X.jsxs)("div",{className:"grid grid-cols-3",children:[(0,X.jsx)("p",{className:"font-semibold",children:"OPD/IPD No:"}),(0,X.jsx)("p",{className:"col-span-2 capitalize",children:(null===_||void 0===_||null===(y=_.patientInfo)||void 0===y?void 0:y.ipdNumber)||""})]}),_.labNumber&&(0,X.jsxs)("div",{className:"grid grid-cols-3",children:[(0,X.jsx)("p",{className:"font-semibold",children:"Lab No:"}),(0,X.jsx)("p",{className:"col-span-2 capitalize",children:_.labNumber||""})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-12 pb-2 px-4 font-semibold border-black border-b-[1px] ",children:[(0,X.jsx)("div",{className:"col-span-2",children:"S.No."}),(0,X.jsx)("div",{className:"col-span-8",children:"Particular"}),(0,X.jsx)("div",{className:"col-span-2 text-right",children:"Amount"})]}),P.map(((e,t)=>{return(0,X.jsxs)("div",{className:"grid grid-cols-12 pb-2 px-4 border-black border-b-[1px]",children:[(0,X.jsx)("div",{className:"col-span-2",children:t+1}),(0,X.jsx)("div",{className:"col-span-8",children:null!==_&&void 0!==_&&_.procedureName||null!==_&&void 0!==_&&_.operationName?`Payment for ${(null===_||void 0===_?void 0:_.procedureName)||(null===_||void 0===_?void 0:_.operationName)}`:"Deposit"}),(0,X.jsx)("div",{className:"col-span-2 text-right",children:(n=null===e||void 0===e?void 0:e.amount,null===n||void 0===n?void 0:n.toLocaleString("en-IN"))})]},t);var n})),(0,X.jsxs)("div",{className:"border-black border-b-[1px] px-4 py-2",children:["Amount(In Words) :"," ",(0,M.GF)(P.reduce(((e,t)=>e+((null===t||void 0===t?void 0:t.amount)||0)),0))," ","Only."]}),(0,X.jsx)("div",{className:"px-4 py-2 border-black border-b-[1px] flex flex-row gap-2",children:P.map(((e,t)=>(0,X.jsxs)("div",{children:[(0,X.jsxs)("p",{children:["Payment ",t+1," Method :"," ",(null===e||void 0===e?void 0:e.paymentMethod)||(null===e||void 0===e?void 0:e.method)||"N/A"]}),(null===e||void 0===e?void 0:e.utr)&&(0,X.jsxs)("p",{children:["UTR No. ",t+1," : ",null===e||void 0===e?void 0:e.utr]})]},t)))}),(0,X.jsxs)("div",{className:"grid grid-cols-3 h-[60px]",children:[(0,X.jsx)("div",{className:"col-span-2 pl-4 flex items-center text-2xl justify-center",style:{fontFamily:"cursive"},children:"Thank you"}),(0,X.jsx)("div",{className:"border-black border-l-[1px] pl-4 flex items-end pb-2 justify-center",children:"Signatory Authority"})]})]})})})]})},el=e=>{var n,r,a,s,i,o,l,c,d,u,m,h;let{isOpen:p,setShowBillModal:f,billData:v,hospitalInfo:g,completedBill:x}=e;const y=(0,t.useRef)(),[N,_]=(0,t.useState)(!1),S=(0,qn.useReactToPrint)({content:()=>y.current,onBeforeGetContent:()=>(_(!0),new Promise((e=>{setTimeout((()=>{_(!1),e()}),0)}))),pageStyle:"\n      @media print {\n        @page {\n          size: A4;\n          margin: 20mm;\n        }\n        body {\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-only {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n        .print-content {\n          position: relative;\n          min-height: 100vh;\n          padding: 20px;\n        }\n      }\n    "}),E=e=>e?e.amountPaid===e.totalAmount?"Paid":"Due":"N/A";(0,t.useEffect)((()=>(p||(document.body.style.pointerEvents="",document.body.style="",setTimeout((()=>{document.body.style.pointerEvents="",document.body.style=""}),300)),()=>{document.body.style.pointerEvents="",document.body.style=""})),[p]);const C=()=>{f(!1),document.body.style.pointerEvents="",document.body.style="",setTimeout((()=>{document.body.style.pointerEvents="",document.body.style=""}),300)},D=(null===x||void 0===x?void 0:x.bill)||v,k=(null===x||void 0===x?void 0:x.patient)||(null===v||void 0===v?void 0:v.patientInfo),A=(0,j.d4)((e=>e.templates.headerTemplateArray)),P=(null===A||void 0===A?void 0:A.length)>0?A[0].value:Kn.h,O=(0,Gn.G)(P||Kn.h);return(0,X.jsx)(Io.lG,{open:p,onOpenChange:C,children:(0,X.jsxs)(Io.Cf,{className:"max-w-3xl max-h-[90vh] overflow-visible rounded-lg",children:[(0,X.jsxs)(b.F,{className:"max-h-[80vh]",children:[(0,X.jsxs)("div",{ref:y,className:N?"print-content":"",children:[(0,X.jsx)("div",{className:"hidden print:block mb-2",children:(0,X.jsx)(O,{hospitalInfo:g})}),(0,X.jsxs)("div",{className:"print:pb-6",children:[(0,X.jsx)("div",{className:"no-print",children:(0,X.jsx)(Io.c7,{className:"pb-2",children:(0,X.jsx)(Io.L3,{children:"Bill Details"})})}),(0,X.jsxs)("div",{className:"grid gap-2 py-1",children:[(0,X.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Name:"}),(0,X.jsx)("p",{children:(null===k||void 0===k?void 0:k.name)||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Age/Gender:"}),(0,X.jsxs)("p",{children:[(0,M.F1)(null===k||void 0===k?void 0:k.age)||"N/A","/",(null===k||void 0===k?void 0:k.gender)||"N/A"]})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"UHID No:"}),(0,X.jsx)("p",{children:(null===k||void 0===k?void 0:k.registrationNumber)||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"IPD No:"}),(0,X.jsx)("p",{children:(null===x||void 0===x||null===(n=x.admissionRecord)||void 0===n?void 0:n.ipdNumber)||(null===x||void 0===x||null===(r=x.admission)||void 0===r?void 0:r.ipdNumber)||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Contact:"}),(0,X.jsx)("p",{children:(null===k||void 0===k?void 0:k.phone)||(null===k||void 0===k?void 0:k.contactNumber)||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Address:"}),(0,X.jsx)("p",{children:(null===k||void 0===k?void 0:k.address)||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Invoice Number:"}),(0,X.jsx)("p",{children:(null===D||void 0===D?void 0:D.invoiceNumber)||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Date:"}),(0,X.jsx)("p",{children:null!==D&&void 0!==D&&D.createdAt?(0,Go.GP)(new Date(null===D||void 0===D?void 0:D.createdAt),"dd/MM/yyyy"):"N/A"})]})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[((null===(a=x.admissionRecord)||void 0===a?void 0:a.operationName)||(null===(s=x.admission)||void 0===s?void 0:s.operationName))&&(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Operation:"}),(null===(i=x.admissionRecord)||void 0===i?void 0:i.operationName)||(null===(o=x.admission)||void 0===o?void 0:o.operationName)]}),(0,X.jsx)("div",{className:"mx-auto w-full max-w-md",children:(0,X.jsxs)("div",{className:"border-2 p-6 rounded-lg shadow-sm",children:[(0,X.jsxs)("div",{className:"text-center mb-4",children:[(0,X.jsx)("h3",{className:"text-xl font-semibold",children:"Payment Receipt"}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:null!==D&&void 0!==D&&D.createdAt?(0,Go.GP)(new Date(D.createdAt),"dd/MM/yyyy hh:mm a"):"N/A"})]}),(0,X.jsxs)("div",{children:[(0,X.jsxs)("div",{className:"flex justify-between items-center text-base",children:[(0,X.jsx)("span",{className:"text-gray-700 font-medium",children:"Sub Total:"}),(0,X.jsxs)("span",{className:"font-medium",children:["\u20b9",((null===D||void 0===D?void 0:D.subtotal)||0).toFixed(2)]})]}),(0,X.jsxs)("div",{className:"flex justify-between items-center text-base",children:[(0,X.jsx)("span",{className:"text-gray-700 font-medium",children:"Discount:"}),(0,X.jsxs)("span",{className:"font-medium",children:["\u20b9",((null===D||void 0===D?void 0:D.additionalDiscount)||0).toFixed(2)]})]}),(0,X.jsxs)("div",{className:"flex justify-between items-center text-base border-t-2 border-gray-200 pt-2",children:[(0,X.jsx)("span",{className:"font-semibold",children:"Net Total:"}),(0,X.jsxs)("span",{className:"font-semibold",children:["\u20b9",(((null===D||void 0===D?void 0:D.subtotal)||0)-((null===D||void 0===D?void 0:D.additionalDiscount)||0)).toFixed(2)]})]}),(0,X.jsxs)("div",{className:"flex justify-between items-center text-base",children:[(0,X.jsx)("span",{className:"text-gray-700 font-medium",children:"Paid:"}),(0,X.jsxs)("span",{className:"text-green-600 font-medium",children:["\u20b9",((null===D||void 0===D?void 0:D.amountPaid)||0).toFixed(2)]})]}),(0,X.jsxs)("div",{className:"flex justify-between items-center text-base border-t-2 border-gray-200 pt-2",children:[(0,X.jsx)("span",{className:"font-semibold",children:"Balance:"}),(0,X.jsxs)("span",{className:"text-red-600 font-semibold",children:["\u20b9",(((null===D||void 0===D?void 0:D.totalAmount)||0)-((null===D||void 0===D?void 0:D.amountPaid)||0)).toFixed(2)]})]}),(0,X.jsxs)("div",{className:"text-center mt-4 pt-2 border-t-2 border-gray-200",children:[(0,X.jsxs)("div",{className:"font-medium text-base",children:[(0,X.jsx)("span",{children:"Status: "}),(0,X.jsx)("span",{className:"Paid"===E(D)?"text-green-600":"text-red-600",children:E(D)})]}),(0,X.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,X.jsx)("p",{children:"Amount in words:"}),(0,X.jsxs)("p",{className:"font-medium",children:[(0,M.GF)((null===D||void 0===D?void 0:D.totalAmount)||0)," Rupees Only"]})]})]})]})]})}),(0,X.jsxs)("div",{className:"mt-4",children:[(0,X.jsxs)("div",{className:"flex flex-row items-center mb-2 w-auto",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold ",children:"Payment History"}),(null===x||void 0===x||null===(l=x.payment)||void 0===l?void 0:l.length)>0&&(0,X.jsx)(Qo,{payments:x.payment,billData:{...null===x||void 0===x?void 0:x.bill,patient:null===x||void 0===x?void 0:x.patient,operationName:(null===x||void 0===x||null===(c=x.admissionRecord)||void 0===c?void 0:c.operationName)||(null===x||void 0===x||null===(d=x.admission)||void 0===d?void 0:d.operationName)},styleData:!0})]}),(null===D||void 0===D||null===(u=D.payments)||void 0===u?void 0:u.length)>0||(null===x||void 0===x||null===(m=x.payment)||void 0===m?void 0:m.length)>0?(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[80px] h-[30px]",children:"Date"}),(0,X.jsx)(Wo.nd,{className:"w-[80px] h-[30px]",children:"Time"}),(0,X.jsx)(Wo.nd,{className:"h-[30px]",children:"Amount"}),(0,X.jsx)(Wo.nd,{className:"h-[30px]",children:"Method"}),(0,X.jsx)(Wo.nd,{className:"no-print h-[30px]",children:"Receipt"})]})}),(0,X.jsx)(Wo.BF,{children:null===(h=(null===x||void 0===x?void 0:x.payment)||(null===D||void 0===D?void 0:D.payments))||void 0===h?void 0:h.map(((e,t)=>{var n,r,a,s;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-xs",children:(0,Go.GP)(new Date(e.createdAt),"dd/MM/yyyy")}),(0,X.jsx)(Wo.nA,{className:"text-xs",children:(0,Go.GP)(new Date(e.createdAt),"hh:mm a")}),(0,X.jsxs)(Wo.nA,{className:"text-xs font-medium",children:["\u20b9",(null===(n=e.amount)||void 0===n?void 0:n.toFixed(2))||"0.00"]}),(0,X.jsx)(Wo.nA,{className:"text-xs",children:e.paymentMethod||"N/A"}),(0,X.jsx)(Wo.nA,{className:"no-print",children:(0,X.jsx)(Qo,{payment:null===x||void 0===x||null===(r=x.payment)||void 0===r?void 0:r[0],billData:{...null===x||void 0===x?void 0:x.bill,patient:null===x||void 0===x?void 0:x.patient,operationName:(null===x||void 0===x||null===(a=x.admissionRecord)||void 0===a?void 0:a.operationName)||(null===x||void 0===x||null===(s=x.admission)||void 0===s?void 0:s.operationName)}})})]},t)}))})]}):(0,X.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-500 py-4",children:[(0,X.jsx)(Jo,{size:18}),(0,X.jsx)("span",{children:"No payment history found"})]})]})]})]})]}),(0,X.jsxs)("div",{className:"flex flex-col-reverse gap-1 sm:flex-row sm:space-y-0 sm:space-x-2 mt-4 justify-end",children:[(0,X.jsx)(w.$,{type:"button",variant:"secondary",onClick:C,children:"Close"}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",onClick:S,children:[(0,X.jsx)(Xn.A,{className:"mr-2 h-4 w-4"}),"Print Bill"]})]})]}),(0,X.jsxs)("button",{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",onClick:C,children:[(0,X.jsx)(T.A,{className:"h-4 w-4"}),(0,X.jsx)("span",{className:"sr-only",children:"Close"})]})]})})};var tl="Tabs",[nl,rl]=(0,V.A)(tl,[vr]),al=vr(),[sl,il]=nl(tl),ol=t.forwardRef(((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:s,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=(0,er.jH)(o),[u,m]=(0,Zn.i)({prop:r,onChange:a,defaultProp:s});return(0,X.jsx)(sl,{scope:n,baseId:(0,ar.B)(),value:u,onValueChange:m,orientation:i,dir:d,activationMode:l,children:(0,X.jsx)(Jn.sG.div,{dir:d,"data-orientation":i,...c,ref:t})})}));ol.displayName=tl;var ll="TabsList",cl=t.forwardRef(((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,s=il(ll,n),i=al(n);return(0,X.jsx)(Sr,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:r,children:(0,X.jsx)(Jn.sG.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})}));cl.displayName=ll;var dl="TabsTrigger",ul=t.forwardRef(((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...s}=e,i=il(dl,n),o=al(n),l=pl(i.baseId,r),c=fl(i.baseId,r),d=r===i.value;return(0,X.jsx)(Er,{asChild:!0,...o,focusable:!a,active:d,children:(0,X.jsx)(Jn.sG.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...s,ref:t,onMouseDown:(0,K.m)(e.onMouseDown,(e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(r)})),onKeyDown:(0,K.m)(e.onKeyDown,(e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(r)})),onFocus:(0,K.m)(e.onFocus,(()=>{const e="manual"!==i.activationMode;d||a||!e||i.onValueChange(r)}))})})}));ul.displayName=dl;var ml="TabsContent",hl=t.forwardRef(((e,n)=>{const{__scopeTabs:r,value:a,forceMount:s,children:i,...o}=e,l=il(ml,r),c=pl(l.baseId,a),d=fl(l.baseId,a),u=a===l.value,m=t.useRef(u);return t.useEffect((()=>{const e=requestAnimationFrame((()=>m.current=!1));return()=>cancelAnimationFrame(e)}),[]),(0,X.jsx)(or.C,{present:s||u,children:t=>{let{present:r}=t;return(0,X.jsx)(Jn.sG.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!r,id:d,tabIndex:0,...o,ref:n,style:{...e.style,animationDuration:m.current?"0s":void 0},children:r&&i})}})}));function pl(e,t){return`${e}-trigger-${t}`}function fl(e,t){return`${e}-content-${t}`}hl.displayName=ml;var vl=cl,gl=ul,xl=hl;const yl=ol,bl=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(vl,{ref:t,className:(0,Ee.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...r})}));bl.displayName=vl.displayName;const jl=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(gl,{ref:t,className:(0,Ee.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...r})}));jl.displayName=gl.displayName;const wl=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(xl,{ref:t,className:(0,Ee.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...r})}));wl.displayName=xl.displayName;const Nl=t.memo((e=>{let{id:n,label:r,type:a="text",value:s,onChange:i,error:o,...l}=e;const[c,d]=(0,t.useState)(!1),u=o&&!s&&!c;return(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Vn.p,{id:n,type:a,value:s,onChange:i,onFocus:()=>d(!0),onBlur:()=>d(!1),className:"peer px-3 py-2 block w-full border rounded-md text-gray-900 focus:ring-blue-500 focus:border-blue-500 bg-white "+(u?"border-red-500":"border-gray-300"),placeholder:" ",...l,autoComplete:"none"}),(0,X.jsxs)(Ks.J,{htmlFor:n,className:`absolute text-xs duration-300 transform -translate-y-1/2 left-3\n          peer-placeholder-shown:text-sm peer-placeholder-shown:top-1/2\n          peer-focus:text-xs peer-focus:top-0 peer-focus:-translate-y-1/2\n          ${s||c?"top-0 -translate-y-1/2 text-xs":"top-1/2"}\n          ${u?"text-red-500":"text-gray-500"}\n          bg-white px-1`,children:[r," ",u&&(0,X.jsx)("span",{className:"text-red-500 ml-1",children:"*Required"})]})]})}));var _l=__webpack_require__(1844),Sl=__webpack_require__(8848);function El(e,t,n){const[r,a]=(0,_l.x)(n?.in,e,t),s=Cl(r,a),i=Math.abs((0,Sl.m)(r,a));r.setDate(r.getDate()-s*i);const o=s*(i-Number(Cl(r,a)===-s));return 0===o?0:o}function Cl(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}var Dl=__webpack_require__(3168),Tl=__webpack_require__(3124),kl="Checkbox",[Al,Pl]=(0,V.A)(kl),[Ol,Rl]=Al(kl),Ml=t.forwardRef(((e,n)=>{const{__scopeCheckbox:r,name:a,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[h,p]=t.useState(null),f=(0,q.s)(n,(e=>p(e))),v=t.useRef(!1),g=!h||(u||!!h.closest("form")),[x=!1,y]=(0,Zn.i)({prop:s,defaultProp:i,onChange:d}),b=t.useRef(x);return t.useEffect((()=>{const e=h?.form;if(e){const t=()=>y(b.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}}),[h,y]),(0,X.jsxs)(Ol,{scope:r,state:x,disabled:l,children:[(0,X.jsx)(Jn.sG.button,{type:"button",role:"checkbox","aria-checked":Bl(x)?"mixed":x,"aria-required":o,"data-state":Wl(x),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:f,onKeyDown:(0,K.m)(e.onKeyDown,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:(0,K.m)(e.onClick,(e=>{y((e=>!!Bl(e)||!e)),g&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())}))}),g&&(0,X.jsx)(Fl,{control:h,bubbles:!v.current,name:a,value:c,checked:x,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:!Bl(i)&&i})]})}));Ml.displayName=kl;var Il="CheckboxIndicator",Ll=t.forwardRef(((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,s=Rl(Il,n);return(0,X.jsx)(or.C,{present:r||Bl(s.state)||!0===s.state,children:(0,X.jsx)(Jn.sG.span,{"data-state":Wl(s.state),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})}));Ll.displayName=Il;var Fl=e=>{const{control:n,checked:r,bubbles:a=!0,defaultChecked:s,...i}=e,o=t.useRef(null),l=(0,Dl.Z)(r),c=(0,Tl.X)(n);t.useEffect((()=>{const e=o.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==r&&n){const t=new Event("click",{bubbles:a});e.indeterminate=Bl(r),n.call(e,!Bl(r)&&r),e.dispatchEvent(t)}}),[l,r,a]);const d=t.useRef(!Bl(r)&&r);return(0,X.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??d.current,...i,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Bl(e){return"indeterminate"===e}function Wl(e){return Bl(e)?"indeterminate":e?"checked":"unchecked"}var $l=Ml,Ul=Ll;const zl=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)($l,{ref:t,className:(0,Ee.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...r,children:(0,X.jsx)(Ul,{className:(0,Ee.cn)("flex items-center justify-center text-current"),children:(0,X.jsx)(Rs.Srz,{className:"h-4 w-4"})})})}));zl.displayName=$l.displayName;const Hl=t.forwardRef(((e,n)=>{let{labData:r,hospital:a}=e;const s=(0,j.d4)((e=>e.templates.headerTemplateArray)),i=(0,j.d4)((e=>e.templates.labBillingTemplate)),o=(null===s||void 0===s?void 0:s.length)>0?s[0].value:Kn.h,l=(0,Gn.G)(o||Kn.h),c=new Function("React","HospitalHeader",`return (${i||'\n(hospital, labData,ref) => {\n  const formatDate = (date) => {\n    if (!date) return "--";\n    return new Date(date).toLocaleDateString(\'en-IN\', { day: \'2-digit\', month: \'2-digit\', year: \'numeric\' }).split(\'/\').join(\'-\');\n  };\n  \n  return React.createElement("div", { ref:ref,\n    className: "relative font-[Tinos] bg-white w-[210mm] min-h-[148mm] mx-auto box-border p-[5mm] print:absolute print:left-0 print:top-0 print:w-full print:[&_*]:visible print:visible print:[&_.no-print]:hidden"\n  },\n    React.createElement("div", { className: "border-[1px] border-black mt-5" },\n      // Header Section\n      React.createElement("div", { className: "print:block border-b-[1px] border-black p-4" },\n        React.createElement(HospitalHeader, { hospitalInfo: hospital })\n      ),\n\n    \n\n      // Patient Details Section\n      React.createElement("div", { className: "grid grid-cols-2 py-2 px-4 border-black border-b-[1px]" },\n        React.createElement("div", { className: "grid grid-cols-3" },\n          React.createElement("p", { className: "font-semibold" }, "Patient Name:"),\n          React.createElement("p", { className: "col-span-2 capitalize" }, labData?.patientName || "N/A")\n        ),\n        React.createElement("div", { className: "grid grid-cols-3" },\n          React.createElement("p", { className: "font-semibold" }, "UHID No:"),\n          React.createElement("p", { className: "col-span-2" }, labData?.registrationNumber || "N/A")\n        ),\n        React.createElement("div", { className: "grid grid-cols-3" },\n          React.createElement("p", { className: "font-semibold" }, "Age/Gender:"),\n          React.createElement("p", { className: "col-span-2 capitalize" }, \n            `${labData?.age ? `${labData.age}` : \'N/A\'} / ${labData?.gender || \'N/A\'}`\n          )\n        ),\n        React.createElement("div", { className: "grid grid-cols-3" },\n          React.createElement("p", { className: "font-semibold" }, "Bill Date:"),\n          React.createElement("p", { className: "col-span-2" }, \n            formatDate(labData?.bookingDate)\n          )\n        ),\n        React.createElement("div", { className: "grid grid-cols-3" },\n          React.createElement("p", { className: "font-semibold" }, "Lab No:"),\n          React.createElement("p", { className: "col-span-2" }, labData?.labNumber || "N/A")\n        ),\n        React.createElement("div", { className: "grid grid-cols-3" },\n          React.createElement("p", { className: "font-semibold" }, "Invoice No:"),\n          React.createElement("p", { className: "col-span-2" }, \n            labData?.billDetails?.invoiceNumber || labData?.invoiceNumber || "N/A"\n          )\n        )\n      ),\n\n      // Tests Table Header\n      React.createElement("div", { className: "grid grid-cols-12 pb-2 px-4 font-semibold border-black border-b-[1px]" },\n        React.createElement("div", { className: "col-span-2" }, "S.No."),\n        React.createElement("div", { className: "col-span-8" }, "Test Description"),\n        React.createElement("div", { className: "col-span-2 text-right" }, "Amount (\u20b9)")\n      ),\n\n      // Tests Table Body\n      React.createElement("div", { className: "border-black border-b-[1px]" },\n        (labData?.labTests || []).map((test, index) =>\n          React.createElement("div", { \n            key: index,\n            className: "grid grid-cols-12 pb-2 px-4" + (index < (labData?.labTests?.length || 0) - 1 ? " border-b border-gray-200" : "")\n          },\n            React.createElement("div", { className: "col-span-2" }, index + 1),\n            React.createElement("div", { className: "col-span-8" }, test.name),\n            React.createElement("div", { className: "col-span-2 text-right" },\n              test.price?.toLocaleString(\'en-IN\') || "0.00"\n            )\n          )\n        )\n      ),\n\n      // Amount in Words\n      React.createElement("div", { className: "border-black border-b-[1px] px-4 py-2 text-right flex flex-col font-bold" },\n        React.createElement("span", null, \n          "Sub Total: ", \n          labData?.paymentInfo?.totalAmount?.toLocaleString(\'en-IN\') || "0.00"\n        ),\n        React.createElement("span", null, \n          "Discount: ", \n          labData?.paymentInfo?.additionalDiscount?.toLocaleString(\'en-IN\') || "0.00"\n        ),\n        React.createElement("span", { className: "font-medium" }, \n          "Net Amount: ",\n          ((labData?.paymentInfo?.totalAmount || 0) - (labData?.paymentInfo?.additionalDiscount || 0))?.toLocaleString(\'en-IN\') || "0.00"\n        ),\n        React.createElement("span", { className: "text-gray-600" }, \n          "Amount Paid: ",\n          labData?.paymentInfo?.amountPaid?.toLocaleString(\'en-IN\') || "0.00"\n        ),\n        React.createElement("span", { className: "font-semibold" }, \n          "Balance Due: ",\n          React.createElement("span", { \n            className: "font-bold " + ((labData?.paymentInfo?.balanceDue || 0) > 0 ? \'text-red-600\' : \'text-green-600\')\n          }, \n            "\u20b9", labData?.paymentInfo?.balanceDue?.toLocaleString(\'en-IN\') || "0.00"\n          )\n        )\n      ),\n       \n\n      // Payment Details\n     \n\n      // Signature Section\n      React.createElement("div", { className: "grid grid-cols-3 h-[40px]" },\n        React.createElement("div", { \n          className: "col-span-2 pl-4 flex items-center text-2xl justify-center",\n          style: { fontFamily: \'cursive\' }\n        }, "Thank you"),\n        React.createElement("div", { \n          className: "border-black border-l-[1px] pl-4 flex items-end pb-2 justify-center"\n        }, "Signatory Authority")\n      )\n    )\n  );\n}'});`);try{return c(t,l)(a,{...r,age:(0,M.F1)(r.age)},n)}catch(d){return console.error("Error rendering dynamic lab report:",d),t.createElement("div",null,"Error rendering lab report template")}})),Vl=e=>{var n,r,a,s,i,o,l,c,d;let{isOpen:u,setShowModal:m,labData:h,hospitalInfo:p}=e;const f=(0,t.useRef)(),v=(0,t.useRef)(),[g,x]=(0,t.useState)(!1),[y,N]=(0,t.useState)([]),[_,S]=(0,t.useState)(!0),E=Ko("(max-width: 640px)");t.useEffect((()=>{null!==h&&void 0!==h&&h.labTests&&N(h.labTests.map(((e,t)=>t)))}),[h]),t.useEffect((()=>(u||(document.body.style.pointerEvents="",document.body.style=""),()=>{document.body.style=""})),[u]);const C=(0,qn.useReactToPrint)({content:()=>v.current,onBeforeGetContent:()=>(x(!0),new Promise((e=>{setTimeout((()=>{x(!1),e()}),0)}))),pageStyle:"\n      @media print {\n        @page {\n          size: A5;\n          margin: 0;\n        }\n        body {\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-only {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n      }\n    "}),D=()=>{m(!1),document.body.style.pointerEvents="",document.body.style=""},k=(0,j.d4)((e=>e.templates.headerTemplateArray)),A=(null===k||void 0===k?void 0:k.length)>0?k[0].value:Kn.h,P=(0,Gn.G)(A||Kn.h),O=e=>{switch(e){case"Completed":return"success";case"In Progress":return"warning";case"Registered":case"Pending":return"destructive";default:return"secondary"}};return h?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Io.lG,{open:u,onOpenChange:D,children:(0,X.jsxs)(Io.Cf,{className:"max-w-3xl text-sm max-h-[90vh] overflow-visible rounded-lg",children:[(0,X.jsxs)(b.F,{className:"max-h-[80vh] pr-3",children:[(0,X.jsxs)("div",{ref:f,children:[(0,X.jsx)("div",{className:"hidden print:block mb-2",children:(0,X.jsx)(P,{hospitalInfo:p})}),(0,X.jsxs)("div",{className:"print:pb-6",children:[(0,X.jsx)("div",{className:"no-print",children:(0,X.jsx)(Io.c7,{className:"pb-2",children:(0,X.jsx)(Io.L3,{children:"Lab Registration Details"})})}),(0,X.jsxs)("div",{className:"grid gap-2 py-1",children:[(0,X.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Name:"}),(0,X.jsx)("p",{children:(null===h||void 0===h?void 0:h.patientName)||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Age/Gender:"}),(0,X.jsxs)("p",{children:[(0,M.F1)(null===h||void 0===h?void 0:h.age)||"N/A","/",(null===h||void 0===h?void 0:h.gender)||"N/A"]})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"UHID No:"}),(0,X.jsx)("p",{children:(null===h||void 0===h?void 0:h.registrationNumber)||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Lab No:"}),(0,X.jsx)("p",{children:(null===h||void 0===h?void 0:h.labNumber)||"N/A"})]}),(null===(n=h.billDetails)||void 0===n?void 0:n.invoiceNumber)&&(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Invoice No:"}),(0,X.jsx)("p",{children:null===(r=h.billDetails)||void 0===r?void 0:r.invoiceNumber})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Contact:"}),(0,X.jsx)("p",{children:(null===h||void 0===h?void 0:h.contactNumber)||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Address:"}),(0,X.jsx)("p",{children:(null===h||void 0===h?void 0:h.address)||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Booking Date:"}),(0,X.jsx)("p",{children:null!==h&&void 0!==h&&h.bookingDate?(0,Go.GP)(new Date(h.bookingDate),"dd/MM/yyyy"):"N/A"})]}),((null===h||void 0===h?void 0:h.referredBy)||(null===h||void 0===h?void 0:h.referredByName))&&(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Referred By:"}),(0,X.jsx)("p",{children:(null===h||void 0===h||null===(a=h.referredBy)||void 0===a?void 0:a.name)||h.referredByName||"N/A"})]})]}),(0,X.jsxs)("div",{className:"mt-4",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Lab Tests"}),(0,X.jsxs)(Wo.XI,{className:"border-2 border-gray-200",children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{className:"border-b border-gray-200 bg-gray-200",children:[(0,X.jsx)(Wo.nd,{className:"w-16 hidden print:table-cell",children:"No."}),(0,X.jsx)(Wo.nd,{children:"Test Name"}),(0,X.jsx)(Wo.nd,{children:"Status"}),(0,X.jsx)(Wo.nd,{className:"text-right",children:"Price"})]})}),(0,X.jsxs)(Wo.BF,{children:[null===h||void 0===h||null===(s=h.labTests)||void 0===s?void 0:s.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{className:"border-b border-gray-200",children:[(0,X.jsx)(Wo.nA,{className:"hidden print:table-cell",children:t+1}),(0,X.jsx)(Wo.nA,{children:e.name}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Yo.E,{variant:O(e.reportStatus),children:e.reportStatus})}),(0,X.jsx)(Wo.nA,{className:"text-right",children:(0,M.vv)(e.price)})]},t))),(0,X.jsxs)(Wo.Hj,{className:"font-medium",children:[(0,X.jsx)(Wo.nA,{className:"hidden print:table-cell"}),(0,X.jsx)(Wo.nA,{colSpan:2,className:"text-right",children:"Sub Total:"}),(0,X.jsx)(Wo.nA,{className:"text-right",children:(0,M.vv)(null===h||void 0===h||null===(i=h.labTests)||void 0===i?void 0:i.reduce(((e,t)=>e+(t.price||0)),0))})]})]})]}),(0,X.jsx)("div",{className:"flex justify-end",children:(0,X.jsx)("div",{className:"mt-4 border-2 rounded-lg p-4 bg-gray-50 w-1/2",children:(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsxs)("div",{className:"flex justify-between",children:[(0,X.jsx)("span",{children:"Sub Total:"}),(0,X.jsxs)("span",{children:["\u20b9",null===(o=h.paymentInfo.totalAmount)||void 0===o?void 0:o.toFixed(2)]})]}),(0,X.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,X.jsx)("span",{children:"Discount:"}),(0,X.jsx)("span",{children:(0,M.vv)(h.paymentInfo.additionalDiscount)})]}),(0,X.jsxs)("div",{className:"flex justify-between font-medium border-t pt-2",children:[(0,X.jsx)("span",{children:"Net Amount:"}),(0,X.jsx)("span",{children:(0,M.vv)(h.paymentInfo.totalAmount-h.paymentInfo.additionalDiscount)})]}),(0,X.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,X.jsx)("span",{children:"Amount Paid:"}),(0,X.jsx)("span",{children:(0,M.vv)(h.paymentInfo.amountPaid)})]}),(0,X.jsxs)("div",{className:"flex justify-between text-red-600 font-medium border-t pt-2",children:[(0,X.jsx)("span",{children:"Balance Due:"}),(0,X.jsx)("span",{children:(0,M.vv)(h.paymentInfo.balanceDue)})]})]})})})]}),(0,X.jsxs)("div",{className:"mt-4 "+(_?"":"no-print"),children:[(0,X.jsx)("div",{className:"flex gap-2 items-center",children:(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-2 no-print",children:[(0,X.jsx)(zl,{id:"printPaymentHistory",checked:_,onCheckedChange:S}),(0,X.jsx)(Ks.J,{htmlFor:"printPaymentHistory",children:"Include Payment History in Print"})]})}),(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Payment History"}),(null===h||void 0===h||null===(l=h.payments)||void 0===l?void 0:l.length)>0&&(0,X.jsx)(Qo,{payments:h.payments,billData:h,styleData:!0})]}),(null===h||void 0===h||null===(c=h.payments)||void 0===c?void 0:c.length)>0?(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Date"}),!E&&(0,X.jsx)(Wo.nd,{children:"Time"}),(0,X.jsx)(Wo.nd,{children:"Amount"}),(0,X.jsx)(Wo.nd,{children:"Method"}),(0,X.jsx)(Wo.nd,{className:"no-print",children:"Receipt"})]})}),(0,X.jsx)(Wo.BF,{children:null===(d=h.payments)||void 0===d?void 0:d.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:(0,Go.GP)(new Date(e.createdAt),"dd/MM/yyyy")}),!E&&(0,X.jsx)(Wo.nA,{children:(0,Go.GP)(new Date(e.createdAt),"hh:mm a")}),(0,X.jsx)(Wo.nA,{children:(0,M.vv)(e.amount)}),(0,X.jsx)(Wo.nA,{children:e.paymentMethod}),(0,X.jsx)(Wo.nA,{className:"no-print",children:(0,X.jsx)(Qo,{payment:e,billData:h})})]},t)))})]}):(0,X.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-500 py-4",children:[(0,X.jsx)(Jo,{size:18}),(0,X.jsx)("span",{children:"No payment history found"})]})]}),(null===h||void 0===h?void 0:h.notes)&&(0,X.jsxs)("div",{className:"mt-4",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Notes"}),(0,X.jsx)("p",{className:"text-gray-700",children:h.notes})]})]})]})]}),(0,X.jsxs)("div",{className:"flex flex-col-reverse gap-1 sm:flex-row sm:space-y-0 sm:space-x-2 mt-4 justify-end",children:[(0,X.jsx)(w.$,{type:"button",variant:"secondary",onClick:D,children:"Close"}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",onClick:C,children:[(0,X.jsx)(Xn.A,{className:"mr-2 h-4 w-4"}),"Print Bill"]})]})]}),(0,X.jsxs)("button",{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",onClick:D,children:[(0,X.jsx)(T.A,{className:"h-4 w-4"}),(0,X.jsx)("span",{className:"sr-only",children:"Close"})]})]})}),(0,X.jsx)("div",{style:{display:"none"},children:(0,X.jsx)(Hl,{ref:v,labData:h,hospital:p})})]}):null},ql=[{name:"Cash"},{name:"UPI"},{name:"Card"},{name:"Insurance"}];function Gl(e){var n,r;let{open:a,onOpenChange:s,patientData:i}=e;const o=(0,j.wA)(),{toast:l}=(0,H.dj)(),c=Ko("(max-width: 640px)"),[d,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(!1),[v,g]=(0,t.useState)(null),{createRegistrationStatus:x,error:y}=(0,j.d4)((e=>e.lab)),b=null===(n=[...(0,j.d4)((e=>e.templates.labTestsTemplate))])||void 0===n?void 0:n.filter((e=>"inactive"!==(null===e||void 0===e?void 0:e.status))).map((e=>({name:(null===e||void 0===e?void 0:e.name)||e,rate:null===e||void 0===e?void 0:e.rate}))),N=(0,j.d4)((e=>e.staff.doctors)),_=(0,j.d4)((e=>e.departments.departments)),S=(0,j.d4)((e=>e.hospital.hospitalInfo)),E={name:"",registrationNumber:"",age:"",dateOfBirth:"",gender:"",contactNumber:"",email:"",address:"",guardianName:"",relation:"",bloodType:"",patientType:"LAB",paymentInfo:{totalAmount:0,amountPaid:0,paymentMethod:[],additionalDiscount:""},upgradegenReg:!1,referredByName:"",labTests:[],referredBy:{},department:1===_.length?_[0].name:"",notes:"",bookingDate:(new Date).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")},[C,D]=(0,t.useState)(E),[k,P]=(0,t.useState)({}),O=e=>{const{id:t,value:n}=e.target;D((e=>{const r=t.split("."),a={...e};let s=a;for(let t=0;t<r.length-1;t++)s[r[t]]={...s[r[t]]},s=s[r[t]];return s[r[r.length-1]]=n,a}))},[R,M]=(0,t.useState)(0);(0,t.useEffect)((()=>{const e=C.paymentInfo.paymentMethod.reduce(((e,t)=>e+(t.amount||0)),0);D((t=>({...t,paymentInfo:{...t.paymentInfo,amountPaid:e}})))}),[C.paymentInfo.paymentMethod]);const I=()=>{s(!1),setTimeout((()=>{document.body.style=""}),500),D(E),g(null)};return(0,t.useEffect)((()=>{a||(D(E),P({}),g(null),setTimeout((()=>{document.body.style=""}),500))}),[a]),(0,t.useEffect)((()=>{"succeeded"===x?(l({title:"Registration Successful",description:"Lab registration completed successfully",variant:"success"}),h(m),u(!0),s(!1),o(an())):"failed"===x&&(l({title:"Registration Failed",description:y||"Could not complete lab registration",variant:"destructive"}),o(an()))}),[x,y,o,l,s]),(0,t.useEffect)((()=>{i&&(D((e=>{var t,n;return{...e,name:i.patient.name,registrationNumber:i.registrationNumber,age:i.patient.age,gender:i.patient.gender,contactNumber:i.patient.contactNumber,address:i.patient.address,guardianName:(null===(t=i.patient.guardianDetails)||void 0===t?void 0:t.guardianName)||"",relation:(null===(n=i.patient.guardianDetails)||void 0===n?void 0:n.relation)||"",lastVisitType:i.type,lastVisit:i.bookingDate,lastVisitId:i._id}})),g({...i.patient,lastVisit:i.bookingDate,lastVisitType:i.type}))}),[i]),(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Io.lG,{open:a,onOpenChange:I,children:(0,X.jsxs)(Io.Cf,{onInteractOutside:e=>e.preventDefault(),className:`${c?"w-[95vw] p-4":"max-w-[1000px]"} h-[${c?"70vh":"60vh"}] overflow-visible px-4`,children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Lab Registration"}),(0,X.jsxs)(Io.rr,{className:"hidden md:flex justify-between",children:[(0,X.jsx)("p",{children:"Register patient for laboratory tests"}),v&&v.lastVisit&&(0,X.jsxs)("span",{className:"text-black font-semibold",children:["Last Visit:"," ",(0,Go.GP)(new Date(v.lastVisit),"dd MMM yyyy")," [",(0,X.jsxs)("span",{className:"capitalize "+(El(new Date,new Date(v.lastVisit))>14?"text-red-500":"text-green-500"),children:[El(new Date,new Date(v.lastVisit))," ","days ago"]}),"]"]})]})]}),(0,X.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return C.name||(e.name="Name is required"),C.age||(e.age="Age is required"),C.gender||(e.gender="Gender is required"),C.contactNumber||(e.contactNumber="Contact number is required"),0===C.labTests.length&&(e.labTests="At least one test must be selected"),P(e),0===Object.keys(e).length})())try{const e=Object.entries(C).reduce(((e,t)=>{let[n,r]=t;if(Array.isArray(r))return r.length>0&&(e[n]=r),e;if(r&&"object"===typeof r){const t=Object.entries(r).reduce(((e,t)=>{let[n,r]=t;return Array.isArray(r)?r.length>0&&(e[n]=r):""!==r&&null!==r&&void 0!==r&&(e[n]=r),e}),{});Object.keys(t).length>0&&(e[n]=t)}else""!==r&&null!==r&&void 0!==r&&(e[n]=r);return e}),{}),t=await o(Yt(e)).unwrap();l({title:"Registration Successful",description:"Lab registration completed successfully",variant:"success"}),h(t),u(!0),s(!1)}catch(y){l({title:"Registration Failed",description:y||"Could not complete lab registration",variant:"destructive"})}},className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,X.jsx)("div",{className:"space-y-4",children:(0,X.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,X.jsx)(Nl,{id:"name",label:"Full Name",value:C.name,onChange:O,error:k.name}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Nl,{id:"registrationNumber",label:"UHID Number",value:C.registrationNumber,onChange:O,className:"pr-10"}),(0,X.jsx)("button",{type:"button",onClick:async()=>{if(C.registrationNumber){f(!0);try{var e,t,n;const l=await o((0,Be.bW)({searchQuery:C.registrationNumber.trim()})).unwrap();let u=null===(e=l.results)||void 0===e?void 0:e.patients[0];if((null===(t=l.results)||void 0===t||null===(n=t.patients)||void 0===n?void 0:n.length)>0){var r,a,s,i,c,d;g(u);const e=(null===(r=u.visits[0])||void 0===r?void 0:r.guardianName)||(null===(a=u.admissionDetails[0])||void 0===a?void 0:a.guardianName)||(null===(s=u.guardianDetails)||void 0===s?void 0:s.guardianName)||"",t=(null===(i=u.visits[0])||void 0===i?void 0:i.relation)||(null===(c=u.admissionDetails[0])||void 0===c?void 0:c.relation)||(null===(d=u.guardianDetails)||void 0===d?void 0:d.relation)||"";D((n=>({...n,name:u.name,age:u.age,gender:u.gender,lastVisitType:u.lastVisitType,lastVisit:u.lastVisit,lastVisitId:((e,t,n,r)=>{const a=null===(e=u.visits)||void 0===e?void 0:e[(null===(t=u.visits)||void 0===t?void 0:t.length)-1],s=null===(n=u.admissionDetails)||void 0===n?void 0:n[(null===(r=u.admissionDetails)||void 0===r?void 0:r.length)-1];return a||s?a?s?new Date(a.bookingDate)>new Date(s.bookingDate)?a._id:s._id:null===a||void 0===a?void 0:a._id:null===s||void 0===s?void 0:s._id:null})(),contactNumber:u.contactNumber,address:u.address,guardianName:e,relation:t})))}}catch(y){l({title:"Search Failed",description:"Could not find patient with this registration number",variant:"destructive"})}finally{f(!1)}}},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",children:(0,X.jsx)(oo.A,{className:"h-4 w-4"})})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(Nl,{id:"age",label:"Age",type:"text",value:C.age,onChange:e=>{const t=e.target.value;D((e=>({...e,age:t,dateOfBirth:""})))},error:k.age}),(0,X.jsxs)(A.l6,{id:"gender",value:C.gender,onValueChange:e=>O({target:{id:"gender",value:e}}),children:[(0,X.jsx)(A.bq,{className:k.gender?"border-red-500":"",children:(0,X.jsx)(A.yv,{placeholder:"Gender"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Male",children:"Male"}),(0,X.jsx)(A.eb,{value:"Female",children:"Female"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]})]})]}),(0,X.jsx)(Nl,{id:"contactNumber",label:"Contact Number",value:C.contactNumber,onChange:O,error:k.contactNumber})]})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)(Xo.T,{id:"address",placeholder:"Address",value:C.address,onChange:O,className:"min-h-9 h-9 no-scrollbar"}),(0,X.jsxs)("div",{className:"grid grid-cols-[1fr_2fr] gap-2",children:[(0,X.jsxs)(A.l6,{id:"relation",value:C.relation,onValueChange:e=>O({target:{id:"relation",value:e}}),children:[(0,X.jsx)(A.bq,{children:(0,X.jsx)(A.yv,{placeholder:"Relation"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Father",children:"Father"}),(0,X.jsx)(A.eb,{value:"Husband",children:"Husband"}),(0,X.jsx)(A.eb,{value:"Mother",children:"Mother"}),(0,X.jsx)(A.eb,{value:"Wife",children:"Wife"}),(0,X.jsx)(A.eb,{value:"Guardian",children:"Guardian"})]})]}),(0,X.jsx)(Nl,{id:"guardianName",label:C.relation?`${C.relation}'s Name`:"Guardian's Name",value:C.guardianName,onChange:O})]}),(0,X.jsx)(Gs.A,{suggestions:N.map((e=>({name:e.name,_id:e._id}))),value:C.referredByName,setValue:e=>{D((t=>({...t,referredByName:e})))},onSuggestionSelect:e=>{D((t=>({...t,referredBy:{_id:e._id,name:e.name},referredByName:e.name})))},placeholder:(null===(r=C.referredBy)||void 0===r?void 0:r.name)||"Referred By"}),(0,X.jsxs)("div",{className:"flex gap-2 relative z-50",children:[(0,X.jsx)(Zo.A,{suggestions:b,selectedValues:C.labTests.map((e=>({name:e.name}))),setSelectedValues:e=>{const t=e.map((e=>{var t;return{testId:e._id||e.name,name:e.name,price:e.rate||(null===(t=b.find((t=>t.name===e.name)))||void 0===t?void 0:t.rate)||0}})),n=t.reduce(((e,t)=>e+(t.price||0)),0);D((e=>({...e,labTests:t,paymentInfo:{...e.paymentInfo,totalAmount:n}})))},placeholder:"Select lab tests"}),C.labTests.length>0&&(0,X.jsx)("div",{className:"absolute top-[calc(100%+4px)] left-0 right-0 z-50",children:(0,X.jsx)("div",{className:"flex flex-wrap gap-1",children:C.labTests.map(((e,t)=>(0,X.jsxs)(Yo.E,{variant:"primary",className:"flex items-center bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[e.name+" \u20b9"+e.price,(0,X.jsx)(T.A,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>(e=>{const t=C.labTests.filter((t=>t.name!==e)),n=t.reduce(((e,t)=>e+(t.price||0)),0);D((e=>({...e,labTests:t,paymentInfo:{...e.paymentInfo,totalAmount:n}})))})(e.name)})]},t)))})})]})]}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)("div",{className:"space-y-2"}),(0,X.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,X.jsx)(Nl,{label:"Amount (\u20b9)",id:"paymentInfo.totalAmount",value:C.paymentInfo.totalAmount.toLocaleString("en-IN"),disabled:!0,className:"bg-gray-50"}),(0,X.jsx)(Nl,{label:"Discount",id:"paymentInfo.additionalDiscount",value:R?`${R}%`:C.paymentInfo.additionalDiscount,onChange:e=>{const t=e.target.value;if(t.includes("%")){const e=parseFloat(t.replace("%",""));if(M(e),!isNaN(e)){const t=C.paymentInfo.totalAmount*e/100;D((e=>({...e,paymentInfo:{...e.paymentInfo,additionalDiscount:Number(t)}})))}}else M(0),O(e)},error:k.discount}),(0,X.jsx)(Nl,{label:"Payable (\u20b9)",value:(()=>{const e=C.paymentInfo.totalAmount,t=parseFloat(C.paymentInfo.additionalDiscount)||0;return Math.max(0,e-t)})().toLocaleString("en-IN"),disabled:!0,className:"bg-gray-50"})]}),(0,X.jsxs)("div",{className:C.paymentInfo.paymentMethod.length>1?"grid grid-cols-3 gap-1":"grid grid-cols-2 gap-2",children:[(0,X.jsx)(Zo.A,{id:"paymentInfo.paymentMethod",label:"Payment Method",suggestions:ql,placeholder:C.paymentInfo.paymentMethod.length>0?C.paymentInfo.paymentMethod.map((e=>e.method)).join(", "):"Payment Method",selectedValues:C.paymentInfo.paymentMethod.map((e=>({name:e.method}))),setSelectedValues:e=>{D((t=>{const n=t.paymentInfo.paymentMethod.reduce(((e,t)=>(e[t.method]=t.amount,e)),{}),r=e.map((e=>({method:e.name,amount:n[e.name]||""})));return{...t,paymentInfo:{...t.paymentInfo,paymentMethod:r}}}))},height:!1}),C.paymentInfo.paymentMethod.length>0?C.paymentInfo.paymentMethod.map((e=>(0,X.jsx)(Nl,{id:`payment.${e.method}`,label:`${e.method} Amount`,value:e.amount,onChange:t=>{var n,r;n=e.method,r=t.target.value,D((e=>({...e,paymentInfo:{...e.paymentInfo,paymentMethod:e.paymentInfo.paymentMethod.map((e=>e.method===n?{...e,amount:parseFloat(r)||0}:e))}})))},className:"bg-gray-50"},e.method))):(0,X.jsx)(Nl,{id:"payment.empty",label:"Amount Paid",disabled:!0,className:"bg-gray-50"},"empty")]})]})]}),(0,X.jsx)(Io.Es,{children:(0,X.jsxs)("div",{className:"w-full flex flex-row justify-between sm:justify-end sm:space-x-2 space-x-1",children:[(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:()=>{D(E),P({}),g(null)},className:"flex-1 sm:flex-none",children:"Reset"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:I,className:"flex-1 sm:flex-none",children:"Cancel"}),(0,X.jsx)(w.$,{type:"submit",className:"flex-1 sm:flex-none",children:p?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Register"})]})})]})]})}),d&&S&&(0,X.jsx)(Vl,{isOpen:d,setShowModal:u,labData:m,hospitalInfo:S})]})}var Kl="Radio",[Yl,Xl]=(0,V.A)(Kl),[Zl,Jl]=Yl(Kl),Ql=t.forwardRef(((e,n)=>{const{__scopeRadio:r,name:a,checked:s=!1,required:i,disabled:o,value:l="on",onCheck:c,form:d,...u}=e,[m,h]=t.useState(null),p=(0,q.s)(n,(e=>h(e))),f=t.useRef(!1),v=!m||(d||!!m.closest("form"));return(0,X.jsxs)(Zl,{scope:r,checked:s,disabled:o,children:[(0,X.jsx)(Jn.sG.button,{type:"button",role:"radio","aria-checked":s,"data-state":rc(s),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:p,onClick:(0,K.m)(e.onClick,(e=>{s||c?.(),v&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())}))}),v&&(0,X.jsx)(nc,{control:m,bubbles:!f.current,name:a,value:l,checked:s,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})}));Ql.displayName=Kl;var ec="RadioIndicator",tc=t.forwardRef(((e,t)=>{const{__scopeRadio:n,forceMount:r,...a}=e,s=Jl(ec,n);return(0,X.jsx)(or.C,{present:r||s.checked,children:(0,X.jsx)(Jn.sG.span,{"data-state":rc(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t})})}));tc.displayName=ec;var nc=e=>{const{control:n,checked:r,bubbles:a=!0,...s}=e,i=t.useRef(null),o=(0,Dl.Z)(r),l=(0,Tl.X)(n);return t.useEffect((()=>{const e=i.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==r&&n){const t=new Event("click",{bubbles:a});n.call(e,r),e.dispatchEvent(t)}}),[o,r,a]),(0,X.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function rc(e){return e?"checked":"unchecked"}var ac=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],sc="RadioGroup",[ic,oc]=(0,V.A)(sc,[vr,Xl]),lc=vr(),cc=Xl(),[dc,uc]=ic(sc),mc=t.forwardRef(((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:a,value:s,required:i=!1,disabled:o=!1,orientation:l,dir:c,loop:d=!0,onValueChange:u,...m}=e,h=lc(n),p=(0,er.jH)(c),[f,v]=(0,Zn.i)({prop:s,defaultProp:a,onChange:u});return(0,X.jsx)(dc,{scope:n,name:r,required:i,disabled:o,value:f,onValueChange:v,children:(0,X.jsx)(Sr,{asChild:!0,...h,orientation:l,dir:p,loop:d,children:(0,X.jsx)(Jn.sG.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":o?"":void 0,dir:p,...m,ref:t})})})}));mc.displayName=sc;var hc="RadioGroupItem",pc=t.forwardRef(((e,n)=>{const{__scopeRadioGroup:r,disabled:a,...s}=e,i=uc(hc,r),o=i.disabled||a,l=lc(r),c=cc(r),d=t.useRef(null),u=(0,q.s)(n,d),m=i.value===s.value,h=t.useRef(!1);return t.useEffect((()=>{const e=e=>{ac.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),(0,X.jsx)(Er,{asChild:!0,...l,focusable:!o,active:m,children:(0,X.jsx)(Ql,{disabled:o,required:i.required,checked:m,...c,...s,name:i.name,ref:u,onCheck:()=>i.onValueChange(s.value),onKeyDown:(0,K.m)((e=>{"Enter"===e.key&&e.preventDefault()})),onFocus:(0,K.m)(s.onFocus,(()=>{h.current&&d.current?.click()}))})})}));pc.displayName=hc;var fc=t.forwardRef(((e,t)=>{const{__scopeRadioGroup:n,...r}=e,a=cc(n);return(0,X.jsx)(tc,{...a,...r,ref:t})}));fc.displayName="RadioGroupIndicator";var vc=mc,gc=pc,xc=fc;const yc=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(vc,{className:(0,Ee.cn)("grid gap-2",n),...r,ref:t})}));yc.displayName=vc.displayName;const bc=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(gc,{ref:t,className:(0,Ee.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...r,children:(0,X.jsx)(xc,{className:"flex items-center justify-center",children:(0,X.jsx)(Rs.Srz,{className:"h-3.5 w-3.5 fill-primary"})})})}));bc.displayName=gc.displayName;const jc=(0,N.A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),wc=e=>{var n,r,a,s,i,o;let{isOpen:l,setIsOpen:c,labData:d}=e;const u=(0,j.wA)(),{toast:m}=(0,H.dj)(),[h,p]=(0,t.useState)(""),[f,v]=(0,t.useState)(""),[g,x]=(0,t.useState)(!1),y=Ko("(max-width: 640px)"),[b,N]=(0,t.useState)("");(0,t.useEffect)((()=>(l?(p(""),v(""),N("")):(document.body.style.pointerEvents="",document.body.style="",setTimeout((()=>{document.body.style.pointerEvents="",document.body.style=""}),300)),()=>{document.body.style.pointerEvents="",document.body.style=""})),[l]);const _=(null===d||void 0===d||null===(n=d.paymentInfo)||void 0===n?void 0:n.totalAmount)||0,S=(null===d||void 0===d||null===(r=d.paymentInfo)||void 0===r?void 0:r.amountPaid)||0,E=_-((null===d||void 0===d||null===(a=d.paymentInfo)||void 0===a?void 0:a.additionalDiscount)||0)-S,C=E<=0,D=h&&f&&!b&&parseFloat(h)>0;if(!d)return null;return(0,X.jsx)(Io.lG,{open:l,onOpenChange:c,children:(0,X.jsxs)(Io.Cf,{className:"w-[90vw] max-w-[425px] max-h-[90vh] overflow-y-auto rounded-lg",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{className:"text-xl font-semibold",children:"Add Payment"}),(0,X.jsx)(Io.rr,{children:"Add payment for lab registration."})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsxs)("div",{className:"flex justify-between text-sm font-medium",children:[(0,X.jsxs)("span",{className:"sm:hidden",children:["Total:"," ",(0,X.jsxs)("span",{className:"text-primary",children:["\u20b9",null===_||void 0===_?void 0:_.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,X.jsxs)("span",{className:"sm:hidden",children:["Due:"," ",(0,X.jsxs)("span",{className:"text-red-600",children:["\u20b9",null===E||void 0===E?void 0:E.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,X.jsxs)("span",{className:"hidden sm:inline",children:["Total Amount:"," ",(0,X.jsxs)("span",{className:"text-primary",children:["\u20b9",null===_||void 0===_?void 0:_.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,X.jsxs)("span",{className:"hidden sm:inline",children:["Due Amount:"," ",(0,X.jsxs)("span",{className:"text-red-600",children:["\u20b9",null===E||void 0===E?void 0:E.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),(0,X.jsx)(Mo,{}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"paymentAmount",children:"Payment Amount"}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Vn.p,{id:"paymentAmount",type:"number",value:h,onChange:e=>{const t=e.target.value;p(t),parseFloat(t)>E?N(`Amount cannot exceed the due amount of \u20b9${E.toFixed(2)}`):N("")},placeholder:"Enter amount",className:"pr-10 "+(b?"border-red-500":""),disabled:C}),(0,X.jsx)(w.$,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2",onClick:()=>{p(E.toFixed(2))},title:"Set Due Amount",disabled:C,children:(0,X.jsx)(jc,{className:"h-4 w-4"})})]}),b&&(0,X.jsx)("p",{className:"text-xs text-red-500 mt-1",children:b})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"paymentMethod",children:"Payment Method"}),(0,X.jsxs)(A.l6,{onValueChange:v,value:f,disabled:C,children:[(0,X.jsx)(A.bq,{id:"paymentMethod",children:(0,X.jsx)(A.yv,{placeholder:"Select method"})}),(0,X.jsx)(A.gC,{children:["Cash","UPI","Card","Bank Transfer","Other"].map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})]})]}),(0,X.jsx)(Mo,{}),(0,X.jsxs)("div",{className:"space-y-0",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsx)("h4",{className:"text-sm font-semibold",children:"Recent Payments"}),(null===d||void 0===d?void 0:d.payments)&&(null===d||void 0===d||null===(s=d.payments)||void 0===s?void 0:s.length)>0&&(0,X.jsx)(Qo,{payments:d.payments,billData:d,styleData:!0})]}),null!==d&&void 0!==d&&d.payments&&(null===d||void 0===d||null===(i=d.payments)||void 0===i?void 0:i.length)>0?(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[80px]",children:"Date"}),!y&&(0,X.jsx)(Wo.nd,{className:"w-[80px]",children:"Time"}),(0,X.jsx)(Wo.nd,{children:"Amount"}),(0,X.jsx)(Wo.nd,{children:"Method"}),(0,X.jsx)(Wo.nd,{children:"Receipt"})]})}),(0,X.jsx)(Wo.BF,{children:null===(o=d.payments)||void 0===o?void 0:o.map(((e,t)=>{var n;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-xs",children:new Date(e.createdAt).toLocaleDateString("en-IN")}),!y&&(0,X.jsx)(Wo.nA,{className:"text-xs",children:new Date(e.createdAt).toLocaleTimeString("en-IN",{hour:"numeric",minute:"numeric",hour12:!0})}),(0,X.jsxs)(Wo.nA,{className:"text-xs font-medium",children:["\u20b9",null===e||void 0===e||null===(n=e.amount)||void 0===n?void 0:n.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,X.jsx)(Wo.nA,{className:"text-xs",children:e.paymentMethod}),(0,X.jsx)(Wo.nA,{className:"text-xs",children:(0,X.jsx)(Qo,{payment:e,billData:d})})]},t)}))})]})}):(0,X.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-500 py-4",children:[(0,X.jsx)(Jo,{size:18}),(0,X.jsx)("span",{children:"No recent payments found"})]})]}),(0,X.jsxs)(Io.Es,{className:"mt-6 flex-col-reverse gap-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>c(!1),disabled:g,className:"w-full sm:w-auto",children:"Close"}),C?(0,X.jsx)(w.$,{disabled:!0,className:"w-full sm:w-auto bg-green-500 hover:bg-green-600",children:"Fully Paid"}):(0,X.jsx)(w.$,{onClick:()=>{if(!h||!f)return void m({title:"Error",description:"Please fill in all fields",variant:"destructive"});x(!0);const e={method:f,amount:parseFloat(h)};u(Zt({labId:d._id,payment:e})).unwrap().then((()=>{m({title:"Payment added successfully",description:`Payment of \u20b9${h} has been added successfully.`,variant:"success"}),c(!1)})).catch((e=>{m({title:"Error",description:`Failed to add payment: ${e.message}`,variant:"destructive"})})).finally((()=>{x(!1)}))},disabled:g||!D,className:"w-full sm:w-auto",children:g?"Processing...":"Add Payment"})]})]})})},Nc=[{name:"Cash"},{name:"UPI"},{name:"Card"},{name:"Insurance"}];function _c(e){var n,r,a;let{open:s,onOpenChange:i,labData:o}=e;const l=(0,j.wA)(),{toast:c}=(0,H.dj)(),d=Ko("(max-width: 640px)"),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),{updateRegistrationStatus:f,error:v}=(0,j.d4)((e=>e.lab)),g=null===(n=[...(0,j.d4)((e=>e.templates.labTestsTemplate))])||void 0===n?void 0:n.filter((e=>"inactive"!==(null===e||void 0===e?void 0:e.status))).map((e=>({name:(null===e||void 0===e?void 0:e.name)||e,rate:null===e||void 0===e?void 0:e.rate}))),x=(0,j.d4)((e=>e.staff.doctors)),y=((0,j.d4)((e=>e.departments.departments)),(0,j.d4)((e=>e.hospital.hospitalInfo))),[b,N]=(0,t.useState)({name:"",registrationNumber:"",age:"",dateOfBirth:"",gender:"",contactNumber:"",email:"",address:"",bloodType:"",patientType:"LAB",paymentInfo:{totalAmount:0,amountPaid:0,paymentMethod:[],additionalDiscount:""},payments:[],referredByName:"",labTests:[],referredBy:{},department:"",notes:""}),[_,S]=(0,t.useState)({});(0,t.useEffect)((()=>{o&&N({name:o.patientName,registrationNumber:o.registrationNumber,age:o.age,gender:o.gender,contactNumber:o.contactNumber,address:o.address,paymentInfo:o.paymentInfo,payments:o.payments||[],referredByName:o.referredByName,referredBy:o.referredBy,labTests:o.labTests,department:o.department,notes:o.notes})}),[o]);const E=e=>{const{id:t,value:n}=e.target;N((e=>{const r=t.split("."),a={...e};let s=a;for(let t=0;t<r.length-1;t++)s[r[t]]={...s[r[t]]},s=s[r[t]];return s[r[r.length-1]]=n,a}))},[D,k]=(0,t.useState)(0),P=()=>{const e=b.paymentInfo.totalAmount,t=parseFloat(b.paymentInfo.additionalDiscount)||0;return Math.max(0,e-t)},O=(e,t,n)=>{N((r=>{const a=[...r.payments];a[e]={...a[e],[t]:"amount"===t?parseFloat(n)||0:n};const s=a.reduce(((e,t)=>e+(t.amount||0)),0);return{...r,payments:a,paymentInfo:{...r.paymentInfo,amountPaid:s}}}))},R=()=>{i(!1),setTimeout((()=>{document.body.style=""}),500)};return(0,t.useEffect)((()=>{s||(S({}),setTimeout((()=>{document.body.style=""}),500))}),[s]),(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Io.lG,{open:s,onOpenChange:R,children:(0,X.jsxs)(Io.Cf,{className:`${d?"w-[95vw] p-4":"max-w-[1000px]"} h-[${d?"70vh":"60vh"}] overflow-visible px-4`,onOpenAutoFocus:e=>e.preventDefault(),children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Edit Lab Registration"}),(0,X.jsx)(Io.rr,{children:"Edit lab registration details"})]}),(0,X.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return b.name||(e.name="Name is required"),b.age||(e.age="Age is required"),b.gender||(e.gender="Gender is required"),b.contactNumber||(e.contactNumber="Contact number is required"),0===b.labTests.length&&(e.labTests="At least one test must be selected"),S(e),0===Object.keys(e).length})())try{const e={...b,_id:o._id},t=await l(en(e)).unwrap();c({title:"Update Successful",description:"Lab registration updated successfully",variant:"success"}),p(t),m(!0),i(!1)}catch(v){c({title:"Update Failed",description:v||"Could not update lab registration",variant:"destructive"})}},className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,X.jsx)("div",{className:"space-y-4",children:(0,X.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,X.jsx)(Nl,{id:"name",label:"Full Name",value:b.name,onChange:E,error:_.name}),(0,X.jsx)(Nl,{id:"registrationNumber",label:"UHID Number",value:b.registrationNumber,disabled:!0}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(Nl,{id:"age",label:"Age",type:"text",value:b.age,onChange:E,error:_.age}),(0,X.jsxs)(A.l6,{id:"gender",value:b.gender,onValueChange:e=>E({target:{id:"gender",value:e}}),children:[(0,X.jsx)(A.bq,{className:_.gender?"border-red-500":"",children:(0,X.jsx)(A.yv,{placeholder:"Gender"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Male",children:"Male"}),(0,X.jsx)(A.eb,{value:"Female",children:"Female"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]})]})]}),(0,X.jsx)(Nl,{id:"contactNumber",label:"Contact Number",value:b.contactNumber,onChange:E,error:_.contactNumber})]})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)(Xo.T,{id:"address",placeholder:"Address",value:b.address,onChange:E,className:"min-h-9 h-9 no-scrollbar"}),(0,X.jsx)(Gs.A,{suggestions:x.map((e=>({name:e.name,_id:e._id}))),value:b.referredByName,setValue:e=>{N((t=>({...t,referredByName:e,referredBy:{}})))},onSuggestionSelect:e=>{N((t=>({...t,referredBy:{_id:null===e||void 0===e?void 0:e._id,name:null===e||void 0===e?void 0:e.name},referredByName:null===e||void 0===e?void 0:e.name})))},placeholder:(null===(r=b.referredBy)||void 0===r?void 0:r.name)||"Referred By"}),(0,X.jsxs)("div",{className:"flex gap-2 relative z-50",children:[(0,X.jsx)(Zo.A,{suggestions:g,selectedValues:b.labTests.map((e=>({name:e.name}))),setSelectedValues:e=>{const t=e.map((e=>{var t;return{name:e.name,price:e.rate||(null===(t=g.find((t=>t.name===e.name)))||void 0===t?void 0:t.rate)||0}})),n=t.reduce(((e,t)=>e+(t.price||0)),0);N((e=>({...e,labTests:t,paymentInfo:{...e.paymentInfo,totalAmount:n}})))},placeholder:"Select lab tests"}),b.labTests.length>0&&(0,X.jsx)("div",{className:"absolute top-[calc(100%+4px)] left-0 right-0 z-50",children:(0,X.jsx)("div",{className:"flex flex-wrap gap-1",children:b.labTests.map(((e,t)=>(0,X.jsxs)(Yo.E,{variant:"primary",className:"flex items-center bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[e.name+" \u20b9"+e.price,(0,X.jsx)(T.A,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>(e=>{const t=b.labTests.filter((t=>t.name!==e)),n=t.reduce(((e,t)=>e+(t.price||0)),0);N((e=>({...e,labTests:t,paymentInfo:{...e.paymentInfo,totalAmount:n}})))})(e.name)})]},t)))})})]})]}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,X.jsx)(Nl,{label:"Amount (\u20b9)",id:"paymentInfo.totalAmount",value:b.paymentInfo.totalAmount.toLocaleString("en-IN"),disabled:!0,className:"bg-gray-50"}),(0,X.jsx)(Nl,{label:"Discount",id:"paymentInfo.additionalDiscount",value:D?`${D}%`:b.paymentInfo.additionalDiscount,onChange:e=>{const t=e.target.value;if(t.includes("%")){const e=parseFloat(t.replace("%",""));if(k(e),!isNaN(e)){const t=b.paymentInfo.totalAmount*e/100;N((e=>({...e,paymentInfo:{...e.paymentInfo,additionalDiscount:Number(t)}})))}}else k(0),E(e)},error:_.discount}),(0,X.jsx)(Nl,{label:"Payable (\u20b9)",value:P().toLocaleString("en-IN"),disabled:!0,className:"bg-gray-50"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsx)(Nl,{label:"Amount Paid (\u20b9)",value:(null===(a=b.paymentInfo.amountPaid)||void 0===a?void 0:a.toLocaleString("en-IN"))||"0",disabled:!0,className:"bg-gray-50"}),(0,X.jsx)(Nl,{label:"Balance Due (\u20b9)",value:(P()-(b.paymentInfo.amountPaid||0)).toLocaleString("en-IN"),disabled:!0,className:"bg-gray-50"})]}),(0,X.jsxs)("div",{className:"",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)(Ks.J,{children:"Payment History"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{N((e=>({...e,payments:[...e.payments,{paymentMethod:"Cash",amount:"",isNew:!0}]})))},className:"py-1",children:"Add Payment"})]}),(0,X.jsx)("div",{className:"max-h-[150px] overflow-y-auto border rounded-md p-2 space-y-2",children:b.payments.map(((e,t)=>(0,X.jsxs)("div",{className:"flex items-center gap-1",children:[(0,X.jsxs)(A.l6,{value:e.paymentMethod,onValueChange:e=>O(t,"paymentMethod",e),children:[(0,X.jsx)(A.bq,{className:"w-[120px] h-8 text-sm",children:(0,X.jsx)(A.yv,{placeholder:"Method"})}),(0,X.jsx)(A.gC,{children:Nc.map((e=>(0,X.jsx)(A.eb,{value:e.name,className:"text-sm",children:e.name},e.name)))})]}),(0,X.jsx)(Vn.p,{type:"number",value:e.amount,onChange:e=>O(t,"amount",e.target.value),className:"w-[120px] h-8 text-sm",placeholder:"Amount"}),(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>(e=>{N((t=>{const n=[...t.payments];n.splice(e,1);const r=n.reduce(((e,t)=>e+(t.amount||0)),0);return{...t,payments:n,paymentInfo:{...t.paymentInfo,amountPaid:r}}}))})(t),className:"h-8 w-8 p-0",children:(0,X.jsx)(C.A,{className:"h-3.5 w-3.5 text-red-500"})})]},t)))})]})]})]}),(0,X.jsx)(Io.Es,{children:(0,X.jsxs)("div",{className:"w-full flex flex-row justify-between sm:justify-end sm:space-x-2 space-x-1",children:[(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:R,className:"flex-1 sm:flex-none",children:"Cancel"}),(0,X.jsx)(w.$,{type:"submit",className:"flex-1 sm:flex-none",children:"loading"===f?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Update"})]})})]})]})}),u&&y&&(0,X.jsx)(Vl,{isOpen:u,setShowModal:m,labData:h,hospitalInfo:y})]})}function Sc(){const e=(0,a.Zp)(),n=(0,j.wA)(),[r,s]=(0,t.useState)(""),[i,o]=(0,t.useState)("Today"),[l,c]=(0,t.useState)({from:null,to:null}),[d,u]=(0,t.useState)({from:null,to:null}),[m,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[v,g]=(0,t.useState)(!1),[x,y]=(0,t.useState)(null),[b,N]=(0,t.useState)(!1),[_,E]=(0,t.useState)(!1),[C,D]=(0,t.useState)(null),[A,P]=(0,t.useState)(!1),[O,R]=(0,t.useState)(null),[I,L]=(0,t.useState)(null),[F,B]=(0,t.useState)(!1),[W,$]=(0,t.useState)({}),[U,z]=(0,t.useState)(null),[V,q]=(0,t.useState)("All"),{toast:G}=(0,H.dj)(),{registrations:K,searchResults:Y,updateTestStatus:Z,error:J}=(0,j.d4)((e=>e.lab)),Q=(0,j.d4)((e=>e.hospital.hospitalInfo)),ee=Ko("(max-width: 640px)"),[te,ne]=(0,t.useState)([]),[re,ae]=(0,t.useState)([]),[se,ie]=(0,t.useState)(!1),oe="loading"===Z;(0,t.useEffect)((()=>{le()}),[i,l,n]);const le=async()=>{const e=ce();e&&n(Kt(e))};(0,t.useEffect)((()=>{if(r){const e=K.filter((e=>{var t,n,a,s;return(null===(t=e.labNumber)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase()))||(null===(n=e.registrationNumber)||void 0===n?void 0:n.toLowerCase().includes(r.toLowerCase()))||(null===(a=e.contactNumber)||void 0===a?void 0:a.includes(r))||(null===(s=e.patientName)||void 0===s?void 0:s.toLowerCase().includes(r.toLowerCase()))}));e.length>0?ae(e):n(Jt(r))}else ae(K),n(ln())}),[r,K,n]),(0,t.useEffect)((()=>{Y.length>0&&ae(Y)}),[Y]),(0,t.useEffect)((()=>{let e=[...re];U&&(e=e.filter((e=>e.labTests.some((e=>e.name===U))))),"Paid"===V?e=e.filter((e=>{var t;return(null===(t=e.paymentInfo)||void 0===t?void 0:t.balanceDue)<=0})):"Due"===V&&(e=e.filter((e=>{var t;return(null===(t=e.paymentInfo)||void 0===t?void 0:t.balanceDue)>0}))),ne(e)}),[U,re,V]);const ce=()=>{const e=new Date;switch(i){case"Today":return{startDate:(0,Go.GP)(e,"yyyy-MM-dd"),endDate:(0,Go.GP)(e,"yyyy-MM-dd")};case"Yesterday":const t=new Date(e);return t.setDate(t.getDate()-1),{startDate:(0,Go.GP)(t,"yyyy-MM-dd"),endDate:(0,Go.GP)(t,"yyyy-MM-dd")};case"This Week":const n=new Date(e);return n.setDate(e.getDate()-7),{startDate:(0,Go.GP)(n,"yyyy-MM-dd"),endDate:(0,Go.GP)(e,"yyyy-MM-dd")};case"Custom":return l.from&&l.to?{startDate:(0,Go.GP)(l.from,"yyyy-MM-dd"),endDate:(0,Go.GP)(l.to,"yyyy-MM-dd")}:null;default:return null}},de=e=>{switch(e){case"Completed":return"text-green-600";case"In Progress":return"text-yellow-600";case"Pending":return"text-red-600";default:return"text-gray-600"}},ue=e=>{switch(e){case"Completed":return"text-green-600";case"Sample Collected":return"text-[#f5a158]";case"Registered":return"text-[#b51616]";default:return"text-black-600"}},me=e=>{f(e),g(!0)},he=(e,t)=>{y({registration:e,test:t}),N(!0)},pe=async e=>{if(x)try{(await n(Xt({registrationId:x.registration._id,testName:x.test.name,newStatus:e})).unwrap()).success&&(N(!1),y(null))}catch(J){console.error("Failed to update test status:",J)}},fe=e=>{D(e),E(!0)},ve=e=>{R(e),P(!0)},ge=e=>{L(e)},xe=t=>{let{test:n,index:r}=t;return(0,X.jsx)(k.Zp,{className:"mb-4",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,X.jsxs)("div",{children:["Today"===i&&(0,X.jsxs)("p",{className:"text-sm text-gray-500 mb-1",children:["Sl No: ",r+1]}),(0,X.jsx)("h3",{className:"font-semibold",children:n.patientName}),(0,X.jsxs)("p",{className:"text-sm text-gray-500",children:["Lab No: ",n.labNumber]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(Yo.E,{variant:"Completed"===n.status?"success":"In Progress"===n.status?"warning":"destructive",children:n.status}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,X.jsx)($o,{className:"h-4 w-4"})})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)($s,{onClick:()=>me(n),children:"Print Bills"}),(0,X.jsx)($s,{onClick:()=>fe(n),children:"Payments"}),(0,X.jsx)($s,{onClick:()=>e("/lab",{state:{patientData:n}}),children:"Make Report"}),(0,X.jsx)($s,{onClick:()=>ve(n),children:"Edit Registration"}),(0,X.jsx)($s,{onClick:()=>ge(n),className:"text-red-500",children:"Delete Registration"})]})]})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("span",{className:"text-gray-500",children:"Date: "}),(0,Go.GP)(new Date(n.bookingDate),"dd/MM/yyyy")]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("span",{className:"text-gray-500",children:"Tests: "}),n.labTests.map(((e,t)=>(0,X.jsxs)("span",{children:[(0,X.jsx)("button",{onClick:()=>he(n,e),className:`${ue(e.reportStatus)} hover:underline cursor-pointer`,children:e.name}),t<n.labTests.length-1?", ":""]},t)))]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("span",{className:"text-gray-500",children:"Amount: "}),"\u20b9",n.paymentInfo.totalAmount.toLocaleString("en-IN")]}),n.referredBy&&(0,X.jsxs)("div",{children:[(0,X.jsx)("span",{className:"text-gray-500",children:"Referred By: "}),n.referredBy.name]})]})]})})},ye=()=>(0,X.jsx)(Io.lG,{open:b,onOpenChange:e=>{oe||N(e)},children:(0,X.jsxs)(Io.Cf,{children:[(0,X.jsx)(Io.c7,{children:(0,X.jsx)(Io.L3,{children:"Update Test Status"})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)(yc,{defaultValue:null===x||void 0===x?void 0:x.test.reportStatus,onValueChange:pe,disabled:oe,children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(bc,{value:"Registered",id:"registered",disabled:oe}),(0,X.jsx)(Ks.J,{htmlFor:"registered",className:`${oe?"opacity-50":""} ${ue("Registered")}`,children:"Registered"})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(bc,{value:"Sample Collected",id:"collected",disabled:oe}),(0,X.jsx)(Ks.J,{htmlFor:"collected",className:`${oe?"opacity-50":""} ${ue("Sample Collected")}`,children:"Sample Collected"})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(bc,{value:"Completed",id:"completed",disabled:oe}),(0,X.jsx)(Ks.J,{htmlFor:"completed",className:`${oe?"opacity-50":""} ${ue("Completed")}`,children:"Completed"})]})]}),oe&&(0,X.jsx)("div",{className:"flex items-center justify-center",children:(0,X.jsx)(ti,{className:"h-5 w-5 animate-spin text-primary"})})]})]})}),be=()=>{const e=Object.values(W).reduce(((e,t)=>(e.count+=t.count,e.total+=t.total,e.collected+=t.collected,e.due+=t.due,e)),{count:0,total:0,collected:0,due:0});return(0,X.jsx)(Io.lG,{open:F,onOpenChange:B,children:(0,X.jsxs)(Io.Cf,{className:"sm:max-w-3xl",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Test Wise Summary"}),(0,X.jsx)(Io.rr,{children:"Summary of test counts, collections, and dues. Click a row to filter."})]}),(0,X.jsx)("div",{className:"max-h-[70vh] overflow-y-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[250px]",children:"Test Name"}),(0,X.jsx)(Wo.nd,{className:"text-right",children:"Count"}),(0,X.jsx)(Wo.nd,{className:"text-right",children:"Total (\u20b9)"}),(0,X.jsx)(Wo.nd,{className:"text-right",children:"Collected (\u20b9)"}),(0,X.jsx)(Wo.nd,{className:"text-right",children:"Due (\u20b9)"})]})}),(0,X.jsx)(Wo.BF,{children:Object.entries(W).sort(((e,t)=>{let[,n]=e,[,r]=t;return r.count-n.count})).map((e=>{let[t,n]=e;return(0,X.jsxs)(Wo.Hj,{onClick:()=>(z(t),void B(!1)),className:"cursor-pointer hover:bg-muted/50",children:[(0,X.jsx)(Wo.nA,{className:"font-medium pr-4",children:t}),(0,X.jsx)(Wo.nA,{className:"text-right pr-4",children:n.count}),(0,X.jsx)(Wo.nA,{className:"text-right pr-4",children:(0,M.vv)(n.total)}),(0,X.jsx)(Wo.nA,{className:"text-right pr-4 text-green-600",children:(0,M.vv)(n.collected)}),(0,X.jsx)(Wo.nA,{className:"text-right pr-4 text-red-600",children:(0,M.vv)(n.due)})]},t)}))}),(0,X.jsx)(Wo.Gg,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"font-bold",children:"Total"}),(0,X.jsx)(Wo.nA,{className:"text-right font-bold",children:e.count}),(0,X.jsx)(Wo.nA,{className:"text-right font-bold",children:(0,M.vv)(e.total)}),(0,X.jsx)(Wo.nA,{className:"text-right font-bold text-green-600",children:(0,M.vv)(e.collected)}),(0,X.jsx)(Wo.nA,{className:"text-right font-bold text-red-600",children:(0,M.vv)(e.due)})]})})]})})]})})};return(0,X.jsxs)(k.Zp,{className:"w-full border-none shadow-none",children:[(0,X.jsxs)(k.aR,{className:"pb-0",children:[(0,X.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center w-full ",children:[(0,X.jsxs)("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"hidden sm:flex",children:(0,X.jsx)(Uo.A,{className:"h-5 w-5"})}),(0,X.jsx)("div",{className:"w-full sm:w-auto",children:(0,X.jsx)(k.ZB,{className:"text-center sm:text-left text-2xl",children:"Laboratory"})})]}),(0,X.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,X.jsx)("span",{className:"font-medium",children:"Test Status:"}),(0,X.jsxs)("div",{className:"flex items-center gap-1",children:[(0,X.jsx)("span",{className:"w-2 h-2 rounded-full bg-[#b51616]"}),(0,X.jsx)("span",{children:"Registered"})]}),(0,X.jsxs)("div",{className:"flex items-center gap-1",children:[(0,X.jsx)("span",{className:"w-2 h-2 rounded-full bg-[#f5a158]"}),(0,X.jsx)("span",{children:"Sample Collected"})]}),(0,X.jsxs)("div",{className:"flex items-center gap-1",children:[(0,X.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-600"}),(0,X.jsx)("span",{children:"Completed"})]})]})]}),(0,X.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 ",children:[(0,X.jsxs)("div",{className:"w-full md:w-1/4 relative",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search...",value:r,onChange:e=>s(e.target.value),className:"pl-8"}),r&&(0,X.jsx)("button",{onClick:()=>s(""),className:"absolute right-2 top-2.5 text-muted-foreground hover:text-foreground",children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 sm:flex items-center gap-2 w-full sm:w-auto",children:["Custom"===i&&(0,X.jsx)("div",{className:"col-span-2 sm:col-span-1",children:(0,X.jsx)(M.Ur,{from:d.from,to:d.to,onSelect:e=>u(e),onSearch:()=>{c(d),o("Custom")},onCancel:()=>{u({from:null,to:null}),o("Today")}})}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full sm:w-auto",children:[(0,X.jsx)(zo,{className:"h-4 w-4 sm:mr-2"}),(0,X.jsx)("span",{className:"hidden sm:inline",children:i}),(0,X.jsx)("span",{className:"sm:hidden",children:"Date"})]})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)($s,{onSelect:()=>o("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>o("Yesterday"),children:"Yesterday"}),(0,X.jsx)($s,{onSelect:()=>o("This Week"),children:"This Week"}),(0,X.jsx)($s,{onSelect:()=>o("Custom"),children:"Custom Range"})]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full sm:w-auto",children:[(0,X.jsx)(Ho,{className:"h-4 w-4 sm:mr-2"}),(0,X.jsx)("span",{className:"hidden sm:inline",children:V}),(0,X.jsx)("span",{className:"sm:hidden",children:"Status"})]})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)($s,{onSelect:()=>q("All"),children:"All"}),(0,X.jsx)($s,{onSelect:()=>q("Paid"),children:"Paid"}),(0,X.jsx)($s,{onSelect:()=>q("Due"),children:"Due"})]})]}),(0,X.jsxs)(w.$,{variant:"outline",onClick:()=>{const e=te.reduce(((e,t)=>{const{labTests:n,paymentInfo:r}=t;if(!n||!r)return e;const{totalAmount:a=0,additionalDiscount:s=0,amountPaid:i=0}=r;if(0===a)return e;const o=a-s;return n.forEach((t=>{const n=t.name;e[n]||(e[n]={count:0,total:0,collected:0,due:0}),e[n].count+=1;const r=t.price||0,l=r-s*(r/a);if(e[n].total+=l,o>0){const t=l*(i/o);e[n].collected+=t,e[n].due+=l-t}})),e}),{});$(e),B(!0)},className:"w-full sm:w-auto",children:[(0,X.jsx)(Vo,{className:"h-4 w-4 sm:mr-2"}),(0,X.jsx)("span",{className:"hidden sm:inline",children:"Summary/Filter"}),(0,X.jsx)("span",{className:"sm:hidden",children:"Summary"})]}),(0,X.jsxs)(w.$,{onClick:()=>h(!0),className:"w-full sm:w-auto",children:[(0,X.jsx)(S.A,{className:"h-4 w-4 sm:mr-2"}),(0,X.jsx)("span",{className:"hidden sm:inline",children:"New Registration"}),(0,X.jsx)("span",{className:"sm:hidden",children:"New"})]})]})]})]}),(0,X.jsxs)(k.Wu,{className:"px-4",children:[(0,X.jsx)(Gl,{open:m,onOpenChange:h}),(0,X.jsx)(Vl,{isOpen:v,setShowModal:g,labData:p,hospitalInfo:Q}),(0,X.jsx)(ye,{}),(0,X.jsx)(be,{}),(0,X.jsx)(wc,{isOpen:_,setIsOpen:E,labData:C}),(0,X.jsx)(_c,{open:A,onOpenChange:P,labData:O}),(0,X.jsx)(Ce,{open:!!I,onOpenChange:e=>{se||e||L(null)},children:(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Are you sure?"}),(0,X.jsxs)(Me,{children:["This action cannot be undone. This will permanently delete the lab registration for ",null===I||void 0===I?void 0:I.patientName," (Lab No:"," ",null===I||void 0===I?void 0:I.labNumber,") and all associated payment records."]})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{onClick:()=>L(null),disabled:se,children:"Cancel"}),(0,X.jsx)(Ie,{onClick:async()=>{I&&(ie(!0),n(tn(I._id)).unwrap().then((()=>{G({title:"Success",description:"Lab registration deleted successfully",variant:"success"})})).catch((e=>{G({title:"Error",description:e.message||"Something went wrong",variant:"destructive"})})).finally((()=>{ie(!1),L(null)})))},className:"bg-red-600 hover:bg-red-700",disabled:se,children:se?"Deleting...":"Delete"})]})]})}),(0,X.jsx)("div",{className:"flex flex-col space-y-4 mb-4",children:U&&(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsxs)(Yo.E,{variant:"success",children:[U,(0,X.jsx)("button",{className:"ml-1 rounded-full p-0.5 hover:bg-background",onClick:()=>z(null),children:(0,X.jsx)(T.A,{className:"h-3 w-3 hover:text-red-500"})})]})})}),ee?te.length>0?(0,X.jsx)("div",{className:"space-y-4",children:te.map(((e,t)=>(0,X.jsx)(xe,{test:e,index:t},e._id)))}):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,X.jsx)(qo,{className:"h-16 w-16 text-gray-400 mb-4"}),(0,X.jsx)("p",{className:"text-xl font-semibold text-gray-600",children:"No tests found"}),(0,X.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]}):(0,X.jsx)("div",{className:"rounded-md border",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Sl."}),(0,X.jsx)(Wo.nd,{children:"Lab No."}),(0,X.jsx)(Wo.nd,{children:"Name"}),(0,X.jsx)(Wo.nd,{children:"Phone"}),(0,X.jsx)(Wo.nd,{children:"Reg. Date"}),(0,X.jsx)(Wo.nd,{children:"Tests"}),(0,X.jsx)(Wo.nd,{children:"Status"}),(0,X.jsx)(Wo.nd,{children:"Total"}),(0,X.jsx)(Wo.nd,{children:"Paid"}),(0,X.jsx)(Wo.nd,{children:"Due"}),(0,X.jsx)(Wo.nd,{children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:te.length>0?te.map(((t,n)=>{var r,a;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"font-medium",children:n+1}),(0,X.jsx)(Wo.nA,{children:t.labNumber}),(0,X.jsx)(Wo.nA,{className:"font-bold",children:`${t.patientName} ${t.registrationNumber?`(${t.registrationNumber})`:""}`}),(0,X.jsx)(Wo.nA,{children:t.contactNumber}),(0,X.jsx)(Wo.nA,{children:(0,Go.GP)(new Date(t.bookingDate),"dd/MM/yyyy")}),(0,X.jsx)(Wo.nA,{className:"font-bold",children:t.labTests.map(((e,n)=>(0,X.jsxs)("span",{children:[(0,X.jsx)("button",{onClick:()=>he(t,e),className:`${ue(e.reportStatus)} hover:underline cursor-pointer`,children:e.name}),n<t.labTests.length-1?", ":""]},n)))}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)("span",{className:`${de(t.status)} font-bold`,children:t.status})}),(0,X.jsx)(Wo.nA,{className:"font-bold text-black",children:(0,M.vv)((null===(r=t.paymentInfo)||void 0===r?void 0:r.totalAmount)-(null===(a=t.paymentInfo)||void 0===a?void 0:a.additionalDiscount))}),(0,X.jsx)(Wo.nA,{className:"font-bold text-green-600",children:(0,M.vv)(t.paymentInfo.amountPaid)}),(0,X.jsx)(Wo.nA,{className:"font-bold text-red-600",children:(0,M.vv)(t.paymentInfo.balanceDue)}),(0,X.jsx)(Wo.nA,{children:(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,X.jsx)($o,{className:"h-4 w-4"})})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)($s,{onClick:()=>me(t),children:"Print Bills"}),(0,X.jsx)($s,{onClick:()=>fe(t),children:"Payments"}),(0,X.jsx)($s,{onClick:()=>e("/lab",{state:{patientData:t}}),children:"Make Report"}),(0,X.jsx)($s,{onClick:()=>ve(t),children:"Edit Registration"}),(0,X.jsx)($s,{onClick:()=>ge(t),className:"text-red-500",children:"Delete Registration"})]})]})})]},t._id)})):(0,X.jsx)(Wo.Hj,{children:(0,X.jsx)(Wo.nA,{colSpan:11,children:(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,X.jsx)(qo,{className:"h-16 w-16 text-gray-400 mb-4"}),(0,X.jsx)("p",{className:"text-xl font-semibold text-gray-600",children:"No tests found"}),(0,X.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]})})})})]})})]})]})}function Ec(){const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(""),[i,o]=(0,t.useState)([]),l=(0,a.Zp)();(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch(`${M.B8}/api/lab/tests`),t=await e.json();t.success&&(n(t.tests),o(t.tests))}catch(e){console.error("Failed to fetch lab tests:",e)}})()}),[]),(0,t.useEffect)((()=>{const t=e.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(r.toLowerCase())))));o(t)}),[r,e]);const c=e=>{switch(e){case"Completed":return"text-green-600";case"In Progress":return"text-yellow-600";case"Pending":return"text-red-600";default:return"text-gray-600"}};return(0,X.jsx)("div",{className:"container mx-auto p-4",children:(0,X.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,X.jsx)("h2",{className:"text-2xl font-bold",children:"Lab Tests"}),(0,X.jsxs)("div",{className:"flex gap-4",children:[(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Vn.p,{placeholder:"Search tests...",value:r,onChange:e=>s(e.target.value),className:"pl-10"}),(0,X.jsx)(oo.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"})]}),(0,X.jsx)(w.$,{onClick:()=>l("/lab/registration"),children:"New Registration"})]})]}),(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Lab Number"}),(0,X.jsx)(Wo.nd,{children:"Patient Name"}),(0,X.jsx)(Wo.nd,{children:"Registration Date"}),(0,X.jsx)(Wo.nd,{children:"Tests"}),(0,X.jsx)(Wo.nd,{children:"Status"}),(0,X.jsx)(Wo.nd,{children:"Amount"}),(0,X.jsx)(Wo.nd,{children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:i.map((e=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:e.labNumber}),(0,X.jsx)(Wo.nA,{children:e.patientName}),(0,X.jsx)(Wo.nA,{children:(0,Go.GP)(new Date(e.bookingDate),"dd/MM/yyyy")}),(0,X.jsx)(Wo.nA,{children:e.labTests.map((e=>e.name)).join(", ")}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)("span",{className:c(e.status),children:e.status})}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.paymentInfo.totalAmount.toLocaleString("en-IN")]}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(w.$,{variant:"link",onClick:()=>l(`/lab/reports/${e._id}`),children:"View Details"})})]},e._id)))})]})})]})})}const Cc=(0,N.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Dc=(0,N.A)("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),Tc=(0,N.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var kc=__webpack_require__(1176),Ac=__webpack_require__(6691),Pc=__webpack_require__(2316);function Oc(e,t,n){const r=+(0,Pc.a)(e,n?.in),[a,s]=[+(0,Pc.a)(t.start,n?.in),+(0,Pc.a)(t.end,n?.in)].sort(((e,t)=>e-t));return r>=a&&r<=s}var Rc=__webpack_require__(1620),Mc=__webpack_require__(8605),Ic=__webpack_require__(5172),Lc=__webpack_require__(2440);function Fc(e,t){const{start:n,end:r}=(0,Ic.P)(t?.in,e);let a=+n>+r;const s=a?+n:+r,i=a?r:n;i.setHours(0,0,0,0);let o=t?.step??1;if(!o)return[];o<0&&(o=-o,a=!a);const l=[];for(;+i<=s;)l.push((0,Lc.w)(n,i)),i.setDate(i.getDate()+o),i.setHours(0,0,0,0);return a?l.reverse():l}var Bc=__webpack_require__(6465),Wc=__webpack_require__(8756),$c=__webpack_require__(4912),Uc=__webpack_require__(3695),zc=__webpack_require__(6981);const Hc=e=>{var t;return(null===e||void 0===e||null===(t=e.permissions)||void 0===t?void 0:t.includes("view_financial"))||!1},Vc=e=>["blue","green","purple","orange","pink"][e],qc=()=>{var e;const n=(0,j.wA)(),r=(0,a.Zp)(),{userData:s}=(0,j.d4)((e=>e.user)),{dashboardData:i,dashboardDataStatus:o}=(0,j.d4)((e=>e.dashboard)),[l,c]=(0,t.useState)("Today"),[d,u]=(0,t.useState)({from:null,to:null}),[m,h]=(0,t.useState)({from:null,to:null}),p=(0,t.useRef)(null),f=(0,qn.useReactToPrint)({content:()=>p.current,pageStyle:"\n    @media print {\n      @page {\n        size: A4;\n        margin: 5mm;\n      }\n      body {\n        -webkit-print-color-adjust: exact;\n        print-color-adjust: exact;\n        font-size: 90%; /* Reduce overall font size */\n      }\n      .print-section {\n        display: block !important;\n        padding: 5px;\n      }\n      .no-print {\n        display: none !important;\n      }\n      .print-content {\n        position: relative;\n        padding: 10px;\n      }\n      /* Make cards more compact */\n      .grid {\n        gap: 0.5rem !important;\n      }\n      .p-4 {\n        padding: 0.5rem !important;\n      }\n      .p-3 {\n        padding: 0.375rem !important;\n      }\n      .text-xl {\n        font-size: 1rem !important;\n      }\n      .text-2xl {\n        font-size: 1.25rem !important;\n      }\n      .mb-4 {\n        margin-bottom: 0.5rem !important;\n      }\n      .mb-6 {\n        margin-bottom: 0.75rem !important;\n      }\n      /* Reduce table text size */\n      table {\n        font-size: 75% !important;\n      }\n      th, td {\n        padding: 4px !important;\n      }\n      /* Make table more compact */\n      .border {\n        border-width: 1px !important;\n      }\n      /* Ensure table headers are distinct */\n      th {\n        font-weight: bold !important;\n        background-color: #f3f4f6 !important;\n      }\n    }\n  "}),v=(0,t.useMemo)((()=>{if("object"!==typeof i||null===i)return{currentValue:[]};const e=Object.values(i);if("Custom"===l){if(!m.from||!m.to)return{currentValue:[]};const t=(0,kc.o)(m.from),n=(0,Ac.D)(m.to);return{currentValue:e.filter((e=>Oc(new Date(e.date),{start:t,end:n})))}}const t=(0,M.SM)(l),n=new Date(t.from),r=new Date(t.to);return{currentValue:e.filter((e=>Oc(new Date(e.date),{start:n,end:r})))}}),[i,l,m]),g=(0,t.useMemo)((()=>{if(!Array.isArray(v.currentValue))return{totalRevenue:0,totalPatients:0,totalAppointments:0,totalExpense:0,paymentMethods:{}};return v.currentValue.reduce(((e,t)=>{var n,r;e.totalRevenue+=t.revenue||0,e.totalPatients+=t.visitCount||0,e.totalAppointments+=t.ipdCount||0,e.totalExpense+=Object.values(t.expenseTypeWise||{}).reduce(((e,t)=>{let{total:n}=t;return e+(n||0)}),0);return[...(null===(n=t.services)||void 0===n?void 0:n.paymentMethod)||[],...(null===(r=t.pharmacy)||void 0===r?void 0:r.paymentMethod)||[]].forEach((t=>{const n=t.method||"Others";e.paymentMethods[n]||(e.paymentMethods[n]=0),e.paymentMethods[n]+=t.revenue||0})),e}),{totalRevenue:0,totalPatients:0,totalAppointments:0,totalExpense:0,paymentMethods:{}})}),[v]);(0,t.useMemo)((()=>{const e=new Date,t=(0,Rc.k)(e,{weekStartsOn:0}),n=(0,Mc.$)(e,{weekStartsOn:0}),r=Fc({start:t,end:n}).map((e=>({date:e,formattedDate:(0,Go.GP)(e,"EEE"),patients:0,revenue:0})));return"object"===typeof i&&null!==i&&Object.values(i).forEach((e=>{const a=new Date(e.date);if(Oc(a,{start:t,end:n})){const t=r.findIndex((e=>(0,Bc.r)(e.date,a)));-1!==t&&(r[t].revenue=e.revenue||0,r[t].patients=e.totalAppointments||0)}})),r}),[i]).some((e=>e.patients>0||e.revenue>0));(0,t.useEffect)((()=>{x("Today")}),[]);const x=e=>{let t,r;const a=new Date;let s;switch(e){case"Today":t=(0,kc.o)(a),r=(0,Ac.D)(a);break;case"Yesterday":t=(0,kc.o)((0,Wc.e)(a,1)),r=(0,Ac.D)((0,Wc.e)(a,1));break;case"Last 7 Days":t=(0,kc.o)((0,Wc.e)(a,6)),r=(0,Ac.D)(a),s="Last 7 Days";break;case"This Week":t=(0,Rc.k)(a,{weekStartsOn:0}),r=(0,Mc.$)(a,{weekStartsOn:0}),s="This Week";break;case"This Month":t=(0,$c.w)(a),r=(0,Uc.p)(a),s="This Month";break;case"All":t=new Date(0),r=a,s="All";break;case"Custom":if(!d.from||!d.to)return void console.warn("Invalid date range selected");t=d.from,r=(0,zc.f)(d.to,1);break;default:t=(0,kc.o)((0,Wc.e)(a,6)),r=(0,Ac.D)(a)}if(!t||!r)return void console.warn("Invalid date range");const i={startDate:t.toISOString(),endDate:r.toISOString(),range:s};n(Pt(i))},y=(0,t.useMemo)((()=>Array.isArray(v.currentValue)?v.currentValue.reduce(((e,t)=>{var n,r,a,s,i;return e.ipdCollection+=(null===(n=t.ipd)||void 0===n?void 0:n.revenue)||0,e.opdCollection+=(null===(r=t.opd)||void 0===r?void 0:r.revenue)||0,e.opdprocedureCollection+=(null===(a=t.opdProcedures)||void 0===a?void 0:a.revenue)||0,e.pharmacyCollection+=(null===(s=t.pharmacy)||void 0===s?void 0:s.revenue)||0,e.laboratoryCollection+=(null===(i=t.laboratory)||void 0===i?void 0:i.revenue)||0,e}),{ipdCollection:0,opdCollection:0,opdprocedureCollection:0,pharmacyCollection:0,laboratoryCollection:0}):{ipdCollection:0,opdCollection:0,opdprocedureCollection:0,pharmacyCollection:0,laboratoryCollection:0}),[v]),b=(0,t.useMemo)((()=>{if(!Array.isArray(v.currentValue))return{ipdPayments:[],opdPayments:[],opdprocedurePayments:[],pharmacyPayments:[],laboratoryPayments:[]};const e=v.currentValue.reduce(((e,t)=>{var n,r,a,s,i;return((null===(n=t.ipd)||void 0===n?void 0:n.paymentMethod)||[]).forEach((t=>{const n=t.method||"Others";e.ipdPayments[n]||(e.ipdPayments[n]=0),e.ipdPayments[n]+=t.revenue||0})),((null===(r=t.opd)||void 0===r?void 0:r.paymentMethod)||[]).forEach((t=>{const n=t.method||"Others";e.opdPayments[n]||(e.opdPayments[n]=0),e.opdPayments[n]+=t.revenue||0})),((null===(a=t.opdProcedures)||void 0===a?void 0:a.paymentMethod)||[]).forEach((t=>{const n=t.method||"Others";e.opdprocedurePayments[n]||(e.opdprocedurePayments[n]=0),e.opdprocedurePayments[n]+=t.revenue||0})),((null===(s=t.pharmacy)||void 0===s?void 0:s.paymentMethod)||[]).forEach((t=>{const n=t.method||"Others";e.pharmacyPayments[n]||(e.pharmacyPayments[n]=0),e.pharmacyPayments[n]+=t.revenue||0})),((null===(i=t.laboratory)||void 0===i?void 0:i.paymentMethod)||[]).forEach((t=>{const n=t.method||"Others";e.laboratoryPayments[n]||(e.laboratoryPayments[n]=0),e.laboratoryPayments[n]+=t.revenue||0})),e}),{ipdPayments:{},opdPayments:{},opdprocedurePayments:{},pharmacyPayments:{},laboratoryPayments:{}}),t={Cash:"hsl(var(--chart-1))",UPI:"hsl(var(--chart-2))",Card:"hsl(var(--chart-3))",Others:"hsl(var(--chart-4))"};return{ipdPayments:Object.entries(e.ipdPayments).map((e=>{let[n,r]=e;return{method:n,value:r,fill:t[n]||"hsl(var(--chart-4))"}})),opdPayments:Object.entries(e.opdPayments).map((e=>{let[n,r]=e;return{method:n,value:r,fill:t[n]||"hsl(var(--chart-4))"}})),opdprocedurePayments:Object.entries(e.opdprocedurePayments).map((e=>{let[n,r]=e;return{method:n,value:r,fill:t[n]||"hsl(var(--chart-4))"}})),pharmacyPayments:Object.entries(e.pharmacyPayments).map((e=>{let[n,r]=e;return{method:n,value:r,fill:t[n]||"hsl(var(--chart-4))"}})),laboratoryPayments:Object.entries(e.laboratoryPayments).map((e=>{let[n,r]=e;return{method:n,value:r,fill:t[n]||"hsl(var(--chart-4))"}}))}}),[v]),N=(0,t.useMemo)((()=>{const e={};return["ipd","opd","opdprocedure","pharmacy","laboratory"].forEach((t=>{var n;null===b||void 0===b||null===(n=b[`${t}Payments`])||void 0===n||n.forEach((t=>{e[t.method]||(e[t.method]=0),e[t.method]+=t.value||0}))})),Object.entries(e).map((e=>{let[t,n]=e;return{method:t,value:n}}))}),[b]),_=()=>{switch(l){case"Today":return"Today's Stats";case"Yesterday":return"Yesterday's Stats";case"This Week":return"This Week's Stats";case"This Month":return"This Month's Stats";case"Custom":return"Custom Period Stats";default:return"Stats"}},S=e=>{if(c(e),"Custom"!==e){const t=(0,M.SM)(e);h(t),x(e)}},E=e=>new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"});return(0,X.jsxs)("div",{ref:p,className:"container mx-auto p-4 print-content",children:[(0,X.jsxs)("div",{className:"flex flex-col gap-4 mb-4 no-print",children:[(0,X.jsxs)("div",{className:"flex flex-row sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,X.jsx)("h2",{className:"font-bold text-xl text-gray-800",children:_()}),(0,X.jsxs)("div",{className:" gap-2 flex flex-row",children:[Hc(s)&&(0,X.jsxs)(w.$,{size:"sm",onClick:f,className:"print:hidden",children:[(0,X.jsx)(Xn.A,{className:"mr-2 h-4 w-4"}),"Print"]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",size:"sm",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),l]})}),(0,X.jsxs)(Ws,{align:"end",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Time Filter Options"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>S("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>S("Yesterday"),children:"Yesterday"}),(0,X.jsx)($s,{onSelect:()=>S("This Week"),children:"This Week"}),(0,X.jsx)($s,{onSelect:()=>S("This Month"),children:"This Month"}),(0,X.jsx)($s,{onSelect:()=>S("Custom"),children:"Custom Range"})]})]})]})]}),"Custom"===l&&(0,X.jsx)("div",{className:"w-full sm:w-auto",children:(0,X.jsx)(M.Ur,{from:null===d||void 0===d?void 0:d.from,to:null===d||void 0===d?void 0:d.to,onSelect:e=>u(e),onSearch:()=>{d.from&&d.to&&(c("Custom"),h(d),x("Custom"))},onCancel:()=>{u({from:null,to:null}),c("Today"),x("Today")}})})]}),(0,X.jsxs)("div",{className:"hidden print:block mb-4",children:[(0,X.jsx)("h2",{className:"text-xl font-bold mb-1",children:_()}),(0,X.jsx)("p",{className:"text-sm mb-2",children:(()=>{const e=new Date;switch(l){case"Today":return`${E(e)}`;case"Yesterday":const t=new Date(e);return t.setDate(t.getDate()-1),`${E(t)}`;case"This Week":const n=new Date(e);return n.setDate(e.getDate()-7),`${E(n)} - ${E(e)}`;case"This Month":const r=new Date(e.getFullYear(),e.getMonth(),1);return`${E(r)} - ${E(e)}`;case"Custom":return m.from&&m.to?`${E(m.from)} - ${E(m.to)}`:"";default:return""}})()}),Hc(s)&&(0,X.jsx)("table",{className:"w-full border-collapse border text-sm mb-2",children:(0,X.jsxs)("tbody",{children:[(0,X.jsxs)("tr",{className:"border",children:[(0,X.jsx)("td",{className:"border p-2 font-semibold w-[200px]",children:"Total Revenue"}),(0,X.jsx)("td",{className:"border p-2",children:(0,M.vv)(g.totalRevenue)})]}),(0,X.jsxs)("tr",{className:"border",children:[(0,X.jsx)("td",{className:"border p-2 font-semibold",children:"Total Expense"}),(0,X.jsx)("td",{className:"border p-2",children:(0,M.vv)(g.totalExpense)})]}),(0,X.jsxs)("tr",{className:"border",children:[(0,X.jsx)("td",{className:"border p-2 font-semibold",children:"Net Revenue"}),(0,X.jsx)("td",{className:"border p-2 font-bold",children:(0,M.vv)(g.totalRevenue-g.totalExpense)})]})]})}),(0,X.jsxs)("table",{className:"w-full border-collapse border text-sm",children:[(0,X.jsx)("thead",{children:(0,X.jsxs)("tr",{className:"border bg-gray-50",children:[(0,X.jsx)("th",{className:"border p-2",children:"Collection Type"}),(0,X.jsx)("th",{className:"border p-2",children:"Amount"})]})}),(0,X.jsxs)("tbody",{children:[(0,X.jsxs)("tr",{children:[(0,X.jsx)("td",{className:"border p-2",children:"IPD"}),(0,X.jsx)("td",{className:"border p-2",children:(0,M.vv)(y.ipdCollection)})]}),(0,X.jsxs)("tr",{children:[(0,X.jsx)("td",{className:"border p-2",children:"OPD"}),(0,X.jsx)("td",{className:"border p-2",children:(0,M.vv)(y.opdCollection)})]}),(0,X.jsxs)("tr",{children:[(0,X.jsx)("td",{className:"border p-2",children:"OPD Procedure"}),(0,X.jsx)("td",{className:"border p-2",children:(0,M.vv)(y.opdprocedureCollection)})]}),(0,X.jsxs)("tr",{children:[(0,X.jsx)("td",{className:"border p-2",children:"Pharmacy"}),(0,X.jsx)("td",{className:"border p-2",children:(0,M.vv)(y.pharmacyCollection)})]}),(0,X.jsxs)("tr",{children:[(0,X.jsx)("td",{className:"border p-2",children:"Laboratory"}),(0,X.jsx)("td",{className:"border p-2",children:(0,M.vv)(y.laboratoryCollection)})]})]})]}),(0,X.jsxs)("table",{className:"w-full border-collapse border text-sm mt-2",children:[(0,X.jsx)("thead",{children:(0,X.jsxs)("tr",{className:"border bg-gray-50",children:[(0,X.jsx)("th",{className:"border p-2",children:"Patient Type"}),(0,X.jsx)("th",{className:"border p-2",children:"Count"})]})}),(0,X.jsxs)("tbody",{children:[(0,X.jsxs)("tr",{children:[(0,X.jsx)("td",{className:"border p-2",children:"OPD Patients"}),(0,X.jsx)("td",{className:"border p-2",children:g.totalPatients})]}),(0,X.jsxs)("tr",{children:[(0,X.jsx)("td",{className:"border p-2",children:"IPD Patients"}),(0,X.jsx)("td",{className:"border p-2",children:g.totalAppointments})]})]})]})]}),(0,X.jsxs)("div",{className:"grid gap-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-10 gap-4 print:hidden",children:[(0,X.jsx)(k.Zp,{className:"bg-pink-100 shadow-sm lg:col-span-2 transition-all duration-200  hover:shadow-lg hover:scale-[1.02] hover:bg-pink-200 cursor-pointer",children:(0,X.jsx)(k.Wu,{className:"p-3",children:(0,X.jsxs)("div",{className:"flex items-center gap-3",children:[(0,X.jsx)(Cc,{className:"w-8 h-8 text-pink-700"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-2xl font-bold text-pink-700",children:g.totalPatients}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"OPD Patients"})]})]})})}),(0,X.jsx)(k.Zp,{className:"bg-orange-100 shadow-sm lg:col-span-2 transition-all duration-200  hover:shadow-lg hover:scale-[1.02] hover:bg-orange-200 cursor-pointer",children:(0,X.jsx)(k.Wu,{className:"p-3",children:(0,X.jsxs)("div",{className:"flex items-center gap-3",children:[(0,X.jsx)(zo,{className:"w-8 h-8 text-orange-700"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-2xl font-bold text-orange-700",children:g.totalAppointments}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"IPD Patients"})]})]})})}),(0,X.jsx)(k.Zp,{className:"bg-purple-100 shadow-sm lg:col-span-3 transition-all duration-200  hover:shadow-lg hover:scale-[1.02] hover:bg-purple-200 cursor-pointer",onClick:()=>r("/payments",{state:{paymentTypeFilter:"Income",dateFilter:l,dateRange:"Custom"===l?m:null}}),children:(0,X.jsx)(k.Wu,{className:"p-3",children:(0,X.jsxs)("div",{className:"flex gap-3",children:[(0,X.jsx)(Dc,{className:"w-8 h-8 text-purple-700 shrink-0"}),(0,X.jsx)("div",{className:"w-full",children:(0,X.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-4",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-2xl font-bold text-purple-700 "+(Hc(s)?"":"blur-sm select-none"),children:Hc(s)?(0,M.vv)(g.totalRevenue):"\u20b9XXXXX"}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Total Revenue"})]}),Hc(s)&&(0,X.jsx)("div",{className:"flex gap-2 flex-wrap justify-start lg:justify-end w-full lg:w-auto",children:N.map((e=>(0,X.jsxs)("div",{className:"bg-purple-50 px-2 py-1 rounded-md transition-colors duration-200 hover:bg-purple-100",children:[(0,X.jsx)("p",{className:"text-xs font-medium text-gray-600",children:e.method}),(0,X.jsx)("p",{className:"text-sm font-bold text-gray-700",children:(0,M.vv)(e.value)})]},e.method)))})]})})]})})}),(0,X.jsx)(k.Zp,{className:"bg-blue-100 shadow-sm lg:col-span-3 transition-all duration-200  hover:shadow-lg hover:scale-[1.02] hover:bg-blue-200 cursor-pointer",onClick:()=>r("/payments",{state:{paymentTypeFilter:"Expense",dateFilter:l,dateRange:"Custom"===l?m:null}}),children:(0,X.jsx)(k.Wu,{className:"p-3",children:(0,X.jsxs)("div",{className:"flex gap-3",children:[(0,X.jsx)(Dc,{className:"w-8 h-8 text-blue-700 shrink-0"}),(0,X.jsx)("div",{className:"w-full",children:(0,X.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-4",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-2xl font-bold text-blue-700 "+(Hc(s)?"":"blur-sm select-none"),children:Hc(s)?(0,M.vv)(g.totalExpense):"\u20b9XXXXX"}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Total Expense"})]}),Hc(s)&&(0,X.jsx)("div",{className:"flex gap-2 flex-wrap justify-start lg:justify-end w-full lg:w-auto",children:Object.entries((null===(e=v.currentValue[0])||void 0===e?void 0:e.expenseTypeWise)||{}).map((e=>{let[t,n]=e;return n.total>0&&(0,X.jsxs)("div",{className:"bg-blue-50 px-2 py-1 rounded-md transition-colors  duration-200 hover:bg-blue-100",children:[(0,X.jsx)("p",{className:"text-xs font-medium text-gray-600",children:t.charAt(0).toUpperCase()+t.slice(1)}),(0,X.jsx)("p",{className:"text-sm font-bold text-gray-700",children:(0,M.vv)(n.total)})]},t)}))})]})})]})})})]}),(0,X.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 print:hidden",children:["IPD","OPD","OPD Procedure","Pharmacy","Laboratory"].map(((e,t)=>(0,X.jsx)(k.Zp,{className:`bg-${Vc(t)}-100 shadow-sm \n                  transition-all duration-200 hover:shadow-lg hover:scale-[1.02] \n                  hover:bg-${Vc(t)}-200 cursor-pointer`,onClick:()=>(e=>{r("/payments",{state:{paymentCategoryFilter:{"OPD Procedure":"OPDProcedure"}[e]||e,paymentTypeFilter:"Income",dateFilter:l,dateRange:"Custom"===l?m:null}})})(e),children:(0,X.jsx)(k.Wu,{className:"p-3",children:(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(Tc,{className:`w-6 h-6 text-${Vc(t)}-700`}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:`text-xl font-bold text-${Vc(t)}-700 ${Hc(s)?"":"blur-sm select-none"}`,children:Hc(s)?(0,M.vv)(y[`${e.toLowerCase().replace(/\s+/g,"")}Collection`]):"\u20b9XXXXX"}),(0,X.jsxs)("p",{className:"text-xs text-gray-600",children:[e," Collection"]})]})]})})},e)))}),(0,X.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 print:hidden",children:["IPD","OPD","OPD Procedure","Pharmacy","Laboratory"].map((e=>{var t,n;return(0,X.jsxs)(k.Zp,{className:"shadow-sm transition-all duration-200  hover:shadow-lg hover:scale-[1.02] hover:bg-gray-50",children:[(0,X.jsx)(k.aR,{className:"py-2 px-3",children:(0,X.jsxs)(k.ZB,{className:"text-sm",children:[e," Payments"]})}),(0,X.jsx)(k.Wu,{className:"p-1",children:Hc(s)?(0,X.jsx)("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:null===b||void 0===b||null===(t=b[`${null===e||void 0===e||null===(n=e.replace(" ",""))||void 0===n?void 0:n.toLowerCase()}Payments`])||void 0===t?void 0:t.map((e=>(0,X.jsx)("div",{className:"bg-gray-50 p-2 rounded transition-colors  duration-200 hover:bg-gray-100",children:(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("span",{className:"text-xs font-medium",children:e.method}),(0,X.jsx)("span",{className:"text-sm font-bold",children:(0,M.vv)(e.value)})]})},e.method)))}):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center h-24 text-gray-500",children:[(0,X.jsx)(Jo,{className:"w-8 h-8 mb-1"}),(0,X.jsx)("p",{className:"text-xs text-center",children:"No permission"})]})})]},e)}))}),Hc(s)&&(0,X.jsx)("div",{className:"mt-4",children:(0,X.jsxs)(k.Zp,{className:"max-w-2xl mx-auto shadow-lg transition-all duration-200 hover:shadow-xl hover:scale-[1.02]",children:[(0,X.jsx)(k.aR,{className:"text-center pb-2",children:(0,X.jsx)(k.ZB,{className:"text-xl font-bold",children:"Net Amount Overview"})}),(0,X.jsx)(k.Wu,{children:(0,X.jsx)("div",{className:"space-y-4",children:(0,X.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),(0,X.jsx)("p",{className:"text-lg font-bold text-green-600",children:(0,M.vv)(g.totalRevenue)})]}),(0,X.jsx)("div",{className:"text-xl",children:"-"}),(0,X.jsxs)("div",{className:"space-y-1 text-right",children:[(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Total Expense"}),(0,X.jsx)("p",{className:"text-lg font-bold text-red-600",children:(0,M.vv)(g.totalExpense)})]}),(0,X.jsx)("div",{className:"text-xl",children:"="}),(0,X.jsxs)("div",{className:"space-y-1 text-right",children:[(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Net Revenue"}),(0,X.jsx)("p",{className:"text-lg font-bold text-blue-600",children:(0,M.vv)(g.totalRevenue-g.totalExpense)})]})]})})})]})})]})]})};function Gc(e){return(0,Lc.w)(e,Date.now())}function Kc(e,t){return(0,Bc.r)((0,Lc.w)(t?.in||e,e),Gc(t?.in||e))}const Yc=(0,N.A)("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Xc=(0,N.A)("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);function Zc(e){const[n,r]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{const t=window.matchMedia(e);r(t.matches);const n=e=>r(e.matches);return t.addEventListener("change",n),()=>t.removeEventListener("change",n)}),[e]),n}const Jc=e=>{var n,r,a,s,i,o,l,c,d,u,m,h,p,f,v,g,x,y,N,_,S,E,C,D,k,A;let{isOpen:P,setIsOpen:O,billData:R,viewMode:I}=e;const L=(0,t.useRef)(),[F,B]=(0,t.useState)(!1),[W,$]=(0,t.useState)(!1),{settings:U}=(Zc("(max-width: 640px)"),(0,j.d4)((e=>e.hospitalSettings))),[z,H]=(0,t.useState)(I);(0,t.useEffect)((()=>{U&&H(I||U.defaultBillPrintView||"list")}),[U,I]);const[V,q]=(0,t.useState)([]),G=(0,j.d4)((e=>e.hospital.hospitalInfo)),K=(0,j.d4)((e=>e.templates.headerTemplateArray)),Y=(null===K||void 0===K?void 0:K.length)>0?K[0].value:Kn.h,Z=(0,Gn.G)(Y||Kn.h),[J,Q]=(0,t.useState)(!0),ee=(null===R||void 0===R?void 0:R.services)||[],te=(0,t.useMemo)((()=>{if(!ee||!Array.isArray(ee))return[];if("datewise"!==z)return[];const e=ee.reduce(((e,t,n)=>{const r=t.date?(0,Go.GP)(new Date(t.date),"yyyy-MM-dd"):"No Date";return e[r]||(e[r]=[]),e[r].push({...t,originalIndex:n}),e}),{});return Object.entries(e).sort(((e,t)=>{let[n]=e,[r]=t;return new Date(n)-new Date(r)})).map((e=>{let[t,n]=e;return{date:t,services:n.sort(((e,t)=>e.date&&t.date?new Date(e.date)-new Date(t.date):0))}}))}),[ee,z]);t.useEffect((()=>{null!==R&&void 0!==R&&R.services&&q(R.services.map(((e,t)=>t)))}),[R]),t.useEffect((()=>()=>{document.body.style=""}),[]);const ne=(e,t)=>{q((n=>t?[...n,e]:n.filter((t=>t!==e))))},re=(0,qn.useReactToPrint)({content:()=>L.current,onBeforeGetContent:()=>(B(!0),new Promise((e=>{setTimeout((()=>{B(!1),e()}),0)}))),pageStyle:"\n      @media print {\n        @page {\n          size: A4;\n          margin: 20mm;\n        }\n        body {\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-only {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n        .print-content {\n           position: relative;\n          min-height: 100vh;\n         padding: 20px;\n        }\n      }\n    "});if(!R)return null;const ae=e=>e?e.amountPaid===e.totalAmount?"Paid":"Due":"N/A",se=()=>{const e=ee.reduce(((e,t,n)=>(V.includes(n)||(e+=(t.quantity||0)*(t.rate||0)),e)),0);return{subTotal:(R.subtotal||0)-e}};return(0,X.jsx)(Io.lG,{open:P,onOpenChange:O,children:(0,X.jsxs)(Io.Cf,{className:"max-w-3xl max-h-[90vh] overflow-visible rounded-lg",children:[(0,X.jsxs)(b.F,{className:"max-h-[80vh] pr-3 ",children:[(0,X.jsxs)("div",{ref:L,className:F?"print-content":"",children:[(0,X.jsx)("div",{className:"hidden print:block mb-2",children:(0,X.jsx)(Z,{hospitalInfo:G})}),(0,X.jsxs)("div",{className:"print:pb-6",children:[(0,X.jsx)("div",{className:"no-print",children:(0,X.jsx)(Io.c7,{className:"pb-2",children:(0,X.jsx)(Io.L3,{children:"Bill Details"})})}),(0,X.jsxs)("div",{className:"grid gap-2 py-1",children:[(0,X.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Name:"}),(0,X.jsx)("p",{children:(null===(n=R.patientInfo)||void 0===n?void 0:n.name)||"N/A"})]}),null!==(r=R.patientInfo)&&void 0!==r&&r.registrationNumber||null!==(a=R.patient)&&void 0!==a&&a.registrationNumber?(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"UHID No:"}),(0,X.jsx)("p",{children:(null===(s=R.patientInfo)||void 0===s?void 0:s.registrationNumber)||(null===(i=R.patient)||void 0===i?void 0:i.registrationNumber)})]}):null,null!==(o=R.patientInfo)&&void 0!==o&&o.contactNumber||null!==(l=R.patientInfo)&&void 0!==l&&l.phone?(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Contact:"}),(0,X.jsx)("p",{children:(null===(c=R.patientInfo)||void 0===c?void 0:c.contactNumber)||(null===(d=R.patientInfo)||void 0===d?void 0:d.phone)})]}):null,null!==(u=R.patientInfo)&&void 0!==u&&u.ipdNumber?(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"IPD No:"}),(0,X.jsx)("p",{children:null===(m=R.patientInfo)||void 0===m?void 0:m.ipdNumber})]}):null,null!==(h=R.patientInfo)&&void 0!==h&&h.age||null!==(p=R.patient)&&void 0!==p&&p.age?(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Age/Gender:"}),(0,X.jsx)("p",{children:`${(0,M.F1)((null===(f=R.patientInfo)||void 0===f?void 0:f.age)||(null===(v=R.patient)||void 0===v?void 0:v.age))}/${(null===(g=R.patientInfo)||void 0===g?void 0:g.gender)||(null===(x=R.patient)||void 0===x?void 0:x.gender)}`})]}):null,null!==(y=R.patientInfo)&&void 0!==y&&y.address||null!==(N=R.patient)&&void 0!==N&&N.address?(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Address:"}),(0,X.jsx)("p",{children:(null===(_=R.patientInfo)||void 0===_?void 0:_.address)||(null===(S=R.patient)||void 0===S?void 0:S.address)})]}):null,R.invoiceNumber?(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Invoice Number:"}),(0,X.jsx)("p",{children:R.invoiceNumber})]}):null,R.admissionDate?(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Admit Date:"}),(0,X.jsx)("p",{children:(0,Go.GP)(new Date(R.admissionDate),"dd/MM/yyyy")})]}):null,R.dischargeDate?(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Discharge Date:"}),(0,X.jsx)("p",{children:(0,Go.GP)(new Date(R.dischargeDate),"dd/MM/yyyy")})]}):null,!R.createdAt||R.admissionDate||R.dischargeDate?null:(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Date:"}),(0,X.jsx)("p",{children:(0,Go.GP)(new Date(R.createdAt),"dd/MM/yyyy")})]})]}),(0,X.jsxs)("div",{children:[" ",R.operationName?(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Operation:"}),(0,X.jsx)("p",{children:R.operationName})]}):null]}),(0,X.jsx)("div",{children:null!==(E=R.opdProcedure)&&void 0!==E&&E.procedureName?(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Proceudure:"}),(0,X.jsx)("p",{children:null===(C=R.opdProcedure)||void 0===C?void 0:C.procedureName})]}):null}),ee.length>0?(0,X.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,X.jsxs)("div",{className:"w-full",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-1 no-print",children:"Bill Items"}),(0,X.jsxs)(Wo.XI,{className:"border-2 border-gray-200",children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{className:"border-b border-gray-200 bg-gray-200 ",children:[(0,X.jsx)(Wo.nd,{className:"border-r border-gray-300 w-16 no-print h-[30px] py-1",children:(0,X.jsx)(zl,{checked:V.length===ee.length,onCheckedChange:e=>{q(e?ee.map(((e,t)=>t)):[])}})}),(0,X.jsx)(Wo.nd,{className:"border-r border-gray-300 w-16 hidden print:table-cell h-[30px] py-1",children:"No."}),(0,X.jsx)(Wo.nd,{className:"border-r border-gray-300 w-1/3 h-[30px] py-1",children:"Service Name"}),("list"===z||!z)&&(0,X.jsx)(Wo.nd,{className:"border-r border-gray-300 w-24 h-[30px] py-1",children:"Date"}),(0,X.jsx)(Wo.nd,{className:"border-r border-gray-300 w-24 h-[30px] py-1 text-center",children:"Quantity"}),(0,X.jsx)(Wo.nd,{className:"border-r border-gray-300 w-24 h-[30px] py-1 text-center",children:"Price (INR)"}),(0,X.jsx)(Wo.nd,{className:"w-24 h-[30px] text-center",children:"Total (INR)"})]})}),"datewise"===z&&te.length>0?(0,X.jsx)(Wo.BF,{children:te.map((e=>{let{date:n,services:r}=e;return(0,X.jsxs)(t.Fragment,{children:[(0,X.jsx)(Wo.Hj,{className:"bg-gray-50 ",children:(0,X.jsx)(Wo.nA,{colSpan:4,className:"font-semibold  text-[13px] h-[25px] py-0",children:"No Date"===n?"No Date":(0,Go.GP)(new Date(n),"dd/MM/yyyy")})}),r.map((e=>(0,X.jsxs)(Wo.Hj,{className:"border-b border-gray-200 "+(!V.includes(e.originalIndex)&&F?"hidden":""),children:[(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 no-print h-[25px] py-1",children:(0,X.jsx)(zl,{checked:V.includes(e.originalIndex),onCheckedChange:t=>ne(e.originalIndex,t)})}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 hidden print:table-cell h-[25px] py-1",children:V.includes(e.originalIndex)?V.filter((t=>t<=e.originalIndex)).length:""}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 h-[25px] py-1",children:e.name||"N/A"}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 h-[25px] py-1",children:e.quantity||0}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 h-[25px] py-1 text-right",children:(0,M.vv)(e.rate||0)}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 h-[25px] py-1 text-right",children:(0,M.vv)((e.quantity||0)*(e.rate||0))})]},e.originalIndex)))]},n)}))}):(0,X.jsx)(Wo.BF,{children:ee.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{className:"border-b border-gray-200 "+(!V.includes(t)&&F?"hidden":""),children:[(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 no-print h-[25px] py-1",children:(0,X.jsx)(zl,{checked:V.includes(t),onCheckedChange:e=>ne(t,e)})}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 hidden print:table-cell h-[25px] py-1",children:V.includes(t)?V.filter((e=>e<=t)).length:""}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 h-[25px] py-1",children:e.name||"N/A"}),"list"===z&&(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 h-[25px] py-1",children:e.date?(0,Go.GP)(new Date(e.date),"dd/MM/yyyy"):"N/A"}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 h-[25px] py-1 text-center",children:e.quantity||0}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 h-[25px] py-1 text-right",children:(0,M.vv)(e.rate||0)}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200 h-[25px] py-1 text-right",children:(0,M.vv)((e.quantity||0)*(e.rate||0))})]},t)))})]})]}),(0,X.jsx)(Lo,{isOpen:W,setIsOpen:$}),(0,X.jsx)("div",{className:"flex justify-end",children:(0,X.jsx)("div",{className:"w-64",children:(0,X.jsxs)("div",{className:"border rounded px-3 space-y-2 bg-white text-sm",children:[(0,X.jsx)("h3",{className:"font-semibold text-base border-b pb-1",children:"Payment Summary"}),(0,X.jsxs)("div",{className:"flex flex-col space-y-0.5",children:[(0,X.jsxs)("div",{className:"flex justify-between w-full items-center",children:[(0,X.jsx)("span",{className:"text-gray-600",children:"Sub Total:"}),(0,X.jsx)("span",{children:(0,M.vv)(se().subTotal)})]}),(0,X.jsxs)("div",{className:"flex justify-between w-full items-center",children:[(0,X.jsx)("span",{className:"text-gray-600",children:"Discount:"}),(0,X.jsx)("span",{children:(0,M.vv)(R.additionalDiscount||0)})]}),(0,X.jsxs)("div",{className:"flex justify-between w-full items-center border-t border-gray-200 pt-0.5",children:[(0,X.jsx)("span",{className:"font-medium",children:"Net Total:"}),(0,X.jsx)("span",{className:"font-medium",children:(0,M.vv)(se().subTotal-(R.additionalDiscount||0))})]}),(0,X.jsxs)("div",{className:"flex justify-between w-full items-center",children:[(0,X.jsx)("span",{className:"text-gray-600",children:"Paid:"}),(0,X.jsx)("span",{className:"text-green-600",children:(0,M.vv)(R.amountPaid||0)})]}),(0,X.jsxs)("div",{className:"flex justify-between w-full items-center border-t border-gray-200 pt-0.5",children:[(0,X.jsx)("span",{className:"text-gray-600 font-semibold",children:"Balance:"}),(0,X.jsx)("span",{className:"text-red-600 font-semibold",children:(0,M.vv)((R.totalAmount||0)-(R.amountPaid||0))})]}),(0,X.jsxs)("div",{className:"w-full flex justify-between text-xs mt-0.5",children:[(0,X.jsx)("span",{className:"font-medium",children:"Status:"}),(0,X.jsx)("span",{className:"Paid"===ae(R)?"text-green-600 font-semibold":"text-red-600 font-semibold",children:ae(R)})]})]})]})})})]}):(0,X.jsx)("div",{className:"mx-auto w-full max-w-md",children:(0,X.jsxs)("div",{className:"border-2 p-6 rounded-lg shadow-sm",children:[(0,X.jsxs)("div",{className:"text-center mb-4",children:[(0,X.jsx)("h3",{className:"text-xl font-semibold",children:"Payment Receipt"}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:R.createdAt?(0,Go.GP)(new Date(R.createdAt),"dd/MM/yyyy hh:mm a"):"N/A"})]}),(0,X.jsxs)("div",{children:[(0,X.jsxs)("div",{className:"flex justify-between items-center text-base",children:[(0,X.jsx)("span",{className:"text-gray-700 font-medium",children:"Sub Total:"}),(0,X.jsx)("span",{className:"font-medium",children:(0,M.vv)(se().subTotal)})]}),(0,X.jsxs)("div",{className:"flex justify-between items-center text-base",children:[(0,X.jsx)("span",{className:"text-gray-700 font-medium",children:"Discount:"}),(0,X.jsx)("span",{className:"font-medium",children:(0,M.vv)(R.additionalDiscount||0)})]}),(0,X.jsxs)("div",{className:"flex justify-between items-center text-base border-t-2 border-gray-200 pt-2",children:[(0,X.jsx)("span",{className:"font-semibold",children:"Net Total:"}),(0,X.jsx)("span",{className:"font-semibold",children:(0,M.vv)(R.subtotal-(R.additionalDiscount||0))})]}),(0,X.jsxs)("div",{className:"flex justify-between items-center text-base",children:[(0,X.jsx)("span",{className:"text-gray-700 font-medium",children:"Paid:"}),(0,X.jsx)("span",{className:"text-green-600 font-medium",children:(0,M.vv)(R.amountPaid||0)})]}),(0,X.jsxs)("div",{className:"flex justify-between items-center text-base border-t-2 border-gray-200 pt-2",children:[(0,X.jsx)("span",{className:"font-semibold",children:"Balance:"}),(0,X.jsx)("span",{className:"text-red-600 font-semibold",children:(0,M.vv)((R.totalAmount||0)-(R.amountPaid||0))})]}),(0,X.jsxs)("div",{className:"text-center mt-4 pt-2 border-t-2 border-gray-200",children:[(0,X.jsxs)("div",{className:"font-medium text-base",children:[(0,X.jsx)("span",{children:"Status: "}),(0,X.jsx)("span",{className:""+("Paid"===ae(R)?"text-green-600":"text-red-600"),children:ae(R)})]}),(0,X.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,X.jsx)("p",{children:"Amount in words:"}),(0,X.jsxs)("p",{className:"font-medium",children:[(0,M.GF)(R.totalAmount)," Rupees Only"]})]})]})]})]})}),(0,X.jsxs)("p",{children:["Invoice generated By: ",null===R||void 0===R||null===(D=R.createdBy)||void 0===D?void 0:D.name]}),(0,X.jsx)("div",{className:"",children:(0,X.jsxs)("div",{className:""+(J?"":"no-print"),children:[(0,X.jsxs)("div",{className:"flex flex-row items-center mb-2 w-auto gap-2",children:[(0,X.jsx)(zl,{id:"printPaymentHistory",checked:J,onCheckedChange:Q,className:"print:hidden"}),(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Payment History"}),(null===R||void 0===R||null===(k=R.payments)||void 0===k?void 0:k.length)>0&&(0,X.jsx)(Qo,{payments:null===R||void 0===R?void 0:R.payments,billData:R,styleData:!0})]}),null!==R&&void 0!==R&&R.payments&&(null===R||void 0===R||null===(A=R.payments)||void 0===A?void 0:A.length)>0?(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[40px] h-[30px]",children:"S.No."}),(0,X.jsx)(Wo.nd,{className:"w-[100px] h-[30px]",children:"Payment No"}),(0,X.jsx)(Wo.nd,{className:"w-[150pxx] h-[30px]",children:"Date & Time"}),(0,X.jsx)(Wo.nd,{className:"h-[30px]",children:"Amount (\u20b9)"}),(0,X.jsx)(Wo.nd,{className:"h-[30px]",children:"Method"}),(0,X.jsx)(Wo.nd,{className:"h-[30px]",children:"Collected By"}),(0,X.jsx)(Wo.nd,{className:"no-print h-[30px]",children:"Receipt"})]})}),(0,X.jsx)(Wo.BF,{children:R.payments.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{className:" h-[25px] py-1",children:[(0,X.jsx)(Wo.nA,{className:"text-xs h-[25px] py-1",children:t+1}),(0,X.jsx)(Wo.nA,{className:"text-xs h-[25px] py-1",children:(null===e||void 0===e?void 0:e.paymentNumber)||"--"}),(0,X.jsx)(Wo.nA,{className:"text-xs h-[25px] py-1",children:(0,Go.GP)(new Date(e.createdAt),"dd/MM/yyyy hh:mm a")}),(0,X.jsx)(Wo.nA,{className:"text-xs font-medium h-[25px] py-1",children:(0,M.vv)(null===e||void 0===e?void 0:e.amount)}),(0,X.jsx)(Wo.nA,{className:"text-xs h-[25px] py-1",children:e.paymentMethod}),(0,X.jsx)(Wo.nA,{className:"text-xs h-[25px] py-1",children:e.createdByName||"--"}),(0,X.jsx)(Wo.nA,{className:"text-xs no-print h-[25px] py-1",children:(0,X.jsx)(Qo,{payment:e,billData:R})})]},t)))})]})}):(0,X.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-500 py-4",children:[(0,X.jsx)(Jo,{size:18}),(0,X.jsx)("span",{children:"No payment history found"})]})]})})]})]})]}),(0,X.jsxs)("div",{className:"flex flex-col-reverse gap-1 sm:flex-row sm:space-y-0 sm:space-x-2 mt-4 justify-end",children:[(0,X.jsx)(w.$,{type:"button",variant:"secondary",onClick:()=>O(!1),children:"Close"}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",onClick:()=>{G.discontinuedDaysLeft<0?$(!0):re()},children:[(0,X.jsx)(Xn.A,{className:"mr-2 h-4 w-4"}),"Print Bill"]})]})]}),(0,X.jsxs)("button",{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",onClick:()=>O(!1),children:[(0,X.jsx)(T.A,{className:"h-4 w-4"}),(0,X.jsx)("span",{className:"sr-only",children:"Close"})]})]})})},Qc=e=>{let{isOpen:n,setIsOpen:r,payment:a,billData:s,onSuccess:i}=e;const o=(0,j.wA)(),{toast:l}=(0,H.dj)(),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[h,p]=(0,t.useState)(""),[f,v]=(0,t.useState)(""),{editPaymentStatus:g,error:x}=(0,j.d4)((e=>e.bills)),y="loading"===g;(0,t.useEffect)((()=>{if(n&&a){const e=new Date(a.createdAt),t=new Date(e.toLocaleString("en-US",{timeZone:"Asia/Kolkata"}));d(a.amount.toString()),m(a.paymentMethod),p(t.toISOString().split("T")[0]),v(t.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",timeZone:"Asia/Kolkata"}))}}),[n,a]);return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:"w-[90vw] max-w-[400px] max-h-[90vh] overflow-y-auto rounded-lg px-[14px]",children:[(0,X.jsx)(Io.c7,{children:(0,X.jsx)(Io.L3,{className:"text-xl font-semibold",children:"Edit Payment"})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"editPaymentAmount",children:"Payment Amount"}),(0,X.jsx)(Vn.p,{id:"editPaymentAmount",type:"number",value:c,onChange:e=>d(e.target.value),placeholder:"Enter amount"})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"editPaymentMethod",children:"Payment Method"}),(0,X.jsxs)(A.l6,{onValueChange:m,value:u,children:[(0,X.jsx)(A.bq,{id:"editPaymentMethod",children:(0,X.jsx)(A.yv,{placeholder:"Select method"})}),(0,X.jsx)(A.gC,{children:["Cash","UPI","Card","Bank Transfer","Other"].map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"editPaymentDateTime",children:"Payment Date & Time"}),(0,X.jsxs)("div",{className:"flex gap-2",children:[(0,X.jsx)(Vn.p,{id:"editPaymentDate",type:"date",value:h,onChange:e=>p(e.target.value),className:"flex-1"}),(0,X.jsx)(Vn.p,{id:"editPaymentTime",type:"time",value:f,onChange:e=>v(e.target.value),className:"flex-1"})]})]})]}),(0,X.jsxs)(Io.Es,{className:"mt-6",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>r(!1),disabled:y,children:"Cancel"}),(0,X.jsx)(w.$,{onClick:async()=>{if(!c||!u)return void l({title:"Error",description:"Please fill in all required fields",variant:"destructive"});const e=new Date(`${h}T${f}`),t=new Date(e.toLocaleString("en-US",{timeZone:"UTC"})),n={amount:parseFloat(c),paymentMethod:u,createdAt:t.toISOString()};o(wt({billId:s._id,paymentId:a._id,paymentData:n})).unwrap().then((e=>{l({title:"Success",description:"Payment updated successfully",variant:"success"}),i&&i(e)})).catch((e=>{l({title:"Error",description:e||"Failed to edit payment",variant:"destructive"})}))},disabled:y,children:y?"Saving...":"Save Changes"})]})]})})},ed=()=>{const e=(new Date).toLocaleString("en-US",{timeZone:"Asia/Kolkata",hour12:!1}),t=new Date(e);return{date:t.toISOString().split("T")[0],time:t.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",timeZone:"Asia/Kolkata"})}},td=e=>{var n,r,a,s;let{isOpen:i,setIsOpen:o,billData:l,onPaymentSuccess:c}=e;const d=(0,j.wA)(),{toast:u}=(0,H.dj)(),[m,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),[v,g]=(0,t.useState)(ed().date),[x,y]=(0,t.useState)(ed().time),[b,N]=(0,t.useState)(!1),_=Zc("(max-width: 640px)"),[S,E]=(0,t.useState)(""),[C,D]=(0,t.useState)(!1),[T,k]=(0,t.useState)(null),[P,O]=(0,t.useState)(!1),[R,I]=(0,t.useState)(!1),[L,F]=(0,t.useState)(null),[B,W]=(0,t.useState)(!1),$=(0,j.d4)((e=>e.user.userData)),U=null===$||void 0===$||null===(n=$.permissions)||void 0===n?void 0:n.includes("delete_payments");(0,t.useEffect)((()=>{if(i){const{date:e,time:t}=ed();h(""),f(""),g(e),y(t),E("")}}),[i]);const z=(null===l||void 0===l?void 0:l.totalAmount)||0,V=z-((null===l||void 0===l?void 0:l.amountPaid)||0),q=m&&p&&!S&&parseFloat(m)>0;if(!l)return null;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Io.lG,{open:i,onOpenChange:o,children:(0,X.jsxs)(Io.Cf,{className:"w-[90vw] max-w-[450px] max-h-[90vh] overflow-y-auto rounded-lg px-[14px]",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{className:"text-xl font-semibold",children:"Add Payment"}),(0,X.jsx)(Io.rr,{children:"Manage payments for the bill."})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsxs)("div",{className:"flex justify-between text-sm font-medium",children:[(0,X.jsxs)("span",{className:"sm:hidden",children:["Total:"," ",(0,X.jsx)("span",{className:"text-primary",children:(0,M.vv)(z)})]}),(0,X.jsxs)("span",{className:"sm:hidden",children:["Due:"," ",(0,X.jsx)("span",{className:"text-red-600",children:(0,M.vv)(V)})]}),(0,X.jsxs)("span",{className:"hidden sm:inline",children:["Total Amount:"," ",(0,X.jsx)("span",{className:"text-primary",children:(0,M.vv)(z)})]}),(0,X.jsxs)("span",{className:"hidden sm:inline",children:["Due Amount:"," ",(0,X.jsx)("span",{className:"text-red-600",children:(0,M.vv)(V)})]})]}),(0,X.jsx)(Mo,{}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2 pt-4",children:[(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"paymentAmount",children:"Payment Amount"}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Vn.p,{id:"paymentAmount",type:"number",value:m,onChange:e=>{const t=e.target.value;h(t)},placeholder:"Enter amount",className:"pr-10 "+(S?"border-red-500":"")}),(0,X.jsx)(w.$,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2",onClick:()=>{h(V.toFixed(2))},title:"Set Due Amount",children:(0,X.jsx)(jc,{className:"h-4 w-4"})})]}),S&&(0,X.jsx)("p",{className:"text-xs text-red-500 mt-1",children:S})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"paymentMethod",children:"Payment Method"}),(0,X.jsxs)(A.l6,{onValueChange:f,value:p,children:[(0,X.jsx)(A.bq,{id:"paymentMethod",children:(0,X.jsx)(A.yv,{placeholder:"Select method"})}),(0,X.jsx)(A.gC,{children:["Cash","UPI","Card","Bank Transfer","Other"].map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})]})]}),(0,X.jsxs)("div",{className:"space-y-1 pt-4",children:[(0,X.jsx)(Ks.J,{htmlFor:"paymentDateTime",children:"Payment Date & Time"}),(0,X.jsxs)("div",{className:"flex gap-2",children:[(0,X.jsx)(Vn.p,{id:"paymentDate",type:"date",value:v,onChange:e=>g(e.target.value),max:ed().date,className:"flex-1"}),(0,X.jsx)(Vn.p,{id:"paymentTime",type:"time",value:x,onChange:e=>y(e.target.value),className:"flex-1"})]})]})]}),(0,X.jsx)(Mo,{}),(0,X.jsxs)("div",{className:"space-y-0",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsx)("h4",{className:"text-sm font-semibold",children:"Recent Payments"}),(null===l||void 0===l||null===(r=l.payments)||void 0===r?void 0:r.length)>0&&(0,X.jsx)(Qo,{payments:l.payments,billData:l,styleData:!0})]}),null!==l&&void 0!==l&&l.payments&&(null===l||void 0===l||null===(a=l.payments)||void 0===a?void 0:a.length)>0?(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[80px]",children:"Date"}),!_&&(0,X.jsx)(Wo.nd,{className:"w-[80px]",children:"Time"}),(0,X.jsx)(Wo.nd,{children:"Amount"}),(0,X.jsx)(Wo.nd,{children:"Method"}),(0,X.jsx)(Wo.nd,{children:"Receipt"}),(0,X.jsx)(Wo.nd,{children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:l.payments.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-xs",children:new Date(e.createdAt).toLocaleDateString("en-GB",{timeZone:"Asia/Kolkata"})}),!_&&(0,X.jsx)(Wo.nA,{className:"text-xs",children:new Date(e.createdAt).toLocaleString("en-US",{timeZone:"Asia/Kolkata",hour:"numeric",minute:"numeric",hour12:!0})}),(0,X.jsx)(Wo.nA,{className:"text-xs font-medium",children:(0,M.vv)(null===e||void 0===e?void 0:e.amount)}),(0,X.jsx)(Wo.nA,{className:"text-xs",children:e.paymentMethod}),(0,X.jsx)(Wo.nA,{className:"text-xs",children:(0,X.jsx)(Qo,{payment:e,billData:l})}),(0,X.jsx)(Wo.nA,{children:(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)($o,{className:"h-4 w-4"})})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)($s,{onClick:()=>(e=>{F(e),W(!0)})(e),children:"Edit Payment"}),(0,X.jsx)($s,{className:"text-red-600",onClick:()=>(e=>{k(e),U?D(!0):I(!0)})(e),children:"Delete Payment"})]})]})})]},t)))})]})}):(0,X.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-500 py-4",children:[(0,X.jsx)(Jo,{size:18}),(0,X.jsx)("span",{children:"No recent payments found"})]})]}),(0,X.jsxs)(Io.Es,{className:"mt-6 flex-col-reverse gap-2  sm:flex-row sm:space-y-0 sm:space-x-2",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>o(!1),disabled:b,className:"w-full sm:w-auto",children:"Close"}),(0,X.jsx)(w.$,{onClick:()=>{if(!m||!p)return void u({title:"Error",description:"Please fill in all fields",variant:"destructive"});N(!0),O(!1);const e=((e,t)=>{const n=new Date(`${e}T${t}`);return new Date(n.toLocaleString("en-US",{timeZone:"UTC",timeZoneName:"short"}))})(v,x),t={amount:parseFloat(m),paymentMethod:p,createdAt:e.toISOString()};d(gt({billId:l._id,payment:t})).unwrap().then((e=>{u({title:"Payment added successfully",description:`Payment of \u20b9${m} has been added successfully.`,variant:"success"}),c&&c(e),o(!1)})).catch((e=>{u({title:"Error",description:`Failed to add payment: ${e.message}`,variant:"destructive"})})).finally((()=>{N(!1)}))},disabled:b||!q,className:"w-full sm:w-auto",children:b?"Processing...":"Add Payment"})]})]})}),L&&(0,X.jsx)(Qc,{isOpen:B,setIsOpen:W,payment:L,billData:l,onSuccess:e=>{W(!1),F(null),c&&c(e)}}),(0,X.jsxs)(Ce,{open:C,onOpenChange:D,children:[(0,X.jsx)(De,{className:"hidden"}),(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Are you absolutely sure?"}),(0,X.jsxs)(Me,{children:["This action cannot be undone. This will permanently delete the payment of"," ",(0,X.jsxs)("span",{className:"font-semibold",children:["\u20b9",null===T||void 0===T||null===(s=T.amount)||void 0===s?void 0:s.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})," ","made via"," ",(0,X.jsx)("span",{className:"font-semibold",children:null===T||void 0===T?void 0:T.paymentMethod})," ","on"," ",(0,X.jsxs)("span",{className:"font-semibold",children:[T?new Date(T.createdAt).toLocaleDateString("en-IN"):"","."]})]})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{disabled:P,children:"Cancel"}),(0,X.jsx)(Ie,{onClick:()=>{T&&l&&(O(!0),d(jt({billId:l._id,paymentId:T._id})).unwrap().then((e=>{u({title:"Payment Deleted",description:"The payment has been successfully deleted.",variant:"success"}),c&&c(e),k(null),D(!1),o(!1)})).catch((e=>{u({title:"Error Deleting Payment",description:e.message||"Failed to delete the payment.",variant:"destructive"})})).finally((()=>{O(!1)})))},disabled:P,className:"bg-red-600 hover:bg-red-700",children:P?"Deleting...":"Yes, delete payment"})]})]})]}),(0,X.jsx)(Ce,{open:R,onOpenChange:I,children:(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Permission Denied"}),(0,X.jsx)(Me,{children:"You do not have the required permissions to delete payments. Please contact an administrator if you believe this is an error."})]}),(0,X.jsx)(Oe,{children:(0,X.jsx)(Ie,{onClick:()=>I(!1),children:"OK"})})]})})]})},nd=(0,t.createContext)({});function rd(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}const ad=(0,t.createContext)(null),sd=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class id extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function od(e){let{children:n,isPresent:r}=e;const a=(0,t.useId)(),s=(0,t.useRef)(null),i=(0,t.useRef)({width:0,height:0,top:0,left:0}),{nonce:o}=(0,t.useContext)(sd);return(0,t.useInsertionEffect)((()=>{const{width:e,height:t,top:n,left:l}=i.current;if(r||!s.current||!e||!t)return;s.current.dataset.motionPopId=a;const c=document.createElement("style");return o&&(c.nonce=o),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`\n          [data-motion-pop-id="${a}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            top: ${n}px !important;\n            left: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(c)}}),[r]),(0,X.jsx)(id,{isPresent:r,childRef:s,sizeRef:i,children:t.cloneElement(n,{ref:s})})}const ld=e=>{let{children:n,initial:r,isPresent:a,onExitComplete:s,custom:i,presenceAffectsLayout:o,mode:l}=e;const c=rd(cd),d=(0,t.useId)(),u=(0,t.useCallback)((e=>{c.set(e,!0);for(const t of c.values())if(!t)return;s&&s()}),[c,s]),m=(0,t.useMemo)((()=>({id:d,initial:r,isPresent:a,custom:i,onExitComplete:u,register:e=>(c.set(e,!1),()=>c.delete(e))})),o?[Math.random(),u]:[a,u]);return(0,t.useMemo)((()=>{c.forEach(((e,t)=>c.set(t,!1)))}),[a]),t.useEffect((()=>{!a&&!c.size&&s&&s()}),[a]),"popLayout"===l&&(n=(0,X.jsx)(od,{isPresent:a,children:n})),(0,X.jsx)(ad.Provider,{value:m,children:n})};function cd(){return new Map}function dd(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=(0,t.useContext)(ad);if(null===n)return[!0,null];const{isPresent:r,onExitComplete:a,register:s}=n,i=(0,t.useId)();(0,t.useEffect)((()=>{e&&s(i)}),[e]);const o=(0,t.useCallback)((()=>e&&a&&a(i)),[i,a,e]);return!r&&a?[!1,o]:[!0]}const ud=e=>e.key||"";function md(e){const n=[];return t.Children.forEach(e,(e=>{(0,t.isValidElement)(e)&&n.push(e)})),n}const hd="undefined"!==typeof window,pd=hd?t.useLayoutEffect:t.useEffect,fd=e=>{let{children:n,custom:r,initial:a=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:o="sync",propagate:l=!1}=e;const[c,d]=dd(l),u=(0,t.useMemo)((()=>md(n)),[n]),m=l&&!c?[]:u.map(ud),h=(0,t.useRef)(!0),p=(0,t.useRef)(u),f=rd((()=>new Map)),[v,g]=(0,t.useState)(u),[x,y]=(0,t.useState)(u);pd((()=>{h.current=!1,p.current=u;for(let e=0;e<x.length;e++){const t=ud(x[e]);m.includes(t)?f.delete(t):!0!==f.get(t)&&f.set(t,!1)}}),[x,m.length,m.join("-")]);const b=[];if(u!==v){let e=[...u];for(let t=0;t<x.length;t++){const n=x[t],r=ud(n);m.includes(r)||(e.splice(t,0,n),b.push(n))}return"wait"===o&&b.length&&(e=b),y(md(e)),void g(u)}const{forceRender:j}=(0,t.useContext)(nd);return(0,X.jsx)(X.Fragment,{children:x.map((e=>{const t=ud(e),n=!(l&&!c)&&(u===x||m.includes(t));return(0,X.jsx)(ld,{isPresent:n,initial:!(h.current&&!a)&&void 0,custom:n?void 0:r,presenceAffectsLayout:i,mode:o,onExitComplete:n?void 0:()=>{if(!f.has(t))return;f.set(t,!0);let e=!0;f.forEach((t=>{t||(e=!1)})),e&&(null===j||void 0===j||j(),y(p.current),l&&(null===d||void 0===d||d()),s&&s())},children:e},t)}))})};function vd(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy((function(){return e(...arguments)}),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}function gd(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const xd=e=>Array.isArray(e);function yd(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function bd(e){return"string"===typeof e||Array.isArray(e)}function jd(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function wd(e,t,n,r){if("function"===typeof t){const[a,s]=jd(r);t=t(void 0!==n?n:e.custom,a,s)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[a,s]=jd(r);t=t(void 0!==n?n:e.custom,a,s)}return t}function Nd(e,t,n){const r=e.getProps();return wd(r,t,void 0!==n?n:r.custom,e)}const _d=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sd=["initial",..._d];function Ed(e){let t;return()=>(void 0===t&&(t=e()),t)}const Cd=Ed((()=>void 0!==window.ScrollTimeline));class Dd{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map((e=>"finished"in e?e.finished:e)))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map((n=>Cd()&&n.attachTimeline?n.attachTimeline(e):"function"===typeof t?t(n):void 0));return()=>{n.forEach(((e,t)=>{e&&e(),this.animations[t].stop()}))}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach((t=>t[e]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Td extends Dd{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function kd(e,t){return e?e[t]||e.default||e:void 0}const Ad=2e4;function Pd(e){let t=0;let n=e.next(t);for(;!n.done&&t<Ad;)t+=50,n=e.next(t);return t>=Ad?1/0:t}function Od(e){return"function"===typeof e}function Rd(e,t){e.timeline=t,e.onfinish=null}const Md=e=>Array.isArray(e)&&"number"===typeof e[0],Id={linearEasing:void 0};function Ld(e,t){const n=Ed(e);return()=>{var e;return null!==(e=Id[t])&&void 0!==e?e:n()}}const Fd=Ld((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(H5){return!1}return!0}),"linearEasing"),Bd=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},Wd=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const a=Math.max(Math.round(t/n),2);for(let s=0;s<a;s++)r+=e(Bd(0,a-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function $d(e){return Boolean("function"===typeof e&&Fd()||!e||"string"===typeof e&&(e in zd||Fd())||Md(e)||Array.isArray(e)&&e.every($d))}const Ud=e=>{let[t,n,r,a]=e;return`cubic-bezier(${t}, ${n}, ${r}, ${a})`},zd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ud([0,.65,.55,1]),circOut:Ud([.55,0,1,.45]),backIn:Ud([.31,.01,.66,-.59]),backOut:Ud([.33,1.53,.69,.99])};function Hd(e,t){return e?"function"===typeof e&&Fd()?Wd(e,t):Md(e)?Ud(e):Array.isArray(e)?e.map((e=>Hd(e,t)||zd.easeOut)):zd[e]:void 0}const Vd={x:!1,y:!1};function qd(){return Vd.x||Vd.y}function Gd(e,t){const n=function(e,t,n){var r;if(e instanceof Element)return[e];if("string"===typeof e){let a=document;t&&(a=t.current);const s=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:a.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function Kd(e){return t=>{"touch"===t.pointerType||qd()||e(t)}}const Yd=(e,t)=>!!t&&(e===t||Yd(e,t.parentElement)),Xd=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary,Zd=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const Jd=new WeakSet;function Qd(e){return t=>{"Enter"===t.key&&e(t)}}function eu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function tu(e){return Xd(e)&&!qd()}function nu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,a,s]=Gd(e,n),i=e=>{const r=e.currentTarget;if(!tu(e)||Jd.has(r))return;Jd.add(r);const s=t(e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),tu(e)&&Jd.has(r)&&(Jd.delete(r),"function"===typeof s&&s(e,{success:t}))},o=e=>{i(e,n.useGlobalTarget||Yd(r,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,a),window.addEventListener("pointercancel",l,a)};return r.forEach((e=>{(function(e){return Zd.has(e.tagName)||-1!==e.tabIndex})(e)||null!==e.getAttribute("tabindex")||(e.tabIndex=0);(n.useGlobalTarget?window:e).addEventListener("pointerdown",i,a),e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=Qd((()=>{if(Jd.has(n))return;eu(n,"down");const e=Qd((()=>{eu(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>eu(n,"cancel")),t)}));n.addEventListener("keydown",r,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),t)})(e,a)),a)})),s}const ru=e=>1e3*e,au=e=>e/1e3,su=e=>e;const iu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ou=new Set(iu),lu=new Set(["width","height","top","left","right","bottom",...iu]),cu=!1,du=!1;const uu=["read","resolveKeyframes","update","preRender","render","postRender"];function mu(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,i=uu.reduce(((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,r=!1,a=!1;const s=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function o(t){s.has(t)&&(l.schedule(t),e()),t(i)}const l={schedule:function(e){const a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),a.has(e)||a.add(e),e},cancel:e=>{n.delete(e),s.delete(e)},process:e=>{i=e,r?a=!0:(r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,a&&(a=!1,l.process(e)))}};return l}(s),e)),{}),{read:o,resolveKeyframes:l,update:c,preRender:d,render:u,postRender:m}=i,h=()=>{const s=du?a.timestamp:performance.now();n=!1,a.delta=r?1e3/60:Math.max(Math.min(s-a.timestamp,40),1),a.timestamp=s,a.isProcessing=!0,o.process(a),l.process(a),c.process(a),d.process(a),u.process(a),m.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(h))},p=uu.reduce(((t,s)=>{const o=i[s];return t[s]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,a.isProcessing||e(h)),o.schedule(t,s,i)},t}),{});return{schedule:p,cancel:e=>{for(let t=0;t<uu.length;t++)i[uu[t]].cancel(e)},state:a,steps:i}}const{schedule:hu,cancel:pu,state:fu,steps:vu}=mu("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:su,!0);let gu;function xu(){gu=void 0}const yu={now:()=>(void 0===gu&&yu.set(fu.isProcessing||du?fu.timestamp:performance.now()),gu),set:e=>{gu=e,queueMicrotask(xu)}};function bu(e,t){-1===e.indexOf(t)&&e.push(t)}function ju(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class wu{constructor(){this.subscriptions=[]}add(e){return bu(this.subscriptions,e),()=>ju(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let a=0;a<r;a++){const r=this.subscriptions[a];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Nu(e,t){return t?e*(1e3/t):0}const _u={current:void 0};class Su{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=yu.now();t.updatedAt!==r&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){var t;this.current=e,this.updatedAt=yu.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new wu);const n=this.events[e].add(t);return"change"===e?()=>{n(),hu.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return _u.current&&_u.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=yu.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Nu(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Eu(e,t){return new Su(e,t)}function Cu(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Eu(n))}const Du=e=>Boolean(e&&e.getVelocity);function Tu(e,t){const n=e.getValue("willChange");if(r=n,Boolean(Du(r)&&r.add))return n.add(t);var r}const ku=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Au="data-"+ku("framerAppearId");function Pu(e){return e.props[Au]}const Ou=!1,Ru=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Mu(e,t,n,r){if(e===t&&n===r)return su;const a=t=>function(e,t,n,r,a){let s,i,o=0;do{i=t+(n-t)/2,s=Ru(i,r,a)-e,s>0?n=i:t=i}while(Math.abs(s)>1e-7&&++o<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:Ru(a(e),t,r)}const Iu=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Lu=e=>t=>1-e(1-t),Fu=Mu(.33,1.53,.69,.99),Bu=Lu(Fu),Wu=Iu(Bu),$u=e=>(e*=2)<1?.5*Bu(e):.5*(2-Math.pow(2,-10*(e-1))),Uu=e=>1-Math.sin(Math.acos(e)),zu=Lu(Uu),Hu=Iu(Uu),Vu=e=>/^0[^.\s]+$/u.test(e);const qu=(e,t,n)=>n>t?t:n<e?e:n,Gu={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Ku={...Gu,transform:e=>qu(0,1,e)},Yu={...Gu,default:1},Xu=e=>Math.round(1e5*e)/1e5,Zu=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Ju=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Qu=(e,t)=>n=>Boolean("string"===typeof n&&Ju.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),em=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[a,s,i,o]=r.match(Zu);return{[e]:parseFloat(a),[t]:parseFloat(s),[n]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},tm={...Gu,transform:e=>Math.round((e=>qu(0,255,e))(e))},nm={test:Qu("rgb","red"),parse:em("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:a=1}=e;return"rgba("+tm.transform(t)+", "+tm.transform(n)+", "+tm.transform(r)+", "+Xu(Ku.transform(a))+")"}};const rm={test:Qu("#"),parse:function(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}},transform:nm.transform},am=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),sm=am("deg"),im=am("%"),om=am("px"),lm=am("vh"),cm=am("vw"),dm={...im,parse:e=>im.parse(e)/100,transform:e=>im.transform(100*e)},um={test:Qu("hsl","hue"),parse:em("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:a=1}=e;return"hsla("+Math.round(t)+", "+im.transform(Xu(n))+", "+im.transform(Xu(r))+", "+Xu(Ku.transform(a))+")"}},mm={test:e=>nm.test(e)||rm.test(e)||um.test(e),parse:e=>nm.test(e)?nm.parse(e):um.test(e)?um.parse(e):rm.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?nm.transform(e):um.transform(e)},hm=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const pm="number",fm="color",vm=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gm(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let s=0;const i=t.replace(vm,(e=>(mm.test(e)?(r.color.push(s),a.push(fm),n.push(mm.parse(e))):e.startsWith("var(")?(r.var.push(s),a.push("var"),n.push(e)):(r.number.push(s),a.push(pm),n.push(parseFloat(e))),++s,"${}"))).split("${}");return{values:n,split:i,indexes:r,types:a}}function xm(e){return gm(e).values}function ym(e){const{split:t,types:n}=gm(e),r=t.length;return e=>{let a="";for(let s=0;s<r;s++)if(a+=t[s],void 0!==e[s]){const t=n[s];a+=t===pm?Xu(e[s]):t===fm?mm.transform(e[s]):e[s]}return a}}const bm=e=>"number"===typeof e?0:e;const jm={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(Zu))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(hm))||void 0===n?void 0:n.length)||0)>0},parse:xm,createTransformer:ym,getAnimatableNone:function(e){const t=xm(e);return ym(e)(t.map(bm))}},wm=new Set(["brightness","contrast","saturate","opacity"]);function Nm(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Zu)||[];if(!r)return e;const a=n.replace(r,"");let s=wm.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+a+")"}const _m=/\b([a-z-]*)\(.*?\)/gu,Sm={...jm,getAnimatableNone:e=>{const t=e.match(_m);return t?t.map(Nm).join(" "):e}},Em={borderWidth:om,borderTopWidth:om,borderRightWidth:om,borderBottomWidth:om,borderLeftWidth:om,borderRadius:om,radius:om,borderTopLeftRadius:om,borderTopRightRadius:om,borderBottomRightRadius:om,borderBottomLeftRadius:om,width:om,maxWidth:om,height:om,maxHeight:om,top:om,right:om,bottom:om,left:om,padding:om,paddingTop:om,paddingRight:om,paddingBottom:om,paddingLeft:om,margin:om,marginTop:om,marginRight:om,marginBottom:om,marginLeft:om,backgroundPositionX:om,backgroundPositionY:om},Cm={rotate:sm,rotateX:sm,rotateY:sm,rotateZ:sm,scale:Yu,scaleX:Yu,scaleY:Yu,scaleZ:Yu,skew:sm,skewX:sm,skewY:sm,distance:om,translateX:om,translateY:om,translateZ:om,x:om,y:om,z:om,perspective:om,transformPerspective:om,opacity:Ku,originX:dm,originY:dm,originZ:om},Dm={...Gu,transform:Math.round},Tm={...Em,...Cm,zIndex:Dm,size:om,fillOpacity:Ku,strokeOpacity:Ku,numOctaves:Dm},km={...Tm,color:mm,backgroundColor:mm,outlineColor:mm,fill:mm,stroke:mm,borderColor:mm,borderTopColor:mm,borderRightColor:mm,borderBottomColor:mm,borderLeftColor:mm,filter:Sm,WebkitFilter:Sm},Am=e=>km[e];function Pm(e,t){let n=Am(e);return n!==Sm&&(n=jm),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Om=new Set(["auto","none","0"]);const Rm=e=>e===Gu||e===om,Mm=(e,t)=>parseFloat(e.split(", ")[t]),Im=(e,t)=>(n,r)=>{let{transform:a}=r;if("none"===a||!a)return 0;const s=a.match(/^matrix3d\((.+)\)$/u);if(s)return Mm(s[1],t);{const t=a.match(/^matrix\((.+)\)$/u);return t?Mm(t[1],e):0}},Lm=new Set(["x","y","z"]),Fm=iu.filter((e=>!Lm.has(e)));const Bm={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:a="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(a)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:a="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(a)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:Im(4,13),y:Im(5,14)};Bm.translateX=Bm.x,Bm.translateY=Bm.y;const Wm=new Set;let $m=!1,Um=!1;function zm(){if(Um){const e=Array.from(Wm).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return Fm.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((t=>{let[n,r]=t;var a;null===(a=e.getValue(n))||void 0===a||a.set(r)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}Um=!1,$m=!1,Wm.forEach((e=>e.complete())),Wm.clear()}function Hm(){Wm.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(Um=!0)}))}class Vm{constructor(e,t,n,r,a){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wm.add(this),$m||($m=!0,hu.read(Hm),hu.resolveKeyframes(zm))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;for(let a=0;a<e.length;a++)if(null===e[a])if(0===a){const a=null===r||void 0===r?void 0:r.get(),s=e[e.length-1];if(void 0!==a)e[0]=a;else if(n&&t){const r=n.readValue(t,s);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=s),r&&void 0===a&&r.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Wm.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wm.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let qm=su,Gm=su;const Km=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Ym=e=>t=>"string"===typeof t&&t.startsWith(e),Xm=Ym("--"),Zm=Ym("var(--"),Jm=e=>!!Zm(e)&&Qm.test(e.split("/*")[0].trim()),Qm=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,eh=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function th(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Gm(n<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[r,a]=function(e){const t=eh.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${null!==n&&void 0!==n?n:r}`,a]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return Km(e)?parseFloat(e):e}return Jm(a)?th(a,t,n+1):a}const nh=e=>t=>t.test(e),rh=[Gu,om,im,sm,cm,lm,{test:e=>"auto"===e,parse:e=>e}],ah=e=>rh.find(nh(e));class sh extends Vm{constructor(e,t,n,r,a){super(e,t,n,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"===typeof n&&(n=n.trim(),Jm(n))){const r=th(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!lu.has(n)||2!==e.length)return;const[r,a]=e,s=ah(r),i=ah(a);if(s!==i)if(Rm(s)&&Rm(i))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let a=0;a<e.length;a++)("number"===typeof(r=e[a])?0===r:null===r||"none"===r||"0"===r||Vu(r))&&n.push(a);var r;n.length&&function(e,t,n){let r,a=0;for(;a<e.length&&!r;){const t=e[a];"string"===typeof t&&!Om.has(t)&&gm(t).values.length&&(r=e[a]),a++}if(r&&n)for(const s of t)e[s]=Pm(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bm[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const s=r.length-1,i=r[s];r[s]=Bm[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach((e=>{let[n,r]=e;t.getValue(n).set(r)})),this.resolveNoneKeyframes()}}const ih=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!jm.test(e)&&"0"!==e||e.startsWith("url(")));const oh=e=>null!==e;function lh(e,t,n){let{repeat:r,repeatType:a="loop"}=t;const s=e.filter(oh),i=r&&"loop"!==a&&r%2===1?0:s.length-1;return i&&void 0!==n?n:s[i]}class ch{constructor(e){let{autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:s=0,repeatType:i="loop",...o}=e;this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=yu.now(),this.options={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:s,repeatType:i,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(Hm(),zm()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=yu.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:a,delay:s,onComplete:i,onUpdate:o,isGenerator:l}=this.options;if(!l&&!function(e,t,n,r){const a=e[0];if(null===a)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],i=ih(a,t),o=ih(s,t);return qm(i===o,`You are trying to animate ${t} from "${a}" to "${s}". ${a} is not an animatable value - to enable this animation set ${a} to a value animatable to ${s} via the \`style\` property.`),!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Od(n))&&r)}(e,n,r,a)){if(Ou||!s)return o&&o(lh(e,this.options,t)),i&&i(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise((e=>{this.resolveFinishedPromise=e}))}}const dh=(e,t,n)=>e+(t-e)*n;function uh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function mh(e,t){return n=>n>0?t:e}const hh=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},ph=[rm,nm,um];function fh(e){const t=(n=e,ph.find((e=>e.test(n))));var n;if(qm(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`),!Boolean(t))return!1;let r=t.parse(e);return t===um&&(r=function(e){let{hue:t,saturation:n,lightness:r,alpha:a}=e;t/=360,n/=100,r/=100;let s=0,i=0,o=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,a=2*r-e;s=uh(a,e,t+1/3),i=uh(a,e,t),o=uh(a,e,t-1/3)}else s=i=o=r;return{red:Math.round(255*s),green:Math.round(255*i),blue:Math.round(255*o),alpha:a}}(r)),r}const vh=(e,t)=>{const n=fh(e),r=fh(t);if(!n||!r)return mh(e,t);const a={...n};return e=>(a.red=hh(n.red,r.red,e),a.green=hh(n.green,r.green,e),a.blue=hh(n.blue,r.blue,e),a.alpha=dh(n.alpha,r.alpha,e),nm.transform(a))},gh=(e,t)=>n=>t(e(n)),xh=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(gh)},yh=new Set(["none","hidden"]);function bh(e,t){return n=>dh(e,t,n)}function jh(e){return"number"===typeof e?bh:"string"===typeof e?Jm(e)?mh:mm.test(e)?vh:_h:Array.isArray(e)?wh:"object"===typeof e?mm.test(e)?vh:Nh:mh}function wh(e,t){const n=[...e],r=n.length,a=e.map(((e,n)=>jh(e)(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=a[t](e);return n}}function Nh(e,t){const n={...e,...t},r={};for(const a in n)void 0!==e[a]&&void 0!==t[a]&&(r[a]=jh(e[a])(e[a],t[a]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const _h=(e,t)=>{const n=jm.createTransformer(t),r=gm(e),a=gm(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?yh.has(e)&&!a.values.length||yh.has(t)&&!r.values.length?function(e,t){return yh.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):xh(wh(function(e,t){var n;const r=[],a={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][a[i]],l=null!==(n=e.values[o])&&void 0!==n?n:0;r[s]=l,a[i]++}return r}(r,a),a.values),n):(qm(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),mh(e,t))};function Sh(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return dh(e,t,n);return jh(e)(e,t)}function Eh(e,t,n){const r=Math.max(t-5,0);return Nu(n-e(r),t-r)}const Ch={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Dh=.001;function Th(e){let t,n,{duration:r=Ch.duration,bounce:a=Ch.bounce,velocity:s=Ch.velocity,mass:i=Ch.mass}=e;qm(r<=ru(Ch.maxDuration),"Spring duration must be 10 seconds or less");let o=1-a;o=qu(Ch.minDamping,Ch.maxDamping,o),r=qu(Ch.minDuration,Ch.maxDuration,au(r)),o<1?(t=e=>{const t=e*o,n=t*r,a=t-s,i=Ah(e,o),l=Math.exp(-n);return Dh-a/i*l},n=e=>{const n=e*o*r,a=n*s+s,i=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=Ah(Math.pow(e,2),o);return(-t(e)+Dh>0?-1:1)*((a-i)*l)/c}):(t=e=>Math.exp(-e*r)*((e-s)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(s-e)));const l=function(e,t,n){let r=n;for(let a=1;a<kh;a++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=ru(r),isNaN(l))return{stiffness:Ch.stiffness,damping:Ch.damping,duration:r};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:r}}}const kh=12;function Ah(e,t){return e*Math.sqrt(1-t*t)}const Ph=["duration","bounce"],Oh=["stiffness","damping","mass"];function Rh(e,t){return t.some((t=>void 0!==e[t]))}function Mh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ch.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ch.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const s=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:u,velocity:m,isResolvedFromDuration:h}=function(e){let t={velocity:Ch.velocity,stiffness:Ch.stiffness,damping:Ch.damping,mass:Ch.mass,isResolvedFromDuration:!1,...e};if(!Rh(e,Oh)&&Rh(e,Ph))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),a=r*r,s=2*qu(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Ch.mass,stiffness:a,damping:s}}else{const n=Th(e);t={...t,...n,mass:Ch.mass},t.isResolvedFromDuration=!0}return t}({...n,velocity:-au(n.velocity||0)}),p=m||0,f=c/(2*Math.sqrt(l*d)),v=i-s,g=au(Math.sqrt(l/d)),x=Math.abs(v)<5;let y;if(r||(r=x?Ch.restSpeed.granular:Ch.restSpeed.default),a||(a=x?Ch.restDelta.granular:Ch.restDelta.default),f<1){const e=Ah(g,f);y=t=>{const n=Math.exp(-f*g*t);return i-n*((p+f*g*v)/e*Math.sin(e*t)+v*Math.cos(e*t))}}else if(1===f)y=e=>i-Math.exp(-g*e)*(v+(p+g*v)*e);else{const e=g*Math.sqrt(f*f-1);y=t=>{const n=Math.exp(-f*g*t),r=Math.min(e*t,300);return i-n*((p+f*g*v)*Math.sinh(r)+e*v*Math.cosh(r))/e}}const b={calculatedDuration:h&&u||null,next:e=>{const t=y(e);if(h)o.done=e>=u;else{let n=0;f<1&&(n=0===e?ru(p):Eh(y,e,t));const s=Math.abs(n)<=r,l=Math.abs(i-t)<=a;o.done=s&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(Pd(b),Ad),t=Wd((t=>b.next(e*t).value),e,30);return e+"ms "+t}};return b}function Ih(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:a=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const m=t[0],h={done:!1,value:m},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=r*n;const v=m+f,g=void 0===o?v:o(v);g!==v&&(f=g-m);const x=e=>-f*Math.exp(-e/a),y=e=>g+x(e),b=e=>{const t=x(e),n=y(e);h.done=Math.abs(t)<=d,h.value=h.done?g:n};let j,w;const N=e=>{var t;(t=h.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(j=e,w=Mh({keyframes:[h.value,p(h.value)],velocity:Eh(y,e,h.value),damping:s,stiffness:i,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==j||(t=!0,b(e),N(e)),void 0!==j&&e>=j?w.next(e-j):(!t&&b(e),h)}}}const Lh=Mu(.42,0,1,1),Fh=Mu(0,0,.58,1),Bh=Mu(.42,0,.58,1),Wh={linear:su,easeIn:Lh,easeInOut:Bh,easeOut:Fh,circIn:Uu,circInOut:Hu,circOut:zu,backIn:Bu,backInOut:Wu,backOut:Fu,anticipate:$u},$h=e=>{if(Md(e)){Gm(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,a]=e;return Mu(t,n,r,a)}return"string"===typeof e?(Gm(void 0!==Wh[e],`Invalid easing type '${e}'`),Wh[e]):e};function Uh(e,t){let{clamp:n=!0,ease:r,mixer:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(Gm(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],a=n||Sh,s=e.length-1;for(let i=0;i<s;i++){let n=a(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||su:t;n=xh(e,n)}r.push(n)}return r}(t,r,a),l=o.length,c=n=>{if(i&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const a=Bd(e[r],e[r+1],n);return o[r](a)};return n?t=>c(qu(e[0],e[s-1],t)):c}function zh(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=Bd(0,t,r);e.push(dh(n,1,a))}}(t,e.length-1),t}function Hh(e){let{duration:t=300,keyframes:n,times:r,ease:a="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(a)?a.map($h):$h(a),i={done:!1,value:n[0]},o=function(e,t){return e.map((e=>e*t))}(r&&r.length===n.length?r:zh(n),t),l=Uh(o,n,{ease:Array.isArray(s)?s:(c=n,d=s,c.map((()=>d||Bh)).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}const Vh=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>hu.update(t,!0),stop:()=>pu(t),now:()=>fu.isProcessing?fu.timestamp:yu.now()}},qh={decay:Ih,inertia:Ih,tween:Hh,keyframes:Hh,spring:Mh},Gh=e=>e/100;class Kh extends ch{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:n,element:r,keyframes:a}=this.options,s=(null===r||void 0===r?void 0:r.KeyframeResolver)||Vm;this.resolver=new s(a,((e,t)=>this.onKeyframesResolved(e,t)),t,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:a,velocity:s=0}=this.options,i=Od(t)?t:qh[t]||Hh;let o,l;i!==Hh&&"number"!==typeof e[0]&&(o=xh(Gh,Sh(e[0],e[1])),e=[0,100]);const c=i({...this.options,keyframes:e});"mirror"===a&&(l=i({...this.options,keyframes:[...e].reverse(),velocity:-s})),null===c.calculatedDuration&&(c.calculatedDuration=Pd(c));const{calculatedDuration:d}=c,u=d+r;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:o,calculatedDuration:d,resolvedDuration:u,totalDuration:u*(n+1)-r}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:n}=this;if(!n){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:r,generator:a,mirroredGenerator:s,mapPercentToKeyframes:i,keyframes:o,calculatedDuration:l,totalDuration:c,resolvedDuration:d}=n;if(null===this.startTime)return a.next(0);const{delay:u,repeat:m,repeatType:h,repeatDelay:p,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-u*(this.speed>=0?1:-1),g=this.speed>=0?v<0:v>c;this.currentTime=Math.max(v,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let x=this.currentTime,y=a;if(m){const e=Math.min(this.currentTime,c)/d;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,m+1);Boolean(t%2)&&("reverse"===h?(n=1-n,p&&(n-=p/d)):"mirror"===h&&(y=s)),x=qu(0,1,n)*d}const b=g?{done:!1,value:o[0]}:y.next(x);i&&(b.value=i(b.value));let{done:j}=b;g||null===l||(j=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&j);return w&&void 0!==r&&(b.value=lh(o,this.options,r)),f&&f(b.value),w&&this.finish(),b}get duration(){const{resolved:e}=this;return e?au(e.calculatedDuration):0}get time(){return au(this.currentTime)}set time(e){e=ru(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=au(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=Vh,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const r=this.driver.now();null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=r):this.startTime=null!==n&&void 0!==n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Yh=new Set(["opacity","clipPath","filter","transform"]);const Xh=Ed((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const Zh={anticipate:$u,backInOut:Wu,circInOut:Hu};class Jh extends ch{constructor(e){super(e);const{name:t,motionValue:n,element:r,keyframes:a}=this.options;this.resolver=new sh(a,((e,t)=>this.onKeyframesResolved(e,t)),t,n,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:r,ease:a,type:s,motionValue:i,name:o,startTime:l}=this.options;if(!i.owner||!i.owner.current)return!1;var c;if("string"===typeof a&&Fd()&&a in Zh&&(a=Zh[a]),Od((c=this.options).type)||"spring"===c.type||!$d(c.ease)){const{onComplete:t,onUpdate:i,motionValue:o,element:l,...c}=this.options,d=function(e,t){const n=new Kh({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const a=[];let s=0;for(;!r.done&&s<2e4;)r=n.sample(s),a.push(r.value),s+=10;return{times:void 0,keyframes:a,duration:s-10,ease:"linear"}}(e,c);1===(e=d.keyframes).length&&(e[1]=e[0]),n=d.duration,r=d.times,a=d.ease,s="keyframes"}const d=function(e,t,n){let{delay:r=0,duration:a=300,repeat:s=0,repeatType:i="loop",ease:o="easeInOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const d=Hd(o,a);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:r,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:"reverse"===i?"alternate":"normal"})}(i.owner.current,o,e,{...this.options,duration:n,times:r,ease:a});return d.startTime=null!==l&&void 0!==l?l:this.calcStartTime(),this.pendingTimeline?(Rd(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:n}=this.options;i.set(lh(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:r,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return au(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return au(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=ru(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return su;const{animation:n}=t;Rd(n,e)}else this.pendingTimeline=e;return su}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:r,type:a,ease:s,times:i}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const{motionValue:e,onUpdate:t,onComplete:o,element:l,...c}=this.options,d=new Kh({...c,keyframes:n,duration:r,type:a,ease:s,times:i,isGenerator:!0}),u=ru(this.time);e.setWithVelocity(d.sample(u-10).value,d.sample(u).value,10)}const{onStop:o}=this.options;o&&o(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:s,type:i}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return Xh()&&n&&Yh.has(n)&&!o&&!l&&!r&&"mirror"!==a&&0!==s&&"inertia"!==i}}const Qh={type:"spring",stiffness:500,damping:25,restSpeed:10},ep={type:"keyframes",duration:.8},tp={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},np=(e,t)=>{let{keyframes:n}=t;return n.length>2?ep:ou.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Qh:tp};const rp=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return i=>{const o=kd(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=ru(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:a};(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:a,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}=e;return!!Object.keys(u).length})(o)||(d={...d,...np(e,d)}),d.duration&&(d.duration=ru(d.duration)),d.repeatDelay&&(d.repeatDelay=ru(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(d.duration=0,0===d.delay&&(u=!0)),(Ou||cu)&&(u=!0,d.duration=0,d.delay=0),u&&!s&&void 0!==t.get()){const e=lh(d.keyframes,o);if(void 0!==e)return hu.update((()=>{d.onUpdate(e),d.onComplete()})),new Td([])}return!s&&Jh.supports(d)?new Jh(d):new Kh(d)}};function ap(e,t){let{protectedKeys:n,needsAnimating:r}=e;const a=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,a}function sp(e,t){let{delay:n=0,transitionOverride:r,type:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s;let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(i=r);const c=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const u in l){const t=e.getValue(u,null!==(s=e.latestValues[u])&&void 0!==s?s:null),r=l[u];if(void 0===r||d&&ap(d,u))continue;const a={delay:n,...kd(i||{},u)};let o=!1;if(window.MotionHandoffAnimation){const t=Pu(e);if(t){const e=window.MotionHandoffAnimation(t,u,hu);null!==e&&(a.startTime=e,o=!0)}}Tu(e,u),t.start(rp(u,t,r,e.shouldReduceMotion&&lu.has(u)?{type:!1}:a,e,o));const m=t.animation;m&&c.push(m)}return o&&Promise.all(c).then((()=>{hu.update((()=>{o&&function(e,t){const n=Nd(e,t);let{transitionEnd:r={},transition:a={},...s}=n||{};s={...s,...r};for(const o in s)Cu(e,o,(i=s[o],xd(i)?i[i.length-1]||0:i));var i}(e,o)}))})),c}function ip(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;const a=Nd(e,t,"exit"===n.type?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(s=n.transitionOverride);const i=a?()=>Promise.all(sp(e,a,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:a=0,staggerChildren:i,staggerDirection:o}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5?arguments[5]:void 0;const i=[],o=(e.variantChildren.size-1)*r,l=1===a?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(op).forEach(((e,r)=>{e.notify("AnimationStart",t),i.push(ip(e,t,{...s,delay:n+l(r)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(i)}(e,t,a+r,i,o,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then((()=>t()))}return Promise.all([i(),o(n.delay)])}function op(e,t){return e.sortNodePosition(t)}const lp=Sd.length;function cp(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&cp(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<lp;n++){const r=Sd[n],a=e.props[r];(bd(a)||!1===a)&&(t[r]=a)}return t}const dp=[..._d].reverse(),up=_d.length;function mp(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const a=t.map((t=>ip(e,t,r)));n=Promise.all(a)}else if("string"===typeof t)n=ip(e,t,r);else{const a="function"===typeof t?Nd(e,t,r.custom):t;n=Promise.all(sp(e,a,r))}return n.then((()=>{e.notify("AnimationComplete",t)}))}(e,n,r)})))}function hp(e){let t=mp(e),n=vp(),r=!0;const a=t=>(n,r)=>{var a;const s=Nd(e,r,"exit"===t?null===(a=e.presenceContext)||void 0===a?void 0:a.custom:void 0);if(s){const{transition:e,transitionEnd:t,...r}=s;n={...n,...r,...t}}return n};function s(s){const{props:i}=e,o=cp(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<up;t++){const m=dp[t],h=n[m],p=void 0!==i[m]?i[m]:o[m],f=bd(p),v=m===s?h.isActive:null;!1===v&&(u=t);let g=p===o[m]&&p!==i[m]&&f;if(g&&r&&e.manuallyAnimateOnMount&&(g=!1),h.protectedKeys={...d},!h.isActive&&null===v||!p&&!h.prevProp||gd(p)||"boolean"===typeof p)continue;const x=pp(h.prevProp,p);let y=x||m===s&&h.isActive&&!g&&f||t>u&&f,b=!1;const j=Array.isArray(p)?p:[p];let w=j.reduce(a(m),{});!1===v&&(w={});const{prevResolvedValues:N={}}=h,_={...N,...w},S=t=>{y=!0,c.has(t)&&(b=!0,c.delete(t)),h.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in _){const t=w[e],n=N[e];if(d.hasOwnProperty(e))continue;let r=!1;r=xd(t)&&xd(n)?!yd(t,n):t!==n,r?void 0!==t&&null!==t?S(e):c.add(e):void 0!==t&&c.has(e)?S(e):h.protectedKeys[e]=!0}h.prevProp=p,h.prevResolvedValues=w,h.isActive&&(d={...d,...w}),r&&e.blockInitialAnimation&&(y=!1);y&&(!(g&&x)||b)&&l.push(...j.map((e=>({animation:e,options:{type:m}}))))}if(c.size){const t={};c.forEach((n=>{const r=e.getBaseTarget(n),a=e.getValue(n);a&&(a.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null})),l.push({animation:t})}let m=Boolean(l.length);return!r||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(m=!1),r=!1,m?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,r){var a;if(n[t].isActive===r)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const i=s(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=vp(),r=!0}}}function pp(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!yd(t,e)}function fp(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vp(){return{animate:fp(!0),whileInView:fp(),whileHover:fp(),whileTap:fp(),whileDrag:fp(),whileFocus:fp(),exit:fp()}}class gp{constructor(e){this.isMounted=!1,this.node=e}update(){}}let xp=0;const yp={animation:{Feature:class extends gp{constructor(e){super(e),e.animationState||(e.animationState=hp(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();gd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends gp{constructor(){super(...arguments),this.id=xp++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}};function bp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function jp(e){return{point:{x:e.pageX,y:e.pageY}}}function wp(e,t,n,r){return bp(e,t,(e=>t=>Xd(t)&&e(t,jp(t)))(n),r)}const Np=(e,t)=>Math.abs(e-t);class _p{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Cp(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Np(e.x,t.x),r=Np(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:a}=fu;this.history.push({...r,timestamp:a});const{onStart:s,onMove:i}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Sp(t,this.transformPagePoint),hu.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:a}=this.handlers;if(this.dragSnapToOrigin&&a&&a(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=Cp("pointercancel"===e.type?this.lastMoveEventInfo:Sp(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),r&&r(e,s)},!Xd(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const s=Sp(jp(e),this.transformPagePoint),{point:i}=s,{timestamp:o}=fu;this.history=[{...i,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,Cp(s,this.history)),this.removeListeners=xh(wp(this.contextWindow,"pointermove",this.handlePointerMove),wp(this.contextWindow,"pointerup",this.handlePointerUp),wp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),pu(this.updatePoint)}}function Sp(e,t){return t?{point:t(e.point)}:e}function Ep(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Cp(e,t){let{point:n}=e;return{point:n,delta:Ep(n,Tp(t)),offset:Ep(n,Dp(t)),velocity:kp(t,.1)}}function Dp(e){return e[0]}function Tp(e){return e[e.length-1]}function kp(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=Tp(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>ru(t)));)n--;if(!r)return{x:0,y:0};const s=au(a.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const i={x:(a.x-r.x)/s,y:(a.y-r.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Ap(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Pp(e){return e.max-e.min}function Op(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=dh(t.min,t.max,e.origin),e.scale=Pp(n)/Pp(t),e.translate=dh(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Rp(e,t,n,r){Op(e.x,t.x,n.x,r?r.originX:void 0),Op(e.y,t.y,n.y,r?r.originY:void 0)}function Mp(e,t,n){e.min=n.min+t.min,e.max=e.min+Pp(t)}function Ip(e,t,n){e.min=t.min-n.min,e.max=e.min+Pp(t)}function Lp(e,t,n){Ip(e.x,t.x,n.x),Ip(e.y,t.y,n.y)}function Fp(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Bp(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const Wp=.35;function $p(e,t,n){return{min:Up(e,t),max:Up(e,n)}}function Up(e,t){return"number"===typeof e?e:e[t]||0}const zp=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Hp(e){return[e("x"),e("y")]}function Vp(e){let{top:t,left:n,right:r,bottom:a}=e;return{x:{min:n,max:r},y:{min:t,max:a}}}function qp(e){return void 0===e||1===e}function Gp(e){let{scale:t,scaleX:n,scaleY:r}=e;return!qp(t)||!qp(n)||!qp(r)}function Kp(e){return Gp(e)||Yp(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Yp(e){return Xp(e.x)||Xp(e.y)}function Xp(e){return e&&"0%"!==e}function Zp(e,t,n){return n+t*(e-n)}function Jp(e,t,n,r,a){return void 0!==a&&(e=Zp(e,a,r)),Zp(e,n,r)+t}function Qp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;e.min=Jp(e.min,t,n,r,a),e.max=Jp(e.max,t,n,r,a)}function ef(e,t){let{x:n,y:r}=t;Qp(e.x,n.translate,n.scale,n.originPoint),Qp(e.y,r.translate,r.scale,r.originPoint)}const tf=.999999999999,nf=1.0000000000001;function rf(e,t){e.min=e.min+t,e.max=e.max+t}function af(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Qp(e,t,n,dh(e.min,e.max,a),r)}function sf(e,t){af(e.x,t.x,t.scaleX,t.scale,t.originX),af(e.y,t.y,t.scaleY,t.scale,t.originY)}function of(e,t){return Vp(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const lf=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},cf=new WeakMap;class df{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new _p(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(jp(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:a}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=n)||"y"===s?Vd[s]?null:(Vd[s]=!0,()=>{Vd[s]=!1}):Vd.x||Vd.y?null:(Vd.x=Vd.y=!0,()=>{Vd.x=Vd.y=!1}),!this.openDragLock))return;var s;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hp((e=>{let t=this.getAxisMotionValue(e).get()||0;if(im.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=Pp(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),a&&hu.postRender((()=>a(e,t))),Tu(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:a,onDrag:s}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&a&&a(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Hp((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:lf(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&hu.postRender((()=>a(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!uf(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:r,max:a}=t;return void 0!==r&&e<r?e=n?dh(r,e,n.min):Math.max(e,r):void 0!==a&&e>a&&(e=n?dh(a,e,n.max):Math.min(e,a)),e}(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,a=this.constraints;t&&Ap(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:a,right:s}=t;return{x:Fp(e.x,r,s),y:Fp(e.y,n,a)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wp;return!1===e?e=0:!0===e&&(e=Wp),{x:$p(e,"left","right"),y:$p(e,"top","bottom")}}(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Hp((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ap(e))return!1;const n=e.current;Gm(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=function(e,t,n){const r=of(e,n),{scroll:a}=t;return a&&(rf(r.x,a.offset.x),rf(r.y,a.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:Bp(e.x,t.x),y:Bp(e.y,t.y)}}(r.layout.layoutBox,a);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=Vp(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=Hp((i=>{if(!uf(i,t,this.currentDirection))return;let l=o&&o[i]||{};s&&(l={min:0,max:0});const c=r?200:1e6,d=r?40:1e7,u={type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...a,...l};return this.startAxisValueAnimation(i,u)}));return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Tu(this.visualElement,e),n.start(rp(e,n,0,t,this.visualElement,!1))}stopAnimation(){Hp((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){Hp((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Hp((t=>{const{drag:n}=this.getProps();if(!uf(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];a.set(e[t]-dh(n,s,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Ap(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Hp((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=Pp(e),a=Pp(t);return a>r?n=Bd(t.min,t.max-r,e.min):r>a&&(n=Bd(e.min,e.max-a,t.min)),qu(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Hp((t=>{if(!uf(t,e,null))return;const n=this.getAxisMotionValue(t),{min:a,max:s}=this.constraints[t];n.set(dh(a,s,r[t]))}))}addListeners(){if(!this.visualElement.current)return;cf.set(this.visualElement,this);const e=wp(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();Ap(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),hu.read(t);const a=bp(window,"resize",(()=>this.scalePositionWithinConstraints())),s=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Hp((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{a(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:s=Wp,dragMomentum:i=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:a,dragElastic:s,dragMomentum:i}}}function uf(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const mf=e=>(t,n)=>{e&&hu.postRender((()=>e(t,n)))};const hf=(0,t.createContext)({}),pf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ff(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const vf={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!om.test(e))return e;e=parseFloat(e)}return`${ff(e,t.target.x)}% ${ff(e,t.target.y)}%`}},gf={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const a=e,s=jm.parse(e);if(s.length>5)return a;const i=jm.createTransformer(e),o="number"!==typeof s[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;s[0+o]/=l,s[1+o]/=c;const d=dh(l,c,.5);return"number"===typeof s[2+o]&&(s[2+o]/=d),"number"===typeof s[3+o]&&(s[3+o]/=d),i(s)}},xf={};const{schedule:yf,cancel:bf}=mu(queueMicrotask,!1);class jf extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:a}=e;var s;s=Nf,Object.assign(xf,s),a&&(t.group&&t.group.add(a),n&&n.register&&r&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",(()=>{this.safeToRemove()})),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),pf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:a}=this.props,s=n.projection;return s?(s.isPresent=a,r||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||hu.postRender((()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),yf.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wf(e){const[n,r]=dd(),a=(0,t.useContext)(nd);return(0,X.jsx)(jf,{...e,layoutGroup:a,switchLayoutGroup:(0,t.useContext)(hf),isPresent:n,safeToRemove:r})}const Nf={borderRadius:{...vf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vf,borderTopRightRadius:vf,borderBottomLeftRadius:vf,borderBottomRightRadius:vf,boxShadow:gf};const _f=(e,t)=>e.depth-t.depth;class Sf{constructor(){this.children=[],this.isDirty=!1}add(e){bu(this.children,e),this.isDirty=!0}remove(e){ju(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_f),this.isDirty=!1,this.children.forEach(e)}}function Ef(e,t){const n=yu.now(),r=a=>{let{timestamp:s}=a;const i=s-n;i>=t&&(pu(r),e(i-t))};return hu.read(r,!0),()=>pu(r)}function Cf(e){const t=Du(e)?e.get():e;return n=t,Boolean(n&&"object"===typeof n&&n.mix&&n.toValue)?t.toValue():t;var n}const Df=["TopLeft","TopRight","BottomLeft","BottomRight"],Tf=Df.length,kf=e=>"string"===typeof e?parseFloat(e):e,Af=e=>"number"===typeof e||om.test(e);function Pf(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Of=Mf(0,.5,zu),Rf=Mf(.5,.95,su);function Mf(e,t,n){return r=>r<e?0:r>t?1:n(Bd(e,t,r))}function If(e,t){e.min=t.min,e.max=t.max}function Lf(e,t){If(e.x,t.x),If(e.y,t.y)}function Ff(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Bf(e,t,n,r,a){return e=Zp(e-=t,1/n,r),void 0!==a&&(e=Zp(e,1/a,r)),e}function Wf(e,t,n,r,a){let[s,i,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;im.test(t)&&(t=parseFloat(t),t=dh(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=dh(s.min,s.max,r);e===s&&(o-=t),e.min=Bf(e.min,t,n,o,a),e.max=Bf(e.max,t,n,o,a)}(e,t[s],t[i],t[o],t.scale,r,a)}const $f=["x","scaleX","originX"],Uf=["y","scaleY","originY"];function zf(e,t,n,r){Wf(e.x,t,$f,n?n.x:void 0,r?r.x:void 0),Wf(e.y,t,Uf,n?n.y:void 0,r?r.y:void 0)}function Hf(e){return 0===e.translate&&1===e.scale}function Vf(e){return Hf(e.x)&&Hf(e.y)}function qf(e,t){return e.min===t.min&&e.max===t.max}function Gf(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Kf(e,t){return Gf(e.x,t.x)&&Gf(e.y,t.y)}function Yf(e){return Pp(e.x)/Pp(e.y)}function Xf(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Zf{constructor(){this.members=[]}add(e){bu(this.members,e),e.scheduleRender()}remove(e){if(ju(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Jf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Qf="undefined"!==typeof window&&void 0!==window.MotionDebug,ev=["","X","Y","Z"],tv={visibility:"hidden"};let nv=0;function rv(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function av(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Pu(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",hu,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&av(r)}function sv(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:a,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=nv++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qf&&(Jf.totalNodes=Jf.resolvedTargetDeltas=Jf.recalculatedProjection=0),this.nodes.forEach(lv),this.nodes.forEach(fv),this.nodes.forEach(vv),this.nodes.forEach(cv),Qf&&window.MotionDebug.record(Jf)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Sf)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new wu),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:a,layout:s,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||a)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=Ef(r,250),pf.hasAnimatedSinceResize&&(pf.hasAnimatedSinceResize=!1,this.nodes.forEach(pv))}))}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&i&&(a||s)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:a}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||i.getDefaultTransition()||wv,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!Kf(this.targetLayout,a)||r,d=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||d||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,d);const e={...kd(s,"layout"),onPlay:o,onComplete:l};(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||pv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=a}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,pu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gv),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&av(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){const e=this.path[a];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(uv);this.isUpdating||this.nodes.forEach(mv),this.isUpdating=!1,this.nodes.forEach(hv),this.nodes.forEach(iv),this.nodes.forEach(ov),this.clearAllSnapshots();const e=yu.now();fu.delta=qu(0,1e3/60,e-fu.timestamp),fu.timestamp=e,fu.isProcessing=!0,vu.update.process(fu),vu.preRender.process(fu),vu.render.process(fu),fu.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dv),this.sharedNodes.forEach(xv)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hu.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hu.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=a(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Vf(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&(t||Kp(this.latestValues)||a)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),Sv((r=n).x),Sv(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(Cv))){const{scroll:e}=this.root;e&&(rf(n.x,e.offset.x),rf(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Lf(n,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:a,options:s}=t;t!==this.root&&a&&s.layoutScroll&&(a.wasRoot&&Lf(n,e),rf(n.x,a.offset.x),rf(n.y,a.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Lf(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&sf(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Kp(e.latestValues)&&sf(n,e.latestValues)}return Kp(this.latestValues)&&sf(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Lf(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Kp(e.latestValues))continue;Gp(e.latestValues)&&e.updateSnapshot();const r={x:{min:0,max:0},y:{min:0,max:0}};Lf(r,e.measurePageBox()),zf(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Kp(this.latestValues)&&zf(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fu.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:a,layoutId:s}=this.options;if(this.layout&&(a||s)){if(this.resolvedRelativeTargetAt=fu.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Lp(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Lf(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,Mp(i.x,o.x,l.x),Mp(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Lf(this.target,this.layout.layoutBox),ef(this.target,this.targetDelta)):Lf(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Lp(this.relativeTargetOrigin,this.target,e.target),Lf(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qf&&Jf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Gp(this.parent.latestValues)&&!Yp(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===fu.timestamp&&(r=!1),r)return;const{layout:a,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!a&&!s)return;Lf(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=n.length;if(!a)return;let s,i;t.x=t.y=1;for(let o=0;o<a;o++){s=n[o],i=s.projectionDelta;const{visualElement:a}=s.options;a&&a.props.style&&"contents"===a.props.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&sf(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,ef(e,i)),r&&Kp(s.latestValues)&&sf(e,s.latestValues))}t.x<nf&&t.x>tf&&(t.x=1),t.y<nf&&t.y>tf&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Ff(this.prevProjectionDelta.x,this.projectionDelta.x),Ff(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Rp(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&Xf(this.projectionDelta.x,this.prevProjectionDelta.x)&&Xf(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Qf&&Jf.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},a={...this.latestValues},s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(jv));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,m,h,p,f,v;yv(s.x,e.x,n),yv(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lp(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h=this.relativeTarget,p=this.relativeTargetOrigin,f=i,v=n,bv(h.x,p.x,f.x,v),bv(h.y,p.y,f.y,v),u&&(l=this.relativeTarget,m=u,qf(l.x,m.x)&&qf(l.y,m.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),Lf(u,this.relativeTarget)),o&&(this.animationValues=a,function(e,t,n,r,a,s){a?(e.opacity=dh(0,void 0!==n.opacity?n.opacity:1,Of(r)),e.opacityExit=dh(void 0!==t.opacity?t.opacity:1,0,Rf(r))):s&&(e.opacity=dh(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let i=0;i<Tf;i++){const a=`border${Df[i]}Radius`;let s=Pf(t,a),o=Pf(n,a);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||Af(s)===Af(o)?(e[a]=Math.max(dh(kf(s),kf(o),r),0),(im.test(o)||im.test(s))&&(e[a]+="%")):e[a]=o)}(t.rotate||n.rotate)&&(e.rotate=dh(t.rotate||0,n.rotate||0,r))}(a,r,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(pu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hu.update((()=>{pf.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=Du(e)?e:Eu(e);return r.start(rp("",r,t,n)),r.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:a}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Ev(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Pp(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=Pp(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Lf(t,n),sf(t,a),Rp(this.projectionDeltaWithTransform,this.layoutCorrected,t,a)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Zf);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&rv("z",e,r,this.animationValues);for(let a=0;a<ev.length;a++)rv(`rotate${ev[a]}`,e,r,this.animationValues),rv(`skew${ev[a]}`,e,r,this.animationValues);e.render();for(const a in r)e.setStaticValue(a,r[a]),this.animationValues&&(this.animationValues[a]=r[a]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return tv;const r={visibility:""},a=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Cf(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=a?a(this.latestValues,""):"none",r;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=Cf(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Kp(this.latestValues)&&(t.transform=a?a({},""):"none",this.hasProjected=!1),t}const i=s.animationValues||s.latestValues;this.applyTransformsToTarget(),r.transform=function(e,t,n){let r="";const a=e.x.translate/t.x,s=e.y.translate/t.y,i=(null===n||void 0===n?void 0:n.z)||0;if((a||s||i)&&(r=`translate3d(${a}px, ${s}px, ${i}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:a,rotateY:s,skewX:i,skewY:o}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),a&&(r+=`rotateX(${a}deg) `),s&&(r+=`rotateY(${s}deg) `),i&&(r+=`skewX(${i}deg) `),o&&(r+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,i),a&&(r.transform=a(i,r.transform));const{x:o,y:l}=this.projectionDelta;r.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,s.animationValues?r.opacity=s===this?null!==(n=null!==(t=i.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:r.opacity=s===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const c in xf){if(void 0===i[c])continue;const{correct:e,applyTo:t}=xf[c],n="none"===r.transform?i[c]:e(i[c],s);if(t){const e=t.length;for(let a=0;a<e;a++)r[t[a]]=n}else r[c]=n}return this.options.layoutId&&(r.pointerEvents=s===this?Cf(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(uv),this.root.sharedNodes.clear()}}}function iv(e){e.updateLayout()}function ov(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:a}=e.options,s=n.source!==e.layout.source;"size"===a?Hp((e=>{const r=s?n.measuredBox[e]:n.layoutBox[e],a=Pp(r);r.min=t[e].min,r.max=r.min+a})):Ev(a,n.layoutBox,t)&&Hp((r=>{const a=s?n.measuredBox[r]:n.layoutBox[r],i=Pp(t[r]);a.max=a.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)}));const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Rp(i,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?Rp(o,e.applyTransform(r,!0),n.measuredBox):Rp(o,t,n.layoutBox);const l=!Vf(i);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:a,layout:s}=r;if(a&&s){const i={x:{min:0,max:0},y:{min:0,max:0}};Lp(i,n.layoutBox,a.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Lp(o,t,s.layoutBox),Kf(i,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function lv(e){Qf&&Jf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cv(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function dv(e){e.clearSnapshot()}function uv(e){e.clearMeasurements()}function mv(e){e.isLayoutDirty=!1}function hv(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function pv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function fv(e){e.resolveTargetDelta()}function vv(e){e.calcProjection()}function gv(e){e.resetSkewAndRotation()}function xv(e){e.removeLeadSnapshot()}function yv(e,t,n){e.translate=dh(t.translate,0,n),e.scale=dh(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function bv(e,t,n,r){e.min=dh(t.min,n.min,r),e.max=dh(t.max,n.max,r)}function jv(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const wv={duration:.45,ease:[.4,0,.1,1]},Nv=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),_v=Nv("applewebkit/")&&!Nv("chrome/")?Math.round:su;function Sv(e){e.min=_v(e.min),e.max=_v(e.max)}function Ev(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=Yf(t),a=Yf(n),s=.2,!(Math.abs(r-a)<=s));var r,a,s}function Cv(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Dv=sv({attachResizeListener:(e,t)=>bp(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tv={current:void 0},kv=sv({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Tv.current){const e=new Dv({});e.mount(window),e.setOptions({layoutScroll:!0}),Tv.current=e}return Tv.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Av={pan:{Feature:class extends gp{constructor(){super(...arguments),this.removePointerDownListener=su}onPointerDown(e){this.session=new _p(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lf(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:mf(e),onStart:mf(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&hu.postRender((()=>r(e,t)))}}}mount(){this.removePointerDownListener=wp(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends gp{constructor(e){super(e),this.removeGroupControls=su,this.removeListeners=su,this.controls=new df(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||su}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:kv,MeasureLayout:wf}};function Pv(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const a=r["onHover"+n];a&&hu.postRender((()=>a(t,jp(t))))}function Ov(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const a=r["onTap"+("End"===n?"":n)];a&&hu.postRender((()=>a(t,jp(t))))}const Rv=new WeakMap,Mv=new WeakMap,Iv=e=>{const t=Rv.get(e.target);t&&t(e)},Lv=e=>{e.forEach(Iv)};function Fv(e,t,n){const r=function(e){let{root:t,...n}=e;const r=t||document;Mv.has(r)||Mv.set(r,{});const a=Mv.get(r),s=JSON.stringify(n);return a[s]||(a[s]=new IntersectionObserver(Lv,{root:t,...n})),a[s]}(t);return Rv.set(e,n),r.observe(e),()=>{Rv.delete(e),r.unobserve(e)}}const Bv={some:0,all:1};const Wv={inView:{Feature:class extends gp{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:a}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:Bv[r]};return Fv(this.node.current,s,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,a&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends gp{mount(){const{current:e}=this.node;e&&(this.unmount=nu(e,(e=>(Ov(this.node,e,"Start"),(e,t)=>{let{success:n}=t;return Ov(this.node,e,n?"End":"Cancel")})),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends gp{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(H5){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xh(bp(this.node.current,"focus",(()=>this.onFocus())),bp(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends gp{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,a,s]=Gd(e,n),i=Kd((e=>{const{target:n}=e,r=t(e);if("function"!==typeof r||!n)return;const s=Kd((e=>{r(e),n.removeEventListener("pointerleave",s)}));n.addEventListener("pointerleave",s,a)}));return r.forEach((e=>{e.addEventListener("pointerenter",i,a)})),s}(e,(e=>(Pv(this.node,e,"Start"),e=>Pv(this.node,e,"End")))))}unmount(){}}}},$v={layout:{ProjectionNode:kv,MeasureLayout:wf}},Uv=(0,t.createContext)({strict:!1}),zv=(0,t.createContext)({});function Hv(e){return gd(e.animate)||Sd.some((t=>bd(e[t])))}function Vv(e){return Boolean(Hv(e)||e.variants)}function qv(e){const{initial:n,animate:r}=function(e,t){if(Hv(e)){const{initial:t,animate:n}=e;return{initial:!1===t||bd(t)?t:void 0,animate:bd(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(zv));return(0,t.useMemo)((()=>({initial:n,animate:r})),[Gv(n),Gv(r)])}function Gv(e){return Array.isArray(e)?e.join(" "):e}const Kv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yv={};for(const $ in Kv)Yv[$]={isEnabled:e=>Kv[$].some((t=>!!e[t]))};const Xv=Symbol.for("motionComponentSymbol");function Zv(e,n,r){return(0,t.useCallback)((t=>{t&&e.onMount&&e.onMount(t),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):Ap(r)&&(r.current=t))}),[n])}function Jv(e,n,r,a,s){var i,o;const{visualElement:l}=(0,t.useContext)(zv),c=(0,t.useContext)(Uv),d=(0,t.useContext)(ad),u=(0,t.useContext)(sd).reducedMotion,m=(0,t.useRef)(null);a=a||c.renderer,!m.current&&a&&(m.current=a(e,{visualState:n,parent:l,props:r,presenceContext:d,blockInitialAnimation:!!d&&!1===d.initial,reducedMotionConfig:u}));const h=m.current,p=(0,t.useContext)(hf);!h||h.projection||!s||"html"!==h.type&&"svg"!==h.type||function(e,t,n,r){const{layoutId:a,layout:s,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Qv(e.parent)),e.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:Boolean(i)||o&&Ap(o),visualElement:e,animationType:"string"===typeof s?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}(m.current,r,s,p);const f=(0,t.useRef)(!1);(0,t.useInsertionEffect)((()=>{h&&f.current&&h.update(r,d)}));const v=r[Au],g=(0,t.useRef)(Boolean(v)&&!(null===(i=window.MotionHandoffIsComplete)||void 0===i?void 0:i.call(window,v))&&(null===(o=window.MotionHasOptimisedAnimation)||void 0===o?void 0:o.call(window,v)));return pd((()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),yf.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())})),(0,t.useEffect)((()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask((()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,v)})),g.current=!1))})),h}function Qv(e){if(e)return!1!==e.options.allowProjection?e.projection:Qv(e.parent)}function eg(e){let{preloadedFeatures:n,createVisualElement:r,useRender:a,useVisualState:s,Component:i}=e;var o,l;function c(e,n){let o;const l={...(0,t.useContext)(sd),...e,layoutId:tg(e)},{isStatic:c}=l,d=qv(e),u=s(e,c);if(!c&&hd){!function(){(0,t.useContext)(Uv).strict;0}();const e=function(e){const{drag:t,layout:n}=Yv;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:(null===t||void 0===t?void 0:t.isEnabled(e))||(null===n||void 0===n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);o=e.MeasureLayout,d.visualElement=Jv(i,u,l,r,e.ProjectionNode)}return(0,X.jsxs)(zv.Provider,{value:d,children:[o&&d.visualElement?(0,X.jsx)(o,{visualElement:d.visualElement,...l}):null,a(i,e,Zv(u,d.visualElement,n),u,c,d.visualElement)]})}n&&function(e){for(const t in e)Yv[t]={...Yv[t],...e[t]}}(n),c.displayName=`motion.${"string"===typeof i?i:`create(${null!==(l=null!==(o=i.displayName)&&void 0!==o?o:i.name)&&void 0!==l?l:""})`}`;const d=(0,t.forwardRef)(c);return d[Xv]=i,d}function tg(e){let{layoutId:n}=e;const r=(0,t.useContext)(nd).id;return r&&void 0!==n?r+"-"+n:n}const ng=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rg(e){return"string"===typeof e&&!e.includes("-")&&!!(ng.indexOf(e)>-1||/[A-Z]/u.test(e))}const ag=e=>(n,r)=>{const a=(0,t.useContext)(zv),s=(0,t.useContext)(ad),i=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:a,createRenderState:s,onUpdate:i}=e;const o={latestValues:sg(t,n,r,a),renderState:s()};return i&&(o.onMount=e=>i({props:t,current:e,...o}),o.onUpdate=e=>i(e)),o}(e,n,a,s);return r?i():rd(i)};function sg(e,t,n,r){const a={},s=r(e,{});for(const m in s)a[m]=Cf(s[m]);let{initial:i,animate:o}=e;const l=Hv(e),c=Vv(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!n&&!1===n.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!==typeof u&&!gd(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const r=wd(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(a[r]=e)}for(const r in e)a[r]=e[r]}}}return a}const ig=(e,t)=>t&&"number"===typeof e?t.transform(e):e,og={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lg=iu.length;function cg(e,t,n){const{style:r,vars:a,transformOrigin:s}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(ou.has(l))i=!0;else if(Xm(l))a[l]=e;else{const t=ig(e,Tm[l]);l.startsWith("origin")?(o=!0,s[l]=t):r[l]=t}}if(t.transform||(i||n?r.transform=function(e,t,n){let r="",a=!0;for(let s=0;s<lg;s++){const i=iu[s],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=ig(o,Tm[i]);l||(a=!1,r+=`${og[i]||i}(${e}) `),n&&(t[i]=e)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=s;r.transformOrigin=`${e} ${t} ${n}`}}const dg={offset:"stroke-dashoffset",array:"stroke-dasharray"},ug={offset:"strokeDashoffset",array:"strokeDasharray"};function mg(e,t,n){return"string"===typeof e?e:om.transform(t+n*e)}function hg(e,t,n,r){let{attrX:a,attrY:s,attrScale:i,originX:o,originY:l,pathLength:c,pathSpacing:d=1,pathOffset:u=0,...m}=t;if(cg(e,m,r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:p,dimensions:f}=e;h.transform&&(f&&(p.transform=h.transform),delete h.transform),f&&(void 0!==o||void 0!==l||p.transform)&&(p.transformOrigin=function(e,t,n){return`${mg(t,e.x,e.width)} ${mg(n,e.y,e.height)}`}(f,void 0!==o?o:.5,void 0!==l?l:.5)),void 0!==a&&(h.x=a),void 0!==s&&(h.y=s),void 0!==i&&(h.scale=i),void 0!==c&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=a?dg:ug;e[s.offset]=om.transform(-r);const i=om.transform(t),o=om.transform(n);e[s.array]=`${i} ${o}`}(h,c,d,u,!1)}const pg=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),fg=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),vg=e=>"string"===typeof e&&"svg"===e.toLowerCase();function gg(e,t,n,r){let{style:a,vars:s}=t;Object.assign(e.style,a,r&&r.getProjectionStyles(n));for(const i in s)e.style.setProperty(i,s[i])}const xg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yg(e,t,n,r){gg(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(xg.has(a)?a:ku(a),t.attrs[a])}function bg(e,t){let{layout:n,layoutId:r}=t;return ou.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!xf[e]||"opacity"===e)}function jg(e,t,n){var r;const{style:a}=e,s={};for(const i in a)(Du(a[i])||t.style&&Du(t.style[i])||bg(i,e)||void 0!==(null===(r=null===n||void 0===n?void 0:n.getValue(i))||void 0===r?void 0:r.liveStyle))&&(s[i]=a[i]);return s}function wg(e,t,n){const r=jg(e,t,n);for(const a in e)if(Du(e[a])||Du(t[a])){r[-1!==iu.indexOf(a)?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a]=e[a]}return r}const Ng=["x","y","width","height","cx","cy","r"],_g={useVisualState:ag({scrapeMotionValuesFromProps:wg,createRenderState:fg,onUpdate:e=>{let{props:t,prevProps:n,current:r,renderState:a,latestValues:s}=e;if(!r)return;let i=!!t.drag;if(!i)for(const l in s)if(ou.has(l)){i=!0;break}if(!i)return;let o=!n;if(n)for(let l=0;l<Ng.length;l++){const e=Ng[l];t[e]!==n[e]&&(o=!0)}o&&hu.read((()=>{!function(e,t){try{t.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(H5){t.dimensions={x:0,y:0,width:0,height:0}}}(r,a),hu.render((()=>{hg(a,s,vg(r.tagName),t.transformTemplate),yg(r,a)}))}))}})},Sg={useVisualState:ag({scrapeMotionValuesFromProps:jg,createRenderState:pg})};function Eg(e,t,n){for(const r in t)Du(t[r])||bg(r,n)||(e[r]=t[r])}function Cg(e,n){const r={};return Eg(r,e.style||{},e),Object.assign(r,function(e,n){let{transformTemplate:r}=e;return(0,t.useMemo)((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return cg(e,n,r),Object.assign({},e.vars,e.style)}),[n])}(e,n)),r}function Dg(e,t){const n={},r=Cg(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Tg=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function kg(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Tg.has(e)}let Ag=e=>!kg(e);try{(Pg=require("@emotion/is-prop-valid").default)&&(Ag=e=>e.startsWith("on")?!kg(e):Pg(e))}catch(V5){}var Pg;function Og(e,n,r,a){const s=(0,t.useMemo)((()=>{const t={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return hg(t,n,vg(a),e.transformTemplate),{...t.attrs,style:{...t.style}}}),[n]);if(e.style){const t={};Eg(t,e.style,e),s.style={...t,...s.style}}return s}function Rg(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(n,r,a,s,i)=>{let{latestValues:o}=s;const l=(rg(n)?Og:Dg)(r,o,i,n),c=function(e,t,n){const r={};for(const a in e)"values"===a&&"object"===typeof e.values||(Ag(a)||!0===n&&kg(a)||!t&&!kg(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}(r,"string"===typeof n,e),d=n!==t.Fragment?{...c,...l,ref:a}:{},{children:u}=r,m=(0,t.useMemo)((()=>Du(u)?u.get():u),[u]);return(0,t.createElement)(n,{...d,children:m})}}function Mg(e,t){return function(n){let{forwardMotionProps:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return eg({...rg(n)?_g:Sg,preloadedFeatures:e,useRender:Rg(r),createVisualElement:t,Component:n})}}const Ig={current:null},Lg={current:!1};const Fg=[...rh,mm,jm],Bg=new WeakMap;const Wg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $g{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:s,visualState:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Vm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=yu.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,hu.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=i;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=Hv(n),this.isVariantNode=Vv(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:u,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in m){const e=m[h];void 0!==l[h]&&Du(e)&&e.set(l[h],!1)}}mount(e){this.current=e,Bg.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),Lg.current||function(){if(Lg.current=!0,hd)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ig.current=e.matches;e.addListener(t),t()}else Ig.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Ig.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Bg.delete(this.current),this.projection&&this.projection.unmount(),pu(this.notifyUpdate),pu(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=ou.has(e),r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&hu.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),a=t.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{r(),a(),s&&s(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Yv){const t=Yv[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Wg.length;n++){const t=Wg[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const a=t[r],s=n[r];if(Du(a))e.addValue(r,a);else if(Du(s))e.addValue(r,Eu(a,{owner:e}));else if(s!==a)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(a):t.hasAnimated||t.set(a)}else{const t=e.getStaticValue(r);e.addValue(r,Eu(void 0!==t?t:a,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Eu(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var a;return void 0!==r&&null!==r&&("string"===typeof r&&(Km(r)||Vu(r))?r=parseFloat(r):(a=r,!Fg.find(nh(a))&&jm.test(t)&&(r=Pm(e,t))),this.setBaseTarget(e,Du(r)?r.get():r)),Du(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if("string"===typeof n||"object"===typeof n){const a=wd(this.props,n,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);a&&(r=a[e])}if(n&&void 0!==r)return r;const a=this.getBaseTargetFromProps(this.props,e);return void 0===a||Du(a)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:a}on(e,t){return this.events[e]||(this.events[e]=new wu),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class Ug extends $g{constructor(){super(...arguments),this.KeyframeResolver=sh}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Du(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}class zg extends Ug{constructor(){super(...arguments),this.type="html",this.renderInstance=gg}readValueFromInstance(e,t){if(ou.has(t)){const e=Am(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),a=(Xm(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof a?a.trim():a}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return of(e,n)}build(e,t,n){cg(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return jg(e,t,n)}}class Hg extends Ug{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=zp}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ou.has(t)){const e=Am(t);return e&&e.default||0}return t=xg.has(t)?t:ku(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return wg(e,t,n)}build(e,t,n){hg(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,r){yg(e,t,0,r)}mount(e){this.isSVGTag=vg(e.tagName),super.mount(e)}}const Vg=vd(Mg({...yp,...Wv,...Av,...$v},((e,n)=>rg(e)?new Hg(n):new zg(n,{allowProjection:e!==t.Fragment})))),qg=()=>{var e;const n=(0,j.wA)(),r=(0,a.Zp)(),s=(0,a.zy)(),{bills:i,billsStatus:o}=(0,j.d4)((e=>e.bills)),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)("All"),[m,h]=(0,t.useState)("Today"),[p,f]=(0,t.useState)({from:null,to:null}),[v,g]=(0,t.useState)({from:null,to:null}),[x,y]=(0,t.useState)(null),[b,N]=(0,t.useState)(!1),[_,E]=(0,t.useState)(!1),[C,D]=(0,t.useState)(null),[T,A]=(0,t.useState)(""),[P,O]=(0,t.useState)("All"),[R,I]=(0,t.useState)(!1),[L,F]=(0,t.useState)(null),[B,W]=(0,t.useState)(null),{toast:$}=(0,H.dj)(),U=Zc("(max-width: 640px)"),z=Zc("(max-width: 1024px)"),[V,q]=(0,t.useState)(!1),[G,K]=(0,t.useState)(null),[Y,Z]=(0,t.useState)("broken");(0,t.useEffect)((()=>{if("idle"===o){const e=new Date,t={startDate:(0,Go.GP)(e,"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(e,1),"yyyy-MM-dd")};n(pt({dateRange:t}))}}),[n,o]),(0,t.useEffect)((()=>{var e,t;if(null!==(e=s.state)&&void 0!==e&&e.searchPatientId){c(s.state.patientName||"");const e=i.filter((e=>e.patientInfo._id===s.state.searchPatientId));e.length>0&&ae(e[0])}null!==(t=s.state)&&void 0!==t&&t.filterType&&(O(s.state.filterType),s.state.dateFilter&&(h(s.state.dateFilter),s.state.dateRange&&"Custom"===s.state.dateFilter&&(f(s.state.dateRange),g(s.state.dateRange))))}),[s.state,i]),(0,t.useEffect)((()=>{if("Custom"!==m||"Custom"===m&&p.from&&p.to){const e=(()=>{const e=new Date;switch(m){case"Today":return{startDate:(0,Go.GP)(e,"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(e,1),"yyyy-MM-dd")};case"Yesterday":return{startDate:(0,Go.GP)((0,Wc.e)(e,1),"yyyy-MM-dd"),endDate:(0,Go.GP)(e,"yyyy-MM-dd")};case"This Week":return{startDate:(0,Go.GP)((0,Wc.e)(e,7),"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(e,1),"yyyy-MM-dd")};case"Custom":return p.from&&p.to?{startDate:(0,Go.GP)(p.from,"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(p.to,1),"yyyy-MM-dd")}:null;default:return null}})();n(pt({dateRange:e}))}}),[m,p,n]);const J=e=>e.amountPaid===e.totalAmount?"Paid":"Due",Q=(0,t.useMemo)((()=>{const e=G||i;return null===e||void 0===e?void 0:e.filter((e=>{var t,n,r;const a=(null===(t=e.patientInfo)||void 0===t?void 0:t.name.toLowerCase().includes(null===l||void 0===l?void 0:l.toLowerCase()))||(null===(n=e.patientInfo)||void 0===n?void 0:n.phone.includes(l)),s=(null===(r=e.invoiceNumber)||void 0===r?void 0:r.toLowerCase())===(null===l||void 0===l?void 0:l.toLowerCase());let i=!0;const o=new Date(e.updatedAt),c=new Date;switch(m){case"Today":i=Oc(o,{start:(0,kc.o)(c),end:(0,Ac.D)(c)});break;case"Yesterday":i=Oc(o,{start:(0,kc.o)((0,Wc.e)(c,1)),end:(0,Ac.D)((0,Wc.e)(c,1))});break;case"This Week":i=Oc(o,{start:(0,Rc.k)(c),end:(0,Ac.D)(c)});break;case"Custom":p.from&&p.to&&(i=Oc(o,{start:(0,kc.o)(p.from),end:(0,Ac.D)(p.to)}))}const u=J(e);let h=!0;"All"!==d&&(h=u===d);let f=!0;return"All"!==P&&(f=e.patientType===P),a&&i&&h&&f||s}))}),[i,G,l,m,p,d,P]),ee=e=>{switch(e){case"Due":return"destructive";case"Paid":return"success";default:return"secondary"}},te=e=>{const t=new Date(e);return Kc(t)?(0,Go.GP)(t,"h:mm a"):(0,Go.GP)(t,"MMM dd, hh:mm a")},ne=()=>{v.from&&v.to&&(f(v),h("Custom"))},re=()=>{g({from:null,to:null}),f({from:null,to:null}),h("Today");const e=new Date,t={startDate:(0,Go.GP)(e,"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(e,1),"yyyy-MM-dd")};n(pt({dateRange:t}))},ae=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"simple";const r=null===(t=e.services)||void 0===t?void 0:t.filter((e=>{var t;const r=null===(t=e.category)||void 0===t?void 0:t.toLowerCase().includes("room rent");return"broken"===n?"breakup"===e.type||r:"additional"===e.type||"breakup"!==e.type||"additional"===e.type})),a=e.operationName||"";y({...e,services:r,printType:n,operationName:a}),N(!0),W(null)},se=e=>{r(`/billings/edit/${e._id}`,{state:{billData:e}}),W(null)},ie=e=>{F(e),I(!0),W(null)},oe=e=>{const t=(e=>{if(!e.services||0===e.services.length)return["simple"];const t=e.services.some((e=>"breakup"===e.type)),n=e.services.some((e=>"additional"===e.type||"breakup"!==e.type));return t&&n?["broken","simple"]:["simple"]})(e);return 1===t.length?(0,X.jsx)($s,{onClick:()=>ae(e,"simple"),children:"Print Bill"}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)($s,{onClick:()=>ae(e,"broken"),children:"Print BreakUp Bill"}),(0,X.jsx)($s,{onClick:()=>ae(e,"simple"),children:"Print Services Bill"})]})},le=e=>{var t,n;let{bill:r}=e;return(0,X.jsx)(k.Zp,{className:"mb-4 hover:bg-blue-50 transition-colors duration-200 cursor-pointer",onClick:e=>{e.target.closest("[data-prevent-view]")||ae(r)},children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"flex justify-between items-stretch",children:[(0,X.jsxs)("div",{className:"flex-grow",children:[(0,X.jsxs)("div",{className:"flex items-center mb-1",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold capitalize",children:null===(t=r.patientInfo)||void 0===t?void 0:t.name}),(0,X.jsx)(Yo.E,{variant:"outline",className:"ml-2 text-xs font-bold",children:"OPDProcedure"===r.patientType&&null!==(n=r.opdProcedure)&&void 0!==n&&n.procedureName?`${r.patientType} (${r.opdProcedure.procedureName})`:r.patientType})]}),(0,X.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Invoice No: ",r.invoiceNumber]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[(0,X.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total:"}),(0,X.jsxs)("p",{className:"font-sm",children:["\u20b9",r.totalAmount.toLocaleString("en-IN")]})]}),(0,X.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Due:"}),(0,X.jsxs)("p",{className:"font-sm text-red-500",children:["\u20b9",(r.totalAmount-r.amountPaid).toLocaleString("en-IN")]})]}),(0,X.jsxs)("div",{className:"flex gap-2 items-center col-span-2",children:[(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Date:"}),(0,X.jsx)("p",{className:"font-sm",children:te(r.updatedAt)})]})]})]}),(0,X.jsxs)("div",{className:"flex flex-col justify-between items-end ml-4",children:[(0,X.jsx)("div",{children:(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0","data-prevent-view":!0,children:(0,X.jsx)($o,{className:"h-4 w-4"})})}),(0,X.jsxs)(Ws,{align:"end","data-prevent-view":!0,children:[oe(r),"OPDProcedure"!==r.patientType&&(0,X.jsx)($s,{onClick:()=>se(r),children:"Edit Bill"}),(0,X.jsx)($s,{onClick:()=>ie(r),children:"Payments"})]})]})}),(0,X.jsx)(Yo.E,{variant:ee(J(r)),children:J(r)}),(0,X.jsx)("div",{})]})]})})})};return(0,X.jsxs)(k.Zp,{className:"w-full mx-auto border-0 shadow-none",children:[(0,X.jsx)(k.aR,{className:"px-4 pb-2",children:(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsxs)("div",{className:"flex items-center gap-4",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>r(-1),className:"hover:bg-slate-100",children:(0,X.jsx)(Uo.A,{className:"h-5 w-5"})}),(0,X.jsxs)("div",{children:[(0,X.jsx)(k.ZB,{children:"Billing List"}),(0,X.jsx)(k.BT,{children:"Manage and view services billing information"})]})]}),U&&(0,X.jsx)(w.$,{className:"hidden",variant:"outline",size:"icon",onClick:()=>r("/billings/create-service-bill"),children:(0,X.jsx)(S.A,{className:"h-4 w-4"})})]})}),(0,X.jsxs)(k.Wu,{className:"px-4",children:[(0,X.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:space-x-2 md:space-y-0",children:[(0,X.jsxs)("div",{className:"flex w-full space-x-2",children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search bills...",value:l,onChange:e=>(async e=>{if(c(e),e){if(3===e.split("/").filter(Boolean).length){const r=i.find((t=>{var n;return(null===(n=t.invoiceNumber)||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()}));if(r)K([r]);else try{const t=await n(bt(e)).unwrap();K(t||null)}catch(t){$({title:"Error",description:"Bill not found with the given invoice number",variant:"destructive"}),K(null)}}}else K(null)})(e.target.value),className:"pl-8 w-full"})]}),U&&(0,X.jsx)(w.$,{variant:"outline",className:"shrink-0",onClick:()=>q(!V),children:(0,X.jsx)(Ho,{className:"h-4 w-4"})})]}),U?(0,X.jsx)(fd,{children:V&&(0,X.jsx)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden w-full",children:(0,X.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full",children:[(0,X.jsx)(Ho,{className:"mr-2 h-4 w-4"}),"All"===d?"Status":d]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Status"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>u("All"),children:"All"}),(0,X.jsx)($s,{onSelect:()=>u("Paid"),children:"Paid"}),(0,X.jsx)($s,{onSelect:()=>u("Due"),children:"Due"})]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All"===P?"Patient Type":P]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Patient Type"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>O("All"),children:"All"}),(0,X.jsx)($s,{onSelect:()=>O("IPD"),children:"IPD"}),(0,X.jsx)($s,{onSelect:()=>O("OPD"),children:"OPD"}),(0,X.jsx)($s,{onSelect:()=>O("OPDProcedure"),children:"OPD Procedure"}),(0,X.jsx)($s,{onSelect:()=>O("Lab"),children:"Lab"})]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),"Today"===m?"Today":m]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Time Filter Options"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>h("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>h("Yesterday"),children:"Yesterday"}),(0,X.jsx)($s,{onSelect:()=>h("This Week"),children:"This Week"}),(0,X.jsx)($s,{onSelect:()=>h("Custom"),children:"Custom Range"})]})]}),"Custom"===m&&(0,X.jsx)(M.Ur,{from:v.from,to:v.to,onSelect:e=>g(e),onSearch:ne,onCancel:re})]})})}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"ml-auto",children:[(0,X.jsx)(Ho,{className:"mr-2 h-4 w-4"}),"All"===d?"Status":d]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Status"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>u("All"),children:"All"}),(0,X.jsx)($s,{onSelect:()=>u("Paid"),children:"Paid"}),(0,X.jsx)($s,{onSelect:()=>u("Due"),children:"Due"})]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All"===P?"Patient Type":P]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Patient Type"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>O("All"),children:"All"}),(0,X.jsx)($s,{onSelect:()=>O("IPD"),children:"IPD"}),(0,X.jsx)($s,{onSelect:()=>O("OPD"),children:"OPD"}),(0,X.jsx)($s,{onSelect:()=>O("OPDProcedure"),children:"OPD Procedure"}),(0,X.jsx)($s,{onSelect:()=>O("Lab"),children:"Lab"})]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),"Today"===m?"Today":m]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Time Filter Options"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>h("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>h("Yesterday"),children:"Yesterday"}),(0,X.jsx)($s,{onSelect:()=>h("This Week"),children:"This Week"}),(0,X.jsx)($s,{onSelect:()=>h("Custom"),children:"Custom Range"})]})]}),"Custom"===m&&(0,X.jsx)(M.Ur,{from:v.from,to:v.to,onSelect:e=>g(e),onSearch:ne,onCancel:re})]})]}),!U&&(0,X.jsx)("div",{className:" hidden",children:(0,X.jsxs)(w.$,{variant:"outline",onClick:()=>r("/billings/create-service-bill"),children:[(0,X.jsx)(S.A,{className:"mr-2 h-4 w-4"})," Create Bill"]})})]}),Q.length>0?U?(0,X.jsx)("div",{children:Q.map((e=>(0,X.jsx)(le,{bill:e},e._id)))}):(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Invoice No"}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Patient Name"}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"UHID No."}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Phone"}),!z&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Type"}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Date & Time"})]}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Total"}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Paid"}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Due"}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Status"}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Created By"}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:Q.map((e=>{var t,n,r,a,s;return(0,X.jsxs)(Wo.Hj,{className:"cursor-pointer hover:bg-blue-50 transition-colors duration-200",onClick:t=>{t.target.closest("[data-prevent-view]")||ae(e)},children:[(0,X.jsx)(Wo.nA,{className:"font-bold",children:e.invoiceNumber||"N/A"}),(0,X.jsx)(Wo.nA,{children:null===(t=e.patientInfo)||void 0===t?void 0:t.name}),(0,X.jsx)(Wo.nA,{children:(null===e||void 0===e||null===(n=e.patient)||void 0===n?void 0:n.registrationNumber)||(null===e||void 0===e||null===(r=e.patientInfo)||void 0===r?void 0:r.registrationNumber)||"N/A"}),(0,X.jsx)(Wo.nA,{children:e.patientInfo.phone}),!z&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Wo.nA,{className:"font-bold",children:"OPDProcedure"===e.patientType&&null!==(a=e.opdProcedure)&&void 0!==a&&a.procedureName?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("div",{children:e.patientType}),(0,X.jsx)("div",{children:`(${e.opdProcedure.procedureName})`})]}):e.patientType}),(0,X.jsx)(Wo.nA,{children:te(e.updatedAt)})]}),(0,X.jsxs)(Wo.nA,{className:"font-bold",children:["\u20b9",e.totalAmount.toLocaleString("en-IN")]}),(0,X.jsxs)(Wo.nA,{className:"text-green-600 font-bold",children:["\u20b9",e.amountPaid.toLocaleString("en-IN")]}),(0,X.jsxs)(Wo.nA,{className:"text-red-600 font-bold",children:["\u20b9",(e.totalAmount-e.amountPaid).toLocaleString("en-IN")]}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Yo.E,{variant:ee(J(e)),children:J(e)})}),(0,X.jsx)(Wo.nA,{children:(null===(s=e.createdBy)||void 0===s?void 0:s.name)||"N/A"}),(0,X.jsx)(Wo.nA,{children:(0,X.jsxs)(Ms,{open:B===e._id,onOpenChange:()=>{return t=e._id,void W(B===t?null:t);var t},children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",className:"h-8 w-8 p-0","data-prevent-view":!0,children:(0,X.jsx)(lo,{className:"h-4 w-4"})})}),(0,X.jsxs)(Ws,{align:"end","data-prevent-view":!0,children:[oe(e),"OPDProcedure"!==e.patientType&&(0,X.jsx)($s,{onClick:()=>se(e),children:"Edit Bill"}),(0,X.jsx)($s,{onClick:()=>ie(e),children:"Payments"})]})]})})]},e._id)}))})]})}):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-10",children:[(0,X.jsx)(Xc,{className:"h-16 w-16 text-gray-400 mb-4"}),(0,X.jsx)("p",{className:"text-xl font-semibold text-gray-600",children:"No bills found"}),(0,X.jsx)("p",{className:"text-gray-500 mt-2",children:"There are no bills matching your search criteria."})]})]}),(0,X.jsx)(Jc,{isOpen:b,setIsOpen:N,billData:x}),(0,X.jsx)(Ce,{open:_,onOpenChange:E,children:(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsxs)(Re,{children:["Delete Bill of ",null===C||void 0===C||null===(e=C.patientInfo)||void 0===e?void 0:e.name,"?"]}),(0,X.jsx)(Me,{children:"This will permanently delete the bill from your records."})]}),(0,X.jsxs)("div",{children:[(0,X.jsxs)("p",{className:"text-sm mb-1",children:["Please type ",(0,X.jsx)("span",{className:"font-semibold",children:"DELETE"})," to confirm."]}),(0,X.jsx)(Vn.p,{placeholder:"Type DELETE",value:T,onChange:e=>A(e.target.value)})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{onClick:()=>A(""),children:"Cancel"}),(0,X.jsx)(Ie,{onClick:()=>{n(vt(C._id)).unwrap().then((()=>{E(!1),D(null),A(""),$({title:"Bill deleted",description:`Bill of ${C.patientInfo.name} has been successfully deleted.`,variant:"success"})})).catch((e=>{$({title:"Error",description:`Failed to delete bill: ${e.message}`,variant:"destructive"})}))},disabled:"DELETE"!==T,children:"Delete"})]})]})}),(0,X.jsx)(td,{isOpen:R,setIsOpen:I,billData:L,onPaymentSuccess:e=>{F(e)}})]})};var Gg=__webpack_require__(3400);const Kg=e=>{let{ID:t,bookingNumber:n,patient:r,bookingDate:a,type:s,registrationNumber:i,clinicalSummary:o,notes:l,onSelect:c,vitals:d,diagnosis:u,doctor:m,treatment:h,medications:p,activeTab:f,additionalInstructions:v,labTests:g,isSelected:x,comorbidities:y,conditionOnAdmission:b,conditionOnDischarge:j}=e;return(0,X.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-2 cursor-pointer hover:bg-gray-100 "+(x?"border-2 border-green-400 bg-green-50":""),onClick:()=>c({ID:t,bookingNumber:n,patient:r,registrationNumber:i,bookingDate:a,type:s,clinicalSummary:o,doctor:m,notes:l,vitals:d,diagnosis:u,treatment:h,medications:p,labTests:g,comorbidities:y,conditionOnAdmission:b,conditionOnDischarge:j}),children:[(0,X.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,X.jsx)(Co,{children:(0,X.jsx)(To,{className:"bg-blue-500 text-white font-semibold",children:(e=>{const t=e.split(" ");return 1===t.length?t[0].charAt(0).toUpperCase():(t[0].charAt(0)+t[t.length-1].charAt(0)).toUpperCase()})(r.name)})}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"font-semibold capitalize",children:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return e.length>t?e.substring(0,t)+"...":e}(r.name)}),(0,X.jsxs)("p",{className:"text-xs font-semibold",children:["UHID: ",i]}),(0,X.jsxs)("p",{className:"text-xs font-semibold",children:["Slot: ",n]})]})]}),(0,X.jsx)("div",{className:"text-right",children:"all"===f&&(0,X.jsx)(Yo.E,{variant:"outline",children:s})})]})},Yg=e=>{var n;let{onPatientSelect:r,onDoctorSelect:a}=e;const[s,i]=(0,t.useState)(""),[o,l]=(0,t.useState)("all"),[c,d]=(0,t.useState)(null),[u,m]=(0,t.useState)(new Date),[h,p]=(0,t.useState)(!1),[f,v]=(0,t.useState)(""),g=(0,j.wA)(),[x,y]=(0,t.useState)([]),b=(0,j.d4)((e=>e.staff.doctors)),{userData:N}=(0,j.d4)((e=>e.user));(0,t.useEffect)((()=>{g(An())}),[]),(0,t.useEffect)((()=>{var e;null!==N&&void 0!==N&&null!==(e=N.roles)&&void 0!==e&&e.includes("doctor")&&null!==N&&void 0!==N&&N._id&&(a(N._id),v(N._id))}),[N]),(0,t.useEffect)((()=>{if(u){const e=(0,Go.GP)(u,"yyyy-MM-dd");g((0,Be.PP)({startDate:e})).unwrap().then((e=>y(e.data)))}}),[g,u]);const _=null===x||void 0===x?void 0:x.filter((e=>{var t,n,r,a,i;return((null===(t=e.patient.name)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(null===s||void 0===s?void 0:s.toLowerCase()))||(null===(r=e.bookingNumber)||void 0===r||null===(a=r.toString())||void 0===a?void 0:a.includes(s)))&&("all"===o||e.type.toLowerCase()===o)&&(null===(i=e.doctor)||void 0===i?void 0:i._id)===f})),S=e=>{d(e.ID),r(e)};return(0,X.jsxs)(k.Zp,{className:"h-full flex flex-col",children:[(0,X.jsxs)("div",{className:"mb-4 flex w-[280px] justify-between",children:[(0,X.jsxs)(ko.AM,{open:h,onOpenChange:p,children:[(0,X.jsx)(ko.Wv,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:(0,Ee.cn)("w-[280px] justify-start text-left font-normal",!u&&"text-muted-foreground"),children:[(0,X.jsx)(Rs.CTc,{className:"mr-2 h-4 w-4"}),u?(0,Go.GP)(u,"PPP"):(0,X.jsx)("span",{children:"Pick a date"})]})}),(0,X.jsx)(ko.hl,{className:"w-auto p-0",children:(0,X.jsx)(Gg.V,{mode:"single",selected:u,onSelect:e=>{m(e),p(!1)},initialFocus:!0})})]}),(0,X.jsxs)(A.l6,{value:f,onValueChange:e=>{a(e),v(e)},disabled:null===N||void 0===N||null===(n=N.roles)||void 0===n?void 0:n.includes("doctor"),children:[(0,X.jsx)(A.bq,{children:(0,X.jsx)(A.yv,{placeholder:"Select Doctor"})}),(0,X.jsx)(A.gC,{children:null===b||void 0===b?void 0:b.map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.name},e._id)))})]})]}),(0,X.jsxs)(yl,{value:o,onValueChange:l,className:"w-full flex-grow flex flex-col",children:[(0,X.jsxs)(bl,{className:"h-20 grid grid-cols-3 gap-2",children:[(0,X.jsx)(jl,{value:"all",children:(0,X.jsxs)("div",{className:"flex flex-col justify-between items-center py-1 gap-1",children:[(0,X.jsx)("span",{className:"hidden lg:block",children:"All Bookings"}),(0,X.jsx)("span",{className:"lg:hidden",children:"All"}),(0,X.jsx)("span",{className:"bg-blue-500 text-white rounded-lg w-10 h-6 flex items-center justify-center",children:_.length})]})}),(0,X.jsx)(jl,{value:"opd",children:(0,X.jsxs)("div",{className:"flex flex-col justify-between items-center py-1 gap-1",children:[(0,X.jsx)("span",{children:"OPD"}),(0,X.jsx)("span",{className:"bg-green-500 text-white rounded-lg w-10 h-6 flex items-center justify-center",children:null===_||void 0===_?void 0:_.filter((e=>"opd"===e.type.toLowerCase())).length})]})}),(0,X.jsx)(jl,{value:"ipd",children:(0,X.jsxs)("div",{className:"flex flex-col justify-between items-center py-1 gap-1",children:[(0,X.jsx)("span",{children:"IPD"}),(0,X.jsx)("span",{className:"bg-yellow-500 text-white rounded-lg w-10 h-6 flex items-center justify-center",children:null===_||void 0===_?void 0:_.filter((e=>"ipd"===e.type.toLowerCase())).length})]})})]}),(0,X.jsx)("div",{className:"px-2 pt-1",children:(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(oo.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,X.jsx)(Vn.p,{type:"text",placeholder:"Search bookings...",value:s,onChange:e=>i(e.target.value),className:"pl-10 pr-4 py-2 w-full"})]})}),(0,X.jsxs)("div",{className:"flex-grow overflow-auto",children:[(0,X.jsx)(wl,{value:"all",children:_.map((e=>(0,X.jsx)(Kg,{ID:e._id,bookingNumber:e.bookingNumber,patient:{...e.patient,registrationNumber:e.registrationNumber},bookingDate:e.bookingDate,doctor:e.doctor,type:e.type,vitals:e.vitals,diagnosis:e.diagnosis,clinicalSummary:e.clinicalSummary,notes:e.notes,activeTab:o,treatment:e.treatment,medications:e.medications,labTests:e.labTests,onSelect:S,comorbidities:e.comorbidities,conditionOnAdmission:e.conditionOnAdmission,conditionOnDischarge:e.conditionOnDischarge,isSelected:c===e._id,registrationNumber:e.registrationNumber},e._id)))}),(0,X.jsx)(wl,{value:"opd",children:_.filter((e=>"opd"===e.type.toLowerCase())).map((e=>(0,X.jsx)(Kg,{ID:e._id,bookingNumber:e.bookingNumber,patient:e.patient,bookingDate:e.bookingDate,reasonForVisit:e.reasonForVisit,type:e.type,vitals:e.vitals,diagnosis:e.diagnosis,treatment:e.treatment,medications:e.medications,additionalInstructions:e.additionalInstructions,labTests:e.labTests,onSelect:S,comorbidities:e.comorbidities,isSelected:c===e._id,registrationNumber:e.registrationNumber},e._id)))}),(0,X.jsx)(wl,{value:"ipd",children:_.filter((e=>"ipd"===e.type.toLowerCase())).map((e=>(0,X.jsx)(Kg,{ID:e._id,bookingNumber:e.bookingNumber,patient:e.patient,bookingDate:e.bookingDate,clinicalSummary:e.clinicalSummary,notes:e.notes,type:e.type,vitals:e.vitals,diagnosis:e.diagnosis,treatment:e.treatment,medications:e.medications,additionalInstructions:e.additionalInstructions,labTests:e.labTests,onSelect:S,comorbidities:e.comorbidities,isSelected:c===e._id,registrationNumber:e.registrationNumber},e._id)))})]})]})]})},Xg='(\n  patient,\n  formData,\n  sections,\n  hospital,\n  ref\n) => {\n  const FieldRenderer = ({ field }) => {\n    const { id, type, label } = field;\n\n    switch (type) {\n      case "vitals": {\n        const vitalItems = [\n          { label: "Temperature", value: formData.vitals?.temperature, unit: "\xb0C" },\n          { label: "Heart Rate", value: formData.vitals?.heartRate, unit: "bpm" },\n          { label: "Blood Pressure", value: formData.vitals?.bloodPressure, unit: "mmHg" },\n          { label: "Respiratory Rate", value: formData.vitals?.respiratoryRate, unit: "bpm" },\n          { label: "Height", value: formData.vitals?.height, unit: "cm" },\n          { label: "Weight", value: formData.vitals?.weight, unit: "kg" },\n          { label: "BMI", value: formData.vitals?.bmi, unit: "" },\n          { label: "O2 Saturation", value: formData.vitals?.oxygenSaturation, unit: "%" },\n        ];\n\n        const presentVitals = vitalItems.filter(\n          (item) => item.value !== undefined && item.value !== null && item.value !== ""\n        );\n\n        if (presentVitals.length === 0) return null;\n\n        return React.createElement(\n          "div",\n          { style: { marginBottom: "10px" } },\n          React.createElement(\n            "div",\n            { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", marginBottom: "5px" } },\n            label\n          ),\n          React.createElement(\n            "div",\n            { style: { display: "grid", gridTemplateColumns: "repeat(4, 1fr)", gap: "5px" } },\n            presentVitals.map((item, index) =>\n              React.createElement(\n                "div",\n                { key: index, style: { fontSize: "12px" } },\n                React.createElement("span", { style: { fontWeight: "bold" } }, `${item.label}: `),\n                React.createElement("span", null, `${item.value} ${item.unit}`)\n              )\n            )\n          )\n        );\n      }\n\n      case "textarea": {\n        const value = formData[id];\n        if (!value) return null;\n        return React.createElement(\n          "div",\n          { style: { display: "flex", gap: "5px", marginBottom: "10px", alignItems: "flex-start" } },\n          React.createElement(\n            "span",\n            { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", minWidth: \'150px\' } },\n            `${label}:`\n          ),\n          React.createElement("div", { style: { fontSize: "14px", whiteSpace: "pre-wrap" } }, value)\n        );\n      }\n      \n      case "multiselect": {\n        const value = formData[id];\n        if (!value || value.length === 0) return null;\n        const displayValue = value.map((item) => item.name).join(", ");\n        if (!displayValue) return null;\n        return React.createElement(\n          "div",\n          { style: { display: "flex", gap: "5px", marginBottom: "10px", alignItems: "flex-start" } },\n          React.createElement(\n            "span",\n            { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", minWidth: \'150px\' } },\n            `${label}:`\n          ),\n          React.createElement("div", { style: { fontSize: "14px" } }, displayValue)\n        );\n      }\n\n      case "medicineAdvice": {\n        const medications = formData.medications;\n        if (!medications || medications.length === 0 || !medications.some((med) => med.name))\n          return null;\n        return React.createElement(\n          "div",\n          { style: { marginBottom: "14px" } },\n          React.createElement(\n            "div",\n            { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", marginBottom: "5px" } },\n            "Medications"\n          ),\n          React.createElement(\n            "div",\n            { style: { width: "100%" } },\n            medications\n              .filter((medication) => medication.name)\n              .map((medication, index) =>\n                React.createElement(\n                  "div",\n                  {\n                    key: index,\n                    style: {\n                      display: "grid",\n                      gridTemplateColumns: "5% 35% 25% 20% 15%",\n                      marginBottom: "3px",\n                      fontSize: "14px",\n                    },\n                  },\n                  React.createElement("span", null, `${index + 1}.`),\n                  React.createElement("span", null, medication.name),\n                  React.createElement("span", null, medication.frequency),\n                  React.createElement("span", null, `${medication.duration} days`),\n                  React.createElement("span", null, medication.remarks)\n                )\n              )\n          )\n        );\n      }\n      case "date": {\n        const value = formData[id];\n        if (!value) return null;\n        return React.createElement(\n          "div",\n          { style: { display: "flex", gap: "5px", marginBottom: "10px", alignItems: "flex-start" } },\n          React.createElement(\n            "span",\n            { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", minWidth: \'150px\' } },\n            `${label}:`\n          ),\n          React.createElement("div", { style: { fontSize: "14px" } }, value?.split("-").reverse().join("/"))\n        );\n      }\n\n      \n      default:\n        return null;\n    }\n  };\n\n  return React.createElement(\n    "div",\n    { ref: ref, style: { width: "100%", padding: "25px" }, className: "print-content" },\n    React.createElement(\n      "div",\n      { className: "print:block mb-2" },\n      React.createElement(HospitalHeader, { hospitalInfo: hospital })\n    ),\n    React.createElement(\n      "div",\n      { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "10px" } },\n      React.createElement("div"),\n      React.createElement(\n        "h1",\n        { style: { fontSize: "15px", color: "#1a5f7a", fontWeight: "bold", textAlign: "center", flex: 1 } },\n        "OPD Prescription"\n      ),\n      React.createElement("div", { style: { fontSize: "14px", color: "#2c3e50" } }, format(new Date(), "dd/MM/yyyy"))\n    ),\n    React.createElement(\n      "div",\n      { style: { display: "grid", gridTemplateColumns: "1fr 1fr", gap: "10px", marginBottom: "10px" } },\n      React.createElement(\n        "div",\n        { style: { display: "flex", gap: "5px" } },\n        React.createElement("span", { style: { fontWeight: "bold", fontSize: "14px" } }, "Name:"),\n        React.createElement("span", { style: { fontSize: "14px" } }, patient?.name || "")\n      ),\n      React.createElement(\n        "div",\n        { style: { display: "flex", gap: "5px" } },\n        React.createElement("span", { style: { fontWeight: "bold", fontSize: "14px" } }, "Age/Sex:"),\n        React.createElement("span", { style: { fontSize: "14px" } }, `${patient?.age || ""}/ ${patient?.gender || ""}`)\n      ),\n      React.createElement(\n        "div",\n        { style: { display: "flex", gap: "5px" } },\n        React.createElement("span", { style: { fontWeight: "bold", fontSize: "14px" } }, "UHID No:"),\n        React.createElement("span", { style: { fontSize: "14px" } }, patient?.registrationNumber || "")\n      ),\n      React.createElement(\n        "div",\n        { style: { display: "flex", gap: "5px" } },\n        React.createElement("span", { style: { fontWeight: "bold", fontSize: "14px" } }, "Contact:"),\n        React.createElement("span", { style: { fontSize: "14px" } }, patient?.contactNumber || "")\n      )\n    ),\n    sections.map((section) =>\n      section.fields.map((field) =>\n        React.createElement(FieldRenderer, { key: field.id, field: field })\n      )\n    ),\n    React.createElement(\n      "div",\n      { style: { marginTop: "20px", textAlign: "right", fontSize: "14px" } },\n      "Doctor\'s Signature"\n    )\n  );\n}',Zg=(0,t.forwardRef)(((e,n)=>{const{patient:r,formData:a,field:s,hospital:i}=e,o=(0,j.d4)((e=>e.templates.headerTemplateArray)),l=(null===o||void 0===o?void 0:o.length)>0?o[0].value:Kn.h,c=(0,Gn.G)(l||Kn.h),d=new Function("React","HospitalHeader","format",`return (${Xg});`);try{return d(t,c,Go.GP)(r,a,s,i,n)}catch(u){return console.error("Error rendering OPD prescription:",u),t.createElement("div",null,"Error rendering OPD prescription template")}}));function Jg(e){let{suggestions:n,selectedValues:r,onAdd:a,onRemove:s,placeholder:i}=e;const[o,l]=(0,t.useState)(""),c=(0,t.useRef)(null),d=(0,t.useMemo)((()=>{const e=o.toLowerCase(),t=new Set(r.map((e=>e.name)));return null===n||void 0===n?void 0:n.filter((n=>{var r;return!t.has(null===n||void 0===n?void 0:n.name)&&(null===n||void 0===n||null===(r=n.name)||void 0===r?void 0:r.toLowerCase().includes(e))}))}),[o,n,r]);return(0,X.jsxs)("div",{className:"flex flex-col ",children:[(0,X.jsxs)("div",{className:"w-full min-h-10 rounded-md border border-input bg-background text-sm flex flex-wrap items-center gap-1 px-2 cursor-text",onClick:()=>{var e;null===(e=c.current)||void 0===e||e.focus()},children:[r.map(((e,t)=>(0,X.jsxs)(Yo.E,{variant:"primary",className:"flex items-center  text-[16px] bg-blue-100 text-blue-800 px-1 py-0.5 rounded",children:[e.name,(0,X.jsx)(T.A,{className:"ml-1 h-4 w-4 cursor-pointer",onClick:t=>{t.stopPropagation(),s(e.name)}})]},t))),(0,X.jsx)("input",{ref:c,type:"text",placeholder:0===r.length?i||"Search...":"",className:"flex-grow h-full bg-transparent leading-none p-0 border-none  focus:outline-none focus:ring-0 font-medium",value:o,onChange:e=>l(e.target.value),onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const t=o.trim();if(!t)return;if(r.some((e=>e.name.toLowerCase()===t.toLowerCase())))return;const s=null===n||void 0===n?void 0:n.find((e=>{var n;return(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase())===t.toLowerCase()}));return a(s||{name:t}),l(""),void setTimeout((()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.focus()}),0)}if("Backspace"===e.key&&""===o.trim()&&r.length>0){e.preventDefault();const t=r[r.length-1];s(t.name),setTimeout((()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.focus()}),0)}}})]}),(0,X.jsx)("div",{className:"border rounded-md",children:(0,X.jsx)(b.F,{className:" w-full",children:d.length>0?(0,X.jsx)("div",{className:"p-2 flex flex-row flex-wrap gap-2 max-h-[200px]",children:d.map(((e,t)=>(0,X.jsxs)("div",{onClick:()=>(e=>{var t;a(e),l(""),null===(t=c.current)||void 0===t||t.focus()})(e),className:"cursor-pointer bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-1 rounded-md text-sm font-medium transition-colors flex items-center",children:[(0,X.jsx)("span",{children:e.name}),e.rate&&(0,X.jsxs)("span",{className:"text-gray-600 ml-2",children:["\u20b9",e.rate]})]},`${e.name}-${t}`)))}):(0,X.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"No available items."})})})]})}function Qg(e){let{vitals:t,handleVitalChange:n,readOnly:r}=e;return(0,X.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"temperature",className:"text-xs font-semibold",children:"Temperature (\xb0C)"}),(0,X.jsx)(Vn.p,{id:"temperature",name:"temperature",value:null===t||void 0===t?void 0:t.temperature,onChange:n,className:"h-8 text-sm font-medium",readOnly:r})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"heartRate",className:"text-xs font-semibold",children:"Heart Rate (bpm)"}),(0,X.jsx)(Vn.p,{id:"heartRate",name:"heartRate",value:null===t||void 0===t?void 0:t.heartRate,onChange:n,className:"h-8 text-sm font-medium",readOnly:r})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"bloodPressure",className:"text-xs font-semibold",children:"Blood Pressure (mmHg)"}),(0,X.jsx)(Vn.p,{id:"bloodPressure",name:"bloodPressure",value:null===t||void 0===t?void 0:t.bloodPressure,onChange:n,className:"h-8 text-sm font-medium",readOnly:r})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"respiratoryRate",className:"text-xs font-semibold",children:"Respiratory Rate (bpm)"}),(0,X.jsx)(Vn.p,{id:"respiratoryRate",name:"respiratoryRate",value:t.respiratoryRate,onChange:n,className:"h-8 text-sm font-medium",readOnly:r})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"height",className:"text-xs font-semibold",children:"Height (cm)"}),(0,X.jsx)(Vn.p,{id:"height",name:"height",value:t.height,onChange:n,className:"h-8 text-sm font-medium",readOnly:r})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"weight",className:"text-xs font-semibold",children:"Weight (kg)"}),(0,X.jsx)(Vn.p,{id:"weight",name:"weight",value:t.weight,onChange:n,className:"h-8 text-sm font-medium",readOnly:r})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"bmi",className:"text-xs font-semibold",children:"BMI"}),(0,X.jsx)(Vn.p,{id:"bmi",name:"bmi",value:t.bmi,readOnly:!0,className:"h-8 text-sm font-medium bg-gray-100"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"oxygenSaturation",className:"text-xs font-semibold",children:"O\u2082 Saturation (%)"}),(0,X.jsx)(Vn.p,{id:"oxygenSaturation",name:"oxygenSaturation",value:t.oxygenSaturation,onChange:n,className:"h-8 text-sm font-medium",readOnly:r})]})]})}var ex=__webpack_require__(781);function tx(e){let{medications:n,handleMedicationChange:r,addMedication:a,removeMedication:s}=e;const{medicinelist:i=[]}=(0,j.d4)((e=>e.templates)),o=(0,t.useMemo)((()=>i.map((e=>({name:e})))),[i]);return(0,X.jsxs)("div",{children:[null===n||void 0===n?void 0:n.map(((e,t)=>(0,X.jsxs)("div",{className:"grid grid-cols-[3fr_1fr_1fr_2fr_auto] gap-2 mb-2 items-center",children:[(0,X.jsx)(Gs.A,{suggestions:o,placeholder:"Select medicine",value:e.name,setValue:e=>r(t,"name",e),onSuggestionSelect:e=>((e,t)=>{r(e,"name",t.name)})(t,e)}),(0,X.jsx)(Vn.p,{placeholder:"0-0-0",value:e.frequency,onChange:e=>r(t,"frequency",e.target.value),className:"font-medium "}),(0,X.jsx)(Vn.p,{placeholder:"Duration",value:e.duration,onChange:e=>r(t,"duration",e.target.value),className:"font-medium "}),(0,X.jsx)(Vn.p,{placeholder:"Remarks",value:e.remarks,onChange:e=>r(t,"remarks",e.target.value),className:"font-medium"}),(0,X.jsx)(w.$,{variant:"destructive",size:"icon",onClick:()=>s(t),disabled:1===n.length,children:(0,X.jsx)(C.A,{className:"h-4 w-4"})})]},t))),(0,X.jsxs)(w.$,{onClick:a,variant:"outline",className:"mt-2 font-semibold",children:[(0,X.jsx)(ex.A,{className:"h-4 w-4 mr-2"})," Add Medication"]})]})}function nx(e){let{field:t,formData:n,formConfig:r,handleChange:a,handleVitalChange:s,handleMultiSelectChange:i,handleRemoveValue:o,handleMedicationChange:l,addMedication:c,removeMedication:d,suggestions:u}=e;return(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:t.id,className:"text-lg font-semibold",children:t.label}),(()=>{switch(t.type){case"textarea":return(0,X.jsxs)("div",{className:"space-y-2",children:[t.suggestions&&t.suggestions.length>0&&(0,X.jsx)("div",{className:"flex flex-wrap gap-2",children:t.suggestions.map(((e,r)=>(0,X.jsxs)("div",{className:"relative group",children:[(0,X.jsx)("button",{type:"button",onClick:()=>{n[t.id]===e.content?a({target:{name:t.id,value:""}}):a({target:{name:t.id,value:e.content}})},className:"px-3 py-1 rounded-full text-xs font-medium transition-colors whitespace-nowrap "+(n[t.id]===e.content?"bg-primary text-primary-foreground":"bg-secondary hover:bg-secondary/80"),children:e.name}),n[t.id]!==e.content&&(0,X.jsxs)("div",{className:"absolute z-50 invisible group-hover:visible bg-popover text-popover-foreground p-3 rounded-lg shadow-lg min-w-[200px] max-w-[400px] mt-2 left-0 whitespace-pre-wrap text-sm border",children:[(0,X.jsx)("div",{className:"font-semibold mb-1",children:"Template Preview:"}),e.content]})]},r)))}),(0,X.jsx)(Xo.T,{id:t.id,name:t.id,value:n[t.id],onChange:a,placeholder:`Enter ${t.label.toLowerCase()}`,className:"min-h-[100px] text-sm font-medium"})]});case"multiselect":return(0,X.jsx)(Jg,{suggestions:(Array.isArray(t.suggestions)?t.suggestions:u[t.suggestions]||[]).map((e=>"object"===typeof e&&null!==e?e:{name:e})),selectedValues:n[t.id]||[],onAdd:e=>{const r=[...n[t.id]||[],e];i(t.id,r)},onRemove:e=>o(t.id,e),placeholder:`Search ${t.label.toLowerCase()}...`});case"vitals":return(0,X.jsx)(Qg,{vitals:n.vitals||{},handleVitalChange:s});case"medicineAdvice":return(0,X.jsx)(tx,{medications:n.medications,handleMedicationChange:l,addMedication:c,removeMedication:d});case"date":return(0,X.jsx)(Vn.p,{type:"date",id:t.id,name:t.id,value:n[t.id]||"",onChange:a,className:"max-w-[200px]"});default:return(0,X.jsxs)("p",{children:["Unsupported field type: ",t.type]})}})()]})}const rx=e=>{const t={vitals:{}};return e&&e.sections?(e.sections.forEach((e=>{e.fields.forEach((e=>{const{id:n,type:r,disabled:a,suggestions:s}=e;if(!a)switch(r){case"vitals":t.vitals={temperature:"",heartRate:"",bloodPressure:"",respiratoryRate:"",height:"",weight:"",oxygenSaturation:"",bmi:""};break;case"medicineAdvice":t.medications=[{name:"",frequency:"0-0-0",duration:"",remarks:""}];break;case"multiselect":t[n]=[],"diagnosis"===n&&(t.diagnosis=[]);break;case"text":case"textarea":t[n]=""}}))})),t):t};function ax(e){var n,r,a;let{patient:s,doctorId:i}=e;const o=(0,j.wA)(),{toast:l}=(0,H.dj)(),c=(0,t.useRef)(),{templates:d,status:u}=(0,j.d4)((e=>e.doctorPrescription)),m=(0,j.d4)((e=>e.hospital.hospitalInfo)),{labTestsTemplate:h,diagnosisTemplate:p=[],comorbidities:f=[],status:v}=(0,j.d4)((e=>e.templates)),{currentDoctorData:g}=(0,j.d4)((e=>e.doctorData)),{templates:x}=(0,j.d4)((e=>e.textTemplates)),y=(0,j.d4)((e=>e.patients.prescriptionUpdateStatus)),[N,_]=(0,t.useState)((()=>rx(kn)));(0,t.useEffect)((()=>{"idle"===v&&o((0,R.QK)()),"idle"===u&&o(An())}),[v,o,u]),(0,t.useEffect)((()=>{var e;null!==s&&void 0!==s&&null!==(e=s.doctor)&&void 0!==e&&e._id&&o(Nn(s.doctor._id))}),[null===s||void 0===s||null===(n=s.doctor)||void 0===n?void 0:n._id,o]);const S=(0,t.useMemo)((()=>{var e;if(d&&null!==(e=s.doctor)&&void 0!==e&&e._id){const e=d.find((e=>e.associatedDoctors.some((e=>{var t;return e._id===(null===(t=s.doctor)||void 0===t?void 0:t._id)}))));if(e)return e.value}return kn}),[d,null===(r=s.doctor)||void 0===r?void 0:r._id,s]),E=(e,t,n)=>{if(void 0===e||null===e)return"multiselect"===t?[]:e;switch(t){case"multiselect":if("string"===typeof e)return e.split(",").map((e=>({name:e.trim()}))).filter((e=>e.name));if(Array.isArray(e)){if(e.length>0&&"string"===typeof e[0])return e.map((e=>({name:e})));if(e.length>0&&"object"===typeof e[0]&&void 0!==e[0].name)return e}return[];case"diagnosis":return"string"===typeof e?e.split(",").map((e=>({name:e.trim()}))).filter((e=>e.name)):Array.isArray(e)&&e.length>0&&"string"===typeof e[0]?e.map((e=>({name:e}))):Array.isArray(e)?e:[];case"medicineAdvice":return Array.isArray(e)?e:[];case"vitals":return"object"===typeof e&&null!==e?e:{};default:return e}};(0,t.useEffect)((()=>{let e=rx(S);if(s){const t=(e=>{const t={};return e&&e.sections?(e.sections.forEach((e=>{e.fields.forEach((e=>{e.disabled||(t[e.id]=e.type)}))})),t):t})(S);e=Object.keys(e).reduce(((n,r)=>{const a=s.prescription||{},i=t[r];if("vitals"===r){if(s.vitals)for(const e in n.vitals)n.vitals[e]=s.vitals[e]||""}else if("medications"===r){const t=a.medications,i=s.medications,o=t&&t.length>0?t:i&&i.length>0?i:e.medications;n[r]=E(o,"medicineAdvice")}else{let t;t=void 0!==a[r]?a[r]:void 0!==s[r]?s[r]:s.vitals&&void 0!==s.vitals[r]?s.vitals[r]:e[r],n[r]=E(t,i)}return n}),{...e})}_(e)}),[s,S]);const C=e=>{const{name:t,value:n}=e.target;_((e=>({...e,[t]:n})))},D=e=>{const{name:t,value:n}=e.target;_((e=>{const r={...e.vitals,[t]:n};if("height"===t||"weight"===t){const e="height"===t?n:r.height,a="weight"===t?n:r.weight;if(e&&a){const t=e/100;r.bmi=(a/(t*t)).toFixed(1)}else r.bmi=""}return{...e,vitals:r}}))},T=(e,t,n)=>{_((r=>{const a=[...r.medications];return a[e]={...a[e],[t]:n},{...r,medications:a}}))},k=()=>{_((e=>({...e,medications:[...e.medications,{name:"",frequency:"0-0-0",duration:""}]})))},A=e=>{_((t=>{const n=t.medications.filter(((t,n)=>n!==e));return{...t,medications:n}}))},P=(e,t)=>{_((n=>({...n,[e]:t})))},O=(e,t)=>{_((n=>{const r=n[e].filter((e=>e.name!==t));return{...n,[e]:r}}))},I=()=>{const e={};return N.vitals&&(e.vitals=N.vitals),S.sections.forEach((t=>{t.fields.forEach((t=>{const{id:n,type:r,disabled:a}=t;if(!a&&"vitals"!==r)switch(r){case"medicineAdvice":N.medications&&(e.medications=N.medications);break;case"multiselect":N[n]&&Array.isArray(N[n])&&(e[n]=N[n].map((e=>e.name)));break;case"diagnosis":N[n]&&Array.isArray(N[n])&&(e[n]=N[n].map((e=>e.name)).join(", "));break;default:void 0!==N[n]&&(e[n]=N[n])}}))})),e},[L,F]=(0,t.useState)(!1),B=(0,qn.useReactToPrint)({content:()=>c.current,onBeforeGetContent:()=>(F(!0),new Promise((e=>{setTimeout((()=>{F(!1),e()}),500)}))),pageStyle:"\n    @media print {\n     @page {\n          size: A4;\n          margin: 20mm;\n        }\n        body {\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n      }"}),[W,$]=(0,t.useState)({});return(0,t.useEffect)((()=>{$({diagnosisTemplate:g.diagnosis.map((e=>({name:e}))),comorbidities:g.comorbidities.map((e=>({name:e}))),labTests:h.map((e=>({name:e.name})))})}),[g]),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-300 pb-2",children:[(0,X.jsxs)("h2",{className:"text-xl font-bold hidden lg:block",children:["Prescription for: ",s.patient.name," "]}),(0,X.jsxs)("h2",{className:"text-md font-bold lg:hidden",children:[s.patient.name," "]}),(0,X.jsxs)("div",{className:"space-x-2 flex",children:[(0,X.jsx)(w.$,{className:"font-semibold hidden lg:block",size:"sm",variant:"outline",onClick:B,children:"Preview PDF"}),(0,X.jsx)(w.$,{className:"font-semibold",size:"sm",disabled:"loading"===y,onClick:async()=>{if(!s.ID)return void l({title:"Error",description:"No visit selected!",variant:"destructive"});const e={prescription:I(),selectedPatientType:"OPD",selectedVisitId:s.ID};try{await o((0,Be.AX)(e)).unwrap(),l({variant:"success",title:"Saved Successfully!",description:"Prescription updated successfully!"})}catch(t){console.error("Error saving prescription:",t),l({title:"Error",description:"Failed to save prescription. Please try again.",variant:"destructive"})}},children:"loading"===y?"Saving...":"Save"})]})]}),(0,X.jsx)(b.F,{className:"h-[calc(100vh-125px)] md:pr-4",children:(0,X.jsx)("div",{className:"p-1 bg-gray-50",children:S.sections.map((e=>(0,X.jsx)("div",{className:e.className,children:(0,X.jsx)("div",{className:"space-y-6",children:e.fields.filter((e=>!e.disabled)).map((e=>(0,X.jsx)(nx,{formConfig:S,field:e,doctorData:s.doctor,formData:N,handleChange:C,handleVitalChange:D,handleMultiSelectChange:P,handleRemoveValue:O,handleMedicationChange:T,addMedication:k,removeMedication:A,suggestions:W},e.id)))})},e.id)))},"form-"+(JSON.stringify(S)!==JSON.stringify(kn)?"doctor":"default"))}),(0,X.jsx)("div",{style:{display:"none"},children:(0,X.jsx)(Zg,{patient:{...s.patient,age:(0,M.F1)(null===s||void 0===s||null===(a=s.patient)||void 0===a?void 0:a.age),registrationNumber:null===s||void 0===s?void 0:s.registrationNumber},formData:N,field:S.sections,hospital:m,ref:c})})]})}function sx(e){var n,r,a;let{patient:s}=e;const[i,o]=(0,t.useState)({bookingDate:s.bookingDate,bookingNumber:s.bookingNumber,patientName:s.patient.name,contactNumber:s.patient.contactNumber,registrationNumber:s.patient._id,patient:s.patient._id,diagnosis:"",notes:s.notes||"",clinicalSummary:s.clinicalSummary,comorbidities:(null===(n=s.comorbidities)||void 0===n?void 0:n.map((e=>({name:e}))))||[],comorbidityHandling:"separate",conditionOnAdmission:s.conditionOnAdmission||"",conditionOnDischarge:s.conditionOnDischarge||"",treatment:s.treatment||"",medications:s.medications.length>0?s.medications:[{name:"",frequency:"0-0-0",duration:""}],labTests:s.labTests.length>0?s.labTests.map((e=>({name:e}))):[{name:""}],vitals:{admission:{bloodPressure:s.vitals.admission.bloodPressure||"",heartRate:s.vitals.admission.heartRate||"",temperature:s.vitals.admission.temperature||"",oxygenSaturation:s.vitals.admission.oxygenSaturation||"",respiratoryRate:s.vitals.admission.respiratoryRate||"",weight:s.vitals.admission.weight||"",height:s.vitals.admission.height||""},discharge:{bloodPressure:s.vitals.discharge.bloodPressure||"",heartRate:s.vitals.discharge.heartRate||"",temperature:s.vitals.discharge.temperature||"",oxygenSaturation:s.vitals.discharge.oxygenSaturation||"",respiratoryRate:s.vitals.discharge.respiratoryRate||""},weight:s.vitals.weight||"",height:s.vitals.height||""},status:"Admitted",assignedDoctor:"",assignedRoom:"",assignedBed:"",insuranceDetails:{provider:"",policyNumber:"",coverageType:""}}),{labTestsTemplate:l}=(0,j.d4)((e=>e.templates)),c=l.map((e=>({name:e.name})));(0,t.useEffect)((()=>{if(s){o((e=>{var t;return{...e,bookingDate:s.bookingDate,bookingNumber:s.bookingNumber,patientName:s.patient.name,contactNumber:s.patient.contactNumber,registrationNumber:s.patient._id,comorbidities:(null===(t=s.comorbidities)||void 0===t?void 0:t.map((e=>({name:e}))))||[],patient:s.patient._id,diagnosis:s.diagnosis||"",notes:s.notes||"",clinicalSummary:s.clinicalSummary,treatment:s.treatment||"",medications:s.medications.length>0?s.medications:[{name:"",frequency:"0-0-0",duration:""}],labTests:s.labTests.length>0?s.labTests.map((e=>({name:e}))):[{name:""}],vitals:{admission:{bloodPressure:s.vitals.admission.bloodPressure||"",heartRate:s.vitals.admission.heartRate||"",temperature:s.vitals.admission.temperature||"",oxygenSaturation:s.vitals.admission.oxygenSaturation||"",respiratoryRate:s.vitals.admission.respiratoryRate||"",weight:s.vitals.admission.weight||"",height:s.vitals.admission.height||""},discharge:{bloodPressure:s.vitals.discharge.bloodPressure||"",heartRate:s.vitals.discharge.heartRate||"",temperature:s.vitals.discharge.temperature||"",oxygenSaturation:s.vitals.discharge.oxygenSaturation||"",respiratoryRate:s.vitals.discharge.respiratoryRate||""},weight:s.vitals.weight||"",height:s.vitals.height||""},status:"Admitted",assignedDoctor:"",assignedRoom:"",assignedBed:"",insuranceDetails:{provider:"",policyNumber:"",coverageType:""}}}));const e=s.diagnosis?s.diagnosis.split(",").map((e=>({name:e.trim()}))):[];f(e)}}),[s]);const d=(0,j.wA)(),{toast:u}=(0,H.dj)(),m=(0,j.d4)((e=>e.pharmacy.itemsStatus)),h=(0,j.d4)((e=>e.patients.prescriptionUpdateStatus)),[p,f]=(0,t.useState)([]),{diagnosisTemplate:v=[],comorbidities:g=[],medicinelist:x=[],status:y}=(0,j.d4)((e=>e.templates));(0,t.useEffect)((()=>{"idle"===m&&d((0,st.LN)())}),[d,m]),(0,t.useEffect)((()=>{"idle"===y&&d((0,R.QK)())}),[y,d]);const N=(0,t.useMemo)((()=>x.map((e=>({name:e})))),[x]),_=e=>{const{name:t,value:n}=e.target;o((e=>({...e,[t]:n})))},S=(e,t)=>{const{name:n,value:r}=e.target;o((e=>{const a={...e.vitals,[t]:{...e.vitals[t],[n]:r}};if("admission"===t&&("height"===n||"weight"===n)){const t="height"===n?parseFloat(r):parseFloat(e.vitals.admission.height),s="weight"===n?parseFloat(r):parseFloat(e.vitals.admission.weight);if(t&&s){const e=t/100,n=(s/(e*e)).toFixed(1);a.admission.bmi=n}}return{...e,vitals:a}}))},E=(e,t,n)=>{o((r=>{const a=[...r.medications];return a[e]={...a[e],[t]:n},{...r,medications:a}}))},D=(e,t)=>{E(e,"name",t.name)},k=()=>{o((e=>({...e,medications:[...e.medications,{name:"",frequency:"",duration:""}]})))},A=e=>{o((t=>({...t,medications:t.medications.filter(((t,n)=>n!==e))})))},P=e=>{o((t=>({...t,labTests:t.labTests.filter(((t,n)=>n!==e))})))},O=e=>{o((t=>({...t,comorbidities:e})))},M=e=>{o((t=>({...t,comorbidities:t.comorbidities.filter((t=>t.name!==e))})))},I=e=>{f(e),o((t=>({...t,diagnosis:e.map((e=>e.name)).join(", ")})))},L=e=>{const t=p.filter((t=>t.name!==e));f(t),o((e=>({...e,diagnosis:t.map((e=>e.name)).join(", ")})))};return(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-300 pb-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsxs)("h2",{className:"text-xl font-bold hidden lg:block",children:["IPD Admission for: ",i.patientName]}),(0,X.jsx)("h2",{className:"text-md font-bold lg:hidden",children:i.patientName})]}),(0,X.jsx)("div",{className:"space-x-2",children:(0,X.jsx)(w.$,{className:"font-semibold",size:"sm",onClick:async()=>{if(s.ID)try{await d((0,Be.AX)({selectedVisitId:s.ID,vitals:i.vitals,clinicalSummary:i.clinicalSummary,notes:i.notes,prescription:{diagnosis:i.diagnosis,treatment:i.treatment,medications:i.medications},conditionOnAdmission:i.conditionOnAdmission,conditionOnDischarge:i.conditionOnDischarge,comorbidities:i.comorbidities.map((e=>e.name)),selectedPatientType:"IPD",labTests:i.labTests.map((e=>e.name))})).unwrap(),u({variant:"success",title:"Saved Successfully!",description:"IPD prescription saved successfully!"})}catch(e){console.error("Error saving IPD prescription:",e),u({title:"Error",description:"Failed to save IPD prescription. Please try again.",variant:"destructive"})}else u({title:"Error",description:"No patient selected!",variant:"destructive"})},disabled:"loading"===h,children:"loading"===h?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save"})})]}),(0,X.jsxs)(b.F,{className:"h-[calc(100vh-125px)] md:pr-4",children:[(0,X.jsxs)(yl,{defaultValue:"vitals",className:"w-full lg:hidden",children:[(0,X.jsxs)(bl,{className:"grid w-full grid-cols-4",children:[(0,X.jsx)(jl,{value:"vitals",children:"Vitals"}),(0,X.jsx)(jl,{value:"diagnosis",children:"Diagnosis"}),(0,X.jsx)(jl,{value:"lab",children:"Tests"}),(0,X.jsx)(jl,{value:"medications",children:"Medications"})]}),(0,X.jsxs)(wl,{value:"vitals",children:[(0,X.jsxs)("div",{className:"px-1 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Admission Vitals"}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-temperature",className:"text-xs font-semibold",children:"Temperature (\xb0C)"}),(0,X.jsx)(Vn.p,{id:"admission-temperature",name:"temperature",value:i.vitals.admission.temperature,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-heartRate",className:"text-xs font-semibold",children:"Heart Rate (bpm)"}),(0,X.jsx)(Vn.p,{id:"admission-heartRate",name:"heartRate",value:i.vitals.admission.heartRate,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-bloodPressure",className:"text-xs font-semibold",children:"Blood Pressure (mmHg)"}),(0,X.jsx)(Vn.p,{id:"admission-bloodPressure",name:"bloodPressure",value:i.vitals.admission.bloodPressure,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-respiratoryRate",className:"text-xs font-semibold",children:"Respiratory Rate (bpm)"}),(0,X.jsx)(Vn.p,{id:"admission-respiratoryRate",name:"respiratoryRate",value:i.vitals.admission.respiratoryRate,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-height",className:"text-xs font-semibold",children:"Height (cm)"}),(0,X.jsx)(Vn.p,{id:"admission-height",name:"height",value:i.vitals.admission.height,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-weight",className:"text-xs font-semibold",children:"Weight (kg)"}),(0,X.jsx)(Vn.p,{id:"admission-weight",name:"weight",value:i.vitals.admission.weight,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-bmi",className:"text-xs font-semibold",children:"BMI"}),(0,X.jsx)(Vn.p,{id:"admission-bmi",name:"bmi",value:i.vitals.admission.bmi||"",readOnly:!0,className:"h-8 text-sm font-medium bg-gray-100"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-oxygenSaturation",className:"text-xs font-semibold",children:"O\u2082 Saturation (%)"}),(0,X.jsx)(Vn.p,{id:"admission-oxygenSaturation",name:"oxygenSaturation",value:i.vitals.admission.oxygenSaturation,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]})]})]}),(0,X.jsxs)("div",{className:"pt-4 px-1 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Discharge Vitals"}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"discharge-temperature",className:"text-xs font-semibold",children:"Temperature (\xb0C)"}),(0,X.jsx)(Vn.p,{id:"discharge-temperature",name:"temperature",value:i.vitals.discharge.temperature,onChange:e=>S(e,"discharge"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"discharge-heartRate",className:"text-xs font-semibold",children:"Heart Rate (bpm)"}),(0,X.jsx)(Vn.p,{id:"discharge-heartRate",name:"heartRate",value:i.vitals.discharge.heartRate,onChange:e=>S(e,"discharge"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"discharge-bloodPressure",className:"text-xs font-semibold",children:"Blood Pressure (mmHg)"}),(0,X.jsx)(Vn.p,{id:"discharge-bloodPressure",name:"bloodPressure",value:i.vitals.discharge.bloodPressure,onChange:e=>S(e,"discharge"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"discharge-respiratoryRate",className:"text-xs font-semibold",children:"Respiratory Rate (bpm)"}),(0,X.jsx)(Vn.p,{id:"discharge-respiratoryRate",name:"respiratoryRate",value:i.vitals.discharge.respiratoryRate,onChange:e=>S(e,"discharge"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"discharge-oxygenSaturation",className:"text-xs font-semibold",children:"O\u2082 Saturation (%)"}),(0,X.jsx)(Vn.p,{id:"discharge-oxygenSaturation",name:"oxygenSaturation",value:i.vitals.discharge.oxygenSaturation,onChange:e=>S(e,"discharge"),className:"h-8 text-sm font-medium"})]})]})]})]}),(0,X.jsxs)(wl,{value:"diagnosis",children:[(0,X.jsxs)("div",{className:"pt-0 p-1 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Diagnosis and Treatment"}),(0,X.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"diagnosis",className:"text-xs font-semibold",children:"Diagnosis"}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("div",{className:"flex gap-2",children:(0,X.jsx)(Zo.A,{suggestions:v.map((e=>({name:e}))),selectedValues:p,setSelectedValues:I,placeholder:"Select diagnosis"})}),(0,X.jsx)("div",{className:"border border-gray-300 rounded-md p-2 min-h-[80px]",children:p.length>0?(0,X.jsx)("div",{className:"flex flex-wrap gap-1",children:p.map(((e,t)=>(0,X.jsxs)(Yo.E,{variant:"primary",className:"flex items-center bg-blue-100 text-blue-800 px-1 py-0.5 rounded",children:[e.name,(0,X.jsx)(T.A,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>L(e.name)})]},t)))}):(0,X.jsx)("p",{className:"text-gray-500 text-sm",children:"No diagnoses selected"})})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"treatment",className:"text-xs font-semibold",children:"Treatment"}),(0,X.jsx)(Xo.T,{id:"treatment",name:"treatment",value:i.treatment,onChange:_,placeholder:"Enter recommended treatment",className:"min-h-[100px] text-sm font-medium"})]})]})]}),(0,X.jsxs)("div",{className:"pt-4 p-1 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Clinical Summary"}),(0,X.jsx)(Xo.T,{name:"clinicalSummary",value:i.clinicalSummary,onChange:_,placeholder:"Enter clinical summary",className:"min-h-[80px] text-sm font-medium"})]}),(0,X.jsxs)("div",{className:"space-y-2 px-1 pt-4 mb-4 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Additional Notes"}),(0,X.jsx)(Xo.T,{name:"notes",value:i.notes,onChange:_,placeholder:"Any additional notes",className:"min-h-[80px] text-sm font-medium"})]})]}),(0,X.jsx)(wl,{value:"lab",children:(0,X.jsxs)("div",{className:"grid grid-cols-1 gap-4 px-1 pt-4 bg-gray-50",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Lab Tests"}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("div",{className:"flex gap-2",children:(0,X.jsx)(Zo.A,{suggestions:c,selectedValues:i.labTests,setSelectedValues:e=>o((t=>({...t,labTests:e}))),placeholder:"Select lab tests"})}),(0,X.jsx)("div",{className:"border border-gray-300 rounded-md p-2 min-h-[80px]",children:i.labTests.length>0?(0,X.jsx)("div",{className:"flex flex-wrap gap-1",children:i.labTests.map(((e,t)=>(0,X.jsxs)(Yo.E,{variant:"primary",className:"flex items-center bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[e.name,(0,X.jsx)(T.A,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>P(t)})]},t)))}):(0,X.jsx)("p",{className:"text-gray-500 text-sm",children:"No lab tests selected"})})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Comorbidities"}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("div",{className:"flex gap-2",children:(0,X.jsx)(Zo.A,{suggestions:null===g||void 0===g?void 0:g.map((e=>({name:e}))),selectedValues:i.comorbidities,setSelectedValues:O,placeholder:"Select comorbidities"})}),(0,X.jsx)("div",{className:"border border-gray-300 rounded-md p-2 min-h-[80px]",children:i.comorbidities.length>0?(0,X.jsx)("div",{className:"flex flex-wrap gap-1",children:i.comorbidities.map(((e,t)=>(0,X.jsxs)(Yo.E,{variant:"primary",className:"flex items-center bg-blue-100 text-blue-800 px-1 py-0.5 text-xs rounded",children:[e.name,(0,X.jsx)(T.A,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>M(e.name)})]},t)))}):(0,X.jsx)("p",{className:"text-gray-500 text-sm",children:"No comorbidities selected"})})]})]})]})}),(0,X.jsxs)(wl,{value:"medications",children:[(0,X.jsxs)("div",{className:"pt-0 px-1 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Medications"}),(0,X.jsxs)("div",{className:"space-y-4",children:[null===(r=i.medications)||void 0===r?void 0:r.map(((e,t)=>(0,X.jsxs)("div",{className:"bg-white p-3 rounded-md shadow-sm",children:[(0,X.jsxs)("div",{className:"grid grid-cols-1 gap-2 mb-2",children:[(0,X.jsx)(Gs.A,{suggestions:N,placeholder:"Select medicine",value:e.name,setValue:e=>E(t,"name",e),onSuggestionSelect:e=>D(t,e)}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(Vn.p,{placeholder:"Frequency (e.g., 1-0-1)",value:e.frequency,onChange:e=>E(t,"frequency",e.target.value),className:"font-medium"}),(0,X.jsx)(Vn.p,{placeholder:"Duration",value:e.duration,onChange:e=>E(t,"duration",e.target.value),className:"font-medium"})]})]}),(0,X.jsxs)(w.$,{variant:"destructive",size:"sm",onClick:()=>A(t),disabled:1===i.medications.length,className:"w-full mt-2",children:[(0,X.jsx)(C.A,{className:"h-4 w-4 mr-2"})," Remove"]})]},t))),(0,X.jsxs)(w.$,{onClick:k,variant:"outline",className:"w-full font-semibold",children:[(0,X.jsx)(ex.A,{className:"h-4 w-4 mr-2"})," Add Medication"]})]})]}),(0,X.jsxs)("div",{className:"space-y-2 px-1 pt-4 mb-4 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Additional Notes"}),(0,X.jsx)(Xo.T,{name:"notes",value:i.notes,onChange:_,placeholder:"Any additional notes",className:"min-h-[100px] text-sm font-medium"})]})]})]}),(0,X.jsxs)("div",{className:"hidden lg:block",children:[(0,X.jsxs)("div",{className:"px-1 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Admission Vitals"}),(0,X.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-temperature",className:"text-xs font-semibold",children:"Temperature (\xb0C)"}),(0,X.jsx)(Vn.p,{id:"admission-temperature",name:"temperature",value:i.vitals.admission.temperature,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-heartRate",className:"text-xs font-semibold",children:"Heart Rate (bpm)"}),(0,X.jsx)(Vn.p,{id:"admission-heartRate",name:"heartRate",value:i.vitals.admission.heartRate,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-bloodPressure",className:"text-xs font-semibold",children:"Blood Pressure (mmHg)"}),(0,X.jsx)(Vn.p,{id:"admission-bloodPressure",name:"bloodPressure",value:i.vitals.admission.bloodPressure,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-respiratoryRate",className:"text-xs font-semibold",children:"Respiratory Rate (bpm)"}),(0,X.jsx)(Vn.p,{id:"admission-respiratoryRate",name:"respiratoryRate",value:i.vitals.admission.respiratoryRate,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-height",className:"text-xs font-semibold",children:"Height (cm)"}),(0,X.jsx)(Vn.p,{id:"admission-height",name:"height",value:i.vitals.admission.height,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-weight",className:"text-xs font-semibold",children:"Weight (kg)"}),(0,X.jsx)(Vn.p,{id:"admission-weight",name:"weight",value:i.vitals.admission.weight,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-bmi",className:"text-xs font-semibold",children:"BMI"}),(0,X.jsx)(Vn.p,{id:"admission-bmi",name:"bmi",value:i.vitals.admission.bmi||"",readOnly:!0,className:"h-8 text-sm font-medium bg-gray-100"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"admission-oxygenSaturation",className:"text-xs font-semibold",children:"O\u2082 Saturation (%)"}),(0,X.jsx)(Vn.p,{id:"admission-oxygenSaturation",name:"oxygenSaturation",value:i.vitals.admission.oxygenSaturation,onChange:e=>S(e,"admission"),className:"h-8 text-sm font-medium"})]})]})]}),(0,X.jsxs)("div",{className:"pt-4 p-1 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Diagnosis and Treatment"}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"diagnosis",className:"text-xs font-semibold",children:"Diagnosis"}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("div",{className:"flex gap-2",children:(0,X.jsx)(Zo.A,{suggestions:v.map((e=>({name:e}))),selectedValues:p,setSelectedValues:I,placeholder:"Select diagnosis"})}),(0,X.jsx)("div",{className:"border border-gray-300 rounded-md p-2 min-h-[80px]",children:p.length>0?(0,X.jsx)("div",{className:"flex flex-wrap gap-1",children:p.map(((e,t)=>(0,X.jsxs)(Yo.E,{variant:"primary",className:"flex items-center bg-blue-100 text-blue-800 px-1 py-0.5 rounded",children:[e.name,(0,X.jsx)(T.A,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>L(e.name)})]},t)))}):(0,X.jsx)("p",{className:"text-gray-500 text-sm",children:"No diagnoses selected"})})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"treatment",className:"text-xs font-semibold",children:"Treatment"}),(0,X.jsx)(Xo.T,{id:"treatment",name:"treatment",value:i.treatment,onChange:_,placeholder:"Enter recommended treatment",className:"min-h-[100px] text-sm font-medium"})]})]})]}),(0,X.jsxs)("div",{className:"pt-4 p-1 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Clinical Summary"}),(0,X.jsx)(Xo.T,{name:"clinicalSummary",value:i.clinicalSummary,onChange:_,placeholder:"Enter clinical summary",className:"min-h-[100px] text-sm font-medium"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4 px-1 pt-4 bg-gray-50",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Lab Tests"}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("div",{className:"flex gap-2",children:(0,X.jsx)(Zo.A,{suggestions:c,selectedValues:i.labTests,setSelectedValues:e=>o((t=>({...t,labTests:e}))),placeholder:"Select lab tests"})}),(0,X.jsx)("div",{className:"border border-gray-300 rounded-md p-2 min-h-[80px]",children:i.labTests.length>0?(0,X.jsx)("div",{className:"flex flex-wrap gap-1",children:i.labTests.map(((e,t)=>(0,X.jsxs)(Yo.E,{variant:"primary",className:"flex items-center bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[e.name,(0,X.jsx)(T.A,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>P(t)})]},t)))}):(0,X.jsx)("p",{className:"text-gray-500 text-sm",children:"No lab tests selected"})})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Comorbidities"}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("div",{className:"flex gap-2",children:(0,X.jsx)(Zo.A,{suggestions:null===g||void 0===g?void 0:g.map((e=>({name:e}))),selectedValues:i.comorbidities,setSelectedValues:O,placeholder:"Select comorbidities"})}),(0,X.jsx)("div",{className:"border border-gray-300 rounded-md p-2 min-h-[80px]",children:i.comorbidities.length>0?(0,X.jsx)("div",{className:"flex flex-wrap gap-1",children:i.comorbidities.map(((e,t)=>(0,X.jsxs)(Yo.E,{variant:"primary",className:"flex items-center bg-blue-100 text-blue-800 px-1 py-0.5 text-xs rounded",children:[e.name,(0,X.jsx)(T.A,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>M(e.name)})]},t)))}):(0,X.jsx)("p",{className:"text-gray-500 text-sm",children:"No comorbidities selected"})})]})]})]}),(0,X.jsxs)("div",{className:"pt-4 px-1 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Medications"}),(0,X.jsxs)("div",{children:[null===(a=i.medications)||void 0===a?void 0:a.map(((e,t)=>(0,X.jsxs)("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[(0,X.jsx)(Gs.A,{suggestions:N,placeholder:"Select medicine",value:e.name,setValue:e=>E(t,"name",e),onSuggestionSelect:e=>D(t,e)}),(0,X.jsx)(Vn.p,{placeholder:"Frequency",value:e.frequency,onChange:e=>E(t,"frequency",e.target.value),className:"font-medium"}),(0,X.jsx)(Vn.p,{placeholder:"Duration",value:e.duration,onChange:e=>E(t,"duration",e.target.value),className:"font-medium"}),(0,X.jsx)(w.$,{variant:"destructive",size:"icon",onClick:()=>A(t),disabled:1===i.medications.length,children:(0,X.jsx)(C.A,{className:"h-4 w-4"})})]},t))),(0,X.jsxs)(w.$,{onClick:k,variant:"outline",className:"mt-2 font-semibold",children:[(0,X.jsx)(ex.A,{className:"h-4 w-4 mr-2"})," Add Medication"]})]})]}),(0,X.jsxs)("div",{className:"pt-4 px-1 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Discharge Vitals"}),(0,X.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"discharge-temperature",className:"text-xs font-semibold",children:"Temperature (\xb0C)"}),(0,X.jsx)(Vn.p,{id:"discharge-temperature",name:"temperature",value:i.vitals.discharge.temperature,onChange:e=>S(e,"discharge"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"discharge-heartRate",className:"text-xs font-semibold",children:"Heart Rate (bpm)"}),(0,X.jsx)(Vn.p,{id:"discharge-heartRate",name:"heartRate",value:i.vitals.discharge.heartRate,onChange:e=>S(e,"discharge"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"discharge-bloodPressure",className:"text-xs font-semibold",children:"Blood Pressure (mmHg)"}),(0,X.jsx)(Vn.p,{id:"discharge-bloodPressure",name:"bloodPressure",value:i.vitals.discharge.bloodPressure,onChange:e=>S(e,"discharge"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"discharge-respiratoryRate",className:"text-xs font-semibold",children:"Respiratory Rate (bpm)"}),(0,X.jsx)(Vn.p,{id:"discharge-respiratoryRate",name:"respiratoryRate",value:i.vitals.discharge.respiratoryRate,onChange:e=>S(e,"discharge"),className:"h-8 text-sm font-medium"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"discharge-oxygenSaturation",className:"text-xs font-semibold",children:"O\u2082 Saturation (%)"}),(0,X.jsx)(Vn.p,{id:"discharge-oxygenSaturation",name:"oxygenSaturation",value:i.vitals.discharge.oxygenSaturation,onChange:e=>S(e,"discharge"),className:"h-8 text-sm font-medium"})]})]})]}),(0,X.jsxs)("div",{className:"space-y-2 px-1 pt-4 mb-4 bg-gray-50",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Additional Notes"}),(0,X.jsx)(Xo.T,{name:"notes",value:i.notes,onChange:_,placeholder:"Any additional notes",className:"min-h-[100px] text-sm font-medium"})]})]})]})]})}const ix=(0,N.A)("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);function ox(){const[e,n]=(0,t.useState)(null),[r,s]=(0,t.useState)(null),[i,o]=(0,t.useState)(!1),l=(0,a.zy)(),c=(0,j.wA)(),d=async e=>{let{ID:t,bookingNumber:r,patient:a,bookingDate:i,clinicalSummary:l,doctor:d,notes:u,type:m,vitals:h,diagnosis:p,treatment:f,medications:v,additionalInstructions:g,labTests:x,comorbidities:y,conditionOnAdmission:b,conditionOnDischarge:j}=e;try{const e=await c((0,Be.Al)({id:t,type:m})).unwrap(),r={...e,ID:e._id};n(r),s(m)}catch(w){console.error("Failed to fetch visit details:",w)}o(!1)},[u,m]=(0,t.useState)(null),h=e=>{m(e)};return(0,t.useEffect)((()=>{var e;if(null!==(e=l.state)&&void 0!==e&&e.editPatient){const e=l.state.editPatient;n(e),s(e.type)}}),[l.state]),(0,t.useEffect)((()=>{var e;null!==(e=l.state)&&void 0!==e&&e.editPatient&&window.history.replaceState({},document.title)}),[]),(0,X.jsxs)("div",{className:"h-full w-full flex flex-col",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b lg:hidden",children:[(0,X.jsx)("h1",{className:"text-xl font-bold",children:"Doctor's Dashboard"}),(0,X.jsxs)(Qi,{open:i,onOpenChange:o,children:[(0,X.jsx)(eo,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"outline",size:"icon",className:"h-8 w-8",children:(0,X.jsx)(ix,{className:"h-4 w-4"})})}),(0,X.jsx)(ao,{side:"right",className:"w-[300px] sm:w-[400px] px-4 pt-8",children:(0,X.jsx)(b.F,{className:"h-full pr-4",children:(0,X.jsx)(Yg,{onPatientSelect:d,onDoctorSelect:h})})})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-4 gap-1",style:{height:"calc(100vh - 55px)"},children:[(0,X.jsx)(b.F,{className:"col-span-1 pr-1 h-full hidden lg:block",children:(0,X.jsx)(Yg,{onPatientSelect:d,onDoctorSelect:h})}),(0,X.jsx)(b.F,{className:"col-span-4 lg:col-span-3 h-full",children:(0,X.jsx)("div",{className:"flex-1 p-2 overflow-auto w-full",children:e?"OPD"===r?(0,X.jsx)(ax,{patient:e,doctorId:u}):(0,X.jsx)(sx,{patient:e}):(0,X.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,X.jsx)("p",{className:"text-xl text-gray-500 font-semibold",children:"Select a patient to view details"})})})})]})]})}const lx=(0,N.A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),cx=(0,N.A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),dx=(0,N.A)("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]),ux=(0,N.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),mx=e=>{let{id:n,label:r,value:a,onValueChange:s,error:i,children:o}=e;const[l,c]=(0,t.useState)(!1);return(0,X.jsx)("div",{className:"relative",children:(0,X.jsxs)(A.l6,{id:n,value:a,onValueChange:e=>{s(e),c(!1)},onOpenChange:e=>c(e),children:[(0,X.jsxs)(A.bq,{className:"peer px-3 py-2 w-full border rounded-md text-gray-900 focus:ring-blue-500 focus:border-blue-500 bg-white "+(!i||a||l?"border-gray-300":"border-red-500"),children:[(0,X.jsxs)("label",{htmlFor:n,className:`absolute text-xs duration-300 font-medium transform -translate-y-1/2 left-3\n          peer-placeholder-shown:text-sm peer-placeholder-shown:top-1/2\n          peer-focus:text-xs peer-focus:top-0 peer-focus:-translate-y-1/2\n          ${a||l?"top-0 -translate-y-1/2 text-xs":"top-1/2"}\n          ${!i||a||l?"text-gray-500":"text-red-500"}\n          bg-white px-1`,children:[r,i&&!a&&!l&&(0,X.jsx)("span",{className:"text-red-500 ml-1",children:"*Required"})]}),(0,X.jsx)(A.yv,{placeholder:" "})]}),(0,X.jsx)(A.gC,{children:o})]})})};function hx(e){let{formData:n,handleInputChange:r,handleSelectChange:a,errors:s,consultationFeeSettings:i,setSearchedPatient:o,searchDisabled:l=!1}=e;const c=Ko("(max-width: 640px)"),d=(0,j.wA)(),u=(0,t.useCallback)((e=>{const t=e.target.value,n=t?(()=>{const e=new Date,n=new Date(t);let r=e.getFullYear()-n.getFullYear(),a=e.getMonth()-n.getMonth();return a<0&&(r-=1,a+=12),`${r}-${a}`})():"";r({target:{id:"dateOfBirth",value:t}}),r({target:{id:"age",value:n}})}),[r]),m=(0,t.useCallback)((e=>{const t=e.target.value;r({target:{id:"age",value:t}}),r({target:{id:"dateOfBirth",value:""}})}),[r]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Nl,{id:"name",label:"Full Name",value:n.name,onChange:r,error:s.name}),c?(0,X.jsxs)("div",{className:"flex gap-2",children:[(0,X.jsx)("div",{className:"w-1/2",children:(0,X.jsx)(Nl,{id:"age",label:"Age",value:n.age,onChange:m,error:s.age})}),(0,X.jsx)("div",{className:"w-1/2",children:(0,X.jsx)(Nl,{type:"date",id:"visit.bookingDate",label:"Booking Date",value:n.visit.bookingDate,onChange:r,error:s["visit.bookingDate"]})})]}):(0,X.jsxs)("div",{className:"flex items-end gap-4",children:[(0,X.jsx)("div",{className:"w-full sm:w-30 relative",children:(0,X.jsx)(Nl,{id:"age",label:"Age",type:"text",value:n.age,onChange:m,error:s.age})}),(0,X.jsx)("div",{className:"flex-grow relative hidden sm:block",children:(0,X.jsx)(Nl,{id:"dateOfBirth",label:"Date of Birth",type:"date",tabIndex:-1,value:n.dateOfBirth,onChange:u})})]}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Nl,{id:"registrationNumber",label:"UHID Number",tabIndex:-1,value:n.registrationNumber,onChange:r,error:s.registrationNumber,className:"pr-10"}),!l&&(0,X.jsx)("button",{type:"button",onClick:async()=>{if(n.registrationNumber)try{var e,t,r;const c=await d((0,Be.bW)({searchQuery:n.registrationNumber.trim()})).unwrap();if(null!==(e=c.results)&&void 0!==e&&e.patients&&(null===(t=c.results)||void 0===t||null===(r=t.patients)||void 0===r?void 0:r.length)>0){var s,l;const e=null===(s=c.results)||void 0===s||null===(l=s.patients)||void 0===l?void 0:l[0];o({...e,isFromSearch:!0}),a("visit.consultationType",((e,t,n)=>{try{var r,a;let s=null===e||void 0===e||null===(r=e.visits.filter((e=>"follow-up"!==e.consultationType)))||void 0===r||null===(a=r.sort(((e,t)=>new Date(t.bookingDate)-new Date(e.bookingDate)))[0])||void 0===a?void 0:a.bookingDate;s&&(s=new Date(s));const i=new Date(new Date(t.visit.bookingDate).toDateString()),o=new Date(s);return o.setDate(o.getDate()+(-1===n.masterFollowup?14:n.masterFollowup)),i>=s&&i<=o}catch(s){return console.error("Error checking follow-up date:",s),!1}})(e,n,i)?"follow-up":"new")}}catch(c){console.error("Search failed:",c)}},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",children:(0,X.jsx)(oo.A,{className:"h-5 w-5"})})]}),(0,X.jsx)(mx,{id:"gender",label:"Gender",value:n.gender,onValueChange:e=>a("gender",e),error:s.gender,children:["Male","Female","Other"].map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})}Array.from({length:12},((e,t)=>String(t+1).padStart(2,"0"))),Array.from({length:60},((e,t)=>String(t).padStart(2,"0")));function px(e){let{formData:n,handleSelectChange:r,handleInputChange:a,errors:s}=e;const i=Ko("(max-width: 640px)"),{consultationTypes:o}=((0,j.d4)((e=>e.staff.doctors)),(0,j.d4)((e=>e.departments.departments)),(0,j.d4)((e=>e.consultationFees))),l=e=>{if(!e)return{hour:"",minute:"",amPm:"AM"};const[t,n]=e.split(":");let r=parseInt(t,10);const a=n,s=r>=12?"PM":"AM";return r=r%12||12,{hour:String(r).padStart(2,"0"),minute:a,amPm:s}},[c,d]=(0,t.useState)(l(n.visit.timeSlot.start)),[u,m]=(0,t.useState)(l(n.visit.timeSlot.end));(0,t.useEffect)((()=>{d(l(n.visit.timeSlot.start)),m(l(n.visit.timeSlot.end))}),[n.visit.timeSlot.start,n.visit.timeSlot.end]);(0,t.useCallback)(((e,t,n)=>{const r=r=>{const s={...r,[t]:n};let i;return"hour"===t?i=`${n}:${s.minute} ${s.amPm}`:"minute"===t?i=`${s.hour}:${n} ${s.amPm}`:"amPm"===t&&(i=`${s.hour}:${s.minute} ${n}`),a({target:{id:`visit.timeSlot.${e}`,value:i}}),s};"start"===e?d(r):m(r)}),[a]);return(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)(Nl,{id:"contactNumber",label:"Contact Number",type:"tel",value:n.contactNumber,onChange:a,error:s.contactNumber}),(0,X.jsx)(Xo.T,{id:"address",placeholder:"Address: 123 Main St, Anytown USA",value:n.address,onChange:a,className:"min-h-9 h-9 no-scrollbar"}),(0,X.jsxs)("div",{className:"grid grid-cols-[1fr_2fr] gap-2",children:[(0,X.jsx)(mx,{id:"visit.relation",label:"Relation",value:n.visit.relation,onValueChange:e=>r("visit.relation",e),children:["Father","Husband","Mother","Wife","Guardian"].map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))}),(0,X.jsx)(Nl,{id:"visit.guardianName",value:n.visit.guardianName,onChange:a,label:""+(n.visit.relation?n.visit.relation+"'s Name":"Guardian's Name")})]}),!i&&(0,X.jsxs)("div",{className:"grid grid-cols-[1fr_2fr] gap-2",children:[(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Vn.p,{type:"date",id:"visit.bookingDate",value:n.visit.bookingDate,onChange:a,tabIndex:-1,className:"peer pl-2 pt-2 pb-2 block  border rounded-md text-gray-900 focus:ring-blue-500 focus:border-blue-500 bg-white "+(s["visit.bookingDate"]?"border-red-500":"border-gray-300")}),(0,X.jsxs)(Ks.J,{htmlFor:"visit.bookingDate",className:"absolute text-xs transform -translate-y-3 top-1 z-10 origin-[0] left-2 px-1 bg-white "+(s["visit.bookingDate"]?"text-red-500":"text-gray-500"),children:["Booking Date",s["visit.bookingDate"]&&(0,X.jsx)("span",{className:"text-red-500 ml-1",children:"*Required"})]})]}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsxs)(A.l6,{value:n.visit.consultationType||"",onValueChange:e=>r("visit.consultationType",e),children:[(0,X.jsx)(A.bq,{className:"w-full",children:(0,X.jsx)(A.yv,{placeholder:"Consultation type"})}),(0,X.jsx)(A.gC,{children:o.map((e=>(0,X.jsx)(A.eb,{value:e,children:(0,X.jsx)("span",{className:"capitalize",children:e})},e)))})]}),(0,X.jsx)(Ks.J,{className:"absolute text-xs transform -translate-y-3 top-1 z-10 origin-[0] left-2 px-1 bg-white text-gray-500",children:"Consultation Type"})]})]})]})}function fx(e){let{formData:n,handleSelectChange:r}=e;const a=(0,t.useCallback)((e=>{const{id:t,value:n}=e.target;r(`visit.vitals.${t}`,n)}),[r]);return(0,X.jsx)(X.Fragment,{children:[{id:"bloodPressure",label:"Blood Pressure (e.g., 120/80)"},{id:"temperature",label:"Temperature (\xb0C)",type:"number"},{id:"weight",label:"Weight (kg)",type:"number"},{id:"height",label:"Height (cm)",type:"number"},{id:"heartRate",label:"Heart Rate (bpm)",type:"number"},{id:"oxygenSaturation",label:"Oxygen Saturation (%)",type:"number"},{id:"respiratoryRate",label:"Respiratory Rate",type:"number"}].map((e=>(0,X.jsx)("div",{className:"w-full",children:(0,X.jsx)(Nl,{id:e.id,label:e.label,type:e.type||"text",value:n.visit.vitals[e.id],onChange:a})},e.id)))})}function vx(e){let{formData:t,handleSelectChange:n}=e;return(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"visit.insuranceDetails.provider",children:"Insurance Provider"}),(0,X.jsx)(Vn.p,{id:"visit.insuranceDetails.provider",placeholder:"Health Insurance Co.",value:t.insuranceDetails.provider,onChange:e=>n("visit.insuranceDetails.provider",e.target.value)})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"visit.insuranceDetails.policyNumber",children:"Policy Number"}),(0,X.jsx)(Vn.p,{id:"visit.insuranceDetails.policyNumber",placeholder:"POL-123456",value:t.insuranceDetails.policyNumber,onChange:e=>n("visit.insuranceDetails.policyNumber",e.target.value)})]})]})}const gx="(patient, hospital, ref) => {\n  return React.createElement(\"div\", { className: \"print-content\" },\n      \n      React.createElement(\"div\", { \n        style: {\n          position: 'absolute',\n          left: '25mm',\n          top: '54mm',\n          fontSize: '16px',\n          fontFamily: 'Arial, sans-serif',\n        }\n      }, patient?.patient?.name || ''),\n\n      React.createElement(\"div\", { \n        style: {\n          position: 'absolute',\n          left: '160mm',\n          top: '54mm',\n          fontSize: '16px',\n          fontFamily: 'Arial, sans-serif'\n        }\n      }, patient?.bookingDate ? patient?.bookingDate.split('T')[0]?.split('-').reverse().join('/') : ''),\n\n      React.createElement(\"div\", { \n        style: {\n          position: 'absolute',\n          left: '30mm',\n          top: '64mm',\n          fontSize: '16px',\n          fontFamily: 'Arial, sans-serif'\n        }\n      }, `${patient?.patient?.age || ''} / ${patient?.patient?.gender || ''}`),\n\n      React.createElement(\"div\", { \n        style: {\n          position: 'absolute',\n          left: '160mm',\n          top: '64mm',\n          fontSize: '16px',\n          fontFamily: 'Arial, sans-serif'\n        }\n      }, patient?.patient?.address || '')\n  );\n}",xx=(0,t.forwardRef)(((e,n)=>{const{patient:r,hospital:a,templateString:s}=e,i=(0,j.d4)((e=>e.templates.headerTemplateArray)),o=(null===i||void 0===i?void 0:i.length)>0?i[0].value:Kn.h,l=(0,Gn.G)(o||Kn.h),c=new Function("React","HospitalHeader","format","addDays",`return (${s});`);try{var d;return c(t,l,Go.GP,zc.f)({...r,patient:{...r.patient,age:(0,M.F1)((null===(d=r.patient)||void 0===d?void 0:d.age)||r.age)}},a,n)}catch(u){return console.error("Error rendering OPD Rx:",u),t.createElement("div",null,"Error rendering OPD Rx template")}})),yx=e=>{var n;let{patient:r}=e;const{hospitalInfo:a}=(0,j.d4)((e=>e.hospital)),s=(0,j.d4)((e=>e.templates.opdRxTemplateArray||[])),[i,o]=(0,t.useState)(null),l=(0,qn.useReactToPrint)({content:()=>c.current,pageStyle:"\n      @page {\n        size: A4;\n        margin: 0;\n      }\n      @media print {\n        body {\n          margin: 0;\n          padding: 0;\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-content {\n          width: 210mm;\n          min-height: 297mm;\n          position: relative;\n          margin: 0;\n          padding: 0;\n          box-sizing: border-box;\n        }\n      }\n    "}),c=(0,t.useRef)(),d=e=>{o(e),setTimeout(l,100)};return s.length<=1?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)($s,{onClick:()=>d(s[0]),className:"font-bold",children:[(0,X.jsx)(Xn.A,{className:"h-4 w-4 mr-2 "}),"Print OPD (Rx)"]}),(0,X.jsx)("div",{style:{display:"none"},children:(0,X.jsx)("div",{ref:c,className:"print-content",children:(0,X.jsx)(xx,{patient:r,hospital:a,templateString:(null===i||void 0===i?void 0:i.value)||gx})})})]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(Ls,{children:[(0,X.jsxs)(Fs,{children:[(0,X.jsx)(Xn.A,{className:"h-4 w-4 mr-2 font-bold"}),"Print OPD (Rx)"]}),(0,X.jsx)(Bs,{children:s.map((e=>(0,X.jsx)($s,{onClick:()=>d(e),children:e.name},e.name)))})]}),(0,X.jsx)("div",{style:{display:"none"},children:(0,X.jsx)("div",{ref:c,className:"print-content",children:(0,X.jsx)(xx,{patient:r,hospital:a,templateString:(null===i||void 0===i?void 0:i.value)||(null===(n=s[0])||void 0===n?void 0:n.value)})})})]})},bx=t.forwardRef(((e,n)=>{let{patientData:r,hospital:a}=e;const s=(0,j.d4)((e=>e.templates.headerTemplateArray)),i=(0,j.d4)((e=>e.templates.opdBillTokenTemplate)),o=(null===s||void 0===s?void 0:s.length)>0?s[0].value:Kn.h,l=(0,Gn.G)(o||Kn.h),c=new Function("React","HospitalHeader",`return (${i||'(patientData, hospitalInfo, ref) => {\n  const format = (date, formatStr) => {\n    const d = new Date(date);\n    const day = d.getDate().toString().padStart(2, \'0\');\n    const month = (d.getMonth() + 1).toString().padStart(2, \'0\');\n    const year = d.getFullYear();\n    return `${day}/${month}/${year}`;\n  };\n\n\n\nlet city = hospitalInfo?.address?.split(",").at(-1).trim();\n  const hardcodedTerms = [\n    "This receipt is valid only once.",\n    "Receipt is not Refundable.",\n    "Valid only for patient mentioned above.",\n    "Slot once booked cannot be changed.",\n    `Subjected to ${city?.charAt(0)?.toUpperCase() + city?.slice(1)} Jurisdiction Only.`\n  ];\n\n  const BillCopy = ({ title, patient, bill, payment, admissionRecord, visit, hospitalInfo }) => \n    React.createElement("div", { \n      className: "w-full lg:w-1/2 p-1 lg:p-2 border-b lg:border-b-0 lg:border-r border-dashed" \n    },\n      React.createElement("div", { className: "mb-0.5 sm:mb-1" },\n        React.createElement("div", { className: "text-center space-y-1 print:m-0 print:p-0 " },\n          React.createElement("h1", { className: "text-[20px] print:text-[14px] font-bold m-0 p-0  print:leading-tight" },\n            hospitalInfo.name\n          ),\n          React.createElement("p", { className: "text-sm m-0 p-0 print:text-[10px] print:leading-tight" },\n            hospitalInfo.doctorName\n          ),\n          React.createElement("p", { className: "text-sm m-0 p-0 print:text-[10px] print:leading-tight" },\n            hospitalInfo.contactNumber\n          )\n        ),\n        React.createElement("div", { className: "flex justify-between items-center mt-2 font text-[14px]" },\n          React.createElement("h2", { className: "font-bold" }, title),\n          React.createElement("div", { className: "text-[12px]" },\n            React.createElement("span", { className: "font-semibold" }, "Invoice No: "),\n            React.createElement("span", null, bill?.invoiceNumber || "N/A")\n          )\n        )\n      ),\n      React.createElement("div", { className: "grid gap-1 print:gap-0.5" },\n        React.createElement("div", { className: "print:text-[10px] text-[14px] border rounded-md bg-gray-50" },\n          React.createElement("div", { className: "grid grid-cols-3 p-2 border-b" },\n            React.createElement("div", { className: "flex gap-1" },\n              React.createElement("span", { className: "font-semibold" }, "Name:"),\n              React.createElement("span", { className: "font-semibold" }, patient.name)\n            ),\n            React.createElement("div", { className: "flex gap-1 justify-end" },\n              React.createElement("span", { className: "font-semibold" }, "Age/Sex:"),\n              React.createElement("span", { className: "font-semibold" }, `${patient.age}/${patient.gender}`)\n            ),\n            React.createElement("div", { className: "flex gap-1 justify-end" },\n              React.createElement("span", { className: "font-semibold" }, "UHID No:"),\n              React.createElement("span", { className: "font-semibold" }, patient.registrationNumber)\n            )\n          ),\n          React.createElement("div", { className: "grid grid-cols-3 gap-2 p-2" },\n            React.createElement("div", { className: "flex whitespace-nowrap overflow-hidden gap-1" },\n              React.createElement("span", { className: "font-semibold flex-shrink-0" }, "Address:"),\n              React.createElement("span", { \n                className: "truncate font-semibold",\n                title: patient.address\n              }, patient.address)\n            ),\n            React.createElement("div", { className: "flex gap-1 justify-end" },\n              React.createElement("span", { className: "font-semibold" }, "Contact:"),\n              React.createElement("span", { className: "font-semibold" }, patient.contactNumber)\n            ),\n            React.createElement("div", { className: "flex gap-1 justify-end" },\n              React.createElement("span", { className: "font-semibold" }, "Date:"),\n              React.createElement("span", { className: "font-semibold" }, format(bill.createdAt))\n            )\n          )\n        ),\n        React.createElement("div", null,\n          React.createElement("span", { className: "font-bold text-[16px] print:text-[12px]" }, "Slot No :"),\n          React.createElement("span", { className: "font-bold text-[16px] print:text-[12px]" }, \n            admissionRecord?.bookingNumber || visit?.bookingNumber\n          )\n        ),\n        React.createElement("div", null,\n          React.createElement("div", { className: "vitals-section" },\n            React.createElement("h2", { className: "font-bold print:text-[12px]" }, "Vitals"),\n            React.createElement("div", { className: "grid grid-cols-3 gap-0 print:text-[12px]" },\n              React.createElement("div", { className: "flex gap-2" },\n                React.createElement("span", { className: "font-semibold" }, "BP:"),\n                React.createElement("span", null, \n                  admissionRecord?.vitals?.bloodPressure ? `${admissionRecord.vitals.bloodPressure} mmHg` : ""\n                )\n              ),\n              React.createElement("div", { className: "flex gap-2" },\n                React.createElement("span", { className: "font-semibold" }, "Weight:"),\n                React.createElement("span", null,\n                  admissionRecord?.vitals?.weight ? `${admissionRecord.vitals.weight} kg` : ""\n                )\n              ),\n              admissionRecord?.vitals?.heartRate && React.createElement("div", { className: "flex gap-2" },\n                React.createElement("span", { className: "font-semibold" }, "Heart Rate:"),\n                React.createElement("span", null, `${admissionRecord.vitals.heartRate} bpm`)\n              ),\n              admissionRecord?.vitals?.temperature && React.createElement("div", { className: "flex gap-2" },\n                React.createElement("span", { className: "font-semibold" }, "Temp:"),\n                React.createElement("span", null, `${admissionRecord.vitals.temperature} \xb0C`)\n              ),\n              admissionRecord?.vitals?.oxygenSaturation && React.createElement("div", { className: "flex gap-2" },\n                React.createElement("span", { className: "font-semibold" }, "O"),\n                React.createElement("span", { style: { verticalAlign: "sub" } }, "\u2082"),\n                React.createElement("span", { className: "font-semibold" }, " Saturation:"),\n                React.createElement("span", null, `${admissionRecord.vitals.oxygenSaturation}%`)\n              ),\n              admissionRecord?.vitals?.respiratoryRate && React.createElement("div", { className: "flex gap-2" },\n                React.createElement("span", { className: "font-semibold" }, "Respiration:"),\n                React.createElement("span", null, `${admissionRecord.vitals.respiratoryRate} br/min`)\n              )\n            )\n          )\n        ),\n        React.createElement("div", { className: "overflow-x-auto" },\n          React.createElement("table", { className: "border-2 border-gray-200 mt-1 w-full text-[17px] print:text-[17px]" },\n            React.createElement("thead", { className: "bg-gray-100 print:text-[12px]" },\n              React.createElement("tr", null,\n                React.createElement("th", { className: "w-[40px] print:p-0 text-left print:text-left" }, "No"),\n                React.createElement("th", { className: "print:p-0 " }, "Service"),\n                React.createElement("th", { className: "text-right w-[50px] print:p-0" }, "Qty"),\n                React.createElement("th", { className: "text-right w-[70px] print:p-0" }, "Rate"),\n                React.createElement("th", { className: "text-right w-[70px] print:p-0" }, "Amt")\n              )\n            ),\n            React.createElement("tbody", { className: "print:text-[12px]" },\n              bill.services.map((service, index) =>\n                React.createElement("tr", { key: index },\n                  React.createElement("td", { className: "py-1 text-left" }, index + 1),\n                  React.createElement("td", { className: "py-0.5" },\n                    React.createElement("div", { className: "text-center" }, service.name)\n                  ),\n                  React.createElement("td", { className: "text-right py-0.5" }, service.quantity),\n                  React.createElement("td", { className: "text-right py-0.5" }, `\u20b9${service.rate}`),\n                  React.createElement("td", { className: "text-right py-0.5" }, `\u20b9${service.quantity * service.rate}`)\n                )\n              )\n            )\n          )\n        ),\n        React.createElement("div", { className: "flex flex-col items-end mt-1 text-[17px] print:text-[12px]" },\n          React.createElement("div", { className: "summary-section flex justify-between w-full sm:w-48 px-2 sm:px-0" },\n            React.createElement("span", null, "Sub Total:"),\n            React.createElement("span", null, `\u20b9${bill.subtotal}`)\n          ),\n          bill.additionalDiscount > 0 && React.createElement("div", { \n            className: "summary-section flex justify-between w-full sm:w-48 text-red-600" \n          },\n            React.createElement("span", null, "Discount:"),\n            React.createElement("span", null, `- \u20b9${bill.additionalDiscount}`)\n          ),\n          React.createElement("div", { \n            className: "summary-section flex justify-between w-full sm:w-48 font-bold border-gray-200" \n          },\n            React.createElement("span", null, "Total Amount:"),\n            React.createElement("span", null, `\u20b9${bill.totalAmount}`)\n          ),\n          React.createElement("div", { className: "summary-section w-full sm:w-48 border-t border-gray-200" },\n            React.createElement("div", { className: "flex justify-between" },\n              React.createElement("span", null, "Amount Paid:"),\n              React.createElement("span", { className: "text-green-600 font-bold" }, `\u20b9${bill.amountPaid}`)\n            ),\n            React.createElement("div", { className: "flex justify-between" },\n              React.createElement("span", null, "Due Amount:"),\n              React.createElement("span", { className: "text-red-600" }, \n                `\u20b9${Math.max(0, bill.totalAmount - bill.amountPaid)}`\n              )\n            ),\n            React.createElement("div", { className: "flex justify-between pt-0.5" },\n              React.createElement("span", null, "Payment Method:"),\n              React.createElement("span", null, payment.map(p => p.paymentMethod).join(","))\n            ),\n            React.createElement("div", { className: "flex justify-between font-medium pt-0.5" },\n              React.createElement("span", null, "Status:"),\n              React.createElement("span", { \n                className: `${bill.totalAmount === bill.amountPaid ? "text-green-600" : "text-red-600"} font-bold`\n              }, bill.totalAmount === bill.amountPaid ? "PAID" : "DUE")\n            )\n          )\n        ),\n        React.createElement("div", null,\n          React.createElement("ul", { className: "text-[8px] font-bold hidden print:block" },\n            hardcodedTerms.map((term, index) =>\n              React.createElement("li", { \n                key: index,\n                className: "flex items-start text-gray-700" \n              },\n                React.createElement("span", { className: "mr-2 text-red-500 font-bold" }, "\u2022"),\n                React.createElement("span", { className: "flex-1" }, term)\n              )\n            )\n          )\n        ),\n        React.createElement("div", { \n          className: "flex-col text-[11px] items-end font-bold hidden print:flex print:items-end" \n        }, hospitalInfo.name),\n        React.createElement("div", { \n          className: "flex-col text-[12px] items-center justify-center hidden print:flex print:items-center print:justify-center pt-3" \n        }, "Get Well Soon")\n      )\n    );\n\n  return React.createElement("div", { \n    className: "flex flex-row lg:flex-row w-full print:w-[210mm] print:h-[148mm] print:py-5 print:pl-3 print:pr-4",\n    ref: ref \n  },\n    React.createElement(BillCopy, {\n      title: "Hospital Copy",\n      patient: patientData.patient,\n      bill: patientData.bill,\n      payment: patientData.payment,\n      admissionRecord: patientData.admissionRecord,\n      visit: patientData.visit,\n      hospitalInfo: hospitalInfo\n    }),\n    React.createElement("div", { \n      className: "w-0 h-full border-l-2 border-dashed border-gray-500" \n    }, null),\n    React.createElement(BillCopy, {\n      title: "Patient Copy",\n      patient: patientData.patient,\n      bill: patientData.bill,\n      payment: patientData.payment,\n      admissionRecord: patientData.admissionRecord,\n      visit: patientData.visit,\n      hospitalInfo: hospitalInfo\n    })\n  );\n}'});`);try{return c(t,l)({...r,patient:{...r.patient,age:(0,M.F1)(r.patient.age)}},a,n)}catch(d){return console.error("Error rendering dynamic lab report:",d),t.createElement("div",null,"Error rendering lab report template")}})),jx=e=>{var n;let{isOpen:r,setIsOpen:a,patientData:s,services:i,selectedServices:o,onSelectService:l,onSelectAll:c,onClose:d}=e;const u=(0,t.useRef)(),{hospitalInfo:m}=(0,j.d4)((e=>e.hospital));(0,t.useEffect)((()=>(r||(document.body.style.pointerEvents="",document.body.style="",setTimeout((()=>{document.body.style.pointerEvents="",document.body.style=""}),300)),()=>{document.body.style.pointerEvents="",document.body.style=""})),[r]);const h=()=>{a(!1),document.body.style.pointerEvents="",document.body.style="",setTimeout((()=>{document.body.style.pointerEvents="",document.body.style=""}),300)},[p,f]=(0,t.useState)(!1),v=(0,t.useRef)(),g=(0,j.d4)((e=>e.templates.opdRxTemplateArray||[])),x=(0,qn.useReactToPrint)({content:()=>u.current,onBeforeGetContent:()=>(f(!0),new Promise((e=>{setTimeout((()=>{f(!1),e()}),0)}))),pageStyle:"\n      @media print {\n        @page {\n          size: A4;\n          margin: 5mm;\n        }\n        \n        body {\n          margin: 0;\n          -webkit-print-color-adjust: exact !important;\n          print-color-adjust: exact !important;\n        }\n      }\n    "}),y=(0,qn.useReactToPrint)({content:()=>v.current,pageStyle:"\n      @page {\n        size: A4;\n        margin: 0;\n      }\n      @media print {\n        body {\n          margin: 0;\n          padding: 0;\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-content {\n          width: 210mm;\n          min-height: 297mm;\n          position: relative;\n          margin: 0;\n          padding: 0;\n          box-sizing: border-box;\n        }\n      }\n    "});if(!s)return null;const{patient:b,bill:N,payment:_,admissionRecord:S,visit:E}=s;return(0,X.jsx)(Io.lG,{open:r,onOpenChange:h,children:(0,X.jsxs)(Io.Cf,{className:"max-w-[95vw] h-[90vh] overflow-y-auto lg:max-w-6xl gap-0",children:[(0,X.jsx)(Io.c7,{children:(0,X.jsx)(Io.L3,{children:"OPD Bill Token"})}),(0,X.jsx)("div",{id:"printArea",ref:u,className:(p?"print-content print-landscape":"flex flex-row lg:flex-row")+" w-full ",children:(0,X.jsx)(bx,{patientData:s,hospital:m})}),(0,X.jsxs)(Io.Es,{className:"flex-col sm:flex-row gap-2",children:[(0,X.jsx)(w.$,{className:"w-full sm:w-auto",variant:"outline",onClick:h,children:"Close"}),(0,X.jsx)("div",{className:"",children:(0,X.jsx)(Qo,{payments:_,billData:{...s.bill,patient:s.patient},styleData:!0})}),(0,X.jsx)("div",{className:"flex gap-2",children:g.length<=1?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(w.$,{className:"w-full sm:w-auto",onClick:()=>y(),children:[(0,X.jsx)(Xn.A,{className:"mr-2 h-4 w-4"}),"Print OPD Rx"]}),(0,X.jsx)("div",{style:{display:"none"},children:(0,X.jsx)("div",{ref:v,className:"print-content",children:(0,X.jsx)(xx,{patient:{...S,patient:b},hospital:m,templateString:(null===(n=g[0])||void 0===n?void 0:n.value)||gx})})})]}):(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{className:"w-full sm:w-auto",children:[(0,X.jsx)(Xn.A,{className:"mr-2 h-4 w-4"}),"Print OPD Rx"]})}),(0,X.jsx)(Ws,{children:(0,X.jsx)($s,{asChild:!0,children:(0,X.jsx)(yx,{patient:{...S,patient:b}})})})]})}),(0,X.jsx)("div",{className:"flex gap-2",children:(0,X.jsxs)(w.$,{className:"w-full sm:w-auto",onClick:x,children:[(0,X.jsx)(Xn.A,{className:"mr-2 h-4 w-4"}),"Print Token"]})})]})]})})},wx=[{name:"Cash"},{name:"UPI"},{name:"Card"},{name:"Insurance"}],Nx={name:"",registrationNumber:"",dateOfBirth:"",age:"",gender:"",contactNumber:"",email:"",address:"",bloodType:"",patientType:"OPD",upgradegenReg:!1,visit:{consultationType:"new",reasonForVisit:"",vitals:{bloodPressure:"",heartRate:"",temperature:"",weight:"",height:"",oxygenSaturation:"",respiratoryRate:""},referredBy:"",bookingDate:(new Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}).split("/").reverse().join("-"),timeSlot:{start:"",end:""},guardianName:"",relation:"",department:"",doctor:{id:"",name:""},insuranceDetails:{provider:"",policyNumber:""},totalFee:"",discount:"",paymentMethod:[]}},_x={};function Sx(e){var n,r,a,s,i,o,l,c;let{open:d,onOpenChange:u,patientData:m}=e;const h=Ko("(max-width: 640px)"),p=(0,j.wA)(),{toast:f}=(0,H.dj)(),v=(0,j.d4)((e=>e.patients.registerPatientStatus)),{services:g,servicesStatus:x}=(0,j.d4)((e=>e.services)),y=g.find((e=>e.name.toLowerCase().includes("consultation"))),b=(0,j.d4)((e=>e.consultationFees)),{doctorWiseFee:N,consultationTypes:_}=b,[S,E]=(0,t.useState)(Nx),[C,D]=(0,t.useState)(_x),T=(0,j.d4)((e=>e.staff.doctors)),k=(0,j.d4)((e=>e.departments.departments)),[P,O]=(0,t.useState)(!1),[R,M]=(0,t.useState)(null),[I,L]=(0,t.useState)(null),[F,B]=(0,t.useState)(null),[W,$]=(0,t.useState)(null),U=(0,t.useCallback)((e=>{const{id:t,value:n}=e.target;E((e=>{const r=t.split(".");let a={...e},s=a;for(let t=0;t<r.length-1;t++)s[r[t]]={...s[r[t]]},s=s[r[t]];if(s[r[r.length-1]]=n,["visit.totalFee","visit.amountPaid","visit.discount"].includes(t)){const e=Number("visit.totalFee"===t?n:a.visit.totalFee)||0,i=Number("visit.amountPaid"===t?n:a.visit.amountPaid)||0,o=Number("visit.discount"===t?n:a.visit.discount)||0,l={...C};o>e?l.discount="Discount cannot exceed total fee":delete l.discount;const c=e-o;"visit.discount"===t&&i>c?(a.visit.amountPaid=c.toString(),delete l.amountPaid):i>c?(l.amountPaid=`Cannot exceed \u20b9${c} (Total - Discount)`,"visit.amountPaid"===t&&(s[r[r.length-1]]=c.toString())):delete l.amountPaid,D(l)}return a}))}),[C]),z=(0,t.useCallback)(((e,t)=>U({target:{id:e,value:t}})),[U]);(0,t.useEffect)((()=>{const e=S.visit.paymentMethod.reduce(((e,t)=>e+(t.amount?parseFloat(t.amount):0)),0);E((t=>({...t,visit:{...t.visit,amountPaid:e}})))}),[S.visit.paymentMethod]);const V=()=>{var e,t;const n={};S.name||(n.name="Full name is required"),S.dateOfBirth||S.age||(n.age="Date of birth or age is required"),S.gender||(n.gender="Gender is required"),S.contactNumber||(n.contactNumber="Contact number is required"),S.visit.department||(n.department="Department selection is required"),null!==(e=S.visit)&&void 0!==e&&null!==(t=e.doctor)&&void 0!==t&&t.id||(n.doctor="Doctor selection is required");const r=Number(S.visit.totalFee)||0,a=S.visit.paymentMethod.reduce(((e,t)=>e+(Number(t.amount)||0)),0),s=Number(S.visit.discount)||0;return r<0&&(n.totalFee="Total fee cannot be negative"),s<0&&(n.discount="Discount cannot be negative"),s>r&&(n.discount="Discount cannot exceed total fee"),a>r-s&&(n.amountPaid=`Total payments (${a}) cannot exceed ${r-s} (Total - Discount)`),D(n),0===Object.keys(n).length},q=(0,t.useCallback)((async e=>{if(e.preventDefault(),S.registrationNumber===(null===W||void 0===W?void 0:W.registrationNumber)&&(S.upgradegenReg=!0),V()){const e={...S,dateOfBirth:S.dateOfBirth?new Date(S.dateOfBirth).toISOString():null,age:S.age,lastVisit:S.visit.bookingDate,lastVisitType:S.patientType,visit:{...S.visit,bookingDate:S.visit.bookingDate,vitals:Object.fromEntries(Object.entries(S.visit.vitals).map((e=>{let[t,n]=e;return"bloodPressure"===t?[t,n]:[t,parseFloat(n)]}))),prescription:{vitals:Object.fromEntries(Object.entries(S.visit.vitals).map((e=>{let[t,n]=e;return"bloodPressure"===t?[t,n]:[t,parseFloat(n)]})))}}},t=F||m,n=t?(0,Be.qf)({patientId:t._id,visit:e}):(0,Be.xo)(e);p(n).unwrap().then((e=>{f({title:m?"Patient revisit recorded successfully":"Patient registered successfully",description:m?"The patient visit has been recorded.":"The new patient has been added.",variant:"success"}),e.visit&&!e.admissionRecord&&(e={...e,admissionRecord:e.visit}),M(e),O(!0),p((0,Be.PP)({startDate:(new Date).toLocaleDateString("en-IN").split("/").reverse().join("-")})),p(pt()),u(!1)})).catch((e=>{f({title:m?"Failed to record revisit":"Failed to register patient",description:e.message||"There was an error. Please try again.",variant:"destructive"})}))}}),[S,V,p,f,u,m]),G=(0,t.useCallback)((()=>{E(Nx),D({})}),[]),K=(0,t.useCallback)((()=>{u(!1),setTimeout((()=>{document.body.style=""}),500)}),[u,y]);(0,t.useEffect)((()=>{if(m||F){var e,t,n,r,a,s,i,o;const l=F||m,c=(null===l||void 0===l||null===(e=l.visits)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.guardianName)||(null===l||void 0===l||null===(n=l.admissionDetails)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.guardianName)||"",d=(null===l||void 0===l||null===(a=l.visits)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.relation)||(null===l||void 0===l||null===(i=l.admissionDetails)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.relation)||"";E((e=>({...e,_id:l._id,name:l.name,age:l.age,gender:l.gender,contactNumber:l.contactNumber,registrationNumber:l.registrationNumber,address:l.address,visit:{...S.visit,guardianName:c,relation:d}})))}}),[m,F]),(0,t.useEffect)((()=>{d||(E(Nx),D(_x),setTimeout((()=>{document.body.style=""}),500))}),[d]);(0,t.useEffect)((()=>{if(d){const e=((e,t)=>{if(e&&t){var n;const a=b.doctorWiseFee.find((t=>t.doctor._id===e));var r;if(a&&void 0!==(null===(n=a.consultationType)||void 0===n?void 0:n[t]))return null===(r=a.consultationType)||void 0===r?void 0:r[t]}if(e){var a;const t=null===(a=b.masterConsultationFeesDoctor)||void 0===a?void 0:a[e];if(-1!==t)return t}if(t){var s;const e=null===(s=b.masterConsultationFeesType)||void 0===s?void 0:s[t];if(-1!==e)return e}return-1})(S.visit.doctor.id,S.visit.consultationType);E((t=>({...t,visit:{...t.visit,totalFee:-1===e||void 0===e||null===e?y.rate.toString()||"":e.toString()}})))}}),[d,S.visit.doctor.id,S.visit.consultationType]),(0,t.useEffect)((()=>()=>{document.body.style=""}),[]),(0,t.useEffect)((()=>{1===k.length&&z("visit.department",k[0].name),1===T.length&&z("visit.doctor",{id:T[0]._id,name:T[0].name})}),[k,T,z,d]),(0,t.useEffect)((()=>{d||B(null)}),[d]),(0,t.useEffect)((()=>{!d||m||F||p((0,Be.eg)()).unwrap().then((e=>{$({registrationNumber:e.registrationNumber}),E((t=>({...t,registrationNumber:e.registrationNumber})))})).catch((e=>{console.error("Failed to fetch numbers:",e)}))}),[d,p,m,F]),(0,t.useEffect)((()=>{if(d){const e=(new Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}).split("/").reverse().join("-");E((t=>({...t,visit:{...t.visit,bookingDate:e}})))}}),[d]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Io.lG,{open:d,onOpenChange:e=>{K(e)},children:(0,X.jsxs)(Io.Cf,{onInteractOutside:e=>e.preventDefault(),className:"md:max-w-[1000px] md:min-h-[60vh] md:max-h-[60vh] overflow-y-auto md:overflow-y-hidden w-[95vw] p-4 md:p-6 gap-0 md:gap-4 rounded-lg",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{className:"mb-2 md:mb-0",children:"Patient Registration"}),(0,X.jsxs)(Io.rr,{className:"hidden md:flex justify-between items-center",children:[(0,X.jsx)("span",{children:"Register new patient"}),F&&(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(()=>{const e=(e=>{const t=[...(e.visits||[]).filter((e=>"follow-up"!==e.consultationType)).map((e=>({date:new Date(e.bookingDate),createdAt:new Date(e.createdAt),type:"OPD"}))),...(e.admissionDetails||[]).map((e=>({date:new Date(e.bookingDate),createdAt:new Date(e.createdAt),type:"IPD"})))];return t.sort(((e,t)=>{const n=t.date-e.date;return 0!==n?n:t.createdAt-e.createdAt})),t.length>0?{date:t[0].date,type:t[0].type}:null})(F);return e&&(0,X.jsxs)("span",{className:"text-black font-semibold",children:["Last"," ",(0,X.jsx)("span",{className:"font-bold",children:e.type})," ","Visit: ",(0,Go.GP)(e.date,"dd MMM yyyy")," [",(0,X.jsxs)("span",{className:"capitalize "+(El(new Date((new Date).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")).setHours(0,0,0,0),e.date.setHours(0,0,0,0))>14?"text-red-500":"text-green-500"),children:[El(new Date((new Date).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")).setHours(0,0,0,0),e.date.setHours(0,0,0,0))," ","days ago"]})," ","(",e.type,") ]"]})})(),((null===(n=F.admissionDetails)||void 0===n?void 0:n[0])||(null===(r=F.visits)||void 0===r?void 0:r[0]))&&(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-[20px] w-[10px]",children:[(0,X.jsx)($o,{className:"h-[12px] w-4"}),(0,X.jsx)("span",{className:"sr-only",children:"Open patient history"})]})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)(zs,{}),(null===(a=F.admissionDetails)||void 0===a?void 0:a.length)>0&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)($s,{className:"font-semibold text-sm pointer-events-none",children:"Admission Details"}),F.admissionDetails.map(((e,t)=>(0,X.jsxs)($s,{className:"text-xs pl-4 pointer-events-none",children:["Date:"," ",(0,Go.GP)(new Date(e.bookingDate),"dd MMM yyyy")," (",El((new Date).setHours(0,0,0,0),new Date(e.bookingDate).setHours(0,0,0,0))," ","days ago)"]},t)))]}),(null===(s=F.admissionDetails)||void 0===s?void 0:s.length)>0&&(null===(i=F.visits)||void 0===i?void 0:i.length)>0&&(0,X.jsx)(zs,{}),(null===(o=F.visits)||void 0===o?void 0:o.length)>0&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)($s,{className:"font-semibold text-sm pointer-events-none",children:"OPD Visit Details"}),null===(l=[...F.visits])||void 0===l||null===(c=l.reverse())||void 0===c?void 0:c.map(((e,t)=>(0,X.jsxs)($s,{className:"text-xs pl-4 pointer-events-none",children:[(0,X.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 "+("new"===e.consultationType?"bg-green-500":e.consultationType?"bg-gray-400":"bg-transparent")}),(0,Go.GP)(new Date(e.bookingDate),"dd MMM yyyy")," (",(0,X.jsxs)("span",{className:"font-semibold",children:[El((new Date).setHours(0,0,0,0),new Date(e.bookingDate).setHours(0,0,0,0))," ","days ago"]}),")"]},t)))]})]})]})]})]})]}),(0,X.jsxs)("form",{onSubmit:q,className:"h-full md:h-[calc(70vh-100px)]",children:[(0,X.jsxs)(yl,{defaultValue:"basic-info",className:"w-full",children:[(0,X.jsxs)(bl,{className:"grid w-full grid-cols-3",children:[(0,X.jsx)(jl,{value:"basic-info",children:h?"Basic":"Basic Information"}),(0,X.jsx)(jl,{value:"vitals",children:"Vitals"}),(0,X.jsx)(jl,{value:"insurance",children:"Insurance"})]}),(0,X.jsx)(wl,{value:"basic-info",children:(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,X.jsx)("div",{className:"space-y-4",children:(0,X.jsx)(hx,{formData:S,handleInputChange:U,handleSelectChange:z,errors:C,consultationFeeSettings:b,setSearchedPatient:B})}),(0,X.jsx)("div",{className:"space-y-4",children:(0,X.jsx)(px,{formData:S,handleInputChange:U,handleSelectChange:z,errors:C})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(mx,{id:"visit.department",value:S.visit.department,label:"Department",onValueChange:e=>z("visit.department",e),error:C.department,children:k.map((e=>(0,X.jsx)(A.eb,{value:e.name,children:e.name},e._id)))}),(0,X.jsx)(mx,{id:"visit.doctor",label:"Doctor",value:S.visit.doctor.id,onValueChange:e=>{const t=T.find((t=>t._id===e));z("visit.doctor",{id:e,name:null===t||void 0===t?void 0:t.name})},error:C.doctor,children:T.map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.name},e._id)))})]}),(0,X.jsx)("div",{className:"flex flex-col gap-2",children:(0,X.jsx)(Nl,{label:"Referred By",id:"visit.referredBy",value:S.visit.referredBy,onChange:U,error:C.referredBy})}),(0,X.jsx)("div",{className:"flex flex-col gap-6 pt-2 md:pt-1",children:(0,X.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsx)(Nl,{label:"Total Fee (\u20b9)",id:"visit.totalFee",value:S.visit.totalFee,onChange:U,error:C.totalFee}),(0,X.jsx)(Nl,{label:"Discount (\u20b9)",id:"visit.discount",value:S.visit.discount,onChange:U,error:C.discount})]}),(0,X.jsxs)("div",{className:S.visit.paymentMethod.length>1?"grid grid-cols-3 gap-1":"grid grid-cols-2 gap-2",children:[(0,X.jsx)(Zo.A,{id:"visit.paymentMethod",label:"Payment Method",suggestions:wx,placeholder:`${S.visit.paymentMethod.length>0?S.visit.paymentMethod.map((e=>e.method)).join(", "):"Payment Method"}`,selectedValues:S.visit.paymentMethod.map((e=>({name:e.method}))),setSelectedValues:e=>{E((t=>{const n=t.visit.paymentMethod.reduce(((e,t)=>(e[t.method]=t.amount,e)),{}),r=e.map((e=>({method:e.name,amount:n[e.name]||""})));return{...t,visit:{...t.visit,paymentMethod:r,amountPaid:r.reduce(((e,t)=>e+(Number(t.amount)||0)),0)}}}))}}),S.visit.paymentMethod.length>0?S.visit.paymentMethod.map((e=>(0,X.jsx)(Nl,{id:`visit.${e.method}`,label:`${e.method} Amount`,value:e.amount.toLocaleString("en-IN"),onChange:t=>{var n,r;n=e.method,r=t.target.value,E((e=>({...e,visit:{...e.visit,paymentMethod:e.visit.paymentMethod.map((e=>e.method===n?{...e,amount:r}:e))}})))},className:"bg-gray-50",error:C[`payment.${e.method}`]},e.method))):(0,X.jsx)(Nl,{id:"invalid",label:"Amount Paid",disabled:!0,className:"bg-gray-50"},"Rajiv")]}),C.amountPaid&&(0,X.jsx)("p",{className:"text-red-500 text-xs mt-1",children:C.amountPaid})]})})]})]})}),(0,X.jsx)(wl,{value:"vitals",children:(0,X.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(0,X.jsx)(fx,{formData:S,handleSelectChange:z,errors:C})})}),(0,X.jsx)(wl,{value:"insurance",children:(0,X.jsx)(vx,{formData:S.visit,handleSelectChange:z,errors:C})})]}),(0,X.jsx)(Io.Es,{className:"mt-4",children:(0,X.jsxs)("div",{className:"w-full flex flex-row justify-between sm:justify-end sm:space-x-2 space-x-1",children:[(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:G,className:"flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4",tabIndex:-1,children:"Reset"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:K,className:"flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4",tabIndex:-1,children:"Cancel"}),(0,X.jsx)(w.$,{type:"submit",disabled:"loading"===v,className:"flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4",children:"loading"===v?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-1 h-3 w-3 sm:h-4 sm:w-4 animate-spin"}),"Registering..."]}):"Register"})]})})]})]})}),(0,X.jsx)(jx,{isOpen:P,setIsOpen:O,patientData:R})]})}const Ex=e=>{let{isOpen:n,onClose:r,services:a,selectedServices:s,onServicesChange:i}=e;const[o,l]=(0,t.useState)(s.map((e=>{const t=a.find((t=>t._id===e));return{id:e,rate:(null===t||void 0===t?void 0:t.rate)||0}}))),[c,d]=(0,t.useState)("");(0,t.useEffect)((()=>{l(s.map((e=>{const t=a.find((t=>t._id===e));return{id:e,rate:(null===t||void 0===t?void 0:t.rate)||0}})))}),[s,a]);(0,t.useMemo)((()=>[...a].sort(((e,t)=>{const n=o.some((t=>t.id===e._id));return n===o.some((e=>e.id===t._id))?e.name.localeCompare(t.name):n?-1:1}))),[a,o]);const u=(0,t.useMemo)((()=>[...a].filter((e=>e.name.toLowerCase().includes(c.toLowerCase())||e.category.toLowerCase().includes(c.toLowerCase())))),[c]),m=(0,t.useCallback)((e=>{l((t=>t.some((t=>t.id===e._id))?t.filter((t=>t.id!==e._id)):[...t,{id:e._id,rate:e.rate||0}]))}),[]),h=(0,t.useCallback)(((e,t)=>{l((n=>n.map((n=>n.id===e?{...n,rate:Number(t)}:n))))}),[]),p=(0,t.useCallback)((()=>{i(o),r()}),[o,i,r]);return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:"max-w-[95vw] w-full sm:max-w-[200px] md:max-w-[250px] lg:max-w-[500px] xl:max-w-[600px] rounded-lg max-h-[90vh]",children:[(0,X.jsx)(Io.c7,{children:(0,X.jsx)(Io.L3,{className:"text-lg sm:text-xl md:text-2xl",children:"Select Services"})}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search services...",value:c,onChange:e=>{d(e.target.value)},className:"pl-8 pr-8 w-full"}),c&&(0,X.jsx)("button",{onClick:()=>{d("")},className:"absolute right-2 top-2.5 text-muted-foreground hover:text-foreground",children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})]}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Wo.XI,{children:(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[50px]",children:"Select"}),(0,X.jsx)(Wo.nd,{children:"Service Name"}),(0,X.jsx)(Wo.nd,{className:"hidden md:block",children:"Category"}),(0,X.jsx)(Wo.nd,{className:"text-right w-24",children:"Rate"})]})})}),(0,X.jsx)(b.F,{className:"h-[50vh] pr-4",children:(0,X.jsx)(Wo.XI,{children:(0,X.jsx)(Wo.BF,{children:0===u.length?(0,X.jsx)(Wo.Hj,{children:(0,X.jsx)(Wo.nA,{colSpan:4,className:"text-center py-8",children:(0,X.jsxs)("p",{className:"text-muted-foreground",children:["No services found. Please add services in the"," ",(0,X.jsx)("b",{children:"Surgery Category"})," to the services list."]})})}):u.map((e=>{const t=o.find((t=>t.id===e._id));return(0,X.jsxs)(Wo.Hj,{className:t?"bg-muted":"",children:[(0,X.jsx)(Wo.nA,{className:"text-center",children:(0,X.jsx)(zl,{checked:!!t,onCheckedChange:()=>m(e),className:"h-5 w-5"})}),(0,X.jsx)(Wo.nA,{children:e.name}),(0,X.jsx)(Wo.nA,{className:"hidden md:block",children:e.category}),(0,X.jsx)(Wo.nA,{className:"text-right p-0",children:t?(0,X.jsx)("input",{type:"number",value:t.rate,onChange:t=>h(e._id,t.target.value),className:"w-24 text-right p-2 border-0 bg-transparent focus:outline-none focus:ring-0"}):(0,X.jsx)("span",{className:"px-4",children:e.rate||0})})]},e._id)}))})})})]}),(0,X.jsxs)("div",{className:"text-right font-bold",children:["Total: \u20b9",o.reduce(((e,t)=>e+(t.rate||0)),0).toLocaleString("en-IN")]}),(0,X.jsx)(Mo,{}),(0,X.jsxs)(Io.Es,{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:r,className:"w-full sm:w-auto",children:"Cancel"}),(0,X.jsx)(w.$,{onClick:p,className:"w-full sm:w-auto",children:"Apply"})]})]})})},Cx=[{name:"Cash"},{name:"UPI"},{name:"Card"},{name:"Insurance"}];function Dx(e){var n,r,a,s,i,o,l,c;let{open:d,onOpenChange:u,patientData:m}=e;const h=(0,j.d4)((e=>e.departments.departments)),{rooms:p,status:f}=(0,j.d4)((e=>e.rooms)),v=(0,j.d4)((e=>e.staff.doctors)),g={name:"",registrationNumber:"",dateOfBirth:"",age:"",gender:"",contactNumber:"",address:"",bloodType:"",patientType:"IPD",paymentInfo:{includeServices:!0,amountPaid:"",paymentMethod:[],services:[],totalAmount:"",additionalDiscount:0},upgradegenReg:!1,upgradegenIpd:!1,admission:{department:1===h.length?h[0]._id:"",assignedDoctor:1===v.length?v[0]._id:"",operationName:"",referredBy:"",assignedRoom:"",assignedBed:"",diagnosis:"",ipdNumber:"",vitals:{admission:{bloodPressure:"",heartRate:"",temperature:"",oxygenSaturation:"",respiratoryRate:""},discharge:{bloodPressure:"",heartRate:"",temperature:"",oxygenSaturation:"",respiratoryRate:""}},bookingDate:"",bookingTime:"",timeSlot:{start:"",end:""},insuranceDetails:{provider:"",policyNumber:""},guardianName:"",relation:""}},x=(0,j.wA)(),{toast:y}=(0,H.dj)(),b=(0,j.d4)((e=>e.patients.registerPatientStatus)),N=(0,j.d4)((e=>e.hospital.hospitalInfo)),_=(0,j.d4)((e=>e.hospital.hospitalInfoStatus)),[S,E]=(0,t.useState)(g);(0,t.useEffect)((()=>{E((e=>({...e,admission:{...e.admission,department:1===h.length?h[0].name:"",assignedDoctor:1===v.length?v[0]._id:""}})))}),[h,v,d]);const[C,D]=(0,t.useState)({}),T=Ko("(max-width: 640px)"),[k,P]=(0,t.useState)(!1),{services:O,servicesStatus:I}=(0,j.d4)((e=>e.services)),{serviceBillCollections:L,status:F}=(0,j.d4)((e=>e.templates)),[B,W]=(0,t.useState)(""),[$,U]=(0,t.useState)(!1),[z,V]=(0,t.useState)(null),[q,G]=(0,t.useState)(null),[K,Y]=(0,t.useState)(0),[Z,J]=(0,t.useState)(null),[Q,ee]=(0,t.useState)({registrationNumber:null,ipdNumber:null});(0,t.useEffect)((()=>{"idle"===f&&d&&x(Qe()),"idle"===F&&x((0,R.QK)()),"idle"===I&&x(lt())}),[x,F,I,f]),(0,t.useEffect)((()=>{if(S.admission.assignedRoom){const e=p.find((e=>e._id===S.admission.assignedRoom));Y(e&&e.ratePerDay||0)}}),[S.admission.assignedRoom,p]),(0,t.useEffect)((()=>{const e=S.paymentInfo.services.reduce(((e,t)=>e+(t.rate||0)),0)+K;E((t=>({...t,paymentInfo:{...t.paymentInfo,totalAmount:e}}))),W(e)}),[S.paymentInfo.services,O,K]),(0,t.useEffect)((()=>{"idle"===_&&x(Ct())}),[x,_]);const te=(0,t.useCallback)((()=>{d||(E(g),D({}),W(""),Y(0),J(null))}),[d]);(0,t.useEffect)((()=>{if(m||Z){var e,t,n,r;const a=Z||m,s=(null===a||void 0===a||null===(e=a.visits[0])||void 0===e?void 0:e.guardianName)||(null===a||void 0===a||null===(t=a.admissionDetails[0])||void 0===t?void 0:t.guardianName)||"",i=(null===a||void 0===a||null===(n=a.visits[0])||void 0===n?void 0:n.relation)||(null===a||void 0===a||null===(r=a.admissionDetails[0])||void 0===r?void 0:r.relation)||"";E((e=>({...e,_id:a._id,name:a.name||"",age:a.age||"",gender:a.gender||"",contactNumber:a.contactNumber||"",email:a.email||"",address:a.address||"",registrationNumber:a.registrationNumber||"",dateOfBirth:a.dateOfBirth||"",bloodType:a.bloodType||"",admission:{...e.admission,guardianName:s,relation:i},paymentInfo:{...e.paymentInfo}})))}}),[m,Z,d]),(0,t.useEffect)((()=>{d||(te(),W(""),Y(0),setTimeout((()=>{document.body.style=""}),500),J(null))}),[d,te,x]),(0,t.useEffect)((()=>{!d||m||Z||x((0,Be.eg)()).unwrap().then((e=>{ee({registrationNumber:e.registrationNumber,ipdNumber:e.ipdNumber}),E((t=>({...t,registrationNumber:e.registrationNumber,admission:{...t.admission,ipdNumber:e.ipdNumber}})))})).catch((e=>{console.error("Failed to fetch numbers:",e)}))}),[d,x,m,Z]),(0,t.useEffect)((()=>{d&&E((e=>({...e,admission:{...e.admission,bookingDate:(new Date).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-"),bookingTime:(0,M.IF)((new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}))}})))}),[d]);const ne=e=>{const{id:t,value:n,type:r,checked:a}=e.target;E((e=>{const s=t.split("."),i={...e};let o=i;for(let t=0;t<s.length-1;t++)o[s[t]]={...o[s[t]]},o=o[s[t]];if(o[s[s.length-1]]="checkbox"===r?a:n,"paymentInfo.paymentMethod"===t&&(o.paymentInfo.paymentMethod=[...o.paymentInfo.paymentMethod,{method:n||"",amount:""}]),"admission.assignedRoom"===t){const e=p.find((e=>e._id===n));Y(e&&e.ratePerDay||0)}return i}))},re=(0,t.useCallback)((e=>{const t=e.target.value,n=t?(()=>{const e=new Date,n=new Date(t);let r=e.getFullYear()-n.getFullYear(),a=e.getMonth()-n.getMonth();return a<0&&(r-=1,a+=12),`${r}-${a}`})():"";ne({target:{id:"dateOfBirth",value:t}}),ne({target:{id:"age",value:n}})}),[ne]),ae=(0,t.useCallback)((e=>{const t=e.target.value;ne({target:{id:"age",value:t}}),ne({target:{id:"dateOfBirth",value:""}})}),[ne]);(0,t.useEffect)((()=>{const e=S.paymentInfo.paymentMethod.reduce(((e,t)=>e+(t.amount?parseFloat(t.amount):0)),0);E((t=>({...t,paymentInfo:{...t.paymentInfo,amountPaid:e}})))}),[S.paymentInfo.paymentMethod]);(0,t.useEffect)((()=>{d||setTimeout((()=>{document.body.style=""}),500)}),[d]);const se=(0,t.useCallback)((()=>O.filter((e=>"Surgery"===e.category)).map((e=>({...e,isRoom:!1})))),[O]),ie=async()=>{if(S.registrationNumber)try{var e,t,n,r;const i=await x((0,Be.bW)({searchQuery:null===(e=S.registrationNumber)||void 0===e?void 0:e.trim()})).unwrap();if(null!==(t=i.results)&&void 0!==t&&t.patients&&(null===(n=i.results)||void 0===n||null===(r=n.patients)||void 0===r?void 0:r.length)>0){var a,s;const e=null===(a=i.results)||void 0===a||null===(s=a.patients)||void 0===s?void 0:s[0];J({...e,isFromSearch:!0})}}catch(i){console.error("Search failed:",i)}};return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Io.lG,{open:d,onOpenChange:()=>{setTimeout((()=>{document.body.style=""}),500),u(!1),te()},children:(0,X.jsxs)(Io.Cf,{onInteractOutside:e=>e.preventDefault(),className:` ${T?"w-[95vw] p-4 rounded-lg gap-0 ":"max-w-[1000px]"} h-[${T?"70vh":"60vh"}] overflow-y-auto px-4`,children:[(0,X.jsxs)(Io.c7,{className:"mb-4 md:mb-0",children:[(0,X.jsx)(Io.L3,{children:m?"Admit IPD Patient":"Register New IPD Patient"}),(0,X.jsx)(Io.rr,{className:T?"hidden":"",children:m?"Fill details for patient Admission":"Fill basic details of patient for new IPD registration"})]}),(0,X.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),S.registrationNumber===(null===Q||void 0===Q?void 0:Q.registrationNumber)&&(S.upgradegenReg=!0),S.admission.ipdNumber===(null===Q||void 0===Q?void 0:Q.ipdNumber)&&(S.upgradegenIpd=!0),((e,t)=>{const n={};return e.name.trim()||(n.name="Full name is required"),e.dateOfBirth||e.age||(n.age="Date of birth or age is required"),e.gender||(n.gender="Gender is required"),e.contactNumber||(n.contactNumber="Phone number is required"),e.admission.bookingDate||(n["admission.bookingDate"]="Booking date is required"),e.admission.assignedDoctor||(n["admission.assignedDoctor"]="Doctor is required"),e.admission.department||(n["admission.department"]="Department is required"),e.admission.assignedRoom&&!e.admission.assignedBed&&(n["admission.assignedBed"]="Bed is required"),t(n),0===Object.keys(n).length})(S,D)){const e=(e=>({...e,age:e.age,patientType:"IPD",lastVisit:e.admission.bookingDate,lastVisitType:"IPD",admission:{...e.admission,assignedRoom:e.admission.assignedRoom||null,assignedBed:e.admission.assignedBed||null,bookingDate:e.admission.bookingDate,vitals:{admission:Object.fromEntries(Object.entries(e.admission.vitals.admission||{}).map((e=>{let[t,n]=e;return"bloodPressure"===t?[t,n]:[t,parseFloat(n)||null]}))),discharge:Object.fromEntries(Object.entries(e.admission.vitals.discharge||{}).map((e=>{let[t,n]=e;return"bloodPressure"===t?[t,n]:[t,parseFloat(n)||null]})))}}}))(S);m||Z?x((0,Be.gE)({patientId:(null===m||void 0===m?void 0:m._id)||(null===Z||void 0===Z?void 0:Z._id),admission:e})).unwrap().then((e=>{y({title:"Patient admitted successfully",description:"The patient has been admitted.",variant:"success"}),x((0,Be.PP)({startDate:(new Date).toLocaleDateString("en-IN").split("/").reverse().join("-")})),x(Qe()),x(pt()),V(e.bill),G(e),U(!0)})).catch((e=>{y({title:"Failed to admit patient",description:e.message||"There was an error admitting the patient. Please try again.",variant:"destructive"})})).finally((()=>{u(!1)})):x((0,Be.xo)(e)).unwrap().then((e=>{y({title:"Patient registered successfully",description:"The new patient has been added.",variant:"success"}),u(!1),x((0,Be.PP)({startDate:(new Date).toLocaleDateString("en-IN").split("/").reverse().join("-")})),x(Qe()),x(pt()),V(e.bill),G(e),U(!0)})).catch((e=>{y({title:"Failed to register patient",description:e.message||"There was an error registering the patient. Please try again.",variant:"destructive"})})).finally((()=>{}))}},className:`space-y-4 h-[calc(${T?"70vh":"60vh"}-115px)]`,children:[(0,X.jsxs)(yl,{defaultValue:"basic-info",className:"w-full",children:[(0,X.jsxs)(bl,{className:"grid w-full grid-cols-3",children:[(0,X.jsx)(jl,{value:"basic-info",children:T?"Basic":"Basic Information"}),(0,X.jsx)(jl,{value:"vitals",children:"Vitals"}),(0,X.jsx)(jl,{value:"insurance",children:"Insurance"})]}),(0,X.jsx)(wl,{value:"basic-info",children:(0,X.jsxs)("div",{className:`grid ${T?"grid-cols-1":"grid-cols-3"} mt-4 gap-4`,children:[(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)(Nl,{id:"name",label:"Full Name",value:S.name,onChange:ne,error:C.name}),T?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(Nl,{id:"age",label:"Age",type:"text",value:S.age,onChange:ae,error:C.age}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Nl,{id:"registrationNumber",label:"UHID Number",tabIndex:-1,value:S.registrationNumber,onChange:ne,className:"pr-10"}),(0,X.jsx)("button",{type:"button",onClick:ie,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",children:(0,X.jsx)(oo.A,{className:"h-5 w-5"})})]})]}),(0,X.jsx)("div",{children:(0,X.jsxs)(A.l6,{id:"gender",value:S.gender,onValueChange:e=>ne({target:{id:"gender",value:e}}),children:[(0,X.jsx)(A.bq,{className:C.gender?"border-red-500":"",children:(0,X.jsx)(A.yv,{placeholder:"Gender"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Male",children:"Male"}),(0,X.jsx)(A.eb,{value:"Female",children:"Female"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]})]})})]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Nl,{id:"registrationNumber",label:"UHID Number",tabIndex:-1,value:S.registrationNumber,onChange:ne,className:"pr-10"}),(0,X.jsx)("button",{type:"button",onClick:ie,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",children:(0,X.jsx)(oo.A,{className:"h-5 w-5"})})]}),(0,X.jsx)(Nl,{id:"ipdNumber",tabIndex:-1,label:"IPD Number",value:S.admission.ipdNumber,onChange:e=>ne({target:{id:"admission.ipdNumber",value:e.target.value}}),error:C.ipdNumber})]}),(0,X.jsxs)("div",{className:"flex items-end gap-4",children:[(0,X.jsx)("div",{className:"w-30 relative",children:(0,X.jsx)(Nl,{id:"age",label:"Age",type:"text",value:S.age,onChange:ae,error:C.age})}),(0,X.jsx)("div",{className:"flex-grow relative",children:(0,X.jsx)(Nl,{id:"dateOfBirth",tabIndex:-1,label:"Date of Birth",type:"date",value:S.dateOfBirth,onChange:re})})]}),(0,X.jsx)("div",{children:(0,X.jsxs)(A.l6,{id:"gender",value:S.gender,onValueChange:e=>ne({target:{id:"gender",value:e}}),children:[(0,X.jsx)(A.bq,{className:C.gender?"border-red-500":"",children:(0,X.jsx)(A.yv,{placeholder:"Gender"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Male",children:"Male"}),(0,X.jsx)(A.eb,{value:"Female",children:"Female"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]})]})})]}),(0,X.jsxs)("div",{className:"relative grid grid-cols-2 gap-2",children:[(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Vn.p,{type:"date",id:"admission.bookingDate",value:S.admission.bookingDate,onChange:ne,tabIndex:-1,className:"peer pl-2 pt-2 pb-2 block w-full border rounded-md text-gray-900 focus:ring-blue-500 focus:border-blue-500 bg-white "+(C["admission.bookingDate"]?"border-red-500":"border-gray-300")}),(0,X.jsxs)(Ks.J,{htmlFor:"admission.bookingDate",className:"absolute text-xs transform -translate-y-3 top-1 z-10 origin-[0] left-2 px-1 bg-white "+(C["admission.bookingDate"]?"text-red-500":"text-gray-500"),children:["Booking Date",C["admission.bookingDate"]&&(0,X.jsx)("span",{className:"text-red-500 ml-1",children:"*Required"})]})]}),(0,X.jsxs)("div",{className:"relative flex gap-2",children:[(0,X.jsxs)("div",{className:"flex-1",children:[(0,X.jsx)(Vn.p,{type:"time",id:"admission.bookingTime",value:S.admission.bookingTime.split(" ")[0],onChange:e=>{const t=(0,M.IF)(e.target.value);ne({target:{id:"admission.bookingTime",value:t}})},tabIndex:-1,className:"peer pl-2 pt-2 pb-2 block w-full border rounded-md text-gray-900 focus:ring-blue-500 focus:border-blue-500 bg-white "+(C["admission.bookingTime"]?"border-red-500":"border-gray-300")}),(0,X.jsxs)(Ks.J,{htmlFor:"admission.bookingTime",className:"absolute text-xs transform -translate-y-3 top-1 z-10 origin-[0] left-2 px-1 bg-white "+(C["admission.bookingTime"]?"text-red-500":"text-gray-500"),children:["Booking Time",C["admission.bookingTime"]&&(0,X.jsx)("span",{className:"text-red-500 ml-1",children:"*Required"})]})]}),(0,X.jsxs)(A.l6,{value:S.admission.bookingTime.split(" ")[1]||"AM",onValueChange:e=>{const t=S.admission.bookingTime.split(" ")[0];ne({target:{id:"admission.bookingTime",value:`${t} ${e}`}})},children:[(0,X.jsx)(A.bq,{className:"w-[70px]",children:(0,X.jsx)(A.yv,{placeholder:"AM"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"AM",children:"AM"}),(0,X.jsx)(A.eb,{value:"PM",children:"PM"})]})]})]})]})]}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-[1fr_2fr] gap-2",children:[(0,X.jsxs)(A.l6,{id:"admisison.relation",value:S.admission.relation,onValueChange:e=>ne({target:{id:"admission.relation",value:e}}),children:[(0,X.jsx)(A.bq,{children:(0,X.jsx)(A.yv,{placeholder:"Relation"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Father",children:"Father"}),(0,X.jsx)(A.eb,{value:"Husband",children:"Husband"}),(0,X.jsx)(A.eb,{value:"Mother",children:"Mother"}),(0,X.jsx)(A.eb,{value:"Wife",children:"Wife"}),(0,X.jsx)(A.eb,{value:"Guardian",children:"Guardian"})]})]}),(0,X.jsx)(Nl,{id:"admission.guardianName",value:S.admission.guardianName,onChange:ne,label:""+(S.admission.relation?S.admission.relation+"'s Name":"Guardian's Name")})]}),(0,X.jsx)("div",{children:(0,X.jsx)(Nl,{id:"contactNumber",label:"Phone",type:"tel",value:S.contactNumber,onChange:ne,error:C.contactNumber})}),(0,X.jsx)("div",{className:"space-y-2 ",children:(0,X.jsx)(Xo.T,{id:"address",placeholder:"Address",value:S.address,onChange:ne,className:"min-h-9 h-9 no-scrollbar"})}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsxs)(A.l6,{id:"admission.assignedRoom",onValueChange:e=>{ne({target:{id:"admission.assignedRoom",value:e}});const t=p.find((t=>t._id===e)),n=(null===t||void 0===t?void 0:t.beds.filter((e=>"Occupied"!==e.status)))||[];1===n.length?E((e=>{var t;return{...e,admission:{...e.admission,assignedBed:null===(t=n[0])||void 0===t?void 0:t._id}}})):E((e=>({...e,admission:{...e.admission,assignedBed:""}})))},children:[(0,X.jsx)(A.bq,{className:C["admission.assignedRoom"]?"border-red-500":"",children:(0,X.jsx)(A.yv,{placeholder:"Select Room"})}),(0,X.jsx)(A.gC,{children:p.filter((e=>"Occupied"!==e.status)).map((e=>(0,X.jsxs)(A.eb,{value:e._id,children:[e.roomNumber," - ",e.type]},e._id)))})]}),(0,X.jsxs)(A.l6,{id:"admission.assignedBed",onValueChange:e=>ne({target:{id:"admission.assignedBed",value:e}}),disabled:!S.admission.assignedRoom,children:[(0,X.jsx)(A.bq,{className:C["admission.assignedBed"]?"border-red-500":"",children:(0,X.jsx)(A.yv,{placeholder:S.admission.assignedBed&&S.admission.assignedRoom&&(null===(n=p.find((e=>e._id===S.admission.assignedRoom)))||void 0===n||null===(r=n.beds.find((e=>e._id===S.admission.assignedBed)))||void 0===r?void 0:r.bedNumber)||"Bed"})}),(0,X.jsx)(A.gC,{children:S.admission.assignedRoom&&(null===(a=p.find((e=>e._id===S.admission.assignedRoom)))||void 0===a?void 0:a.beds.filter((e=>"Occupied"!==e.status)).map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.bedNumber},e._id))))})]}),(null===(s=C.admission)||void 0===s?void 0:s.assignedBed)&&(0,X.jsx)("p",{className:"text-red-500 text-xs mt-1",children:C.admission.assignedBed})]})]}),(0,X.jsxs)("div",{className:"space-y-4",children:[T?(0,X.jsx)(X.Fragment,{children:(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsxs)(A.l6,{id:"admission.department",onValueChange:e=>ne({target:{id:"admission.department",value:e}}),children:[(0,X.jsx)(A.bq,{children:(0,X.jsx)(A.yv,{placeholder:1===h.length?h[0].name:"Department"})}),(0,X.jsx)(A.gC,{children:h.map((e=>(0,X.jsx)(A.eb,{value:e.name,children:e.name},e._id)))})]}),(0,X.jsxs)(A.l6,{id:"admission.assignedDoctor",onValueChange:e=>ne({target:{id:"admission.assignedDoctor",value:e}}),children:[(0,X.jsx)(A.bq,{className:C["admission.assignedDoctor"]?"border-red-500":"",children:(0,X.jsx)(A.yv,{placeholder:1===v.length?`${v[0].name}`:"Select Doctor"})}),(0,X.jsx)(A.gC,{children:v.map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.name},e._id)))})]})]})}):(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(mx,{id:"admission.department",onValueChange:e=>ne({target:{id:"admission.department",value:e}}),value:S.admission.department,label:"Department",error:C["admission.department"],children:h.map((e=>(0,X.jsx)(A.eb,{value:e.name,children:e.name},e._id)))}),(0,X.jsx)(mx,{id:"admission.assignedDoctor",onValueChange:e=>ne({target:{id:"admission.assignedDoctor",value:e}}),value:S.admission.assignedDoctor,label:"Doctor",error:C["admission.assignedDoctor"],children:v.map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.name},e._id)))})]}),(0,X.jsx)("div",{className:"flex flex-col",children:(0,X.jsx)(Nl,{id:"admission.referredBy",label:"Referred By",value:S.admission.referredBy,onChange:e=>ne({target:{id:"admission.referredBy",value:e.target.value}})})}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex items-center gap-1",children:[(0,X.jsx)(Nl,{id:"paymentInfo.totalAmount",label:"Amount",tabIndex:-1,value:S.paymentInfo.totalAmount.toLocaleString("en-IN"),onChange:e=>{const t=Number(e.target.value.replace(/,/g,""));if(!isNaN(t)){const e=O.filter((e=>S.paymentInfo.services.includes(e._id))).reduce(((e,t)=>e+(t.rate||0)),0)+K;if(t>e){const n=t-e,r=O.find((e=>"Surgery"===e.category&&S.paymentInfo.services.includes(e._id)));E(r?e=>({...e,paymentInfo:{...e.paymentInfo,totalAmount:t,additionalDiscount:0,services:e.paymentInfo.services.map((e=>e===r._id?{...r,rate:(r.rate||0)+n}:e))}}):e=>({...e,paymentInfo:{...e.paymentInfo,totalAmount:t,additionalDiscount:0}}))}else E((n=>({...n,paymentInfo:{...n.paymentInfo,totalAmount:t,additionalDiscount:Math.max(0,e-t)}})))}}}),(0,X.jsx)(Nl,{id:"paymentInfo.balanceDue",label:"Balance Due",tabIndex:-1,value:(S.paymentInfo.totalAmount-(S.paymentInfo.amountPaid||0)).toLocaleString("en-IN"),disabled:!0,className:"bg-gray-50"}),(0,X.jsx)(w.$,{variant:"outline",className:`\n                                 ${C["admission.operationName"]?"border-red-500 text-red-500 hover:bg-red-50 ":"border-primary text-primary"}\n                               `,onClick:e=>{e.preventDefault(),P(!0)},size:"sm",children:null!==(i=S.admission)&&void 0!==i&&i.operationName?(null===(o=S.admission)||void 0===o?void 0:o.operationName.length)>15?`${null===(l=S.admission)||void 0===l?void 0:l.operationName.slice(0,15)}...`:null===(c=S.admission)||void 0===c?void 0:c.operationName:"Select Operations"})]}),S.paymentInfo.additionalDiscount>0&&(0,X.jsxs)("div",{className:"grid grid-cols-2",children:[(0,X.jsxs)("div",{className:"text-sm text-gray-500 ",children:["Services Total: \u20b9",(O.filter((e=>S.paymentInfo.services.includes(e._id))).reduce(((e,t)=>e+(t.rate||0)),0)+K).toLocaleString("en-IN")]}),K>0&&(0,X.jsxs)("div",{className:"text-sm text-gray-500",children:["Room Charge: \u20b9",K.toLocaleString("en-IN")]}),(0,X.jsxs)("div",{className:"text-sm text-gray-500",children:["Discount: \u20b9",S.paymentInfo.additionalDiscount.toLocaleString("en-IN")]})]})]}),(0,X.jsxs)("div",{className:S.paymentInfo.paymentMethod.length>1?"grid grid-cols-3 gap-1":"grid grid-cols-2 gap-2",children:[(0,X.jsx)(Zo.A,{id:"paymentInfo.paymentMethod",label:"Payment Method",suggestions:Cx,placeholder:S.paymentInfo.paymentMethod.length>0?S.paymentInfo.paymentMethod.map((e=>e.method)).join(","):"Payment Method",selectedValues:S.paymentInfo.paymentMethod.map((e=>({name:e.method}))),setSelectedValues:e=>{E((t=>{const n=t.paymentInfo.paymentMethod.reduce(((e,t)=>(e[t.method]=t.amount,e)),{}),r=e.map((e=>({method:e.name,amount:n[e.name]||""})));return{...t,paymentInfo:{...t.paymentInfo,paymentMethod:r}}}))}}),S.paymentInfo.paymentMethod.length>0?S.paymentInfo.paymentMethod.map((e=>(0,X.jsx)(Nl,{id:`paymentInfo.${e.method}`,label:`${e.method} Paid`,value:e.amount.toLocaleString("en-IN"),onChange:t=>{var n,r;n=e.method,r=t.target.value,E((e=>({...e,paymentInfo:{...e.paymentInfo,paymentMethod:e.paymentInfo.paymentMethod.map((e=>e.method===n?{...e,amount:r}:e)),amountPaid:e.paymentInfo.paymentMethod.reduce(((e,t)=>e+(t.amount?parseFloat(t.amount):0)),0)}})))},className:"bg-gray-50"},e.method))):(0,X.jsx)(Nl,{id:"hallelujah",label:"Amount Paid",disabled:!0,className:"bg-gray-50 "},"Ayush")]})]})]})}),(0,X.jsx)(wl,{value:"vitals",children:(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:`grid ${T?"grid-cols-1":"grid-cols-2"} gap-4`,children:[(0,X.jsx)(Xo.T,{id:"admission.diagnosis",placeholder:"Diagnosis",value:S.admission.diagnosis,onChange:e=>ne({target:{id:"admission.diagnosis",value:e.target.value}})}),C["admission.diagnosis"]&&(0,X.jsx)("p",{className:"text-red-500 text-xs mt-1",children:C["admission.diagnosis"]}),(0,X.jsx)(Xo.T,{id:"admission.conditionOnAdmission",placeholder:"Condition on Admission",value:S.admission.conditionOnAdmission,onChange:e=>ne({target:{id:"admission.conditionOnAdmission",value:e.target.value}})})]}),(0,X.jsx)("h4",{className:"font-semibold text-sm mt-4",children:"Admission Vitals"}),(0,X.jsxs)("div",{className:`grid ${T?"grid-cols-2":"grid-cols-3"} gap-4`,children:[(0,X.jsx)(Vn.p,{id:"admission.vitals.admission.weight",placeholder:"Weight",value:S.admission.vitals.admission.weight,onChange:ne}),(0,X.jsx)(Vn.p,{id:"admission.vitals.admission.height",placeholder:"Height",value:S.admission.vitals.admission.height,onChange:ne}),(0,X.jsx)(Vn.p,{id:"admission.vitals.admission.bloodPressure",placeholder:"Blood Pressure",value:S.admission.vitals.admission.bloodPressure,onChange:ne}),(0,X.jsx)(Vn.p,{id:"admission.vitals.admission.heartRate",placeholder:"Heart Rate",value:S.admission.vitals.admission.heartRate,onChange:ne}),(0,X.jsx)(Vn.p,{id:"admission.vitals.admission.temperature",placeholder:"Temperature",value:S.admission.vitals.admission.temperature,onChange:ne}),(0,X.jsx)(Vn.p,{id:"admission.vitals.admission.oxygenSaturation",placeholder:"Oxygen Saturation",value:S.admission.vitals.admission.oxygenSaturation,onChange:ne}),(0,X.jsx)(Vn.p,{id:"admission.vitals.admission.respiratoryRate",placeholder:"Respiratory Rate",value:S.admission.vitals.admission.respiratoryRate,onChange:ne})]})]})}),(0,X.jsx)(wl,{value:"insurance",children:(0,X.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,X.jsx)(Nl,{id:"admission.insuranceDetails.provider",label:"Insurance Provider",value:S.admission.insuranceDetails.provider,onChange:ne}),(0,X.jsx)(Nl,{id:"admission.insuranceDetails.policyNumber",label:"Policy Number",value:S.admission.insuranceDetails.policyNumber,onChange:ne})]})})]}),(0,X.jsx)(Io.Es,{className:"mt-4 "+(T?"mb-8":""),children:(0,X.jsxs)("div",{className:`w-full flex ${T?"flex-col-reverse":"flex-row"} justify-between sm:justify-end sm:space-x-2 space-y-2 sm:space-y-0`,children:[(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:()=>{E(g),D({}),W(""),Y(0)},className:""+(T?"w-full mt-2":""),children:"Reset"}),(0,X.jsx)(w.$,{type:"submit",disabled:"loading"===b,className:""+(T?"w-full":""),children:"loading"===b?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Readmitting...":"Registering..."]}):m?"Readmit Patient":"Register Patient"})]})})]}),(0,X.jsx)(Ex,{isOpen:k,onClose:()=>P(!1),services:se(),selectedServices:[...S.paymentInfo.services,S.admission.assignedRoom?"room-charge":""].filter(Boolean),onServicesChange:e=>{const t=e.filter((e=>"room-charge"!==e.id));E((e=>({...e,admission:{...e.admission,operationName:O.filter((e=>"Surgery"===e.category&&t.some((t=>t.id===e._id)))).map((e=>e.name)).join(",")},paymentInfo:{...e.paymentInfo,services:t}})))}})]})}),$&&N&&(0,X.jsx)(el,{isOpen:$,setShowBillModal:U,billData:z,completedBill:q,hospitalInfo:N})]})}const Tx=[{name:"Cash"},{name:"UPI"},{name:"Card"},{name:"Insurance"}],kx={name:"",registrationNumber:"",dateOfBirth:"",age:"",gender:"",contactNumber:"",email:"",address:"",bloodType:"",guardianName:"",relation:"",visit:{consultationType:"",reasonForVisit:"",vitals:{bloodPressure:"",heartRate:"",temperature:"",weight:"",height:"",oxygenSaturation:"",respiratoryRate:""},referredBy:"",bookingDate:"",timeSlot:{start:"",end:""},guardianName:"",relation:"",department:"",doctor:{id:"",name:""},insuranceDetails:{provider:"",policyNumber:""},totalAmount:"",discount:"",paymentMethod:[],amountPaid:""}},Ax={},Px=e=>{var n;let{open:r,setOpen:a,patientData:s}=e;const{editPatientStatus:i,visitDetailsFull:o,visitDetailsFullStatus:l}=(0,j.d4)((e=>e.patients)),c=(0,j.wA)(),{toast:d}=(0,H.dj)(),u=(0,j.d4)((e=>e.staff.doctors)),m=(0,j.d4)((e=>e.departments.departments)),[h,p]=(0,t.useState)(kx),[f,v]=(0,t.useState)(Ax),[g,x]=(0,t.useState)([]),[y,N]=(0,t.useState)([]),[_,S]=(0,t.useState)([]),[E,D]=(0,t.useState)([]);(0,t.useEffect)((()=>{r&&null!==s&&void 0!==s&&s.visitID&&null!==s&&void 0!==s&&s.type?c((0,Be.h2)({id:s.visitID,type:s.type})).unwrap().then((e=>{p((t=>{var n,r,a,s,i,o,l,c;const d={...kx.visit};if(["consultationType","reasonForVisit","vitals","referredBy","bookingDate","timeSlot","guardianName","relation","department","doctor","insuranceDetails"].forEach((t=>{if(void 0!==e[t]&&null!==e[t])if("doctor"===t)"object"===typeof e.doctor&&null!==e.doctor?d.doctor={id:e.doctor._id||e.doctor.id||"",name:e.doctor.name||""}:d.doctor={id:"",name:""};else if("department"===t)d.department=e.department||"";else if("vitals"===t)d.vitals={...kx.visit.vitals,...e.vitals||{}};else if("insuranceDetails"===t)d.insuranceDetails={...kx.visit.insuranceDetails,...e.insuranceDetails||{}};else if("timeSlot"===t)d.timeSlot={...kx.visit.timeSlot,...e.timeSlot||{}};else if("bookingDate"===t){let t=e.bookingDate;if(t)if(/^\d{4}-\d{2}-\d{2}$/.test(t))d.bookingDate=t;else{const e=new Date(t);isNaN(e.getTime())?d.bookingDate="":d.bookingDate=e.toISOString().split("T")[0]}else d.bookingDate=""}else d[t]=e[t]})),e.bills&&e.bills.services&&e.bills.services.length>0){const t=e.bills.services[e.bills.services.length-1];if(d.totalAmount=t.totalAmount||0,d.discount=t.additionalDiscount||0,d.amountPaid=t.amountPaid||0,d.billId=t._id,t.payments&&t.payments.length>0){const e=t.payments.map((e=>({_id:e._id,method:e.paymentMethod,amount:e.amount})));d.paymentMethod=e,D(e)}else d.paymentMethod=[],D([])}else d.totalAmount=0,d.discount=0,d.amountPaid=0,d.paymentMethod=[],D([]);return{...t,name:e.name||(null===(n=e.patient)||void 0===n?void 0:n.name)||"",dateOfBirth:e.dateOfBirth||(null===(r=e.patient)||void 0===r?void 0:r.dateOfBirth)||"",age:e.age||(null===(a=e.patient)||void 0===a?void 0:a.age)||"",gender:e.gender||(null===(s=e.patient)||void 0===s?void 0:s.gender)||"",contactNumber:e.contactNumber||(null===(i=e.patient)||void 0===i?void 0:i.contactNumber)||"",email:e.email||(null===(o=e.patient)||void 0===o?void 0:o.email)||"",address:e.address||(null===(l=e.patient)||void 0===l?void 0:l.address)||"",bloodType:e.bloodType||(null===(c=e.patient)||void 0===c?void 0:c.bloodType)||"",registrationNumber:e.registrationNumber||"",visit:d}})),x([]),N([]),S([])})).catch((()=>{p(kx),x([]),N([]),S([])})):r||(p(kx),v({}),x([]),N([]),S([]))}),[r,null===s||void 0===s?void 0:s.visitID,null===s||void 0===s?void 0:s.type]);const T=()=>{a(!1),p(kx),v({})},k=(0,t.useCallback)((e=>{const{id:t,value:n}=e.target;p((e=>{const r=t.split(".");let a={...e},s=a;for(let t=0;t<r.length-1;t++)s[r[t]]={...s[r[t]]},s=s[r[t]];return s[r[r.length-1]]=n,a}))}),[]),P=(0,t.useCallback)(((e,t)=>k({target:{id:e,value:t}})),[k]);(0,t.useEffect)((()=>{const e=h.visit.paymentMethod.reduce(((e,t)=>e+(t.amount?parseFloat(t.amount):0)),0);p((t=>({...t,visit:{...t.visit,amountPaid:e}})))}),[h.visit.paymentMethod]);const O=(e,t,n)=>{const r=h.visit.paymentMethod[n];r._id?N((n=>{const a=n.find((e=>e._id===r._id)),s=E.find((e=>e._id===r._id));return e!==s.method||t!==s.amount?a?n.map((n=>n._id===r._id?{...n,method:e,amount:Number(t)}:n)):[...n,{_id:r._id,method:e,amount:Number(t)}]:n.filter((e=>e._id!==r._id))})):S((n=>n.find((e=>e.tempId===r.tempId))?n.map((n=>n.tempId===r.tempId?{...n,method:e,amount:Number(t)}:n)):[...n,{method:e,amount:Number(t),tempId:r.tempId}])),p((r=>{const a=[...r.visit.paymentMethod];return a[n]={...a[n],method:e,amount:Number(t)},{...r,visit:{...r.visit,paymentMethod:a}}}))};return(0,X.jsx)(Io.lG,{open:r,onOpenChange:a,children:(0,X.jsxs)(Io.Cf,{className:"md:max-w-[1000px] md:min-h-[60vh] md:max-h-[60vh] overflow-y-auto md:overflow-y-hidden w-[95vw] p-4 md:p-6 gap-0 md:gap-4 rounded-lg",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Edit Patient"}),(0,X.jsx)(Io.rr,{children:"Edit the patient's information and visit details."})]}),(0,X.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{var e,t;const n={};return h.name||(n.name="Full name is required"),h.gender||(n.gender="Gender is required"),h.contactNumber||(n.contactNumber="Contact number is required"),h.dateOfBirth||h.age||(n.age="Age or Date of birth is required"),h.visit.department||(n.department="Department selection is required"),null!==(e=h.visit)&&void 0!==e&&null!==(t=e.doctor)&&void 0!==t&&t.id||(n.doctor="Doctor selection is required"),v(n),0===Object.keys(n).length})())try{var t;const e=null===s||void 0===s||null===(t=s.patient)||void 0===t?void 0:t._id,n={...h,type:null===s||void 0===s?void 0:s.type,visitID:null===s||void 0===s?void 0:s.visitID,visit:{...h.visit,deletedPayments:g,updatedPayments:y.map((e=>({_id:e._id,method:e.method,amount:Number(e.amount)}))),newPayments:_.map((e=>({method:e.method,amount:Number(e.amount)})))}};await c((0,Be.C$)({patientData:n,patientID:e})).unwrap(),d({variant:"success",title:"Success",description:"Patient record has been updated successfully"}),T()}catch(n){d({title:"Error",description:n.message||"Failed to update patient",variant:"destructive"})}},className:"h-full md:h-[calc(70vh-100px)]",children:[(0,X.jsxs)(yl,{defaultValue:"basic-info",className:"w-full",children:[(0,X.jsxs)(bl,{className:"grid w-full grid-cols-3",children:[(0,X.jsx)(jl,{value:"basic-info",children:"Basic Information"}),(0,X.jsx)(jl,{value:"vitals",children:"Vitals"}),(0,X.jsx)(jl,{value:"insurance",children:"Insurance"})]}),(0,X.jsx)(wl,{value:"basic-info",children:(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,X.jsx)("div",{className:"space-y-4",children:(0,X.jsx)(hx,{formData:h,handleInputChange:k,handleSelectChange:P,errors:f,searchDisabled:!0})}),(0,X.jsx)("div",{className:"space-y-4",children:(0,X.jsx)(px,{formData:h,handleInputChange:k,handleSelectChange:P,errors:f})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(mx,{id:"visit.department",value:h.visit.department,label:"Department",onValueChange:e=>P("visit.department",e),error:f.department,children:m.map((e=>(0,X.jsx)(A.eb,{value:e.name,children:e.name},e._id)))}),(0,X.jsx)(mx,{id:"visit.doctor",label:"Doctor",value:h.visit.doctor.id,onValueChange:e=>{const t=u.find((t=>t._id===e));P("visit.doctor",{id:e,name:null===t||void 0===t?void 0:t.name})},error:f.doctor,children:u.map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.name},e._id)))})]}),(0,X.jsx)(Nl,{label:"Referred By",id:"visit.referredBy",value:h.visit.referredBy,onChange:k,error:f.referredBy}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsx)(Nl,{label:"Total Fee (\u20b9)",id:"visit.totalAmount",value:h.visit.totalAmount,onChange:k,error:f.totalAmount}),(0,X.jsx)(Nl,{label:"Amount Paid (\u20b9)",value:(null===(n=h.visit.amountPaid)||void 0===n?void 0:n.toLocaleString("en-IN"))||"0",disabled:!0,className:"bg-gray-50"})]}),(0,X.jsxs)("div",{className:"",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)(Ks.J,{children:"Payment History"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=Date.now().toString();p((t=>({...t,visit:{...t.visit,paymentMethod:[...t.visit.paymentMethod,{method:"Cash",amount:"",tempId:e}]}}))),S((t=>[...t,{method:"Cash",amount:"",tempId:e}]))},className:"h-8",children:"Add Payment"})]}),(0,X.jsx)("div",{className:"border rounded-md",children:(0,X.jsx)(b.F,{className:"h-[50px]",children:(0,X.jsx)("div",{className:"p-2 space-y-2",children:h.visit.paymentMethod.map(((e,t)=>(0,X.jsxs)("div",{className:"flex items-center gap-1",children:[(0,X.jsxs)(A.l6,{value:e.method,onValueChange:n=>{O(n,e.amount,t)},children:[(0,X.jsx)(A.bq,{className:"w-[120px] h-8 text-sm",children:(0,X.jsx)(A.yv,{placeholder:"Method"})}),(0,X.jsx)(A.gC,{children:Tx.map((e=>(0,X.jsx)(A.eb,{value:e.name,className:"text-sm",children:e.name},e.name)))})]}),(0,X.jsx)(Vn.p,{type:"number",value:e.amount,onChange:n=>{O(e.method,n.target.value,t)},className:"w-[120px] h-8 text-sm",placeholder:"Amount"}),(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>{(e=>{const t=h.visit.paymentMethod[e];t._id?(x((e=>[...e,t._id])),N((e=>e.filter((e=>e._id!==t._id))))):S((e=>e.filter((e=>e.tempId!==t.tempId)))),p((t=>({...t,visit:{...t.visit,paymentMethod:t.visit.paymentMethod.filter(((t,n)=>n!==e))}})))})(t)},className:"h-8 w-8 p-0",children:(0,X.jsx)(C.A,{className:"h-3.5 w-3.5 text-red-500"})})]},t)))})})})]})]})]})}),(0,X.jsx)(wl,{value:"vitals",children:(0,X.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(0,X.jsx)(fx,{formData:h,handleSelectChange:P,errors:f})})}),(0,X.jsx)(wl,{value:"insurance",children:(0,X.jsx)(vx,{formData:h.visit,handleSelectChange:P,errors:f})})]}),(0,X.jsxs)(Io.Es,{className:"mt-4",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:T,type:"button",children:"Cancel"}),(0,X.jsx)(w.$,{type:"submit",disabled:"loading"===i,children:"loading"===i?"Saving...":"Save changes"})]})]})]})})},Ox=[{name:"Cash"},{name:"UPI"},{name:"Card"},{name:"Insurance"}],Rx={patient:{name:"",registrationNumber:"",dateOfBirth:"",age:"",gender:"",contactNumber:"",address:"",bloodType:""},admission:{department:"",assignedDoctor:{_id:"",name:""},operationName:"",referredBy:"",assignedRoom:"",assignedBed:"",diagnosis:"",ipdNumber:"",conditionOnAdmission:"",vitals:{admission:{bloodPressure:"",heartRate:"",temperature:"",oxygenSaturation:"",respiratoryRate:"",weight:"",height:""},discharge:{bloodPressure:"",heartRate:"",temperature:"",oxygenSaturation:"",respiratoryRate:""}},bookingDate:"",bookingTime:"",timeSlot:{start:"",end:""},insuranceDetails:{provider:"",policyNumber:""},guardianName:"",relation:""},bill:{billId:null,services:[],subtotal:"0",additionalDiscount:"0",totalAmount:"0",amountPaid:"",paymentMethod:[]}};function Mx(e){var n,r,a,s,i,o,l,c,d,u;let{open:m,onOpenChange:h,admissionData:p}=e;const f=(0,j.wA)(),{toast:v}=(0,H.dj)(),g=Ko("(max-width: 640px)"),{departments:x}=(0,j.d4)((e=>e.departments)),{rooms:y}=(0,j.d4)((e=>e.rooms)),{doctors:N}=(0,j.d4)((e=>e.staff)),{services:_,servicesStatus:S}=(0,j.d4)((e=>e.services)),{ipdAdmissionDetailsFull:E,ipdAdmissionDetailsFullStatus:D,editIPDAdmissionStatus:T}=(0,j.d4)((e=>e.patients)),[k,P]=(0,t.useState)(Rx),[O,R]=(0,t.useState)({}),[I,L]=(0,t.useState)([]),[F,B]=(0,t.useState)([]),[W,$]=(0,t.useState)([]),[U,z]=(0,t.useState)(!1),[V,q]=(0,t.useState)([]);(0,t.useEffect)((()=>{m&&null!==p&&void 0!==p&&p._id?f((0,Be.sw)({admissionId:p._id})):m||(P(Rx),R({}),L([]),B([]),$([]),q([]))}),[m,null===p||void 0===p?void 0:p._id,f]),(0,t.useEffect)((()=>{if("succeeded"===D&&E){var e,t,n;const a=E,s=a.patient||{},i={name:s.name||"",registrationNumber:a.registrationNumber||s.registrationNumber||"",dateOfBirth:s.dateOfBirth?new Date(s.dateOfBirth).toISOString().split("T")[0]:"",age:s.age||"",gender:s.gender||"",contactNumber:s.contactNumber||"",address:s.address||"",bloodType:s.bloodType||""},o={department:a.department||"",assignedDoctor:a.assignedDoctor?{_id:a.assignedDoctor._id,name:a.assignedDoctor.name}:{_id:"",name:""},operationName:a.operationName||"",referredBy:a.referredBy||"",assignedRoom:(null===(e=a.assignedRoom)||void 0===e?void 0:e._id)||"",assignedBed:a.assignedBed||"",diagnosis:a.diagnosis||"",ipdNumber:a.ipdNumber||"",conditionOnAdmission:a.conditionOnAdmission||"",bookingDate:a.bookingDate?new Date(a.bookingDate).toISOString().split("T")[0]:"",bookingTime:a.bookingTime||"",guardianName:a.guardianName||"",relation:a.relation||"",vitals:{...Rx.admission.vitals,admission:{...Rx.admission.vitals.admission,...(null===(t=a.vitals)||void 0===t?void 0:t.admission)||a.vitals||{}},discharge:{...Rx.admission.vitals.discharge,...(null===(n=a.vitals)||void 0===n?void 0:n.discharge)||{}}},insuranceDetails:{...Rx.admission.insuranceDetails,...a.insuranceDetails||{}},timeSlot:{...Rx.admission.timeSlot,...a.timeSlot||{}}},l={...Rx.bill};if(a.bills&&a.bills.services&&a.bills.services.length>0){var r;const e=a.bills.services[a.bills.services.length-1];l.billId=e._id,l.services=(null===(r=e.services)||void 0===r?void 0:r.map((e=>({serviceId:e.serviceId||e._id||e.id,name:e.name,quantity:e.quantity||1,rate:e.rate||0,category:e.category||"Other",date:e.date?new Date(e.date).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0]}))))||[];const t=l.services.reduce(((e,t)=>e+Number(t.rate)*Number(t.quantity)),0);if(0===l.services.length)l.totalAmount=(e.totalAmount||0).toString(),l.subtotal=l.totalAmount,l.additionalDiscount="0";else{l.subtotal=t.toString();const n=void 0!==e.totalAmount&&null!==e.totalAmount?Number(e.totalAmount):t;l.totalAmount=n.toString(),l.additionalDiscount=Math.max(0,t-n).toString()}if(e.payments&&e.payments.length>0){const t=e.payments.map((e=>({_id:e._id,method:e.paymentMethod,amount:e.amount.toString()})));l.paymentMethod=t,L(t.map((e=>({...e}))))}else l.paymentMethod=[],L([]);l.amountPaid=l.paymentMethod.reduce(((e,t)=>e+(Number(t.amount)||0)),0).toString()}else l.paymentMethod=[],L([]),l.amountPaid="0",l.services=[],l.subtotal="0",l.additionalDiscount="0",l.totalAmount="0";P({patient:i,admission:{...o},bill:l}),B([]),$([]),q([])}}),[D,E]),(0,t.useEffect)((()=>{m&&(f(Qe()),"idle"===S&&f(lt()))}),[m,f,S]);const G=(0,t.useCallback)((e=>{const{id:t,value:n,type:r,checked:a}=e.target,[s,...i]=t.split("."),o=i.join(".");P((e=>{const t={...e};let i=t[s];const l=o.split(".");for(let n=0;n<l.length-1;n++)i[l[n]]||(i[l[n]]={}),i=i[l[n]];if(i[l[l.length-1]]="checkbox"===r?a:n,"bill"===s){if("totalAmount"===l[0]){const e=n,r=Number(e)||0;let a=t.bill.services.reduce(((e,t)=>e+Number(t.rate)*Number(t.quantity)),0);if(0===t.bill.services.length)t.bill.subtotal=e,t.bill.additionalDiscount="0";else{t.bill.subtotal=a.toString();const e=Math.max(0,a-r);t.bill.additionalDiscount=e.toString()}t.bill.totalAmount=e}"paymentMethod"===l[0]&&"amount"===l[2]&&(t.bill.amountPaid=t.bill.paymentMethod.reduce(((e,t)=>e+(Number(t.amount)||0)),0).toString())}return t}))}),[]),K=(0,t.useCallback)(((e,t)=>{G({target:{id:e,value:t}})}),[G]),Y=(0,t.useCallback)((e=>{const t=e.target.value,n=t?(()=>{const e=new Date,n=new Date(t);let r=e.getFullYear()-n.getFullYear(),a=e.getMonth()-n.getMonth();return a<0&&(r-=1,a+=12),`${r}-${a}`})():"";G({target:{id:"patient.dateOfBirth",value:t}}),G({target:{id:"patient.age",value:n}})}),[G]),Z=(0,t.useCallback)((e=>{const t=e.target.value;G({target:{id:"patient.age",value:t}})}),[G]),J=(e,t,n)=>{const r=[...k.bill.paymentMethod],a={...r[e]};if(a[t]=n,r[e]=a,a._id){const e=I.find((e=>e._id===a._id));if(!e||e.method===a.method&&e.amount===a.amount)e&&e.method===a.method&&e.amount===a.amount&&$(W.filter((e=>e._id!==a._id)));else{const e=W.findIndex((e=>e._id===a._id));if(e>-1){const t=[...W];t[e]={_id:a._id,method:a.method,amount:Number(a.amount)},$(t)}else $([...W,{_id:a._id,method:a.method,amount:Number(a.amount)}])}}else{const e=V.findIndex((e=>e.tempId===a.tempId));if(e>-1){const t=[...V];t[e]={tempId:a.tempId,method:a.method,amount:Number(a.amount)},q(t)}}const s=r.reduce(((e,t)=>e+(Number(t.amount)||0)),0);P((e=>({...e,bill:{...e.bill,paymentMethod:r,amountPaid:s.toString()}})))},Q=(0,t.useCallback)((()=>_.filter((e=>"Surgery"===e.category)).map((e=>({...e,isRoom:!1})))),[_]);return"loading"===D&&m?(0,X.jsx)(Io.lG,{open:m,onOpenChange:h,children:(0,X.jsx)(Io.Cf,{className:"sm:max-w-[425px]",children:(0,X.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,X.jsx)(ti,{className:"h-8 w-8 animate-spin text-primary"})})})}):(0,X.jsx)(Io.lG,{open:m,onOpenChange:h,children:(0,X.jsxs)(Io.Cf,{className:` ${g?"w-[95vw] p-4 rounded-lg gap-0 ":"max-w-[1000px]"} h-[${g?"80vh":"70vh"}] overflow-y-auto px-4`,children:[(0,X.jsxs)(Io.c7,{className:"mb-4 md:mb-0",children:[(0,X.jsx)(Io.L3,{children:"Edit IPD Patient Details"}),(0,X.jsx)(Io.rr,{className:g?"hidden":"",children:"Modify the patient's IPD admission, billing, and personal information."})]}),(0,X.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{var e;const t={};return k.patient.name||(t.name="Full name is required"),k.patient.gender||(t.gender="Gender is required"),k.patient.contactNumber||(t.contactNumber="Contact number is required"),k.patient.dateOfBirth||k.patient.age||(t.age="Age or Date of birth is required"),k.admission.department||(t.department="Department is required"),null!==(e=k.admission.assignedDoctor)&&void 0!==e&&e._id||(t.doctor="Doctor is required"),k.admission.assignedRoom&&!k.admission.assignedBed&&(t["admission.assignedBed"]="Bed is required"),R(t),0===Object.keys(t).length})()){var t;const e={patient:k.patient,admission:{...k.admission,assignedDoctor:(null===(t=k.admission.assignedDoctor)||void 0===t?void 0:t._id)||k.admission.assignedDoctor},bill:{billId:k.bill.billId,services:k.bill.services.map((e=>({serviceId:e.serviceId,name:e.name,quantity:Number(e.quantity)||1,rate:Number(e.rate)||0,category:e.category,date:e.date}))),subtotal:Number(k.bill.subtotal)||0,additionalDiscount:Number(k.bill.additionalDiscount)||0,totalAmount:Number(k.bill.totalAmount),amountPaid:Number(k.bill.amountPaid)},payments:{deletedPayments:F,updatedPayments:W.map((e=>({_id:e._id,method:e.method,amount:Number(e.amount)}))),newPayments:V.map((e=>({method:e.method,amount:Number(e.amount)})))}};try{await f((0,Be.FG)({admissionId:p._id,data:e})).unwrap(),v({title:"Success",description:"IPD record updated successfully.",variant:"success"}),h(!1)}catch(n){v({title:"Error",description:n.message||"Failed to update IPD record.",variant:"destructive"})}}},className:`space-y-4 h-[calc(${g?"80vh":"70vh"}-115px)]`,children:[(0,X.jsxs)(yl,{defaultValue:"basic-info",className:"w-full",children:[(0,X.jsxs)(bl,{className:"grid w-full grid-cols-3",children:[(0,X.jsx)(jl,{value:"basic-info",children:g?"Basic":"Basic Info"}),(0,X.jsx)(jl,{value:"vitals",children:"Vitals"}),(0,X.jsx)(jl,{value:"insurance",children:"Insurance"})," "]}),(0,X.jsx)(wl,{value:"basic-info",children:(0,X.jsxs)("div",{className:`grid ${g?"grid-cols-1":"grid-cols-2 lg:grid-cols-3"} mt-4 gap-4`,children:[(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)(Nl,{id:"patient.name",label:"Full Name",value:k.patient.name,onChange:G,error:O.name}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(Nl,{id:"patient.age",label:"Age",type:"text",value:k.patient.age,onChange:Z,error:O.age}),(0,X.jsx)(Nl,{id:"patient.dateOfBirth",label:"Date of Birth",type:"date",value:k.patient.dateOfBirth,onChange:Y,tabIndex:-1})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,X.jsx)(Nl,{id:"patient.registrationNumber",label:"UHID Number",value:k.patient.registrationNumber,onChange:G,disabled:!0}),(0,X.jsx)(Nl,{id:"admission.ipdNumber",label:"IPD Number",value:k.admission.ipdNumber,onChange:G,disabled:!0})]}),(0,X.jsxs)(A.l6,{id:"patient.gender",value:k.patient.gender,onValueChange:e=>K("patient.gender",e),children:[(0,X.jsx)(A.bq,{className:O.gender?"border-red-500":"",children:(0,X.jsx)(A.yv,{placeholder:"Gender"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Male",children:"Male"}),(0,X.jsx)(A.eb,{value:"Female",children:"Female"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]})]}),O.gender&&(0,X.jsx)("p",{className:"text-xs text-red-500",children:O.gender}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(Nl,{id:"admission.bookingDate",label:"Booking Date",type:"date",value:k.admission.bookingDate,onChange:G,tabIndex:-1}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Vn.p,{type:"time",id:"admission.bookingTime",value:null===(n=k.admission.bookingTime)||void 0===n?void 0:n.split(" ")[0],onChange:e=>{const t=(0,M.IF)(e.target.value);G({target:{id:"admission.bookingTime",value:t}})},tabIndex:-1,className:"peer pl-2 pt-2 pb-2 block w-full border rounded-md"}),(0,X.jsx)(Ks.J,{htmlFor:"admission.bookingTime",className:"absolute text-xs transform -translate-y-3 top-1 z-10 origin-[0] left-2 px-1 bg-white text-gray-500",children:"Booking Time"})]})]})]}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)(Nl,{id:"patient.contactNumber",label:"Phone",value:k.patient.contactNumber,onChange:G,error:O.contactNumber}),(0,X.jsx)(Xo.T,{id:"patient.address",placeholder:"Address",value:k.patient.address,onChange:G,className:"min-h-9 h-9 no-scrollbar"}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsxs)(mx,{id:"admission.relation",label:"Guardian Relation",value:k.admission.relation,onValueChange:e=>K("admission.relation",e),children:[(0,X.jsx)(A.eb,{value:"Father",children:"Father"}),(0,X.jsx)(A.eb,{value:"Mother",children:"Mother"}),(0,X.jsx)(A.eb,{value:"Husband",children:"Husband"}),(0,X.jsx)(A.eb,{value:"Wife",children:"Wife"}),(0,X.jsx)(A.eb,{value:"Guardian",children:"Guardian"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]}),(0,X.jsx)(Nl,{id:"admission.guardianName",label:"Guardian Name",value:k.admission.guardianName,onChange:G})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(mx,{id:"admission.assignedRoom",label:"Assigned Room",value:k.admission.assignedRoom,onValueChange:e=>{K("admission.assignedRoom",e)},children:y.map((e=>(0,X.jsxs)(A.eb,{value:e._id,children:[e.roomNumber," - ",e.type]},e._id)))}),(0,X.jsx)(mx,{id:"admission.assignedBed",label:"Assigned Bed",value:k.admission.assignedBed,onValueChange:e=>{e&&K("admission.assignedBed",e)},disabled:!k.admission.assignedRoom,children:k.admission.assignedRoom&&(null===(r=y.find((e=>{var t,n,r;return(null===(t=e._id)||void 0===t?void 0:t.toString())===(null===(n=k.admission)||void 0===n||null===(r=n.assignedRoom)||void 0===r?void 0:r.toString())})))||void 0===r?void 0:r.beds.filter((e=>"Occupied"!==e.status||e._id===k.admission.assignedBed)).map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.bedNumber},e._id))))})]})]}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(mx,{id:"admission.department",label:"Department",value:k.admission.department,onValueChange:e=>K("admission.department",e),error:O.department,children:x.map((e=>(0,X.jsx)(A.eb,{value:e.name,children:e.name},e._id)))}),(0,X.jsx)(mx,{id:"admission.assignedDoctor",label:"Consulting Doctor",value:null===(a=k.admission.assignedDoctor)||void 0===a?void 0:a._id,onValueChange:e=>{const t=N.find((t=>t._id===e));K("admission.assignedDoctor",t?{_id:t._id,name:t.name}:{_id:"",name:""})},error:O.doctor,children:N.map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.name},e._id)))})]}),(0,X.jsx)(Nl,{id:"admission.referredBy",label:"Referred By",value:k.admission.referredBy,onChange:G}),(0,X.jsxs)("div",{className:"grid grid-cols-3 gap-1",children:[(0,X.jsx)(Nl,{id:"bill.totalAmount",label:"Total (\u20b9)",value:(null===(s=k.bill.totalAmount)||void 0===s?void 0:s.toLocaleString("en-IN"))||"0",onChange:G,className:"font-semibold"}),(0,X.jsx)(Nl,{label:"Paid(\u20b9)",value:(null===(i=k.bill.amountPaid)||void 0===i?void 0:i.toLocaleString("en-IN"))||"0",disabled:!0,className:"bg-gray-100"}),(0,X.jsx)(w.$,{variant:"outline",className:`\n                                 ${O["admission.operationName"]?"border-red-500 text-red-500 hover:bg-red-50 ":"border-primary text-primary"}\n                               `,onClick:e=>{e.preventDefault(),z(!0)},size:"sm",children:null!==(o=k.admission)&&void 0!==o&&o.operationName?(null===(l=k.admission)||void 0===l?void 0:l.operationName.length)>15?`${null===(c=k.admission)||void 0===c?void 0:c.operationName.slice(0,15)}...`:null===(d=k.admission)||void 0===d?void 0:d.operationName:"Select Operations"})]}),(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)(Ks.J,{className:"text-sm",children:"Payment History"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=Date.now().toString(),t={tempId:e,method:"Cash",amount:""};P((e=>({...e,bill:{...e.bill,paymentMethod:[...e.bill.paymentMethod,t]}}))),q([...V,{tempId:e,method:"Cash",amount:0}])},className:" px-2 text-xs",children:"Add Payment"})]}),(0,X.jsx)("div",{className:"border rounded-md overflow-y-auto",children:(0,X.jsx)(b.F,{className:"h-[50px]",children:(0,X.jsxs)("div",{className:"p-2 space-y-1.5",children:[k.bill.paymentMethod.map(((e,t)=>(0,X.jsxs)("div",{className:"flex items-center gap-1",children:[(0,X.jsxs)(A.l6,{value:e.method,onValueChange:e=>J(t,"method",e),children:[(0,X.jsx)(A.bq,{className:"w-[100px] h-7 text-xs",children:(0,X.jsx)(A.yv,{placeholder:"Method"})}),(0,X.jsx)(A.gC,{children:Ox.map((e=>(0,X.jsx)(A.eb,{value:e.name,className:"text-xs",children:e.name},e.name)))})]}),(0,X.jsx)(Vn.p,{type:"number",value:e.amount,onChange:e=>J(t,"amount",e.target.value),className:"w-[100px] h-7 text-xs",placeholder:"Amount"}),(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>(e=>{const t=k.bill.paymentMethod[e];t._id?(B([...F,t._id]),$(W.filter((e=>e._id!==t._id)))):q(V.filter((e=>e.tempId!==t.tempId)));const n=k.bill.paymentMethod.filter(((t,n)=>n!==e)),r=n.reduce(((e,t)=>e+(Number(t.amount)||0)),0);P((e=>({...e,bill:{...e.bill,paymentMethod:n,amountPaid:r.toString()}})))})(t),className:"h-7 w-7 p-0",children:(0,X.jsx)(C.A,{className:"h-3 w-3 text-red-500"})})]},e._id||e.tempId))),0===k.bill.paymentMethod.length&&(0,X.jsx)("p",{className:"text-xs text-center text-gray-500 p-2",children:"No payments recorded."})]})})})]})]})}),(0,X.jsxs)(wl,{value:"vitals",children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,X.jsx)(Xo.T,{id:"admission.diagnosis",placeholder:"Diagnosis (Optional)",value:k.admission.diagnosis,onChange:G}),(0,X.jsx)(Xo.T,{id:"admission.conditionOnAdmission",placeholder:"Condition on Admission (Optional)",value:k.admission.conditionOnAdmission,onChange:G})]}),(0,X.jsx)("h4",{className:"font-semibold text-sm mt-4",children:"Admission Vitals"}),(0,X.jsxs)("div",{className:`grid ${g?"grid-cols-2":"grid-cols-3 lg:grid-cols-4"} mt-4 gap-x-4 gap-y-6`,children:[(0,X.jsx)(Nl,{id:"admission.vitals.admission.weight",label:"Weight (kg)",value:k.admission.vitals.admission.weight,onChange:G}),(0,X.jsx)(Nl,{id:"admission.vitals.admission.height",label:"Height (cm)",value:k.admission.vitals.admission.height,onChange:G}),(0,X.jsx)(Nl,{id:"admission.vitals.admission.bloodPressure",label:"Blood Pressure",value:k.admission.vitals.admission.bloodPressure,onChange:G}),(0,X.jsx)(Nl,{id:"admission.vitals.admission.heartRate",label:"Heart Rate",value:k.admission.vitals.admission.heartRate,onChange:G}),(0,X.jsx)(Nl,{id:"admission.vitals.admission.temperature",label:"Temperature (\xb0F)",value:k.admission.vitals.admission.temperature,onChange:G}),(0,X.jsx)(Nl,{id:"admission.vitals.admission.oxygenSaturation",label:"Oxygen Sat. (%)",value:k.admission.vitals.admission.oxygenSaturation,onChange:G}),(0,X.jsx)(Nl,{id:"admission.vitals.admission.respiratoryRate",label:"Respiratory Rate",value:k.admission.vitals.admission.respiratoryRate,onChange:G})]})]}),(0,X.jsx)(wl,{value:"insurance",children:(0,X.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,X.jsx)(Nl,{id:"admission.insuranceDetails.provider",label:"Insurance Provider (Optional)",value:k.admission.insuranceDetails.provider,onChange:G}),(0,X.jsx)(Nl,{id:"admission.insuranceDetails.policyNumber",label:"Policy Number (Optional)",value:k.admission.insuranceDetails.policyNumber,onChange:G})]})})]}),(0,X.jsx)(Io.Es,{className:"mt-4 "+(g?"mb-8":""),children:(0,X.jsxs)("div",{className:`w-full flex ${g?"flex-col-reverse space-y-2":"flex-row justify-end space-x-2"} `,children:[(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:()=>{if(E){var e;const n=E,r=n.patient||{},a={...Rx.admission,...n},s={...Rx.bill},i={name:r.name||"",registrationNumber:n.registrationNumber||r.registrationNumber||"",dateOfBirth:r.dateOfBirth?new Date(r.dateOfBirth).toISOString().split("T")[0]:"",age:r.age||"",gender:r.gender||"",contactNumber:r.contactNumber||"",address:r.address||"",bloodType:r.bloodType||""};if(a.department=n.department||"",a.assignedDoctor=n.assignedDoctor?{_id:n.assignedDoctor._id,name:n.assignedDoctor.name}:{_id:"",name:""},a.operationName=n.operationName||"",a.referredBy=n.referredBy||"",a.assignedRoom=(null===(e=n.assignedRoom)||void 0===e?void 0:e._id)||n.assignedRoom||"",a.assignedBed=n.assignedBed||"",a.diagnosis=n.diagnosis||"",a.ipdNumber=n.ipdNumber||"",a.conditionOnAdmission=n.conditionOnAdmission||"",a.bookingDate=n.bookingDate?new Date(n.bookingDate).toISOString().split("T")[0]:"",a.bookingTime=n.bookingTime||"",a.guardianName=n.guardianName||"",a.relation=n.relation||"",n.vitals&&(a.vitals.admission={...Rx.admission.vitals.admission,...n.vitals.admission||n.vitals}),n.insuranceDetails&&(a.insuranceDetails={...Rx.admission.insuranceDetails,...n.insuranceDetails}),n.timeSlot&&(a.timeSlot={...Rx.admission.timeSlot,...n.timeSlot}),n.bills&&n.bills.services&&n.bills.services.length>0){var t;const e=n.bills.services[n.bills.services.length-1];s.billId=e._id,s.services=(null===(t=e.services)||void 0===t?void 0:t.map((e=>({serviceId:e.serviceId||e._id||e.id,name:e.name,quantity:e.quantity||1,rate:e.rate||0,category:e.category||"Other",date:e.date?new Date(e.date).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0]}))))||[];const r=s.services.reduce(((e,t)=>e+Number(t.rate)*Number(t.quantity)),0);if(0===s.services.length)s.totalAmount=(e.totalAmount||0).toString(),s.subtotal=s.totalAmount,s.additionalDiscount="0";else{s.subtotal=r.toString();const t=void 0!==e.totalAmount&&null!==e.totalAmount?Number(e.totalAmount):r;s.totalAmount=t.toString(),s.additionalDiscount=Math.max(0,r-t).toString()}if(e.payments&&e.payments.length>0){const t=e.payments.map((e=>({_id:e._id,method:e.paymentMethod,amount:e.amount.toString()})));s.paymentMethod=t,L(t.map((e=>({...e}))))}else s.paymentMethod=[],L([]);s.amountPaid=s.paymentMethod.reduce(((e,t)=>e+(Number(t.amount)||0)),0).toString()}else s.paymentMethod=[],L([]),s.amountPaid="0",s.services=[],s.subtotal="0",s.additionalDiscount="0",s.totalAmount="0";P({patient:i,admission:{...a},bill:s}),R({}),B([]),$([]),q([])}else P(Rx),R({})},className:""+(g?"w-full":""),children:"Reset"}),(0,X.jsxs)(w.$,{type:"submit",disabled:"loading"===T||"loading"===D,className:""+(g?"w-full":""),children:["loading"===T||"loading"===D?(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Save Changes"]})]})})]}),(0,X.jsx)(Ex,{isOpen:U,onClose:()=>z(!1),services:Q(),selectedServices:(null===(u=k.bill.services)||void 0===u?void 0:u.map((e=>({id:e.serviceId,rate:e.rate}))))||[],onServicesChange:e=>{const t=_||[],n=e.map((e=>{const n=t.find((t=>t._id===e.id));return{serviceId:e.id,name:(null===n||void 0===n?void 0:n.name)||"Unknown Service",quantity:1,rate:e.rate,category:(null===n||void 0===n?void 0:n.category)||"Other",date:(new Date).toISOString().split("T")[0]}})),r=n.reduce(((e,t)=>e+Number(t.rate)*Number(t.quantity)),0);Number(k.bill.additionalDiscount);P((e=>({...e,bill:{...e.bill,services:n,subtotal:r.toString(),totalAmount:r.toString(),additionalDiscount:"0"}})))}})]})})}const Ix=e=>{let{isOpen:n,onOpenChange:r,patient:a,onDeleted:s}=e;const i=(0,j.wA)(),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),{toast:u}=(0,H.dj)();return n&&a?(0,X.jsx)(Ce,{open:n,onOpenChange:e=>{c||(e||l(!1),r(e))},children:(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Are you absolutely sure?"}),(0,X.jsx)(Me,{children:"This action cannot be undone and will permanently delete data."})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{disabled:c,children:"Cancel"}),(0,X.jsx)(w.$,{onClick:()=>{if(!a)return;d(!0);let e={patientId:a.patient._id};o||("OPD"===a.type?e.visitId=a._id:e.admissionId=a._id),i((0,Be.Dk)(e)).unwrap().then((()=>{r(!1),s&&s(),l(!1),u({title:"Success",description:"Patient deleted successfully",variant:"success"})})).catch((e=>{u({title:"Error",description:e.message||"Something went wrong",variant:"destructive"})})).finally((()=>{d(!1)}))},variant:"destructive",disabled:c,children:c?"Deleting...":"Delete"})]})]})}):null};function Lx(){var e,n;const r=(0,j.wA)(),s=(0,a.Zp)(),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)("All"),[d,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)("Today"),[p,f]=(0,t.useState)({from:null,to:null}),[v,g]=(0,t.useState)({from:null,to:null}),[x,y]=(0,t.useState)("OPD"),[b,N]=(0,t.useState)(!1),[S,E]=(0,t.useState)(!1),[C,D]=(0,t.useState)(!1),[A,P]=(0,t.useState)(!1),[O,R]=(0,t.useState)(null),[I,L]=(0,t.useState)(!1),[F,B]=(0,t.useState)(null),[W,$]=(0,t.useState)(!1),[U,z]=(0,t.useState)(!1),[H,V]=(0,t.useState)("All"),{opdDetails:q,opdDetailsStatus:G}=(0,j.d4)((e=>e.patients)),{doctors:K}=(0,j.d4)((e=>e.staff)),{hospitalInfo:Y}=(0,j.d4)((e=>e.hospital)),Z=Zc("(max-width: 640px)"),[J,Q]=(Zc("(max-width: 1024px)"),(0,t.useState)(!1)),ee=()=>{const e=new Date;switch(m){case"Today":return{startDate:(0,Go.GP)(e,"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(e,1),"yyyy-MM-dd")};case"Yesterday":return{startDate:(0,Go.GP)((0,Wc.e)(e,1),"yyyy-MM-dd"),endDate:(0,Go.GP)(e,"yyyy-MM-dd")};case"This Week":return{startDate:(0,Rc.k)(e,{weekStartsOn:0}).toISOString(),endDate:(0,Mc.$)(e,{weekStartsOn:0}).toISOString()};case"Custom":return p.from&&p.to?{startDate:(0,Go.GP)(p.from,"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(p.to,1),"yyyy-MM-dd")}:null;default:return null}},{patientlist:te,status:ne}=(0,j.d4)((e=>e.patients)),{bills:re,billsStatus:ae}=(0,j.d4)((e=>e.bills));(0,t.useEffect)((()=>{if("idle"===ne){let e=ee();r((0,Be.PP)(e))}}),[ne,r]),(0,t.useEffect)((()=>{"idle"===ae&&r(pt())}),[ae,r]),(0,t.useEffect)((()=>{if("Custom"!==m||"Custom"===m&&p.from&&p.to){const e=ee();r((0,Be.PP)(e))}}),[m,p,r]);const se=te.filter((e=>{var t,n;const r=null===(t=e.patient)||void 0===t?void 0:t.name.toLowerCase().includes(i.toLowerCase()),a="All"===H||(null===(n=e.doctor)||void 0===n?void 0:n._id)===H;return r&&a})),ie=e=>{const t=e.bills.services.at(-1),n=re.find((e=>e._id===t));s(`/billings/edit/${t}`,{state:{billData:n}})},oe=e=>{R(e),"OPD"===e.type?D(!0):"IPD"===e.type&&P(!0)},le=e=>{B(e),L(!0)},ce=e=>{R(e),$(!0)},de=async e=>{await r((0,Be.g_)(e._id)),z(!0)},ue=e=>{switch(e.toLowerCase()){case"admitted":return"default";case"discharged":return"secondary";case"critical":return"destructive";default:return"outline"}},me=(0,j.d4)((e=>e.templates.dischargeFormTemplateArray)),he=(0,j.d4)((e=>e.templates.dischargeFormTemplates)),pe=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"new":default:return"success";case"follow-up":return"muted"}},fe=e=>{var t,n;const r=(e=>"Discharged"===e.status&&e.formConfig?[e.formConfig]:(null===me||void 0===me?void 0:me.filter((t=>{var n,r,a,s;const i=t.isDefault,o=(null===(n=t.associatedDoctors)||void 0===n?void 0:n.map((e=>{var t;return null===(t=e._id)||void 0===t?void 0:t.toString()})))||[],l=(null===(r=e.assignedDoctor)||void 0===r||null===(a=r._id)||void 0===a?void 0:a.toString())||(null===(s=e.doctor)||void 0===s?void 0:s._id)||e.dcotor;return i||o.includes(l)})))||[])(e),a=(null===r||void 0===r?void 0:r[0])||he,i={...e,assignedDoctor:e.assignedDoctor||e.doctor&&{_id:null===(t=e.doctor)||void 0===t?void 0:t._id,name:null===(n=e.doctor)||void 0===n?void 0:n.name}};s(`/patients/discharge/${e._id}`,{state:{ignoreList:!0,dischargeData:i,selectedTemplate:a}})},ve=e=>{let{patients:t,type:n}=e;const r=(0,a.Zp)();return 0===t.length?(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,X.jsx)(qo,{className:"h-16 w-16 text-gray-400 mb-4"}),(0,X.jsx)("p",{className:"text-xl font-semibold text-gray-600",children:"No patients found"}),(0,X.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]}):(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:["OPD"===n&&(0,X.jsx)(Wo.nd,{children:"Sl. No"}),(0,X.jsx)(Wo.nd,{children:"Name"}),(0,X.jsx)(Wo.nd,{children:"UHID No"}),"IPD"===n&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Wo.nd,{children:"IPD Number"}),(0,X.jsx)(Wo.nd,{children:"Admit Date"}),(0,X.jsx)(Wo.nd,{children:"Discharge Date"}),(0,X.jsx)(Wo.nd,{children:"Status"}),(0,X.jsx)(Wo.nd,{children:"Operation"})]}),"OPD"===n&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Wo.nd,{children:"Date & Time"}),(0,X.jsx)(Wo.nd,{children:"Consultation"})]}),(0,X.jsx)(Wo.nd,{children:"Mobile"}),(0,X.jsx)(Wo.nd,{children:"Address"}),(0,X.jsx)(Wo.nd,{children:"Gender/Age"}),(0,X.jsx)(Wo.nd,{children:"Doctor"}),(0,X.jsx)(Wo.nd,{children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:t.map((e=>{var t,a,s;return(0,X.jsxs)(Wo.Hj,{children:["OPD"===n&&(0,X.jsx)(Wo.nA,{children:e.bookingNumber}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(w.$,{variant:"link",className:"p-0 h-auto font-bold text-black capitalize",onClick:()=>r(`/patient-overview/${e.patient._id}`,{state:{ID:e._id}}),children:e.patient.name})}),(0,X.jsx)(Wo.nA,{children:e.registrationNumber||"--"}),"IPD"===n&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Wo.nA,{children:e.ipdNumber||"N/A"}),(0,X.jsxs)(Wo.nA,{children:[(0,Go.GP)(new Date(e.bookingDate),"dd MMM")," ",(0,M.IF)(null===e||void 0===e?void 0:e.bookingTime)]}),(0,X.jsx)(Wo.nA,{children:e.dateDischarged?(0,Go.GP)(new Date(e.dateDischarged),"dd-MM-yyyy"):"--"}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Yo.E,{variant:ue(e.status),children:e.status})}),(0,X.jsx)(Wo.nA,{className:"font-bold",children:e.operationName?e.operationName:"--"})]}),"OPD"===n&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Wo.nA,{children:"Today"===m?(0,Go.GP)(new Date(e.createdAt),"hh:mm a"):(0,Go.GP)(new Date(e.bookingDate),"dd-MM-yyyy")}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Yo.E,{variant:pe(e.consultationType),children:(null===(t=e.consultationType)||void 0===t?void 0:t.toUpperCase())||"New"})})]}),(0,X.jsx)(Wo.nA,{children:e.patient.contactNumber}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)("div",{className:"max-w-[150px] truncate",title:e.patient.address||"--",children:e.patient.address||"--"})}),(0,X.jsx)(Wo.nA,{children:`${null===(a=e.patient.gender)||void 0===a?void 0:a.charAt(0)} / ${(0,M.F1)(e.patient.age,{yearLabel:"Y",monthLabel:"M",dayLabel:"D"})}`}),(0,X.jsx)(Wo.nA,{children:(null===(s=e.doctor)||void 0===s?void 0:s.name)||"--"}),(0,X.jsx)(Wo.nA,{children:(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,X.jsx)(lo,{className:"h-4 w-4"})})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)($s,{onClick:()=>ie(e),children:"Bills"}),(0,X.jsx)($s,{onClick:()=>oe(e),children:"Edit Patient"}),"OPD"===e.type&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)($s,{asChild:!0,children:(0,X.jsx)(yx,{patient:e})}),(0,X.jsx)($s,{onClick:()=>de(e),children:"Print OPD Token"})]}),"IPD"===e.type&&(0,X.jsx)($s,{asChild:!0,children:(0,X.jsx)(Vs,{patient:{...e,bookingTime:(0,M.IF)(null===e||void 0===e?void 0:e.bookingTime)}})}),"IPD"===e.type&&(0,X.jsx)($s,{onClick:()=>fe(e),children:"Discharged"===e.status?"View Discharge Summary":"Discharge Patient"}),(0,X.jsx)($s,{onClick:()=>ce(e),children:"Register Lab"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onClick:()=>le(e),className:"text-red-600 focus:text-red-600 focus:bg-red-50 font-semibold",children:"Delete Patient"})]})]})})]},e._id)}))})]})},ge=()=>{f(v),h("Custom")},xe=()=>{g({from:null,to:null}),h("All")},ye=e=>{var t;let{patient:n}=e;return(0,X.jsx)(k.Zp,{className:"mb-4 hover:shadow-md transition-shadow",children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"flex flex-col",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsxs)("div",{className:"flex items-center flex-grow",children:[(0,X.jsxs)("span",{className:"text-sm font-semibold text-primary mr-2",children:["#",n.bookingNumber]}),(0,X.jsx)("h3",{className:"text-lg font-semibold capitalize cursor-pointer hover:text-primary",onClick:()=>s(`/patient-overview/${n.patient._id}`,{state:{ID:n._id}}),children:n.patient.name})]}),(0,X.jsxs)("div",{className:"flex items-center",children:["IPD"===n.type&&(0,X.jsx)(Yo.E,{variant:(e=>{switch(e.toLowerCase()){case"admitted":return"default";case"discharged":return"secondary";case"critical":return"destructive";default:return"outline"}})(n.status),className:"mr-2",children:n.status}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,X.jsx)($o,{className:"h-4 w-4"})})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)($s,{onClick:()=>ie(n),children:"Bills"}),(0,X.jsx)($s,{onClick:()=>oe(n),children:"Edit Patient"}),"OPD"===n.type&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)($s,{asChild:!0,children:(0,X.jsx)(yx,{patient:n})}),(0,X.jsx)($s,{onClick:()=>de(n),children:"Print OPD Token"})]}),"IPD"===n.type&&(0,X.jsx)($s,{onClick:()=>fe(n),children:"Discharged"===n.status?"View Discharge Summary":"Discharge Patient"}),(0,X.jsx)($s,{onClick:()=>ce(n),children:"Register Lab"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onClick:()=>le(n),className:"text-red-600 focus:text-red-600 focus:bg-red-50 font-semibold",children:"Delete Patient"})]})]})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mb-3",children:[(0,X.jsxs)("div",{className:"flex items-center col-span-2",children:[(0,X.jsx)(Cc,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,X.jsxs)("span",{className:"text-sm",children:["UHID No: ",n.registrationNumber||"--"]})]}),"OPD"===n.type&&(0,X.jsxs)("div",{className:"flex items-center col-span-2",children:[(0,X.jsx)(mo,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,X.jsx)(Yo.E,{variant:pe(n.consultationType),className:"text-xs",children:n.consultationType||"Regular"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(zo,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,X.jsx)("span",{className:"text-sm",children:"Today"===m?(0,Go.GP)(new Date(n.createdAt),"hh:mm a"):(0,Go.GP)(new Date(n.bookingDate),"dd MMM yyyy")})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(lx,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,X.jsx)("span",{className:"text-sm",children:n.patient.contactNumber})]}),(0,X.jsxs)("div",{className:"flex items-center col-span-2",children:[(0,X.jsx)(cx,{className:"h-4 w-4 text-muted-foreground mr-2 shrink-0"}),(0,X.jsx)("span",{className:"text-sm truncate max-w-[200px]",title:n.patient.address||"--",children:n.patient.address||"--"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Cc,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,X.jsx)("span",{className:"text-sm capitalize",children:n.patient.gender})]}),"IPD"===n.type&&(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(dx,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,X.jsx)("span",{className:"text-sm",children:(null===(t=n.assignedRoom)||void 0===t?void 0:t.roomNumber)||"Not assigned"})]})]})]})})})};return(0,X.jsxs)(k.Zp,{className:"w-full border-none shadow-none",children:[(0,X.jsx)(k.aR,{children:(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{onClick:()=>{s(-1)},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsxs)("div",{children:[(0,X.jsx)(k.ZB,{children:"Patient List"}),(0,X.jsx)(k.BT,{children:"Manage and view patient information"})]})]}),Z&&(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"outline",size:"icon",children:(0,X.jsx)(ux,{className:"h-4 w-4"})})}),(0,X.jsxs)(Ws,{children:[(0,X.jsx)($s,{onSelect:()=>N(!0),children:"OPD"}),(0,X.jsx)($s,{onSelect:()=>E(!0),children:"IPD"})]})]})]})}),(0,X.jsxs)(k.Wu,{className:"px-4",children:[b&&(0,X.jsx)(Sx,{open:b,onOpenChange:N}),S&&(0,X.jsx)(Dx,{open:S,onOpenChange:E}),C&&(0,X.jsx)(Px,{open:C,setOpen:D,patientData:{...null===O||void 0===O?void 0:O.patient,...O,registrationNumber:null===O||void 0===O?void 0:O.registrationNumber,type:null===O||void 0===O?void 0:O.type,visitID:null===O||void 0===O?void 0:O._id,guardianName:null===O||void 0===O?void 0:O.guardianName,relation:null===O||void 0===O?void 0:O.relation}}),A&&(0,X.jsx)(Mx,{open:A,onOpenChange:P,admissionData:O}),W&&(0,X.jsx)(Gl,{open:W,onOpenChange:$,patientData:O}),U&&(0,X.jsx)(jx,{isOpen:U,setIsOpen:z,patientData:q}),I&&(0,X.jsx)(Ix,{isOpen:I,onOpenChange:L,patient:F,onDeleted:()=>{B(null)}}),(0,X.jsxs)(yl,{defaultValue:"OPD",className:"w-full",onValueChange:y,children:[(0,X.jsxs)(bl,{children:[(0,X.jsx)(jl,{className:"data-[state=active]:bg-blue-400 data-[state=active]:text-white",value:"OPD",children:"OPD"}),(0,X.jsx)(jl,{className:"data-[state=active]:bg-blue-400 data-[state=active]:text-white",value:"IPD",children:"IPD"})]}),(0,X.jsx)("div",{className:"flex flex-col space-y-4 mb-4 mt-4",children:(0,X.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:space-x-2 md:space-y-0",children:[(0,X.jsxs)("div",{className:"flex w-full space-x-2",children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search patients...",value:i,onChange:e=>o(e.target.value),className:"pl-8 w-full"}),i&&(0,X.jsx)("button",{onClick:()=>o(""),className:"absolute right-2 top-2.5 text-muted-foreground hover:text-foreground",children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})]}),Z&&(0,X.jsx)(w.$,{variant:"outline",className:"shrink-0",onClick:()=>Q(!J),children:(0,X.jsx)(Ho,{className:"h-4 w-4"})})]}),Z?(0,X.jsx)(fd,{children:J&&(0,X.jsx)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden w-full",children:(0,X.jsxs)("div",{className:"pt-2 space-y-2",children:[K.length>1&&(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Cc,{className:"mr-2 h-4 w-4"}),"All"===H?"All Doctors":(null===(e=K.find((e=>e._id===H)))||void 0===e?void 0:e.name)||"Select Doctor"]}),(0,X.jsx)(lo,{className:"h-4 w-4 opacity-50"})]})}),(0,X.jsxs)(Ws,{className:"w-full",children:[(0,X.jsx)(Us,{children:"Filter by Doctor"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>V("All"),children:"All Doctors"}),K.map((e=>(0,X.jsx)($s,{onSelect:()=>V(e._id),children:e.name},e._id)))]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),"All"===m?"All Time":m]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Time Filter Options"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>h("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>h("Yesterday"),children:"Yesterday"}),(0,X.jsx)($s,{onSelect:()=>h("This Week"),children:"This Week"}),(0,X.jsx)($s,{onSelect:()=>h("Custom"),children:"Custom Range"})]})]}),"Custom"===m&&(0,X.jsx)(M.Ur,{from:v.from,to:v.to,onSelect:e=>{g(e)},onSearch:ge,onCancel:xe})]})})}):(0,X.jsxs)(X.Fragment,{children:[K.length>1&&(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-[200px] justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Cc,{className:"mr-2 h-4 w-4"}),"All"===H?"All Doctors":(null===(n=K.find((e=>e._id===H)))||void 0===n?void 0:n.name)||"Select Doctor"]}),(0,X.jsx)(lo,{className:"h-4 w-4 opacity-50"})]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Doctor"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>V("All"),children:"All Doctors"}),K.map((e=>(0,X.jsx)($s,{onSelect:()=>V(e._id),children:e.name},e._id)))]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),"All"===m?"All Time":m]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Time Filter Options"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>h("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>h("Yesterday"),children:"Yesterday"}),(0,X.jsx)($s,{onSelect:()=>h("This Week"),children:"This Week"}),(0,X.jsx)($s,{onSelect:()=>h("Custom"),children:"Custom Range"})]})]}),"Custom"===m&&(0,X.jsx)(M.Ur,{from:null===v||void 0===v?void 0:v.from,to:null===v||void 0===v?void 0:v.to,onSelect:e=>g(e),onSearch:ge,onCancel:xe})]})]}),!Z&&(0,X.jsx)("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(ux,{className:"mr-2 h-4 w-4"})," Add Patient"]})}),(0,X.jsxs)(Ws,{children:[(0,X.jsx)($s,{onSelect:()=>{Y.discontinuedDaysLeft<0?u(!0):N(!0)},children:"OPD"}),(0,X.jsx)($s,{onSelect:()=>{Y.discontinuedDaysLeft<0?u(!0):E(!0)},children:"IPD"})]})]})})]})}),(0,X.jsx)(Lo,{isOpen:d,setIsOpen:u}),(0,X.jsx)(wl,{value:"OPD",children:Z?se.filter((e=>"OPD"===e.type)).length>0?(0,X.jsx)("div",{children:se.filter((e=>"OPD"===e.type)).map((e=>(0,X.jsx)(ye,{patient:e},e._id)))}):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,X.jsx)(qo,{className:"h-16 w-16 text-gray-400 mb-4"}),(0,X.jsx)("p",{className:"text-xl font-semibold text-gray-600",children:"No OPD patients found"}),(0,X.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]}):(0,X.jsx)(ve,{patients:se.filter((e=>"OPD"===e.type)),type:"OPD"})}),(0,X.jsx)(wl,{value:"IPD",children:Z?se.filter((e=>"IPD"===e.type)).length>0?(0,X.jsx)("div",{children:se.filter((e=>"IPD"===e.type)).map((e=>(0,X.jsx)(ye,{patient:e},e._id)))}):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,X.jsx)(qo,{className:"h-16 w-16 text-gray-400 mb-4"}),(0,X.jsx)("p",{className:"text-xl font-semibold text-gray-600",children:"No IPD patients found"}),(0,X.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]}):(0,X.jsx)(ve,{patients:se.filter((e=>"IPD"===e.type)),type:"IPD"})})]})]})]})}const Fx=(0,N.A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Bx=(0,N.A)("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),Wx=(0,N.A)("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),$x=(0,N.A)("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),Ux=(0,N.A)("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]),zx=(0,N.A)("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),Hx=(0,N.A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Vx=(0,N.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),qx=e=>{let{icon:t,label:n,value:r,unit:a}=e;return(0,X.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg shadow-sm",children:[(0,X.jsx)("div",{className:"mr-3",children:t}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-sm font-medium text-gray-500",children:n}),(0,X.jsxs)("p",{className:"text-lg font-semibold",children:[r," ",(0,X.jsx)("span",{className:"text-sm font-normal text-gray-500",children:a})]})]})]})};function Gx(e){let{patientData:n,selectedVisit:r,onVisitSelect:s}=e;const{toast:i}=(0,H.dj)(),o=(0,j.wA)(),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)([]),m=(0,a.Zp)(),h=(0,j.d4)((e=>e.hospital.hospitalInfo)),{templates:p,status:f}=(0,j.d4)((e=>e.doctorPrescription));if((0,t.useEffect)((()=>{"idle"===f&&o(An())}),[f,o]),(0,t.useEffect)((()=>{if(n){const e=[...(n.visits||[]).map((e=>({date:e.bookingDate,type:"visit",data:e}))),...(n.admissionDetails||[]).map((e=>({date:e.bookingDate,type:"admission",data:e})))].sort(((e,t)=>new Date(t.date)-new Date(e.date)));u(e),e.length>0&&c(r?r.reasonForVisit?"reason":r.diagnosis?"diagnosis":"reason":"reason")}}),[n]),(0,t.useEffect)((()=>{r&&c(r.reasonForVisit?"reason":r.diagnosis?"diagnosis":"reason")}),[r]),!n)return null;const v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:""};return e?Array.isArray(e)?e.map((e=>{if("string"===typeof e)return{name:e};if("object"===typeof e&&null!==e){if(!e.name&&1===Object.keys(t).length){return{name:e[Object.keys(e)[0]]||""}}return{...t,...e}}return t})).filter((e=>e.name)):"string"===typeof e?e.split(",").map((e=>({name:e.trim()}))).filter((e=>e.name)):[]:[]},g=e=>{const t=e.prescription||{};return{vitals:e.vitals||{},medications:(()=>{const n=t.medications||e.medications||[];return Array.isArray(n)?n.map((e=>"string"===typeof e?{name:e,frequency:"",duration:"",remarks:""}:"object"===typeof e&&null!==e?{name:e.name||"",frequency:e.frequency||"",duration:e.duration||"",remarks:e.remarks||"",...e}:{name:"",frequency:"",duration:"",remarks:""})).filter((e=>e.name)):[]})(),diagnosis:v(t.diagnosis),comorbidities:v(t.comorbidities||e.comorbidities),labTests:v(t.labTests||e.labTests),chiefComplaints:t.chiefComplaint||t.chiefComplaints||e.reasonForVisit||"",treatment:t.treatment||e.treatment||"",additionalInstructions:t.additionalInstructions||e.additionalInstructions||"",advice:t.advice||"",followUp:t.followUp||"",...Object.keys(t).reduce(((e,n)=>{if(!["medications","diagnosis","comorbidities","labTests","chiefComplaint","chiefComplaints","treatment","additionalInstructions","advice","followUp"].includes(n)){const r=t[n];Array.isArray(r)?e[n]=v(r):e[n]=r}return e}),{})}};return(0,X.jsxs)("div",{className:"container mx-auto px-2 space-y-2 bg-gray-50",children:[(0,X.jsx)(k.Zp,{className:"shadow-md",children:(0,X.jsxs)(k.Wu,{className:"grid md:grid-cols-3 gap-4 p-3",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,X.jsx)(Co,{className:"h-14 w-14 ring-2 ring-primary ring-offset-2",children:(0,X.jsx)(To,{children:n.name.charAt(0).toUpperCase()})}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:n.name}),(0,X.jsxs)("p",{className:"text-xs text-gray-500",children:["ID: ",n.registrationNumber]}),(0,X.jsx)(Yo.E,{variant:"outline",className:"mt-1 text-xs",children:n.bloodType})]})]}),(0,X.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,X.jsx)(Kx,{icon:(0,X.jsx)(Cc,{className:"h-4 w-4"}),label:"Age & Gender",value:`${(0,M.F1)(n.age)}, ${n.gender}`}),(0,X.jsx)(Kx,{icon:(0,X.jsx)(lx,{className:"h-4 w-4"}),label:"Contact",value:n.contactNumber})]}),(0,X.jsxs)("div",{className:"text-sm",children:[(0,X.jsx)(Kx,{icon:(0,X.jsx)(cx,{className:"h-4 w-4"}),label:"Address",value:n.address}),(0,X.jsx)(Kx,{icon:(0,X.jsx)(Hx,{className:"h-4 w-4"}),label:"Email",value:n.email})]})]})}),(0,X.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Visit History"}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",className:"hover:bg-gray-100",onClick:()=>{var e;if(!r||!n)return;const t=r,a={ID:t._id,bookingNumber:t.bookingNumber,patient:{name:n.name,registrationNumber:n.registrationNumber,age:n.age,gender:n.gender,contactNumber:n.contactNumber},bookingDate:t.bookingDate,clinicalSummary:t.clinicalSummary,notes:t.notes,type:null!==(e=n.admissionDetails)&&void 0!==e&&e.some((e=>e._id===t._id))?"IPD":"OPD",vitals:t.vitals,diagnosis:t.diagnosis,treatment:t.treatment,medications:t.medications,additionalInstructions:t.additionalInstructions,labTests:t.labTests,comorbidities:t.comorbidities,conditionOnAdmission:t.conditionOnAdmission,conditionOnDischarge:t.conditionOnDischarge};m("/doctors",{state:{editPatient:a}})},disabled:!r,children:[(0,X.jsx)(Vx,{className:"mr-2 h-4 w-4"})," Doctor's Section"]})]}),(0,X.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:d.map((e=>(0,X.jsxs)(w.$,{variant:(null===r||void 0===r?void 0:r._id)===e.data._id?"default":"outline",size:"sm",className:""+((null===r||void 0===r?void 0:r._id)===e.data._id?"ring-2 ring-primary":""),onClick:()=>s(e.data),children:[(0,X.jsx)("span",{className:"mr-1",children:(0,Go.GP)(new Date(e.date),"dd MMM yyyy")}),(0,X.jsx)(Yo.E,{variant:"secondary",className:"text-xs",children:"visit"===e.type?"OPD":"IPD"})]},`${e.data._id}-${e.type}`)))}),(()=>{var e,t,a,s,i,o,d,u,m,f,v,x,y,b,j,w,N,_,S,E,C,D,T,A,P,O,R,I,L,F,B,W,$;if(!r||!n)return null;const U=r,z=null===(e=n.admissionDetails)||void 0===e?void 0:e.some((e=>e._id===U._id)),H=(e=>{var t;if(p&&null!==e&&void 0!==e&&null!==(t=e.doctor)&&void 0!==t&&t._id){const t=p.find((t=>t.associatedDoctors.some((t=>t._id===e.doctor._id))));if(t)return t.value}return kn})(U);return(0,X.jsxs)(yl,{value:l,onValueChange:c,className:"w-full",children:[(0,X.jsx)("div",{className:"overflow-x-auto scrollbar-hide",children:(0,X.jsxs)(bl,{className:(0,Ee.cn)("inline-flex h-9 items-center justify-start rounded-lg bg-muted p-1 text-muted-foreground mb-4","w-max min-w-full"),children:[(0,X.jsx)(jl,{value:"reason",className:"px-3",children:"Reason"}),(0,X.jsx)(jl,{value:"diagnosis",className:"px-3",children:"Diagnosis"}),(0,X.jsx)(jl,{value:"treatment",className:"px-3",children:"Treatment"}),(0,X.jsx)(jl,{value:"medications",className:"px-3",children:"Medications"}),(0,X.jsx)(jl,{value:"labTests",className:"px-3",children:"Lab Tests"}),(0,X.jsx)(jl,{value:"vitals",className:"px-3",children:"Vitals"}),(0,X.jsx)(jl,{value:"labReports",className:"px-3",children:"Lab Reports"}),!z&&(0,X.jsx)(jl,{value:"prescription",className:"px-3",children:"Prescription"})]})}),(0,X.jsx)(wl,{value:"reason",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Reason for Visit"})}),(0,X.jsx)(k.Wu,{children:(0,X.jsx)("p",{children:U.reasonForVisit})})]})}),(0,X.jsx)(wl,{value:"diagnosis",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Diagnosis"})}),(0,X.jsx)(k.Wu,{children:(0,X.jsx)("p",{children:U.diagnosis})})]})}),(0,X.jsx)(wl,{value:"treatment",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Treatment"})}),(0,X.jsx)(k.Wu,{children:(0,X.jsx)("p",{children:U.treatment})})]})}),(0,X.jsx)(wl,{value:"medications",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Medications"})}),(0,X.jsx)(k.Wu,{children:U.medications&&U.medications.length>0?(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Name"}),(0,X.jsx)(Wo.nd,{children:"Frequency"}),(0,X.jsx)(Wo.nd,{children:"Duration"})]})}),(0,X.jsx)(Wo.BF,{children:U.medications.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:e.name}),(0,X.jsx)(Wo.nA,{children:e.frequency}),(0,X.jsx)(Wo.nA,{children:e.duration})]},t)))})]}):(0,X.jsx)("p",{children:"No medications prescribed."})})]})}),(0,X.jsx)(wl,{value:"labTests",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Lab Tests"})}),(0,X.jsx)(k.Wu,{children:U.labTests&&U.labTests.length>0?(0,X.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:U.labTests.map(((e,t)=>(0,X.jsx)("li",{children:e},t)))}):(0,X.jsx)("p",{children:"No lab tests ordered."})})]})}),(0,X.jsx)(wl,{value:"vitals",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Vitals"})}),(0,X.jsx)(k.Wu,{children:z?(0,X.jsxs)("div",{children:[(0,X.jsx)("h4",{className:"font-semibold mb-2",children:"Admission Vitals"}),(0,X.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[(0,X.jsx)(qx,{icon:(0,X.jsx)(Tc,{className:"h-8 w-8 text-blue-500"}),label:"Blood Pressure",value:null===(t=U.vitals)||void 0===t||null===(a=t.admission)||void 0===a?void 0:a.bloodPressure,unit:"mmHg"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(Fx,{className:"h-8 w-8 text-red-500"}),label:"Heart Rate",value:null===(s=U.vitals)||void 0===s||null===(i=s.admission)||void 0===i?void 0:i.heartRate,unit:"bpm"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(Bx,{className:"h-8 w-8 text-orange-500"}),label:"Temperature",value:null===(o=U.vitals)||void 0===o||null===(d=o.admission)||void 0===d?void 0:d.temperature,unit:"\xb0C"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(Wx,{className:"h-8 w-8 text-green-500"}),label:"Weight",value:null===(u=U.vitals)||void 0===u||null===(m=u.admission)||void 0===m?void 0:m.weight,unit:"kg"}),(0,X.jsx)(qx,{icon:(0,X.jsx)($x,{className:"h-8 w-8 text-purple-500"}),label:"Height",value:null===(f=U.vitals)||void 0===f||null===(v=f.admission)||void 0===v?void 0:v.height,unit:"cm"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(Ux,{className:"h-8 w-8 text-cyan-500"}),label:"Oxygen Saturation",value:null===(x=U.vitals)||void 0===x||null===(y=x.admission)||void 0===y?void 0:y.oxygenSaturation,unit:"%"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(zx,{className:"h-8 w-8 text-teal-500"}),label:"Respiration Rate",value:null===(b=U.vitals)||void 0===b||null===(j=b.admission)||void 0===j?void 0:j.respiratoryRate,unit:"breaths/min"})]}),(0,X.jsx)("h4",{className:"font-semibold mb-2",children:"Discharge Vitals"}),(0,X.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[(0,X.jsx)(qx,{icon:(0,X.jsx)(Tc,{className:"h-8 w-8 text-blue-500"}),label:"Blood Pressure",value:null===(w=U.vitals)||void 0===w||null===(N=w.discharge)||void 0===N?void 0:N.bloodPressure,unit:"mmHg"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(Fx,{className:"h-8 w-8 text-red-500"}),label:"Heart Rate",value:null===(_=U.vitals)||void 0===_||null===(S=_.discharge)||void 0===S?void 0:S.heartRate,unit:"bpm"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(Bx,{className:"h-8 w-8 text-orange-500"}),label:"Temperature",value:null===(E=U.vitals)||void 0===E||null===(C=E.discharge)||void 0===C?void 0:C.temperature,unit:"\xb0C"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(Ux,{className:"h-8 w-8 text-cyan-500"}),label:"Oxygen Saturation",value:null===(D=U.vitals)||void 0===D||null===(T=D.discharge)||void 0===T?void 0:T.oxygenSaturation,unit:"%"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(zx,{className:"h-8 w-8 text-teal-500"}),label:"Respiration Rate",value:null===(A=U.vitals)||void 0===A||null===(P=A.discharge)||void 0===P?void 0:P.respiratoryRate,unit:"breaths/min"})]})]}):(0,X.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[(0,X.jsx)(qx,{icon:(0,X.jsx)(Tc,{className:"h-8 w-8 text-blue-500"}),label:"Blood Pressure",value:null===(O=U.vitals)||void 0===O?void 0:O.bloodPressure,unit:"mmHg"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(Fx,{className:"h-8 w-8 text-red-500"}),label:"Heart Rate",value:null===(R=U.vitals)||void 0===R?void 0:R.heartRate,unit:"bpm"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(Bx,{className:"h-8 w-8 text-orange-500"}),label:"Temperature",value:null===(I=U.vitals)||void 0===I?void 0:I.temperature,unit:"\xb0C"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(Wx,{className:"h-8 w-8 text-green-500"}),label:"Weight",value:null===(L=U.vitals)||void 0===L?void 0:L.weight,unit:"kg"}),(0,X.jsx)(qx,{icon:(0,X.jsx)($x,{className:"h-8 w-8 text-purple-500"}),label:"Height",value:null===(F=U.vitals)||void 0===F?void 0:F.height,unit:"cm"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(Ux,{className:"h-8 w-8 text-cyan-500"}),label:"Oxygen Saturation",value:null===(B=U.vitals)||void 0===B?void 0:B.oxygenSaturation,unit:"%"}),(0,X.jsx)(qx,{icon:(0,X.jsx)(zx,{className:"h-8 w-8 text-teal-500"}),label:"Respiration Rate",value:null===(W=U.vitals)||void 0===W?void 0:W.respiratoryRate,unit:"breaths/min"})]})})]})}),(0,X.jsx)(wl,{value:"labReports",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Lab Reports"})}),(0,X.jsx)(k.Wu,{children:U.labReports&&U.labReports.length>0?U.labReports.map(((e,t)=>(0,X.jsxs)("div",{className:"mb-6",children:[(0,X.jsxs)("h3",{className:"text-lg font-semibold mb-2",children:[e.name.replaceAll("-"," ").toUpperCase(),(0,X.jsx)("span",{className:"text-sm font-normal ml-2 text-gray-500",children:e.date?new Date(e.date).toLocaleDateString("en-IN"):""})]}),(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Test"}),(0,X.jsx)(Wo.nd,{children:"Result"}),(0,X.jsx)(Wo.nd,{children:"Unit"}),(0,X.jsx)(Wo.nd,{children:"Normal Range"})]})}),(0,X.jsx)(Wo.BF,{children:Object.entries((null===e||void 0===e?void 0:e.report)||{}).filter((e=>{let[t,n]=e;return null!==n.value&&""!==n.value})).map((e=>{let[t,n]=e;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"font-medium",children:n.label}),(0,X.jsx)(Wo.nA,{children:n.value}),(0,X.jsx)(Wo.nA,{children:n.unit}),(0,X.jsx)(Wo.nA,{children:n.normalRange})]},t)}))})]})]},t))):(0,X.jsx)("p",{children:"No lab reports available."})})]})}),!z&&(0,X.jsx)(wl,{value:"prescription",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Prescription Preview"})}),(0,X.jsx)(k.Wu,{children:U.prescription&&Object.keys(U.prescription).length>0||U.vitals||(null===($=U.medications)||void 0===$?void 0:$.length)>0?(0,X.jsx)("div",{className:"flex justify-center bg-gray-100 p-4 min-h-[600px] overflow-auto",children:(0,X.jsx)("div",{className:"bg-white shadow-lg",style:{width:"210mm",minHeight:"297mm",padding:"6mm 5mm",margin:"0 auto",transform:"scale(0.8)",transformOrigin:"top center"},children:(0,X.jsx)(Zg,{patient:{...n,age:(0,M.F1)(n.age)},formData:g(U),field:H.sections,hospital:h})})}):(0,X.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,X.jsx)("p",{children:"No prescription data available for this visit."})})})]})})]})})()]})]})}function Kx(e){let{icon:t,label:n,value:r,className:a=""}=e;return(0,X.jsxs)("div",{className:`flex items-center space-x-2 ${a}`,children:[(0,X.jsx)("div",{className:"text-gray-400",children:t}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"font-medium text-gray-700 text-xs",children:n}),(0,X.jsx)("p",{className:"text-gray-600",children:r})]})]})}const Yx=(0,N.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function Xx(){const{rooms:e}=(0,j.d4)((e=>e.rooms)),[n,r]=(0,t.useState)(""),[s,i]=(0,t.useState)("All"),[o,l]=(0,t.useState)("All"),c=(0,a.Zp)(),d=Zc("(max-width: 640px)"),[u,m]=(Zc("(max-width: 1024px)"),(0,t.useState)(!1)),{toast:h}=(0,H.dj)(),p=e.filter((e=>{var t;return(e.roomNumber.toString().includes(n)||(null===(t=e.beds)||void 0===t?void 0:t.some((e=>e.patient&&e.patient.toLowerCase().includes(n.toLowerCase())))))&&("All"===s||e.type===s)&&("All"===o||e.status===o)})),[f,v]=((0,j.wA)(),(0,t.useState)([])),[g,x]=(0,t.useState)(!1),y=e=>{let{room:t}=e;const n=(0,j.wA)(),{toast:r}=(0,H.dj)(),s=(0,a.Zp)();return(0,X.jsxs)(Io.lG,{children:[(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",size:"sm",children:(0,X.jsx)($o,{className:"h-4 w-4"})})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)(Io.zM,{asChild:!0,children:(0,X.jsxs)($s,{children:[(0,X.jsx)(Yx,{className:"h-4 w-4 mr-2"}),"View Details"]})}),(0,X.jsxs)($s,{onClick:()=>{s(`/create-room?edit=${t._id}`)},children:[(0,X.jsx)(Vx,{className:"h-4 w-4 mr-2"}),"Edit Room"]}),(0,X.jsxs)($s,{onClick:async()=>{try{await n(nt(t._id)).unwrap(),r({title:"Success",description:"Room deleted successfully"})}catch(e){r({variant:"destructive",title:"Error",description:e.message||"Failed to delete room"})}},className:"text-destructive",children:[(0,X.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Delete Room"]})]})]}),(0,X.jsxs)(Io.Cf,{className:"sm:max-w-[425px] max-w-[90vw] rounded-lg",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsxs)(Io.L3,{children:["Bed Details - Room ",t.roomNumber]}),(0,X.jsxs)(Io.rr,{children:["Information about beds in Room ",t.roomNumber]})]}),(0,X.jsxs)(b.F,{className:"max-h-[70vh]",children:[(0,X.jsx)("div",{className:"flex justify-end mb-4 px-4",children:(0,X.jsx)(w.$,{variant:"destructive",size:"sm",onClick:async()=>{try{await n(rt({roomIds:[t._id]})).unwrap();r({title:"Success",description:"All beds emptied successfully"})}catch(e){r({variant:"destructive",title:"Error",description:e.message||"Failed to empty beds"})}},children:"Empty All Beds"})}),(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Bed Number"}),(0,X.jsx)(Wo.nd,{children:"Status"}),!d&&(0,X.jsx)(Wo.nd,{children:"Patient"}),(0,X.jsx)(Wo.nd,{className:"w-[50px]"})]})}),(0,X.jsx)(Wo.BF,{children:t.beds.map((e=>{var a;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"font-medium",children:e.bedNumber}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Yo.E,{variant:"Occupied"===e.status?"destructive":"Available"===e.status?"success":"Under Maintenance"===e.status?"destructive":"outline",children:e.status})}),!d&&(0,X.jsx)(Wo.nA,{children:(null===(a=e.currentPatient)||void 0===a?void 0:a.name)||"-"}),(0,X.jsx)(Wo.nA,{children:"Occupied"===e.status&&(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>(async e=>{try{await n(rt({roomIds:[t._id],bedIds:{[t._id]:[e]}})).unwrap(),r({title:"Success",description:"Bed emptied successfully"})}catch(a){r({variant:"destructive",title:"Error",description:a.message||"Failed to empty bed"})}})(e._id),children:(0,X.jsx)(C.A,{className:"h-4 w-4 text-destructive"})})})]},e.bedNumber)}))})]})]})]})]})},N=e=>{let{room:t}=e;return(0,X.jsx)(k.Zp,{className:"mb-4",children:(0,X.jsxs)(k.Wu,{className:"pt-6",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsxs)("h3",{className:"text-lg font-semibold",children:["Room ",t.roomNumber]}),(0,X.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Type: ",t.type]})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(Yo.E,{variant:"Occupied"===t.status?"destructive":"Partially Available"===t.status?"warning":"Under Maintenance"===t.status?"destructive":"success",children:t.status}),(0,X.jsx)(y,{room:t})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[(0,X.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Beds: ",t.capacity]}),(0,X.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Daily Rate: \u20b9",(null===t||void 0===t?void 0:t.ratePerDay)||"N/A"]}),(0,X.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Current Occupancy: ",t.currentOccupancy]})]})]})})};return(0,X.jsx)("div",{className:"w-full mx-auto p-0",children:(0,X.jsxs)(k.Zp,{className:"border-0 shadow-none",children:[(0,X.jsxs)(k.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{onClick:()=>{c(-1)},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsxs)("div",{children:[(0,X.jsx)(k.ZB,{children:"Room List"}),(0,X.jsx)(k.BT,{children:"Manage and view room information"})]})]}),d&&(0,X.jsx)(w.$,{size:"icon",onClick:()=>c("/create-room"),children:(0,X.jsx)(S.A,{className:"h-4 w-4"})})]}),(0,X.jsxs)(k.Wu,{className:"px-4",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:justify-between md:items-center mb-4",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:space-x-2 md:space-y-0",children:[(0,X.jsxs)("div",{className:"flex w-full space-x-2",children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search rooms...",value:n,onChange:e=>r(e.target.value),className:"pl-8 w-full"})]}),d&&(0,X.jsx)(w.$,{variant:"outline",className:"shrink-0",onClick:()=>m(!u),children:(0,X.jsx)(Ho,{className:"h-4 w-4"})})]}),d?(0,X.jsx)(fd,{children:u&&(0,X.jsx)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden w-full",children:(0,X.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,X.jsxs)(A.l6,{onValueChange:i,defaultValue:"All",children:[(0,X.jsx)(A.bq,{className:"w-full",children:(0,X.jsx)(A.yv,{placeholder:"Room Type"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"All",children:"All Types"}),(0,X.jsx)(A.eb,{value:"General",children:"General"}),(0,X.jsx)(A.eb,{value:"ICU",children:"ICU"}),(0,X.jsx)(A.eb,{value:"Operation Theater",children:"Operation Theater"}),(0,X.jsx)(A.eb,{value:"Semi-Private",children:"Semi-Private"}),(0,X.jsx)(A.eb,{value:"Private",children:"Private"})]})]}),(0,X.jsxs)(A.l6,{onValueChange:l,defaultValue:"All",children:[(0,X.jsx)(A.bq,{className:"w-full",children:(0,X.jsx)(A.yv,{placeholder:"Room Status"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"All",children:"All Statuses"}),(0,X.jsx)(A.eb,{value:"Occupied",children:"Occupied"}),(0,X.jsx)(A.eb,{value:"Partially Available",children:"Partially Available"}),(0,X.jsx)(A.eb,{value:"Available",children:"Available"}),(0,X.jsx)(A.eb,{value:"Under Maintenance",children:"Under Maintenance"})]})]})]})})}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(A.l6,{onValueChange:i,defaultValue:"All",children:[(0,X.jsx)(A.bq,{className:"w-full md:w-[180px]",children:(0,X.jsx)(A.yv,{placeholder:"Room Type"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"All",children:"All Types"}),(0,X.jsx)(A.eb,{value:"General",children:"General"}),(0,X.jsx)(A.eb,{value:"ICU",children:"ICU"}),(0,X.jsx)(A.eb,{value:"Operation Theater",children:"Operation Theater"}),(0,X.jsx)(A.eb,{value:"Semi-Private",children:"Semi-Private"}),(0,X.jsx)(A.eb,{value:"Private",children:"Private"})]})]}),(0,X.jsxs)(A.l6,{onValueChange:l,defaultValue:"All",children:[(0,X.jsx)(A.bq,{className:"w-full md:w-[180px]",children:(0,X.jsx)(A.yv,{placeholder:"Room Status"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"All",children:"All Statuses"}),(0,X.jsx)(A.eb,{value:"Occupied",children:"Occupied"}),(0,X.jsx)(A.eb,{value:"Partially Available",children:"Partially Available"}),(0,X.jsx)(A.eb,{value:"Available",children:"Available"}),(0,X.jsx)(A.eb,{value:"Under Maintenance",children:"Under Maintenance"})]})]})]})]}),!d&&(0,X.jsx)("div",{className:"flex justify-end",children:(0,X.jsxs)(w.$,{variant:"outline",onClick:()=>c("/create-room"),children:[(0,X.jsx)(S.A,{className:"mr-2 h-4 w-4"})," Add Room"]})})]}),p.length>0?d?(0,X.jsx)("div",{children:p.map((e=>(0,X.jsx)(N,{room:e},e._id)))}):(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[15%]",children:"Room Number"}),(0,X.jsx)(Wo.nd,{className:"w-[20%]",children:"Type"}),(0,X.jsx)(Wo.nd,{className:"w-[20%]",children:"Status"}),(0,X.jsx)(Wo.nd,{className:"w-[15%]",children:"Daily Rate(\u20b9)"}),(0,X.jsx)(Wo.nd,{className:"w-[15%]",children:"Beds"}),(0,X.jsx)(Wo.nd,{className:"w-[15%]",children:"Current Occupancy"}),(0,X.jsx)(Wo.nd,{className:"text-right",children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:p.map((e=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"font-medium",children:e.roomNumber}),(0,X.jsx)(Wo.nA,{children:e.type}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Yo.E,{variant:"Occupied"===e.status?"destructive":"Partially Available"===e.status?"warning":"Under Maintenance"===e.status?"destructive":"success",children:e.status})}),(0,X.jsx)(Wo.nA,{className:"font-bold",children:(null===e||void 0===e?void 0:e.ratePerDay)||"N/A"}),(0,X.jsx)(Wo.nA,{children:e.capacity}),(0,X.jsx)(Wo.nA,{children:e.currentOccupancy}),(0,X.jsx)(Wo.nA,{className:"text-right",children:(0,X.jsx)(y,{room:e})})]},e._id)))})]})}):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 text-center",children:[(0,X.jsx)(Jo,{className:"h-10 w-10 text-muted-foreground mb-4"}),(0,X.jsx)("p",{className:"text-lg font-medium",children:"No rooms found"}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your search or filter criteria"})]})]})]})})}function Zx(){const e=(0,a.Zp)(),{toast:n}=(0,H.dj)(),{staffMembers:r}=(0,j.d4)((e=>e.staff)),{userData:s}=(0,j.d4)((e=>e.user)),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)("All"),[d,u]=(0,t.useState)("All"),m=(0,j.d4)((e=>e.departments.departments)),h=r.filter((e=>{var t,n;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(i.toLowerCase()))&&("All"===l||(null===(n=e.department)||void 0===n?void 0:n.includes(l)))&&("All"===d||e.roles.includes(d.toLowerCase()))})),p=function(e,t,r){var a;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return!("view staff details"!==t||!i||s._id!==i._id)||(!(null===(a=s.permissions)||void 0===a||!a.includes(r))||(n({variant:"destructive",title:"Access Denied",description:"You don't have permission to "+t}),!1))},f=t=>{p("/addstaff","edit staff","edit_staff")&&e("/addstaff",{state:{editMode:!0,staffData:t}})},v=t=>{p(`/staff/${t._id}`,"view staff details","view_staff",t)&&e(`/staff/${t._id}`,{state:{staffData:t}})},g=()=>{p("/addstaff","add new staff","create_staff")&&e("/addstaff")},x=Zc("(max-width: 640px)"),[y,N]=(0,t.useState)(!1);return(0,X.jsx)("div",{className:"w-full mx-auto p-0",children:(0,X.jsxs)(k.Zp,{className:"border-0 shadow-none",children:[(0,X.jsxs)(k.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{onClick:()=>{e(-1)},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsxs)("div",{children:[(0,X.jsx)(k.ZB,{children:"Staff List"}),(0,X.jsx)(k.BT,{children:"Manage and view staff information"})]})]}),x&&(0,X.jsx)(w.$,{size:"icon",onClick:g,children:(0,X.jsx)(S.A,{className:"h-4 w-4"})})]}),(0,X.jsxs)(k.Wu,{className:"px-4",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:justify-between md:items-center mb-4",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:space-x-2 md:space-y-0",children:[(0,X.jsxs)("div",{className:"flex w-full space-x-2",children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search staff...",value:i,onChange:e=>o(e.target.value),className:"pl-8 w-full"})]}),x&&(0,X.jsx)(w.$,{variant:"outline",className:"shrink-0",onClick:()=>N(!y),children:(0,X.jsx)(Ho,{className:"h-4 w-4"})})]}),x?(0,X.jsx)(fd,{children:y&&(0,X.jsx)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden w-full",children:(0,X.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,X.jsxs)(A.l6,{onValueChange:c,defaultValue:"All",children:[(0,X.jsx)(A.bq,{className:"w-full",children:(0,X.jsx)(A.yv,{placeholder:"Department"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"All",children:"All Departments"}),m.map((e=>(0,X.jsx)(A.eb,{value:e.name,children:e.name},e.name)))]})]}),(0,X.jsxs)(A.l6,{onValueChange:u,defaultValue:"All",children:[(0,X.jsx)(A.bq,{className:"w-full",children:(0,X.jsx)(A.yv,{placeholder:"Role"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"All",children:"All Roles"}),(0,X.jsx)(A.eb,{value:"doctor",children:"Doctor"}),(0,X.jsx)(A.eb,{value:"nurse",children:"Nurse"}),(0,X.jsx)(A.eb,{value:"technician",children:"Technician"}),(0,X.jsx)(A.eb,{value:"admin",children:"Administrative"})]})]})]})})}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(A.l6,{onValueChange:c,defaultValue:"All",children:[(0,X.jsx)(A.bq,{className:"w-full md:w-[180px]",children:(0,X.jsx)(A.yv,{placeholder:"Department"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"All",children:"All Departments"}),m.map((e=>(0,X.jsx)(A.eb,{value:e.name,children:e.name},e.name)))]})]}),(0,X.jsxs)(A.l6,{onValueChange:u,defaultValue:"All",children:[(0,X.jsx)(A.bq,{className:"w-full md:w-[180px]",children:(0,X.jsx)(A.yv,{placeholder:"Role"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"All",children:"All Roles"}),(0,X.jsx)(A.eb,{value:"doctor",children:"Doctor"}),(0,X.jsx)(A.eb,{value:"nurse",children:"Nurse"}),(0,X.jsx)(A.eb,{value:"technician",children:"Technician"}),(0,X.jsx)(A.eb,{value:"admin",children:"Administrative"})]})]})]})]}),!x&&(0,X.jsx)("div",{className:"flex justify-end",children:(0,X.jsxs)(w.$,{variant:"outline",onClick:g,children:[(0,X.jsx)(ux,{className:"mr-2 h-4 w-4"})," Add Staff"]})})]}),h.length>0?x?(0,X.jsx)(b.F,{className:"h-[calc(100vh-250px)]",children:(0,X.jsx)("div",{className:"space-y-4",children:h.map((e=>(0,X.jsx)(k.Zp,{className:"p-4",children:(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-4 cursor-pointer",onClick:()=>v(e),children:[(0,X.jsx)(Co,{children:(0,X.jsx)(To,{children:null===e||void 0===e?void 0:e.name.split(" ").filter(((e,t,n)=>0===t||t===n.length-1)).map((e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.toUpperCase()})).join("")})}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"font-semibold hover:underline",children:e.name}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:e.roles.join(", ")}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:e.department.join(", ")})]})]}),(0,X.jsxs)("div",{className:"flex space-x-2",children:[(0,X.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>v(e),children:(0,X.jsx)(ei,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>f(e),children:(0,X.jsx)(Vx,{className:"h-4 w-4"})})]})]})},e._id)))})}):(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[40%]",children:"Name"}),(0,X.jsx)(Wo.nd,{className:"w-[20%]",children:"Role"}),(0,X.jsx)(Wo.nd,{className:"w-[30%]",children:"Department"}),(0,X.jsx)(Wo.nd,{className:"w-[10%]",children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:h.map((e=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"font-medium",children:(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(Co,{className:"hidden md:block",children:(0,X.jsx)(To,{children:null===e||void 0===e?void 0:e.name.split(" ").filter(((e,t,n)=>0===t||t===n.length-1)).map((e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.toUpperCase()})).join("")})}),(0,X.jsx)("span",{className:"cursor-pointer hover:underline capitalize",children:e.name})]})}),(0,X.jsx)(Wo.nA,{children:e.roles.join(", ")}),(0,X.jsx)(Wo.nA,{children:e.department.join(", ")}),(0,X.jsx)(Wo.nA,{children:(0,X.jsxs)("div",{className:"flex space-x-2",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>v(e),children:(0,X.jsx)(ei,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>f(e),children:(0,X.jsx)(Vx,{className:"h-4 w-4"})})]})})]},e._id)))})]})}):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 text-center",children:[(0,X.jsx)(Jo,{className:"h-10 w-10 text-muted-foreground mb-4"}),(0,X.jsx)("p",{className:"text-lg font-medium",children:"No staff members found"}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your search or filter criteria"})]})]})]})})}function Jx(){const e=(0,a.Zp)();return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,X.jsx)(w.$,{onClick:()=>{e(-1)},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(Uo.A,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Settings"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[(0,X.jsx)(w.$,{onClick:()=>{e("/settings/hospital-info")},children:"Hospital Info"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/customization")},children:"Customization"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/lab-templates")},children:"Manage Lab Templates"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/printing-templates")},children:"Printing Templates"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/prefix-settings")},children:"Prefix Settings"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/department")},children:"Manage Department"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/hospital-settings")},children:"Hospital Settings"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/consultation-fees")},children:"Consultation Fees"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/discharge-form-templates")},children:"Discharge Form Templates"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/subscription")},children:"Subscription"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/prescription-settings")},children:"Doctors Prescription Settings"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/doctor-wise-data")},children:"Doctor Wise Data"}),(0,X.jsx)(w.$,{onClick:()=>{e("/settings/manage-records")},children:"Manage Records"})]})]})}const Qx=(0,N.A)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),ey=(0,N.A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),ty=(0,N.A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),ny=(0,N.A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ry=(0,N.A)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),ay=(0,N.A)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var sy=__webpack_require__(1208),iy=__webpack_require__(2885),oy=__webpack_require__(5757),ly=__webpack_require__(8326);const cy={"2023-07-01":{hours:8,patients:5,status:"present"},"2023-07-02":{hours:0,patients:0,status:"off"},"2023-07-03":{hours:7.5,patients:4,status:"present"},"2023-07-04":{hours:8,patients:6,status:"present"},"2023-07-05":{hours:8,patients:5,status:"present"},"2023-07-06":{hours:4,patients:2,status:"half-day"},"2023-07-07":{hours:8,patients:7,status:"present"},"2023-07-08":{hours:0,patients:0,status:"off"},"2023-07-09":{hours:0,patients:0,status:"off"},"2023-07-10":{hours:8,patients:5,status:"present"},"2023-07-11":{hours:8,patients:6,status:"present"},"2023-07-12":{hours:0,patients:0,status:"sick"},"2023-07-13":{hours:8,patients:4,status:"present"},"2023-07-14":{hours:8,patients:5,status:"present"},"2023-07-15":{hours:0,patients:0,status:"off"},"2023-07-16":{hours:0,patients:0,status:"off"},"2023-07-17":{hours:8,patients:6,status:"present"},"2023-07-18":{hours:8,patients:5,status:"present"},"2023-07-19":{hours:8,patients:7,status:"present"},"2023-07-20":{hours:8,patients:4,status:"present"},"2023-07-21":{hours:8,patients:5,status:"present"},"2023-07-22":{hours:0,patients:0,status:"off"},"2023-07-23":{hours:0,patients:0,status:"off"},"2023-07-24":{hours:8,patients:6,status:"present"},"2023-07-25":{hours:8,patients:5,status:"present"},"2023-07-26":{hours:8,patients:4,status:"present"},"2023-07-27":{hours:8,patients:6,status:"present"},"2023-07-28":{hours:8,patients:5,status:"present"},"2023-07-29":{hours:0,patients:0,status:"off"},"2023-07-30":{hours:0,patients:0,status:"off"},"2023-07-31":{hours:8,patients:5,status:"present"}};function dy(){const[e,n]=(0,t.useState)(new Date(2023,6,1)),r=(0,$c.w)(e),a=(0,Uc.p)(e),s=Fc({start:(0,Rc.k)(r),end:(0,Mc.$)(a)}),i=e=>{n((t=>"prev"===e?(0,sy.a)(t,1):(0,iy.P)(t,1)))},o=e=>{switch(e){case"present":return"bg-green-100 text-green-800";case"half-day":return"bg-yellow-100 text-yellow-800";case"off":default:return"bg-gray-100 text-gray-800";case"sick":return"bg-red-100 text-red-800"}};return(0,X.jsxs)(k.Zp,{className:"w-full max-w-4xl mx-auto",children:[(0,X.jsxs)(k.aR,{children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsx)(k.ZB,{className:"text-xl font-bold",children:"Monthly Calendar"}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(w.$,{variant:"outline",size:"icon",onClick:()=>i("prev"),children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsxs)("div",{className:"flex items-center bg-muted rounded-md px-3 py-1",children:[(0,X.jsx)(zo,{className:"h-4 w-4 mr-2"}),(0,X.jsx)("span",{children:(0,Go.GP)(e,"MMMM yyyy")})]}),(0,X.jsx)(w.$,{variant:"outline",size:"icon",onClick:()=>i("next"),children:(0,X.jsx)(ly.A,{className:"h-4 w-4"})})]})]}),(0,X.jsx)(k.BT,{children:"Staff attendance and work summary for the month"})]}),(0,X.jsxs)(k.Wu,{className:"relative",children:[(0,X.jsx)("div",{className:"absolute inset-0 bg-white/20 backdrop-blur-[1px] z-10 flex items-center justify-center",children:(0,X.jsxs)("div",{className:"text-center bg-white/70 p-6 rounded-lg shadow-lg",children:[(0,X.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Coming Soon"}),(0,X.jsx)("p",{className:"text-lg text-gray-600",children:"We're working on something exciting!"}),(0,X.jsx)("div",{className:"mt-4 w-16 h-1 bg-blue-400 mx-auto rounded-full"})]})}),(0,X.jsxs)("div",{className:"grid grid-cols-7 gap-2 opacity-40",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>(0,X.jsx)("div",{className:"text-center font-semibold",children:e},e))),s.map(((t,n)=>{const r=(0,Go.GP)(t,"yyyy-MM-dd"),a=cy[r];return(0,X.jsx)(Hi,{children:(0,X.jsxs)(Vi,{children:[(0,X.jsx)(qi,{asChild:!0,children:(0,X.jsxs)("div",{className:(0,Ee.cn)("h-20 border rounded-md p-1 flex flex-col",!(0,oy.t)(t,e)&&"bg-gray-50 text-gray-400",(0,Bc.r)(t,new Date)&&"border-blue-500"),children:[(0,X.jsx)("div",{className:"text-right",children:(0,Go.GP)(t,"d")}),a&&(0,X.jsxs)("div",{className:"flex-grow flex flex-col justify-between",children:[(0,X.jsx)(Yo.E,{className:(0,Ee.cn)("w-full justify-center",o(a.status)),children:a.status}),"off"!==a.status&&(0,X.jsxs)("div",{className:"flex justify-between mt-auto",children:[(0,X.jsxs)("div",{className:"flex items-center justify-center text-xs",children:[(0,X.jsx)(mo,{className:"h-3 w-3 mr-1"}),a.hours,"h"]}),(0,X.jsxs)("div",{className:"flex items-center justify-center text-xs",children:[(0,X.jsx)(ri,{className:"h-3 w-3 mr-1"}),a.patients]})]})]})]})}),(0,X.jsxs)(Gi,{children:[(0,X.jsxs)("p",{children:["Date: ",(0,Go.GP)(t,"MMMM d, yyyy")]}),a&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("p",{children:["Status: ",a.status]}),(0,X.jsxs)("p",{children:["Hours worked: ",a.hours]}),(0,X.jsxs)("p",{children:["Patients seen: ",a.patients]})]})]})]})},t.toString())}))]})]})]})}function uy(){var e,t,n,r,s,i,o,l,c,d,u;const m=(0,a.zy)(),h=(0,a.Zp)(),p=(null===(e=m.state)||void 0===e?void 0:e.staffData)||{};return(0,X.jsxs)("div",{className:"space-y-2 px-4 ",children:[(0,X.jsx)("div",{className:"flex justify-between items-center",children:(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>h(-1),"aria-label":"Go back",children:(0,X.jsx)(Uo.A,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-xl font-bold",children:"Staff Profile"})]})}),(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,X.jsxs)(k.Zp,{className:"lg:col-span-2",children:[(0,X.jsx)(k.aR,{}),(0,X.jsxs)(k.Wu,{className:"grid gap-4",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,X.jsxs)(Co,{className:"h-16 w-16",children:[(0,X.jsx)(Do,{src:"/placeholder.svg?height=64&width=64",alt:p.name}),(0,X.jsx)(To,{children:p.name.split(" ").map((e=>e[0])).join("")})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h2",{className:"text-xl font-bold",children:p.name}),(0,X.jsx)("p",{className:"text-gray-500",children:null===(t=p.roles)||void 0===t?void 0:t.join(", ")})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(Hx,{className:"h-4 w-4 text-gray-500"}),(0,X.jsx)("span",{children:p.email})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(Cc,{className:"h-4 w-4 text-gray-500"}),(0,X.jsx)("span",{children:p.username})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(Qx,{className:"h-4 w-4 text-gray-500"}),(0,X.jsx)("span",{children:null===(n=p.department)||void 0===n?void 0:n.join(", ")})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zo,{className:"h-4 w-4 text-gray-500"}),(0,X.jsxs)("span",{children:["Joined on ",p.hireDate]})]})]})]})]}),(0,X.jsxs)(k.Zp,{className:"lg:col-span-2",children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Current Status"})}),(0,X.jsxs)(k.Wu,{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("span",{className:"font-semibold",children:"Shift Type:"}),(0,X.jsx)("span",{children:null===(r=p.shift)||void 0===r?void 0:r.type})]}),(0,X.jsxs)("div",{className:"flex align-center justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(mo,{className:"h-4 w-4 text-green-500"}),(0,X.jsx)("span",{className:"font-semibold",children:"Time In:"}),(0,X.jsx)("span",{children:null===(s=p.shift)||void 0===s?void 0:s.hours.start})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(mo,{className:"h-4 w-4 text-red-500"}),(0,X.jsx)("span",{className:"font-semibold",children:"Time Out:"}),(0,X.jsx)("span",{children:null===(i=p.shift)||void 0===i?void 0:i.hours.end})]})]})]})]}),(0,X.jsxs)(k.Zp,{className:"lg:col-span-1",children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Employee Info"})}),(0,X.jsxs)(k.Wu,{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("span",{className:"font-semibold",children:"Employee ID:"}),(0,X.jsx)("span",{children:p.employeeID})]}),(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("span",{className:"font-semibold",children:"Experience:"}),(0,X.jsxs)("span",{children:[p.yearsOfExperience," years"]})]})]})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,X.jsxs)(yl,{defaultValue:"personal",className:"w-full",children:[(0,X.jsxs)(bl,{className:"mb-2 flex flex-wrap",children:[(0,X.jsxs)(jl,{value:"personal",className:"flex-grow",children:[(0,X.jsx)("span",{className:"hidden sm:inline",children:"Personal Info"}),(0,X.jsx)("span",{className:"sm:hidden",children:"Personal"})]}),(0,X.jsxs)(jl,{value:"payroll",className:"flex-grow",children:[(0,X.jsx)("span",{className:"hidden sm:inline",children:"Payroll Info"}),(0,X.jsx)("span",{className:"sm:hidden",children:"Payroll"})]}),(0,X.jsxs)(jl,{value:"education",className:"flex-grow",children:[(0,X.jsx)("span",{className:"hidden sm:inline",children:"Education & Certifications"}),(0,X.jsx)("span",{className:"sm:hidden",children:"Education"})]})]}),(0,X.jsx)(wl,{value:"personal",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Personal Information"})}),(0,X.jsx)(k.Wu,{children:(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zo,{className:"h-4 w-4 text-gray-500"}),(0,X.jsx)("span",{className:"font-semibold",children:"Date of Birth:"}),(0,X.jsx)("span",{children:p.dateOfBirth})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(Cc,{className:"h-4 w-4 text-gray-500"}),(0,X.jsx)("span",{className:"font-semibold",children:"Gender:"}),(0,X.jsx)("span",{children:p.gender})]}),(0,X.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,X.jsx)(ey,{className:"h-4 w-4 text-gray-500 mt-1"}),(0,X.jsx)("span",{className:"font-semibold",children:"Address:"}),(0,X.jsx)("span",{children:p.address})]})]})})]})}),(0,X.jsx)(wl,{value:"payroll",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Payroll Information"})}),(0,X.jsx)(k.Wu,{children:(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(ty,{className:"h-4 w-4 text-gray-500"}),(0,X.jsx)("span",{className:"font-semibold",children:"Salary:"}),(0,X.jsxs)("span",{children:["\u20b9",p.salary]})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(ey,{className:"h-4 w-4 text-gray-500"}),(0,X.jsx)("span",{className:"font-semibold",children:"Bank Name:"}),(0,X.jsx)("span",{children:null===(o=p.payrollInfo)||void 0===o?void 0:o.bankName})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(ny,{className:"h-4 w-4 text-gray-500"}),(0,X.jsx)("span",{className:"font-semibold",children:"Account Number:"}),(0,X.jsx)("span",{children:null===(l=p.payrollInfo)||void 0===l?void 0:l.accountNumber})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(ny,{className:"h-4 w-4 text-gray-500"}),(0,X.jsx)("span",{className:"font-semibold",children:"IFSC Code:"}),(0,X.jsx)("span",{children:null===(c=p.payrollInfo)||void 0===c?void 0:c.ifscCode})]})]})})]})}),(0,X.jsx)(wl,{value:"education",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsxs)(k.aR,{children:[(0,X.jsx)(k.ZB,{children:"Education & Certifications"}),(0,X.jsx)(k.BT,{children:"Academic background and professional certifications"})]}),(0,X.jsx)(k.Wu,{children:(0,X.jsxs)("div",{className:"space-y-6",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Qualifications"}),(null===(d=p.qualifications)||void 0===d?void 0:d.length)>0?(0,X.jsx)("ul",{className:"space-y-2",children:p.qualifications.map(((e,t)=>(0,X.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,X.jsx)(ry,{className:"h-5 w-5 text-blue-500 mt-0.5"}),(0,X.jsx)("div",{children:(0,X.jsx)("p",{className:"font-medium",children:e})})]},t)))}):(0,X.jsx)("p",{children:"No qualification information available."})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Certifications"}),(null===(u=p.certifications)||void 0===u?void 0:u.length)>0?(0,X.jsx)("ul",{className:"space-y-2",children:p.certifications.map(((e,t)=>(0,X.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,X.jsx)(ay,{className:"h-5 w-5 text-green-500 mt-0.5"}),(0,X.jsx)("div",{children:(0,X.jsx)("p",{className:"font-medium",children:e})})]},t)))}):(0,X.jsx)("p",{children:"No certification information available."})]})]})})]})})]}),(0,X.jsx)("div",{className:"w-full",children:(0,X.jsx)(dy,{})})]})]})}const my=()=>{const[e,n]=(0,t.useState)(new Date),r=e=>{n((t=>"prev"===e?(0,Wc.e)(t,1):(0,zc.f)(t,1)))};return(0,X.jsxs)("header",{className:"bg-white text-gray-800 px-4 py-2 flex justify-between items-center shadow-sm border-b border-gray-200 h-[50px]",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zo,{className:"h-4 w-4"}),(0,X.jsx)("h1",{className:"text-base font-semibold",children:"Appointment List"})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",className:"text-gray-600 hover:bg-gray-100",onClick:()=>r("prev"),disabled:(0,Go.GP)(e,"yyyy-MM-dd")===(0,Go.GP)((0,Wc.e)(new Date,1),"yyyy-MM-dd"),children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsx)("span",{className:"text-base font-semibold min-w-[80px] text-center",children:(0,Go.GP)(e,"MMM d")}),(0,X.jsx)(w.$,{variant:"ghost",size:"icon",className:"text-gray-600 hover:bg-gray-100",onClick:()=>r("next"),disabled:(0,Go.GP)(e,"yyyy-MM-dd")===(0,Go.GP)((0,zc.f)(new Date,1),"yyyy-MM-dd"),children:(0,X.jsx)(ly.A,{className:"h-4 w-4"})})]}),(0,X.jsx)("div",{className:"w-[100px]"})]})},hy=1440,py=[{id:1,name:"Patient Consultation",start:"8:30",end:"8:45",color:"from-blue-100 to-blue-50",textColor:"text-blue-800",borderColor:"border-blue-200"},{id:2,name:"Quick Check-up",start:"9:00",end:"9:10",color:"from-green-100 to-green-50",textColor:"text-green-800",borderColor:"border-green-200"},{id:3,name:"Surgery Prep",start:"9:15",end:"10:00",color:"from-red-100 to-red-50",textColor:"text-red-800",borderColor:"border-red-200"},{id:3,name:"Surgery Prep",start:"13:15",end:"13:30",color:"from-red-100 to-red-50",textColor:"text-red-800",borderColor:"border-red-200"},{id:3,name:"Surgery Prep",start:"1:15",end:"1:30",color:"from-red-100 to-red-50",textColor:"text-red-800",borderColor:"border-red-200"}],fy=e=>{const[t,n]=e.split(":").map(Number);return 60*t+n},vy=(e,t)=>{const n=fy(e),r=fy(t);return{top:`${n/hy*100}%`,height:`${(r-n)/hy*100}%`}},gy=()=>{const e=new Date,t=e.getHours(),n=e.getMinutes(),r=60*t+n;return{formatted:`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`,percentage:r/hy*100}},xy=()=>{const[e,n]=(0,t.useState)(gy());return(0,t.useEffect)((()=>{const e=setInterval((()=>{n(gy())}),6e4);return()=>clearInterval(e)}),[]),(0,X.jsx)("div",{className:"w-full bg-white pr-2",children:(0,X.jsxs)("div",{className:"relative",style:{height:"2880px"},children:[" ",(0,X.jsx)("div",{className:"absolute top-0 left-0 w-16 h-full flex flex-col border-r border-gray-200",children:Array.from({length:24}).map(((e,t)=>(0,X.jsx)("div",{className:"h-[120px] text-xs text-gray-500 text-right pr-4",children:0===t?"12 AM":12===t?"12 PM":t>12?t-12+" PM":`${t} AM`},t)))}),(0,X.jsxs)("div",{className:"absolute top-2 left-10 right-0 h-full pl-4",children:[Array.from({length:288}).map(((e,t)=>(0,X.jsx)("div",{className:"absolute w-full border-t "+(t%12===0?"border-gray-500":"border-gray-200"),style:{top:5*t/hy*100+"%"}},t))),py.map((e=>(0,X.jsx)("div",{className:`\n                absolute left-6 right-1 p-1 rounded-lg overflow-hidden \n                transition-all duration-200 hover:shadow-lg \n                border-2 ${e.borderColor} shadow\n                flex items-center\n              `,style:{...vy(e.start,e.end),background:`linear-gradient(135deg, ${e.color.split(" ")[1]} 0%, ${e.color.split(" ")[3]} 100%)`},children:(0,X.jsxs)("div",{className:"flex items-center w-full",children:[(0,X.jsx)("div",{className:`w-2 h-2 rounded-full ${e.borderColor} mr-1 flex-shrink-0`}),(0,X.jsxs)("div",{className:"flex-1 flex items-center min-w-0",children:[(0,X.jsx)("div",{className:`text-xs font-medium ${e.textColor} truncate mr-1`,children:e.name}),(0,X.jsxs)("div",{className:`text-xs ${e.textColor} opacity-75 whitespace-nowrap`,children:[e.start," - ",e.end]})]})]})},e.id))),(0,X.jsx)("div",{className:"absolute left-6 right-0 h-0.5 bg-red-500 z-10",style:{top:`${e.percentage}%`},children:(0,X.jsx)("div",{className:"absolute -top-2 -left-16 bg-red-500 text-white text-xs py-1 px-2 rounded",children:e.formatted})})]})]})})},yy=()=>(0,X.jsxs)("div",{className:"h-full w-full flex flex-col",children:[(0,X.jsx)(my,{}),(0,X.jsxs)("div",{className:"grid grid-cols-4 gap-4",style:{height:"calc(100vh - 110px)"},children:[(0,X.jsx)(b.F,{className:"col-span-1 h-full",children:(0,X.jsx)(Yg,{})}),(0,X.jsx)(b.F,{className:"col-span-3 h-full",children:(0,X.jsx)(xy,{})})]})]}),by=()=>{const[e,n]=(0,t.useState)(!1);return(0,X.jsxs)("div",{children:[(0,X.jsx)("button",{onClick:()=>n(!0),children:"open"}),(0,X.jsx)(Sx,{open:e,onOpenChange:n})]})},jy=(0,N.A)("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]),wy=()=>{const{hospitalInfo:e}=(0,j.d4)((e=>e.hospital));return(0,X.jsxs)("div",{children:[(0,X.jsx)("h1",{className:"text-2xl font-bold text-center",children:e.pharmacyName}),(0,X.jsx)("p",{className:"text-center",children:e.pharmacyAddress}),(0,X.jsxs)("p",{className:"text-center",children:["Mobile: ",e.pharmacyContactNumber]})]})};function Ny(e){let{isOpen:n,setIsOpen:r,billData:a}=e;const s=(0,t.useRef)(),[i,o]=(0,t.useState)(!1),l=(0,qn.useReactToPrint)({content:()=>s.current,onBeforeGetContent:()=>(o(!0),new Promise((e=>{setTimeout((()=>{o(!1),e()}),0)}))),pageStyle:"\n      @media print {\n        @page {\n          size: auto;\n          margin: 0;\n        }\n        body {\n          padding: 20mm;\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-only {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n      }\n    "});return a?(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,X.jsxs)("div",{ref:s,className:i?"print-content":"",children:[(0,X.jsx)("div",{className:"hidden print:block mb-4",children:(0,X.jsx)(wy,{})}),(0,X.jsx)("div",{className:"no-print",children:(0,X.jsxs)(Io.c7,{className:"flex flex-row items-center justify-between mr-7 pb-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Io.L3,{children:"Bill Details"}),(0,X.jsx)(Io.rr,{children:"Full details of the bill"})]}),(0,X.jsx)(_y,{status:a.amountPaid===a.totalAmount?"Paid":"Due"})]})}),(0,X.jsxs)("div",{className:"grid gap-2 py-0",children:[(0,X.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{className:"text-right",children:"Customer Name"}),(0,X.jsx)("p",{className:"mt-1 font-medium",children:a.patientInfo.name})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{className:"text-right",children:"Bill Number"}),(0,X.jsx)("p",{className:"mt-1 font-medium",children:`#B${a._id.slice(-6)}`})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{className:"text-right",children:"Date and Time"}),(0,X.jsx)("p",{className:"mt-1 font-medium",children:(0,Go.GP)(new Date(a.createdAt),"MMM dd, hh:mm a")})]})]}),(0,X.jsxs)("div",{className:"mt-1",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Bill Items"}),(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Item Name"}),(0,X.jsx)(Wo.nd,{children:"Type"}),(0,X.jsx)(Wo.nd,{children:"Quantity"}),(0,X.jsx)(Wo.nd,{children:"MRP"}),(0,X.jsx)(Wo.nd,{children:"Discount(%)"}),(0,X.jsx)(Wo.nd,{children:"Total"})]})}),(0,X.jsx)(Wo.BF,{children:a.items.map(((e,t)=>{var n,r,a,s;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:(null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.name)||"Item deleted"}),(0,X.jsx)(Wo.nA,{children:(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.type)||"Item deleted"}),(0,X.jsx)(Wo.nA,{children:(null===e||void 0===e?void 0:e.quantity)||"Item deleted"}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",null===e||void 0===e||null===(a=e.MRP)||void 0===a?void 0:a.toFixed(2)]}),(0,X.jsxs)(Wo.nA,{children:[null===e||void 0===e||null===(s=e.discount)||void 0===s?void 0:s.toFixed(0),"%"]}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",((null===e||void 0===e?void 0:e.quantity)*(null===e||void 0===e?void 0:e.MRP)*(1-(null===e||void 0===e?void 0:e.discount)/100)).toFixed(2)]})]},t)}))})]}),(0,X.jsx)("div",{className:"mt-4 border-t border-gray-200 pt-2",children:(0,X.jsxs)("div",{className:"flex flex-col items-end space-y-1",children:[(0,X.jsxs)("div",{className:"flex justify-between w-72",children:[(0,X.jsx)("span",{className:"text-sm text-gray-600",children:"Sub Total:"}),(0,X.jsxs)("span",{className:"text-sm",children:["\u20b9",a.subtotal.toFixed(2)]})]}),(0,X.jsxs)("div",{className:"flex justify-between w-72",children:[(0,X.jsxs)("span",{className:"text-sm text-gray-600",children:["Additional Discount  (",((a.subtotal-a.totalAmount)/a.subtotal*100).toFixed(0),"%):"]}),(0,X.jsxs)("span",{className:"text-sm",children:["-\u20b9",(a.subtotal-a.totalAmount).toFixed(2)]})]}),(0,X.jsxs)("div",{className:"flex justify-between w-72 border-t border-gray-200 pt-2 font-semibold",children:[(0,X.jsx)("span",{children:"Total Amount:"}),(0,X.jsxs)("span",{children:["\u20b9",a.totalAmount.toFixed(2)]})]})]})})]})]})]}),(0,X.jsxs)(Io.Es,{className:"sm:justify-start pt-2",children:[(0,X.jsx)(w.$,{type:"button",variant:"secondary",onClick:()=>r(!1),children:"Close"}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",onClick:l,children:[(0,X.jsx)(Xn.A,{className:"mr-2 h-4 w-4"}),"Print Bill"]})]})]})}):null}const _y=e=>{let{status:t}=e;return(0,X.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ${(e=>{switch(e.toLowerCase()){case"paid":return"bg-green-100 text-green-800";case"due":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(t)}`,children:t})},Sy=e=>{let{bills:n}=e;const[r,a]=(0,t.useState)(null),[s,i]=(0,t.useState)(!1),o=Zc("(min-width: 768px)"),l=e=>{a(e),i(!0)};return(0,X.jsxs)("div",{className:"w-full h-full overflow-hidden",children:[o?(0,X.jsx)("div",{className:"overflow-x-auto h-full",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Bill No"}),(0,X.jsx)(Wo.nd,{children:"Customer"}),(0,X.jsx)(Wo.nd,{children:"Date & Time"}),(0,X.jsx)(Wo.nd,{children:"Amount"}),(0,X.jsx)(Wo.nd,{children:"Status"}),(0,X.jsx)(Wo.nd,{children:"Method"}),(0,X.jsx)(Wo.nd,{children:"Action"})]})}),(0,X.jsx)(Wo.BF,{children:0===n.length?(0,X.jsx)(Wo.Hj,{className:"hover:bg-white",children:(0,X.jsx)(Wo.nA,{colSpan:7,className:"h-24 text-center",children:(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[(0,X.jsx)(Xc,{className:"w-8 h-8 mb-2"}),(0,X.jsx)("p",{className:"font-semibold",children:"No bills available"})]})})}):n.map((e=>{var t;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:`#B${e._id.slice(-6)}`}),(0,X.jsx)(Wo.nA,{className:"capitalize",children:e.patientInfo.name}),(0,X.jsx)(Wo.nA,{children:(0,Go.GP)(new Date(e.createdAt),"MMM dd, hh:mm a")}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.totalAmount.toLocaleString("en-IN",{maximumFractionDigits:2})]}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Yo.E,{variant:(null===e||void 0===e?void 0:e.amountPaid)===(null===e||void 0===e?void 0:e.totalAmount)?"success":"destructive",children:(null===e||void 0===e?void 0:e.amountPaid)===(null===e||void 0===e?void 0:e.totalAmount)?"Paid":"Due"})}),(0,X.jsx)(Wo.nA,{children:(null===e||void 0===e||null===(t=e.payment)||void 0===t?void 0:t.paymentMethod)||"__"}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>l(e),children:(0,X.jsx)(ei,{className:"h-3 w-3 mr-2"})})})]},e._id)}))})]})}):(0,X.jsx)("div",{className:"overflow-y-auto h-[400px] md:pb-4 pb-0 pr-1",children:0===n.length?(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500 py-8 bg-white rounded-lg shadow",children:[(0,X.jsx)(Xc,{className:"w-12 h-12 mb-2"}),(0,X.jsx)("p",{className:"font-semibold",children:"No bills available"})]}):n.map((e=>{var t;return(0,X.jsx)("div",{className:"bg-white p-3 rounded-lg shadow mb-3 border border-gray-200",children:(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsxs)("div",{className:"flex-grow",children:[(0,X.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,X.jsxs)("span",{className:"text-base font-semibold text-gray-800",children:["\u20b9",e.totalAmount.toLocaleString("en-IN",{maximumFractionDigits:2})]}),(0,X.jsx)(Yo.E,{variant:(null===e||void 0===e?void 0:e.amountPaid)===(null===e||void 0===e?void 0:e.totalAmount)?"success":"destructive",children:(null===e||void 0===e?void 0:e.amountPaid)===(null===e||void 0===e?void 0:e.totalAmount)?"Paid":"Due"})]}),(0,X.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,X.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,X.jsx)(Cc,{className:"h-3 w-3 mr-1 flex-shrink-0"}),(0,X.jsx)("span",{className:"capitalize truncate",children:e.patientInfo.name})]}),(0,X.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,X.jsx)(zo,{className:"h-3 w-3 mr-1 flex-shrink-0"}),(0,X.jsx)("span",{className:"truncate",children:(0,Go.GP)(new Date(e.createdAt),"MMM dd, yyyy HH:mm")})]}),(0,X.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,X.jsx)(jc,{className:"h-3 w-3 mr-1 flex-shrink-0"}),(0,X.jsx)("span",{className:"truncate",children:(null===e||void 0===e||null===(t=e.payment)||void 0===t?void 0:t.paymentMethod)||"Not specified"})]})]})]}),(0,X.jsx)("div",{className:"ml-2 flex items-center self-stretch",children:(0,X.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>l(e),children:[(0,X.jsx)(ei,{className:"h-3 w-3 mr-1"})," View"]})})]})},e._id)}))}),(0,X.jsx)(Ny,{isOpen:s,setIsOpen:i,billData:r})]})},Ey=e=>{let{isOpen:n,setIsOpen:r}=e;const a=(0,j.wA)(),{salesBills:s,salesBillsStatus:i}=(0,j.d4)((e=>e.pharmacy));(0,t.useEffect)((()=>{n&&"idle"===i&&a((0,st.BS)())}),[n,i,a]);const o=s.filter((e=>{const t=new Date(e.createdAt),n=new Date;return t.toDateString()===n.toDateString()}));return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:"md:max-w-4xl max-h-[500px] overflow-y-auto w-[95vw] rounded-lg",children:[(0,X.jsx)(Io.c7,{className:"flex flex-row items-center justify-between mr-5",children:(0,X.jsxs)("div",{children:[(0,X.jsxs)(Io.L3,{children:["Sales Today - ",(0,Go.GP)(new Date,"MMMM d, yyyy")]}),(0,X.jsxs)(Io.rr,{children:["Showing ",o.length," sales for today"]})]})}),"loading"===i?(0,X.jsx)("p",{children:"Loading sales data..."}):"failed"===i?(0,X.jsx)("p",{children:"Error loading sales data. Please try again."}):(0,X.jsx)(Sy,{bills:o})]})})},Cy=(0,N.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function Dy(e){let{isOpen:n,setIsOpen:r,onPatientSelect:a}=e;const[s,i]=(0,t.useState)(""),o=(0,j.d4)((e=>e.patients.patientlist)),l=(0,j.wA)(),c=(0,j.d4)((e=>e.patients.status)),d=o.filter((e=>e.patient.name.toLowerCase().includes(s.toLowerCase()))),u=Ko("(max-width: 640px)"),m=Ko("(max-width: 768px)");return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:(u?"w-[95vw]":"max-w-3xl")+" max-h-[90vh] flex flex-col rounded-lg",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Patient List"}),(0,X.jsx)(Io.rr,{children:"Select a patient to continue"})]}),(0,X.jsxs)("div",{className:`flex ${u?"flex-col":"flex-row"} justify-between items-center gap-2`,children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search patients...",value:s,onChange:e=>i(e.target.value),className:"pl-8 pr-8 h-8 text-sm w-full"}),s&&(0,X.jsx)("button",{onClick:()=>i(""),className:"absolute right-2 top-2.5 text-muted-foreground hover:text-foreground",children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})]}),(0,X.jsx)(w.$,{onClick:()=>{l((0,Be.PP)())},disabled:"loading"===c,className:"flex items-center",size:"sm",children:"loading"===c?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Cy,{className:"mr-2 h-4 w-4 animate-spin"}),"Refreshing..."]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Cy,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),(0,X.jsx)(b.F,{className:"flex-grow h-[calc(90vh-200px)] pr-2",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Name"}),!u&&(0,X.jsx)(Wo.nd,{children:"Mobile"}),!m&&(0,X.jsx)(Wo.nd,{children:"Gender"}),(0,X.jsx)(Wo.nd,{children:"Medications"})]})}),(0,X.jsx)(Wo.BF,{children:d.map((e=>{var t,n,s,i;return(0,X.jsxs)(Wo.Hj,{className:"cursor-pointer hover:bg-gray-100",onClick:()=>(e=>{l((0,Be.zC)(e)),r(!1),a(!0)})(e),children:[(0,X.jsx)(Wo.nA,{children:null===e||void 0===e||null===(t=e.patient)||void 0===t?void 0:t.name}),!u&&(0,X.jsx)(Wo.nA,{children:null===e||void 0===e||null===(n=e.patient)||void 0===n?void 0:n.contactNumber}),!m&&(0,X.jsx)(Wo.nA,{children:null===e||void 0===e||null===(s=e.patient)||void 0===s?void 0:s.gender}),(0,X.jsx)(Wo.nA,{children:null===e||void 0===e||null===(i=e.medications)||void 0===i?void 0:i.length})]},null===e||void 0===e?void 0:e._id)}))})]})})]})})}function Ty(e){let{onClearScreen:n,onPatientSelect:r}=e;const[a,s]=(0,t.useState)(!1),[i,o]=(0,t.useState)(!1),l=Ko("(max-width: 640px)");return(0,X.jsxs)("header",{className:"flex items-center justify-between p-1 bg-gray-100 border-b",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"text-gray-600",children:(0,X.jsx)(di,{className:"h-4 w-4"})}),(0,X.jsx)(ly.A,{className:"h-3 w-3 text-gray-400"}),(0,X.jsx)("span",{className:"font-semibold text-gray-700 text-sm",children:"Sales"})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(w.$,{variant:"default",size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white text-xs",onClick:()=>s(!0),children:l?(0,X.jsx)(ty,{className:"h-4 w-4"}):"Sales Today"}),(0,X.jsx)(w.$,{variant:"default",size:"sm",className:"bg-cyan-600 hover:bg-cyan-700 text-white text-xs",onClick:()=>o(!0),children:l?(0,X.jsx)(ri,{className:"h-4 w-4"}):"Patient List"}),(0,X.jsx)(w.$,{variant:"default",size:"sm",className:"bg-red-600 hover:bg-red-700 text-white text-xs",onClick:n,children:l?(0,X.jsx)(jy,{className:"h-4 w-4"}):"Clear Screen"})]}),(0,X.jsx)(Ey,{isOpen:a,setIsOpen:s}),(0,X.jsx)(Dy,{isOpen:i,setIsOpen:o,onPatientSelect:r})]})}const ky=(0,N.A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Ay=(0,N.A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Py=(0,N.A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Oy=e=>{var n,r,a,s;let{isOpen:i,setIsOpen:o,selectedPatient:l,onConfirm:c}=e;const[d,u]=(0,t.useState)([]);(0,t.useEffect)((()=>{l&&u([])}),[l]);const m=(e,t)=>e.split("-").reduce(((e,t)=>e+parseInt(t)),0)*parseInt(t);return(0,X.jsx)(Io.lG,{open:i,onOpenChange:()=>o(!1),children:(0,X.jsxs)(Io.Cf,{children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsxs)(Io.L3,{children:[null===l||void 0===l||null===(n=l.patient)||void 0===n?void 0:n.name,"'s Medications"]}),(0,X.jsx)(Io.rr,{children:"Select the medications you want to prescribe"})]}),(null===l||void 0===l||null===(r=l.medications)||void 0===r?void 0:r.length)>0?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:(0,X.jsx)(zl,{checked:d.length===(null===l||void 0===l||null===(a=l.medications)||void 0===a?void 0:a.length),onCheckedChange:e=>{if(e){var t;const e=null===l||void 0===l||null===(t=l.medications)||void 0===t?void 0:t.map((e=>({name:e.name,quantity:m(e.frequency,e.duration)})));u(e)}else u([])}})}),(0,X.jsx)(Wo.nd,{children:"Medication Name"}),(0,X.jsx)(Wo.nd,{children:"Frequency"}),(0,X.jsx)(Wo.nd,{children:"Duration"})]})}),(0,X.jsx)(Wo.BF,{children:null===l||void 0===l||null===(s=l.medications)||void 0===s?void 0:s.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(zl,{checked:d.some((t=>t.name===e.name)),onCheckedChange:()=>(e=>{u((t=>{const n=t.findIndex((t=>t.name===e.name));if(-1!==n)return t.filter(((e,t)=>t!==n));{const n=m(e.frequency,e.duration);return[...t,{name:e.name,quantity:n}]}}))})(e)})}),(0,X.jsx)(Wo.nA,{children:null===e||void 0===e?void 0:e.name}),(0,X.jsx)(Wo.nA,{children:null===e||void 0===e?void 0:e.frequency}),(0,X.jsx)(Wo.nA,{children:null===e||void 0===e?void 0:e.duration})]},t)))})]}),(0,X.jsx)(Io.Es,{children:(0,X.jsx)(w.$,{onClick:()=>{c(d),o(!1)},children:"Confirm"})})]}):(0,X.jsx)("div",{className:"text-center py-4",children:(0,X.jsx)("p",{children:"No medications found for this patient."})})]})})};function Ry(e){let{clearTrigger:n,shouldOpenMedicineSuggDialog:r,setShouldOpenMedicineSuggDialog:a}=e;const s=(0,j.wA)(),{toast:i}=(0,H.dj)(),{items:o,itemsStatus:l,createSalesBillStatus:c,error:d,salesBills:u,salesBillsStatus:m}=(0,j.d4)((e=>e.pharmacy)),{patientlist:h,status:p,selectedPatient:f}=(0,j.d4)((e=>e.patients)),[v,g]=(0,t.useState)(""),[x,y]=(0,t.useState)({name:"",phone:"",_id:"",type:""}),[N,_]=(0,t.useState)([]),[E,C]=(0,t.useState)({id:"",name:"",quantity:"",mrp:"",discount:""}),[D,T]=(0,t.useState)(""),[P,O]=(0,t.useState)(""),[R,M]=(0,t.useState)(""),[I,L]=(0,t.useState)(""),F=(0,t.useRef)(null),[B,W]=(0,t.useState)(null),[$,U]=(0,t.useState)(!1),[z,V]=(0,t.useState)(!1),[q,G]=(0,t.useState)(!1),K=Ko("(min-width: 1024px)"),Y=(0,t.useMemo)((()=>h.map((e=>({_id:e._id,patientId:e.patient._id,name:e.patient.name,phone:e.patient.contactNumber,gender:e.patient.gender,medications:e.medications,type:e.type})))),[h]);(0,t.useEffect)((()=>{"idle"===l&&s((0,st.LN)()),"idle"===m&&s((0,st.BS)()),"idle"===p&&s((0,Be.PP)())}),[s,l,m,p]);const Z=e=>{const{id:t,value:n}=e.target;y((e=>({...e,[t]:n})))},J=e=>{C((t=>({...t,mrp:e.MRP,id:e._id})))},Q=e=>{const{name:t,value:n}=e.target;C((e=>{const r={...e,[t]:n};if(r.quantity&&r.mrp){const e=parseFloat(r.quantity),t=parseFloat(r.mrp),n=parseFloat(r.discount)||0;r.total=e*t*(1-n/100)}else r.total=null;return r}))};(0,t.useEffect)((()=>{v&&C((e=>({...e,name:v})))}),[v]);const ee=e=>{_((t=>t.filter((t=>t.id!==e))))},te=e=>{const t=N.find((t=>t.id===e));ee(e),C(t),g(t.name)},ne=(0,t.useMemo)((()=>{const e=N.reduce(((e,t)=>e+t.total),0);return{subtotal:e,totalAmount:e-e*(R/100)}}),[N,R]),re=()=>{const e=N.map((e=>({item:e.id,quantity:e.quantity,MRP:e.mrp,discount:e.discount})));let t={};""!==x._id&&(t={_id:null===x||void 0===x?void 0:x._id,type:null===x||void 0===x?void 0:x.type});const n={items:e,patientInfo:{name:""===(null===x||void 0===x?void 0:x.name)?"Unknown":x.name,phone:x.phone},billInfo:t,totals:ne,paymentMethod:D,buyerName:P};s((0,st.C7)(n)).unwrap().then((()=>{se(),i({title:"Sales order created successfully!",variant:"success",description:"You can print the bill by clicking on recent bills"})})).catch((e=>{i({title:"Failed to create sales order",description:e.message,variant:"destructive"})}))},ae=e=>{const t=parseFloat(e.target.value);isNaN(t)?M(""):M(Math.min(Math.max(t,0),100))};(0,t.useEffect)((()=>{se()}),[n]);const se=()=>{y({name:"",phone:"",_id:"",type:""}),_([]),C({id:"",name:"",quantity:"",mrp:"",discount:""}),T(""),O(""),M(""),L(""),g("")};(0,t.useEffect)((()=>{f&&r&&(y({name:f.patient.name,phone:f.patient.contactNumber||"",_id:f._id||"",type:f.type||""}),V(!0),a(!1))}),[f,r]);return(0,X.jsxs)("div",{className:"flex flex-col px-2 md:px-0",children:[(0,X.jsxs)("div",{className:"flex-1",children:[!K&&(0,X.jsx)("div",{className:"w-full mb-4",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{className:"font-semibold",children:"Customer Information"})}),(0,X.jsxs)(k.Wu,{className:"space-y-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"name",children:"Customer Name"}),(0,X.jsx)(Vn.p,{id:"name",placeholder:"Enter Customer name",value:x.name,onChange:Z})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"phone",children:"Phone"}),(0,X.jsx)(Vn.p,{id:"phone",placeholder:"Phone Number",value:x.phone,onChange:Z})]})]})]})}),(0,X.jsxs)("div",{className:(K?"flex space-x-2":"space-y-4")+" md:h-[70vh] overflow-hidden",children:[(0,X.jsx)("div",{className:K?"w-3/4":"w-full",children:(0,X.jsx)(k.Zp,{className:"h-full pt-2",children:(0,X.jsx)(b.F,{className:K?"h-[calc(100vh-235px)]":"",children:(0,X.jsx)(k.Wu,{className:"px-4 h-full",children:(0,X.jsx)("form",{onSubmit:e=>{e.preventDefault();const t=parseInt(E.quantity),n=parseFloat(E.mrp),r=parseFloat(E.discount)||0,a=t*n,s=a-a*(r/100),i={...E,quantity:t,mrp:n,discount:r,total:s};_((e=>[...e,i])),C({name:"",quantity:"",mrp:"",discount:"",id:""}),g(""),F.current&&F.current.focus()},className:"h-full",children:K?(0,X.jsxs)(Wo.XI,{className:"w-full h-full",children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{className:"bg-blue-200 border-2 border-blue-300 hover:bg-blue-200",children:[(0,X.jsx)(Wo.nd,{className:"h-7 hidden lg:table-cell",children:"Sr."}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"Item Name"}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"Quantity"}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"MRP"}),(0,X.jsx)(Wo.nd,{className:"h-7 hidden lg:table-cell",children:"Discount (%)"}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"Total"}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"Action"})]})}),(0,X.jsxs)(Wo.BF,{children:[(0,X.jsxs)(Wo.Hj,{className:"border-2 border-blue-300 overflow-visible",children:[(0,X.jsx)(Wo.nA,{className:"hidden lg:table-cell"}),(0,X.jsx)(Wo.nA,{className:"overflow-visible",children:(0,X.jsx)(Gs.P,{suggestions:o,placeholder:"Enter Item name",value:v,setValue:g,ref:F,showStock:!0,onSuggestionSelect:J})}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Vn.p,{type:"number",name:"quantity",value:E.quantity,onChange:Q,placeholder:"0",className:"h-7 text-sm w-20",required:!0})}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Vn.p,{type:"number",name:"mrp",value:E.mrp,onChange:Q,placeholder:"0.00",className:"h-7 text-sm w-24",required:!0})}),(0,X.jsx)(Wo.nA,{className:"hidden lg:table-cell",children:(0,X.jsx)(Vn.p,{type:"number",name:"discount",value:E.discount,onChange:Q,placeholder:"0",className:"h-7 text-sm w-20"})}),(0,X.jsx)(Wo.nA,{className:"w-20",children:E.quantity&&E.mrp?`\u20b9${E.total.toLocaleString()}`:"\u20b90.00"}),(0,X.jsxs)(Wo.nA,{children:[(0,X.jsx)(w.$,{type:"submit",size:"icon",variant:"outline",className:"h-7 w-7 mr-1",children:(0,X.jsx)(S.A,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{type:"button",size:"icon",variant:"outline",className:"h-7 w-7",onClick:()=>{C({name:"",quantity:"",mrp:"",discount:""}),g("")},children:(0,X.jsx)(ky,{className:"h-4 w-4"})})]})]}),0===N.length?(0,X.jsx)(Wo.Hj,{className:"hover:bg-white border-b-0",children:(0,X.jsx)(Wo.nA,{colSpan:8,className:"text-center py-8",children:(0,X.jsxs)("div",{className:"flex flex-col items-center text-gray-500",children:[(0,X.jsx)(Ay,{className:"h-12 w-12 mb-2"}),(0,X.jsx)("span",{children:"No items added yet."})]})})}):N.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:t+1}),(0,X.jsx)(Wo.nA,{children:e.name}),(0,X.jsx)(Wo.nA,{children:e.quantity}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.mrp.toFixed(2)]}),(0,X.jsxs)(Wo.nA,{children:[e.discount,"%"]}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.total.toFixed(2)]}),(0,X.jsxs)(Wo.nA,{children:[(0,X.jsx)(w.$,{size:"icon",variant:"outline",className:"h-7 w-7 mr-1",onClick:()=>te(e.id),children:(0,X.jsx)(Py,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:()=>ee(e.id),children:(0,X.jsx)(ky,{className:"h-4 w-4"})})]})]},e.id))),(0,X.jsx)(Wo.Hj,{style:{height:250-40*N.length+"px",display:N.length<=5?"block":"none"},className:"w-full"})]})]}):(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)(k.Zp,{children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Gs.P,{suggestions:o,placeholder:"Enter Item name",value:v,setValue:g,ref:F,showStock:!0,onSuggestionSelect:J}),(0,X.jsxs)("div",{className:"flex gap-2",children:[(0,X.jsx)(Vn.p,{type:"number",name:"quantity",value:E.quantity,onChange:Q,placeholder:"Quantity",className:"w-full",required:!0}),(0,X.jsx)(Vn.p,{type:"number",name:"mrp",value:E.mrp,onChange:Q,placeholder:"MRP",className:"w-full",required:!0}),(0,X.jsx)(Vn.p,{type:"number",name:"discount",value:E.discount,onChange:Q,placeholder:"Dis(%)",className:"w-full"})]}),(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsxs)("span",{children:["Total: \u20b9",E.total?E.total.toLocaleString():"0.00"]}),(0,X.jsx)(w.$,{type:"submit",size:"sm",children:"Add Item"})]})]})})}),(0,X.jsx)(Mo,{className:"my-2"}),(0,X.jsx)("h1",{className:"text-lg font-semibold",children:"Items Added:"}),0===N.length?(0,X.jsx)(k.Zp,{className:"py-8",children:(0,X.jsxs)(k.Wu,{className:"flex flex-col items-center text-gray-500",children:[(0,X.jsx)(Ay,{className:"h-12 w-12 mb-2"}),(0,X.jsx)("span",{children:"No items added yet."})]})}):N.map(((e,t)=>(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:e.name})}),(0,X.jsxs)(k.Wu,{className:"grid grid-cols-5 px-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2 col-span-4",children:[(0,X.jsxs)("div",{children:["Qty: ",e.quantity]}),(0,X.jsxs)("div",{children:["MRP: \u20b9",e.mrp.toFixed(2)]}),(0,X.jsxs)("div",{children:["Dis: ",e.discount,"%"]}),(0,X.jsxs)("div",{children:["Total: \u20b9",e.total.toFixed(2)]})]}),(0,X.jsxs)("div",{className:"w-full flex flex-col items-end",children:[(0,X.jsx)(w.$,{size:"icon",variant:"outline",onClick:()=>te(e.id),children:(0,X.jsx)(Py,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{size:"icon",variant:"outline",onClick:()=>ee(e.id),children:(0,X.jsx)(ky,{className:"h-4 w-4"})})]})]})]},e.id)))]})})})})})}),K&&(0,X.jsxs)("div",{className:"w-1/4",children:[(0,X.jsxs)(k.Zp,{className:"mb-4",children:[(0,X.jsx)(k.aR,{className:"pb-2",children:(0,X.jsx)(k.ZB,{className:"p-0 font-semibold",children:"Search Patients"})}),(0,X.jsx)(k.Wu,{className:"pb-2",children:(0,X.jsx)(Gs.P,{suggestions:Y,placeholder:"Enter patient name or mobile",value:I,setValue:L,onSuggestionSelect:e=>{y({name:e.name,phone:e.phone||"",_id:e._id||"",type:e.type||""});const t=h.find((t=>t._id===e._id));s((0,Be.zC)(t)),a(!0)}})})]}),(0,X.jsxs)(k.Zp,{className:"mb-4",children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{className:"font-semibold",children:"Customer Information"})}),(0,X.jsxs)(k.Wu,{className:"space-y-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"name",children:"Customer Name"}),(0,X.jsx)(Vn.p,{id:"name",placeholder:"Enter Customer name",value:x.name,onChange:Z})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"phone",children:"Phone"}),(0,X.jsx)(Vn.p,{id:"phone",placeholder:"Phone Number",value:x.phone,onChange:Z})]})]})]}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{className:"pb-2",children:(0,X.jsx)(k.ZB,{className:"font-semibold",children:"Recent Bills"})}),(0,X.jsx)(k.Wu,{children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{className:"p-0 space-y-0",children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Customer Name"}),(0,X.jsx)(Wo.nd,{children:"Amount"})]})}),(0,X.jsx)(Wo.BF,{children:u.slice(0,3).map((e=>(0,X.jsxs)(Wo.Hj,{className:"cursor-pointer hover:bg-gray-100",onClick:()=>(e=>{W(e),U(!0)})(e),children:[(0,X.jsx)(Wo.nA,{children:e.patientInfo.name}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.totalAmount.toFixed(2)]})]},e._id)))})]})})]})]})]}),(0,X.jsx)(k.Zp,{className:"mt-2",children:(0,X.jsx)(k.Wu,{className:"p-2",children:(0,X.jsxs)("form",{className:`grid ${K?"grid-cols-4":"grid-cols-1"} gap-4 p-2`,onSubmit:e=>{e.preventDefault(),0!==N.length?""!==D?"Due"!==D||""!==P?""!==x.name.trim()?re():G(!0):i({title:"Please enter buyer name"}):i({title:"Please select payment method"}):i({title:"Please add items to create a sales order"})},children:[(0,X.jsxs)("div",{className:`grid ${K?"col-span-3 grid-cols-4":"grid-cols-1"} gap-4`,children:[(0,X.jsx)("div",{className:"h-full flex items-center",children:(0,X.jsxs)(A.l6,{onValueChange:e=>{T(e)},value:D,className:"w-full h-full",children:[(0,X.jsx)(A.bq,{id:"payment-method",children:(0,X.jsx)(A.yv,{placeholder:"Select payment method"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Cash",children:"Cash"}),(0,X.jsx)(A.eb,{value:"UPI",children:"UPI"}),(0,X.jsx)(A.eb,{value:"Card",children:"Card"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"}),(0,X.jsx)(A.eb,{value:"Due",children:"Due"})]})]})}),(0,X.jsx)(My,{label:"Buyer Name",value:P,onChange:e=>O(e.target.value),className:"w-full",placeholder:"Enter buyer name"}),K?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(My,{label:"Additional Discount (%)",value:R,onChange:ae,onFocus:e=>{e.target.select()},className:"w-full",placeholder:"0",suffix:"%",min:"0",max:"100"}),(0,X.jsx)(My,{label:"Total",value:`\u20b9${ne.totalAmount.toFixed(2)}`,readOnly:!0,className:"w-full"})]}):(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsx)(My,{label:"Additional Disc (%)",value:R,onChange:ae,onFocus:e=>{e.target.select()},className:"w-full",placeholder:"0",suffix:"%",min:"0",max:"100"}),(0,X.jsx)(My,{label:"Total",value:`\u20b9${ne.totalAmount.toFixed(2)}`,readOnly:!0,className:"w-full"})]})]}),(0,X.jsxs)("div",{className:`grid ${K?"grid-cols-2":"grid-cols-1"} gap-4 items-center`,children:[(0,X.jsx)(w.$,{variant:"outline",size:"sm",className:"hidden md:block",onClick:()=>{},disabled:!0,children:"Save Draft"}),(0,X.jsx)(w.$,{className:"bg-green-500 hover:bg-green-600",size:"sm",type:"submit",disabled:"loading"===c,children:"loading"===c?"Creating...":"Create Sales Order"})]})]})})})]}),(0,X.jsx)(Ny,{isOpen:$,setIsOpen:U,billData:B}),(0,X.jsx)(Oy,{isOpen:z,setIsOpen:V,selectedPatient:f,onConfirm:e=>{const t=e.map((e=>{const t=o.find((t=>t.name===e.name));if(t)return{id:t._id,name:t.name,quantity:parseInt(e.quantity),mrp:parseFloat(t.MRP),discount:0,total:parseFloat(t.MRP)*parseInt(e.quantity)}})).filter((e=>void 0!==e));_((e=>[...e,...t])),s((0,Be.zC)(null))}}),(0,X.jsx)(Ce,{open:q,onOpenChange:G,children:(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Create Unknown Sale?"}),(0,X.jsx)(Me,{children:"The customer name is empty. Do you want to create an unknown sale?"})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{children:"Cancel"}),(0,X.jsx)(Ie,{onClick:()=>{y((e=>({...e,name:"Unknown"}))),G(!1),re()},children:"Continue"})]})]})})]})}const My=t.memo((e=>{let{label:t,value:n,readOnly:r=!1,onChange:a,className:s="",type:i="text",placeholder:o="",required:l=!1,suffix:c="",onFocus:d,min:u,max:m}=e;return(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)("input",{type:i,value:n,readOnly:r,onChange:a,onFocus:d,className:`pl-2 pr-8 pt-4 pb-1 w-full text-sm border rounded ${s} [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none`,placeholder:o,required:l,min:u,max:m}),(0,X.jsx)("label",{className:"absolute text-xs text-gray-500 top-1 left-2",children:t}),c&&(0,X.jsx)("span",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-sm text-gray-500",children:c})]})})),Iy=()=>{const[e,n]=(0,t.useState)(!1),[r,a]=(0,t.useState)(!1),s=(0,j.wA)(),i=(0,t.useCallback)((()=>{n((e=>!e)),s((0,Be.zC)(null)),a(!1)}),[]),o=(0,t.useCallback)((()=>{a(!0)}),[]);return(0,X.jsxs)("div",{className:"h-full",children:[(0,X.jsx)(Ty,{onClearScreen:i,onPatientSelect:o}),(0,X.jsx)(Ry,{clearTrigger:e,shouldOpenMedicineSuggDialog:r,setShouldOpenMedicineSuggDialog:a})]})},Ly=(0,N.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function Fy(){const e=(0,j.wA)(),{toast:n}=(0,H.dj)(),[r,a]=(0,t.useState)({name:"",phone:"",email:"",address:""}),[s,i]=(0,t.useState)([]),[o,l]=(0,t.useState)({id:"",name:"",type:"",quantity:"",MRP:"",discount:"",expiryDate:""}),[c,d]=(0,t.useState)(""),{createOrderStatus:u,error:m,suppliers:h,suppliersStatus:p,selectedSupplier:f}=(0,j.d4)((e=>e.pharmacy)),[v,g]=(0,t.useState)(""),[x,y]=(0,t.useState)([]);(0,t.useEffect)((()=>{"idle"===p&&e((0,st.qQ)())}),[e,p]),(0,t.useEffect)((()=>{f&&(a({name:f.name,phone:f.phone,email:f.email,address:f.address}),y(f.items))}),[f]);const b=e=>{const{id:t,value:n}=e.target;a((e=>({...e,[t]:n})))},N=e=>{const{name:t,value:n}=e.target;l((e=>{const r={...e,[t]:n};if(r.quantity&&r.MRP){const e=parseFloat(r.quantity)*parseFloat(r.MRP),t=e*((parseFloat(r.discount)||0)/100);r.total=e-t}else r.total=null;return r}))},_=()=>{if(!o.name||!o.quantity||!o.MRP)return void n({title:"Please fill in at least the item name, quantity, and MRP.",variant:"destructive"});const e=parseInt(o.quantity),t=parseFloat(o.MRP),r=parseFloat(o.discount)||0,a=e*t,s=a-a*(r/100),c={...o,quantity:e,MRP:t,discount:r,total:s,expiryDate:o.expiryDate};i((e=>[...e,c])),l({name:"",type:"",quantity:"",MRP:"",discount:"",expiryDate:"",id:""})},E=e=>{i((t=>t.filter((t=>t.id!==e))))},C=(()=>{const e=s.reduce(((e,t)=>{const n=t.quantity*t.MRP,r=n*(t.discount/100);return e.subtotal+=n,e.discountTotal+=r,e.grandTotal+=n-r,e}),{subtotal:0,discountTotal:0,grandTotal:0}),t=e.grandTotal-parseFloat(c||0);return{...e,dueAmount:t}})(),D=t=>{if(t.preventDefault(),0===s.length)return void alert("Please add at least one item to the purchase order.");if(""===r.name||""===r.phone)return void alert("Please fill name and phone the supplier information.");const n={supplierInfo:r,items:s,total:{subtotal:C.subtotal,totalAmount:C.grandTotal,paidAmount:parseFloat(c)||0}};e((0,st.fS)(n))};return(0,X.jsx)("div",{className:"flex flex-col",children:(0,X.jsxs)("div",{className:"flex-1",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between p-1 space-x-1 bg-gray-100",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"text-gray-600",children:(0,X.jsx)(di,{className:"h-4 w-4"})}),(0,X.jsx)(ly.A,{className:"h-3 w-3 text-gray-400"}),(0,X.jsx)("span",{className:"font-semibold text-gray-700 text-sm",children:"Purchase Order"})]}),(0,X.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>{a({name:"",phone:"",email:"",address:""}),i([]),l({id:"",name:"",type:"",quantity:"",MRP:"",discount:"",expiryDate:""}),d(""),g(""),e((0,st.rU)())},className:"whitespace-nowrap",children:"Clear All"})]}),(0,X.jsxs)("div",{className:"flex space-x-2 h-[calc(100vh-245px)]",children:[(0,X.jsx)("div",{className:"w-3/4 space-y-4 h-full",children:(0,X.jsx)(k.Zp,{className:"h-full",children:(0,X.jsx)(k.Wu,{className:"px-4 pt-2",children:(0,X.jsx)("form",{onSubmit:e=>{e.preventDefault(),_()},children:(0,X.jsxs)(Wo.XI,{className:"w-full",children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{className:"bg-blue-200 border-2 border-blue-300 hover:bg-blue-200",children:[(0,X.jsx)(Wo.nd,{className:"h-7",children:"Sr."}),(0,X.jsx)(Wo.nd,{className:"h-7 ",children:"Item Name"}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"Type"}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"Quantity"}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"MRP"}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"Disc (%)"}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"Expiry Date"}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"Total"}),(0,X.jsx)(Wo.nd,{className:"h-7",children:"Action"})]})}),(0,X.jsxs)(Wo.BF,{children:[(0,X.jsxs)(Wo.Hj,{className:"border-2 border-blue-300",children:[(0,X.jsx)(Wo.nA,{}),(0,X.jsx)(Wo.nA,{className:"w-40",children:(0,X.jsx)(Gs.P,{suggestions:x,placeholder:"Enter Item name",value:o.name,setValue:e=>l((t=>({...t,name:e}))),onSuggestionSelect:e=>{l((t=>({...t,name:e.name,type:e.type,MRP:e.MRP,id:e._id})))}})}),(0,X.jsx)(Wo.nA,{children:(0,X.jsxs)(A.l6,{name:"type",value:o.type,onValueChange:e=>{l((t=>({...t,type:e})))},children:[(0,X.jsx)(A.bq,{className:"h-7 text-sm w-28",children:(0,X.jsx)(A.yv,{placeholder:"Type"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Tablet",children:"Tablet"}),(0,X.jsx)(A.eb,{value:"Capsule",children:"Capsule"}),(0,X.jsx)(A.eb,{value:"Injection",children:"Injection"}),(0,X.jsx)(A.eb,{value:"syrup",children:"Syrup"}),(0,X.jsx)(A.eb,{value:"Liquid",children:"Liquid"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]})]})}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Vn.p,{type:"number",name:"quantity",value:o.quantity,onChange:N,placeholder:"0",className:"h-7 text-sm w-20",required:!0})}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Vn.p,{type:"number",name:"MRP",value:o.MRP,onChange:N,placeholder:"0.00",className:"h-7 text-sm w-20",required:!0})}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Vn.p,{type:"number",name:"discount",value:o.discount,onChange:N,placeholder:"0",className:"h-7 text-sm w-20"})}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Vn.p,{type:"month",size:"sm",name:"expiryDate",value:o.expiryDate,onChange:N,className:"h-7 text-sm w-25"})}),(0,X.jsx)(Wo.nA,{className:"w-20",children:o.quantity&&o.MRP?`\u20b9${o.total.toLocaleString("en-IN")}`:"\u20b90.00"}),(0,X.jsxs)(Wo.nA,{children:[(0,X.jsx)(w.$,{type:"submit",size:"icon",variant:"outline",className:"h-7 w-7 mr-1",children:(0,X.jsx)(S.A,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{type:"button",size:"icon",variant:"outline",className:"h-7 w-7",onClick:()=>{l({name:"",type:"",quantity:"",MRP:"",discount:"",expiryDate:""})},children:(0,X.jsx)(ky,{className:"h-4 w-4"})})]})]}),0===s.length?(0,X.jsx)(Wo.Hj,{className:"hover:bg-white border-b-0",children:(0,X.jsx)(Wo.nA,{colSpan:8,className:"text-center py-8",children:(0,X.jsxs)("div",{className:"flex flex-col items-center text-gray-500",children:[(0,X.jsx)(Ay,{className:"h-12 w-12 mb-2"}),(0,X.jsx)("span",{children:"No items added yet."})]})})}):s.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:t+1}),(0,X.jsx)(Wo.nA,{children:e.name}),(0,X.jsx)(Wo.nA,{children:e.type}),(0,X.jsx)(Wo.nA,{children:e.quantity}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.MRP.toFixed(2)]}),(0,X.jsxs)(Wo.nA,{children:[e.discount,"%"]}),(0,X.jsx)(Wo.nA,{children:e.expiryDate}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.total.toLocaleString("en-IN")]}),(0,X.jsxs)(Wo.nA,{children:[(0,X.jsx)(w.$,{size:"icon",variant:"outline",className:"h-7 w-7 mr-1",onClick:()=>(e=>{const t=s.find((t=>t.id===e));E(e),l(t)})(e.id),children:(0,X.jsx)(Py,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{size:"icon",variant:"outline",className:"h-7 w-7",onClick:()=>E(e.id),children:(0,X.jsx)(ky,{className:"h-4 w-4"})})]})]},e.id))),(0,X.jsx)(Wo.Hj,{style:{height:250-40*s.length+"px",display:s.length<=5?"block":"none"},className:"w-full"})]})]})})})})}),(0,X.jsxs)("div",{className:"w-1/4 space-y-2",children:[(0,X.jsxs)(k.Zp,{className:"flex-grow",children:[(0,X.jsx)(k.aR,{className:"pb-2",children:(0,X.jsx)(k.ZB,{className:"p-0 font-semibold",children:"Search Supplier"})}),(0,X.jsx)(k.Wu,{className:"pb-4",children:(0,X.jsx)(Gs.P,{suggestions:h,placeholder:"Enter Supplier name",value:v,setValue:g,onSuggestionSelect:t=>{i([]),l({id:"",name:"",type:"",quantity:"",MRP:"",discount:"",expiryDate:""}),e((0,st.ZJ)(t._id))}})})]}),(0,X.jsxs)(k.Zp,{className:"h-[calc(100vh-346px)]",children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Supplier Information"})}),(0,X.jsxs)(k.Wu,{className:"space-y-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"name",children:"Name"}),(0,X.jsx)(Vn.p,{id:"name",placeholder:"Supplier Name",value:r.name,onChange:b})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"phone",children:"Phone"}),(0,X.jsx)(Vn.p,{id:"phone",placeholder:"Phone Number",value:r.phone,onChange:b})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"email",children:"Email"}),(0,X.jsx)(Vn.p,{id:"email",type:"email",placeholder:"Email Address",value:r.email,onChange:b})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"address",children:"Address"}),(0,X.jsx)(Xo.T,{id:"address",placeholder:"Supplier Address",value:r.address,onChange:b})]})]})]})]})]}),(0,X.jsx)(k.Zp,{className:"mt-2 p-2 flex items-center",children:(0,X.jsx)(k.Wu,{className:" w-full p-2",children:(0,X.jsxs)("form",{className:"grid grid-cols-4 gap-4 p-2",onSubmit:D,children:[(0,X.jsxs)("div",{className:"grid col-span-3 grid-cols-5 gap-4",children:[(0,X.jsx)(By,{label:"Subtotal",value:`\u20b9${C.subtotal.toLocaleString("en-IN")}`,readOnly:!0,className:"w-full"}),(0,X.jsx)(By,{label:"Discount Total",value:`\u20b9${C.discountTotal.toLocaleString("en-IN")}`,readOnly:!0,className:"w-full"}),(0,X.jsx)(By,{label:"Grand Total",value:`\u20b9${C.grandTotal.toLocaleString("en-IN")}`,readOnly:!0,className:"w-full font-bold"}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(By,{label:"Amount Paying",type:"number",value:c,onChange:e=>d(e.target.value),className:"w-full",placeholder:"Type Amount",required:!0}),(0,X.jsx)(w.$,{type:"button",size:"icon",variant:"ghost",className:"absolute right-0 top-1/2 transform -translate-y-1/2",onClick:()=>{d(C.grandTotal.toFixed(2))},children:(0,X.jsx)(Ly,{className:"h-4 w-4 hover:text-green-500"})})]}),(0,X.jsx)(By,{label:"Due Amount",value:`\u20b9${C.dueAmount.toLocaleString("en-IN")}`,readOnly:!0,className:"w-full font-bold text-red-500"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4 items-center",children:[(0,X.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>{},children:"Save Draft"}),(0,X.jsx)(w.$,{className:"bg-green-500 hover:bg-green-600",size:"sm",type:"submit",onClick:D,children:"Create Purchase Order"})]})]})})})]})})}const By=e=>{let{label:t,value:n,readOnly:r=!1,onChange:a,className:s="",type:i="text",placeholder:o="",required:l=!1}=e;return(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)("input",{type:i,value:n,readOnly:r,onChange:a,className:`pl-2 pr-2 pt-4 pb-1 w-full text-sm border rounded ${s} [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none`,placeholder:o,required:l}),(0,X.jsx)("label",{className:"absolute text-xs text-gray-500 top-1 left-2",children:t})]})},Wy=(0,N.A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),$y=(0,N.A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Uy=(0,N.A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),zy=(0,N.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var Hy=__webpack_require__(7358);function Vy(e){return(0,kc.o)(Date.now(),e)}function qy(e){return(0,Ac.D)(Date.now(),e)}const Gy=()=>{const e=(0,j.wA)(),n=(0,a.Zp)(),{salesBills:r,salesBillsStatus:s,items:i,itemsStatus:o}=(0,j.d4)((e=>e.pharmacy)),{hospitalInfo:l}=(0,j.d4)((e=>e.hospital)),c=Zc("(max-width: 640px)");(0,t.useEffect)((()=>{"idle"===s&&e((0,st.BS)()),"idle"===o&&e((0,st.LN)())}),[e,s,o]);const d=i.filter((e=>e.quantity<=200)),u=(0,iy.P)(new Date,Number(null===l||void 0===l?void 0:l.pharmacyExpiryThreshold)),m=i.filter((e=>{if(!e.expiryDate)return!1;const t=new Date(e.expiryDate);return(0,Hy.Y)(t,u)})),h=(0,t.useMemo)((()=>{const e=Vy(),t=qy();return r.reduce(((n,r)=>{const a=new Date(r.createdAt);return a>=e&&a<=t&&(n.count++,n.totalAmount+=r.totalAmount),n}),{count:0,totalAmount:0})}),[r]),p=e=>{if(!e)return{status:null,variant:"secondary"};const t=new Date,n=El(new Date(e),t);return n<0?{status:"Expired",variant:"destructive"}:n<=30?{status:"Expiring Soon",variant:"warning",daysLeft:n}:{status:"OK",variant:"default",daysLeft:n}},f=e=>{var t;let{item:n}=e;return(0,X.jsx)(k.Zp,{className:"mb-4 hover:shadow-md transition-shadow",children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"flex flex-col",children:[(0,X.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,X.jsxs)("h3",{className:"text-lg font-semibold capitalize",children:[n.name,(0,X.jsxs)("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",n.type,")"]})]})}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mb-3",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ay,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,X.jsxs)("span",{className:"text-sm",children:["Stock: ",n.quantity]})]}),(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsxs)("span",{className:"text-sm capitalize",children:["Supplier: ",(null===n||void 0===n||null===(t=n.supplier)||void 0===t?void 0:t.name)||"\u2014"]})})]})]})})})},v=e=>{var t;let{item:n}=e;const{status:r,variant:a,daysLeft:s}=p(n.expiryDate);return(0,X.jsx)(k.Zp,{className:"mb-4 hover:shadow-md transition-shadow",children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"flex flex-col",children:[(0,X.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,X.jsxs)("h3",{className:"text-lg font-semibold capitalize",children:[n.name,(0,X.jsxs)("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",n.type,")"]})]})}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mb-3",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ay,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,X.jsxs)("span",{className:"text-sm",children:["Stock: ",n.quantity]})]}),(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsxs)("span",{className:"text-sm capitalize",children:["Supplier: ",(null===n||void 0===n||null===(t=n.supplier)||void 0===t?void 0:t.name)||"\u2014"]})}),(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsxs)("span",{className:"text-sm",children:["Expiry: ",n.expiryDate?(0,Go.GP)(new Date(n.expiryDate),"MMM dd, yyyy"):"\u2014"]})}),(0,X.jsx)("div",{className:"flex items-center",children:r&&(0,X.jsxs)(Yo.E,{variant:a,children:[r,"Expiring Soon"===r&&` (${s} ${1===s?"day":"days"})`]})})]})]})})})};return(0,X.jsxs)("div",{children:[(0,X.jsxs)("div",{className:"flex justify-between items-center bg-gray-100 pr-2",children:[(0,X.jsxs)("div",{className:"flex items-center p-1 space-x-1",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"text-gray-600",children:(0,X.jsx)(di,{className:"h-4 w-4"})}),(0,X.jsx)(ly.A,{className:"h-3 w-3 text-gray-400"}),(0,X.jsx)("span",{className:"font-semibold text-gray-700 text-sm",children:"Pharmacy Reports"})]}),(0,X.jsx)("div",{className:"flex items-center space-x-4"})]}),(0,X.jsxs)("main",{className:"flex-1 overflow-y-auto mt-2 mx-2 md:mx-0",children:[(0,X.jsxs)("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4 mb-4",children:[(0,X.jsxs)(k.Zp,{children:[(0,X.jsxs)(k.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,X.jsx)(k.ZB,{className:"text-sm font-medium",children:"Items Expiring Soon"}),(0,X.jsx)(Wy,{className:"w-4 h-4 text-yellow-500"})]}),(0,X.jsxs)(k.Wu,{children:[(0,X.jsx)("div",{className:"text-2xl font-bold",children:m.length}),(0,X.jsx)("p",{className:"text-xs text-muted-foreground",children:"Within next 60 days"})]})]}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsxs)(k.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,X.jsx)(k.ZB,{className:"text-sm font-medium",children:"Low Stock Items"}),(0,X.jsx)($y,{className:"w-4 h-4 text-red-500"})]}),(0,X.jsxs)(k.Wu,{children:[(0,X.jsx)("div",{className:"text-2xl font-bold",children:d.length}),(0,X.jsx)("p",{className:"text-xs text-muted-foreground",children:"Below reorder level"})]})]}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsxs)(k.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,X.jsx)(k.ZB,{className:"text-sm font-medium",children:"Total Sales Today"}),(0,X.jsx)(Uy,{className:"w-4 h-4 text-green-500"})]}),(0,X.jsxs)(k.Wu,{children:[(0,X.jsxs)("div",{className:"text-2xl font-bold",children:["\u20b9",h.totalAmount.toLocaleString("en-IN",{maximumFractionDigits:2})]}),(0,X.jsx)("p",{className:"text-xs text-muted-foreground",children:"Today's total"})]})]}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsxs)(k.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,X.jsx)(k.ZB,{className:"text-sm font-medium",children:"Bills Generated Today"}),(0,X.jsx)(zy,{className:"w-4 h-4 text-blue-500"})]}),(0,X.jsxs)(k.Wu,{children:[(0,X.jsx)("div",{className:"text-2xl font-bold",children:h.count}),(0,X.jsx)("p",{className:"text-xs text-muted-foreground",children:"Today's total"})]})]})]}),(0,X.jsxs)(yl,{defaultValue:"expiring",className:"space-y-4",children:[(0,X.jsxs)(bl,{className:"grid w-full lg:w-1/3 grid-cols-3 sm:grid-cols-3 mb-4",children:[(0,X.jsx)(jl,{value:"expiring",children:"Expiring Items"}),(0,X.jsx)(jl,{value:"lowstock",children:"Low Stock"}),(0,X.jsx)(jl,{value:"bills",children:"Recent Bills"})]}),(0,X.jsx)(wl,{value:"expiring",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Items Expiring Soon"})}),(0,X.jsx)(k.Wu,{className:"overflow-x-auto px-4",children:c?(0,X.jsx)("div",{children:m.length>0?m.map(((e,t)=>(0,X.jsx)(v,{item:e},t))):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500 py-8",children:[(0,X.jsx)(Xc,{className:"w-12 h-12 mb-2"}),(0,X.jsx)("p",{className:"font-semibold text-center",children:"No items expiring in the next 2 months"})]})}):(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"whitespace-nowrap",children:"Item Name"}),(0,X.jsx)(Wo.nd,{className:"whitespace-nowrap",children:"Type"}),(0,X.jsx)(Wo.nd,{className:"whitespace-nowrap",children:"Supplier"}),(0,X.jsx)(Wo.nd,{className:"whitespace-nowrap",children:"Expiry Date"}),(0,X.jsx)(Wo.nd,{className:"whitespace-nowrap",children:"Quantity"}),(0,X.jsx)(Wo.nd,{className:"whitespace-nowrap",children:"Status"})]})}),(0,X.jsx)(Wo.BF,{children:m.length>0?m.map(((e,t)=>{var n;const{status:r,variant:a,daysLeft:s}=p(e.expiryDate);return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"capitalize",children:e.name}),(0,X.jsx)(Wo.nA,{children:e.type}),(0,X.jsx)(Wo.nA,{className:"capitalize",children:(null===e||void 0===e||null===(n=e.supplier)||void 0===n?void 0:n.name)||"\u2014\u2014"}),(0,X.jsx)(Wo.nA,{children:e.expiryDate?(0,Go.GP)(new Date(e.expiryDate),"MMM dd, yyyy"):"\u2014"}),(0,X.jsx)(Wo.nA,{children:e.quantity}),(0,X.jsx)(Wo.nA,{children:r?(0,X.jsxs)(Yo.E,{variant:a,children:[r,"Expiring Soon"===r&&` (${s} ${1===s?"day":"days"})`]}):"\u2014"})]},t)})):(0,X.jsx)(Wo.Hj,{children:(0,X.jsx)(Wo.nA,{colSpan:6,className:"h-24 text-center",children:(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[(0,X.jsx)(Xc,{className:"w-8 h-8 mb-2"}),(0,X.jsx)("p",{className:"font-semibold",children:"No items expiring in the next 2 months"})]})})})})]})})]})}),(0,X.jsx)(wl,{value:"lowstock",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Low Stock Items"})}),(0,X.jsx)(k.Wu,{className:"overflow-x-auto px-4",children:c?(0,X.jsx)("div",{children:d.length>0?d.map(((e,t)=>(0,X.jsx)(f,{item:e},t))):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500 py-8",children:[(0,X.jsx)(Xc,{className:"w-12 h-12 mb-2"}),(0,X.jsx)("p",{className:"font-semibold text-center",children:"No low stock items available"})]})}):(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"whitespace-nowrap",children:"Item Name"}),(0,X.jsx)(Wo.nd,{className:"whitespace-nowrap",children:"Type"}),(0,X.jsx)(Wo.nd,{className:"whitespace-nowrap",children:"Supplier"}),(0,X.jsx)(Wo.nd,{className:"whitespace-nowrap",children:"Current Stock"})]})}),(0,X.jsx)(Wo.BF,{children:d.length>0?d.map(((e,t)=>{var n;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"capitalize",children:e.name}),(0,X.jsx)(Wo.nA,{children:null===e||void 0===e?void 0:e.type}),(0,X.jsx)(Wo.nA,{className:"capitalize",children:(null===e||void 0===e||null===(n=e.supplier)||void 0===n?void 0:n.name)||"\u2014"}),(0,X.jsx)(Wo.nA,{children:null===e||void 0===e?void 0:e.quantity})]},t)})):(0,X.jsx)(Wo.Hj,{children:(0,X.jsx)(Wo.nA,{colSpan:5,className:"h-24 text-center",children:(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[(0,X.jsx)(Xc,{className:"w-8 h-8 mb-2"}),(0,X.jsx)("p",{className:"font-semibold",children:"No low stock items available"})]})})})})]})})]})}),(0,X.jsx)(wl,{value:"bills",children:(0,X.jsxs)(k.Zp,{children:[(0,X.jsxs)(k.aR,{className:"flex flex-row items-center justify-between space-y-2 sm:space-y-0 space-x-2",children:[(0,X.jsx)("h1",{className:"text-lg font-semibold",children:"Recent Bills Generated"}),(0,X.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>n("/pharmacy/all-bills"),children:"View All"})]}),(0,X.jsx)(k.Wu,{className:"px-4",children:(0,X.jsx)(Sy,{bills:r.slice(0,5)})})]})})]})]})]})};var Ky=__webpack_require__(8387),Yy=__webpack_require__(9889),Xy=__webpack_require__.n(Yy),Zy=__webpack_require__(620),Jy=__webpack_require__.n(Zy),Qy=__webpack_require__(5268),eb=__webpack_require__.n(Qy),tb=__webpack_require__(3097),nb=__webpack_require__.n(tb),rb=__webpack_require__(9160),ab=__webpack_require__.n(rb),sb=function(e){return 0===e?0:e>0?1:-1},ib=function(e){return Jy()(e)&&e.indexOf("%")===e.length-1},ob=function(e){return ab()(e)&&!eb()(e)},lb=function(e){return ob(e)||Jy()(e)},cb=0,db=function(e){var t=++cb;return"".concat(e||"").concat(t)},ub=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!ob(e)&&!Jy()(e))return r;if(ib(e)){var s=e.indexOf("%");n=t*parseFloat(e.slice(0,s))/100}else n=+e;return eb()(n)&&(n=r),a&&n>t&&(n=t),n},mb=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},hb=function(e,t){return ob(e)&&ob(t)?function(n){return e+n*(t-e)}:function(){return t}};function pb(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"===typeof t?t(e):nb()(e,t))===n})):null}var fb=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a]},vb=__webpack_require__(9686),gb=__webpack_require__.n(vb),xb=__webpack_require__(1629),yb=__webpack_require__.n(xb),bb=__webpack_require__(6686),jb=__webpack_require__.n(bb),wb=__webpack_require__(9062);function Nb(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function _b(e){return _b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_b(e)}var Sb=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Eb=["points","pathLength"],Cb={svg:["viewBox","children"],polygon:Eb,polyline:Eb},Db=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Tb=function(e,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,t.isValidElement)(e)&&(r=e.props),!jb()(r))return null;var a={};return Object.keys(r).forEach((function(e){Db.includes(e)&&(a[e]=n||function(t){return r[e](r,t)})})),a},kb=function(e,t,n){if(!jb()(e)||"object"!==_b(e))return null;var r=null;return Object.keys(e).forEach((function(a){var s=e[a];Db.includes(a)&&"function"===typeof s&&(r||(r={}),r[a]=function(e,t,n){return function(r){return e(t,n,r),null}}(s,t,n))})),r},Ab=["children"],Pb=["children"];function Ob(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Rb={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Mb=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},Ib=null,Lb=null,Fb=function e(n){if(n===Ib&&Array.isArray(Lb))return Lb;var r=[];return t.Children.forEach(n,(function(t){gb()(t)||((0,wb.isFragment)(t)?r=r.concat(e(t.props.children)):r.push(t))})),Lb=r,Ib=n,r};function Bb(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map((function(e){return Mb(e)})):[Mb(t)],Fb(e).forEach((function(e){var t=nb()(e,"type.displayName")||nb()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)})),n}function Wb(e,t){var n=Bb(e,t);return n&&n[0]}var $b=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!ob(n)||n<=0||!ob(r)||r<=0)},Ub=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],zb=function(e){return e&&e.type&&Jy()(e.type)&&Ub.indexOf(e.type)>=0},Hb=function(e,n,r){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var a=e;if((0,t.isValidElement)(e)&&(a=e.props),!jb()(a))return null;var s={};return Object.keys(a).forEach((function(e){var t;(function(e,t,n,r){var a,s=null!==(a=null===Cb||void 0===Cb?void 0:Cb[r])&&void 0!==a?a:[];return!yb()(e)&&(r&&s.includes(t)||Sb.includes(t))||n&&Db.includes(t)})(null===(t=a)||void 0===t?void 0:t[e],e,n,r)&&(s[e]=a[e])})),s},Vb=function e(n,r){if(n===r)return!0;var a=t.Children.count(n);if(a!==t.Children.count(r))return!1;if(0===a)return!0;if(1===a)return qb(Array.isArray(n)?n[0]:n,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=n[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!qb(i,o))return!1}return!0},qb=function(e,t){if(gb()(e)&&gb()(t))return!0;if(!gb()(e)&&!gb()(t)){var n=e.props||{},r=n.children,a=Ob(n,Ab),s=t.props||{},i=s.children,o=Ob(s,Pb);return r&&i?Nb(a,o)&&Vb(r,i):!r&&!i&&Nb(a,o)}return!1},Gb=function(e,t){var n=[],r={};return Fb(e).forEach((function(e,a){if(zb(e))n.push(e);else if(e){var s=Mb(e.type),i=t[s]||{},o=i.handler,l=i.once;if(o&&(!l||!r[s])){var c=o(e,s,a);n.push(c),r[s]=!0}}})),n};function Kb(e){return Kb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kb(e)}function Yb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yb(Object(n),!0).forEach((function(t){Zb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zb(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Kb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Kb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kb(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Qb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ej=(0,t.forwardRef)((function(e,n){var r=e.aspect,a=e.initialDimension,s=void 0===a?{width:-1,height:-1}:a,i=e.width,o=void 0===i?"100%":i,l=e.height,c=void 0===l?"100%":l,d=e.minWidth,u=void 0===d?0:d,m=e.minHeight,h=e.maxHeight,p=e.children,f=e.debounce,v=void 0===f?0:f,g=e.id,x=e.className,y=e.onResize,b=e.style,j=void 0===b?{}:b,w=(0,t.useRef)(null),N=(0,t.useRef)();N.current=y,(0,t.useImperativeHandle)(n,(function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})}));var _=Jb((0,t.useState)({containerWidth:s.width,containerHeight:s.height}),2),S=_[0],E=_[1],C=(0,t.useCallback)((function(e,t){E((function(n){var r=Math.round(e),a=Math.round(t);return n.containerWidth===r&&n.containerHeight===a?n:{containerWidth:r,containerHeight:a}}))}),[]);(0,t.useEffect)((function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,a=n.height;C(r,a),null===(t=N.current)||void 0===t||t.call(N,r,a)};v>0&&(e=Xy()(e,v,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=w.current.getBoundingClientRect(),r=n.width,a=n.height;return C(r,a),t.observe(w.current),function(){t.disconnect()}}),[C,v]);var D=(0,t.useMemo)((function(){var e=S.containerWidth,n=S.containerHeight;if(e<0||n<0)return null;fb(ib(o)||ib(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",o,c),fb(!r||r>0,"The aspect(%s) must be greater than zero.",r);var a=ib(o)?e:o,s=ib(c)?n:c;r&&r>0&&(a?s=a/r:s&&(a=s*r),h&&s>h&&(s=h)),fb(a>0||s>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",a,s,o,c,u,m,r);var i=!Array.isArray(p)&&Mb(p.type).endsWith("Chart");return t.Children.map(p,(function(e){return t.isValidElement(e)?(0,t.cloneElement)(e,Xb({width:a,height:s},i?{style:Xb({height:"100%",width:"100%",maxHeight:s,maxWidth:a},e.props.style)}:{})):e}))}),[r,p,c,h,m,u,S,o]);return t.createElement("div",{id:g?"".concat(g):void 0,className:(0,Ky.A)("recharts-responsive-container",x),style:Xb(Xb({},j),{},{width:o,height:c,minWidth:u,minHeight:m,maxHeight:h}),ref:w},D)})),tj={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return tj[e]},set:function(e,t){if("string"===typeof e)tj[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach((function(t){tj[t]=e[t]}))}}};function nj(e){return nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nj(e)}function rj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rj(Object(n),!0).forEach((function(t){sj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=nj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nj(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ij={widthCache:{},cacheCount:0},oj={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},lj="recharts_measurement_span";var cj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||tj.isSsr)return{width:0,height:0};var n=function(e){var t=aj({},e);return Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t}(t),r=JSON.stringify({text:e,copyStyle:n});if(ij.widthCache[r])return ij.widthCache[r];try{var a=document.getElementById(lj);a||((a=document.createElement("span")).setAttribute("id",lj),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=aj(aj({},oj),n);Object.assign(a.style,s),a.textContent="".concat(e);var i=a.getBoundingClientRect(),o={width:i.width,height:i.height};return ij.widthCache[r]=o,++ij.cacheCount>2e3&&(ij.cacheCount=0,ij.widthCache={}),o}catch(H5){return{width:0,height:0}}};function dj(e){return dj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dj(e)}function uj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return mj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pj(r.key),r)}}function pj(e){var t=function(e,t){if("object"!=dj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dj(t)?t:t+""}var fj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gj=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xj=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,yj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},bj=Object.keys(yj),jj="NaN";var wj=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||gj.test(n)||(this.num=NaN,this.unit=""),bj.includes(n)&&(this.num=function(e,t){return e*yj[t]}(t,n),this.unit="px")}return t=e,r=[{key:"parse",value:function(t){var n,r=uj(null!==(n=xj.exec(t))&&void 0!==n?n:[],3),a=r[1],s=r[2];return new e(parseFloat(a),null!==s&&void 0!==s?s:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&hj(t.prototype,n),r&&hj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function Nj(e){if(e.includes(jj))return jj;for(var t=e;t.includes("*")||t.includes("/");){var n,r=uj(null!==(n=fj.exec(t))&&void 0!==n?n:[],4),a=r[1],s=r[2],i=r[3],o=wj.parse(null!==a&&void 0!==a?a:""),l=wj.parse(null!==i&&void 0!==i?i:""),c="*"===s?o.multiply(l):o.divide(l);if(c.isNaN())return jj;t=t.replace(fj,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,u=uj(null!==(d=vj.exec(t))&&void 0!==d?d:[],4),m=u[1],h=u[2],p=u[3],f=wj.parse(null!==m&&void 0!==m?m:""),v=wj.parse(null!==p&&void 0!==p?p:""),g="+"===h?f.add(v):f.subtract(v);if(g.isNaN())return jj;t=t.replace(vj,g.toString())}return t}var _j=/\(([^()]*)\)/;function Sj(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=uj(_j.exec(t),2)[1];t=t.replace(_j,Nj(n))}return t}(t),t=Nj(t)}function Ej(e){var t=function(e){try{return Sj(e)}catch(H5){return jj}}(e.slice(5,-1));return t===jj?"":t}var Cj=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Dj=["dx","dy","angle","className","breakAll"];function Tj(){return Tj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tj.apply(this,arguments)}function kj(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Aj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oj=/[ \f\n\r\t\v\u2028\u2029]+/,Rj=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var a=[];return gb()(t)||(a=n?t.toString().split(""):t.toString().split(Oj)),{wordsWithComputedWidth:a.map((function(e){return{word:e,width:cj(e,r).width}})),spaceWidth:n?0:cj("\xa0",r).width}}catch(H5){return null}},Mj=function(e){return[{words:gb()(e)?[]:e.toString().split(Oj)}]},Ij=function(e){var t=e.width,n=e.scaleToFit,r=e.children,a=e.style,s=e.breakAll,i=e.maxLines;if((t||n)&&!tj.isSsr){var o=Rj({breakAll:s,children:r,style:a});return o?function(e,t,n,r,a){var s=e.maxLines,i=e.children,o=e.style,l=e.breakAll,c=ob(s),d=i,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var s=t.word,i=t.width,o=e[e.length-1];if(o&&(null==r||a||o.width+i+n<Number(r)))o.words.push(s),o.width+=i+n;else{var l={words:[s],width:i};e.push(l)}return e}),[])},m=u(t);if(!c)return m;for(var h,p=function(e){var t=d.slice(0,e),n=Rj({breakAll:l,style:o,children:t+"\u2026"}).wordsWithComputedWidth,a=u(n),i=a.length>s||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(a).width>Number(r);return[i,a]},f=0,v=d.length-1,g=0;f<=v&&g<=d.length-1;){var x=Math.floor((f+v)/2),y=Aj(p(x-1),2),b=y[0],j=y[1],w=Aj(p(x),1)[0];if(b||w||(f=x+1),b&&w&&(v=x-1),!b&&w){h=j;break}g++}return h||m}({breakAll:s,children:r,maxLines:i,style:a},o.wordsWithComputedWidth,o.spaceWidth,t,n):Mj(r)}return Mj(r)},Lj="#808080",Fj=function(e){var n=e.x,r=void 0===n?0:n,a=e.y,s=void 0===a?0:a,i=e.lineHeight,o=void 0===i?"1em":i,l=e.capHeight,c=void 0===l?"0.71em":l,d=e.scaleToFit,u=void 0!==d&&d,m=e.textAnchor,h=void 0===m?"start":m,p=e.verticalAnchor,f=void 0===p?"end":p,v=e.fill,g=void 0===v?Lj:v,x=kj(e,Cj),y=(0,t.useMemo)((function(){return Ij({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:u,style:x.style,width:x.width})}),[x.breakAll,x.children,x.maxLines,u,x.style,x.width]),b=x.dx,j=x.dy,w=x.angle,N=x.className,_=x.breakAll,S=kj(x,Dj);if(!lb(r)||!lb(s))return null;var E,C=r+(ob(b)?b:0),D=s+(ob(j)?j:0);switch(f){case"start":E=Ej("calc(".concat(c,")"));break;case"middle":E=Ej("calc(".concat((y.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:E=Ej("calc(".concat(y.length-1," * -").concat(o,")"))}var T=[];if(u){var k=y[0].width,A=x.width;T.push("scale(".concat((ob(A)?A/k:1)/k,")"))}return w&&T.push("rotate(".concat(w,", ").concat(C,", ").concat(D,")")),T.length&&(S.transform=T.join(" ")),t.createElement("text",Tj({},Hb(S,!0),{x:C,y:D,className:(0,Ky.A)("recharts-text",N),textAnchor:h,fill:g.includes("url")?Lj:g}),y.map((function(e,n){var r=e.words.join(_?"":" ");return t.createElement("tspan",{x:C,dy:0===n?E:o,key:"".concat(r,"-").concat(n)},r)})))};function Bj(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Wj(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class $j extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vj;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(Uj(this,e))}has(e){return super.has(Uj(this,e))}set(e,t){return super.set(zj(this,e),t)}delete(e){return super.delete(Hj(this,e))}}Set;function Uj(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)?n.get(a):t}function zj(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)?n.get(a):(n.set(a,t),t)}function Hj(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)&&(t=n.get(a),n.delete(a)),t}function Vj(e){return null!==e&&"object"===typeof e?e.valueOf():e}const qj=Symbol("implicit");function Gj(){var e=new $j,t=[],n=[],r=qj;function a(a){let s=e.get(a);if(void 0===s){if(r!==qj)return r;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new $j;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return Gj(t,n).unknown(r)},Bj.apply(a,arguments),a}function Kj(){var e,t,n=Gj().unknown(void 0),r=n.domain,a=n.range,s=0,i=1,o=!1,l=0,c=0,d=.5;function u(){var n=r().length,u=i<s,m=u?i:s,h=u?s:i;e=(h-m)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),m+=(h-m-e*(n-l))*d,t=e*(1-l),o&&(m=Math.round(m),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(a);++r<a;)s[r]=e+r*n;return s}(n).map((function(t){return m+e*t}));return a(u?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),u()):r()},n.range=function(e){return arguments.length?([s,i]=e,s=+s,i=+i,u()):[s,i]},n.rangeRound=function(e){return[s,i]=e,s=+s,i=+i,o=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,u()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},n.copy=function(){return Kj(r(),[s,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},Bj.apply(u(),arguments)}function Yj(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Yj(t())},e}function Xj(){return Yj(Kj.apply(null,arguments).paddingInner(1))}const Zj=Math.sqrt(50),Jj=Math.sqrt(10),Qj=Math.sqrt(2);function ew(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),i=s>=Zj?10:s>=Jj?5:s>=Qj?2:1;let o,l,c;return a<0?(c=Math.pow(10,-a)/i,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*i,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?ew(e,t,2*n):[o,l,c]}function tw(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[a,s,i]=r?ew(t,e,n):ew(e,t,n);if(!(s>=a))return[];const o=s-a+1,l=new Array(o);if(r)if(i<0)for(let c=0;c<o;++c)l[c]=(s-c)/-i;else for(let c=0;c<o;++c)l[c]=(s-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(a+c)/-i;else for(let c=0;c<o;++c)l[c]=(a+c)*i;return l}function nw(e,t,n){return ew(e=+e,t=+t,n=+n)[2]}function rw(e,t,n){n=+n;const r=(t=+t)<(e=+e),a=r?nw(t,e,n):nw(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function aw(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sw(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iw(e){let t,n,r;function a(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<s){if(0!==t(r,r))return s;do{const t=a+s>>>1;n(e[t],r)<0?a=t+1:s=t}while(a<s)}return a}return 2!==e.length?(t=aw,n=(t,n)=>aw(e(t),n),r=(t,n)=>e(t)-n):(t=e===aw||e===sw?e:ow,n=e,r=e),{left:a,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=a(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return s>n&&r(e[s-1],t)>-r(e[s],t)?s-1:s},right:function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<s){if(0!==t(r,r))return s;do{const t=a+s>>>1;n(e[t],r)<=0?a=t+1:s=t}while(a<s)}return a}}}function ow(){return 0}function lw(e){return null===e?NaN:+e}const cw=iw(aw),dw=cw.right,uw=(cw.left,iw(lw).center,dw);function mw(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function hw(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function pw(){}var fw=.7,vw=1/fw,gw="\\s*([+-]?\\d+)\\s*",xw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bw=/^#([0-9a-f]{3,8})$/,jw=new RegExp(`^rgb\\(${gw},${gw},${gw}\\)$`),ww=new RegExp(`^rgb\\(${yw},${yw},${yw}\\)$`),Nw=new RegExp(`^rgba\\(${gw},${gw},${gw},${xw}\\)$`),_w=new RegExp(`^rgba\\(${yw},${yw},${yw},${xw}\\)$`),Sw=new RegExp(`^hsl\\(${xw},${yw},${yw}\\)$`),Ew=new RegExp(`^hsla\\(${xw},${yw},${yw},${xw}\\)$`),Cw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Dw(){return this.rgb().formatHex()}function Tw(){return this.rgb().formatRgb()}function kw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Aw(t):3===n?new Rw(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Pw(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Pw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=jw.exec(e))?new Rw(t[1],t[2],t[3],1):(t=ww.exec(e))?new Rw(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Nw.exec(e))?Pw(t[1],t[2],t[3],t[4]):(t=_w.exec(e))?Pw(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Sw.exec(e))?Ww(t[1],t[2]/100,t[3]/100,1):(t=Ew.exec(e))?Ww(t[1],t[2]/100,t[3]/100,t[4]):Cw.hasOwnProperty(e)?Aw(Cw[e]):"transparent"===e?new Rw(NaN,NaN,NaN,0):null}function Aw(e){return new Rw(e>>16&255,e>>8&255,255&e,1)}function Pw(e,t,n,r){return r<=0&&(e=t=n=NaN),new Rw(e,t,n,r)}function Ow(e,t,n,r){return 1===arguments.length?((a=e)instanceof pw||(a=kw(a)),a?new Rw((a=a.rgb()).r,a.g,a.b,a.opacity):new Rw):new Rw(e,t,n,null==r?1:r);var a}function Rw(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Mw(){return`#${Bw(this.r)}${Bw(this.g)}${Bw(this.b)}`}function Iw(){const e=Lw(this.opacity);return`${1===e?"rgb(":"rgba("}${Fw(this.r)}, ${Fw(this.g)}, ${Fw(this.b)}${1===e?")":`, ${e})`}`}function Lw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fw(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bw(e){return((e=Fw(e))<16?"0":"")+e.toString(16)}function Ww(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Uw(e,t,n,r)}function $w(e){if(e instanceof Uw)return new Uw(e.h,e.s,e.l,e.opacity);if(e instanceof pw||(e=kw(e)),!e)return new Uw;if(e instanceof Uw)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,o=s-a,l=(s+a)/2;return o?(i=t===s?(n-r)/o+6*(n<r):n===s?(r-t)/o+2:(t-n)/o+4,o/=l<.5?s+a:2-s-a,i*=60):o=l>0&&l<1?0:i,new Uw(i,o,l,e.opacity)}function Uw(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function zw(e){return(e=(e||0)%360)<0?e+360:e}function Hw(e){return Math.max(0,Math.min(1,e||0))}function Vw(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function qw(e,t,n,r,a){var s=e*e,i=s*e;return((1-3*e+3*s-i)*t+(4-6*s+3*i)*n+(1+3*e+3*s-3*i)*r+i*a)/6}mw(pw,kw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Dw,formatHex:Dw,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return $w(this).formatHsl()},formatRgb:Tw,toString:Tw}),mw(Rw,Ow,hw(pw,{brighter(e){return e=null==e?vw:Math.pow(vw,e),new Rw(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?fw:Math.pow(fw,e),new Rw(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rw(Fw(this.r),Fw(this.g),Fw(this.b),Lw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mw,formatHex:Mw,formatHex8:function(){return`#${Bw(this.r)}${Bw(this.g)}${Bw(this.b)}${Bw(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Iw,toString:Iw})),mw(Uw,(function(e,t,n,r){return 1===arguments.length?$w(e):new Uw(e,t,n,null==r?1:r)}),hw(pw,{brighter(e){return e=null==e?vw:Math.pow(vw,e),new Uw(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?fw:Math.pow(fw,e),new Uw(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Rw(Vw(e>=240?e-240:e+120,a,r),Vw(e,a,r),Vw(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Uw(zw(this.h),Hw(this.s),Hw(this.l),Lw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lw(this.opacity);return`${1===e?"hsl(":"hsla("}${zw(this.h)}, ${100*Hw(this.s)}%, ${100*Hw(this.l)}%${1===e?")":`, ${e})`}`}}));const Gw=e=>()=>e;function Kw(e,t){return function(n){return e+n*t}}function Yw(e){return 1===(e=+e)?Xw:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Gw(isNaN(t)?n:t)}}function Xw(e,t){var n=t-e;return n?Kw(e,n):Gw(isNaN(e)?t:e)}const Zw=function e(t){var n=Yw(t);function r(e,t){var r=n((e=Ow(e)).r,(t=Ow(t)).r),a=n(e.g,t.g),s=n(e.b,t.b),i=Xw(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=s(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Jw(e){return function(t){var n,r,a=t.length,s=new Array(a),i=new Array(a),o=new Array(a);for(n=0;n<a;++n)r=Ow(t[n]),s[n]=r.r||0,i[n]=r.g||0,o[n]=r.b||0;return s=e(s),i=e(i),o=e(o),r.opacity=1,function(e){return r.r=s(e),r.g=i(e),r.b=o(e),r+""}}}Jw((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],s=e[r+1],i=r>0?e[r-1]:2*a-s,o=r<t-1?e[r+2]:2*s-a;return qw((n-r/t)*t,i,a,s,o)}})),Jw((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],s=e[r%t],i=e[(r+1)%t],o=e[(r+2)%t];return qw((n-r/t)*t,a,s,i,o)}}));function Qw(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r);for(n=0;n<a;++n)s[n]=oN(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<a;++n)i[n]=s[n](e);return i}}function eN(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function tN(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function nN(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=oN(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var rN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aN=new RegExp(rN.source,"g");function sN(e,t){var n,r,a,s=rN.lastIndex=aN.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(n=rN.exec(e))&&(r=aN.exec(t));)(a=r.index)>s&&(a=t.slice(s,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(r=r[0])?o[i]?o[i]+=r:o[++i]=r:(o[++i]=null,l.push({i:i,x:tN(n,r)})),s=aN.lastIndex;return s<t.length&&(a=t.slice(s),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)o[(n=l[r]).i]=n.x(e);return o.join("")})}function iN(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(s){for(n=0;n<r;++n)a[n]=e[n]*(1-s)+t[n]*s;return a}}function oN(e,t){var n,r,a=typeof t;return null==t||"boolean"===a?Gw(t):("number"===a?tN:"string"===a?(n=kw(t))?(t=n,Zw):sN:t instanceof kw?Zw:t instanceof Date?eN:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?Qw:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?nN:tN:iN))(e,t)}function lN(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function cN(e){return+e}var dN=[0,1];function uN(e){return e}function mN(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function hN(e,t,n){var r=e[0],a=e[1],s=t[0],i=t[1];return a<r?(r=mN(a,r),s=n(i,s)):(r=mN(r,a),s=n(s,i)),function(e){return s(r(e))}}function pN(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),s=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)a[i]=mN(e[i],e[i+1]),s[i]=n(t[i],t[i+1]);return function(t){var n=uw(e,t,1,r)-1;return s[n](a[n](t))}}function fN(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function vN(){var e,t,n,r,a,s,i=dN,o=dN,l=oN,c=uN;function d(){var e=Math.min(i.length,o.length);return c!==uN&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(i[0],i[e-1])),r=e>2?pN:hN,a=s=null,u}function u(t){return null==t||isNaN(t=+t)?n:(a||(a=r(i.map(e),o,l)))(e(c(t)))}return u.invert=function(n){return c(t((s||(s=r(o,i.map(e),tN)))(n)))},u.domain=function(e){return arguments.length?(i=Array.from(e,cN),d()):i.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=lN,d()},u.clamp=function(e){return arguments.length?(c=!!e||uN,d()):c!==uN},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(n=e,u):n},function(n,r){return e=n,t=r,d()}}function gN(){return vN()(uN,uN)}var xN,yN=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bN(e){if(!(t=yN.exec(e)))throw new Error("invalid format: "+e);var t;return new jN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function jN(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function wN(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function NN(e){return(e=wN(Math.abs(e)))?e[1]:NaN}function _N(e,t){var n=wN(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}bN.prototype=jN.prototype,jN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const SN={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>_N(100*e,t),r:_N,s:function(e,t){var n=wN(e,t);if(!n)return e+"";var r=n[0],a=n[1],s=a-(xN=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=r.length;return s===i?r:s>i?r+new Array(s-i+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+wN(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function EN(e){return e}var CN,DN,TN,kN=Array.prototype.map,AN=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function PN(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?EN:(t=kN.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,s=[],i=0,o=t[0],l=0;a>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(e.substring(a-=o,a+o)),!((l+=o+1)>r));)o=t[i=(i+1)%t.length];return s.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?EN:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(kN.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=bN(e)).fill,n=e.align,u=e.sign,m=e.symbol,h=e.zero,p=e.width,f=e.comma,v=e.precision,g=e.trim,x=e.type;"n"===x?(f=!0,x="g"):SN[x]||(void 0===v&&(v=12),g=!0,x="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var y="$"===m?a:"#"===m&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",b="$"===m?s:/[%p]/.test(x)?l:"",j=SN[x],w=/[defgprs%]/.test(x);function N(e){var a,s,l,m=y,N=b;if("c"===x)N=j(e)+N,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:j(Math.abs(e),v),g&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==u&&(_=!1),m=(_?"("===u?u:c:"-"===u||"("===u?"":u)+m,N=("s"===x?AN[8+xN/3]:"")+N+(_&&"("===u?")":""),w)for(a=-1,s=e.length;++a<s;)if(48>(l=e.charCodeAt(a))||l>57){N=(46===l?i+e.slice(a+1):e.slice(a))+N,e=e.slice(0,a);break}}f&&!h&&(e=r(e,1/0));var S=m.length+e.length+N.length,E=S<p?new Array(p-S+1).join(t):"";switch(f&&h&&(e=r(E+e,E.length?p-N.length:1/0),E=""),n){case"<":e=m+e+N+E;break;case"=":e=m+E+e+N;break;case"^":e=E.slice(0,S=E.length>>1)+m+e+N+E.slice(S);break;default:e=E+m+e+N}return o(e)}return v=void 0===v?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var n=u(((e=bN(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(NN(t)/3))),a=Math.pow(10,-r),s=AN[8+r/3];return function(e){return n(a*e)+s}}}}function ON(e,t,n,r){var a,s=rw(e,t,n);switch((r=bN(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(NN(t)/3)))-NN(Math.abs(e)))}(s,i))||(r.precision=a),TN(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,NN(t)-NN(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-NN(Math.abs(e)))}(s))||(r.precision=a-2*("%"===r.type))}return DN(r)}function RN(e){var t=e.domain;return e.ticks=function(e){var n=t();return tw(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return ON(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,s=t(),i=0,o=s.length-1,l=s[i],c=s[o],d=10;for(c<l&&(a=l,l=c,c=a,a=i,i=o,o=a);d-- >0;){if((a=nw(l,c,n))===r)return s[i]=l,s[o]=c,t(s);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function MN(){var e=gN();return e.copy=function(){return fN(e,MN())},Bj.apply(e,arguments),RN(e)}function IN(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,cN),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return IN(e).unknown(t)},e=arguments.length?Array.from(e,cN):[0,1],RN(n)}function LN(e,t){var n,r=0,a=(e=e.slice()).length-1,s=e[r],i=e[a];return i<s&&(n=r,r=a,a=n,n=s,s=i,i=n),e[r]=t.floor(s),e[a]=t.ceil(i),e}function FN(e){return Math.log(e)}function BN(e){return Math.exp(e)}function WN(e){return-Math.log(-e)}function $N(e){return-Math.exp(-e)}function UN(e){return isFinite(e)?+("1e"+e):e<0?0:e}function zN(e){return(t,n)=>-e(-t,n)}function HN(e){const t=e(FN,BN),n=t.domain;let r,a,s=10;function i(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),a=function(e){return 10===e?UN:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),n()[0]<0?(r=zN(r),a=zN(a),e(WN,$N)):e(FN,BN),t}return t.base=function(e){return arguments.length?(s=+e,i()):s},t.domain=function(e){return arguments.length?(n(e),i()):n()},t.ticks=e=>{const t=n();let i=t[0],o=t[t.length-1];const l=o<i;l&&([i,o]=[o,i]);let c,d,u=r(i),m=r(o);const h=null==e?10:+e;let p=[];if(!(s%1)&&m-u<h){if(u=Math.floor(u),m=Math.ceil(m),i>0){for(;u<=m;++u)for(c=1;c<s;++c)if(d=u<0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}}else for(;u<=m;++u)for(c=s-1;c>=1;--c)if(d=u>0?c/a(-u):c*a(u),!(d<i)){if(d>o)break;p.push(d)}2*p.length<h&&(p=tw(i,o,h))}else p=tw(u,m,Math.min(m-u,h)).map(a);return l?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===s?"s":","),"function"!==typeof n&&(s%1||null!=(n=bN(n)).precision||(n.trim=!0),n=DN(n)),e===1/0)return n;const i=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/a(Math.round(r(e)));return t*s<s-.5&&(t*=s),t<=i?n(e):""}},t.nice=()=>n(LN(n(),{floor:e=>a(Math.floor(r(e))),ceil:e=>a(Math.ceil(r(e)))})),t}function VN(){const e=HN(vN()).domain([1,10]);return e.copy=()=>fN(e,VN()).base(e.base()),Bj.apply(e,arguments),e}function qN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function GN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function KN(e){var t=1,n=e(qN(t),GN(t));return n.constant=function(n){return arguments.length?e(qN(t=+n),GN(t)):t},RN(n)}function YN(){var e=KN(vN());return e.copy=function(){return fN(e,YN()).constant(e.constant())},Bj.apply(e,arguments)}function XN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ZN(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function JN(e){return e<0?-e*e:e*e}function QN(e){var t=e(uN,uN),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(uN,uN):.5===n?e(ZN,JN):e(XN(n),XN(1/n)):n},RN(t)}function e_(){var e=QN(vN());return e.copy=function(){return fN(e,e_()).exponent(e.exponent())},Bj.apply(e,arguments),e}function t_(){return e_.apply(null,arguments).exponent(.5)}function n_(e){return Math.sign(e)*e*e}function r_(){var e,t=gN(),n=[0,1],r=!1;function a(n){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(a)?e:r?Math.round(a):a}return a.invert=function(e){return t.invert(n_(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((n=Array.from(e,cN)).map(n_)),a):n.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(r=!!e,a):r},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return r_(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},Bj.apply(a,arguments),RN(a)}function a_(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(n<a||void 0===n&&a>=a)&&(n=a)}return n}function s_(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(n>a||void 0===n&&a>=a)&&(n=a)}return n}function i_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aw;if(e===aw)return o_;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function o_(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function l_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=void 0===a?o_:i_(a);r>n;){if(r-n>600){const s=r-n+1,i=t-n+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(i-s/2<0?-1:1);l_(e,t,Math.max(n,Math.floor(t-i*l/s+c)),Math.min(r,Math.floor(t+(s-i)*l/s+c)),a)}const s=e[t];let i=n,o=r;for(c_(e,n,t),a(e[r],s)>0&&c_(e,n,r);i<o;){for(c_(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}0===a(e[n],s)?c_(e,n,o):(++o,c_(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function c_(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function d_(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return s_(e);if(t>=1)return a_(e);var r,a=(r-1)*t,s=Math.floor(a),i=a_(l_(e,s).subarray(0,s+1));return i+(s_(e.subarray(s+1))-i)*(a-s)}}function u_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lw;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,s=Math.floor(a),i=+n(e[s],s,e);return i+(+n(e[s+1],s+1,e)-i)*(a-s)}}function m_(){var e,t=[],n=[],r=[];function a(){var e=0,a=Math.max(1,n.length);for(r=new Array(a-1);++e<a;)r[e-1]=u_(t,e/a);return s}function s(t){return null==t||isNaN(t=+t)?e:n[uw(r,t)]}return s.invertExtent=function(e){var a=n.indexOf(e);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},s.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(aw),a()},s.range=function(e){return arguments.length?(n=Array.from(e),a()):n.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return r.slice()},s.copy=function(){return m_().domain(t).range(n).unknown(e)},Bj.apply(s,arguments)}function h_(){var e,t=0,n=1,r=1,a=[.5],s=[0,1];function i(t){return null!=t&&t<=t?s[uw(a,t,0,r)]:e}function o(){var e=-1;for(a=new Array(r);++e<r;)a[e]=((e+1)*n-(e-r)*t)/(r+1);return i}return i.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,o()):[t,n]},i.range=function(e){return arguments.length?(r=(s=Array.from(e)).length-1,o()):s.slice()},i.invertExtent=function(e){var i=s.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,a[0]]:i>=r?[a[r-1],n]:[a[i-1],a[i]]},i.unknown=function(t){return arguments.length?(e=t,i):i},i.thresholds=function(){return a.slice()},i.copy=function(){return h_().domain([t,n]).range(s).unknown(e)},Bj.apply(RN(i),arguments)}function p_(){var e,t=[.5],n=[0,1],r=1;function a(a){return null!=a&&a<=a?n[uw(t,a,0,r)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),a):t.slice()},a.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),a):n.slice()},a.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return p_().domain(t).range(n).unknown(e)},Bj.apply(a,arguments)}CN=PN({thousands:",",grouping:[3],currency:["$",""]}),DN=CN.format,TN=CN.formatPrefix;const f_=1e3,v_=6e4,g_=36e5,x_=864e5,y_=6048e5,b_=2592e6,j_=31536e6,w_=new Date,N_=new Date;function __(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),a.round=e=>{const t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),a.range=(n,r,s)=>{const i=[];if(n=a.ceil(n),s=null==s?1:Math.floor(s),!(n<r)||!(s>0))return i;let o;do{i.push(o=new Date(+n)),t(n,s),e(n)}while(o<n&&n<r);return i},a.filter=n=>__((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})),n&&(a.count=(t,r)=>(w_.setTime(+t),N_.setTime(+r),e(w_),e(N_),Math.floor(n(w_,N_))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?t=>r(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const S_=__((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));S_.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?__((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):S_:null);S_.range;const E_=__((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*f_)}),((e,t)=>(t-e)/f_),(e=>e.getUTCSeconds())),C_=(E_.range,__((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*f_)}),((e,t)=>{e.setTime(+e+t*v_)}),((e,t)=>(t-e)/v_),(e=>e.getMinutes()))),D_=(C_.range,__((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*v_)}),((e,t)=>(t-e)/v_),(e=>e.getUTCMinutes()))),T_=(D_.range,__((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*f_-e.getMinutes()*v_)}),((e,t)=>{e.setTime(+e+t*g_)}),((e,t)=>(t-e)/g_),(e=>e.getHours()))),k_=(T_.range,__((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*g_)}),((e,t)=>(t-e)/g_),(e=>e.getUTCHours()))),A_=(k_.range,__((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*v_)/x_),(e=>e.getDate()-1))),P_=(A_.range,__((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/x_),(e=>e.getUTCDate()-1))),O_=(P_.range,__((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/x_),(e=>Math.floor(e/x_))));O_.range;function R_(e){return __((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*v_)/y_))}const M_=R_(0),I_=R_(1),L_=R_(2),F_=R_(3),B_=R_(4),W_=R_(5),$_=R_(6);M_.range,I_.range,L_.range,F_.range,B_.range,W_.range,$_.range;function U_(e){return __((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/y_))}const z_=U_(0),H_=U_(1),V_=U_(2),q_=U_(3),G_=U_(4),K_=U_(5),Y_=U_(6),X_=(z_.range,H_.range,V_.range,q_.range,G_.range,K_.range,Y_.range,__((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()))),Z_=(X_.range,__((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()))),J_=(Z_.range,__((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear())));J_.every=e=>isFinite(e=Math.floor(e))&&e>0?__((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null;J_.range;const Q_=__((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));Q_.every=e=>isFinite(e=Math.floor(e))&&e>0?__((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null;Q_.range;function eS(e,t,n,r,a,s){const i=[[E_,1,f_],[E_,5,5e3],[E_,15,15e3],[E_,30,3e4],[s,1,v_],[s,5,3e5],[s,15,9e5],[s,30,18e5],[a,1,g_],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,x_],[r,2,1728e5],[n,1,y_],[t,1,b_],[t,3,7776e6],[e,1,j_]];function o(t,n,r){const a=Math.abs(n-t)/r,s=iw((e=>{let[,,t]=e;return t})).right(i,a);if(s===i.length)return e.every(rw(t/j_,n/j_,r));if(0===s)return S_.every(Math.max(rw(t,n,r),1));const[o,l]=i[a/i[s-1][2]<i[s][2]/a?s-1:s];return o.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const a=n&&"function"===typeof n.range?n:o(e,t,n),s=a?a.range(e,+t+1):[];return r?s.reverse():s},o]}const[tS,nS]=eS(Q_,Z_,z_,O_,k_,D_),[rS,aS]=eS(J_,X_,M_,A_,T_,C_);function sS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function iS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function oS(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var lS,cS,dS,uS={"-":"",_:" ",0:"0"},mS=/^\s*\d+/,hS=/^%/,pS=/[\\^$*+?|[\]().{}]/g;function fS(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",s=a.length;return r+(s<n?new Array(n-s+1).join(t)+a:a)}function vS(e){return e.replace(pS,"\\$&")}function gS(e){return new RegExp("^(?:"+e.map(vS).join("|")+")","i")}function xS(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function yS(e,t,n){var r=mS.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function bS(e,t,n){var r=mS.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function jS(e,t,n){var r=mS.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function wS(e,t,n){var r=mS.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function NS(e,t,n){var r=mS.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function _S(e,t,n){var r=mS.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function SS(e,t,n){var r=mS.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ES(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function CS(e,t,n){var r=mS.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function DS(e,t,n){var r=mS.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function TS(e,t,n){var r=mS.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function kS(e,t,n){var r=mS.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function AS(e,t,n){var r=mS.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function PS(e,t,n){var r=mS.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function OS(e,t,n){var r=mS.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function RS(e,t,n){var r=mS.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function MS(e,t,n){var r=mS.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function IS(e,t,n){var r=hS.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function LS(e,t,n){var r=mS.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function FS(e,t,n){var r=mS.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function BS(e,t){return fS(e.getDate(),t,2)}function WS(e,t){return fS(e.getHours(),t,2)}function $S(e,t){return fS(e.getHours()%12||12,t,2)}function US(e,t){return fS(1+A_.count(J_(e),e),t,3)}function zS(e,t){return fS(e.getMilliseconds(),t,3)}function HS(e,t){return zS(e,t)+"000"}function VS(e,t){return fS(e.getMonth()+1,t,2)}function qS(e,t){return fS(e.getMinutes(),t,2)}function GS(e,t){return fS(e.getSeconds(),t,2)}function KS(e){var t=e.getDay();return 0===t?7:t}function YS(e,t){return fS(M_.count(J_(e)-1,e),t,2)}function XS(e){var t=e.getDay();return t>=4||0===t?B_(e):B_.ceil(e)}function ZS(e,t){return e=XS(e),fS(B_.count(J_(e),e)+(4===J_(e).getDay()),t,2)}function JS(e){return e.getDay()}function QS(e,t){return fS(I_.count(J_(e)-1,e),t,2)}function eE(e,t){return fS(e.getFullYear()%100,t,2)}function tE(e,t){return fS((e=XS(e)).getFullYear()%100,t,2)}function nE(e,t){return fS(e.getFullYear()%1e4,t,4)}function rE(e,t){var n=e.getDay();return fS((e=n>=4||0===n?B_(e):B_.ceil(e)).getFullYear()%1e4,t,4)}function aE(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+fS(t/60|0,"0",2)+fS(t%60,"0",2)}function sE(e,t){return fS(e.getUTCDate(),t,2)}function iE(e,t){return fS(e.getUTCHours(),t,2)}function oE(e,t){return fS(e.getUTCHours()%12||12,t,2)}function lE(e,t){return fS(1+P_.count(Q_(e),e),t,3)}function cE(e,t){return fS(e.getUTCMilliseconds(),t,3)}function dE(e,t){return cE(e,t)+"000"}function uE(e,t){return fS(e.getUTCMonth()+1,t,2)}function mE(e,t){return fS(e.getUTCMinutes(),t,2)}function hE(e,t){return fS(e.getUTCSeconds(),t,2)}function pE(e){var t=e.getUTCDay();return 0===t?7:t}function fE(e,t){return fS(z_.count(Q_(e)-1,e),t,2)}function vE(e){var t=e.getUTCDay();return t>=4||0===t?G_(e):G_.ceil(e)}function gE(e,t){return e=vE(e),fS(G_.count(Q_(e),e)+(4===Q_(e).getUTCDay()),t,2)}function xE(e){return e.getUTCDay()}function yE(e,t){return fS(H_.count(Q_(e)-1,e),t,2)}function bE(e,t){return fS(e.getUTCFullYear()%100,t,2)}function jE(e,t){return fS((e=vE(e)).getUTCFullYear()%100,t,2)}function wE(e,t){return fS(e.getUTCFullYear()%1e4,t,4)}function NE(e,t){var n=e.getUTCDay();return fS((e=n>=4||0===n?G_(e):G_.ceil(e)).getUTCFullYear()%1e4,t,4)}function _E(){return"+0000"}function SE(){return"%"}function EE(e){return+e}function CE(e){return Math.floor(+e/1e3)}function DE(e){return new Date(e)}function TE(e){return e instanceof Date?+e:+new Date(+e)}function kE(e,t,n,r,a,s,i,o,l,c){var d=gN(),u=d.invert,m=d.domain,h=c(".%L"),p=c(":%S"),f=c("%I:%M"),v=c("%I %p"),g=c("%a %d"),x=c("%b %d"),y=c("%B"),b=c("%Y");function j(e){return(l(e)<e?h:o(e)<e?p:i(e)<e?f:s(e)<e?v:r(e)<e?a(e)<e?g:x:n(e)<e?y:b)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?m(Array.from(e,TE)):m().map(DE)},d.ticks=function(t){var n=m();return e(n[0],n[n.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var n=m();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?m(LN(n,e)):d},d.copy=function(){return fN(d,kE(e,t,n,r,a,s,i,o,l,c))},d}function AE(){return Bj.apply(kE(rS,aS,J_,X_,M_,A_,T_,C_,E_,cS).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function PE(){return Bj.apply(kE(tS,nS,Q_,Z_,z_,P_,k_,D_,E_,dS).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function OE(){var e,t,n,r,a,s=0,i=1,o=uN,l=!1;function c(t){return null==t||isNaN(t=+t)?a:o(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var n,r;return arguments.length?([n,r]=t,o=e(n,r),c):[o(0),o(1)]}}return c.domain=function(a){return arguments.length?([s,i]=a,e=r(s=+s),t=r(i=+i),n=e===t?0:1/(t-e),c):[s,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(oN),c.rangeRound=d(lN),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(s),t=a(i),n=e===t?0:1/(t-e),c}}function RE(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ME(){var e=RN(OE()(uN));return e.copy=function(){return RE(e,ME())},Wj.apply(e,arguments)}function IE(){var e=HN(OE()).domain([1,10]);return e.copy=function(){return RE(e,IE()).base(e.base())},Wj.apply(e,arguments)}function LE(){var e=KN(OE());return e.copy=function(){return RE(e,LE()).constant(e.constant())},Wj.apply(e,arguments)}function FE(){var e=QN(OE());return e.copy=function(){return RE(e,FE()).exponent(e.exponent())},Wj.apply(e,arguments)}function BE(){return FE.apply(null,arguments).exponent(.5)}function WE(){var e=[],t=uN;function n(n){if(null!=n&&!isNaN(n=+n))return t((uw(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(aw),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map(((n,r)=>t(r/(e.length-1))))},n.quantiles=function(t){return Array.from({length:t+1},((n,r)=>d_(e,r/t)))},n.copy=function(){return WE(t).domain(e)},Wj.apply(n,arguments)}function $E(){var e,t,n,r,a,s,i,o=0,l=.5,c=1,d=1,u=uN,m=!1;function h(e){return isNaN(e=+e)?i:(e=.5+((e=+s(e))-t)*(d*e<d*t?r:a),u(m?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,a;return arguments.length?([n,r,a]=t,u=function(e,t){void 0===t&&(t=e,e=oN);for(var n=0,r=t.length-1,a=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return s[t](e-t)}}(e,[n,r,a]),h):[u(0),u(.5),u(1)]}}return h.domain=function(i){return arguments.length?([o,l,c]=i,e=s(o=+o),t=s(l=+l),n=s(c=+c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),d=t<e?-1:1,h):[o,l,c]},h.clamp=function(e){return arguments.length?(m=!!e,h):m},h.interpolator=function(e){return arguments.length?(u=e,h):u},h.range=p(oN),h.rangeRound=p(lN),h.unknown=function(e){return arguments.length?(i=e,h):i},function(i){return s=i,e=i(o),t=i(l),n=i(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),d=t<e?-1:1,h}}function UE(){var e=RN($E()(uN));return e.copy=function(){return RE(e,UE())},Wj.apply(e,arguments)}function zE(){var e=HN($E()).domain([.1,1,10]);return e.copy=function(){return RE(e,zE()).base(e.base())},Wj.apply(e,arguments)}function HE(){var e=KN($E());return e.copy=function(){return RE(e,HE()).constant(e.constant())},Wj.apply(e,arguments)}function VE(){var e=QN($E());return e.copy=function(){return RE(e,VE()).exponent(e.exponent())},Wj.apply(e,arguments)}function qE(){return VE.apply(null,arguments).exponent(.5)}function GE(e,t){if((a=e.length)>1)for(var n,r,a,s=1,i=e[t[0]],o=i.length;s<a;++s)for(r=i,i=e[t[s]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}!function(e){lS=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,c=gS(a),d=xS(a),u=gS(s),m=xS(s),h=gS(i),p=xS(i),f=gS(o),v=xS(o),g=gS(l),x=xS(l),y={a:function(e){return i[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:BS,e:BS,f:HS,g:tE,G:rE,H:WS,I:$S,j:US,L:zS,m:VS,M:qS,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:EE,s:CE,S:GS,u:KS,U:YS,V:ZS,w:JS,W:QS,x:null,X:null,y:eE,Y:nE,Z:aE,"%":SE},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:sE,e:sE,f:dE,g:jE,G:NE,H:iE,I:oE,j:lE,L:cE,m:uE,M:mE,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:EE,s:CE,S:hE,u:pE,U:fE,V:gE,w:xE,W:yE,x:null,X:null,y:bE,Y:wE,Z:_E,"%":SE},j={a:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return _(e,t,n,r)},d:TS,e:TS,f:MS,g:SS,G:_S,H:AS,I:AS,j:kS,L:RS,m:DS,M:PS,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=d.get(r[0].toLowerCase()),n+r[0].length):-1},q:CS,Q:LS,s:FS,S:OS,u:bS,U:jS,V:wS,w:yS,W:NS,x:function(e,t,r){return _(e,n,t,r)},X:function(e,t,n){return _(e,r,t,n)},y:SS,Y:_S,Z:ES,"%":IS};function w(e,t){return function(n){var r,a,s,i=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(i.push(e.slice(l,o)),null!=(a=uS[r=e.charAt(++o)])?r=e.charAt(++o):a="e"===r?" ":"0",(s=t[r])&&(r=s(n,a)),i.push(r),l=o+1);return i.push(e.slice(l,o)),i.join("")}}function N(e,t){return function(n){var r,a,s=oS(1900,void 0,1);if(_(s,e,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(a=(r=iS(oS(s.y,0,1))).getUTCDay(),r=a>4||0===a?H_.ceil(r):H_(r),r=P_.offset(r,7*(s.V-1)),s.y=r.getUTCFullYear(),s.m=r.getUTCMonth(),s.d=r.getUTCDate()+(s.w+6)%7):(a=(r=sS(oS(s.y,0,1))).getDay(),r=a>4||0===a?I_.ceil(r):I_(r),r=A_.offset(r,7*(s.V-1)),s.y=r.getFullYear(),s.m=r.getMonth(),s.d=r.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),a="Z"in s?iS(oS(s.y,0,1)).getUTCDay():sS(oS(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(a+5)%7:s.w+7*s.U-(a+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,iS(s)):sS(s)}}function _(e,t,n,r){for(var a,s,i=0,o=t.length,l=n.length;i<o;){if(r>=l)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(s=j[a in uS?t.charAt(i++):a])||(r=s(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return y.x=w(n,y),y.X=w(r,y),y.c=w(t,y),b.x=w(n,b),b.X=w(r,b),b.c=w(t,b),{format:function(e){var t=w(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),cS=lS.format,lS.parse,dS=lS.utcFormat,lS.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function KE(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function YE(e){return function(){return e}}function XE(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function ZE(e,t){return e[t]}function JE(e){const t=[];return t.key=e,t}var QE=__webpack_require__(539),eC=__webpack_require__.n(QE),tC=__webpack_require__(6745),nC=__webpack_require__.n(tC),rC=__webpack_require__(3538),aC=__webpack_require__.n(rC),sC=__webpack_require__(643),iC=__webpack_require__.n(sC),oC=__webpack_require__(9853),lC=__webpack_require__.n(oC),cC=__webpack_require__(7424),dC=__webpack_require__.n(cC),uC=__webpack_require__(8210),mC=__webpack_require__.n(uC);function hC(e){return function(e){if(Array.isArray(e))return pC(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return pC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pC(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fC=function(e){return e},vC={"@@functional/placeholder":!0},gC=function(e){return e===vC},xC=function(e){return function t(){return 0===arguments.length||1===arguments.length&&gC(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},yC=function e(t,n){return 1===t?n:xC((function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var i=a.filter((function(e){return e!==vC})).length;return i>=t?n.apply(void 0,a):e(t-i,xC((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=a.map((function(e){return gC(e)?t.shift():e}));return n.apply(void 0,hC(s).concat(t))})))}))},bC=function(e){return yC(e.length,e)},jC=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},wC=bC((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),NC=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return fC;var r=t.reverse(),a=r[0],s=r.slice(1);return function(){return s.reduce((function(e,t){return t(e)}),a.apply(void 0,arguments))}},_C=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},SC=function(e){var t=null,n=null;return function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t&&a.every((function(e,n){return e===t[n]}))?n:(t=a,n=e.apply(void 0,a))}};const EC={rangeStep:function(e,t,n){for(var r=new(mC())(e),a=0,s=[];r.lt(t)&&a<1e5;)s.push(r.toNumber()),r=r.add(n),a++;return s},getDigitCount:function(e){return 0===e?1:Math.floor(new(mC())(e).abs().log(10).toNumber())+1},interpolateNumber:bC((function(e,t,n){var r=+e;return r+n*(+t-r)})),uninterpolateNumber:bC((function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)})),uninterpolateTruncation:bC((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))}))};function CC(e){return function(e){if(Array.isArray(e))return kC(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||TC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(l){a=!0,s=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}return n}(e,t)||TC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TC(e,t){if(e){if("string"===typeof e)return kC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kC(e,t):void 0}}function kC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function AC(e){var t=DC(e,2),n=t[0],r=t[1],a=n,s=r;return n>r&&(a=r,s=n),[a,s]}function PC(e,t,n){if(e.lte(0))return new(mC())(0);var r=EC.getDigitCount(e.toNumber()),a=new(mC())(10).pow(r),s=e.div(a),i=1!==r?.05:.1,o=new(mC())(Math.ceil(s.div(i).toNumber())).add(n).mul(i).mul(a);return t?o:new(mC())(Math.ceil(o))}function OC(e,t,n){var r=1,a=new(mC())(e);if(!a.isint()&&n){var s=Math.abs(e);s<1?(r=new(mC())(10).pow(EC.getDigitCount(e)-1),a=new(mC())(Math.floor(a.div(r).toNumber())).mul(r)):s>1&&(a=new(mC())(Math.floor(e)))}else 0===e?a=new(mC())(Math.floor((t-1)/2)):n||(a=new(mC())(Math.floor(e)));var i=Math.floor((t-1)/2);return NC(wC((function(e){return a.add(new(mC())(e-i).mul(r)).toNumber()})),jC)(0,t)}function RC(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(mC())(0),tickMin:new(mC())(0),tickMax:new(mC())(0)};var s,i=PC(new(mC())(t).sub(e).div(n-1),r,a);s=e<=0&&t>=0?new(mC())(0):(s=new(mC())(e).add(t).div(2)).sub(new(mC())(s).mod(i));var o=Math.ceil(s.sub(e).div(i).toNumber()),l=Math.ceil(new(mC())(t).sub(s).div(i).toNumber()),c=o+l+1;return c>n?RC(e,t,n,r,a+1):(c<n&&(l=t>0?l+(n-c):l,o=t>0?o:o+(n-c)),{step:i,tickMin:s.sub(new(mC())(o).mul(i)),tickMax:s.add(new(mC())(l).mul(i))})}var MC=SC((function(e){var t=DC(e,2),n=t[0],r=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(a,2),o=DC(AC([n,r]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var d=c===1/0?[l].concat(CC(jC(0,a-1).map((function(){return 1/0})))):[].concat(CC(jC(0,a-1).map((function(){return-1/0}))),[c]);return n>r?_C(d):d}if(l===c)return OC(l,a,s);var u=RC(l,c,i,s),m=u.step,h=u.tickMin,p=u.tickMax,f=EC.rangeStep(h,p.add(new(mC())(.1).mul(m)),m);return n>r?_C(f):f})),IC=(SC((function(e){var t=DC(e,2),n=t[0],r=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(a,2),o=DC(AC([n,r]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[n,r];if(l===c)return OC(l,a,s);var d=PC(new(mC())(c).sub(l).div(i-1),s,0),u=NC(wC((function(e){return new(mC())(l).add(new(mC())(e).mul(d)).toNumber()})),jC)(0,i).filter((function(e){return e>=l&&e<=c}));return n>r?_C(u):u})),SC((function(e,t){var n=DC(e,2),r=n[0],a=n[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=DC(AC([r,a]),2),o=i[0],l=i[1];if(o===-1/0||l===1/0)return[r,a];if(o===l)return[o];var c=Math.max(t,2),d=PC(new(mC())(l).sub(o).div(c-1),s,0),u=[].concat(CC(EC.rangeStep(new(mC())(o),new(mC())(l).sub(new(mC())(.99).mul(d)),d)),[l]);return r>a?_C(u):u}))),LC=__webpack_require__(3404),FC=["children","className"];function BC(){return BC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BC.apply(this,arguments)}function WC(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $C=t.forwardRef((function(e,n){var r=e.children,a=e.className,s=WC(e,FC),i=(0,Ky.A)("recharts-layer",a);return t.createElement("g",BC({className:i},Hb(s,!0),{ref:n}),r)})),UC=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function zC(e){return zC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zC(e)}function HC(){return HC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HC.apply(this,arguments)}function VC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GC(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function KC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eD(r.key),r)}}function YC(e,t,n){return t=ZC(t),function(e,t){if(t&&("object"===zC(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,XC()?Reflect.construct(t,n||[],ZC(e).constructor):t.apply(e,n))}function XC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XC=function(){return!!e})()}function ZC(e){return ZC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ZC(e)}function JC(e,t){return JC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},JC(e,t)}function QC(e,t,n){return(t=eD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eD(e){var t=function(e,t){if("object"!=zC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zC(t)?t:t+""}var tD=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),YC(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JC(e,t)}(n,e),r=n,(a=[{key:"render",value:function(){var e=this.props,n=e.offset,r=e.layout,a=e.width,s=e.dataKey,i=e.data,o=e.dataPointFormatter,l=e.xAxis,c=e.yAxis,d=GC(e,UC),u=Hb(d,!1);"x"===this.props.direction&&"number"!==l.type&&(0,LC.A)(!1);var m=i.map((function(e){var i=o(e,s),d=i.x,m=i.y,h=i.value,p=i.errorVal;if(!p)return null;var f,v,g=[];if(Array.isArray(p)){var x=VC(p,2);f=x[0],v=x[1]}else f=v=p;if("vertical"===r){var y=l.scale,b=m+n,j=b+a,w=b-a,N=y(h-f),_=y(h+v);g.push({x1:_,y1:j,x2:_,y2:w}),g.push({x1:N,y1:b,x2:_,y2:b}),g.push({x1:N,y1:j,x2:N,y2:w})}else if("horizontal"===r){var S=c.scale,E=d+n,C=E-a,D=E+a,T=S(h-f),k=S(h+v);g.push({x1:C,y1:k,x2:D,y2:k}),g.push({x1:E,y1:T,x2:E,y2:k}),g.push({x1:C,y1:T,x2:D,y2:T})}return t.createElement($C,HC({className:"recharts-errorBar",key:"bar-".concat(g.map((function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)})))},u),g.map((function(e){return t.createElement("line",HC({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))})))}));return t.createElement($C,{className:"recharts-errorBars"},m)}}])&&KC(r.prototype,a),s&&KC(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.Component);QC(tD,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),QC(tD,"displayName","ErrorBar");var nD=["children","width","height","viewBox","className","style","title","desc"];function rD(){return rD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rD.apply(this,arguments)}function aD(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function sD(e){var n=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=aD(e,nD),u=s||{width:r,height:a,x:0,y:0},m=(0,Ky.A)("recharts-surface",i);return t.createElement("svg",rD({},Hb(d,!0,"svg"),{className:m,width:r,height:a,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),t.createElement("title",null,l),t.createElement("desc",null,c),n)}Math.abs,Math.atan2;const iD=Math.cos,oD=(Math.max,Math.min,Math.sin),lD=Math.sqrt,cD=Math.PI,dD=2*cD;const uD={draw(e,t){const n=lD(t/cD);e.moveTo(n,0),e.arc(0,0,n,0,dD)}},mD={draw(e,t){const n=lD(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},hD=lD(1/3),pD=2*hD,fD={draw(e,t){const n=lD(t/pD),r=n*hD;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},vD={draw(e,t){const n=lD(t),r=-n/2;e.rect(r,r,n,n)}},gD=oD(cD/10)/oD(7*cD/10),xD=oD(dD/10)*gD,yD=-iD(dD/10)*gD,bD={draw(e,t){const n=lD(.8908130915292852*t),r=xD*n,a=yD*n;e.moveTo(0,-n),e.lineTo(r,a);for(let s=1;s<5;++s){const t=dD*s/5,i=iD(t),o=oD(t);e.lineTo(o*n,-i*n),e.lineTo(i*r-o*a,o*r+i*a)}e.closePath()}},jD=lD(3),wD={draw(e,t){const n=-lD(t/(3*jD));e.moveTo(0,2*n),e.lineTo(-jD*n,-n),e.lineTo(jD*n,-n),e.closePath()}},ND=-.5,_D=lD(3)/2,SD=1/lD(12),ED=3*(SD/2+1),CD={draw(e,t){const n=lD(t/ED),r=n/2,a=n*SD,s=r,i=n*SD+n,o=-s,l=i;e.moveTo(r,a),e.lineTo(s,i),e.lineTo(o,l),e.lineTo(ND*r-_D*a,_D*r+ND*a),e.lineTo(ND*s-_D*i,_D*s+ND*i),e.lineTo(ND*o-_D*l,_D*o+ND*l),e.lineTo(ND*r+_D*a,ND*a-_D*r),e.lineTo(ND*s+_D*i,ND*i-_D*s),e.lineTo(ND*o+_D*l,ND*l-_D*o),e.closePath()}},DD=Math.PI,TD=2*DD,kD=1e-6,AD=TD-kD;function PD(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class OD{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?PD:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return PD;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,a,s){this._append`C${+e},${+t},${+n},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,n,r,a){if(e=+e,t=+t,n=+n,r=+r,(a=+a)<0)throw new Error(`negative radius: ${a}`);let s=this._x1,i=this._y1,o=n-e,l=r-t,c=s-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>kD)if(Math.abs(d*o-l*c)>kD&&a){let m=n-s,h=r-i,p=o*o+l*l,f=m*m+h*h,v=Math.sqrt(p),g=Math.sqrt(u),x=a*Math.tan((DD-Math.acos((p+u-f)/(2*v*g)))/2),y=x/g,b=x/v;Math.abs(y-1)>kD&&this._append`L${e+y*c},${t+y*d}`,this._append`A${a},${a},0,0,${+(d*m>c*h)},${this._x1=e+b*o},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,a,s){if(e=+e,t=+t,s=!!s,(n=+n)<0)throw new Error(`negative radius: ${n}`);let i=n*Math.cos(r),o=n*Math.sin(r),l=e+i,c=t+o,d=1^s,u=s?r-a:a-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>kD||Math.abs(this._y1-c)>kD)&&this._append`L${l},${c}`,n&&(u<0&&(u=u%TD+TD),u>AD?this._append`A${n},${n},0,1,${d},${e-i},${t-o}A${n},${n},0,1,${d},${this._x1=l},${this._y1=c}`:u>kD&&this._append`A${n},${n},0,${+(u>=DD)},${d},${this._x1=e+n*Math.cos(a)},${this._y1=t+n*Math.sin(a)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function RD(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new OD(t)}lD(3),lD(3);function MD(e){return MD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MD(e)}var ID=["type","size","sizeType"];function LD(){return LD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LD.apply(this,arguments)}function FD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FD(Object(n),!0).forEach((function(t){WD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=MD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=MD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==MD(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $D(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var UD={symbolCircle:uD,symbolCross:mD,symbolDiamond:fD,symbolSquare:vD,symbolStar:bD,symbolTriangle:wD,symbolWye:CD},zD=Math.PI/180,HD=function(e){var n=e.type,r=void 0===n?"circle":n,a=e.size,s=void 0===a?64:a,i=e.sizeType,o=void 0===i?"area":i,l=BD(BD({},$D(e,ID)),{},{type:r,size:s,sizeType:o}),c=l.className,d=l.cx,u=l.cy,m=Hb(l,!0);return d===+d&&u===+u&&s===+s?t.createElement("path",LD({},m,{className:(0,Ky.A)("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:function(){var e=function(e){var t="symbol".concat(iC()(e));return UD[t]||uD}(r),t=function(e,t){let n=null,r=RD(a);function a(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return e="function"===typeof e?e:YE(e||uD),t="function"===typeof t?t:YE(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:YE(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:YE(+e),a):t},a.context=function(e){return arguments.length?(n=null==e?null:e,a):n},a}().type(e).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*zD;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(s,o,r));return t()}()})):null};function VD(e){return VD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VD(e)}function qD(){return qD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qD.apply(this,arguments)}function GD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eT(r.key),r)}}function YD(e,t,n){return t=ZD(t),function(e,t){if(t&&("object"===VD(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,XD()?Reflect.construct(t,n||[],ZD(e).constructor):t.apply(e,n))}function XD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(XD=function(){return!!e})()}function ZD(e){return ZD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ZD(e)}function JD(e,t){return JD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},JD(e,t)}function QD(e,t,n){return(t=eT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eT(e){var t=function(e,t){if("object"!=VD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=VD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VD(t)?t:t+""}HD.registerSymbol=function(e,t){UD["symbol".concat(iC()(e))]=t};var tT=32,nT=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),YD(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JD(e,t)}(n,e),r=n,a=[{key:"renderIcon",value:function(e){var n=this.props.inactiveColor,r=16,a=tT/6,s=tT/3,i=e.inactive?n:e.color;if("plainline"===e.type)return t.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:tT,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return t.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(r,"h").concat(s,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(r,"\n            H").concat(tT,"M").concat(2*s,",").concat(r,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return t.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(tT,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(t.isValidElement(e.legendIcon)){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GD(Object(n),!0).forEach((function(t){QD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete o.legendIcon,t.cloneElement(e.legendIcon,o)}return t.createElement(HD,{fill:i,cx:r,cy:r,size:tT,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,n=this.props,r=n.payload,a=n.iconSize,s=n.layout,i=n.formatter,o=n.inactiveColor,l={x:0,y:0,width:tT,height:tT},c={display:"horizontal"===s?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((function(n,r){var s=n.formatter||i,u=(0,Ky.A)(QD(QD({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",n.inactive));if("none"===n.type)return null;var m=yb()(n.value)?null:n.value;fb(!yb()(n.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var h=n.inactive?o:n.color;return t.createElement("li",qD({className:u,style:c,key:"legend-item-".concat(r)},kb(e.props,n,r)),t.createElement(sD,{width:a,height:a,viewBox:l,style:d},e.renderIcon(n)),t.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},s?s(m,n,r):m))}))}},{key:"render",value:function(){var e=this.props,n=e.payload,r=e.layout,a=e.align;if(!n||!n.length)return null;var s={padding:0,margin:0,textAlign:"horizontal"===r?a:"left"};return t.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}],a&&KD(r.prototype,a),s&&KD(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.PureComponent);QD(nT,"displayName","Legend"),QD(nT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var rT=__webpack_require__(977),aT=__webpack_require__.n(rT);function sT(e,t,n){return!0===t?aT()(e,n):yb()(t)?aT()(e,t):e}function iT(e){return iT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iT(e)}var oT=["ref"];function lT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lT(Object(n),!0).forEach((function(t){fT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vT(r.key),r)}}function uT(e,t,n){return t=hT(t),function(e,t){if(t&&("object"===iT(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mT()?Reflect.construct(t,n||[],hT(e).constructor):t.apply(e,n))}function mT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mT=function(){return!!e})()}function hT(e){return hT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hT(e)}function pT(e,t){return pT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pT(e,t)}function fT(e,t,n){return(t=vT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vT(e){var t=function(e,t){if("object"!=iT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iT(t)?t:t+""}function gT(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function xT(e){return e.value}var yT=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return fT(e=uT(this,n,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pT(e,t)}(n,e),r=n,s=[{key:"getWithHeight",value:function(e,t){var n=cT(cT({},this.defaultProps),e.props).layout;return"vertical"===n&&ob(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],(a=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?cT({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,a=r.layout,s=r.align,i=r.verticalAlign,o=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===s&&"vertical"===a?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===s?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===i?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===i?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),cT(cT({},t),n)}},{key:"render",value:function(){var e=this,n=this.props,r=n.content,a=n.width,s=n.height,i=n.wrapperStyle,o=n.payloadUniqBy,l=n.payload,c=cT(cT({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(i)),i);return t.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,n){if(t.isValidElement(e))return t.cloneElement(e,n);if("function"===typeof e)return t.createElement(e,n);n.ref;var r=gT(n,oT);return t.createElement(nT,r)}(r,cT(cT({},this.props),{},{payload:sT(l,o,xT)})))}}])&&dT(r.prototype,a),s&&dT(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.PureComponent);function bT(e){return bT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bT(e)}function jT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jT(Object(n),!0).forEach((function(t){NT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=bT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bT(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}fT(yT,"displayName","Legend"),fT(yT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var _T=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,a=e.legendContent,s=Wb(t,yT);if(!s)return null;var i,o=yT.defaultProps,l=void 0!==o?wT(wT({},o),s.props):{};return i=s.props&&s.props.payload?s.props&&s.props.payload:"children"===a?(n||[]).reduce((function(e,t){var n=t.item,r=t.props,a=r.sectors||r.data||[];return e.concat(a.map((function(e){return{type:s.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(n||[]).map((function(e){var t=e.item,n=t.type.defaultProps,r=void 0!==n?wT(wT({},n),t.props):{},a=r.dataKey,s=r.name,i=r.legendType;return{inactive:r.hide,dataKey:a,type:l.iconType||i||"square",color:OT(t),value:s||a,payload:r}})),wT(wT(wT({},l),yT.getWithHeight(s,r)),{},{payload:i,item:s})};function ST(e){return ST="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ST(e)}function ET(e){return function(e){if(Array.isArray(e))return CT(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return CT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CT(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function DT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DT(Object(n),!0).forEach((function(t){kT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ST(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ST(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ST(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AT(e,t,n){return gb()(e)||gb()(t)?n:lb(t)?nb()(e,t,n):yb()(t)?t(e):n}function PT(e,t,n,r){var a=aC()(e,(function(e){return AT(e,t)}));if("number"===n){var s=a.filter((function(e){return ob(e)||parseFloat(e)}));return s.length?[nC()(s),eC()(s)]:[1/0,-1/0]}return(r?a.filter((function(e){return!gb()(e)})):a).map((function(e){return lb(e)||e instanceof Date?e:""}))}var OT=function(e){var t,n,r=e.type.displayName,a=null!==(t=e.type)&&void 0!==t&&t.defaultProps?TT(TT({},e.type.defaultProps),e.props):e.props,s=a.stroke,i=a.fill;switch(r){case"Line":n=s;break;case"Area":case"Radar":n=s&&"none"!==s?s:i;break;default:n=i}return n},RT=function(e,t,n,r,a){var s=Bb(t.props.children,tD).filter((function(e){return function(e,t,n){return!!gb()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,a,e.props.direction)}));if(s&&s.length){var i=s.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=AT(t,n);if(gb()(r))return e;var a=Array.isArray(r)?[nC()(r),eC()(r)]:[r,r],s=i.reduce((function(e,n){var r=AT(t,n,0),s=a[0]-Math.abs(Array.isArray(r)?r[0]:r),i=a[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(s,e[0]),Math.max(i,e[1])]}),[1/0,-1/0]);return[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}),[1/0,-1/0])}return null},MT=function(e,t,n,r,a){var s=t.map((function(t){var s=t.props.dataKey;return"number"===n&&s&&RT(e,t,s,r)||PT(e,s,n,a)}));if("number"===n)return s.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var i={};return s.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)i[t[n]]||(i[t[n]]=!0,e.push(t[n]));return e}),[])},IT=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},LT=function(e,t,n){if(!e)return null;var r=e.scale,a=e.duplicateDomain,s=e.type,i=e.range,o="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===s&&r.bandwidth?r.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null===i||void 0===i?void 0:i.length)>=2?2*sb(i[0]-i[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=a?a.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}})).filter((function(e){return!eb()(e.coordinate)})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+l,value:e,offset:l}})):r.domain().map((function(e,t){return{coordinate:r(e)+l,value:a?a[e]:e,index:t,offset:l}}))},FT=new WeakMap,BT=function(e,t){if("function"!==typeof t)return e;FT.has(e)||FT.set(e,new WeakMap);var n=FT.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},WT=function(t,n,r){var a=t.scale,s=t.type,i=t.layout,o=t.axisType;if("auto"===a)return"radial"===i&&"radiusAxis"===o?{scale:Kj(),realScaleType:"band"}:"radial"===i&&"angleAxis"===o?{scale:MN(),realScaleType:"linear"}:"category"===s&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Xj(),realScaleType:"point"}:"category"===s?{scale:Kj(),realScaleType:"band"}:{scale:MN(),realScaleType:"linear"};if(Jy()(a)){var l="scale".concat(iC()(a));return{scale:(e[l]||Xj)(),realScaleType:e[l]?l:"point"}}return yb()(a)?{scale:a}:{scale:Xj(),realScaleType:"point"}},$T=1e-4,UT=function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),a=Math.min(r[0],r[1])-$T,s=Math.max(r[0],r[1])+$T,i=e(t[0]),o=e(t[n-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[n-1]])}},zT={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,s=0,i=0;i<t;++i){var o=eb()(e[i][n][1])?e[i][n][0]:e[i][n][1];o>=0?(e[i][n][0]=a,e[i][n][1]=a+o,a=e[i][n][1]):(e[i][n][0]=s,e[i][n][1]=s+o,s=e[i][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,a,s=0,i=e[0].length;s<i;++s){for(a=n=0;n<r;++n)a+=e[n][s][1]||0;if(a)for(n=0;n<r;++n)e[n][s][1]/=a}GE(e,t)}},none:GE,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,a=e[t[0]],s=a.length;r<s;++r){for(var i=0,o=0;i<n;++i)o+=e[i][r][1]||0;a[r][1]+=a[r][0]=-o/2}GE(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,a,s=0,i=1;i<r;++i){for(var o=0,l=0,c=0;o<a;++o){for(var d=e[t[o]],u=d[i][1]||0,m=(u-(d[i-1][1]||0))/2,h=0;h<o;++h){var p=e[t[h]];m+=(p[i][1]||0)-(p[i-1][1]||0)}l+=u,c+=m*u}n[i-1][1]+=n[i-1][0]=s,l&&(s-=c/l)}n[i-1][1]+=n[i-1][0]=s,GE(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,s=0;s<t;++s){var i=eb()(e[s][n][1])?e[s][n][0]:e[s][n][1];i>=0?(e[s][n][0]=a,e[s][n][1]=a+i,a=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}}},HT=function(e,t,n){var r=t.map((function(e){return e.props.dataKey})),a=zT[n],s=function(){var e=YE([]),t=XE,n=GE,r=ZE;function a(a){var s,i,o=Array.from(e.apply(this,arguments),JE),l=o.length,c=-1;for(const e of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(e,o[s].key,c,a)]).data=e;for(s=0,i=KE(t(o));s<l;++s)o[i[s]].index=s;return n(o,i),o}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:YE(Array.from(t)),a):e},a.value=function(e){return arguments.length?(r="function"===typeof e?e:YE(+e),a):r},a.order=function(e){return arguments.length?(t=null==e?XE:"function"===typeof e?e:YE(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(n=null==e?GE:e,a):n},a}().keys(r).value((function(e,t){return+AT(e,t,0)})).order(XE).offset(a);return s(e)},VT=function(e,t){var n=t.realScaleType,r=t.type,a=t.tickCount,s=t.originalDomain,i=t.allowDecimals,o=n||t.scale;if("auto"!==o&&"linear"!==o)return null;if(a&&"number"===r&&s&&("auto"===s[0]||"auto"===s[1])){var l=e.domain();if(!l.length)return null;var c=MC(l,a,i);return e.domain([nC()(c),eC()(c)]),{niceTicks:c}}if(a&&"number"===r){var d=e.domain();return{niceTicks:IC(d,a,i)}}return null};var qT=function(e){var t=e.axis,n=e.ticks,r=e.offset,a=e.bandSize,s=e.entry,i=e.index;if("category"===t.type)return n[i]?n[i].coordinate+r:null;var o=AT(s,t.dataKey,t.domain[i]);return gb()(o)?null:t.scale(o)-a/2+r},GT=function(e,t,n){return Object.keys(e).reduce((function(r,a){var s=e[a].stackedData.reduce((function(e,r){var a=r.slice(t,n+1).reduce((function(e,t){return[nC()(t.concat([e[0]]).filter(ob)),eC()(t.concat([e[1]]).filter(ob))]}),[1/0,-1/0]);return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]}),[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},KT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,YT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,XT=function(e,t,n){if(yb()(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(ob(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(KT.test(e[0])){var a=+KT.exec(e[0])[1];r[0]=t[0]-a}else yb()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(ob(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(YT.test(e[1])){var s=+YT.exec(e[1])[1];r[1]=t[1]+s}else yb()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},ZT=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var a=dC()(t,(function(e){return e.coordinate})),s=1/0,i=1,o=a.length;i<o;i++){var l=a[i],c=a[i-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},JT=function(e,t,n){return e&&e.length?lC()(e,nb()(n,"type.defaultProps.domain"))?t:e:t},QT=function(e,t){var n=e.type.defaultProps?TT(TT({},e.type.defaultProps),e.props):e.props,r=n.dataKey,a=n.name,s=n.unit,i=n.formatter,o=n.tooltipType,l=n.chartType,c=n.hide;return TT(TT({},Hb(e,!1)),{},{dataKey:r,unit:s,formatter:i,name:a||r,color:OT(e),value:AT(t,r),type:o,payload:t,chartType:l,hide:c})};function ek(e){return ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ek(e)}function tk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tk(Object(n),!0).forEach((function(t){rk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ek(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ek(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ek(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ak(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return sk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ik=Math.PI/180,ok=function(e){return 180*e/Math.PI},lk=function(e,t,n,r){return{x:e+Math.cos(-ik*r)*n,y:t+Math.sin(-ik*r)*n}},ck=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},dk=function(e,t){var n=e.x,r=e.y,a=t.cx,s=t.cy,i=function(e,t){var n=e.x,r=e.y,a=t.x,s=t.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(r-s,2))}({x:n,y:r},{x:a,y:s});if(i<=0)return{radius:i};var o=(n-a)/i,l=Math.acos(o);return r>s&&(l=2*Math.PI-l),{radius:i,angle:ok(l),angleInRadian:l}},uk=function(e,t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),s=Math.floor(r/360);return e+360*Math.min(a,s)},mk=function(e,t){var n=e.x,r=e.y,a=dk({x:n,y:r},t),s=a.radius,i=a.angle,o=t.innerRadius,l=t.outerRadius;if(s<o||s>l)return!1;if(0===s)return!0;var c,d=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),a=Math.floor(n/360),s=Math.min(r,a);return{startAngle:t-360*s,endAngle:n-360*s}}(t),u=d.startAngle,m=d.endAngle,h=i;if(u<=m){for(;h>m;)h-=360;for(;h<u;)h+=360;c=h>=u&&h<=m}else{for(;h>u;)h-=360;for(;h<m;)h+=360;c=h>=m&&h<=u}return c?nk(nk({},t),{},{radius:s,angle:uk(h,t)}):null},hk=function(e){return(0,t.isValidElement)(e)||yb()(e)||"boolean"===typeof e?"":e.className};function pk(e){return pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pk(e)}var fk=["offset"];function vk(e){return function(e){if(Array.isArray(e))return gk(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return gk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gk(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xk(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function yk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yk(Object(n),!0).forEach((function(t){jk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=pk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pk(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wk(){return wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wk.apply(this,arguments)}var Nk=function(e,n,r){var a,s,i=e.position,o=e.viewBox,l=e.offset,c=e.className,d=o,u=d.cx,m=d.cy,h=d.innerRadius,p=d.outerRadius,f=d.startAngle,v=d.endAngle,g=d.clockWise,x=(h+p)/2,y=function(e,t){return sb(t-e)*Math.min(Math.abs(t-e),360)}(f,v),b=y>=0?1:-1;"insideStart"===i?(a=f+b*l,s=g):"insideEnd"===i?(a=v-b*l,s=!g):"end"===i&&(a=v+b*l,s=g),s=y<=0?s:!s;var j=lk(u,m,x,a),w=lk(u,m,x,a+359*(s?1:-1)),N="M".concat(j.x,",").concat(j.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(s?0:1,",\n    ").concat(w.x,",").concat(w.y),_=gb()(e.id)?db("recharts-radial-line-"):e.id;return t.createElement("text",wk({},r,{dominantBaseline:"central",className:(0,Ky.A)("recharts-radial-bar-label",c)}),t.createElement("defs",null,t.createElement("path",{id:_,d:N})),t.createElement("textPath",{xlinkHref:"#".concat(_)},n))};function _k(e){var n,r=e.offset,a=bk({offset:void 0===r?5:r},xk(e,fk)),s=a.viewBox,i=a.position,o=a.value,l=a.children,c=a.content,d=a.className,u=void 0===d?"":d,m=a.textBreakAll;if(!s||gb()(o)&&gb()(l)&&!(0,t.isValidElement)(c)&&!yb()(c))return null;if((0,t.isValidElement)(c))return(0,t.cloneElement)(c,a);if(yb()(c)){if(n=(0,t.createElement)(c,a),(0,t.isValidElement)(n))return n}else n=function(e){var t=e.value,n=e.formatter,r=gb()(e.children)?t:e.children;return yb()(n)?n(r):r}(a);var h=function(e){return"cx"in e&&ob(e.cx)}(s),p=Hb(a,!0);if(h&&("insideStart"===i||"insideEnd"===i||"end"===i))return Nk(a,n,p);var f=h?function(e){var t=e.viewBox,n=e.offset,r=e.position,a=t,s=a.cx,i=a.cy,o=a.innerRadius,l=a.outerRadius,c=(a.startAngle+a.endAngle)/2;if("outside"===r){var d=lk(s,i,l+n,c),u=d.x;return{x:u,y:d.y,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=lk(s,i,(o+l)/2,c);return{x:m.x,y:m.y,textAnchor:"middle",verticalAnchor:"middle"}}(a):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,a=e.position,s=t,i=s.x,o=s.y,l=s.width,c=s.height,d=c>=0?1:-1,u=d*r,m=d>0?"end":"start",h=d>0?"start":"end",p=l>=0?1:-1,f=p*r,v=p>0?"end":"start",g=p>0?"start":"end";if("top"===a)return bk(bk({},{x:i+l/2,y:o-d*r,textAnchor:"middle",verticalAnchor:m}),n?{height:Math.max(o-n.y,0),width:l}:{});if("bottom"===a)return bk(bk({},{x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(n.y+n.height-(o+c),0),width:l}:{});if("left"===a){var x={x:i-f,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return bk(bk({},x),n?{width:Math.max(x.x-n.x,0),height:c}:{})}if("right"===a){var y={x:i+l+f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return bk(bk({},y),n?{width:Math.max(n.x+n.width-y.x,0),height:c}:{})}var b=n?{width:l,height:c}:{};return"insideLeft"===a?bk({x:i+f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideRight"===a?bk({x:i+l-f,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},b):"insideTop"===a?bk({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:h},b):"insideBottom"===a?bk({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:m},b):"insideTopLeft"===a?bk({x:i+f,y:o+u,textAnchor:g,verticalAnchor:h},b):"insideTopRight"===a?bk({x:i+l-f,y:o+u,textAnchor:v,verticalAnchor:h},b):"insideBottomLeft"===a?bk({x:i+f,y:o+c-u,textAnchor:g,verticalAnchor:m},b):"insideBottomRight"===a?bk({x:i+l-f,y:o+c-u,textAnchor:v,verticalAnchor:m},b):jb()(a)&&(ob(a.x)||ib(a.x))&&(ob(a.y)||ib(a.y))?bk({x:i+ub(a.x,l),y:o+ub(a.y,c),textAnchor:"end",verticalAnchor:"end"},b):bk({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(a);return t.createElement(Fj,wk({className:(0,Ky.A)("recharts-label",u)},p,f,{breakAll:m}),n)}_k.displayName="Label";var Sk=function(e){var t=e.cx,n=e.cy,r=e.angle,a=e.startAngle,s=e.endAngle,i=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,d=e.x,u=e.y,m=e.top,h=e.left,p=e.width,f=e.height,v=e.clockWise,g=e.labelViewBox;if(g)return g;if(ob(p)&&ob(f)){if(ob(d)&&ob(u))return{x:d,y:u,width:p,height:f};if(ob(m)&&ob(h))return{x:m,y:h,width:p,height:f}}return ob(d)&&ob(u)?{x:d,y:u,width:0,height:0}:ob(t)&&ob(n)?{cx:t,cy:n,startAngle:a||r||0,endAngle:s||r||0,innerRadius:l||0,outerRadius:c||o||i||0,clockWise:v}:e.viewBox?e.viewBox:{}};function Ek(e){return Ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ek(e)}function Ck(){return Ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ck.apply(this,arguments)}function Dk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Tk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ak(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kk(Object(n),!0).forEach((function(t){Pk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ek(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ek(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ek(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ok(e){return Array.isArray(e)&&lb(e[0])&&lb(e[1])?e.join(" ~ "):e}_k.parseViewBox=Sk,_k.renderCallByParent=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=Sk(e),i=Bb(a,_k).map((function(e,r){return(0,t.cloneElement)(e,{viewBox:n||s,key:"label-".concat(r)})}));if(!r)return i;var o=function(e,n){return e?!0===e?t.createElement(_k,{key:"label-implicit",viewBox:n}):lb(e)?t.createElement(_k,{key:"label-implicit",viewBox:n,value:e}):(0,t.isValidElement)(e)?e.type===_k?(0,t.cloneElement)(e,{key:"label-implicit",viewBox:n}):t.createElement(_k,{key:"label-implicit",content:e,viewBox:n}):yb()(e)?t.createElement(_k,{key:"label-implicit",content:e,viewBox:n}):jb()(e)?t.createElement(_k,wk({viewBox:n},e,{key:"label-implicit"})):null:null}(e.label,n||s);return[o].concat(vk(i))};var Rk=function(e){var n=e.separator,r=void 0===n?" : ":n,a=e.contentStyle,s=void 0===a?{}:a,i=e.itemStyle,o=void 0===i?{}:i,l=e.labelStyle,c=void 0===l?{}:l,d=e.payload,u=e.formatter,m=e.itemSorter,h=e.wrapperClassName,p=e.labelClassName,f=e.label,v=e.labelFormatter,g=e.accessibilityLayer,x=void 0!==g&&g,y=Ak({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),b=Ak({margin:0},c),j=!gb()(f),w=j?f:"",N=(0,Ky.A)("recharts-default-tooltip",h),_=(0,Ky.A)("recharts-tooltip-label",p);j&&v&&void 0!==d&&null!==d&&(w=v(f,d));var S=x?{role:"status","aria-live":"assertive"}:{};return t.createElement("div",Ck({className:N,style:y},S),t.createElement("p",{className:_,style:b},t.isValidElement(w)?w:"".concat(w)),function(){if(d&&d.length){var e=(m?dC()(d,m):d).map((function(e,n){if("none"===e.type)return null;var a=Ak({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},o),s=e.formatter||u||Ok,i=e.value,l=e.name,c=i,m=l;if(s&&null!=c&&null!=m){var h=s(i,l,e,n,d);if(Array.isArray(h)){var p=Dk(h,2);c=p[0],m=p[1]}else c=h}return t.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:a},lb(m)?t.createElement("span",{className:"recharts-tooltip-item-name"},m):null,lb(m)?t.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,t.createElement("span",{className:"recharts-tooltip-item-value"},c),t.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return t.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function Mk(e){return Mk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mk(e)}function Ik(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Mk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mk(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lk="recharts-tooltip-wrapper",Fk={visibility:"hidden"};function Bk(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return(0,Ky.A)(Lk,Ik(Ik(Ik(Ik({},"".concat(Lk,"-right"),ob(n)&&t&&ob(t.x)&&n>=t.x),"".concat(Lk,"-left"),ob(n)&&t&&ob(t.x)&&n<t.x),"".concat(Lk,"-bottom"),ob(r)&&t&&ob(t.y)&&r>=t.y),"".concat(Lk,"-top"),ob(r)&&t&&ob(t.y)&&r<t.y))}function Wk(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(s&&ob(s[r]))return s[r];var d=n[r]-o-a,u=n[r]+a;return t[r]?i[r]?d:u:i[r]?d<l[r]?Math.max(u,l[r]):Math.max(d,l[r]):u+o>l[r]+c?Math.max(d,l[r]):Math.max(u,l[r])}function $k(e){return $k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$k(e)}function Uk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uk(Object(n),!0).forEach((function(t){Yk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xk(r.key),r)}}function Vk(e,t,n){return t=Gk(t),function(e,t){if(t&&("object"===$k(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qk()?Reflect.construct(t,n||[],Gk(e).constructor):t.apply(e,n))}function qk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qk=function(){return!!e})()}function Gk(e){return Gk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gk(e)}function Kk(e,t){return Kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kk(e,t)}function Yk(e,t,n){return(t=Xk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xk(e){var t=function(e,t){if("object"!=$k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$k(t)?t:t+""}var Zk=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Yk(e=Vk(this,n,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Yk(e,"handleKeyDown",(function(t){var n,r,a,s;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=e.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(a=null===(s=e.props.coordinate)||void 0===s?void 0:s.y)&&void 0!==a?a:0}})})),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kk(e,t)}(n,e),r=n,(a=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,n=this.props,r=n.active,a=n.allowEscapeViewBox,s=n.animationDuration,i=n.animationEasing,o=n.children,l=n.coordinate,c=n.hasPayload,d=n.isAnimationActive,u=n.offset,m=n.position,h=n.reverseDirection,p=n.useTranslate3d,f=n.viewBox,v=n.wrapperStyle,g=function(e){var t,n,r=e.allowEscapeViewBox,a=e.coordinate,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,d=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&a?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=Wk({allowEscapeViewBox:r,coordinate:a,key:"x",offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),translateY:n=Wk({allowEscapeViewBox:r,coordinate:a,key:"y",offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):Fk,cssClasses:Bk({translateX:t,translateY:n,coordinate:a})}}({allowEscapeViewBox:a,coordinate:l,offsetTopLeft:u,position:m,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:f}),x=g.cssClasses,y=g.cssProperties,b=zk(zk({transition:d&&r?"transform ".concat(s,"ms ").concat(i):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&c?"visible":"hidden",position:"absolute",top:0,left:0},v);return t.createElement("div",{tabIndex:-1,className:x,style:b,ref:function(t){e.wrapperNode=t}},o)}}])&&Hk(r.prototype,a),s&&Hk(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.PureComponent);function Jk(e){return Jk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jk(e)}function Qk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qk(Object(n),!0).forEach((function(t){iA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oA(r.key),r)}}function nA(e,t,n){return t=aA(t),function(e,t){if(t&&("object"===Jk(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rA()?Reflect.construct(t,n||[],aA(e).constructor):t.apply(e,n))}function rA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rA=function(){return!!e})()}function aA(e){return aA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aA(e)}function sA(e,t){return sA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sA(e,t)}function iA(e,t,n){return(t=oA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oA(e){var t=function(e,t){if("object"!=Jk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Jk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jk(t)?t:t+""}function lA(e){return e.dataKey}var cA=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),nA(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sA(e,t)}(n,e),r=n,(a=[{key:"render",value:function(){var e=this,n=this.props,r=n.active,a=n.allowEscapeViewBox,s=n.animationDuration,i=n.animationEasing,o=n.content,l=n.coordinate,c=n.filterNull,d=n.isAnimationActive,u=n.offset,m=n.payload,h=n.payloadUniqBy,p=n.position,f=n.reverseDirection,v=n.useTranslate3d,g=n.viewBox,x=n.wrapperStyle,y=null!==m&&void 0!==m?m:[];c&&y.length&&(y=sT(m.filter((function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)})),h,lA));var b=y.length>0;return t.createElement(Zk,{allowEscapeViewBox:a,animationDuration:s,animationEasing:i,isAnimationActive:d,active:r,coordinate:l,hasPayload:b,offset:u,position:p,reverseDirection:f,useTranslate3d:v,viewBox:g,wrapperStyle:x},function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):"function"===typeof e?t.createElement(e,n):t.createElement(Rk,n)}(o,eA(eA({},this.props),{},{payload:y})))}}])&&tA(r.prototype,a),s&&tA(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.PureComponent);iA(cA,"displayName","Tooltip"),iA(cA,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!tj.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var dA=__webpack_require__(4223),uA=__webpack_require__.n(dA);function mA(){return mA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mA.apply(this,arguments)}var hA=function(e){var n=e.cx,r=e.cy,a=e.r,s=e.className,i=(0,Ky.A)("recharts-dot",s);return n===+n&&r===+r&&a===+a?t.createElement("circle",mA({},Hb(e,!1),Tb(e),{className:i,cx:n,cy:r,r:a})):null},pA=__webpack_require__(5173),fA=__webpack_require__.n(pA),vA=Object.getOwnPropertyNames,gA=Object.getOwnPropertySymbols,xA=Object.prototype.hasOwnProperty;function yA(e,t){return function(n,r,a){return e(n,r,a)&&t(n,r,a)}}function bA(e){return function(t,n,r){if(!t||!n||"object"!==typeof t||"object"!==typeof n)return e(t,n,r);var a=r.cache,s=a.get(t),i=a.get(n);if(s&&i)return s===n&&i===t;a.set(t,n),a.set(n,t);var o=e(t,n,r);return a.delete(t),a.delete(n),o}}function jA(e){return vA(e).concat(gA(e))}var wA=Object.hasOwn||function(e,t){return xA.call(e,t)};function NA(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var _A=Object.getOwnPropertyDescriptor,SA=Object.keys;function EA(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function CA(e,t){return NA(e.getTime(),t.getTime())}function DA(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function TA(e,t){return e===t}function kA(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a,s,i=new Array(r),o=e.entries(),l=0;(a=o.next())&&!a.done;){for(var c=t.entries(),d=!1,u=0;(s=c.next())&&!s.done;)if(i[u])u++;else{var m=a.value,h=s.value;if(n.equals(m[0],h[0],l,u,e,t,n)&&n.equals(m[1],h[1],m[0],h[0],e,t,n)){d=i[u]=!0;break}u++}if(!d)return!1;l++}return!0}var AA=NA;function PA(e,t,n){var r=SA(e),a=r.length;if(SA(t).length!==a)return!1;for(;a-- >0;)if(!BA(e,t,n,r[a]))return!1;return!0}function OA(e,t,n){var r,a,s,i=jA(e),o=i.length;if(jA(t).length!==o)return!1;for(;o-- >0;){if(!BA(e,t,n,r=i[o]))return!1;if(a=_A(e,r),s=_A(t,r),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable))return!1}return!0}function RA(e,t){return NA(e.valueOf(),t.valueOf())}function MA(e,t){return e.source===t.source&&e.flags===t.flags}function IA(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a,s,i=new Array(r),o=e.values();(a=o.next())&&!a.done;){for(var l=t.values(),c=!1,d=0;(s=l.next())&&!s.done;){if(!i[d]&&n.equals(a.value,s.value,a.value,s.value,e,t,n)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function LA(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function FA(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function BA(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||wA(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var WA=Array.isArray,$A="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,UA=Object.assign,zA=Object.prototype.toString.call.bind(Object.prototype.toString);var HA=VA();VA({strict:!0}),VA({circular:!0}),VA({circular:!0,strict:!0}),VA({createInternalComparator:function(){return NA}}),VA({strict:!0,createInternalComparator:function(){return NA}}),VA({circular:!0,createInternalComparator:function(){return NA}}),VA({circular:!0,createInternalComparator:function(){return NA},strict:!0});function VA(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,a=e.createInternalComparator,s=e.createState,i=e.strict,o=void 0!==i&&i,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?OA:EA,areDatesEqual:CA,areErrorsEqual:DA,areFunctionsEqual:TA,areMapsEqual:r?yA(kA,OA):kA,areNumbersEqual:AA,areObjectsEqual:r?OA:PA,arePrimitiveWrappersEqual:RA,areRegExpsEqual:MA,areSetsEqual:r?yA(IA,OA):IA,areTypedArraysEqual:r?OA:LA,areUrlsEqual:FA};if(n&&(a=UA({},a,n(a))),t){var s=bA(a.areArraysEqual),i=bA(a.areMapsEqual),o=bA(a.areObjectsEqual),l=bA(a.areSetsEqual);a=UA({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}(e),c=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,i=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,u=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(e,h,p){if(e===h)return!0;if(null==e||null==h)return!1;var f=typeof e;if(f!==typeof h)return!1;if("object"!==f)return"number"===f?i(e,h,p):"function"===f&&a(e,h,p);var v=e.constructor;if(v!==h.constructor)return!1;if(v===Object)return o(e,h,p);if(WA(e))return t(e,h,p);if(null!=$A&&$A(e))return u(e,h,p);if(v===Date)return n(e,h,p);if(v===RegExp)return c(e,h,p);if(v===Map)return s(e,h,p);if(v===Set)return d(e,h,p);var g=zA(e);return"[object Date]"===g?n(e,h,p):"[object RegExp]"===g?c(e,h,p):"[object Map]"===g?s(e,h,p):"[object Set]"===g?d(e,h,p):"[object Object]"===g?"function"!==typeof e.then&&"function"!==typeof h.then&&o(e,h,p):"[object URL]"===g?m(e,h,p):"[object Error]"===g?r(e,h,p):"[object Arguments]"===g?o(e,h,p):("[object Boolean]"===g||"[object Number]"===g||"[object String]"===g)&&l(e,h,p)}}(l);return function(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,s=e.strict;if(r)return function(e,i){var o=r(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,d=o.meta;return n(e,i,{cache:c,equals:a,meta:d,strict:s})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var i={cache:void 0,equals:a,meta:void 0,strict:s};return function(e,t){return n(e,t,i)}}({circular:r,comparator:c,createState:s,equals:a?a(c):(t=c,function(e,n,r,a,s,i,o){return t(e,n,o)}),strict:o})}function qA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function r(a){n<0&&(n=a),a-n>t?(e(a),n=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)}))}function GA(e){return GA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GA(e)}function KA(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return YA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YA(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XA(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var a=KA(r),s=a[0],i=a.slice(1);return"number"===typeof s?void qA(n.bind(null,i),s):(n(s),void qA(n.bind(null,i)))}"object"===GA(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function ZA(e){return ZA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZA(e)}function JA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JA(Object(n),!0).forEach((function(t){eP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ZA(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ZA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ZA(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tP=function(e){return e},nP=function(e,t){return Object.keys(t).reduce((function(n,r){return QA(QA({},n),{},eP({},r,e(r,t[r])))}),{})},rP=function(e,t,n){return e.map((function(e){return"".concat((r=e,r.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(n);var r})).join(",")};function aP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||iP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sP(e){return function(e){if(Array.isArray(e))return oP(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||iP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iP(e,t){if(e){if("string"===typeof e)return oP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oP(e,t):void 0}}function oP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lP=1e-4,cP=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},dP=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},uP=function(e,t){return function(n){var r=cP(e,t);return dP(r,n)}},mP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],s=t[2],i=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,a=0,s=1,i=1;break;case"ease":r=.25,a=.1,s=.25,i=1;break;case"ease-in":r=.42,a=0,s=1,i=1;break;case"ease-out":r=.42,a=0,s=.58,i=1;break;case"ease-in-out":r=0,a=0,s=.58,i=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=aP(o[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),4);r=l[0],a=l[1],s=l[2],i=l[3]}}[r,s,a,i].every((function(e){return"number"===typeof e&&e>=0&&e<=1}));var c,d,u=uP(r,s),m=uP(a,i),h=(c=r,d=s,function(e){var t=cP(c,d),n=[].concat(sP(t.map((function(e,t){return e*t})).slice(1)),[0]);return dP(n,e)}),p=function(e){for(var t,n=e>1?1:e,r=n,a=0;a<8;++a){var s=u(r)-n,i=h(r);if(Math.abs(s-n)<lP||i<lP)return m(r);r=(t=r-s/i)>1?1:t<0?0:t}return m(r)};return p.isStepper=!1,p},hP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mP(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,a=void 0===r?8:r,s=e.dt,i=void 0===s?17:s,o=function(e,t,r){var s=r+(-(e-t)*n-r*a)*i/1e3,o=r*i/1e3+e;return Math.abs(o-t)<lP&&Math.abs(s)<lP?[t,0]:[o,s]};return o.isStepper=!0,o.dt=i,o}();default:if("cubic-bezier"===r.split("(")[0])return mP(r)}return"function"===typeof r?r:null};function pP(e){return pP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pP(e)}function fP(e){return function(e){if(Array.isArray(e))return jP(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vP(Object(n),!0).forEach((function(t){xP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==pP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pP(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||bP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bP(e,t){if(e){if("string"===typeof e)return jP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jP(e,t):void 0}}function jP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wP=function(e,t,n){return e+(t-e)*n},NP=function(e){return e.from!==e.to},_P=function e(t,n,r){var a=nP((function(e,n){if(NP(n)){var r=yP(t(n.from,n.to,n.velocity),2),a=r[0],s=r[1];return gP(gP({},n),{},{from:a,velocity:s})}return n}),n);return r<1?nP((function(e,t){return NP(t)?gP(gP({},t),{},{velocity:wP(t.velocity,a[e].velocity,r),from:wP(t.from,a[e].from,r)}):t}),n):e(t,a,r-1)};const SP=function(e,t,n,r,a){var s,i,o,l,c=(s=e,i=t,[Object.keys(s),Object.keys(i)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),d=c.reduce((function(n,r){return gP(gP({},n),{},xP({},r,[e[r],t[r]]))}),{}),u=c.reduce((function(n,r){return gP(gP({},n),{},xP({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),m=-1,h=function(){return null};return h=n.isStepper?function(r){o||(o=r);var s=(r-o)/n.dt;u=_P(n,u,s),a(gP(gP(gP({},e),t),nP((function(e,t){return t.from}),u))),o=r,Object.values(u).filter(NP).length&&(m=requestAnimationFrame(h))}:function(s){l||(l=s);var i=(s-l)/r,o=nP((function(e,t){return wP.apply(void 0,fP(t).concat([n(i)]))}),d);if(a(gP(gP(gP({},e),t),o)),i<1)m=requestAnimationFrame(h);else{var c=nP((function(e,t){return wP.apply(void 0,fP(t).concat([n(1)]))}),d);a(gP(gP(gP({},e),t),c))}},function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(m)}}};function EP(e){return EP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EP(e)}var CP=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function DP(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function TP(e){return function(e){if(Array.isArray(e))return kP(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return kP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kP(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function AP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AP(Object(n),!0).forEach((function(t){OP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OP(e,t,n){return(t=MP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MP(r.key),r)}}function MP(e){var t=function(e,t){if("object"!==EP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==EP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===EP(t)?t:String(t)}function IP(e,t){return IP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},IP(e,t)}function LP(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(H5){return!1}}();return function(){var n,r=WP(e);if(t){var a=WP(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return FP(this,n)}}function FP(e,t){if(t&&("object"===EP(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return BP(e)}function BP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WP(e){return WP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},WP(e)}var $P=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IP(e,t)}(i,e);var n,r,a,s=LP(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=(n=s.call(this,e,t)).props,a=r.isActive,o=r.attributeName,l=r.from,c=r.to,d=r.steps,u=r.children,m=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(BP(n)),n.changeStyle=n.changeStyle.bind(BP(n)),!a||m<=0)return n.state={style:{}},"function"===typeof u&&(n.state={style:c}),FP(n);if(d&&d.length)n.state={style:d[0].style};else if(l){if("function"===typeof u)return n.state={style:l},FP(n);n.state={style:o?OP({},o,l):l}}else n.state={style:{}};return n}return n=i,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,a=t.attributeName,s=t.shouldReAnimate,i=t.to,o=t.from,l=this.state.style;if(r)if(n){if(!(HA(e.to,i)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||s?o:e.to;if(this.state&&l){var u={style:a?OP({},a,d):d};(a&&l[a]!==d||!a&&l!==d)&&this.setState(u)}this.runAnimation(PP(PP({},this.props),{},{from:d,begin:0}))}}else{var m={style:a?OP({},a,i):i};this.state&&l&&(a&&l[a]!==i||!a&&l!==i)&&this.setState(m)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,a=e.duration,s=e.easing,i=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=SP(n,r,hP(s),a,this.changeStyle);this.manager.start([l,i,function(){t.stopJSAnimation=c()},a,o])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,a=e.onAnimationStart,s=n[0],i=s.style,o=s.duration,l=void 0===o?0:o;return this.manager.start([a].concat(TP(n.reduce((function(e,r,a){if(0===a)return e;var s=r.duration,i=r.easing,o=void 0===i?"ease":i,l=r.style,c=r.properties,d=r.onAnimationEnd,u=a>0?n[a-1]:r,m=c||Object.keys(l);if("function"===typeof o||"spring"===o)return[].concat(TP(e),[t.runJSAnimation.bind(t,{from:u.style,to:l,duration:s,easing:o}),s]);var h=rP(m,s,o),p=PP(PP(PP({},u.style),l),{},{transition:h});return[].concat(TP(e),[p,s,d]).filter(tP)}),[i,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=XA());var t=e.begin,n=e.duration,r=e.attributeName,a=e.to,s=e.easing,i=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,d=this.manager;if(this.unSubscribe=d.subscribe(this.handleStyleChange),"function"!==typeof s&&"function"!==typeof c&&"spring"!==s)if(l.length>1)this.runStepAnimation(e);else{var u=r?OP({},r,a):a,m=rP(Object.keys(u),n,s);d.start([i,t,PP(PP({},u),{},{transition:m}),n,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,n=e.children,r=(e.begin,e.duration),a=(e.attributeName,e.easing,e.isActive),s=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,DP(e,CP)),i=t.Children.count(n),o=this.state.style;if("function"===typeof n)return n(o);if(!a||0===i||r<=0)return n;var l=function(e){var n=e.props,r=n.style,a=void 0===r?{}:r,i=n.className;return(0,t.cloneElement)(e,PP(PP({},s),{},{style:PP(PP({},a),o),className:i}))};return 1===i?l(t.Children.only(n)):t.createElement("div",null,t.Children.map(n,(function(e){return l(e)})))}}])&&RP(n.prototype,r),a&&RP(n,a),Object.defineProperty(n,"prototype",{writable:!1}),i}(t.PureComponent);$P.displayName="Animate",$P.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},$P.propTypes={from:fA().oneOfType([fA().object,fA().string]),to:fA().oneOfType([fA().object,fA().string]),attributeName:fA().string,duration:fA().number,begin:fA().number,easing:fA().oneOfType([fA().string,fA().func]),steps:fA().arrayOf(fA().shape({duration:fA().number.isRequired,style:fA().object.isRequired,easing:fA().oneOfType([fA().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),fA().func]),properties:fA().arrayOf("string"),onAnimationEnd:fA().func})),children:fA().oneOfType([fA().node,fA().func]),isActive:fA().bool,canBegin:fA().bool,onAnimationEnd:fA().func,shouldReAnimate:fA().bool,onAnimationStart:fA().func,onAnimationReStart:fA().func};const UP=$P;function zP(e){return zP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zP(e)}function HP(){return HP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HP.apply(this,arguments)}function VP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GP(Object(n),!0).forEach((function(t){YP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=zP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zP(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var XP=function(e,t,n,r,a){var s,i=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=a[u]>i?i:a[u];s="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(s+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),s+="L ".concat(e+n-l*d[1],",").concat(t),d[1]>0&&(s+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+o*d[1])),s+="L ".concat(e+n,",").concat(t+r-o*d[2]),d[2]>0&&(s+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+n-l*d[2],",").concat(t+r)),s+="L ".concat(e+l*d[3],",").concat(t+r),d[3]>0&&(s+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-o*d[3])),s+="Z"}else if(i>0&&a===+a&&a>0){var m=Math.min(i,a);s="M ".concat(e,",").concat(t+o*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,"\n            L ").concat(e+n-l*m,",").concat(t,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+n,",").concat(t+o*m,"\n            L ").concat(e+n,",").concat(t+r-o*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+n-l*m,",").concat(t+r,"\n            L ").concat(e+l*m,",").concat(t+r,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+r-o*m," Z")}else s="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return s},ZP=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,a=t.x,s=t.y,i=t.width,o=t.height;if(Math.abs(i)>0&&Math.abs(o)>0){var l=Math.min(a,a+i),c=Math.max(a,a+i),d=Math.min(s,s+o),u=Math.max(s,s+o);return n>=l&&n<=c&&r>=d&&r<=u}return!1},JP={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QP=function(e){var n=KP(KP({},JP),e),r=(0,t.useRef)(),a=VP((0,t.useState)(-1),2),s=a[0],i=a[1];(0,t.useEffect)((function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&i(e)}catch(t){}}),[]);var o=n.x,l=n.y,c=n.width,d=n.height,u=n.radius,m=n.className,h=n.animationEasing,p=n.animationDuration,f=n.animationBegin,v=n.isAnimationActive,g=n.isUpdateAnimationActive;if(o!==+o||l!==+l||c!==+c||d!==+d||0===c||0===d)return null;var x=(0,Ky.A)("recharts-rectangle",m);return g?t.createElement(UP,{canBegin:s>0,from:{width:c,height:d,x:o,y:l},to:{width:c,height:d,x:o,y:l},duration:p,animationEasing:h,isActive:g},(function(e){var a=e.width,i=e.height,o=e.x,l=e.y;return t.createElement(UP,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,isActive:v,easing:h},t.createElement("path",HP({},Hb(n,!0),{className:x,d:XP(o,l,a,i,u),ref:r})))})):t.createElement("path",HP({},Hb(n,!0),{className:x,d:XP(o,l,c,d,u)}))};function eO(e){return eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eO(e)}function tO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(n),!0).forEach((function(t){rO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=eO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aO=["Webkit","Moz","O","ms"];function sO(e){return sO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sO(e)}function iO(){return iO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iO.apply(this,arguments)}function oO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oO(Object(n),!0).forEach((function(t){pO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fO(r.key),r)}}function dO(e,t,n){return t=mO(t),function(e,t){if(t&&("object"===sO(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,uO()?Reflect.construct(t,n||[],mO(e).constructor):t.apply(e,n))}function uO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(uO=function(){return!!e})()}function mO(e){return mO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mO(e)}function hO(e,t){return hO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hO(e,t)}function pO(e,t,n){return(t=fO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fO(e){var t=function(e,t){if("object"!=sO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sO(t)?t:t+""}var vO=function(e){return e.changedTouches&&!!e.changedTouches.length},gO=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),pO(t=dO(this,n,[e]),"handleDrag",(function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)})),pO(t,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])})),pO(t,"handleDragEnd",(function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var e=t.props,n=e.endIndex,r=e.onDragEnd,a=e.startIndex;null===r||void 0===r||r({endIndex:n,startIndex:a})})),t.detachDragEndListener()})),pO(t,"handleLeaveWrapper",(function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=window.setTimeout(t.handleDragEnd,t.props.leaveTimeOut))})),pO(t,"handleEnterSlideOrTraveller",(function(){t.setState({isTextActive:!0})})),pO(t,"handleLeaveSlideOrTraveller",(function(){t.setState({isTextActive:!1})})),pO(t,"handleSlideDragStart",(function(e){var n=vO(e)?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:n.pageX}),t.attachDragEndListener()})),t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(t,"startX"),endX:t.handleTravellerDragStart.bind(t,"endX")},t.state={},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hO(e,t)}(n,e),r=n,s=[{key:"renderDefaultTraveller",value:function(e){var n=e.x,r=e.y,a=e.width,s=e.height,i=e.stroke,o=Math.floor(r+s/2)-1;return t.createElement(t.Fragment,null,t.createElement("rect",{x:n,y:r,width:a,height:s,fill:i,stroke:"none"}),t.createElement("line",{x1:n+1,y1:o,x2:n+a-1,y2:o,fill:"none",stroke:"#fff"}),t.createElement("line",{x1:n+1,y1:o+2,x2:n+a-1,y2:o+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,r){return t.isValidElement(e)?t.cloneElement(e,r):yb()(e)?e(r):n.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,a=e.x,s=e.travellerWidth,i=e.updateId,o=e.startIndex,l=e.endIndex;if(n!==t.prevData||i!==t.prevUpdateId)return lO({prevData:n,prevTravellerWidth:s,prevUpdateId:i,prevX:a,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,a=e.x,s=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=Xj().domain(uA()(0,o)).range([a,a+s-i]),c=l.domain().map((function(e){return l(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:a,travellerWidth:s,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||a!==t.prevX||s!==t.prevTravellerWidth)){t.scale.range([a,a+r-s]);var c=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:s,prevUpdateId:i,prevX:a,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var a=Math.floor((n+r)/2);e[a]>t?r=a:n=a}return t>=e[r]?r:n}}],(a=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var t=e.startX,r=e.endX,a=this.state.scaleValues,s=this.props,i=s.gap,o=s.data.length-1,l=Math.min(t,r),c=Math.max(t,r),d=n.getIndexInRange(a,l),u=n.getIndexInRange(a,c);return{startIndex:d-d%i,endIndex:u===o?o:u-u%i}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,a=t.dataKey,s=AT(n[e],a,e);return yb()(r)?r(s,e):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,a=t.endX,s=this.props,i=s.x,o=s.width,l=s.travellerWidth,c=s.startIndex,d=s.endIndex,u=s.onChange,m=e.pageX-n;m>0?m=Math.min(m,i+o-l-a,i+o-l-r):m<0&&(m=Math.max(m,i-r,i-a));var h=this.getIndex({startX:r+m,endX:a+m});h.startIndex===c&&h.endIndex===d||!u||u(h),this.setState({startX:r+m,endX:a+m,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=vO(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,a=t.endX,s=t.startX,i=this.state[r],o=this.props,l=o.x,c=o.width,d=o.travellerWidth,u=o.onChange,m=o.gap,h=o.data,p={startX:this.state.startX,endX:this.state.endX},f=e.pageX-n;f>0?f=Math.min(f,l+c-d-i):f<0&&(f=Math.max(f,l-i)),p[r]=i+f;var v=this.getIndex(p),g=v.startIndex,x=v.endIndex;this.setState(pO(pO({},r,i+f),"brushMoveStartX",e.pageX),(function(){u&&function(){var e=h.length-1;return"startX"===r&&(a>s?g%m===0:x%m===0)||a<s&&x===e||"endX"===r&&(a>s?x%m===0:g%m===0)||a>s&&x===e}()&&u(v)}))}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,a=r.scaleValues,s=r.startX,i=r.endX,o=this.state[t],l=a.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=a.length)){var d=a[c];"startX"===t&&d>=i||"endX"===t&&d<=s||this.setState(pO({},t,d),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var e=this.props,n=e.x,r=e.y,a=e.width,s=e.height,i=e.fill,o=e.stroke;return t.createElement("rect",{stroke:o,fill:i,x:n,y:r,width:a,height:s})}},{key:"renderPanorama",value:function(){var e=this.props,n=e.x,r=e.y,a=e.width,s=e.height,i=e.data,o=e.children,l=e.padding,c=t.Children.only(o);return c?t.cloneElement(c,{x:n,y:r,width:a,height:s,margin:l,compact:!0,data:i}):null}},{key:"renderTravellerLayer",value:function(e,r){var a,s,i=this,o=this.props,l=o.y,c=o.travellerWidth,d=o.height,u=o.traveller,m=o.ariaLabel,h=o.data,p=o.startIndex,f=o.endIndex,v=Math.max(e,this.props.x),g=lO(lO({},Hb(this.props,!1)),{},{x:v,y:l,width:c,height:d}),x=m||"Min value: ".concat(null===(a=h[p])||void 0===a?void 0:a.name,", Max value: ").concat(null===(s=h[f])||void 0===s?void 0:s.name);return t.createElement($C,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),i.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,r))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},n.renderTraveller(u,g))}},{key:"renderSlide",value:function(e,n){var r=this.props,a=r.y,s=r.height,i=r.stroke,o=r.travellerWidth,l=Math.min(e,n)+o,c=Math.max(Math.abs(n-e)-o,0);return t.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:i,fillOpacity:.2,x:l,y:a,width:c,height:s})}},{key:"renderText",value:function(){var e=this.props,n=e.startIndex,r=e.endIndex,a=e.y,s=e.height,i=e.travellerWidth,o=e.stroke,l=this.state,c=l.startX,d=l.endX,u={pointerEvents:"none",fill:o};return t.createElement($C,{className:"recharts-brush-texts"},t.createElement(Fj,iO({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,d)-5,y:a+s/2},u),this.getTextOfTick(n)),t.createElement(Fj,iO({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,d)+i+5,y:a+s/2},u),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,n=e.data,r=e.className,a=e.children,s=e.x,i=e.y,o=e.width,l=e.height,c=e.alwaysShowText,d=this.state,u=d.startX,m=d.endX,h=d.isTextActive,p=d.isSlideMoving,f=d.isTravellerMoving,v=d.isTravellerFocused;if(!n||!n.length||!ob(s)||!ob(i)||!ob(o)||!ob(l)||o<=0||l<=0)return null;var g=(0,Ky.A)("recharts-brush",r),x=1===t.Children.count(a),y=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=aO.reduce((function(e,r){return nO(nO({},e),{},rO({},r+n,t))}),{});return r[e]=t,r}("userSelect","none");return t.createElement($C,{className:g,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(u,m),this.renderTravellerLayer(u,"startX"),this.renderTravellerLayer(m,"endX"),(h||p||f||v||c)&&this.renderText())}}])&&cO(r.prototype,a),s&&cO(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.PureComponent);pO(gO,"displayName","Brush"),pO(gO,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var xO=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},yO=__webpack_require__(1733),bO=__webpack_require__.n(yO),jO=__webpack_require__(7002),wO=__webpack_require__.n(jO),NO=function(e){return null};NO.displayName="Cell";var _O=__webpack_require__(4065),SO=__webpack_require__.n(_O);function EO(e){return EO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EO(e)}var CO=["valueAccessor"],DO=["data","dataKey","clockWise","id","textBreakAll"];function TO(e){return function(e){if(Array.isArray(e))return kO(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return kO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kO(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function AO(){return AO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AO.apply(this,arguments)}function PO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PO(Object(n),!0).forEach((function(t){RO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=EO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=EO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==EO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MO(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var IO=function(e){return Array.isArray(e.value)?SO()(e.value):e.value};function LO(e){var n=e.valueAccessor,r=void 0===n?IO:n,a=MO(e,CO),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=MO(a,DO);return s&&s.length?t.createElement($C,{className:"recharts-label-list"},s.map((function(e,n){var a=gb()(i)?r(e,n):AT(e&&e.payload,i),s=gb()(l)?{}:{id:"".concat(l,"-").concat(n)};return t.createElement(_k,AO({},Hb(e,!0),d,s,{parentViewBox:e.parentViewBox,value:a,textBreakAll:c,viewBox:_k.parseViewBox(gb()(o)?e:OO(OO({},e),{},{clockWise:o})),key:"label-".concat(n),index:n}))}))):null}LO.displayName="LabelList",LO.renderCallByParent=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var a=Bb(e.children,LO).map((function(e,r){return(0,t.cloneElement)(e,{data:n,key:"labelList-".concat(r)})}));return r?[function(e,n){return e?!0===e?t.createElement(LO,{key:"labelList-implicit",data:n}):t.isValidElement(e)||yb()(e)?t.createElement(LO,{key:"labelList-implicit",data:n,content:e}):jb()(e)?t.createElement(LO,AO({data:n},e,{key:"labelList-implicit"})):null:null}(e.label,n)].concat(TO(a)):a};var FO=__webpack_require__(2322),BO=__webpack_require__.n(FO),WO=__webpack_require__(6361),$O=__webpack_require__.n(WO);function UO(e){return UO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UO(e)}function zO(){return zO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zO.apply(this,arguments)}function HO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return VO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qO(Object(n),!0).forEach((function(t){KO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=UO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=UO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YO=function(e,t,n,r,a){var s,i=n-r;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+n,",").concat(t),s+="L ".concat(e+n-i/2,",").concat(t+a),s+="L ".concat(e+n-i/2-r,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z")},XO={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ZO=function(e){var n=GO(GO({},XO),e),r=(0,t.useRef)(),a=HO((0,t.useState)(-1),2),s=a[0],i=a[1];(0,t.useEffect)((function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&i(e)}catch(t){}}),[]);var o=n.x,l=n.y,c=n.upperWidth,d=n.lowerWidth,u=n.height,m=n.className,h=n.animationEasing,p=n.animationDuration,f=n.animationBegin,v=n.isUpdateAnimationActive;if(o!==+o||l!==+l||c!==+c||d!==+d||u!==+u||0===c&&0===d||0===u)return null;var g=(0,Ky.A)("recharts-trapezoid",m);return v?t.createElement(UP,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:u,x:o,y:l},to:{upperWidth:c,lowerWidth:d,height:u,x:o,y:l},duration:p,animationEasing:h,isActive:v},(function(e){var a=e.upperWidth,i=e.lowerWidth,o=e.height,l=e.x,c=e.y;return t.createElement(UP,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,easing:h},t.createElement("path",zO({},Hb(n,!0),{className:g,d:YO(l,c,a,i,o),ref:r})))})):t.createElement("g",null,t.createElement("path",zO({},Hb(n,!0),{className:g,d:YO(o,l,c,d,u)})))};function JO(e){return JO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JO(e)}function QO(){return QO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QO.apply(this,arguments)}function eR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(n),!0).forEach((function(t){nR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=JO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=JO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==JO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rR=function(e){var t=e.cx,n=e.cy,r=e.radius,a=e.angle,s=e.sign,i=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(i?1:-1)+r,d=Math.asin(o/c)/ik,u=l?a:a+s*d,m=l?a-s*d:a;return{center:lk(t,n,c,u),circleTangency:lk(t,n,r,u),lineTangency:lk(t,n,c*Math.cos(d*ik),m),theta:d}},aR=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,a=e.outerRadius,s=e.startAngle,i=function(e,t){return sb(t-e)*Math.min(Math.abs(t-e),359.999)}(s,e.endAngle),o=s+i,l=lk(t,n,a,s),c=lk(t,n,a,o),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(i)>180),",").concat(+(s>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var u=lk(t,n,r,s),m=lk(t,n,r,o);d+="L ".concat(m.x,",").concat(m.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(i)>180),",").concat(+(s<=o),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},sR={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},iR=function(e){var n=tR(tR({},sR),e),r=n.cx,a=n.cy,s=n.innerRadius,i=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,d=n.startAngle,u=n.endAngle,m=n.className;if(i<s||d===u)return null;var h,p=(0,Ky.A)("recharts-sector",m),f=i-s,v=ub(o,f,0,!0);return h=v>0&&Math.abs(d-u)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,i=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,d=sb(c-l),u=rR({cx:t,cy:n,radius:a,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),m=u.circleTangency,h=u.lineTangency,p=u.theta,f=rR({cx:t,cy:n,radius:a,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:o}),v=f.circleTangency,g=f.lineTangency,x=f.theta,y=o?Math.abs(l-c):Math.abs(l-c)-p-x;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):aR({cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:l,endAngle:c});var b="M ".concat(h.x,",").concat(h.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n  ");if(r>0){var j=rR({cx:t,cy:n,radius:r,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),w=j.circleTangency,N=j.lineTangency,_=j.theta,S=rR({cx:t,cy:n,radius:r,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),E=S.circleTangency,C=S.lineTangency,D=S.theta,T=o?Math.abs(l-c):Math.abs(l-c)-_-D;if(T<0&&0===s)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+="L".concat(C.x,",").concat(C.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(T>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else b+="L".concat(t,",").concat(n,"Z");return b}({cx:r,cy:a,innerRadius:s,outerRadius:i,cornerRadius:Math.min(v,f/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):aR({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u}),t.createElement("path",QO({},Hb(n,!0),{className:p,d:h,role:"img"}))},oR=["option","shapeType","propTransformer","activeClassName","isActive"];function lR(e){return lR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lR(e)}function cR(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function dR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dR(Object(n),!0).forEach((function(t){mR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=lR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lR(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hR(e,t){return uR(uR({},t),e)}function pR(e){var n=e.shapeType,r=e.elementProps;switch(n){case"rectangle":return t.createElement(QP,r);case"trapezoid":return t.createElement(ZO,r);case"sector":return t.createElement(iR,r);case"symbols":if(function(e){return"symbols"===e}(n))return t.createElement(HD,r);break;default:return null}}function fR(e){var n,r=e.option,a=e.shapeType,s=e.propTransformer,i=void 0===s?hR:s,o=e.activeClassName,l=void 0===o?"recharts-active-shape":o,c=e.isActive,d=cR(e,oR);if((0,t.isValidElement)(r))n=(0,t.cloneElement)(r,uR(uR({},d),function(e){return(0,t.isValidElement)(e)?e.props:e}(r)));else if(yb()(r))n=r(d);else if(BO()(r)&&!$O()(r)){var u=i(r,d);n=t.createElement(pR,{shapeType:a,elementProps:u})}else{var m=d;n=t.createElement(pR,{shapeType:a,elementProps:m})}return c?t.createElement($C,{className:l},n):n}function vR(e,t){return null!=t&&"trapezoids"in e.props}function gR(e,t){return null!=t&&"sectors"in e.props}function xR(e,t){return null!=t&&"points"in e.props}function yR(e,t){var n,r,a=e.x===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,s=e.y===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return a&&s}function bR(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function jR(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function wR(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=function(e,t){var n;return vR(e,t)?n="trapezoids":gR(e,t)?n="sectors":xR(e,t)&&(n="points"),n}(n,t),s=function(e,t){var n,r;return vR(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:gR(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:xR(e,t)?t.payload:{}}(n,t),i=r.filter((function(e,r){var i=lC()(s,e),o=n.props[a].filter((function(e){var r=function(e,t){var n;return vR(e,t)?n=yR:gR(e,t)?n=bR:xR(e,t)&&(n=jR),n}(n,t);return r(e,t)})),l=n.props[a].indexOf(o[o.length-1]);return i&&r===l}));return r.indexOf(i[i.length-1])}var NR=["x","y"];function _R(e){return _R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_R(e)}function SR(){return SR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SR.apply(this,arguments)}function ER(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ER(Object(n),!0).forEach((function(t){DR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=_R(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TR(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function kR(e,t){var n=e.x,r=e.y,a=TR(e,NR),s="".concat(n),i=parseInt(s,10),o="".concat(r),l=parseInt(o,10),c="".concat(t.height||a.height),d=parseInt(c,10),u="".concat(t.width||a.width),m=parseInt(u,10);return CR(CR(CR(CR(CR({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function AR(e){return t.createElement(fR,SR({shapeType:"rectangle",propTransformer:kR,activeClassName:"recharts-active-bar"},e))}var PR,OR=["value","background"];function RR(e){return RR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RR(e)}function MR(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function IR(){return IR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IR.apply(this,arguments)}function LR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LR(Object(n),!0).forEach((function(t){HR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VR(r.key),r)}}function WR(e,t,n){return t=UR(t),function(e,t){if(t&&("object"===RR(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$R()?Reflect.construct(t,n||[],UR(e).constructor):t.apply(e,n))}function $R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($R=function(){return!!e})()}function UR(e){return UR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},UR(e)}function zR(e,t){return zR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zR(e,t)}function HR(e,t,n){return(t=VR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VR(e){var t=function(e,t){if("object"!=RR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=RR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RR(t)?t:t+""}var qR=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return HR(e=WR(this,n,[].concat(r)),"state",{isAnimationFinished:!1}),HR(e,"id",db("recharts-bar-")),HR(e,"handleAnimationEnd",(function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()})),HR(e,"handleAnimationStart",(function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()})),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zR(e,t)}(n,e),r=n,s=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],(a=[{key:"renderRectanglesStatically",value:function(e){var n=this,r=this.props,a=r.shape,s=r.dataKey,i=r.activeIndex,o=r.activeBar,l=Hb(this.props,!1);return e&&e.map((function(e,r){var c=r===i,d=c?o:a,u=FR(FR(FR({},l),e),{},{isActive:c,option:d,index:r,dataKey:s,onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd});return t.createElement($C,IR({className:"recharts-bar-rectangle"},kb(n.props,e,r),{key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value)}),t.createElement(AR,u))}))}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,n=this.props,r=n.data,a=n.layout,s=n.isAnimationActive,i=n.animationBegin,o=n.animationDuration,l=n.animationEasing,c=n.animationId,d=this.state.prevData;return t.createElement(UP,{begin:i,duration:o,isActive:s,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(n){var s=n.t,i=r.map((function(e,t){var n=d&&d[t];if(n){var r=hb(n.x,e.x),i=hb(n.y,e.y),o=hb(n.width,e.width),l=hb(n.height,e.height);return FR(FR({},e),{},{x:r(s),y:i(s),width:o(s),height:l(s)})}if("horizontal"===a){var c=hb(0,e.height)(s);return FR(FR({},e),{},{y:e.y+e.height-c,height:c})}var u=hb(0,e.width)(s);return FR(FR({},e),{},{width:u})}));return t.createElement($C,null,e.renderRectanglesStatically(i))}))}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&t&&t.length)||r&&lC()(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,n=this.props,r=n.data,a=n.dataKey,s=n.activeIndex,i=Hb(this.props.background,!1);return r.map((function(n,r){n.value;var o=n.background,l=MR(n,OR);if(!o)return null;var c=FR(FR(FR(FR(FR({},l),{},{fill:"#eee"},o),i),kb(e.props,n,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:a,index:r,className:"recharts-bar-background-rectangle"});return t.createElement(AR,IR({key:"background-bar-".concat(r),option:e.props.background,isActive:r===s},c))}))}},{key:"renderErrorBar",value:function(e,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,a=r.data,s=r.xAxis,i=r.yAxis,o=r.layout,l=Bb(r.children,tD);if(!l)return null;var c="vertical"===o?a[0].height/2:a[0].width/2,d=function(e,t){var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:AT(e,t)}},u={clipPath:e?"url(#clipPath-".concat(n,")"):null};return t.createElement($C,u,l.map((function(e){return t.cloneElement(e,{key:"error-bar-".concat(n,"-").concat(e.props.dataKey),data:a,xAxis:s,yAxis:i,layout:o,offset:c,dataPointFormatter:d})})))}},{key:"render",value:function(){var e=this.props,n=e.hide,r=e.data,a=e.className,s=e.xAxis,i=e.yAxis,o=e.left,l=e.top,c=e.width,d=e.height,u=e.isAnimationActive,m=e.background,h=e.id;if(n||!r||!r.length)return null;var p=this.state.isAnimationFinished,f=(0,Ky.A)("recharts-bar",a),v=s&&s.allowDataOverflow,g=i&&i.allowDataOverflow,x=v||g,y=gb()(h)?this.id:h;return t.createElement($C,{className:f},v||g?t.createElement("defs",null,t.createElement("clipPath",{id:"clipPath-".concat(y)},t.createElement("rect",{x:v?o:o-c/2,y:g?l:l-d/2,width:v?c:2*c,height:g?d:2*d}))):null,t.createElement($C,{className:"recharts-bar-rectangles",clipPath:x?"url(#clipPath-".concat(y,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(x,y),(!u||p)&&LO.renderCallByParent(this.props,r))}}])&&BR(r.prototype,a),s&&BR(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.PureComponent);function GR(e){return GR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GR(e)}function KR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JR(r.key),r)}}function YR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YR(Object(n),!0).forEach((function(t){ZR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZR(e,t,n){return(t=JR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JR(e){var t=function(e,t){if("object"!=GR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=GR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==GR(t)?t:t+""}PR=qR,HR(qR,"displayName","Bar"),HR(qR,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!tj.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),HR(qR,"getComposedData",(function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,s=e.xAxis,i=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,m=e.offset,h=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null}(r,n);if(!h)return null;var p=t.layout,f=n.type.defaultProps,v=void 0!==f?FR(FR({},f),n.props):n.props,g=v.dataKey,x=v.children,y=v.minPointSize,b="horizontal"===p?i:s,j=c?b.scale.domain():null,w=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return r<=0&&a>=0?0:a<0?a:r}return n[0]}({numericAxis:b}),N=Bb(x,NO),_=u.map((function(e,t){var r,u,m,f,v,x;c?r=function(e,t){if(!t||2!==t.length||!ob(t[0])||!ob(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ob(e[0])||e[0]<n)&&(a[0]=n),(!ob(e[1])||e[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<n&&(a[1]=n),a}(c[d+t],j):(r=AT(e,g),Array.isArray(r)||(r=[w,r]));var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"===typeof e)return e;var a="number"===typeof n;return a?e(n,r):(a||(0,LC.A)(!1),t)}}(y,PR.defaultProps.minPointSize)(r[1],t);if("horizontal"===p){var _,S=[i.scale(r[0]),i.scale(r[1])],E=S[0],C=S[1];u=qT({axis:s,ticks:o,bandSize:a,offset:h.offset,entry:e,index:t}),m=null!==(_=null!==C&&void 0!==C?C:E)&&void 0!==_?_:void 0,f=h.size;var D=E-C;if(v=Number.isNaN(D)?0:D,x={x:u,y:i.y,width:f,height:i.height},Math.abs(b)>0&&Math.abs(v)<Math.abs(b)){var T=sb(v||b)*(Math.abs(b)-Math.abs(v));m-=T,v+=T}}else{var k=[s.scale(r[0]),s.scale(r[1])],A=k[0],P=k[1];if(u=A,m=qT({axis:i,ticks:l,bandSize:a,offset:h.offset,entry:e,index:t}),f=P-A,v=h.size,x={x:s.x,y:m,width:s.width,height:v},Math.abs(b)>0&&Math.abs(f)<Math.abs(b))f+=sb(f||b)*(Math.abs(b)-Math.abs(f))}return FR(FR(FR({},e),{},{x:u,y:m,width:f,height:v,value:c?r:r[1],payload:e,background:x},N&&N[t]&&N[t].props),{},{tooltipPayload:[QT(n,e)],tooltipPosition:{x:u+f/2,y:m+v/2}})}));return FR({data:_,layout:p},m)}));var QR=function(e,t){var n=e.x,r=e.y,a=t.x,s=t.y;return{x:Math.min(n,a),y:Math.min(r,s),width:Math.abs(a-n),height:Math.abs(s-r)}},eM=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a;case"end":var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}if(n){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&KR(t.prototype,n),r&&KR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();ZR(eM,"EPS",1e-4);var tM=function(e){var t=Object.keys(e).reduce((function(t,n){return XR(XR({},t),{},ZR({},n,eM.create(e[n])))}),{});return XR(XR({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,a=n.position;return bO()(e,(function(e,n){return t[n].apply(e,{bandAware:r,position:a})}))},isInRange:function(e){return wO()(e,(function(e,n){return t[n].isInRange(e)}))}})};function nM(){return nM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nM.apply(this,arguments)}function rM(e){return rM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rM(e)}function aM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aM(Object(n),!0).forEach((function(t){uM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mM(r.key),r)}}function oM(e,t,n){return t=cM(t),function(e,t){if(t&&("object"===rM(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,lM()?Reflect.construct(t,n||[],cM(e).constructor):t.apply(e,n))}function lM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lM=function(){return!!e})()}function cM(e){return cM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cM(e)}function dM(e,t){return dM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dM(e,t)}function uM(e,t,n){return(t=mM(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mM(e){var t=function(e,t){if("object"!=rM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rM(t)?t:t+""}var hM=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),oM(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dM(e,t)}(n,e),r=n,(a=[{key:"render",value:function(){var e=this.props,r=e.x,a=e.y,s=e.r,i=e.alwaysShow,o=e.clipPathId,l=lb(r),c=lb(a);if(fb(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!c)return null;var d=function(e){var t=e.x,n=e.y,r=e.xAxis,a=e.yAxis,s=tM({x:r.scale,y:a.scale}),i=s.apply({x:t,y:n},{bandAware:!0});return xO(e,"discard")&&!s.isInRange(i)?null:i}(this.props);if(!d)return null;var u=d.x,m=d.y,h=this.props,p=h.shape,f=h.className,v=sM(sM({clipPath:xO(this.props,"hidden")?"url(#".concat(o,")"):void 0},Hb(this.props,!0)),{},{cx:u,cy:m});return t.createElement($C,{className:(0,Ky.A)("recharts-reference-dot",f)},n.renderDot(p,v),_k.renderCallByParent(this.props,{x:u-s,y:m-s,width:2*s,height:2*s}))}}])&&iM(r.prototype,a),s&&iM(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.Component);uM(hM,"displayName","ReferenceDot"),uM(hM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),uM(hM,"renderDot",(function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):yb()(e)?e(n):t.createElement(hA,nM({},n,{cx:n.cx,cy:n.cy,className:"recharts-reference-dot-dot"}))}));var pM=__webpack_require__(4597),fM=__webpack_require__.n(pM),vM=(__webpack_require__(8990),__webpack_require__(5797)),gM=__webpack_require__.n(vM)()((function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}}),(function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}));var xM=(0,t.createContext)(void 0),yM=(0,t.createContext)(void 0),bM=(0,t.createContext)(void 0),jM=(0,t.createContext)({}),wM=(0,t.createContext)(void 0),NM=(0,t.createContext)(0),_M=(0,t.createContext)(0),SM=function(e){var n=e.state,r=n.xAxisMap,a=n.yAxisMap,s=n.offset,i=e.clipPathId,o=e.children,l=e.width,c=e.height,d=gM(s);return t.createElement(xM.Provider,{value:r},t.createElement(yM.Provider,{value:a},t.createElement(jM.Provider,{value:s},t.createElement(bM.Provider,{value:d},t.createElement(wM.Provider,{value:i},t.createElement(NM.Provider,{value:c},t.createElement(_M.Provider,{value:l},o)))))))};var EM=function(e){var n=(0,t.useContext)(xM);null==n&&(0,LC.A)(!1);var r=n[e];return null==r&&(0,LC.A)(!1),r},CM=function(e){var n=(0,t.useContext)(yM);null==n&&(0,LC.A)(!1);var r=n[e];return null==r&&(0,LC.A)(!1),r},DM=function(){return(0,t.useContext)(_M)},TM=function(){return(0,t.useContext)(NM)};function kM(e){return kM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kM(e)}function AM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,BM(r.key),r)}}function PM(e,t,n){return t=RM(t),function(e,t){if(t&&("object"===kM(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,OM()?Reflect.construct(t,n||[],RM(e).constructor):t.apply(e,n))}function OM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(OM=function(){return!!e})()}function RM(e){return RM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},RM(e)}function MM(e,t){return MM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},MM(e,t)}function IM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IM(Object(n),!0).forEach((function(t){FM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function FM(e,t,n){return(t=BM(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BM(e){var t=function(e,t){if("object"!=kM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kM(t)?t:t+""}function WM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function UM(){return UM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UM.apply(this,arguments)}function zM(e){var n=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=(0,t.useContext)(wM),u=EM(s),m=CM(i),h=(0,t.useContext)(bM);if(!d||!h)return null;fb(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=function(e,t,n,r,a,s,i,o,l){var c=a.x,d=a.y,u=a.width,m=a.height;if(n){var h=l.y,p=e.y.apply(h,{position:s});if(xO(l,"discard")&&!e.y.isInRange(p))return null;var f=[{x:c+u,y:p},{x:c,y:p}];return"left"===o?f.reverse():f}if(t){var v=l.x,g=e.x.apply(v,{position:s});if(xO(l,"discard")&&!e.x.isInRange(g))return null;var x=[{x:g,y:d+m},{x:g,y:d}];return"top"===i?x.reverse():x}if(r){var y=l.segment.map((function(t){return e.apply(t,{position:s})}));return xO(l,"discard")&&fM()(y,(function(t){return!e.isInRange(t)}))?null:y}return null}(tM({x:u.scale,y:m.scale}),lb(n),lb(r),a&&2===a.length,h,e.position,u.orientation,m.orientation,e);if(!p)return null;var f=WM(p,2),v=f[0],g=v.x,x=v.y,y=f[1],b=y.x,j=y.y,w=LM(LM({clipPath:xO(e,"hidden")?"url(#".concat(d,")"):void 0},Hb(e,!0)),{},{x1:g,y1:x,x2:b,y2:j});return t.createElement($C,{className:(0,Ky.A)("recharts-reference-line",l)},function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):yb()(e)?e(n):t.createElement("line",UM({},n,{className:"recharts-reference-line-line"}))}(o,w),_k.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,a=e.y2;return QR({x:t,y:n},{x:r,y:a})}({x1:g,y1:x,x2:b,y2:j})))}var HM=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),PM(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MM(e,t)}(n,e),r=n,(a=[{key:"render",value:function(){return t.createElement(zM,this.props)}}])&&AM(r.prototype,a),s&&AM(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.Component);function VM(){return VM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VM.apply(this,arguments)}function qM(e){return qM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qM(e)}function GM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GM(Object(n),!0).forEach((function(t){eI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tI(r.key),r)}}function XM(e,t,n){return t=JM(t),function(e,t){if(t&&("object"===qM(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ZM()?Reflect.construct(t,n||[],JM(e).constructor):t.apply(e,n))}function ZM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ZM=function(){return!!e})()}function JM(e){return JM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JM(e)}function QM(e,t){return QM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QM(e,t)}function eI(e,t,n){return(t=tI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tI(e){var t=function(e,t){if("object"!=qM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qM(t)?t:t+""}FM(HM,"displayName","ReferenceLine"),FM(HM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var nI=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),XM(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QM(e,t)}(n,e),r=n,(a=[{key:"render",value:function(){var e=this.props,r=e.x1,a=e.x2,s=e.y1,i=e.y2,o=e.className,l=e.alwaysShow,c=e.clipPathId;fb(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=lb(r),u=lb(a),m=lb(s),h=lb(i),p=this.props.shape;if(!d&&!u&&!m&&!h&&!p)return null;var f=function(e,t,n,r,a){var s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.xAxis,d=a.yAxis;if(!c||!d)return null;var u=tM({x:c.scale,y:d.scale}),m={x:e?u.x.apply(s,{position:"start"}):u.x.rangeMin,y:n?u.y.apply(o,{position:"start"}):u.y.rangeMin},h={x:t?u.x.apply(i,{position:"end"}):u.x.rangeMax,y:r?u.y.apply(l,{position:"end"}):u.y.rangeMax};return!xO(a,"discard")||u.isInRange(m)&&u.isInRange(h)?QR(m,h):null}(d,u,m,h,this.props);if(!f&&!p)return null;var v=xO(this.props,"hidden")?"url(#".concat(c,")"):void 0;return t.createElement($C,{className:(0,Ky.A)("recharts-reference-area",o)},n.renderRect(p,KM(KM({clipPath:v},Hb(this.props,!0)),f)),_k.renderCallByParent(this.props,f))}}])&&YM(r.prototype,a),s&&YM(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.Component);function rI(e){return function(e){if(Array.isArray(e))return aI(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return aI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aI(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eI(nI,"displayName","ReferenceArea"),eI(nI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),eI(nI,"renderRect",(function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):yb()(e)?e(n):t.createElement(QP,VM({},n,{className:"recharts-reference-area-rect"}))}));var sI=function(e,t,n,r,a){var s=Bb(e,HM),i=Bb(e,hM),o=[].concat(rI(s),rI(i)),l=Bb(e,nI),c="".concat(r,"Id"),d=r[0],u=t;if(o.length&&(u=o.reduce((function(e,t){if(t.props[c]===n&&xO(t.props,"extendDomain")&&ob(t.props[d])){var r=t.props[d];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),u)),l.length){var m="".concat(d,"1"),h="".concat(d,"2");u=l.reduce((function(e,t){if(t.props[c]===n&&xO(t.props,"extendDomain")&&ob(t.props[m])&&ob(t.props[h])){var r=t.props[m],a=t.props[h];return[Math.min(e[0],r,a),Math.max(e[1],r,a)]}return e}),u)}return a&&a.length&&(u=a.reduce((function(e,t){return ob(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),u)),u},iI=__webpack_require__(7283),oI=new(__webpack_require__.n(iI)()),lI="recharts.syncMouseEvents";function cI(e){return cI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cI(e)}function dI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mI(r.key),r)}}function uI(e,t,n){return(t=mI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mI(e){var t=function(e,t){if("object"!=cI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cI(t)?t:t+""}var hI=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),uI(this,"activeIndex",0),uI(this,"coordinateList",[]),uI(this,"layout","horizontal")},(t=[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,a=e.container,s=void 0===a?null:a,i=e.layout,o=void 0===i?null:i,l=e.offset,c=void 0===l?null:l,d=e.mouseHandlerCallback,u=void 0===d?null:d;this.coordinateList=null!==(t=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!==s&&void 0!==s?s:this.container,this.layout=null!==o&&void 0!==o?o:this.layout,this.offset=null!==c&&void 0!==c?c:this.offset,this.mouseHandlerCallback=null!==u&&void 0!==u?u:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,a=n.y,s=n.height,i=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=r+i+o,d=a+this.offset.top+s/2+l;this.mouseHandlerCallback({pageX:c,pageY:d})}}}])&&dI(e.prototype,t),n&&dI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function pI(){}function fI(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function vI(e){this._context=e}function gI(e){this._context=e}function xI(e){this._context=e}vI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fI(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fI(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},gI.prototype={areaStart:pI,areaEnd:pI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fI(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},xI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:fI(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class yI{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function bI(e){this._context=e}function jI(e){this._context=e}function wI(e){return new jI(e)}function NI(e){return e<0?-1:1}function _I(e,t,n){var r=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(r||a<0&&-0),i=(n-e._y1)/(a||r<0&&-0),o=(s*a+i*r)/(r+a);return(NI(s)+NI(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function SI(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function EI(e,t,n){var r=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,a+o*t,s-o,i-o*n,s,i)}function CI(e){this._context=e}function DI(e){this._context=new TI(e)}function TI(e){this._context=e}function kI(e){this._context=e}function AI(e){var t,n,r=e.length-1,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function PI(e,t){this._context=e,this._t=t}function OI(e){return e[0]}function RI(e){return e[1]}function MI(e,t){var n=YE(!0),r=null,a=wI,s=null,i=RD(o);function o(o){var l,c,d,u=(o=KE(o)).length,m=!1;for(null==r&&(s=a(d=i())),l=0;l<=u;++l)!(l<u&&n(c=o[l],l,o))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+e(c,l,o),+t(c,l,o));if(d)return s=null,d+""||null}return e="function"===typeof e?e:void 0===e?OI:YE(e),t="function"===typeof t?t:void 0===t?RI:YE(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:YE(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:YE(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:YE(!!e),o):n},o.curve=function(e){return arguments.length?(a=e,null!=r&&(s=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=s=null:s=a(r=e),o):r},o}function II(e,t,n){var r=null,a=YE(!0),s=null,i=wI,o=null,l=RD(c);function c(c){var d,u,m,h,p,f=(c=KE(c)).length,v=!1,g=new Array(f),x=new Array(f);for(null==s&&(o=i(p=l())),d=0;d<=f;++d){if(!(d<f&&a(h=c[d],d,c))===v)if(v=!v)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=d-1;m>=u;--m)o.point(g[m],x[m]);o.lineEnd(),o.areaEnd()}v&&(g[d]=+e(h,d,c),x[d]=+t(h,d,c),o.point(r?+r(h,d,c):g[d],n?+n(h,d,c):x[d]))}if(p)return o=null,p+""||null}function d(){return MI().defined(a).curve(i).context(s)}return e="function"===typeof e?e:void 0===e?OI:YE(+e),t="function"===typeof t?t:YE(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?RI:YE(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:YE(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:YE(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:YE(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:YE(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:YE(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:YE(+e),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:YE(!!e),c):a},c.curve=function(e){return arguments.length?(i=e,null!=s&&(o=i(s)),c):i},c.context=function(e){return arguments.length?(null==e?s=o=null:o=i(s=e),c):s},c}function LI(e){return LI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LI(e)}function FI(){return FI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FI.apply(this,arguments)}function BI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BI(Object(n),!0).forEach((function(t){$I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=LI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=LI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==LI(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}bI.prototype={areaStart:pI,areaEnd:pI,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},jI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},CI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:EI(this,this._t0,SI(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,EI(this,SI(this,n=_I(this,e,t)),n);break;default:EI(this,this._t0,n=_I(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(DI.prototype=Object.create(CI.prototype)).point=function(e,t){CI.prototype.point.call(this,t,e)},TI.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,s){this._context.bezierCurveTo(t,e,r,n,s,a)}},kI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=AI(e),a=AI(t),s=0,i=1;i<n;++s,++i)this._context.bezierCurveTo(r[0][s],a[0][s],r[1][s],a[1][s],e[i],t[i]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},PI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var UI={curveBasisClosed:function(e){return new gI(e)},curveBasisOpen:function(e){return new xI(e)},curveBasis:function(e){return new vI(e)},curveBumpX:function(e){return new yI(e,!0)},curveBumpY:function(e){return new yI(e,!1)},curveLinearClosed:function(e){return new bI(e)},curveLinear:wI,curveMonotoneX:function(e){return new CI(e)},curveMonotoneY:function(e){return new DI(e)},curveNatural:function(e){return new kI(e)},curveStep:function(e){return new PI(e,.5)},curveStepAfter:function(e){return new PI(e,1)},curveStepBefore:function(e){return new PI(e,0)}},zI=function(e){return e.x===+e.x&&e.y===+e.y},HI=function(e){return e.x},VI=function(e){return e.y},qI=function(e){var t,n=e.type,r=void 0===n?"linear":n,a=e.points,s=void 0===a?[]:a,i=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,d=function(e,t){if(yb()(e))return e;var n="curve".concat(iC()(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?UI[n]||wI:UI["".concat(n).concat("vertical"===t?"Y":"X")]}(r,o),u=c?s.filter((function(e){return zI(e)})):s;if(Array.isArray(i)){var m=c?i.filter((function(e){return zI(e)})):i,h=u.map((function(e,t){return WI(WI({},e),{},{base:m[t]})}));return(t="vertical"===o?II().y(VI).x1(HI).x0((function(e){return e.base.x})):II().x(HI).y1(VI).y0((function(e){return e.base.y}))).defined(zI).curve(d),t(h)}return(t="vertical"===o&&ob(i)?II().y(VI).x1(HI).x0(i):ob(i)?II().x(HI).y1(VI).y0(i):MI().x(HI).y(VI)).defined(zI).curve(d),t(u)},GI=function(e){var n=e.className,r=e.points,a=e.path,s=e.pathRef;if((!r||!r.length)&&!a)return null;var i=r&&r.length?qI(e):a;return t.createElement("path",FI({},Hb(e,!1),Tb(e),{className:(0,Ky.A)("recharts-curve",n),d:i,ref:s}))};function KI(e){return KI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KI(e)}var YI=["x","y","top","left","width","height","className"];function XI(){return XI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XI.apply(this,arguments)}function ZI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=KI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=KI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KI(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QI(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var eL=function(e,t,n,r,a,s){return"M".concat(e,",").concat(a,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n)},tL=function(e){var n=e.x,r=void 0===n?0:n,a=e.y,s=void 0===a?0:a,i=e.top,o=void 0===i?0:i,l=e.left,c=void 0===l?0:l,d=e.width,u=void 0===d?0:d,m=e.height,h=void 0===m?0:m,p=e.className,f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZI(Object(n),!0).forEach((function(t){JI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:r,y:s,top:o,left:c,width:u,height:h},QI(e,YI));return ob(r)&&ob(s)&&ob(u)&&ob(h)&&ob(o)&&ob(c)?t.createElement("path",XI({},Hb(f,!0),{className:(0,Ky.A)("recharts-cross",p),d:eL(r,s,u,h,o,c)})):null};function nL(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,s=e.endAngle;return{points:[lk(t,n,r,a),lk(t,n,r,s)],cx:t,cy:n,radius:r,startAngle:a,endAngle:s}}function rL(e,t,n){var r,a,s,i;if("horizontal"===e)s=r=t.x,a=n.top,i=n.top+n.height;else if("vertical"===e)i=a=t.y,r=n.left,s=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return nL(t);var o=t.cx,l=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.angle,m=lk(o,l,c,u),h=lk(o,l,d,u);r=m.x,a=m.y,s=h.x,i=h.y}return[{x:r,y:a},{x:s,y:i}]}function aL(e){return aL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aL(e)}function sL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sL(Object(n),!0).forEach((function(t){oL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=aL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=aL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aL(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lL(e){var n,r,a,s=e.element,i=e.tooltipEventType,o=e.isActive,l=e.activeCoordinate,c=e.activePayload,d=e.offset,u=e.activeTooltipIndex,m=e.tooltipAxisBandSize,h=e.layout,p=e.chartName,f=null!==(n=s.props.cursor)&&void 0!==n?n:null===(r=s.type.defaultProps)||void 0===r?void 0:r.cursor;if(!s||!f||!o||!l||"ScatterChart"!==p&&"axis"!==i)return null;var v=GI;if("ScatterChart"===p)a=l,v=tL;else if("BarChart"===p)a=function(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-a,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(h,l,d,m),v=QP;else if("radial"===h){var g=nL(l),x=g.cx,y=g.cy,b=g.radius;a={cx:x,cy:y,startAngle:g.startAngle,endAngle:g.endAngle,innerRadius:b,outerRadius:b},v=iR}else a={points:rL(h,l,d)},v=GI;var j=iL(iL(iL(iL({stroke:"#ccc",pointerEvents:"none"},d),a),Hb(f,!1)),{},{payload:c,payloadIndex:u,className:(0,Ky.A)("recharts-tooltip-cursor",f.className)});return(0,t.isValidElement)(f)?(0,t.cloneElement)(f,j):(0,t.createElement)(v,j)}var cL=["item"],dL=["children","className","width","height","style","compact","title","desc"];function uL(e){return uL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uL(e)}function mL(){return mL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mL.apply(this,arguments)}function hL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||jL(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pL(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function fL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,EL(r.key),r)}}function vL(e,t,n){return t=xL(t),function(e,t){if(t&&("object"===uL(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gL()?Reflect.construct(t,n||[],xL(e).constructor):t.apply(e,n))}function gL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gL=function(){return!!e})()}function xL(e){return xL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xL(e)}function yL(e,t){return yL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yL(e,t)}function bL(e){return function(e){if(Array.isArray(e))return wL(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jL(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jL(e,t){if(e){if("string"===typeof e)return wL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wL(e,t):void 0}}function wL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function NL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NL(Object(n),!0).forEach((function(t){SL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function SL(e,t,n){return(t=EL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EL(e){var t=function(e,t){if("object"!=uL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=uL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uL(t)?t:t+""}var CL={xAxis:["bottom","top"],yAxis:["left","right"]},DL={width:"100%",height:"100%"},TL={x:0,y:0};function kL(e){return e}var AL=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,a=t.dataEndIndex,s=(null!==n&&void 0!==n?n:[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(bL(e),bL(n)):e}),[]);return s.length>0?s:e&&e.length&&ob(r)&&ob(a)?e.slice(r,a+1):[]};function PL(e){return"number"===e?[0,"auto"]:void 0}var OL=function(e,t,n,r){var a=e.graphicalItems,s=e.tooltipAxis,i=AL(t,e);return n<0||!a||!a.length||n>=i.length?null:a.reduce((function(a,o){var l,c,d=null!==(l=o.props.data)&&void 0!==l?l:t;(d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1)),s.dataKey&&!s.allowDuplicatedCategory)?c=pb(void 0===d?i:d,s.dataKey,r):c=d&&d[n]||i[n];return c?[].concat(bL(a),[QT(o,c)]):a}),[])},RL=function(e,t,n,r){var a=r||{x:e.chartX,y:e.chartY},s=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(a,n),i=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,i=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(i<=1)return 0;if(a&&"angleAxis"===a.axisType&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var o=a.range,l=0;l<i;l++){var c=l>0?r[l-1].coordinate:r[i-1].coordinate,d=r[l].coordinate,u=l>=i-1?r[0].coordinate:r[l+1].coordinate,m=void 0;if(sb(d-c)!==sb(u-d)){var h=[];if(sb(u-d)===sb(o[1]-o[0])){m=u;var p=d+o[1]-o[0];h[0]=Math.min(p,(p+c)/2),h[1]=Math.max(p,(p+c)/2)}else{m=c;var f=u+o[1]-o[0];h[0]=Math.min(d,(f+d)/2),h[1]=Math.max(d,(f+d)/2)}var v=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>v[0]&&e<=v[1]||e>=h[0]&&e<=h[1]){s=r[l].index;break}}else{var g=Math.min(c,u),x=Math.max(c,u);if(e>(g+d)/2&&e<=(x+d)/2){s=r[l].index;break}}}else for(var y=0;y<i;y++)if(0===y&&e<=(n[y].coordinate+n[y+1].coordinate)/2||y>0&&y<i-1&&e>(n[y].coordinate+n[y-1].coordinate)/2&&e<=(n[y].coordinate+n[y+1].coordinate)/2||y===i-1&&e>(n[y].coordinate+n[y-1].coordinate)/2){s=n[y].index;break}return s}(s,i,l,o);if(c>=0&&l){var d=l[c]&&l[c].value,u=OL(e,t,c,d),m=function(e,t,n,r){var a=t.find((function(e){return e&&e.index===n}));if(a){if("horizontal"===e)return{x:a.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:a.coordinate};if("centric"===e){var s=a.coordinate,i=r.radius;return _L(_L(_L({},r),lk(r.cx,r.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,l=r.angle;return _L(_L(_L({},r),lk(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return TL}(n,i,c,a);return{activeTooltipIndex:c,activeLabel:d,activePayload:u,activeCoordinate:m}}return null},ML=function(e,t){var n=t.axes,r=t.graphicalItems,a=t.axisType,s=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=e.stackOffset,m=IT(c,a);return n.reduce((function(t,n){var h,p=void 0!==n.type.defaultProps?_L(_L({},n.type.defaultProps),n.props):n.props,f=p.type,v=p.dataKey,g=p.allowDataOverflow,x=p.allowDuplicatedCategory,y=p.scale,b=p.ticks,j=p.includeHidden,w=p[s];if(t[w])return t;var N,_,S,E=AL(e.data,{graphicalItems:r.filter((function(e){var t;return(s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s])===w})),dataStartIndex:o,dataEndIndex:l}),C=E.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null===e||void 0===e?void 0:e[0],a=null===e||void 0===e?void 0:e[1];if(r&&a&&ob(r)&&ob(a))return!0}return!1})(p.domain,g,f)&&(N=XT(p.domain,null,g),!m||"number"!==f&&"auto"===y||(S=PT(E,v,"category")));var D=PL(f);if(!N||0===N.length){var T,k=null!==(T=p.domain)&&void 0!==T?T:D;if(v){if(N=PT(E,v,f),"category"===f&&m){var A=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(N);x&&A?(_=N,N=uA()(0,C)):x||(N=JT(k,N,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(bL(e),[t])}),[]))}else if("category"===f)N=x?N.filter((function(e){return""!==e&&!gb()(e)})):JT(k,N,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||gb()(t)?e:[].concat(bL(e),[t])}),[]);else if("number"===f){var P=function(e,t,n,r,a){var s=t.map((function(t){return RT(e,t,n,a,r)})).filter((function(e){return!gb()(e)}));return s&&s.length?s.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(E,r.filter((function(e){var t,n,r=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],a="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===w&&(j||!a)})),v,a,c);P&&(N=P)}!m||"number"!==f&&"auto"===y||(S=PT(E,v,"category"))}else N=m?uA()(0,C):i&&i[w]&&i[w].hasStack&&"number"===f?"expand"===u?[0,1]:GT(i[w].stackGroups,o,l):MT(E,r.filter((function(e){var t=s in e.props?e.props[s]:e.type.defaultProps[s],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===w&&(j||!n)})),f,c,!0);if("number"===f)N=sI(d,N,w,a,b),k&&(N=XT(k,N,g));else if("category"===f&&k){var O=k;N.every((function(e){return O.indexOf(e)>=0}))&&(N=O)}}return _L(_L({},t),{},SL({},w,_L(_L({},p),{},{axisType:a,domain:N,categoricalDomain:S,duplicateDomain:_,originalDomain:null!==(h=p.domain)&&void 0!==h?h:D,isCategorical:m,layout:c})))}),{})},IL=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,a=t.AxisComp,s=t.graphicalItems,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,d="".concat(r,"Id"),u=Bb(c,a),m={};return u&&u.length?m=ML(e,{axes:u,graphicalItems:s,axisType:r,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l}):s&&s.length&&(m=function(e,t){var n=t.graphicalItems,r=t.Axis,a=t.axisType,s=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=AL(e.data,{graphicalItems:n,dataStartIndex:o,dataEndIndex:l}),m=u.length,h=IT(c,a),p=-1;return n.reduce((function(e,t){var f,v=(void 0!==t.type.defaultProps?_L(_L({},t.type.defaultProps),t.props):t.props)[s],g=PL("number");return e[v]?e:(p++,h?f=uA()(0,m):i&&i[v]&&i[v].hasStack?(f=GT(i[v].stackGroups,o,l),f=sI(d,f,v,a)):(f=XT(g,MT(u,n.filter((function(e){var t,n,r=s in e.props?e.props[s]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[s],a="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===v&&!a})),"number",c),r.defaultProps.allowDataOverflow),f=sI(d,f,v,a)),_L(_L({},e),{},SL({},v,_L(_L({axisType:a},r.defaultProps),{},{hide:!0,orientation:nb()(CL,"".concat(a,".").concat(p%2),null),domain:f,originalDomain:g,isCategorical:h,layout:c}))))}),{})}(e,{Axis:a,graphicalItems:s,axisType:r,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l})),m},LL=function(e){var t=e.children,n=e.defaultShowTooltip,r=Wb(t,gO),a=0,s=0;return e.data&&0!==e.data.length&&(s=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(a=r.props.startIndex),r.props.endIndex>=0&&(s=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},FL=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},BL=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),a=void 0===r?{}:r,s=e.yAxisMap,i=void 0===s?{}:s,o=n.width,l=n.height,c=n.children,d=n.margin||{},u=Wb(c,gO),m=Wb(c,yT),h=Object.keys(i).reduce((function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:_L(_L({},e),{},SL({},r,e[r]+n.width))}),{left:d.left||0,right:d.right||0}),p=Object.keys(a).reduce((function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:_L(_L({},e),{},SL({},r,nb()(e,"".concat(r))+n.height))}),{top:d.top||0,bottom:d.bottom||0}),f=_L(_L({},p),h),v=f.bottom;u&&(f.bottom+=u.props.height||gO.defaultProps.height),m&&t&&(f=function(e,t,n,r){var a=n.children,s=n.width,i=n.margin,o=s-(i.left||0)-(i.right||0),l=_T({children:a,legendWidth:o});if(l){var c=r||{},d=c.width,u=c.height,m=l.align,h=l.verticalAlign,p=l.layout;if(("vertical"===p||"horizontal"===p&&"middle"===h)&&"center"!==m&&ob(e[m]))return TT(TT({},e),{},kT({},m,e[m]+(d||0)));if(("horizontal"===p||"vertical"===p&&"center"===m)&&"middle"!==h&&ob(e[h]))return TT(TT({},e),{},kT({},h,e[h]+(u||0)))}return e}(f,0,n,t));var g=o-f.left-f.right,x=l-f.top-f.bottom;return _L(_L({brushBottom:v},f),{},{width:Math.max(g,0),height:Math.max(x,0)})},WL=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},$L=function(e){var n=e.chartName,r=e.GraphicalChild,a=e.defaultTooltipEventType,s=void 0===a?"axis":a,i=e.validateTooltipEventTypes,o=void 0===i?["axis"]:i,l=e.axisComponents,c=e.legendContent,d=e.formatAxisMap,u=e.defaultProps,m=function(e,t){var n=t.graphicalItems,r=t.stackGroups,a=t.offset,s=t.updateId,i=t.dataStartIndex,o=t.dataEndIndex,c=e.barSize,d=e.layout,u=e.barGap,m=e.barCategoryGap,h=e.maxBarSize,p=FL(d),f=p.numericAxisName,v=p.cateAxisName,g=function(e){return!(!e||!e.length)&&e.some((function(e){var t=Mb(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),x=[];return n.forEach((function(n,p){var y=AL(e.data,{graphicalItems:[n],dataStartIndex:i,dataEndIndex:o}),b=void 0!==n.type.defaultProps?_L(_L({},n.type.defaultProps),n.props):n.props,j=b.dataKey,w=b.maxBarSize,N=b["".concat(f,"Id")],_=b["".concat(v,"Id")],S=l.reduce((function(e,n){var r=t["".concat(n.axisType,"Map")],a=b["".concat(n.axisType,"Id")];r&&r[a]||"zAxis"===n.axisType||(0,LC.A)(!1);var s=r[a];return _L(_L({},e),{},SL(SL({},n.axisType,s),"".concat(n.axisType,"Ticks"),LT(s)))}),{}),E=S[v],C=S["".concat(v,"Ticks")],D=r&&r[N]&&r[N].hasStack&&function(e,t){var n,r=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?TT(TT({},e.type.defaultProps),e.props):e.props).stackId;if(lb(r)){var a=t[r];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null}(n,r[N].stackGroups),T=Mb(n.type).indexOf("Bar")>=0,k=ZT(E,C),A=[],P=g&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,a=void 0===r?{}:r;if(!a)return{};for(var s={},i=Object.keys(a),o=0,l=i.length;o<l;o++)for(var c=a[i[o]].stackGroups,d=Object.keys(c),u=0,m=d.length;u<m;u++){var h=c[d[u]],p=h.items,f=h.cateAxisId,v=p.filter((function(e){return Mb(e.type).indexOf("Bar")>=0}));if(v&&v.length){var g=v[0].type.defaultProps,x=void 0!==g?TT(TT({},g),v[0].props):v[0].props,y=x.barSize,b=x[f];s[b]||(s[b]=[]);var j=gb()(y)?t:y;s[b].push({item:v[0],stackList:v.slice(1),barSize:gb()(j)?void 0:ub(j,n,0)})}}return s}({barSize:c,stackGroups:r,totalSize:WL(S,v)});if(T){var O,R,M=gb()(w)?h:w,I=null!==(O=null!==(R=ZT(E,C,!0))&&void 0!==R?R:M)&&void 0!==O?O:0;A=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,a=e.sizeList,s=void 0===a?[]:a,i=e.maxBarSize,o=s.length;if(o<1)return null;var l,c=ub(t,r,0,!0),d=[];if(s[0].barSize===+s[0].barSize){var u=!1,m=r/o,h=s.reduce((function(e,t){return e+t.barSize||0}),0);(h+=(o-1)*c)>=r&&(h-=(o-1)*c,c=0),h>=r&&m>0&&(u=!0,h=o*(m*=.9));var p={offset:((r-h)/2|0)-c,size:0};l=s.reduce((function(e,t){var n={item:t.item,position:{offset:p.offset+p.size+c,size:u?m:t.barSize}},r=[].concat(ET(e),[n]);return p=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:p})})),r}),d)}else{var f=ub(n,r,0,!0);r-2*f-(o-1)*c<=0&&(c=0);var v=(r-2*f-(o-1)*c)/o;v>1&&(v>>=0);var g=i===+i?Math.min(v,i):v;l=s.reduce((function(e,t,n){var r=[].concat(ET(e),[{item:t.item,position:{offset:f+(v+c)*n+(v-g)/2,size:g}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),d)}return l}({barGap:u,barCategoryGap:m,bandSize:I!==k?I:k,sizeList:P[_],maxBarSize:M}),I!==k&&(A=A.map((function(e){return _L(_L({},e),{},{position:_L(_L({},e.position),{},{offset:e.position.offset-I/2})})})))}var L,F,B=n&&n.type&&n.type.getComposedData;B&&x.push({props:_L(_L({},B(_L(_L({},S),{},{displayedData:y,props:e,dataKey:j,item:n,bandSize:k,barPosition:A,offset:a,stackedData:D,layout:d,dataStartIndex:i,dataEndIndex:o}))),{},SL(SL(SL({key:n.key||"item-".concat(p)},f,S[f]),v,S[v]),"animationId",s)),childIndex:(L=n,F=e.children,Fb(F).indexOf(L)),item:n})})),x},h=function(e,t){var a=e.props,s=e.dataStartIndex,i=e.dataEndIndex,o=e.updateId;if(!$b({props:a}))return null;var c=a.children,u=a.layout,h=a.stackOffset,p=a.data,f=a.reverseStackOrder,v=FL(u),g=v.numericAxisName,x=v.cateAxisName,y=Bb(c,r),b=function(e,t,n,r,a,s){if(!e)return null;var i=(s?t.reverse():t).reduce((function(e,t){var a,s=null!==(a=t.type)&&void 0!==a&&a.defaultProps?TT(TT({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(s.hide)return e;var o=s[n],l=e[o]||{hasStack:!1,stackGroups:{}};if(lb(i)){var c=l.stackGroups[i]||{numericAxisId:n,cateAxisId:r,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[i]=c}else l.stackGroups[db("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return TT(TT({},e),{},kT({},o,l))}),{});return Object.keys(i).reduce((function(t,s){var o=i[s];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce((function(t,s){var i=o.stackGroups[s];return TT(TT({},t),{},kT({},s,{numericAxisId:n,cateAxisId:r,items:i.items,stackedData:HT(e,i.items,a)}))}),{})),TT(TT({},t),{},kT({},s,o))}),{})}(p,y,"".concat(g,"Id"),"".concat(x,"Id"),h,f),j=l.reduce((function(e,t){var n="".concat(t.axisType,"Map");return _L(_L({},e),{},SL({},n,IL(a,_L(_L({},t),{},{graphicalItems:y,stackGroups:t.axisType===g&&b,dataStartIndex:s,dataEndIndex:i}))))}),{}),w=BL(_L(_L({},j),{},{props:a,graphicalItems:y}),null===t||void 0===t?void 0:t.legendBBox);Object.keys(j).forEach((function(e){j[e]=d(a,j[e],w,e.replace("Map",""),n)}));var N=function(e){var t=mb(e),n=LT(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:dC()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:ZT(t,n)}}(j["".concat(x,"Map")]),_=m(a,_L(_L({},j),{},{dataStartIndex:s,dataEndIndex:i,updateId:o,graphicalItems:y,stackGroups:b,offset:w}));return _L(_L({formattedGraphicalItems:_,graphicalItems:y,offset:w,stackGroups:b},N),j)},p=function(e){function r(e){var a,s,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),SL(i=vL(this,r,[e]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),SL(i,"accessibilityManager",new hI),SL(i,"handleLegendBBoxUpdate",(function(e){if(e){var t=i.state,n=t.dataStartIndex,r=t.dataEndIndex,a=t.updateId;i.setState(_L({legendBBox:e},h({props:i.props,dataStartIndex:n,dataEndIndex:r,updateId:a},_L(_L({},i.state),{},{legendBBox:e}))))}})),SL(i,"handleReceiveSyncEvent",(function(e,t,n){if(i.props.syncId===e){if(n===i.eventEmitterSymbol&&"function"!==typeof i.props.syncMethod)return;i.applySyncEvent(t)}})),SL(i,"handleBrushChange",(function(e){var t=e.startIndex,n=e.endIndex;if(t!==i.state.dataStartIndex||n!==i.state.dataEndIndex){var r=i.state.updateId;i.setState((function(){return _L({dataStartIndex:t,dataEndIndex:n},h({props:i.props,dataStartIndex:t,dataEndIndex:n,updateId:r},i.state))})),i.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}})),SL(i,"handleMouseEnter",(function(e){var t=i.getMouseInfo(e);if(t){var n=_L(_L({},t),{},{isTooltipActive:!0});i.setState(n),i.triggerSyncEvent(n);var r=i.props.onMouseEnter;yb()(r)&&r(n,e)}})),SL(i,"triggeredAfterMouseMove",(function(e){var t=i.getMouseInfo(e),n=t?_L(_L({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};i.setState(n),i.triggerSyncEvent(n);var r=i.props.onMouseMove;yb()(r)&&r(n,e)})),SL(i,"handleItemMouseEnter",(function(e){i.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))})),SL(i,"handleItemMouseLeave",(function(){i.setState((function(){return{isTooltipActive:!1}}))})),SL(i,"handleMouseMove",(function(e){e.persist(),i.throttleTriggeredAfterMouseMove(e)})),SL(i,"handleMouseLeave",(function(e){i.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};i.setState(t),i.triggerSyncEvent(t);var n=i.props.onMouseLeave;yb()(n)&&n(t,e)})),SL(i,"handleOuterEvent",(function(e){var t,n=function(e){var t=e&&e.type;return t&&Rb[t]?Rb[t]:null}(e),r=nb()(i.props,"".concat(n));n&&yb()(r)&&r(null!==(t=/.*touch.*/i.test(n)?i.getMouseInfo(e.changedTouches[0]):i.getMouseInfo(e))&&void 0!==t?t:{},e)})),SL(i,"handleClick",(function(e){var t=i.getMouseInfo(e);if(t){var n=_L(_L({},t),{},{isTooltipActive:!0});i.setState(n),i.triggerSyncEvent(n);var r=i.props.onClick;yb()(r)&&r(n,e)}})),SL(i,"handleMouseDown",(function(e){var t=i.props.onMouseDown;yb()(t)&&t(i.getMouseInfo(e),e)})),SL(i,"handleMouseUp",(function(e){var t=i.props.onMouseUp;yb()(t)&&t(i.getMouseInfo(e),e)})),SL(i,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.throttleTriggeredAfterMouseMove(e.changedTouches[0])})),SL(i,"handleTouchStart",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseDown(e.changedTouches[0])})),SL(i,"handleTouchEnd",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseUp(e.changedTouches[0])})),SL(i,"handleDoubleClick",(function(e){var t=i.props.onDoubleClick;yb()(t)&&t(i.getMouseInfo(e),e)})),SL(i,"handleContextMenu",(function(e){var t=i.props.onContextMenu;yb()(t)&&t(i.getMouseInfo(e),e)})),SL(i,"triggerSyncEvent",(function(e){void 0!==i.props.syncId&&oI.emit(lI,i.props.syncId,e,i.eventEmitterSymbol)})),SL(i,"applySyncEvent",(function(e){var t=i.props,n=t.layout,r=t.syncMethod,a=i.state.updateId,s=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)i.setState(_L({dataStartIndex:s,dataEndIndex:o},h({props:i.props,dataStartIndex:s,dataEndIndex:o,updateId:a},i.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,d=e.activeTooltipIndex,u=i.state,m=u.offset,p=u.tooltipTicks;if(!m)return;if("function"===typeof r)d=r(p,e);else if("value"===r){d=-1;for(var f=0;f<p.length;f++)if(p[f].value===e.activeLabel){d=f;break}}var v=_L(_L({},m),{},{x:m.left,y:m.top}),g=Math.min(l,v.x+v.width),x=Math.min(c,v.y+v.height),y=p[d]&&p[d].value,b=OL(i.state,i.props.data,d),j=p[d]?{x:"horizontal"===n?p[d].coordinate:g,y:"horizontal"===n?x:p[d].coordinate}:TL;i.setState(_L(_L({},e),{},{activeLabel:y,activeCoordinate:j,activePayload:b,activeTooltipIndex:d}))}else i.setState(e)})),SL(i,"renderCursor",(function(e){var r,a=i.state,s=a.isTooltipActive,o=a.activeCoordinate,l=a.activePayload,c=a.offset,d=a.activeTooltipIndex,u=a.tooltipAxisBandSize,m=i.getTooltipEventType(),h=null!==(r=e.props.active)&&void 0!==r?r:s,p=i.props.layout,f=e.key||"_recharts-cursor";return t.createElement(lL,{key:f,activeCoordinate:o,activePayload:l,activeTooltipIndex:d,chartName:n,element:e,isActive:h,layout:p,offset:c,tooltipAxisBandSize:u,tooltipEventType:m})})),SL(i,"renderPolarAxis",(function(e,n,r){var a=nb()(e,"type.axisType"),s=nb()(i.state,"".concat(a,"Map")),o=e.type.defaultProps,l=void 0!==o?_L(_L({},o),e.props):e.props,c=s&&s[l["".concat(a,"Id")]];return(0,t.cloneElement)(e,_L(_L({},c),{},{className:(0,Ky.A)(a,c.className),key:e.key||"".concat(n,"-").concat(r),ticks:LT(c,!0)}))})),SL(i,"renderPolarGrid",(function(e){var n=e.props,r=n.radialLines,a=n.polarAngles,s=n.polarRadius,o=i.state,l=o.radiusAxisMap,c=o.angleAxisMap,d=mb(l),u=mb(c),m=u.cx,h=u.cy,p=u.innerRadius,f=u.outerRadius;return(0,t.cloneElement)(e,{polarAngles:Array.isArray(a)?a:LT(u,!0).map((function(e){return e.coordinate})),polarRadius:Array.isArray(s)?s:LT(d,!0).map((function(e){return e.coordinate})),cx:m,cy:h,innerRadius:p,outerRadius:f,key:e.key||"polar-grid",radialLines:r})})),SL(i,"renderLegend",(function(){var e=i.state.formattedGraphicalItems,n=i.props,r=n.children,a=n.width,s=n.height,o=i.props.margin||{},l=a-(o.left||0)-(o.right||0),d=_T({children:r,formattedGraphicalItems:e,legendWidth:l,legendContent:c});if(!d)return null;var u=d.item,m=pL(d,cL);return(0,t.cloneElement)(u,_L(_L({},m),{},{chartWidth:a,chartHeight:s,margin:o,onBBoxUpdate:i.handleLegendBBoxUpdate}))})),SL(i,"renderTooltip",(function(){var e,n=i.props,r=n.children,a=n.accessibilityLayer,s=Wb(r,cA);if(!s)return null;var o=i.state,l=o.isTooltipActive,c=o.activeCoordinate,d=o.activePayload,u=o.activeLabel,m=o.offset,h=null!==(e=s.props.active)&&void 0!==e?e:l;return(0,t.cloneElement)(s,{viewBox:_L(_L({},m),{},{x:m.left,y:m.top}),active:h,label:u,payload:h?d:[],coordinate:c,accessibilityLayer:a})})),SL(i,"renderBrush",(function(e){var n=i.props,r=n.margin,a=n.data,s=i.state,o=s.offset,l=s.dataStartIndex,c=s.dataEndIndex,d=s.updateId;return(0,t.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:BT(i.handleBrushChange,e.props.onChange),data:a,x:ob(e.props.x)?e.props.x:o.left,y:ob(e.props.y)?e.props.y:o.top+o.height+o.brushBottom-(r.bottom||0),width:ob(e.props.width)?e.props.width:o.width,startIndex:l,endIndex:c,updateId:"brush-".concat(d)})})),SL(i,"renderReferenceElement",(function(e,n,r){if(!e)return null;var a=i.clipPathId,s=i.state,o=s.xAxisMap,l=s.yAxisMap,c=s.offset,d=e.type.defaultProps||{},u=e.props,m=u.xAxisId,h=void 0===m?d.xAxisId:m,p=u.yAxisId,f=void 0===p?d.yAxisId:p;return(0,t.cloneElement)(e,{key:e.key||"".concat(n,"-").concat(r),xAxis:o[h],yAxis:l[f],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:a})})),SL(i,"renderActivePoints",(function(e){var t=e.item,n=e.activePoint,a=e.basePoint,s=e.childIndex,i=e.isRange,o=[],l=t.props.key,c=void 0!==t.item.type.defaultProps?_L(_L({},t.item.type.defaultProps),t.item.props):t.item.props,d=c.activeDot,u=_L(_L({index:s,dataKey:c.dataKey,cx:n.x,cy:n.y,r:4,fill:OT(t.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value},Hb(d,!1)),Tb(d));return o.push(r.renderActiveDot(d,u,"".concat(l,"-activePoint-").concat(s))),a?o.push(r.renderActiveDot(d,_L(_L({},u),{},{cx:a.x,cy:a.y}),"".concat(l,"-basePoint-").concat(s))):i&&o.push(null),o})),SL(i,"renderGraphicChild",(function(e,n,r){var a=i.filterFormatItem(e,n,r);if(!a)return null;var s=i.getTooltipEventType(),o=i.state,l=o.isTooltipActive,c=o.tooltipAxis,d=o.activeTooltipIndex,u=o.activeLabel,m=Wb(i.props.children,cA),h=a.props,p=h.points,f=h.isRange,v=h.baseLine,g=void 0!==a.item.type.defaultProps?_L(_L({},a.item.type.defaultProps),a.item.props):a.item.props,x=g.activeDot,y=g.hide,b=g.activeBar,j=g.activeShape,w=Boolean(!y&&l&&m&&(x||b||j)),N={};"axis"!==s&&m&&"click"===m.props.trigger?N={onClick:BT(i.handleItemMouseEnter,e.props.onClick)}:"axis"!==s&&(N={onMouseLeave:BT(i.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:BT(i.handleItemMouseEnter,e.props.onMouseEnter)});var _=(0,t.cloneElement)(e,_L(_L({},a.props),N));if(w){if(!(d>=0)){var S,E=(null!==(S=i.getItemByXY(i.state.activeCoordinate))&&void 0!==S?S:{graphicalItem:_}).graphicalItem,C=E.item,D=void 0===C?e:C,T=E.childIndex,k=_L(_L(_L({},a.props),N),{},{activeIndex:T});return[(0,t.cloneElement)(D,k),null,null]}var A,P;if(c.dataKey&&!c.allowDuplicatedCategory){var O="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());A=pb(p,O,u),P=f&&v&&pb(v,O,u)}else A=null===p||void 0===p?void 0:p[d],P=f&&v&&v[d];if(j||b){var R=void 0!==e.props.activeIndex?e.props.activeIndex:d;return[(0,t.cloneElement)(e,_L(_L(_L({},a.props),N),{},{activeIndex:R})),null,null]}if(!gb()(A))return[_].concat(bL(i.renderActivePoints({item:a,activePoint:A,basePoint:P,childIndex:d,isRange:f})))}return f?[_,null,null]:[_,null]})),SL(i,"renderCustomized",(function(e,n,r){return(0,t.cloneElement)(e,_L(_L({key:"recharts-customized-".concat(r)},i.props),i.state))})),SL(i,"renderMap",{CartesianGrid:{handler:kL,once:!0},ReferenceArea:{handler:i.renderReferenceElement},ReferenceLine:{handler:kL},ReferenceDot:{handler:i.renderReferenceElement},XAxis:{handler:kL},YAxis:{handler:kL},Brush:{handler:i.renderBrush,once:!0},Bar:{handler:i.renderGraphicChild},Line:{handler:i.renderGraphicChild},Area:{handler:i.renderGraphicChild},Radar:{handler:i.renderGraphicChild},RadialBar:{handler:i.renderGraphicChild},Scatter:{handler:i.renderGraphicChild},Pie:{handler:i.renderGraphicChild},Funnel:{handler:i.renderGraphicChild},Tooltip:{handler:i.renderCursor,once:!0},PolarGrid:{handler:i.renderPolarGrid,once:!0},PolarAngleAxis:{handler:i.renderPolarAxis},PolarRadiusAxis:{handler:i.renderPolarAxis},Customized:{handler:i.renderCustomized}}),i.clipPathId="".concat(null!==(a=e.id)&&void 0!==a?a:db("recharts"),"-clip"),i.throttleTriggeredAfterMouseMove=Xy()(i.triggeredAfterMouseMove,null!==(s=e.throttleDelay)&&void 0!==s?s:1e3/60),i.state={},i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yL(e,t)}(r,e),a=r,i=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,a=e.layout,s=Wb(t,cA);if(s){var i=s.props.defaultIndex;if(!("number"!==typeof i||i<0||i>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[i]&&this.state.tooltipTicks[i].value,l=OL(this.state,n,i,o),c=this.state.tooltipTicks[i].coordinate,d=(this.state.offset.top+r)/2,u="horizontal"===a?{x:c,y:d}:{y:c,x:d},m=this.state.formattedGraphicalItems.find((function(e){return"Scatter"===e.item.type.name}));m&&(u=_L(_L({},u),m.props.points[i].tooltipPosition),l=m.props.points[i].tooltipPayload);var h={activeTooltipIndex:i,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:u};this.setState(h),this.renderCursor(s),this.accessibilityManager.setIndex(i)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(e){Vb([Wb(e.children,cA)],[Wb(this.props.children,cA)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=Wb(this.props.children,cA);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return o.indexOf(t)>=0?t:s}return s}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),a={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},s={chartX:Math.round(e.pageX-a.left),chartY:Math.round(e.pageY-a.top)},i=r.width/n.offsetWidth||1,o=this.inRange(s.chartX,s.chartY,i);if(!o)return null;var l=this.state,c=l.xAxisMap,d=l.yAxisMap;if("axis"!==this.getTooltipEventType()&&c&&d){var u=mb(c).scale,m=mb(d).scale,h=u&&u.invert?u.invert(s.chartX):null,p=m&&m.invert?m.invert(s.chartY):null;return _L(_L({},s),{},{xValue:h,yValue:p})}var f=RL(this.state,this.props.data,this.props.layout,o);return f?_L(_L({},s),f):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,a=e/n,s=t/n;if("horizontal"===r||"vertical"===r){var i=this.state.offset;return a>=i.left&&a<=i.left+i.width&&s>=i.top&&s<=i.top+i.height?{x:a,y:s}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var d=mb(l);return mk({x:a,y:s},d)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=Wb(e,cA),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),_L(_L({},Tb(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){oI.on(lI,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){oI.removeListener(lI,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,a=0,s=r.length;a<s;a++){var i=r[a];if(i.item===e||i.props.key===e.key||t===Mb(i.item.type)&&n===i.childIndex)return i}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,n=this.state.offset,r=n.left,a=n.top,s=n.height,i=n.width;return t.createElement("defs",null,t.createElement("clipPath",{id:e},t.createElement("rect",{x:r,y:a,height:s,width:i})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=hL(t,2),r=n[0],a=n[1];return _L(_L({},e),{},SL({},r,a.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=hL(t,2),r=n[0],a=n[1];return _L(_L({},e),{},SL({},r,a.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var a=0,s=n.length;a<s;a++){var i=n[a],o=i.props,l=i.item,c=void 0!==l.type.defaultProps?_L(_L({},l.type.defaultProps),l.props):l.props,d=Mb(l.type);if("Bar"===d){var u=(o.data||[]).find((function(t){return ZP(e,t)}));if(u)return{graphicalItem:i,payload:u}}else if("RadialBar"===d){var m=(o.data||[]).find((function(t){return mk(e,t)}));if(m)return{graphicalItem:i,payload:m}}else if(vR(i,r)||gR(i,r)||xR(i,r)){var h=wR({graphicalItem:i,activeTooltipItem:r,itemData:c.data}),p=void 0===c.activeIndex?h:c.activeIndex;return{graphicalItem:_L(_L({},i),{},{childIndex:p}),payload:xR(i,r)?c.data[h]:i.props.data[h]}}}return null}},{key:"render",value:function(){var e=this;if(!$b(this))return null;var n,r,a=this.props,s=a.children,i=a.className,o=a.width,l=a.height,c=a.style,d=a.compact,u=a.title,m=a.desc,h=pL(a,dL),p=Hb(h,!1);if(d)return t.createElement(SM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},t.createElement(sD,mL({},p,{width:o,height:l,title:u,desc:m}),this.renderClipPath(),Gb(s,this.renderMap)));this.props.accessibilityLayer&&(p.tabIndex=null!==(n=this.props.tabIndex)&&void 0!==n?n:0,p.role=null!==(r=this.props.role)&&void 0!==r?r:"application",p.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},p.onFocus=function(){e.accessibilityManager.focus()});var f=this.parseEventsOfWrapper();return t.createElement(SM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},t.createElement("div",mL({className:(0,Ky.A)("recharts-wrapper",i),style:_L({position:"relative",cursor:"default",width:o,height:l},c)},f,{ref:function(t){e.container=t}}),t.createElement(sD,mL({},p,{width:o,height:l,title:u,desc:m,style:DL}),this.renderClipPath(),Gb(s,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],i&&fL(a.prototype,i),l&&fL(a,l),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,l}(t.Component);SL(p,"displayName",n),SL(p,"defaultProps",_L({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),SL(p,"getDerivedStateFromProps",(function(e,t){var n=e.dataKey,r=e.data,a=e.children,s=e.width,i=e.height,o=e.layout,l=e.stackOffset,c=e.margin,d=t.dataStartIndex,u=t.dataEndIndex;if(void 0===t.updateId){var m=LL(e);return _L(_L(_L({},m),{},{updateId:0},h(_L(_L({props:e},m),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:s,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(n!==t.prevDataKey||r!==t.prevData||s!==t.prevWidth||i!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!Nb(c,t.prevMargin)){var p=LL(e),f={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},v=_L(_L({},RL(t,r,o)),{},{updateId:t.updateId+1}),g=_L(_L(_L({},p),f),v);return _L(_L(_L({},g),h(_L({props:e},g),t)),{},{prevDataKey:n,prevData:r,prevWidth:s,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(!Vb(a,t.prevChildren)){var x,y,b,j,w=Wb(a,gO),N=w&&null!==(x=null===(y=w.props)||void 0===y?void 0:y.startIndex)&&void 0!==x?x:d,_=w&&null!==(b=null===(j=w.props)||void 0===j?void 0:j.endIndex)&&void 0!==b?b:u,S=N!==d||_!==u,E=!gb()(r)&&!S?t.updateId:t.updateId+1;return _L(_L({updateId:E},h(_L(_L({props:e},t),{},{updateId:E,dataStartIndex:N,dataEndIndex:_}),t)),{},{prevChildren:a,dataStartIndex:N,dataEndIndex:_})}return null})),SL(p,"renderActiveDot",(function(e,n,r){var a;return a=(0,t.isValidElement)(e)?(0,t.cloneElement)(e,n):yb()(e)?e(n):t.createElement(hA,n),t.createElement($C,{className:"recharts-active-dot",key:r},a)}));var f=(0,t.forwardRef)((function(e,n){return t.createElement(p,mL({},e,{ref:n}))}));return f.displayName=p.displayName,f};function UL(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],a=0;a<e.length;a+=t){if(void 0!==n&&!0!==n(e[a]))return;r.push(e[a])}return r}function zL(e,t,n){return function(e){var t=e.width,n=e.height,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=r*Math.PI/180,s=Math.atan(n/t),i=a>s&&a<Math.PI-s?n/Math.sin(a):t/Math.cos(a);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},n)}function HL(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-a)<=0}function VL(e){return VL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VL(e)}function qL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qL(Object(n),!0).forEach((function(t){KL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KL(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=VL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=VL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VL(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YL(e,t,n){var r=e.tick,a=e.ticks,s=e.viewBox,i=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!a||!a.length||!r)return[];if(ob(l)||tj.isSsr)return function(e,t){return UL(e,t+1)}(a,"number"===typeof l&&ob(l)?l:0);var m=[],h="top"===o||"bottom"===o?"width":"height",p=d&&"width"===h?cj(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},f=function(e,r){var a=yb()(c)?c(e.value,r):e.value;return"width"===h?zL(cj(a,{fontSize:t,letterSpacing:n}),p,u):cj(a,{fontSize:t,letterSpacing:n})[h]},v=a.length>=2?sb(a[1].coordinate-a[0].coordinate):1,g=function(e,t,n){var r="width"===n,a=e.x,s=e.y,i=e.width,o=e.height;return 1===t?{start:r?a:s,end:r?a+i:s+o}:{start:r?a+i:s+o,end:r?a:s}}(s,v,h);return"equidistantPreserveStart"===l?function(e,t,n,r,a){for(var s,i=(r||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,m=function(){var t=null===r||void 0===r?void 0:r[c];if(void 0===t)return{v:UL(r,d)};var s,i=c,m=function(){return void 0===s&&(s=n(t,i)),s},h=t.coordinate,p=0===c||HL(e,h,m,u,l);p||(c=0,u=o,d+=1),p&&(u=h+e*(m()/2+a),c+=d)};d<=i.length;)if(s=m())return s.v;return[]}(v,g,f,a,i):(m="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,r,a,s){var i=(r||[]).slice(),o=i.length,l=t.start,c=t.end;if(s){var d=r[o-1],u=n(d,o-1),m=e*(d.coordinate+e*u/2-c);i[o-1]=d=GL(GL({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate}),HL(e,d.tickCoord,(function(){return u}),l,c)&&(c=d.tickCoord-e*(u/2+a),i[o-1]=GL(GL({},d),{},{isShow:!0}))}for(var h=s?o-1:o,p=function(t){var r,s=i[t],o=function(){return void 0===r&&(r=n(s,t)),r};if(0===t){var d=e*(s.coordinate-e*o()/2-l);i[t]=s=GL(GL({},s),{},{tickCoord:d<0?s.coordinate-d*e:s.coordinate})}else i[t]=s=GL(GL({},s),{},{tickCoord:s.coordinate});HL(e,s.tickCoord,o,l,c)&&(l=s.tickCoord+e*(o()/2+a),i[t]=GL(GL({},s),{},{isShow:!0}))},f=0;f<h;f++)p(f);return i}(v,g,f,a,i,"preserveStartEnd"===l):function(e,t,n,r,a){for(var s=(r||[]).slice(),i=s.length,o=t.start,l=t.end,c=function(t){var r,c=s[t],d=function(){return void 0===r&&(r=n(c,t)),r};if(t===i-1){var u=e*(c.coordinate+e*d()/2-l);s[t]=c=GL(GL({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else s[t]=c=GL(GL({},c),{},{tickCoord:c.coordinate});HL(e,c.tickCoord,d,o,l)&&(l=c.tickCoord-e*(d()/2+a),s[t]=GL(GL({},c),{},{isShow:!0}))},d=i-1;d>=0;d--)c(d);return s}(v,g,f,a,i),m.filter((function(e){return e.isShow})))}var XL=["viewBox"],ZL=["viewBox"],JL=["ticks"];function QL(e){return QL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QL(e)}function eF(){return eF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eF.apply(this,arguments)}function tF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tF(Object(n),!0).forEach((function(t){cF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rF(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function aF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dF(r.key),r)}}function sF(e,t,n){return t=oF(t),function(e,t){if(t&&("object"===QL(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,iF()?Reflect.construct(t,n||[],oF(e).constructor):t.apply(e,n))}function iF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(iF=function(){return!!e})()}function oF(e){return oF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oF(e)}function lF(e,t){return lF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lF(e,t)}function cF(e,t,n){return(t=dF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dF(e){var t=function(e,t){if("object"!=QL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=QL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QL(t)?t:t+""}var uF=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=sF(this,n,[e])).state={fontSize:"",letterSpacing:""},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lF(e,t)}(n,e),r=n,s=[{key:"renderTickItem",value:function(e,n,r){return t.isValidElement(e)?t.cloneElement(e,n):yb()(e)?e(n):t.createElement(Fj,eF({},n,{className:"recharts-cartesian-axis-tick-value"}),r)}}],(a=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,r=rF(e,XL),a=this.props,s=a.viewBox,i=rF(a,ZL);return!Nb(n,s)||!Nb(r,i)||!Nb(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,n,r,a,s,i,o=this.props,l=o.x,c=o.y,d=o.width,u=o.height,m=o.orientation,h=o.tickSize,p=o.mirror,f=o.tickMargin,v=p?-1:1,g=e.tickSize||h,x=ob(e.tickCoord)?e.tickCoord:e.coordinate;switch(m){case"top":t=n=e.coordinate,i=(r=(a=c+ +!p*u)-v*g)-v*f,s=x;break;case"left":r=a=e.coordinate,s=(t=(n=l+ +!p*d)-v*g)-v*f,i=x;break;case"right":r=a=e.coordinate,s=(t=(n=l+ +p*d)+v*g)+v*f,i=x;break;default:t=n=e.coordinate,i=(r=(a=c+ +p*u)+v*g)+v*f,s=x}return{line:{x1:t,y1:r,x2:n,y2:a},tick:{x:s,y:i}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,n=e.x,r=e.y,a=e.width,s=e.height,i=e.orientation,o=e.mirror,l=e.axisLine,c=nF(nF(nF({},Hb(this.props,!1)),Hb(l,!1)),{},{fill:"none"});if("top"===i||"bottom"===i){var d=+("top"===i&&!o||"bottom"===i&&o);c=nF(nF({},c),{},{x1:n,y1:r+d*s,x2:n+a,y2:r+d*s})}else{var u=+("left"===i&&!o||"right"===i&&o);c=nF(nF({},c),{},{x1:n+u*a,y1:r,x2:n+u*a,y2:r+s})}return t.createElement("line",eF({},c,{className:(0,Ky.A)("recharts-cartesian-axis-line",nb()(l,"className"))}))}},{key:"renderTicks",value:function(e,r,a){var s=this,i=this.props,o=i.tickLine,l=i.stroke,c=i.tick,d=i.tickFormatter,u=i.unit,m=YL(nF(nF({},this.props),{},{ticks:e}),r,a),h=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),f=Hb(this.props,!1),v=Hb(c,!1),g=nF(nF({},f),{},{fill:"none"},Hb(o,!1)),x=m.map((function(e,r){var a=s.getTickLineCoord(e),i=a.line,x=a.tick,y=nF(nF(nF(nF({textAnchor:h,verticalAnchor:p},f),{},{stroke:"none",fill:l},v),x),{},{index:r,payload:e,visibleTicksCount:m.length,tickFormatter:d});return t.createElement($C,eF({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},kb(s.props,e,r)),o&&t.createElement("line",eF({},g,i,{className:(0,Ky.A)("recharts-cartesian-axis-tick-line",nb()(o,"className"))})),c&&n.renderTickItem(c,y,"".concat(yb()(d)?d(e.value,r):e.value).concat(u||"")))}));return t.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var e=this,n=this.props,r=n.axisLine,a=n.width,s=n.height,i=n.ticksGenerator,o=n.className;if(n.hide)return null;var l=this.props,c=l.ticks,d=rF(l,JL),u=c;return yb()(i)&&(u=c&&c.length>0?i(this.props):i(d)),a<=0||s<=0||!u||!u.length?null:t.createElement($C,{className:(0,Ky.A)("recharts-cartesian-axis",o),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(u,this.state.fontSize,this.state.letterSpacing),_k.renderCallByParent(this.props))}}])&&aF(r.prototype,a),s&&aF(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.Component);function mF(e){return mF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mF(e)}function hF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yF(r.key),r)}}function pF(e,t,n){return t=vF(t),function(e,t){if(t&&("object"===mF(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fF()?Reflect.construct(t,n||[],vF(e).constructor):t.apply(e,n))}function fF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fF=function(){return!!e})()}function vF(e){return vF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vF(e)}function gF(e,t){return gF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gF(e,t)}function xF(e,t,n){return(t=yF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yF(e){var t=function(e,t){if("object"!=mF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mF(t)?t:t+""}function bF(){return bF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bF.apply(this,arguments)}function jF(e){var n=e.xAxisId,r=DM(),a=TM(),s=EM(n);return null==s?null:t.createElement(uF,bF({},s,{className:(0,Ky.A)("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(e){return LT(e,!0)}}))}cF(uF,"displayName","CartesianAxis"),cF(uF,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var wF=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),pF(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gF(e,t)}(n,e),r=n,(a=[{key:"render",value:function(){return t.createElement(jF,this.props)}}])&&hF(r.prototype,a),s&&hF(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.Component);function NF(e){return NF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NF(e)}function _F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kF(r.key),r)}}function SF(e,t,n){return t=CF(t),function(e,t){if(t&&("object"===NF(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,EF()?Reflect.construct(t,n||[],CF(e).constructor):t.apply(e,n))}function EF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(EF=function(){return!!e})()}function CF(e){return CF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},CF(e)}function DF(e,t){return DF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},DF(e,t)}function TF(e,t,n){return(t=kF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kF(e){var t=function(e,t){if("object"!=NF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=NF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==NF(t)?t:t+""}function AF(){return AF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AF.apply(this,arguments)}xF(wF,"displayName","XAxis"),xF(wF,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var PF=function(e){var n=e.yAxisId,r=DM(),a=TM(),s=CM(n);return null==s?null:t.createElement(uF,AF({},s,{className:(0,Ky.A)("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(e){return LT(e,!0)}}))},OF=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),SF(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DF(e,t)}(n,e),r=n,(a=[{key:"render",value:function(){return t.createElement(PF,this.props)}}])&&_F(r.prototype,a),s&&_F(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.Component);TF(OF,"displayName","YAxis"),TF(OF,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var RF=$L({chartName:"BarChart",GraphicalChild:qR,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:wF},{axisType:"yAxis",AxisComp:OF}],formatAxisMap:function(e,t,n,r,a){var s=e.width,i=e.height,o=e.layout,l=e.children,c=Object.keys(t),d={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:i-n.bottom,bottomMirror:i-n.bottom},u=!!Wb(l,qR);return c.reduce((function(s,i){var l,c,m,h,p,f=t[i],v=f.orientation,g=f.domain,x=f.padding,y=void 0===x?{}:x,b=f.mirror,j=f.reversed,w="".concat(v).concat(b?"Mirror":"");if("number"===f.type&&("gap"===f.padding||"no-gap"===f.padding)){var N=g[1]-g[0],_=1/0,S=f.categoricalDomain.sort();if(S.forEach((function(e,t){t>0&&(_=Math.min((e||0)-(S[t-1]||0),_))})),Number.isFinite(_)){var E=_/N,C="vertical"===f.layout?n.height:n.width;if("gap"===f.padding&&(l=E*C/2),"no-gap"===f.padding){var D=ub(e.barCategoryGap,E*C),T=E*C/2;l=T-D-(T-D)/C*D}}}c="xAxis"===r?[n.left+(y.left||0)+(l||0),n.left+n.width-(y.right||0)-(l||0)]:"yAxis"===r?"horizontal"===o?[n.top+n.height-(y.bottom||0),n.top+(y.top||0)]:[n.top+(y.top||0)+(l||0),n.top+n.height-(y.bottom||0)-(l||0)]:f.range,j&&(c=[c[1],c[0]]);var k=WT(f,a,u),A=k.scale,P=k.realScaleType;A.domain(g).range(c),UT(A);var O=VT(A,XR(XR({},f),{},{realScaleType:P}));"xAxis"===r?(p="top"===v&&!b||"bottom"===v&&b,m=n.left,h=d[w]-p*f.height):"yAxis"===r&&(p="left"===v&&!b||"right"===v&&b,m=d[w]-p*f.width,h=n.top);var R=XR(XR(XR({},f),O),{},{realScaleType:P,x:m,y:h,scale:A,width:"xAxis"===r?n.width:f.width,height:"yAxis"===r?n.height:f.height});return R.bandSize=ZT(R,O),f.hide||"xAxis"!==r?f.hide||(d[w]+=(p?-1:1)*R.width):d[w]+=(p?-1:1)*R.height,XR(XR({},s),{},ZR({},i,R))}),{})}}),MF=["points","className","baseLinePoints","connectNulls"];function IF(){return IF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IF.apply(this,arguments)}function LF(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function FF(e){return function(e){if(Array.isArray(e))return BF(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return BF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BF(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var WF=function(e){return e&&e.x===+e.x&&e.y===+e.y},$F=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((function(e){WF(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),WF(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce((function(e,t){return[].concat(FF(e),FF(t))}),[])]);var r=n.map((function(e){return e.reduce((function(e,t,n){return"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)}),"")})).join("");return 1===n.length?"".concat(r,"Z"):r},UF=function(e){var n=e.points,r=e.className,a=e.baseLinePoints,s=e.connectNulls,i=LF(e,MF);if(!n||!n.length)return null;var o=(0,Ky.A)("recharts-polygon",r);if(a&&a.length){var l=i.stroke&&"none"!==i.stroke,c=function(e,t,n){var r=$F(e,n);return"".concat("Z"===r.slice(-1)?r.slice(0,-1):r,"L").concat($F(t.reverse(),n).slice(1))}(n,a,s);return t.createElement("g",{className:o},t.createElement("path",IF({},Hb(i,!0),{fill:"Z"===c.slice(-1)?i.fill:"none",stroke:"none",d:c})),l?t.createElement("path",IF({},Hb(i,!0),{fill:"none",d:$F(n,s)})):null,l?t.createElement("path",IF({},Hb(i,!0),{fill:"none",d:$F(a,s)})):null)}var d=$F(n,s);return t.createElement("path",IF({},Hb(i,!0),{fill:"Z"===d.slice(-1)?i.fill:"none",className:o,d:d}))};function zF(e){return zF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zF(e)}function HF(){return HF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HF.apply(this,arguments)}function VF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VF(Object(n),!0).forEach((function(t){JF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QF(r.key),r)}}function KF(e,t,n){return t=XF(t),function(e,t){if(t&&("object"===zF(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,YF()?Reflect.construct(t,n||[],XF(e).constructor):t.apply(e,n))}function YF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YF=function(){return!!e})()}function XF(e){return XF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},XF(e)}function ZF(e,t){return ZF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ZF(e,t)}function JF(e,t,n){return(t=QF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QF(e){var t=function(e,t){if("object"!=zF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zF(t)?t:t+""}var eB=Math.PI/180,tB=1e-5,nB=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),KF(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZF(e,t)}(n,e),r=n,s=[{key:"renderTickItem",value:function(e,n,r){return t.isValidElement(e)?t.cloneElement(e,n):yb()(e)?e(n):t.createElement(Fj,HF({},n,{className:"recharts-polar-angle-axis-tick-value"}),r)}}],(a=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,r=t.cy,a=t.radius,s=t.orientation,i=t.tickSize||8,o=lk(n,r,a,e.coordinate),l=lk(n,r,a+("inner"===s?-1:1)*i,e.coordinate);return{x1:o.x,y1:o.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*eB);return n>tB?"outer"===t?"start":"end":n<-1e-5?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,n=e.cx,r=e.cy,a=e.radius,s=e.axisLine,i=e.axisLineType,o=qF(qF({},Hb(this.props,!1)),{},{fill:"none"},Hb(s,!1));if("circle"===i)return t.createElement(hA,HF({className:"recharts-polar-angle-axis-line"},o,{cx:n,cy:r,r:a}));var l=this.props.ticks.map((function(e){return lk(n,r,a,e.coordinate)}));return t.createElement(UF,HF({className:"recharts-polar-angle-axis-line"},o,{points:l}))}},{key:"renderTicks",value:function(){var e=this,r=this.props,a=r.ticks,s=r.tick,i=r.tickLine,o=r.tickFormatter,l=r.stroke,c=Hb(this.props,!1),d=Hb(s,!1),u=qF(qF({},c),{},{fill:"none"},Hb(i,!1)),m=a.map((function(r,a){var m=e.getTickLineCoord(r),h=qF(qF(qF({textAnchor:e.getTickTextAnchor(r)},c),{},{stroke:"none",fill:l},d),{},{index:a,payload:r,x:m.x2,y:m.y2});return t.createElement($C,HF({className:(0,Ky.A)("recharts-polar-angle-axis-tick",hk(s)),key:"tick-".concat(r.coordinate)},kb(e.props,r,a)),i&&t.createElement("line",HF({className:"recharts-polar-angle-axis-tick-line"},u,m)),s&&n.renderTickItem(s,h,o?o(r.value,a):r.value))}));return t.createElement($C,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var e=this.props,n=e.ticks,r=e.radius,a=e.axisLine;return r<=0||!n||!n.length?null:t.createElement($C,{className:(0,Ky.A)("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}])&&GF(r.prototype,a),s&&GF(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.PureComponent);JF(nB,"displayName","PolarAngleAxis"),JF(nB,"axisType","angleAxis"),JF(nB,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var rB=__webpack_require__(2794),aB=__webpack_require__.n(rB),sB=__webpack_require__(9364),iB=__webpack_require__.n(sB),oB=["cx","cy","angle","ticks","axisLine"],lB=["ticks","tick","angle","tickFormatter","stroke"];function cB(e){return cB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cB(e)}function dB(){return dB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dB.apply(this,arguments)}function uB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uB(Object(n),!0).forEach((function(t){yB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hB(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function pB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bB(r.key),r)}}function fB(e,t,n){return t=gB(t),function(e,t){if(t&&("object"===cB(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vB()?Reflect.construct(t,n||[],gB(e).constructor):t.apply(e,n))}function vB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vB=function(){return!!e})()}function gB(e){return gB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gB(e)}function xB(e,t){return xB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xB(e,t)}function yB(e,t,n){return(t=bB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bB(e){var t=function(e,t){if("object"!=cB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cB(t)?t:t+""}var jB,wB=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),fB(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xB(e,t)}(n,e),r=n,s=[{key:"renderTickItem",value:function(e,n,r){return t.isValidElement(e)?t.cloneElement(e,n):yb()(e)?e(n):t.createElement(Fj,dB({},n,{className:"recharts-polar-radius-axis-tick-value"}),r)}}],(a=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,r=n.angle,a=n.cx,s=n.cy;return lk(a,s,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,a=e.ticks,s=aB()(a,(function(e){return e.coordinate||0}));return{cx:t,cy:n,startAngle:r,endAngle:r,innerRadius:iB()(a,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:s.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,n=e.cx,r=e.cy,a=e.angle,s=e.ticks,i=e.axisLine,o=hB(e,oB),l=s.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),c=lk(n,r,l[0],a),d=lk(n,r,l[1],a),u=mB(mB(mB({},Hb(o,!1)),{},{fill:"none"},Hb(i,!1)),{},{x1:c.x,y1:c.y,x2:d.x,y2:d.y});return t.createElement("line",dB({className:"recharts-polar-radius-axis-line"},u))}},{key:"renderTicks",value:function(){var e=this,r=this.props,a=r.ticks,s=r.tick,i=r.angle,o=r.tickFormatter,l=r.stroke,c=hB(r,lB),d=this.getTickTextAnchor(),u=Hb(c,!1),m=Hb(s,!1),h=a.map((function(r,a){var c=e.getTickValueCoord(r),h=mB(mB(mB(mB({textAnchor:d,transform:"rotate(".concat(90-i,", ").concat(c.x,", ").concat(c.y,")")},u),{},{stroke:"none",fill:l},m),{},{index:a},c),{},{payload:r});return t.createElement($C,dB({className:(0,Ky.A)("recharts-polar-radius-axis-tick",hk(s)),key:"tick-".concat(r.coordinate)},kb(e.props,r,a)),n.renderTickItem(s,h,o?o(r.value,a):r.value))}));return t.createElement($C,{className:"recharts-polar-radius-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,n=e.ticks,r=e.axisLine,a=e.tick;return n&&n.length?t.createElement($C,{className:(0,Ky.A)("recharts-polar-radius-axis",this.props.className)},r&&this.renderAxisLine(),a&&this.renderTicks(),_k.renderCallByParent(this.props,this.getViewBox())):null}}])&&pB(r.prototype,a),s&&pB(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.PureComponent);function NB(e){return NB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NB(e)}function _B(){return _B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_B.apply(this,arguments)}function SB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SB(Object(n),!0).forEach((function(t){PB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OB(r.key),r)}}function DB(e,t,n){return t=kB(t),function(e,t){if(t&&("object"===NB(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,TB()?Reflect.construct(t,n||[],kB(e).constructor):t.apply(e,n))}function TB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(TB=function(){return!!e})()}function kB(e){return kB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kB(e)}function AB(e,t){return AB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},AB(e,t)}function PB(e,t,n){return(t=OB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OB(e){var t=function(e,t){if("object"!=NB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=NB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==NB(t)?t:t+""}yB(wB,"displayName","PolarRadiusAxis"),yB(wB,"axisType","radiusAxis"),yB(wB,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var RB=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),PB(t=DB(this,n,[e]),"pieRef",null),PB(t,"sectorRefs",[]),PB(t,"id",db("recharts-pie-")),PB(t,"handleAnimationEnd",(function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),yb()(e)&&e()})),PB(t,"handleAnimationStart",(function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),yb()(e)&&e()})),t.state={isAnimationFinished:!e.isAnimationActive,prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,sectorToFocus:0},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AB(e,t)}(n,e),r=n,s=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,n,r){if(t.isValidElement(e))return t.cloneElement(e,n);if(yb()(e))return e(n);var a=(0,Ky.A)("recharts-pie-label-line","boolean"!==typeof e?e.className:"");return t.createElement(GI,_B({},n,{key:r,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(e,n,r){if(t.isValidElement(e))return t.cloneElement(e,n);var a=r;if(yb()(e)&&(a=e(n),t.isValidElement(a)))return a;var s=(0,Ky.A)("recharts-pie-label-text","boolean"===typeof e||yb()(e)?"":e.className);return t.createElement(Fj,_B({},n,{alignmentBaseline:"middle",className:s}),a)}}],(a=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,a=r.label,s=r.labelLine,i=r.dataKey,o=r.valueKey,l=Hb(this.props,!1),c=Hb(a,!1),d=Hb(s,!1),u=a&&a.offsetRadius||20,m=e.map((function(e,r){var m=(e.startAngle+e.endAngle)/2,h=lk(e.cx,e.cy,e.outerRadius+u,m),p=EB(EB(EB(EB({},l),e),{},{stroke:"none"},c),{},{index:r,textAnchor:n.getTextAnchor(h.x,e.cx)},h),f=EB(EB(EB(EB({},l),e),{},{fill:"none",stroke:e.fill},d),{},{index:r,points:[lk(e.cx,e.cy,e.outerRadius,m),h]}),v=i;return gb()(i)&&gb()(o)?v="value":gb()(i)&&(v=o),t.createElement($C,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(r)},s&&n.renderLabelLineItem(s,f,"line"),n.renderLabelItem(a,p,AT(e,v)))}));return t.createElement($C,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(e){var n=this,r=this.props,a=r.activeShape,s=r.blendStroke,i=r.inactiveShape;return e.map((function(r,o){if(0===(null===r||void 0===r?void 0:r.startAngle)&&0===(null===r||void 0===r?void 0:r.endAngle)&&1!==e.length)return null;var l=n.isActiveIndex(o),c=i&&n.hasActiveIndex()?i:null,d=l?a:c,u=EB(EB({},r),{},{stroke:s?r.fill:r.stroke,tabIndex:-1});return t.createElement($C,_B({ref:function(e){e&&!n.sectorRefs.includes(e)&&n.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},kb(n.props,r,o),{key:"sector-".concat(null===r||void 0===r?void 0:r.startAngle,"-").concat(null===r||void 0===r?void 0:r.endAngle,"-").concat(r.midAngle,"-").concat(o)}),t.createElement(fR,_B({option:d,isActive:l,shapeType:"sector"},u)))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,n=this.props,r=n.sectors,a=n.isAnimationActive,s=n.animationBegin,i=n.animationDuration,o=n.animationEasing,l=n.animationId,c=this.state,d=c.prevSectors,u=c.prevIsAnimationActive;return t.createElement(UP,{begin:s,duration:i,isActive:a,easing:o,from:{t:0},to:{t:1},key:"pie-".concat(l,"-").concat(u),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(n){var a=n.t,s=[],i=(r&&r[0]).startAngle;return r.forEach((function(e,t){var n=d&&d[t],r=t>0?nb()(e,"paddingAngle",0):0;if(n){var o=hb(n.endAngle-n.startAngle,e.endAngle-e.startAngle),l=EB(EB({},e),{},{startAngle:i+r,endAngle:i+o(a)+r});s.push(l),i=l.endAngle}else{var c=e.endAngle,u=e.startAngle,m=hb(0,c-u)(a),h=EB(EB({},e),{},{startAngle:i+r,endAngle:i+m+r});s.push(h),i=h.endAngle}})),t.createElement($C,null,e.renderSectorsStatically(s))}))}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var n=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"ArrowRight":var r=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&t&&t.length)||r&&lC()(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,n=this.props,r=n.hide,a=n.sectors,s=n.className,i=n.label,o=n.cx,l=n.cy,c=n.innerRadius,d=n.outerRadius,u=n.isAnimationActive,m=this.state.isAnimationFinished;if(r||!a||!a.length||!ob(o)||!ob(l)||!ob(c)||!ob(d))return null;var h=(0,Ky.A)("recharts-pie",s);return t.createElement($C,{tabIndex:this.props.rootTabIndex,className:h,ref:function(t){e.pieRef=t}},this.renderSectors(),i&&this.renderLabels(a),_k.renderCallByParent(this.props,null,!1),(!u||m)&&LO.renderCallByParent(this.props,a,!1))}}])&&CB(r.prototype,a),s&&CB(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(t.PureComponent);jB=RB,PB(RB,"displayName","Pie"),PB(RB,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!tj.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),PB(RB,"parseDeltaAngle",(function(e,t){return sb(t-e)*Math.min(Math.abs(t-e),360)})),PB(RB,"getRealPieData",(function(e){var t=e.data,n=e.children,r=Hb(e,!1),a=Bb(n,NO);return t&&t.length?t.map((function(e,t){return EB(EB(EB({payload:e},r),e),a&&a[t]&&a[t].props)})):a&&a.length?a.map((function(e){return EB(EB({},r),e.props)})):[]})),PB(RB,"parseCoordinateOfPie",(function(e,t){var n=t.top,r=t.left,a=t.width,s=t.height,i=ck(a,s);return{cx:r+ub(e.cx,a,a/2),cy:n+ub(e.cy,s,s/2),innerRadius:ub(e.innerRadius,i,0),outerRadius:ub(e.outerRadius,i,.8*i),maxRadius:e.maxRadius||Math.sqrt(a*a+s*s)/2}})),PB(RB,"getComposedData",(function(e){var t=e.item,n=e.offset,r=void 0!==t.type.defaultProps?EB(EB({},t.type.defaultProps),t.props):t.props,a=jB.getRealPieData(r);if(!a||!a.length)return null;var s=r.cornerRadius,i=r.startAngle,o=r.endAngle,l=r.paddingAngle,c=r.dataKey,d=r.nameKey,u=r.valueKey,m=r.tooltipType,h=Math.abs(r.minAngle),p=jB.parseCoordinateOfPie(r,n),f=jB.parseDeltaAngle(i,o),v=Math.abs(f),g=c;gb()(c)&&gb()(u)?(fb(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),g="value"):gb()(c)&&(fb(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),g=u);var x,y,b=a.filter((function(e){return 0!==AT(e,g,0)})).length,j=v-b*h-(v>=360?b:b-1)*l,w=a.reduce((function(e,t){var n=AT(t,g,0);return e+(ob(n)?n:0)}),0);w>0&&(x=a.map((function(e,t){var n,r=AT(e,g,0),a=AT(e,d,t),o=(ob(r)?r:0)/w,c=(n=t?y.endAngle+sb(f)*l*(0!==r?1:0):i)+sb(f)*((0!==r?h:0)+o*j),u=(n+c)/2,v=(p.innerRadius+p.outerRadius)/2,x=[{name:a,value:r,payload:e,dataKey:g,type:m}],b=lk(p.cx,p.cy,v,u);return y=EB(EB(EB({percent:o,cornerRadius:s,name:a,tooltipPayload:x,midAngle:u,middleRadius:v,tooltipPosition:b},e),p),{},{value:AT(e,g),startAngle:n,endAngle:c,payload:e,paddingAngle:sb(f)*l})})));return EB(EB({},p),{},{sectors:x,data:a})}));var MB=$L({chartName:"PieChart",GraphicalChild:RB,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:nB},{axisType:"radiusAxis",AxisComp:wB}],formatAxisMap:function(e,t,n,r,a){var s=e.width,i=e.height,o=e.startAngle,l=e.endAngle,c=ub(e.cx,s,s/2),d=ub(e.cy,i,i/2),u=ck(s,i,n),m=ub(e.innerRadius,u,0),h=ub(e.outerRadius,u,.8*u);return Object.keys(t).reduce((function(e,n){var s,i=t[n],u=i.domain,p=i.reversed;if(gb()(i.range))"angleAxis"===r?s=[o,l]:"radiusAxis"===r&&(s=[m,h]),p&&(s=[s[1],s[0]]);else{var f=ak(s=i.range,2);o=f[0],l=f[1]}var v=WT(i,a),g=v.realScaleType,x=v.scale;x.domain(u).range(s),UT(x);var y=VT(x,nk(nk({},i),{},{realScaleType:g})),b=nk(nk(nk({},i),y),{},{range:s,radius:h,realScaleType:g,scale:x,cx:c,cy:d,innerRadius:m,outerRadius:h,startAngle:o,endAngle:l});return nk(nk({},e),{},rk({},n,b))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function IB(e,t){return+(0,Pc.a)(e)===+(0,Pc.a)(t)}const LB=()=>{const e=Ko("(max-width: 767px)"),[n,r]=(0,t.useState)("Today"),[s,i]=(0,t.useState)({from:null,to:null}),o=(0,a.Zp)(),l=(0,j.wA)(),{dashboardData:c,dashboardDataStatus:d,items:u,itemsStatus:m}=(0,j.d4)((e=>e.pharmacy)),h=(0,t.useMemo)((()=>u.reduce(((e,t)=>e+t.quantity),0)),[u]),p=(0,t.useMemo)((()=>{if("Custom"===n)return{currentValue:c,previousValue:[]};const e=(0,M.SM)(n),t=new Date(e.from),r=new Date(e.to);let a,s;"Today"===n||"Yesterday"===n?(a=(0,kc.o)((0,Wc.e)(t,1)),s=(0,Ac.D)((0,Wc.e)(r,1))):"This Week"===n?(a=(0,Rc.k)((0,Wc.e)(t,7)),s=(0,Mc.$)((0,Wc.e)(r,7))):"This Month"===n?(a=(0,$c.w)((0,Wc.e)(t,30)),s=(0,Uc.p)((0,Wc.e)(r,30))):(a=null,s=null);return{currentValue:c.filter((e=>Oc(new Date(e._id),{start:t,end:r}))),previousValue:a&&s?c.filter((e=>Oc(new Date(e._id),{start:a,end:s}))):[]}}),[c,n]),f=(0,t.useMemo)((()=>p.previousValue.reduce(((e,t)=>({totalRevenue:e.totalRevenue+t.totalRevenue,totalCount:e.totalCount+t.totalCount})),{totalRevenue:0,totalCount:0})),[p]),v=(0,t.useMemo)((()=>p.currentValue.reduce(((e,t)=>(e.totalRevenue+=t.totalRevenue,e.totalPrescriptions+=t.totalCount,t.paymentMethods.forEach((t=>{const n=t.method||"Others";e.paymentMethods[n]||(e.paymentMethods[n]=0),e.paymentMethods[n]+=parseInt(t.amount)})),e)),{totalRevenue:0,totalPrescriptions:0,paymentMethods:{}})),[p]),g=(0,t.useMemo)((()=>{const e={Cash:"hsl(var(--chart-1))",UPI:"hsl(var(--chart-2))",Card:"hsl(var(--chart-3))",Others:"hsl(var(--chart-4))"};return Object.entries(v.paymentMethods).map((t=>{let[n,r]=t;return{method:n,value:r,fill:e[n]||"hsl(var(--chart-4))"}}))}),[v]),x=(0,t.useMemo)((()=>{const e=(0,kc.o)(new Date),t=Array.from({length:7},((t,n)=>{const r=(0,Wc.e)(e,6-n);return{date:r,formattedDate:(0,Go.GP)(r,"EEE"),sales:0,prescriptions:0}}));return c.forEach((e=>{const n=(0,kc.o)(new Date(e._id)),r=t.findIndex((e=>IB(e.date,n)));-1!==r&&(t[r].sales=parseInt(e.totalRevenue),t[r].prescriptions=e.totalCount)})),t}),[p]);(0,t.useEffect)((()=>{if("idle"===d){const e=(0,M.SM)("Last 7 Days");b(e)}"idle"===m&&l((0,st.LN)())}),[d,l,m]);const y=e=>{if(r(e),"Custom"!==e){let t;t="Today"===e||"Yesterday"===e?(0,M.SM)("Last 7 Days"):"This Week"===e?(0,M.SM)("This Week Fetched"):"This Month"===e?(0,M.SM)("This Month Fetched"):(0,M.SM)(e),b(t)}},b=e=>{const t={startDate:new Date(e.from).toISOString(),endDate:new Date(e.to).toISOString()};l((0,st.E0)(t))};return(0,X.jsxs)("div",{children:[(0,X.jsxs)("div",{className:"flex justify-between items-center bg-gray-100 pr-2",children:[(0,X.jsxs)("div",{className:"flex items-center p-1 space-x-1",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"text-gray-600",children:(0,X.jsx)(di,{className:"h-4 w-4"})}),(0,X.jsx)(ly.A,{className:"h-3 w-3 text-gray-400"}),(0,X.jsx)("span",{className:"font-semibold text-gray-700 text-sm",children:"Pharmacy Dashboard"})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-4",children:["Custom"===n&&(0,X.jsx)(M.Ur,{from:s.from,to:s.to,onSelect:e=>i(e),onSearch:()=>{r("Custom"),b(s)},onCancel:()=>{i({from:null,to:null}),r("Today")}}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",size:"sm",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),"All"===n?"All Time":n]})}),(0,X.jsxs)(Ws,{align:"end",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Time Filter Options"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>y("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>y("Yesterday"),children:"Yesterday"}),(0,X.jsx)($s,{onSelect:()=>y("This Week"),children:"This Week"}),(0,X.jsx)($s,{onSelect:()=>y("This Month"),children:"This Month"}),(0,X.jsx)($s,{onSelect:()=>y("All"),children:"All Time"}),(0,X.jsx)($s,{onClick:()=>y("Custom"),children:"Custom Range"})]})]})]})]}),(0,X.jsxs)("div",{className:"space-y-4 mt-2 mx-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,X.jsxs)("div",{className:"col-span-1 md:col-span-3",children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[(0,X.jsx)(k.Zp,{className:"bg-blue-100 col-span-1",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsx)(ai,{className:"w-8 h-8 text-blue-600 mb-2"}),(0,X.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:v.totalPrescriptions}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Prescriptions Filled"}),(0,X.jsxs)("p",{className:"text-xs mt-1 "+((0,M.tP)(v.totalPrescriptions,f.totalCount)>=0?"text-green-600":"text-red-600"),children:[(0,M.tP)(v.totalPrescriptions,f.totalCount),"% from previous period"]})]})}),(0,X.jsx)(k.Zp,{className:"bg-green-100 col-span-1",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsx)(ty,{className:"w-8 h-8 text-green-600 mb-2"}),(0,X.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\u20b9",parseInt(v.totalRevenue).toLocaleString()]}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Today's Revenue"}),(0,X.jsxs)("p",{className:"text-xs mt-1 "+((0,M.tP)(v.totalRevenue,f.totalRevenue)>=0?"text-green-600":"text-red-600"),children:[(0,M.tP)(v.totalRevenue,f.totalRevenue),"% from previous period"]})]})}),!e&&(0,X.jsx)(k.Zp,{className:"bg-yellow-100 col-span-1",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsx)(Ay,{className:"w-8 h-8 text-yellow-600 mb-2"}),(0,X.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:h.toLocaleString()}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Items in Stock"})]})})]}),e&&(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,X.jsx)(k.Zp,{className:"bg-yellow-100",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsx)(Ay,{className:"w-8 h-8 text-yellow-600 mb-2"}),(0,X.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:h.toLocaleString()}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Items in Stock"})]})}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Quick Actions"})}),(0,X.jsxs)(k.Wu,{className:"grid grid-cols-1 gap-2 px-3",children:[(0,X.jsxs)(w.$,{className:"w-full justify-center",variant:"outline",onClick:()=>o("/pharmacy/sales"),children:[(0,X.jsx)(ri,{className:"mr-2 h-4 w-4"}),"Sales"]}),(0,X.jsxs)(w.$,{className:"w-full justify-center",variant:"outline",onClick:()=>o("/pharmacy/items-master"),children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),"Inventory"]}),(0,X.jsxs)(w.$,{className:"w-full justify-center",variant:"outline",onClick:()=>o("/pharmacy/reports"),children:[(0,X.jsx)(Tc,{className:"mr-2 h-4 w-4"}),"Reports"]})]})]})]}),!e&&(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Quick Actions"})}),(0,X.jsxs)(k.Wu,{className:"grid grid-cols-3 gap-4",children:[(0,X.jsxs)(w.$,{className:"w-full justify-center",variant:"outline",onClick:()=>o("/pharmacy/sales"),children:[(0,X.jsx)(ri,{className:"mr-2 h-4 w-4"}),"Pharmacy Sales"]}),(0,X.jsxs)(w.$,{className:"w-full justify-center",variant:"outline",onClick:()=>o("/pharmacy/items-master"),children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),"Manage Inventory"]}),(0,X.jsxs)(w.$,{className:"w-full justify-center",variant:"outline",onClick:()=>o("/pharmacy/reports"),children:[(0,X.jsx)(Tc,{className:"mr-2 h-4 w-4"}),"View Reports"]})]})]})]}),(0,X.jsxs)(k.Zp,{className:"col-span-1",children:[(0,X.jsxs)(k.aR,{className:"pb-0",children:[(0,X.jsx)(k.ZB,{children:"Payment Methods"}),(0,X.jsx)(k.BT,{children:"Distribution of payment methods used"})]}),(0,X.jsx)(k.Wu,{children:g.length>0?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("div",{className:"h-[180px]",children:(0,X.jsx)(ej,{width:"100%",height:"100%",children:(0,X.jsxs)(MB,{children:[(0,X.jsxs)(RB,{data:g,dataKey:"value",nameKey:"method",cx:"50%",cy:"50%",innerRadius:45,outerRadius:85,paddingAngle:1,children:[g.map(((e,t)=>(0,X.jsx)(NO,{fill:e.fill},`cell-${t}`))),(0,X.jsx)(_k,{content:e=>{let{viewBox:t}=e;const{cx:n,cy:r}=t;return(0,X.jsxs)("text",{x:n,y:r,textAnchor:"middle",dominantBaseline:"central",children:[(0,X.jsxs)("tspan",{x:n,y:r,className:"text-xl font-bold",children:["\u20b9",parseInt(v.totalRevenue).toLocaleString()]}),(0,X.jsx)("tspan",{x:n,y:r+15,className:"text-xs",children:"Total"})]})}})]}),(0,X.jsx)(cA,{})]})})}),(0,X.jsx)("div",{className:"mt-0 flex justify-center space-x-4",children:g.map(((e,t)=>(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)("div",{className:"w-3 h-3 mr-1",style:{backgroundColor:e.fill}}),(0,X.jsx)("span",{className:"text-xs",children:e.method})]},t)))})]}):(0,X.jsxs)("div",{className:"h-[180px] flex flex-col items-center justify-center text-gray-500",children:[(0,X.jsx)(Jo,{className:"w-12 h-12 mb-2"}),(0,X.jsx)("p",{className:"text-sm",children:"No payment data available"})]})})]})]}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsxs)(k.aR,{children:[(0,X.jsx)(k.ZB,{children:"Weekly Performance"}),(0,X.jsx)(k.BT,{children:"Sales and prescriptions filled in the last 7 days"})]}),(0,X.jsx)(k.Wu,{children:(0,X.jsx)("div",{className:"h-[300px] sm:h-[400px] md:h-[300px]",children:(0,X.jsx)(ej,{width:"100%",height:"100%",children:(0,X.jsxs)(RF,{data:x,children:[(0,X.jsx)(wF,{dataKey:"formattedDate"}),(0,X.jsx)(OF,{yAxisId:"left",orientation:"left",stroke:"#3b82f6"}),(0,X.jsx)(OF,{yAxisId:"right",orientation:"right",stroke:"#10b981"}),(0,X.jsx)(cA,{}),(0,X.jsx)(yT,{}),(0,X.jsx)(qR,{yAxisId:"left",dataKey:"sales",fill:"#3b82f6",name:"Sales (\u20b9)"}),(0,X.jsx)(qR,{yAxisId:"right",dataKey:"prescriptions",fill:"#10b981",name:"Prescriptions"})]})})})})]})]})]})},FB=(0,N.A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),BB=()=>(0,X.jsxs)("div",{className:"hidden print:block mb-4",children:[(0,X.jsx)("h1",{className:"text-2xl font-bold text-center",children:"Your Pharmacy Name"}),(0,X.jsx)("p",{className:"text-center",children:"123 Pharmacy Street, City, Country"}),(0,X.jsx)("p",{className:"text-center",children:"Phone: (123) 456-7890"})]});function WB(e){var n;let{order:r,isOpen:a,setIsOpen:s}=e;const i=(0,t.useRef)(),[o,l]=(0,t.useState)(!1),c=(0,qn.useReactToPrint)({content:()=>i.current,onBeforeGetContent:()=>(l(!0),new Promise((e=>{setTimeout((()=>{l(!1),e()}),0)}))),pageStyle:"\n      @media print {\n        @page {\n          size: auto;\n          margin: 0;\n        }\n        body {\n          padding: 10mm;\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-only {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n      }\n    "});if(!r)return null;const d=r.totalAmount,u=r.subtotal-r.totalAmount,m=r.paidAmount,h=d-m;return(0,X.jsx)(Io.lG,{open:a,onOpenChange:s,children:(0,X.jsx)(Io.Cf,{className:"max-w-4xl max-h-[70vh] overflow-y-auto p-6",children:(0,X.jsxs)("div",{ref:i,className:o?"print-content":"",children:[(0,X.jsx)(BB,{}),(0,X.jsx)("div",{className:"no-print",children:(0,X.jsx)(Io.c7,{children:(0,X.jsx)(Io.L3,{className:"text-lg font-bold",children:"Order Details"})})}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,X.jsxs)(k.Zp,{children:[(0,X.jsxs)(k.aR,{className:"py-2 flex flex-row justify-between items-center",children:[(0,X.jsx)(k.ZB,{className:"text-base",children:"Order Summary"}),(0,X.jsx)("div",{className:"flex space-x-2",children:(0,X.jsx)(Yo.E,{variant:h<=0?"success":m>0?"warning":"destructive",children:h<=0?"Paid":m>0?"Partially Paid":"Due"})})]}),(0,X.jsx)(k.Wu,{className:"grid grid-cols-1 gap-2 py-2",children:(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(Ay,{className:"w-5 h-5 text-gray-500"}),(0,X.jsx)("span",{className:"font-semibold",children:"Order ID:"}),(0,X.jsxs)("span",{children:["ORD",r._id.slice(-5)]})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zo,{className:"w-5 h-5 text-gray-500"}),(0,X.jsx)("span",{className:"font-semibold",children:"Order Date:"}),(0,X.jsx)("span",{children:(0,M.Yq)(r.orderDate)})]})]})})]}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{className:"py-2",children:(0,X.jsx)(k.ZB,{className:"text-base",children:"Payment"})}),(0,X.jsx)(k.Wu,{className:"py-2",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"text-xs",children:"Payment ID"}),(0,X.jsx)(Wo.nd,{className:"text-xs text-right",children:"Amount"}),(0,X.jsx)(Wo.nd,{className:"text-xs",children:"Date"})]})}),(0,X.jsx)(Wo.BF,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-sm py-1",children:null===r||void 0===r||null===(n=r.payment)||void 0===n?void 0:n._id.slice(-5)}),(0,X.jsxs)(Wo.nA,{className:"text-sm py-1 text-right",children:["\u20b9",r.payment.amount.toFixed(2).toLocaleString()]}),(0,X.jsx)(Wo.nA,{className:"text-sm py-1",children:(0,M.Yq)(r.payment.createdAt)})]})})]})})]})]}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{className:"py-2",children:(0,X.jsx)(k.ZB,{className:"text-base",children:"Order Items"})}),(0,X.jsx)(k.Wu,{className:"py-2",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"text-xs",children:"Item Name"}),(0,X.jsx)(Wo.nd,{className:"text-xs",children:"Type"}),(0,X.jsx)(Wo.nd,{className:"text-xs",children:"Quantity"}),(0,X.jsx)(Wo.nd,{className:"text-xs",children:"MRP"}),(0,X.jsx)(Wo.nd,{className:"text-xs",children:"Discount"}),(0,X.jsx)(Wo.nd,{className:"text-xs",children:"Total"}),(0,X.jsx)(Wo.nd,{className:"text-xs ",children:"Expiry Date"})]})}),(0,X.jsx)(Wo.BF,{children:r.items&&r.items.map(((e,t)=>{var n,r;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-sm py-1 capitalize",children:(null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.name)||"Deleted Item"}),(0,X.jsx)(Wo.nA,{className:"text-sm py-1 capitalize",children:(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.type)||"N/A"}),(0,X.jsx)(Wo.nA,{className:"text-sm py-1",children:(null===e||void 0===e?void 0:e.quantity.toLocaleString())||"N/A"}),(0,X.jsxs)(Wo.nA,{className:"text-sm py-1",children:["\u20b9",(null===e||void 0===e?void 0:e.MRP.toFixed(2).toLocaleString())||"N/A"]}),(0,X.jsxs)(Wo.nA,{className:"text-sm py-1",children:[null===e||void 0===e?void 0:e.discount,"%"]}),(0,X.jsxs)(Wo.nA,{className:"text-sm py-1",children:["\u20b9",((null===e||void 0===e?void 0:e.quantity)*(null===e||void 0===e?void 0:e.MRP)*(1-(null===e||void 0===e?void 0:e.discount)/100)).toLocaleString()||"N/A"]}),(0,X.jsx)(Wo.nA,{className:"text-sm py-1",children:(0,M.Yq)(null===e||void 0===e?void 0:e.expiryDate)||"N/A"})]},t)}))})]})})]}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{className:"py-2",children:(0,X.jsx)(k.ZB,{className:"text-base",children:"Order Total"})}),(0,X.jsx)(k.Wu,{className:"py-2",children:(0,X.jsx)(Wo.XI,{children:(0,X.jsxs)(Wo.BF,{children:[(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-sm py-1 font-semibold",children:"Subtotal:"}),(0,X.jsxs)(Wo.nA,{className:"text-sm py-1 text-right",children:["\u20b9",r.subtotal.toLocaleString()]})]}),(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsxs)(Wo.nA,{className:"text-sm py-1 font-semibold",children:["Total Discount (",(u/r.subtotal*100).toFixed(2),"%):"]}),(0,X.jsxs)(Wo.nA,{className:"text-sm py-1 text-right",children:["\u20b9",u.toLocaleString()]})]}),(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-sm py-1 font-semibold",children:"Total Amount:"}),(0,X.jsxs)(Wo.nA,{className:"text-sm py-1 text-right",children:["\u20b9",d.toLocaleString()]})]}),(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-sm py-1 font-semibold",children:"Total Amount Paid:"}),(0,X.jsxs)(Wo.nA,{className:"text-sm py-1 text-right",children:["\u20b9",m.toLocaleString()]})]}),(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-base py-1 font-semibold",children:"Remaining Amount to be Paid:"}),(0,X.jsxs)(Wo.nA,{className:"text-base py-1 text-right font-bold",children:["\u20b9",h.toLocaleString()]})]})]})})})]}),(0,X.jsxs)("div",{className:"flex justify-end space-x-2 mt-2 no-print",children:[(0,X.jsxs)(w.$,{variant:"outline",size:"sm",onClick:c,children:[(0,X.jsx)(Xn.A,{className:"mr-2 h-4 w-4"}),"Print Order"]}),(0,X.jsx)(w.$,{size:"sm",onClick:()=>s(!1),children:"Close"})]})]})]})})})}const $B=e=>{let{open:n,setOpen:r,onAddSupplier:a}=e;const[s,i]=(0,t.useState)({name:"",address:"",contactNumber:"",email:"",itemsOffered:[]}),o=e=>{i({...s,[e.target.name]:e.target.value})},l=(e,t,n)=>{const r=[...s.itemsOffered];r[e]={...r[e],[t]:n},"type"===t&&"Other"!==n&&(r[e].otherType=""),i({...s,itemsOffered:r})};return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:"max-w-4xl max-h-[80vh] overflow-y-auto p-6",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{className:" font-semibold",children:"Supplier Registration"}),(0,X.jsx)(Io.rr,{children:"Enter details to reegister a new supplier"})]}),(0,X.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={...s,id:`SID${Math.floor(1e3*Math.random())}`,lastPurchased:"N/A",totalPurchaseValue:0,orders:[]};a(t),r(!1)},className:"space-y-2",children:[(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"name",children:"Name"}),(0,X.jsx)(Vn.p,{type:"text",id:"name",name:"name",value:s.name,onChange:o,required:!0})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"contactNumber",children:"Contact Number"}),(0,X.jsx)(Vn.p,{type:"tel",id:"contactNumber",name:"contactNumber",value:s.contactNumber,onChange:o,required:!0})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"email",children:"Email"}),(0,X.jsx)(Vn.p,{type:"email",id:"email",name:"email",value:s.email,onChange:o,required:!0})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"address",children:"Address"}),(0,X.jsx)(Xo.T,{id:"address",name:"address",value:s.address,onChange:o,required:!0,className:"h-20"})]})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{children:"Items Offered"}),s.itemsOffered.map(((e,t)=>(0,X.jsxs)("div",{className:"flex space-x-2 items-end",children:[(0,X.jsx)("div",{className:"flex-1 space-y-2",children:(0,X.jsx)(Vn.p,{type:"text",placeholder:"Item name",value:e.name,onChange:e=>l(t,"name",e.target.value),required:!0})}),(0,X.jsx)("div",{className:"flex-1 space-y-2",children:(0,X.jsx)(Vn.p,{type:"number",placeholder:"MRP",value:e.mrp,onChange:e=>l(t,"mrp",e.target.value),required:!0})}),(0,X.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,X.jsx)(Vn.p,{type:"text",placeholder:"Type",value:e.type,onChange:e=>l(t,"type",e.target.value),required:!0,list:`type-suggestions-${t}`}),(0,X.jsxs)("datalist",{id:`type-suggestions-${t}`,children:[(0,X.jsx)("option",{value:"Tablet"}),(0,X.jsx)("option",{value:"Capsule"}),(0,X.jsx)("option",{value:"Injection"})]})]}),"Other"===e.type&&(0,X.jsx)("div",{className:"flex-1 space-y-2",children:(0,X.jsx)(Vn.p,{type:"text",placeholder:"Specify type",value:e.otherType||"",onChange:e=>l(t,"otherType",e.target.value),required:!0})}),(0,X.jsx)("div",{className:"flex-1 space-y-2",children:(0,X.jsx)(Vn.p,{type:"number",placeholder:"Discount %",value:e.discount,onChange:e=>l(t,"discount",e.target.value),required:!0})}),(0,X.jsx)(w.$,{type:"button",variant:"destructive",onClick:()=>(e=>{const t=s.itemsOffered.filter(((t,n)=>n!==e));i({...s,itemsOffered:t})})(t),children:(0,X.jsx)(ky,{className:"h-4 w-4"})})]},t))),(0,X.jsxs)(w.$,{type:"button",variant:"outline",onClick:()=>{i({...s,itemsOffered:[...s.itemsOffered,{name:"",mrp:"",type:"",discount:""}]})},className:"w-full",children:[(0,X.jsx)(S.A,{className:"h-4 w-4 mr-2"})," Add Item"]})]}),(0,X.jsx)(w.$,{type:"submit",className:"w-full",children:"Register Supplier"})]})]})})},UB=()=>{const e=(0,j.wA)(),{suppliers:n,suppliersStatus:r,selectedSupplier:a}=(0,j.d4)((e=>e.pharmacy)),[s,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(!1);(0,t.useEffect)((()=>{"idle"===r&&e((0,st.qQ)())}),[r,e]);const h=e=>e.items&&e.items.length>0?e.items.reduce(((e,t)=>e+t.quantity),0):e.quantity||0,p=e=>(100*(1-e.totalAmount/e.subtotal)).toFixed(2)||"N/A",f=n.filter((e=>e.name.toLowerCase().includes(c.toLowerCase())));return(0,X.jsxs)("div",{className:"h-full w-full flex flex-col",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-1 bg-gray-100 p-1 justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"text-gray-600",children:(0,X.jsx)(di,{className:"h-4 w-4"})}),(0,X.jsx)(ly.A,{className:"h-3 w-3 text-gray-400"}),(0,X.jsx)("span",{className:"font-semibold text-gray-700 text-sm",children:"Supplier"})]}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",className:"text-gray-600 hover:bg-gray-100",onClick:()=>m(!0),children:[(0,X.jsx)(S.A,{className:"h-4 w-4"})," ",(0,X.jsx)("span",{className:"font-semibold text-gray-700 text-sm",children:"Add Supplier"})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-4 w-full flex-grow",children:[(0,X.jsx)("div",{className:"col-span-3 border-r-2 border-gray-200 p-4",children:a?(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsxs)(k.ZB,{className:"capitalize",children:[a.name," ",(0,X.jsxs)("span",{className:"text-sm text-gray-500",children:["(",a._id.slice(-6),")"]})]})}),(0,X.jsxs)(k.Wu,{className:"space-y-2",children:[a.address&&(0,X.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,X.jsx)(FB,{size:16}),(0,X.jsx)("span",{className:"text-sm",children:a.address})]}),a.phone&&(0,X.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,X.jsx)(lx,{size:16}),(0,X.jsxs)("span",{className:"text-sm",children:["+91-",a.phone]})]}),a.email&&(0,X.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,X.jsx)(Hx,{size:16}),(0,X.jsx)("span",{className:"text-sm",children:a.email})]})]})]}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Purchase Summary"})}),(0,X.jsxs)(k.Wu,{className:"space-y-2",children:[a.lastPurchased&&(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("span",{className:"text-sm font-medium",children:"Last Purchase:"}),(0,X.jsx)("span",{className:"text-sm",children:(0,M.Yq)(a.lastPurchased)})]}),void 0!==a.amountPaid&&(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("span",{className:"text-sm font-medium",children:"Total Purchase Value:"}),(0,X.jsxs)("span",{className:"text-sm",children:["\u20b9",(Number(a.amountPaid)+Number(a.amountDue)).toLocaleString()]})]}),void 0!==a.amountDue&&(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("span",{className:"text-sm font-medium",children:"Amount Due:"}),(0,X.jsxs)("span",{className:"text-sm",children:["\u20b9",a.amountDue.toLocaleString()]})]})]})]}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:"Items Offered"})}),(0,X.jsx)(k.Wu,{children:a.items&&a.items.length>0?(0,X.jsx)("div",{className:"flex flex-wrap gap-2",children:a.items.map(((e,t)=>(0,X.jsx)(Yo.E,{variant:"outline",className:"capitalize",children:e.name},t)))}):(0,X.jsx)("p",{className:"text-sm text-gray-500",children:"No items offered"})})]})]}),(0,X.jsx)("h4",{className:"text-lg font-medium",children:"Orders"}),a.orders&&a.orders.length>0?(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Order ID"}),(0,X.jsx)(Wo.nd,{children:"Order Date"}),(0,X.jsx)(Wo.nd,{children:"Quantity"}),(0,X.jsx)(Wo.nd,{children:"Total Amount"}),(0,X.jsx)(Wo.nd,{children:"Discount"}),(0,X.jsx)(Wo.nd,{children:"Payments"}),(0,X.jsx)(Wo.nd,{children:"Action"})]})}),(0,X.jsx)(Wo.BF,{children:a.orders.map((e=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsxs)(Wo.nA,{className:"capitalize",children:["ORD",e._id.slice(-5)]}),(0,X.jsx)(Wo.nA,{children:(0,M.Yq)(e.orderDate)}),(0,X.jsx)(Wo.nA,{children:h(e)}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.totalAmount.toLocaleString()]}),(0,X.jsxs)(Wo.nA,{children:[p(e),"%"]}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.paidAmount.toLocaleString()]}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{i(e),l(!0)})(e),children:(0,X.jsx)(Yx,{size:16})})})]},e._id)))})]}):(0,X.jsx)("p",{className:"text-gray-500",children:"No orders found"})]}):(0,X.jsx)("p",{className:"text-gray-500",children:"Select a supplier to view details"})}),(0,X.jsxs)("div",{className:"px-2 py-4 flex flex-col h-full",children:[(0,X.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Supplier List"}),(0,X.jsx)(Vn.p,{placeholder:"Search suppliers...",value:c,onChange:e=>d(e.target.value),className:"mb-2"}),(0,X.jsx)(b.F,{className:"flex-grow",children:f.length>0?(0,X.jsx)("div",{className:"space-y-2 pr-4",children:f.map((t=>(0,X.jsxs)("div",{className:"py-2 px-4 bg-white shadow rounded-lg mb-2 cursor-pointer transition-colors duration-200 hover:bg-gray-100 "+(a&&a._id===t._id?"border-2 border-blue-400 shadow-md":""),onClick:()=>(t=>{e((0,st.ZJ)(t._id))})(t),children:[(0,X.jsxs)("h3",{className:"font-semibold capitalize",children:[t.name," ",(0,X.jsxs)("span",{className:"text-xs text-gray-500",children:["(",t._id.slice(-6),")"]})]}),(0,X.jsxs)("p",{className:"text-sm text-gray-500",children:["Last purchase: ",(0,M.Yq)(t.lastPurchased)]}),(0,X.jsxs)("p",{className:"text-sm text-gray-500",children:["Total Purchase Value: \u20b9",t.amountPaid+t.amountDue]})]},t._id)))}):(0,X.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,X.jsx)("p",{className:"text-gray-500",children:"No suppliers found"})})})]})]}),(0,X.jsx)($B,{open:u,setOpen:m}),(0,X.jsx)(WB,{isOpen:o,setIsOpen:l,order:s})]})},zB=(0,N.A)("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]);function HB(e){var n;let{isOpen:r,onClose:a,item:s}=e;const i=(0,j.wA)(),{updateInventoryStatus:o}=(0,j.d4)((e=>e.pharmacy)),{toast:l}=(0,H.dj)(),[c,d]=(0,t.useState)((null===s||void 0===s?void 0:s.name)||""),[u,m]=(0,t.useState)((null===s||void 0===s?void 0:s.CP)||""),[h,p]=(0,t.useState)((null===s||void 0===s?void 0:s.quantity)||""),[f,v]=(0,t.useState)(null!==s&&void 0!==s&&s.expiryDate?new Date(s.expiryDate).toISOString().slice(0,7):""),[g,x]=(0,t.useState)((null===s||void 0===s?void 0:s.MRP)||""),[y,b]=(0,t.useState)((null===s||void 0===s?void 0:s.type)||""),[N,_]=(0,t.useState)((null===s||void 0===s||null===(n=s.supplier)||void 0===n?void 0:n.name)||""),{hospitalInfo:S}=(0,j.d4)((e=>e.hospital)),E=(null===S||void 0===S?void 0:S.pharmacyItemCategories)||[];(0,t.useEffect)((()=>{var e;s&&(d(s.name||""),m(s.CP||""),p(s.quantity||""),v(s.expiryDate?new Date(s.expiryDate).toISOString().slice(0,7):""),x(s.MRP||""),b(s.type||""),_((null===(e=s.supplier)||void 0===e?void 0:e.name)||""))}),[s]);return(0,X.jsx)(Io.lG,{open:r,onOpenChange:a,children:(0,X.jsxs)(Io.Cf,{className:"sm:max-w-[600px] md:max-w-[800px] w-[95vw] rounded-lg",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Edit Item"}),(0,X.jsx)(Io.rr,{children:"Edit the details of the item"})]}),(0,X.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={};c!==s.name&&(e.name=c),u!==s.CP&&(e.CP=u),h!==s.quantity&&(e.quantity=h),f!==new Date(s.expiryDate).toISOString().slice(0,7)&&(e.expiryDate=f),g!==s.MRP&&(e.MRP=g),y!==s.type&&(e.type=y),0===Object.keys(e).length?l({title:"No changes made",description:"No items were modified.",variant:"success"}):i((0,st.Fv)({itemId:s._id,updateData:e})).unwrap().then((()=>{l({title:"Item updated successfully",description:"The item has been successfully updated.",variant:"success"})})).catch((e=>{l({title:"Failed to update item",description:e.message,variant:"destructive"})})).finally((()=>{a()}))})()},children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"name",children:"Item Name"}),(0,X.jsx)(Vn.p,{id:"name",placeholder:"Name",value:c,onChange:e=>d(e.target.value)})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"types",children:"Type"}),(0,X.jsxs)(A.l6,{onValueChange:e=>b(e),value:y,children:[(0,X.jsx)(A.bq,{id:"types",children:(0,X.jsx)(A.yv,{placeholder:"Select Type"})}),(0,X.jsx)(A.gC,{children:E.map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"MRP",children:"MRP"}),(0,X.jsx)(Vn.p,{id:"MRP",placeholder:"MRP",value:g,onChange:e=>x(e.target.value)})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"price",children:"Cost Price"}),(0,X.jsx)(Vn.p,{id:"price",placeholder:"Price",value:u,onChange:e=>m(e.target.value)})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"quantity",children:"Quantity"}),(0,X.jsx)(Vn.p,{id:"quantity",placeholder:"Quantity",value:h,onChange:e=>p(e.target.value)})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"expiryDate",children:"Expiry Date"}),(0,X.jsx)(Vn.p,{id:"expiryDate",type:"month",placeholder:"Expiry Date",value:f,onChange:e=>v(e.target.value)})]}),(0,X.jsxs)("div",{className:"sm:col-span-2 md:col-span-3",children:[(0,X.jsx)(Ks.J,{htmlFor:"supplierName",children:"Supplier Name"}),(0,X.jsx)(Vn.p,{disabled:!0,id:"supplierName",placeholder:"Supplier Name",readOnly:!0,value:N,onChange:e=>_(e.target.value)})]})]}),(0,X.jsxs)(Io.Es,{className:"mt-4 flex-col-reverse sm:flex-row gap-2",children:[(0,X.jsx)(w.$,{className:"hidden md:block",type:"button",size:"sm",variant:"outline",onClick:()=>{d(""),m(""),p(""),v(""),x(""),b(""),_("")},children:"Reset"}),(0,X.jsx)(w.$,{type:"button",size:"sm",variant:"outline",onClick:a,children:"Cancel"}),(0,X.jsx)(w.$,{type:"submit",size:"sm",disabled:"loading"===o,children:"loading"===o?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})}function VB(e){let{isOpen:n,onClose:r}=e;const a=(0,j.wA)(),{toast:s}=(0,H.dj)(),{createInventoryItemStatus:i}=(0,j.d4)((e=>e.pharmacy)),{hospitalInfo:o}=(0,j.d4)((e=>e.hospital)),l=(null===o||void 0===o?void 0:o.pharmacyItemCategories)||[],[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[h,p]=(0,t.useState)(""),[f,v]=(0,t.useState)(""),[g,x]=(0,t.useState)(""),[y,b]=(0,t.useState)(""),[N,_]=(0,t.useState)(""),[S,E]=(0,t.useState)(""),[C,D]=(0,t.useState)("");return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:"max-w-[800px] w-[90vw] rounded-lg overflow-y-auto",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Add New Item"}),(0,X.jsx)(Io.rr,{children:"Fill basic details of item for new item registration"})]}),(0,X.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={itemsDetails:{name:c,CP:parseFloat(u),quantity:parseInt(h),expiryDate:f,MRP:parseFloat(g),type:y},supplierInfo:{name:N,phone:S,address:C}};a((0,st.wp)(e)).unwrap().then((()=>{s({title:"Item added successfully",description:"The new item has been added to the inventory.",variant:"success"})})).catch((e=>{s({title:"Failed to add item",description:e.message||"There was an error adding the item. Please try again.",variant:"destructive"})})).finally((()=>{r()}))})()},children:[(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 md:gap-4 gap-1",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"name",children:"Item Name"}),(0,X.jsx)(Vn.p,{id:"name",placeholder:"Name",value:c,onChange:e=>d(e.target.value),required:!0})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"types",children:"Type"}),(0,X.jsxs)(A.l6,{onValueChange:e=>b(e),required:!0,children:[(0,X.jsx)(A.bq,{id:"types",children:(0,X.jsx)(A.yv,{placeholder:"Select Type"})}),(0,X.jsx)(A.gC,{children:l.map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"price",children:"Price"}),(0,X.jsx)(Vn.p,{id:"price",placeholder:"Price",value:u,onChange:e=>m(e.target.value),required:!0})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"MRP",children:"MRP"}),(0,X.jsx)(Vn.p,{id:"MRP",placeholder:"MRP",value:g,onChange:e=>x(e.target.value),required:!0})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"quantity",children:"Quantity"}),(0,X.jsx)(Vn.p,{id:"quantity",placeholder:"Quantity",value:h,onChange:e=>p(e.target.value),required:!0})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"expiryDate",children:"Expiry Date"}),(0,X.jsx)(Vn.p,{id:"expiryDate",type:"month",placeholder:"Expiry Date",value:f,onChange:e=>v(e.target.value)})]}),(0,X.jsxs)("div",{className:"hidden sm:block",children:[(0,X.jsx)(Ks.J,{htmlFor:"supplierName",children:"Supplier Name"})," ",(0,X.jsx)(Vn.p,{id:"supplierName",placeholder:"Supplier Name",value:N,onChange:e=>_(e.target.value)})]}),(0,X.jsxs)("div",{className:"hidden sm:block",children:[(0,X.jsx)(Ks.J,{htmlFor:"supplierPhone",children:"Supplier Phone"}),(0,X.jsx)(Vn.p,{id:"supplierPhone",placeholder:"Supplier Phone",value:S,onChange:e=>E(e.target.value)})]}),(0,X.jsxs)("div",{className:"hidden sm:block",children:[(0,X.jsx)(Ks.J,{htmlFor:"supplierAddress",children:"Supplier Address"}),(0,X.jsx)(Vn.p,{id:"supplierAddress",placeholder:"Supplier Address",value:C,onChange:e=>D(e.target.value)})]})]}),(0,X.jsxs)(Io.Es,{className:"mt-4 flex-col-reverse sm:flex-row gap-2",children:[(0,X.jsx)(w.$,{className:"hidden md:block",type:"button",size:"sm",variant:"outline",onClick:()=>{d(""),m(""),p(""),v(""),x(""),b(""),_(""),E(""),D("")},children:"Reset"}),(0,X.jsx)(w.$,{type:"button",size:"sm",variant:"outline",onClick:r,children:"Cancel"}),(0,X.jsx)(w.$,{type:"submit",size:"sm",disabled:"loading"===i,children:"loading"===i?"Adding...":"Add Item"})]})]})]})})}function qB(){const e=(0,j.wA)(),{items:n,itemsStatus:r,deleteInventoryItemStatus:a}=(0,j.d4)((e=>e.pharmacy)),{toast:s}=(0,H.dj)(),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)("All"),[d,u]=(0,t.useState)(1),[m,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[v,g]=(0,t.useState)(!1),[x,y]=(0,t.useState)(!1),[b,N]=(0,t.useState)(null),[E,C]=(0,t.useState)(""),[D,T]=(0,t.useState)(!1),A=Zc("(max-width: 640px)"),P=Zc("(max-width: 1024px)"),[O,R]=(0,t.useState)(!1),M=["All",...new Set(n.map((e=>e.type)))];(0,t.useEffect)((()=>{"idle"===r&&e((0,st.LN)())}),[r,e]);const I=n.filter((e=>e.name.toLowerCase().includes(i.toLowerCase()))).filter((e=>"All"===l||e.type===l)),L=Math.ceil(I.length/10),F=I.slice(10*(d-1),10*d),B=e=>{c(e),u(1)},W=e=>{"prev"===e&&d>1?u(d-1):"next"===e&&d<L&&u(d+1)},$=e=>{f(e),h(!0)},U=e=>{N(e),y(!0)},z=()=>{g(!0)},V=e=>{var t;let{item:n}=e;return(0,X.jsx)(k.Zp,{className:"mb-4 hover:shadow-md transition-shadow",children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"flex flex-col",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsx)("div",{className:"flex items-center flex-grow",children:(0,X.jsxs)("h3",{className:"text-lg font-semibold capitalize",children:[n.name,(0,X.jsxs)("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",n.type,")"]})]})}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,X.jsx)($o,{className:"h-4 w-4"})})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)($s,{onClick:()=>$(n),children:"Edit"}),(0,X.jsx)($s,{className:"text-red-600",onClick:()=>U(n),children:"Delete"})]})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mb-3",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ay,{className:"h-4 w-4 text-muted-foreground mr-2"}),(0,X.jsxs)("span",{className:"text-sm",children:["Stock: ",n.quantity]})]}),(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsxs)("span",{className:"text-sm font-semibold",children:["MRP: \u20b9",n.MRP.toFixed(2)]})}),(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsxs)("span",{className:"text-sm",children:["CP: \u20b9",n.CP.toFixed(2)]})}),(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsxs)("span",{className:"text-sm",children:["Expiry: ",n.expiryDate?(0,Go.GP)(new Date(n.expiryDate),"MMM, yyyy"):"-"]})})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)("span",{className:"text-sm text-muted-foreground mr-2",children:"Supplier:"}),(0,X.jsx)("span",{className:"text-sm capitalize",children:(null===n||void 0===n||null===(t=n.supplier)||void 0===t?void 0:t.name)||"-"})]})]})})})};return(0,X.jsxs)(k.Zp,{className:"w-full mx-auto shadow-none border-none",children:[(0,X.jsx)(k.aR,{children:(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(k.ZB,{className:"font-semibold",children:"Pharmacy Inventory"}),(0,X.jsx)(k.BT,{children:"Manage and view item information"})]}),A&&(0,X.jsx)(w.$,{variant:"outline",size:"icon",onClick:z,children:(0,X.jsx)(S.A,{className:"h-4 w-4"})})]})}),(0,X.jsxs)(k.Wu,{className:"px-4",children:[(0,X.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:space-x-2 md:space-y-0",children:[(0,X.jsxs)("div",{className:"flex w-full space-x-2",children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search items...",value:i,onChange:e=>{o(e.target.value),u(1)},className:"pl-8 w-full"})]}),A&&(0,X.jsx)(w.$,{variant:"outline",className:"shrink-0",onClick:()=>R(!O),children:(0,X.jsx)(Ho,{className:"h-4 w-4"})})]}),A?(0,X.jsx)(fd,{children:O&&(0,X.jsx)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden w-full",children:(0,X.jsx)("div",{className:"pt-2 space-y-2",children:(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All"===l?"Select type":l]})}),(0,X.jsx)(Ws,{align:"start",className:"w-[200px]",children:M.map((e=>(0,X.jsx)($s,{onClick:()=>B(e),children:e},e)))})]})})})}):(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All"===l?"Select type":l]})}),(0,X.jsx)(Ws,{children:M.map((e=>(0,X.jsx)($s,{onClick:()=>B(e),children:e},e)))})]})]}),!A&&(0,X.jsx)("div",{className:"flex space-x-2",children:(0,X.jsxs)(w.$,{variant:"outline",onClick:z,children:[(0,X.jsx)(S.A,{className:"mr-2 h-4 w-4"})," Add Item"]})})]}),0===I.length?(0,X.jsxs)("div",{className:"text-center py-12",children:[(0,X.jsx)(zB,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,X.jsx)("p",{className:"mt-4 text-lg font-medium text-muted-foreground",children:"No items found"}),(0,X.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Try adjusting your search or filter to find what you're looking for."})]}):A?(0,X.jsx)("div",{children:F.map((e=>(0,X.jsx)(V,{item:e},e._id)))}):(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Name"}),(0,X.jsx)(Wo.nd,{children:"Type"}),!P&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Wo.nd,{children:"Supplier Name"}),(0,X.jsx)(Wo.nd,{children:"CP"})]}),(0,X.jsx)(Wo.nd,{children:"MRP"}),(0,X.jsx)(Wo.nd,{children:"Stock"}),(0,X.jsx)(Wo.nd,{children:"Expiry Date"}),(0,X.jsx)(Wo.nd,{children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:F.map((e=>{var t;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"capitalize",children:e.name}),(0,X.jsx)(Wo.nA,{children:e.type}),!P&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Wo.nA,{className:"capitalize",children:(null===e||void 0===e||null===(t=e.supplier)||void 0===t?void 0:t.name)||"-"}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.CP.toFixed(2)]})]}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.MRP.toFixed(2)]}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Yo.E,{variant:e.quantity<=100?"destructive":e.quantity<=200?"secondary":"success",children:e.quantity})}),(0,X.jsx)(Wo.nA,{children:e.expiryDate?(0,Go.GP)(new Date(e.expiryDate),"MMM, yyyy"):"-"}),(0,X.jsxs)(Wo.nA,{className:"flex",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>$(e),children:(0,X.jsx)(Py,{className:"h-3 w-3"})}),(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>U(e),children:(0,X.jsx)(ky,{className:"h-3 w-3"})})]})]},e._id)}))})]})}),(0,X.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,X.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",Math.min(10*(d-1)+1,I.length)," to ",Math.min(10*d,I.length)," of ",I.length," items"]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>W("prev"),disabled:1===d,children:[(0,X.jsx)(_,{className:"h-4 w-4"}),"Previous"]}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>W("next"),disabled:d===L,children:["Next",(0,X.jsx)(ly.A,{className:"h-4 w-4"})]})]})]})]}),(0,X.jsx)(HB,{isOpen:m,onClose:()=>{h(!1),f(null)},item:p}),(0,X.jsx)(VB,{isOpen:v,onClose:()=>{g(!1)}}),(0,X.jsx)(Ce,{open:x,onOpenChange:y,children:(0,X.jsxs)(Ae,{className:"rounded-lg w-[95vw]",children:[(0,X.jsxs)(Pe,{children:[(0,X.jsxs)(Re,{children:["Delete ",null===b||void 0===b?void 0:b.name,"?"]}),(0,X.jsx)(Me,{children:"This will permanently delete the item from your inventory. This action cannot be undone."})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{children:"Cancel"}),(0,X.jsx)(Ie,{onClick:()=>{e((0,st.T$)(b._id)).unwrap().then((()=>{C(""),s({title:"Item deleted successfully",description:`${b.name} has been removed from the inventory.`,variant:"success"})})).catch((e=>{s({title:"Failed to delete item",description:e.message||"An error occurred while deleting the item.",variant:"destructive"})})).finally((()=>{y(!1)}))},disabled:"loading"===a,children:"loading"===a?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})}const GB=()=>{const{tab:e}=(0,a.g)(),t=(0,a.Zp)();return(0,X.jsx)("div",{className:"flex flex-col flex-1 mt-1 h-[calc(100vh-52px)]",children:(0,X.jsxs)(yl,{value:e||"sales",onValueChange:e=>{t(`/pharmacy/${e}`)},className:"w-full h-full",children:[(0,X.jsx)("div",{className:"overflow-x-auto pb-2 md:pb-0 scrollbar-hide",children:(0,X.jsxs)(bl,{className:"inline-flex md:flex w-max md:w-full justify-start",children:[(0,X.jsx)(jl,{value:"dashboard",children:"Dashboard"}),(0,X.jsx)(jl,{value:"sales",children:"Sales"}),(0,X.jsx)(jl,{className:"hidden md:block",value:"supplier",children:"Supplier"}),(0,X.jsx)(jl,{className:"hidden md:block",value:"purchases",children:"Purchases"}),(0,X.jsx)(jl,{value:"items-master",children:"Items Master"}),(0,X.jsx)(jl,{value:"reports",children:"Reports"})]})}),(0,X.jsx)(wl,{value:"dashboard",children:(0,X.jsx)(LB,{})}),(0,X.jsx)(wl,{value:"sales",children:(0,X.jsx)(Iy,{})}),(0,X.jsx)(wl,{value:"supplier",children:(0,X.jsx)(UB,{})}),(0,X.jsx)(wl,{value:"purchases",children:(0,X.jsx)(Fy,{})}),(0,X.jsx)(wl,{value:"reports",children:(0,X.jsx)(Gy,{})}),(0,X.jsx)(wl,{value:"items-master",children:(0,X.jsx)(qB,{})})]})})};var KB=__webpack_require__(4524);function YB(e,t){const n=()=>(0,Lc.w)(t?.in,NaN),r=t?.additionalDigits??2,a=function(e){const t={},n=e.split(XB.dateTimeDelimiter);let r;if(n.length>2)return t;/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],XB.timeZoneDelimiter.test(t.date)&&(t.date=e.split(XB.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length)));if(r){const e=XB.timezone.exec(r);e?(t.time=r.replace(e[1],""),t.timezone=e[1]):t.time=r}return t}(e);let s;if(a.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:null===s?a:100*s,restDateString:e.slice((r[1]||r[2]).length)}}(a.date,r);s=function(e,t){if(null===t)return new Date(NaN);const n=e.match(ZB);if(!n)return new Date(NaN);const r=!!n[4],a=eW(n[1]),s=eW(n[2])-1,i=eW(n[3]),o=eW(n[4]),l=eW(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,o,l)?function(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const a=r.getUTCDay()||7,s=7*(t-1)+n+1-a;return r.setUTCDate(r.getUTCDate()+s),r}(t,o,l):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(nW[t]||(rW(e)?29:28))}(t,s,i)&&function(e,t){return t>=1&&t<=(rW(e)?366:365)}(t,a)?(e.setUTCFullYear(t,s,Math.max(a,i)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!s||isNaN(+s))return n();const i=+s;let o,l=0;if(a.time&&(l=function(e){const t=e.match(JB);if(!t)return NaN;const n=tW(t[1]),r=tW(t[2]),a=tW(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,a))return NaN;return n*KB.s0+r*KB.Cg+1e3*a}(a.time),isNaN(l)))return n();if(!a.timezone){const e=new Date(i+l),n=(0,Pc.a)(0,t?.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return o=function(e){if("Z"===e)return 0;const t=e.match(QB);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,a))return NaN;return n*(r*KB.s0+a*KB.Cg)}(a.timezone),isNaN(o)?n():(0,Pc.a)(i+l+o,t?.in)}const XB={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ZB=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,JB=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,QB=/^([+-])(\d{2})(?::?(\d{2}))?$/;function eW(e){return e?parseInt(e):1}function tW(e){return e&&parseFloat(e.replace(",","."))||0}const nW=[31,null,31,30,31,30,31,31,30,31,30,31];function rW(e){return e%400===0||e%4===0&&e%100!==0}const aW=()=>{const e=(0,j.wA)(),{salesBills:n,salesBillsStatus:r}=(0,j.d4)((e=>e.pharmacy)),[a,s]=(0,t.useState)(""),[i,o]=(0,t.useState)(1),[l,c]=(0,t.useState)("All"),[d,u]=(0,t.useState)({from:null,to:null}),[m,h]=(0,t.useState)({from:null,to:null}),[p,f]=(0,t.useState)(null),[v,g]=(0,t.useState)(!1),x=Zc("(max-width: 640px)"),[y,b]=(Zc("(max-width: 1024px)"),(0,t.useState)(!1));(0,t.useEffect)((()=>{"idle"===r&&e((0,st.BS)())}),[r,e]);const N=n.filter((e=>{const t=`#B${e._id.slice(-6)}`.toLowerCase().includes(a.toLowerCase())||e.patientInfo.name.toLowerCase().includes(a.toLowerCase());let n=!0;const r=YB(e.createdAt),s=new Date;switch(l){case"Today":n=Oc(r,{start:(0,kc.o)(s),end:(0,Ac.D)(s)});break;case"Yesterday":n=Oc(r,{start:(0,kc.o)((0,Wc.e)(s,1)),end:(0,Ac.D)((0,Wc.e)(s,1))});break;case"This Week":n=Oc(r,{start:(0,Rc.k)(s),end:(0,Ac.D)(s)});break;case"Custom":d.from&&d.to&&(n=Oc(r,{start:(0,kc.o)(d.from),end:(0,Ac.D)(d.to)}))}return t&&n})),S=Math.ceil(N.length/10),E=N.slice(10*(i-1),10*i),C=e=>{"prev"===e&&i>1?o(i-1):"next"===e&&i<S&&o(i+1)},D=e=>{f(e),g(!0)},T=()=>{u(m),c("Custom")},A=()=>{h({from:null,to:null}),c("All")},P=e=>{var t;let{bill:n}=e;return(0,X.jsx)(k.Zp,{className:"mb-4 hover:shadow-md transition-shadow",children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"flex flex-col",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:`#B${n._id.slice(-6)}`}),(0,X.jsx)(Yo.E,{variant:(null===n||void 0===n?void 0:n.amountPaid)===(null===n||void 0===n?void 0:n.totalAmount)?"success":"destructive",children:(null===n||void 0===n?void 0:n.amountPaid)===(null===n||void 0===n?void 0:n.totalAmount)?"Paid":"Due"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mb-3",children:[(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsx)("span",{className:"text-sm font-semibold capitalize",children:n.patientInfo.name})}),(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsxs)("span",{className:"text-sm",children:["\u20b9",n.totalAmount.toFixed(2)]})}),(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsx)("span",{className:"text-sm",children:(0,Go.GP)(new Date(n.createdAt),"MMM dd, hh:mm a")})}),(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsx)("span",{className:"text-sm",children:(null===n||void 0===n||null===(t=n.payment)||void 0===t?void 0:t.paymentMethod)||"__"})})]}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>D(n),className:"w-full mt-2",children:[(0,X.jsx)(ei,{className:"h-3 w-3 mr-2"})," View Details"]})]})})})};return(0,X.jsxs)(k.Zp,{className:"w-full mx-auto",children:[(0,X.jsxs)(k.aR,{children:[(0,X.jsx)(k.ZB,{className:"font-semibold",children:"Pharmacy All Bills"}),(0,X.jsx)(k.BT,{children:"View and manage all pharmacy bills"})]}),(0,X.jsxs)(k.Wu,{children:[(0,X.jsx)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 space-y-2 md:space-y-0",children:(0,X.jsxs)("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:space-x-2 md:space-y-0",children:[(0,X.jsxs)("div",{className:"flex w-full space-x-2",children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search bills...",value:a,onChange:e=>{s(e.target.value),o(1)},className:"pl-8 w-full"})]}),x&&(0,X.jsx)(w.$,{variant:"outline",className:"shrink-0",onClick:()=>b(!y),children:(0,X.jsx)(Ho,{className:"h-4 w-4"})})]}),x?(0,X.jsx)(fd,{children:y&&(0,X.jsx)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden w-full",children:(0,X.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),"All"===l?"All Time":l]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Time Filter Options"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>c("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>c("Yesterday"),children:"Yesterday"}),(0,X.jsx)($s,{onSelect:()=>c("This Week"),children:"This Week"}),(0,X.jsx)($s,{onSelect:()=>c("All"),children:"All Time"}),(0,X.jsx)($s,{onSelect:()=>c("Custom"),children:"Custom Range"})]})]}),"Custom"===l&&(0,X.jsx)(sW,{from:m.from,to:m.to,onSelect:e=>h(e),onSearch:T,onCancel:A})]})})}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),"All"===l?"All Time":l]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Time Filter Options"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>c("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>c("Yesterday"),children:"Yesterday"}),(0,X.jsx)($s,{onSelect:()=>c("This Week"),children:"This Week"}),(0,X.jsx)($s,{onSelect:()=>c("All"),children:"All Time"}),(0,X.jsx)($s,{onSelect:()=>c("Custom"),children:"Custom Range"})]})]}),"Custom"===l&&(0,X.jsx)(sW,{from:m.from,to:m.to,onSelect:e=>h(e),onSearch:T,onCancel:A})]})]})}),N.length>0?(0,X.jsxs)(X.Fragment,{children:[x?(0,X.jsx)("div",{children:E.map((e=>(0,X.jsx)(P,{bill:e},e._id)))}):(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Bill No"}),(0,X.jsx)(Wo.nd,{children:"Customer"}),(0,X.jsx)(Wo.nd,{children:"Date & Time"}),(0,X.jsx)(Wo.nd,{children:"Amount"}),(0,X.jsx)(Wo.nd,{children:"Status"}),(0,X.jsx)(Wo.nd,{children:"Method"}),(0,X.jsx)(Wo.nd,{children:"Action"})]})}),(0,X.jsx)(Wo.BF,{children:E.map((e=>{var t;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:`#B${e._id.slice(-6)}`}),(0,X.jsx)(Wo.nA,{className:"capitalize",children:e.patientInfo.name}),(0,X.jsx)(Wo.nA,{children:(0,Go.GP)(new Date(e.createdAt),"MMM dd, hh:mm a")}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",e.totalAmount.toFixed(2)]}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Yo.E,{variant:(null===e||void 0===e?void 0:e.amountPaid)===(null===e||void 0===e?void 0:e.totalAmount)?"success":"destructive",children:(null===e||void 0===e?void 0:e.amountPaid)===(null===e||void 0===e?void 0:e.totalAmount)?"Paid":"Due"})}),(0,X.jsx)(Wo.nA,{children:(null===e||void 0===e||null===(t=e.payment)||void 0===t?void 0:t.paymentMethod)||"__"}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>D(e),children:(0,X.jsx)(ei,{className:"h-3 w-3 mr-2"})})})]},e._id)}))})]})}),(0,X.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,X.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",Math.min(10*(i-1)+1,N.length)," to"," ",Math.min(10*i,N.length)," of ",N.length," bills"]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>C("prev"),disabled:1===i,children:[(0,X.jsx)(_,{className:"h-4 w-4"}),!x&&"Previous"]}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>C("next"),disabled:i===S,children:[!x&&"Next",(0,X.jsx)(ly.A,{className:"h-4 w-4"})]})]})]})]}):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,X.jsx)(Xc,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,X.jsx)("p",{className:"text-lg font-medium text-muted-foreground",children:"No bills found"}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your search or filter criteria"})]})]}),(0,X.jsx)(Ny,{isOpen:v,setIsOpen:g,billData:p})]})},sW=e=>{let{from:n,to:r,onSelect:a,onSearch:s,onCancel:i}=e;const[o,l]=(0,t.useState)(!1),c=new Date,d=(0,sy.a)(c,1);return(0,X.jsx)("div",{className:(0,Ee.cn)("grid gap-2"),children:(0,X.jsxs)(ko.AM,{open:o,onOpenChange:l,children:[(0,X.jsx)(ko.Wv,{asChild:!0,children:(0,X.jsxs)(w.$,{id:"date",variant:"outline",className:(0,Ee.cn)("w-[300px] justify-start text-left font-normal",!n&&"text-muted-foreground"),children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),n?r?(0,X.jsxs)(X.Fragment,{children:[(0,Go.GP)(n,"LLL dd, y")," - ",(0,Go.GP)(r,"LLL dd, y")]}):(0,Go.GP)(n,"LLL dd, y"):(0,X.jsx)("span",{children:"Pick a date range"})]})}),(0,X.jsxs)(ko.hl,{className:"w-auto p-0",align:"start",children:[(0,X.jsx)(Gg.V,{initialFocus:!0,mode:"range",defaultMonth:d,selected:{from:n,to:r},onSelect:a,numberOfMonths:2,disabled:e=>(0,Hy.Y)(c,e),toDate:c}),(0,X.jsxs)("div",{className:"flex justify-end gap-2 p-2",children:[(0,X.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>{i(),l(!1)},children:"Cancel"}),(0,X.jsx)(w.$,{size:"sm",onClick:()=>{s(),l(!1)},children:"Search"})]})]})]})})};function iW(){var e,n,r,s,i,o,l,c,d,u,m;const{toast:h}=(0,H.dj)(),p=(0,j.wA)(),f=(0,a.Zp)(),v=(0,a.zy)(),{staffId:g}=(0,a.g)(),{status:x,error:y}=(0,j.d4)((e=>e.staff)),{userData:b}=(0,j.d4)((e=>e.user)),N=(0,j.d4)((e=>e.departments.departments)),E={roles:[],permissions:[],name:"",username:"",password:"",employeeID:"",aadharNumber:"",contactNumber:"",email:"",dateOfBirth:"",gender:"",hireDate:"",yearsOfExperience:"",shift:{type:"",hours:{start:"",end:""}},salary:"",payrollInfo:{bankName:"",accountNumber:"",ifscCode:""},department:[],qualifications:[],certifications:[],address:""},[C,D]=(0,t.useState)(E),[k,P]=(0,t.useState)(!1),[O,R]=(0,t.useState)({}),[I,L]=(0,t.useState)(""),[W,$]=(0,t.useState)(""),U=null===(e=b.permissions)||void 0===e?void 0:e.includes("create_staff"),z=null===(n=b.permissions)||void 0===n?void 0:n.includes("edit_staff"),V=()=>{D(JSON.parse(JSON.stringify(E))),R({}),L(""),$("")};(0,t.useEffect)((()=>{}),[C]),(0,t.useEffect)((()=>{var e,t;if(null!==(e=v.state)&&void 0!==e&&e.editMode&&null!==(t=v.state)&&void 0!==t&&t.staffData){if(!z)return h({variant:"destructive",title:"Access Denied",description:"You don't have permission to edit staff members."}),void f(-1);P(!0),D(v.state.staffData)}else if(g)P(!0);else{if(!U)return h({variant:"destructive",title:"Access Denied",description:"You don't have permission to create staff members."}),void f(-1);P(!1),V()}}),[]);const q=e=>{const{id:t,value:n}=e.target,r=t.split(".");if(2===r.length){const[e,r]=t.split(".");D((t=>({...t,[e]:{...t[e],[r]:n}})))}else 3===r.length?D((e=>({...e,[r[0]]:{...e[r[0]],[r[1]]:{...e[r[0]][r[1]],[r[2]]:n}}}))):D((e=>({...e,[t]:n})))},G=(e,t)=>{if(e.includes(".")){const[n,r]=e.split(".");D((e=>({...e,[n]:{...e[n],[r]:t}})))}else D({...C,[e]:t})},K=(e,t)=>{D((n=>({...n,permissions:t?[...n.permissions||[],e]:(n.permissions||[]).filter((t=>t!==e))})))},Y=(e,t)=>{const n=e.map((e=>e.id));D((e=>{const r=new Set(e.permissions||[]);return n.forEach((e=>{t?r.add(e):r.delete(e)})),{...e,permissions:Array.from(r)}}))};return U||k?k&&!z?(h({variant:"destructive",title:"Access Denied",description:"You don't have permission to edit staff members."}),f(-1),null):(0,X.jsxs)("div",{className:"max-w-[1200px] mx-auto p-4",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,X.jsx)(w.$,{onClick:()=>f(-1),variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsxs)("h2",{className:"text-xl font-bold",children:[k?"Edit":"Add New"," Staff Member"]})]}),(0,X.jsxs)("p",{className:"text-gray-600 mb-4",children:["Fill in the details of the ",k?"existing":"new"," staff member"]}),(0,X.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{var e;const t={};return C.name.trim()||(t.name="Name is required"),null!==(e=C.roles)&&void 0!==e&&e.includes("admin")&&!C.username.trim()&&(t.username="Username is required for admin"),C.roles&&0!==C.roles.length||(t.roles="At least one role is required"),R(t),0===Object.keys(t).length})())try{const e=Object.entries(C).reduce(((e,t)=>{let[n,r]=t;if(k){var a,s;if("shift"===n)(r.type||null!==(a=r.hours)&&void 0!==a&&a.start||null!==(s=r.hours)&&void 0!==s&&s.end)&&(e[n]=r);else if("payrollInfo"===n){Object.values(r).some((e=>""!==e.trim()))&&(e[n]=r)}else e[n]=r;return e}var i,o;if("shift"===n)return r.type&&null!==(i=r.hours)&&void 0!==i&&i.start&&null!==(o=r.hours)&&void 0!==o&&o.end&&(e[n]=r),e;if("payrollInfo"===n){const t=Object.entries(r).reduce(((e,t)=>{let[n,r]=t;return r&&""!==r.trim()&&(e[n]=r),e}),{});return Object.keys(t).length>0&&(e[n]=t),e}return Array.isArray(r)?(r.length>0&&(e[n]=r),e):"string"===typeof r?(""!==r.trim()&&(e[n]=r),e):(null!==r&&void 0!==r&&""!==r&&(e[n]=r),e)}),{});k?(await p(B({id:C._id,data:e})).unwrap(),h({variant:"success",title:"Staff Updated",description:"Staff member has been updated successfully."})):(await p(F(e)).unwrap(),h({variant:"success",title:"Staff Added",description:"Staff member has been added successfully."})),f("/staff")}catch(y){h({title:"Error",description:y||`Failed to ${k?"update":"add"} staff member. Please try again.`,variant:"destructive"})}},children:[(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 md:col-span-2 lg:col-span-3 gap-4",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"name",children:"Full Name"}),(0,X.jsx)(Vn.p,{id:"name",value:C.name,onChange:q}),O.name&&(0,X.jsx)("span",{className:"text-red-500 text-sm",children:O.name})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"username",children:"Username"}),(0,X.jsx)(Vn.p,{id:"username",value:C.username,onChange:q}),O.username&&(0,X.jsx)("span",{className:"text-red-500 text-sm",children:O.username})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"password",children:"Password"}),(0,X.jsx)(Vn.p,{id:"password",type:"password",value:C.password,onChange:q}),O.password&&(0,X.jsx)("span",{className:"text-red-500 text-sm",children:O.password})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"employeeID",children:"Employee ID"}),(0,X.jsx)(Vn.p,{id:"employeeID",value:C.employeeID,onChange:q})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"aadharNumber",children:"Aadhar Number"}),(0,X.jsx)(Vn.p,{id:"aadharNumber",value:C.aadharNumber,onChange:q,maxLength:12,placeholder:"Enter 12-digit Aadhar number"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"contactNumber",children:"Contact Number"}),(0,X.jsx)(Vn.p,{id:"contactNumber",value:C.contactNumber,onChange:q})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"email",children:"Email"}),(0,X.jsx)(Vn.p,{id:"email",type:"email",value:C.email,onChange:q}),O.email&&(0,X.jsx)("span",{className:"text-red-500 text-sm",children:O.email})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"dateOfBirth",children:"Date of Birth"}),(0,X.jsx)(Vn.p,{id:"dateOfBirth",type:"date",value:C.dateOfBirth,onChange:q})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"gender",children:"Gender"}),(0,X.jsxs)(A.l6,{onValueChange:e=>G("gender",e),children:[(0,X.jsx)(A.bq,{children:(0,X.jsx)(A.yv,{placeholder:"Select gender"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Male",children:"Male"}),(0,X.jsx)(A.eb,{value:"Female",children:"Female"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"hireDate",children:"Hire Date"}),(0,X.jsx)(Vn.p,{id:"hireDate",type:"date",value:C.hireDate,onChange:q})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"yearsOfExperience",children:"Years of Experience"}),(0,X.jsx)(Vn.p,{id:"yearsOfExperience",type:"number",value:C.yearsOfExperience,onChange:q})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"shift.type",children:"Shift Type"}),(0,X.jsxs)(A.l6,{onValueChange:e=>G("shift.type",e),children:[(0,X.jsx)(A.bq,{children:(0,X.jsx)(A.yv,{placeholder:"Select shift type"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Morning",children:"Morning"}),(0,X.jsx)(A.eb,{value:"Afternoon",children:"Afternoon"}),(0,X.jsx)(A.eb,{value:"Night",children:"Night"}),(0,X.jsx)(A.eb,{value:"Rotating",children:"Rotating"})]})]})]}),(0,X.jsxs)("div",{className:"sm:col-span-2 md:col-span-1",children:[(0,X.jsx)(Ks.J,{children:"Shift Hours"}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"shift.hours.start",children:"Start Time"}),(0,X.jsx)(Vn.p,{id:"shift.hours.start",type:"time",value:null===C||void 0===C||null===(r=C.shift)||void 0===r||null===(s=r.hours)||void 0===s?void 0:s.start,onChange:q})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"shift.hours.end",children:"End Time"}),(0,X.jsx)(Vn.p,{id:"shift.hours.end",type:"time",value:null===C||void 0===C||null===(i=C.shift)||void 0===i||null===(o=i.hours)||void 0===o?void 0:o.end,onChange:q})]})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"salary",children:"Salary"}),(0,X.jsx)(Vn.p,{id:"salary",type:"number",value:C.salary,onChange:q})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"payrollInfo.bankName",children:"Bank Name"}),(0,X.jsx)(Vn.p,{id:"payrollInfo.bankName",value:null===C||void 0===C||null===(l=C.payrollInfo)||void 0===l?void 0:l.bankName,onChange:q})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"payrollInfo.accountNumber",children:"Account Number"}),(0,X.jsx)(Vn.p,{id:"payrollInfo.accountNumber",value:null===C||void 0===C||null===(c=C.payrollInfo)||void 0===c?void 0:c.accountNumber,onChange:q})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"payrollInfo.ifscCode",children:"IFSC Code"}),(0,X.jsx)(Vn.p,{id:"payrollInfo.ifscCode",value:null===C||void 0===C||null===(d=C.payrollInfo)||void 0===d?void 0:d.ifscCode,onChange:q})]})]}),(0,X.jsxs)("div",{className:"flex flex-col gap-4 md:col-span-1",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{children:"Roles"}),(0,X.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["pharmacist","admin","nurse","receptionist","doctor","technician","lab technician","manager","accountant"].map((e=>{var t,n,r;return(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{id:e,checked:null===(t=C.roles)||void 0===t?void 0:t.includes(e),onCheckedChange:t=>((e,t)=>{const n=C.roles||[],r=t?[...n,e]:null===n||void 0===n?void 0:n.filter((t=>t!==e));D({...C,roles:r})})(e,t)}),(0,X.jsx)("label",{htmlFor:e,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:null===(n=e.split(" "))||void 0===n||null===(r=n.map((e=>{var t;return(null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase())+e.slice(1)})))||void 0===r?void 0:r.join(" ")})]},e)}))}),O.roles&&(0,X.jsx)("span",{className:"text-red-500 text-sm",children:O.roles})]}),(0,X.jsx)("div",{}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{children:"Departments"}),(0,X.jsx)("div",{className:"grid grid-cols-2 gap-2",children:null===N||void 0===N?void 0:N.map((e=>e.name)).map((e=>{var t;return(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{id:`department-${e}`,checked:null===(t=C.department)||void 0===t?void 0:t.includes(e),onCheckedChange:t=>((e,t)=>{const n=C.department||[],r=t?[...n,e]:null===n||void 0===n?void 0:n.filter((t=>t!==e));D({...C,department:r})})(e,t)}),(0,X.jsx)("label",{htmlFor:`department-${e}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e})]},e)}))})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"qualifications",children:"Qualifications"}),(0,X.jsx)("ul",{className:"list-disc pl-5 mb-2",children:null===(u=C.qualifications)||void 0===u?void 0:u.map(((e,t)=>(0,X.jsxs)("li",{className:"flex items-center justify-between",children:[(0,X.jsx)("span",{children:e}),(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{const t=C.qualifications.filter(((t,n)=>n!==e));D({...C,qualifications:t})})(t),children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})]},t)))}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(Vn.p,{value:I,onChange:e=>L(e.target.value),placeholder:"Add new qualification"}),(0,X.jsx)(w.$,{type:"button",onClick:()=>{I.trim()&&(D((e=>({...e,qualifications:[...e.qualifications||[],I.trim()]}))),L(""))},size:"sm",children:(0,X.jsx)(S.A,{className:"h-4 w-4"})})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"certifications",children:"Certifications"}),(0,X.jsx)("ul",{className:"list-disc pl-5 mb-2",children:null===(m=C.certifications)||void 0===m?void 0:m.map(((e,t)=>(0,X.jsxs)("li",{className:"flex items-center justify-between",children:[(0,X.jsx)("span",{children:e}),(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>(e=>{const t=C.certifications.filter(((t,n)=>n!==e));D({...C,certifications:t})})(t),children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})]},t)))}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(Vn.p,{value:W,onChange:e=>$(e.target.value),placeholder:"Add new certification"}),(0,X.jsx)(w.$,{type:"button",onClick:()=>{W.trim()&&(D((e=>({...e,certifications:[...e.certifications||[],W.trim()]}))),$(""))},size:"sm",children:(0,X.jsx)(S.A,{className:"h-4 w-4"})})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"address",children:"Address"}),(0,X.jsx)(Xo.T,{id:"address",value:C.address,onChange:q})]})]})]}),(()=>{var e,t;return(0,X.jsx)("div",{className:"space-y-6 bg-gray-50 p-4 rounded-lg",children:(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Staff Permissions"}),(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,X.jsx)("div",{className:"space-y-6",children:(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-semibold text-gray-700",children:"Patient Management"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Y(M.aj["Patient Management"],!0),className:"h-7 px-2 text-xs",children:"Select All"})]}),(0,X.jsx)("div",{className:"space-y-2 grid grid-cols-2",children:M.aj["Patient Management"].map((e=>(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{id:e.id,checked:(C.permissions||[]).includes(e.id),onCheckedChange:t=>K(e.id,t)}),(0,X.jsx)("label",{htmlFor:e.id,className:"text-sm",children:e.label})]},e.id)))}),(0,X.jsx)(Mo,{className:"my-4"})]})}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-semibold text-gray-700",children:"Inventory Management"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Y(M.aj["Inventory Management"],!0),className:"h-7 px-2 text-xs",children:"Select All"})]}),(0,X.jsx)("div",{className:"space-y-2",children:M.aj["Inventory Management"].map((e=>(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{id:e.id,checked:(C.permissions||[]).includes(e.id),onCheckedChange:t=>K(e.id,t)}),(0,X.jsx)("label",{htmlFor:e.id,className:"text-sm",children:e.label})]},e.id)))}),(0,X.jsx)(Mo,{className:"my-4"})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-semibold text-gray-700",children:"Hospital Management"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Y(M.aj["Hospital Management"],!0),className:"h-7 px-2 text-xs",children:"Select All"})]}),(0,X.jsx)("div",{className:"space-y-2 grid grid-cols-2",children:M.aj["Hospital Management"].map((e=>(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{id:e.id,checked:(C.permissions||[]).includes(e.id),onCheckedChange:t=>K(e.id,t)}),(0,X.jsx)("label",{htmlFor:e.id,className:"text-sm",children:e.label})]},e.id)))}),(0,X.jsx)(Mo,{className:"my-4"})]}),(0,X.jsxs)("div",{className:"space-y-2 ",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-semibold text-gray-700",children:"Financial Management"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Y(M.aj["Financial Management"],!0),className:"h-7 px-2 text-xs",children:"Select All"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 space-y-2",children:[M.aj["Financial Management"].map((e=>(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{id:e.id,checked:(C.permissions||[]).includes(e.id),onCheckedChange:t=>K(e.id,t)}),(0,X.jsx)("label",{htmlFor:e.id,className:"text-sm",children:e.label})]},e.id))),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{id:"delete_payments",checked:(C.permissions||[]).includes("delete_payments"),onCheckedChange:e=>K("delete_payments",e)}),(0,X.jsx)("label",{htmlFor:"delete_payments",className:"text-sm",children:"Delete Payments"})]},"delete_payments")]}),(0,X.jsx)("div",{className:"grid grid-cols-2 space-y-2",children:null===(e=M.aj["Expense/Return"])||void 0===e?void 0:e.map((e=>(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{id:e.id,checked:(C.permissions||[]).includes(e.id),onCheckedChange:t=>K(e.id,t)}),(0,X.jsx)("label",{htmlFor:e.id,className:"text-sm",children:e.label})]},e.id)))})]}),(0,X.jsxs)("div",{className:"space-y-6",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-semibold text-gray-700",children:"Staff Management"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Y(M.aj["Staff Management"],!0),className:"h-7 px-2 text-xs",children:"Select All"})]}),(0,X.jsx)("div",{className:"space-y-2 grid grid-cols-2",children:M.aj["Staff Management"].map((e=>(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{id:e.id,checked:(C.permissions||[]).includes(e.id),onCheckedChange:t=>K(e.id,t)}),(0,X.jsx)("label",{htmlFor:e.id,className:"text-sm",children:e.label})]},e.id)))}),(0,X.jsx)(Mo,{className:"my-4"})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-semibold text-gray-700",children:"Doctor Section"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Y(M.aj["Doctor Section"],!0),className:"h-7 px-2 text-xs",children:"Select All"})]}),(0,X.jsx)("div",{className:"space-y-2",children:null===(t=M.aj["Doctor Section"])||void 0===t?void 0:t.map((e=>(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{id:e.id,checked:(C.permissions||[]).includes(e.id),onCheckedChange:t=>K(e.id,t)}),(0,X.jsx)("label",{htmlFor:e.id,className:"text-sm",children:e.label})]},e.id)))}),(0,X.jsx)(Mo,{className:"my-4"})]})]})]})]})})})(),(0,X.jsxs)("div",{className:"mt-4 flex justify-end space-x-4",children:[(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:()=>{V()},children:"Reset"}),(0,X.jsx)(w.$,{type:"submit",disabled:"loading"===x,children:"loading"===x?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}),k?"Updating...":"Adding..."]}):k?"Update Staff":"Add Staff"})]})]})]}):(h({variant:"destructive",title:"Access Denied",description:"You don't have permission to create staff members."}),f(-1),null)}const oW=[{name:"wbc",label:"White Blood Cell Count (WBC)",unit:"10^3/\xb5L",value:""},{name:"rbc",label:"Red Blood Cell Count (RBC)",unit:"10^6/\xb5L",value:""},{name:"hemoglobin",label:"Hemoglobin",unit:"g/dL",value:""},{name:"hematocrit",label:"Hematocrit",unit:"%",value:""},{name:"platelets",label:"Platelet Count",unit:"10^3/\xb5L",value:""},{name:"mcv",label:"Mean Corpuscular Volume (MCV)",unit:"fL",value:""},{name:"mch",label:"Mean Corpuscular Hemoglobin (MCH)",unit:"pg",value:""},{name:"mchc",label:"Mean Corpuscular Hemoglobin Concentration (MCHC)",unit:"g/dL",value:""},{name:"neutrophils",label:"Neutrophils",unit:"%",value:""},{name:"lymphocytes",label:"Lymphocytes",unit:"%",value:""},{name:"monocytes",label:"Monocytes",unit:"%",value:""},{name:"eosinophils",label:"Eosinophils",unit:"%",value:""},{name:"basophils",label:"Basophils",unit:"%",value:""},{name:"glucose",label:"Glucose",unit:"mg/dL",value:""},{name:"creatinine",label:"Creatinine",unit:"mg/dL",value:""}],lW=()=>{const[e,n]=(0,t.useState)(oW),[r,a]=(0,t.useState)({name:"",label:"",unit:"",value:""});return(0,X.jsxs)("div",{className:"container mx-auto p-4 max-w-3xl",children:[(0,X.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Create Blood Work Report"}),(0,X.jsx)(k.Zp,{className:"p-6",children:(0,X.jsxs)("form",{onSubmit:e=>{e.preventDefault()},className:"space-y-6",children:[(0,X.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map((t=>(0,X.jsxs)("div",{className:"flex flex-col",children:[(0,X.jsx)(Ks.J,{htmlFor:t.name,className:"mb-1",children:t.label}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Vn.p,{type:"number",id:t.name,name:t.name,value:t.value,onChange:e=>((e,t)=>{const{value:r}=e.target;n((e=>e.map((e=>e.name===t?{...e,value:r}:e))))})(e,t.name),className:"mr-2",step:"0.01"}),(0,X.jsx)("span",{className:"text-sm text-gray-500 w-16",children:t.unit}),!oW.some((e=>e.name===t.name))&&(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>{return r=t.name,void n(e.filter((e=>e.name!==r)));var r},children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})]})]},t.name)))}),(0,X.jsxs)("div",{className:"border-t pt-4",children:[(0,X.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Add Custom Field"}),(0,X.jsxs)("div",{className:"flex space-x-2",children:[(0,X.jsx)(Vn.p,{placeholder:"Field Name",value:r.name,onChange:e=>a({...r,name:e.target.value})}),(0,X.jsx)(Vn.p,{placeholder:"Label",value:r.label,onChange:e=>a({...r,label:e.target.value})}),(0,X.jsx)(Vn.p,{placeholder:"Unit",value:r.unit,onChange:e=>a({...r,unit:e.target.value})}),(0,X.jsxs)(w.$,{type:"button",onClick:()=>{r.name&&r.label&&r.unit&&(n([...e,{...r,value:""}]),a({name:"",label:"",unit:"",value:""}))},children:[(0,X.jsx)(ex.A,{className:"h-4 w-4 mr-2"})," Add"]})]})]}),(0,X.jsx)(w.$,{type:"submit",className:"w-full",children:"Save Blood Work Report"})]})})]})};var cW=__webpack_require__(5872),dW=__webpack_require__(8739);const uW={page:{pageBreakInside:"auto",pageBreakAfter:"auto",pageBreakBefore:"auto"},header:{pageBreakInside:"avoid",pageBreakAfter:"avoid",breakInside:"avoid-page"},reportTitle:{pageBreakAfter:"avoid",breakAfter:"avoid-page"},tableHeader:{pageBreakAfter:"avoid",breakAfter:"avoid-page"},tableRow:{pageBreakInside:"avoid",breakInside:"avoid-page"},sectionTitle:{pageBreakAfter:"avoid",breakAfter:"avoid-page"},footer:{position:"fixed",bottom:"10mm",left:"10mm",right:"10mm",backgroundColor:"white"}},mW=(0,t.forwardRef)(((e,n)=>{const{reportsData:r,patientData:a,hospital:s}=e,i=(0,j.d4)((e=>e.templates.headerTemplateArray)),o=(0,j.d4)((e=>e.templates.mergeTemplate)),l=(null===i||void 0===i?void 0:i.length)>0?i[0].value:Kn.h,c=o||dW.W,d=(0,Gn.G)(l||Kn.h),u=new Function("React","HospitalHeader","styles",`return ${c};`);try{var m;return u(t,d,uW)(r,{...a,age:(0,M.F1)((null===(m=a.patient)||void 0===m?void 0:m.age)||a.age)},s,n)}catch(h){return console.error("Error rendering merged lab report:",h),t.createElement("div",null,"Error rendering merged lab report template")}})),hW=()=>{var e,n;const r=(0,a.zy)(),s=(0,j.wA)(),{toast:i}=(0,H.dj)(),{labTestsTemplate:o,status:l,error:c}=(0,j.d4)((e=>e.templates)),d=(0,a.Zp)(),u=(0,j.d4)((e=>e.hospital.hospitalInfo)),[m,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(null),[v,g]=(0,t.useState)(null),[x,y]=(0,t.useState)(null),[N,_]=(0,t.useState)([]),[S,E]=(0,t.useState)(!1),[C,D]=(0,t.useState)(!0),T=(0,t.useRef)(null),A=(0,qn.useReactToPrint)({content:()=>T.current,onBeforeGetContent:()=>new Promise((e=>{setTimeout(e,250)}))});(0,t.useEffect)((()=>{"idle"===l&&s((0,R.QK)())}),[l,s]),(0,t.useEffect)((()=>{var e;null!==(e=r.state)&&void 0!==e&&e.patientData&&f(r.state.patientData)}),[r.state]);const P=t.useMemo((()=>{if(null===p||void 0===p||!p.labTests)return m?(o||[]).filter((e=>e.name.toLowerCase().includes(m.toLowerCase()))):[];const e=new Set(p.labTests.map((e=>e.name.toLowerCase())));let t=(o||[]).filter((t=>e.has(t.name.toLowerCase())));return m&&(t=t.filter((e=>e.name.toLowerCase().includes(m.toLowerCase())))),t}),[o,p,m]),O=e=>{switch(e){case"Completed":return"text-green-600";case"Sample Collected":return"text-[#f5a158]";case"Registered":return"text-[#b51616]";default:return"text-black-600"}};return(0,X.jsxs)("div",{className:"container mx-auto p-4 flex h-[calc(100vh-55px)]",children:[(0,X.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 w-full h-full",children:[(0,X.jsxs)("div",{className:"w-full md:w-1/3 flex flex-col h-full border-r border-gray-200 pr-2",children:[(0,X.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>d(-1),children:(0,X.jsx)(Uo.A,{className:"h-5 w-5"})}),(0,X.jsx)("div",{className:"text-sm font-bold",children:"Laboratory Reports"})]}),p&&(0,X.jsxs)("div",{className:(0,Ee.cn)("mb-4 p-2 bg-white rounded-lg border border-gray-200"),children:[(0,X.jsxs)("div",{className:"flex items-baseline text-sm justify-between cursor-pointer",onClick:()=>D(!C),children:[(0,X.jsxs)("div",{className:" font-semibold",children:["Name: ",p.patientName]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsxs)("div",{className:"text-gray-600 font-semibold",children:["Lab No: ",p.labNumber]}),(0,X.jsx)(Vg.div,{animate:{rotate:C?180:0},transition:{duration:.2},children:(0,X.jsx)(lo,{className:(0,Ee.cn)("h-5 w-5 transition-colors duration-200",C?"text-blue-500":"text-gray-400")})})]})]}),(0,X.jsx)(fd,{children:C&&(0,X.jsx)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,X.jsx)("div",{className:"mt-2 text-sm font-bold pt-2 border-t border-blue-200",children:(0,X.jsx)("ul",{className:"list-disc list-inside",children:p.labTests.map(((e,t)=>(0,X.jsxs)("li",{className:`${O(e.reportStatus)} `,children:[e.name,(0,X.jsxs)("span",{className:"text-gray-500 text-sm ml-2",children:["(",e.reportStatus,")"]})]},t)))})})})})]}),(0,X.jsx)(Vn.p,{type:"text",placeholder:"Search for lab test...",value:m,onChange:e=>h(e.target.value),className:"mb-4"}),(0,X.jsx)(b.F,{className:"flex-grow",children:(0,X.jsx)("div",{className:" space-y-4",children:"succeeded"===l&&P&&(0,X.jsxs)("div",{className:"mb-4",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,X.jsx)("h2",{className:"text-lg font-bold",children:"Templates"}),(null===p||void 0===p||null===(e=p.labTests)||void 0===e?void 0:e.length)>0&&(0,X.jsxs)("div",{className:"flex gap-2",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>E(!S),className:"text-[13px] px-4 py-1 h-auto",children:S?"Cancel Merge":"Select Reports"}),S&&(0,X.jsx)(w.$,{onClick:A,className:"text-[13px] px-4 py-1 h-auto",children:"Merge & Print"})]})]}),(0,X.jsx)("div",{className:"space-y-2",children:P.map((e=>{var t,n;const r=N.some((t=>{var n,r;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())})),a=null===p||void 0===p||null===(t=p.labReports)||void 0===t?void 0:t.some((t=>{var n,r;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===(null===e||void 0===e||null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}));return(0,X.jsx)(k.Zp,{className:"cursor-pointer hover:bg-gray-50 transition-colors p-0 "+(null!==p&&void 0!==p&&null!==(n=p.labTests)&&void 0!==n&&n.some((t=>t.name.toLowerCase()===e.name.toLowerCase()))?"border-2 border-blue-500":""),children:(0,X.jsxs)(k.aR,{className:"flex flex-row items-center justify-between space-y-0 p-3",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(k.ZB,{className:"text-[14px] uppercase",children:null===e||void 0===e?void 0:e.name}),(0,X.jsxs)("span",{className:"text-gray-500 text-xs",children:["(",Object.keys((null===e||void 0===e?void 0:e.fields)||{}).length," fields)"]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[!S&&(0,X.jsx)(w.$,{className:"p-1 text-[12px] h-auto "+(a?"bg-green-600 hover:bg-green-700":""),onClick:()=>(e=>{y(e),g(null)})(e),children:a?"View Report":"Create Report"}),a&&S&&(0,X.jsx)(zl,{checked:r,onCheckedChange:()=>((e,t)=>{_((n=>n.some((t=>t.name===e.name))?n.filter((t=>t.name!==e.name)):[...n,{...e,sections:t.sections}]))})(p.labReports.find((t=>{var n,r;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===(null===e||void 0===e||null===(r=e.name)||void 0===r?void 0:r.toLowerCase())})),e)})]})]})},e._id)}))})]})})})]}),(0,X.jsx)("div",{className:"w-full md:w-2/3 h-full",children:(0,X.jsx)(b.F,{className:"h-full",children:(0,X.jsx)("div",{className:"pr-4",children:x?(0,X.jsx)(cW.A,{template:x,patientData:p,onClose:()=>y(null),searchWhere:null===p||void 0===p||null===(n=p.type)||void 0===n?void 0:n.toLowerCase(),onSave:(e,t)=>{f((n=>{const r=n.labReports||[],a=r.findIndex((t=>t.name===e.name&&new Date(t.date).toDateString()===new Date(e.date).toDateString())),s=[...r];return-1!==a?s[a]=e:s.push(e),{...n,...t,labReports:s}}))}}):(0,X.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,X.jsx)("p",{className:"text-xl text-gray-500",children:"Select a lab test or template to begin"})})})})})]}),(0,X.jsx)("div",{className:"max-w-[210mm] hidden mx-auto bg-white shadow-lg print:shadow-none print:block print:mx-0",children:(0,X.jsx)("div",{ref:T,children:(0,X.jsx)(mW,{reportsData:N,patientData:p,hospital:u})})})]})};var pW=__webpack_require__(8145);const fW=(0,N.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),vW=e=>{let{label:t,name:n,value:r,onChange:a,type:s="text",required:i=!1,disabled:o=!1}=e;return(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:n,className:"text-sm font-medium",children:t}),(0,X.jsx)(Vn.p,{id:n,name:n,type:s,value:r,onChange:a,placeholder:`Enter ${t.toLowerCase()}`,required:i,disabled:o,className:"w-full"})]})},gW=e=>{let{label:t,name:n,value:r,onChange:a,required:s=!1}=e;return(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:n,className:"text-sm font-medium",children:t}),(0,X.jsx)(Xo.T,{id:n,name:n,value:r,onChange:a,placeholder:`Enter ${t.toLowerCase()}`,required:s,className:"w-full"})]})},xW=e=>{let{label:t,categories:n,newCategory:r,setNewCategory:a,onAdd:s,onRemove:i}=e;return(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-medium",children:t}),(0,X.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,X.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s()},className:"flex space-x-2",children:[(0,X.jsx)(Vn.p,{value:r,onChange:e=>a(e.target.value),placeholder:"Enter a new category",className:"flex-grow"}),(0,X.jsx)(w.$,{type:"submit",disabled:!r.trim(),children:(0,X.jsx)(S.A,{size:16})})]}),(0,X.jsx)(b.F,{className:"h-[150px] w-full border rounded-md p-4",children:(null===n||void 0===n?void 0:n.length)>0?(0,X.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map(((e,t)=>(0,X.jsxs)(Yo.E,{variant:"secondary",className:"text-sm py-1 px-2 flex items-center space-x-1",children:[(0,X.jsx)("span",{children:e}),(0,X.jsx)("button",{onClick:()=>i(t),className:"ml-1 text-gray-500 hover:text-red-500 focus:outline-none",children:(0,X.jsx)(T.A,{size:14})})]},t)))}):(0,X.jsx)("p",{className:"text-gray-500 text-sm",children:"No categories added yet."})})]})]})},yW=()=>{var e;const{toast:n}=(0,H.dj)(),r=(0,j.wA)(),s=(0,a.Zp)(),{hospitalInfo:i,hospitalInfoStatus:o,updateStatus:l}=(0,j.d4)((e=>e.hospital)),c=(0,j.d4)((e=>e.hospital.moreLogosBlobs)),[d,u]=(0,t.useState)({name:"",logo:"",logo2:"",address:"",contactNumber:"",email:"",website:"",doctorName:"",doctorInfo:"",hospitalId:"",pharmacyName:"",pharmacyAddress:"",pharmacyContactNumber:"",pharmacyLogo:"",pharmacyExpiryThreshold:"",pharmacyItemCategories:[],morelogos:[]}),[m,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(null),[v,g]=(0,t.useState)(null),[x,y]=(0,t.useState)(null),[b,N]=(0,t.useState)(null),[S,E]=(0,t.useState)([]),[C,D]=(0,t.useState)([]);(0,t.useEffect)((()=>{"idle"===o&&r(Ct())}),[r,o]),(0,t.useEffect)((()=>{i&&u((e=>({...e,...i})))}),[i]);const A=e=>{const{name:t,value:n}=e.target;u((e=>({...e,[t]:n})))},P=e=>{E((t=>t.filter(((t,n)=>n!==e)))),D((t=>t.filter(((t,n)=>n!==e)))),u((t=>({...t,morelogos:t.morelogos.filter(((t,n)=>n!==e))})))},O=e=>{m.trim()&&(u((t=>({...t,[e]:[...t[e],m.trim()]}))),h(""))},R=(e,t)=>{u((n=>({...n,[e]:n[e].filter(((e,n)=>n!==t))})))};return(0,X.jsxs)(k.Zp,{className:"w-full",children:[(0,X.jsx)(k.aR,{className:"border-b pb-3",children:(0,X.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{onClick:()=>s(-1),variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsxs)("div",{className:"mb-4 sm:mb-0",children:[(0,X.jsx)(k.ZB,{className:"text-xl sm:text-2xl font-bold",children:"Hospital Information Management"}),(0,X.jsx)(k.BT,{className:"text-gray-500",children:"Manage your hospital's details"})]})]}),(0,X.jsx)(w.$,{onClick:async e=>{e.preventDefault();try{let e={...d};if(v){const t=await(async()=>{if(!v)return null;try{const e=await fetch(`${M.B8}/api/hospitals/getUploadUrl`,{credentials:"include"});if(!e.ok)throw new Error("Failed to upload logo");const t=await e.json();if((await fetch(t.url,{method:"PUT",body:v,headers:{"Content-Type":"image/png"}})).ok)return`${M.hn}/${t.key}`;throw new Error("Failed to upload logo")}catch(e){return console.error("Error uploading logo:",e),n({title:"Logo Upload Failed",description:"Failed to upload the logo. Please try again.",variant:"destructive"}),null}})();t&&(e.logo=t)}if(b){const t=await(async()=>{if(!b)return null;try{const e=await fetch(`${M.B8}/api/hospitals/getUploadUrl`,{credentials:"include"});if(!e.ok)throw new Error("Failed to upload logo2");const t=await e.json();if((await fetch(t.url,{method:"PUT",body:b,headers:{"Content-Type":"image/png"}})).ok)return`${M.hn}/${t.key}`;throw new Error("Failed to upload logo2")}catch(e){return console.error("Error uploading logo2:",e),n({title:"Logo2 Upload Failed",description:"Failed to upload the second logo. Please try again.",variant:"destructive"}),null}})();t&&(e.logo2=t)}if(S.length>0){const t=await(async()=>{if(!S.length)return[];const e=[];for(const r of S)try{const t=await fetch(`${M.B8}/api/hospitals/getUploadUrl`,{credentials:"include"});if(!t.ok)throw new Error("Failed to upload additional logo");const n=await t.json();if(!(await fetch(n.url,{method:"PUT",body:r,headers:{"Content-Type":"image/png"}})).ok)throw new Error("Failed to upload additional logo");e.push(`${M.hn}/${n.key}`)}catch(t){console.error("Error uploading additional logo:",t),n({title:"Additional Logo Upload Failed",description:"Failed to upload one or more additional logos. Please try again.",variant:"destructive"})}return e})();t.length>0&&(e.morelogos=[...e.morelogos||[],...t])}await r(Dt(e)).unwrap(),E([]),D([]),n({variant:"success",title:"Updated Successfully",description:"Hospital information has been updated successfully."})}catch(t){n({title:"Unable to update",description:"Failed to update hospital information. Please try again.",variant:"destructive"})}},disabled:"loading"===l,className:"w-full sm:w-auto",children:"loading"===l?"Saving...":"Save Changes"})]})}),(0,X.jsx)(k.Wu,{className:"pt-6",children:(0,X.jsxs)(yl,{defaultValue:"hospital",className:"w-full",children:[(0,X.jsxs)(bl,{className:"grid w-full sm:w-1/2 grid-cols-2 mb-6",children:[(0,X.jsxs)(jl,{value:"hospital",className:"text-sm font-medium",children:[(0,X.jsx)("span",{className:"hidden sm:inline",children:"Hospital Information"}),(0,X.jsx)("span",{className:"sm:hidden",children:"Hospital"})]}),(0,X.jsxs)(jl,{value:"pharmacy",className:"text-sm font-medium",children:[(0,X.jsx)("span",{className:"hidden sm:inline",children:"Pharmacy Information"}),(0,X.jsx)("span",{className:"sm:hidden",children:"Pharmacy"})]})]}),(0,X.jsx)(wl,{value:"hospital",children:(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,X.jsxs)("div",{className:"sm:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,X.jsx)(vW,{label:"Hospital ID",name:"hospitalId",value:d.hospitalId,onChange:A,disabled:!0}),(0,X.jsx)(vW,{label:"Hospital Name",name:"name",value:d.name,onChange:A,required:!0}),(0,X.jsx)(vW,{label:"Contact Number",name:"contactNumber",value:d.contactNumber,onChange:A,required:!0}),(0,X.jsx)(vW,{label:"Email",name:"email",type:"email",value:d.email,onChange:A,required:!0}),(0,X.jsx)(vW,{label:"Website",name:"website",type:"url",value:d.website,onChange:A}),(0,X.jsx)(vW,{label:"Doctor's Name (Only for Clinic)",name:"doctorName",value:d.doctorName,onChange:A}),(0,X.jsx)(gW,{label:"Doctor Information",name:"doctorInfo",value:d.doctorInfo,onChange:A}),(0,X.jsx)(gW,{label:"Address",name:"address",value:d.address,onChange:A,required:!0})]}),(0,X.jsxs)("div",{className:"col-span-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"logo-upload",className:"text-sm font-medium",children:"Hospital Logo"}),(0,X.jsxs)("div",{className:"mb-6 grid grid-cols-2 gap-6",children:[(0,X.jsx)("div",{className:"mt-2 flex justify-center items-center rounded-lg border border-dashed border-gray-900/25 w-full sm:w-40 h-40 cursor-pointer",onClick:()=>{document.getElementById("logo-upload").click()},children:(0,X.jsxs)("div",{className:"text-center",children:[p||d.logo?(0,X.jsx)("img",{src:p||d.logo,alt:"Logo Preview",className:"mx-auto h-32 w-32 object-cover"}):(0,X.jsxs)("div",{className:"flex flex-col items-center",children:[(0,X.jsx)(fW,{className:"h-10 w-10 text-gray-300","aria-hidden":"true"}),(0,X.jsx)("span",{className:"mt-2 block text-sm font-semibold text-gray-900",children:"Upload"})]}),(0,X.jsx)("input",{id:"logo-upload",name:"logo-upload",type:"file",className:"hidden",onChange:e=>{const t=e.target.files[0];if(t){g(t);const e=new FileReader;e.onloadend=()=>{f(e.result)},e.readAsDataURL(t)}},accept:"image/*"})]})}),(0,X.jsx)("div",{className:"mt-2 flex justify-center items-center rounded-lg border border-dashed border-gray-900/25 w-full sm:w-40 h-40 cursor-pointer",onClick:()=>{document.getElementById("logo2-upload").click()},children:(0,X.jsxs)("div",{className:"text-center",children:[x||d.logo2?(0,X.jsx)("img",{src:x||d.logo2,alt:"Secondary Logo Preview",className:"mx-auto h-32 w-32 object-cover"}):(0,X.jsxs)("div",{className:"flex flex-col items-center",children:[(0,X.jsx)(fW,{className:"h-10 w-10 text-gray-300","aria-hidden":"true"}),(0,X.jsx)("span",{className:"mt-2 block text-sm font-semibold text-gray-900",children:"Upload"})]}),(0,X.jsx)("input",{id:"logo2-upload",name:"logo2-upload",type:"file",className:"hidden",onChange:e=>{const t=e.target.files[0];if(t){N(t);const e=new FileReader;e.onloadend=()=>{y(e.result)},e.readAsDataURL(t)}},accept:"image/*"})]})})]}),(0,X.jsxs)("div",{className:"mb-6",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-medium mb-2 block",children:"Additional Logos"}),(0,X.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[null===(e=d.morelogos)||void 0===e?void 0:e.map(((e,t)=>(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)("img",{src:c[t]||e,alt:`Additional Logo ${t+1}`,className:"w-full h-32 object-cover rounded-lg"}),(0,X.jsx)(w.$,{variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>P(t),children:(0,X.jsx)(T.A,{size:16})})]},`existing-${t}`))),C.map(((e,t)=>(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)("img",{src:e,alt:`New Logo Preview ${t+1}`,className:"w-full h-32 object-cover rounded-lg"}),(0,X.jsx)(w.$,{variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>P(t),children:(0,X.jsx)(T.A,{size:16})})]},`preview-${t}`))),(0,X.jsx)("div",{className:"flex justify-center items-center rounded-lg border border-dashed border-gray-900/25 w-full h-32 cursor-pointer",onClick:()=>document.getElementById("more-logos-upload").click(),children:(0,X.jsxs)("div",{className:"text-center",children:[(0,X.jsx)(fW,{className:"h-8 w-8 text-gray-300 mx-auto"}),(0,X.jsx)("span",{className:"mt-2 block text-sm font-semibold text-gray-900",children:"Add More"})]})}),(0,X.jsx)("input",{id:"more-logos-upload",type:"file",multiple:!0,className:"hidden",onChange:e=>{const t=Array.from(e.target.files);t.length>0&&(E((e=>[...e,...t])),t.forEach((e=>{const t=new FileReader;t.onloadend=()=>{D((e=>[...e,t.result]))},t.readAsDataURL(e)})))},accept:"image/*"})]})]}),(0,X.jsx)(xW,{label:"Hospital Service Categories",categories:d.hospitalServiceCategories,newCategory:m,setNewCategory:h,onAdd:()=>O("hospitalServiceCategories"),onRemove:e=>R("hospitalServiceCategories",e)})]})]})}),(0,X.jsx)(wl,{value:"pharmacy",children:(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,X.jsxs)("div",{className:"sm:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,X.jsx)(vW,{label:"Pharmacy Name",name:"pharmacyName",value:d.pharmacyName,onChange:A}),(0,X.jsx)(vW,{label:"Pharmacy Contact Number",name:"pharmacyContactNumber",value:d.pharmacyContactNumber,onChange:A}),(0,X.jsx)(vW,{label:"Pharmacy Logo URL",name:"pharmacyLogo",value:d.pharmacyLogo,onChange:A}),(0,X.jsx)(gW,{label:"Pharmacy Address",name:"pharmacyAddress",value:d.pharmacyAddress,onChange:A}),(0,X.jsx)(vW,{label:"Item Expiry Threshold (months)",name:"pharmacyExpiryThreshold",type:"number",value:d.pharmacyExpiryThreshold,onChange:A})]}),(0,X.jsx)("div",{className:"col-span-1",children:(0,X.jsx)(xW,{label:"Pharmacy Item Categories",categories:d.pharmacyItemCategories,newCategory:m,setNewCategory:h,onAdd:()=>O("pharmacyItemCategories"),onRemove:e=>R("pharmacyItemCategories",e)})})]})})]})})]})},bW=(0,N.A)("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),jW=["Consultation","Lab","General","OPD Procedure","Surgery","Sub Category","Other"];function wW(e){let{isOpen:n,onClose:r}=e;const a=(0,j.wA)(),s=(0,j.d4)((e=>e.services.createServiceStatus)),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(""),{toast:m}=(0,H.dj)(),h=()=>{o(""),c(""),u("")};return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:"sm:max-w-[425px] max-w-[90vw] rounded-lg",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{className:"text-lg sm:text-xl",children:"Add New Service"}),(0,X.jsx)(Io.rr,{className:"text-sm sm:text-base",children:"Fill in the details to add a new service"})]}),(0,X.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={name:i,category:l,rate:parseFloat(d)};a(ot(e)).unwrap().then((()=>{m({title:"Service added successfully",description:"The new service has been added.",variant:"success"}),h()})).catch((e=>{m({title:"Failed to add service",description:e.message||"There was an error adding the service. Please try again.",variant:"destructive"})})).finally((()=>{r()}))})()},children:[(0,X.jsxs)("div",{className:"grid gap-4",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"name",className:"text-sm font-medium",children:"Service Name"}),(0,X.jsx)(Vn.p,{id:"name",placeholder:"Name",value:i,onChange:e=>o(e.target.value),required:!0,className:"w-full"})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"category",className:"text-sm font-medium",children:"Category"}),(0,X.jsxs)(A.l6,{onValueChange:e=>c(e),value:l,children:[(0,X.jsx)(A.bq,{id:"category",className:"w-full",children:(0,X.jsx)(A.yv,{placeholder:"Select Category"})}),(0,X.jsx)(A.gC,{children:jW.map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"rate",className:"text-sm font-medium",children:"Rate"}),(0,X.jsx)(Vn.p,{id:"rate",placeholder:"Rate",type:"number",value:d,onChange:e=>u(e.target.value),className:"w-full"})]})]}),(0,X.jsxs)(Io.Es,{className:"mt-6 flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:h,className:"w-full sm:w-auto",children:"Reset"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:r,className:"w-full sm:w-auto",children:"Cancel"}),(0,X.jsx)(w.$,{type:"submit",disabled:"loading"===s,className:"w-full sm:w-auto",children:"loading"===s?"Adding...":"Add Service"})]})]})]})})}var NW=__webpack_require__(7459);const _W=["Consultation","Lab","General","OPD Procedure","Surgery","Sub Category","Other"];function SW(e){let{isOpen:n,onClose:r,service:a}=e;const s=(0,j.wA)(),i=(0,j.d4)((e=>e.services.updateServiceStatus)),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[h,p]=(0,t.useState)([]),[f,v]=(0,t.useState)(!1),[g,x]=(0,t.useState)({frequency:"daily",dailyPrecision:"precise",resetTime:"00:00"}),{toast:y}=(0,H.dj)();(0,t.useEffect)((()=>{var e,t,n,r;a&&(l(a.name),d(a.category),m(null===(e=a.rate)||void 0===e?void 0:e.toString()),p(a.subdivisions||[]),v(a.isRecurring||!1),x({frequency:(null===(t=a.recurringLogic)||void 0===t?void 0:t.frequency)||"daily",dailyPrecision:(null===(n=a.recurringLogic)||void 0===n?void 0:n.dailyPrecision)||"precise",resetTime:(null===(r=a.recurringLogic)||void 0===r?void 0:r.resetTime)||"00:00"}))}),[a]);const b=(e,t,n)=>{const r=[...h];r[e]={...r[e],[t]:"rate"===t?parseFloat(n):n},p(r)},N=()=>{if(!(()=>{if(0===h.length)return!0;const e=h.reduce(((e,t)=>e+(t.rate||0)),0);return Math.abs(e-parseFloat(u))<.01})())return void y({title:"Validation Error",description:"Sum of subdivision rates must equal the service rate",variant:"destructive"});const e={_id:a._id,name:o,category:c,rate:parseFloat(u),subdivisions:h,isRecurring:f,recurringLogic:f?g:void 0};s(ct(e)).unwrap().then((()=>{y({title:"Service updated successfully",description:"The service has been updated.",variant:"success"}),r()})).catch((e=>{y({title:"Failed to update service",description:e.message||"There was an error updating the service. Please try again.",variant:"destructive"})}))};return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:"sm:max-w-[500px] max-w-[95vw] rounded-lg",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{className:"text-xl",children:"Edit Service"}),(0,X.jsx)(Io.rr,{className:"text-sm sm:text-base",children:"Update the service details"})]}),(0,X.jsxs)("form",{onSubmit:e=>{e.preventDefault(),N()},className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,X.jsxs)("div",{className:"col-span-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"name",children:"Name"}),(0,X.jsx)(Vn.p,{id:"name",value:o,onChange:e=>l(e.target.value),required:!0,className:"mt-1"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"category",children:"Category"}),(0,X.jsxs)(A.l6,{onValueChange:d,value:c,children:[(0,X.jsx)(A.bq,{id:"category",className:"mt-1",children:(0,X.jsx)(A.yv,{placeholder:"Select"})}),(0,X.jsx)(A.gC,{children:_W.map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"rate",children:"Rate"}),(0,X.jsx)(Vn.p,{id:"rate",type:"number",value:u,onChange:e=>m(e.target.value),required:!0,className:"mt-1"})]})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsx)(Ks.J,{children:"Subdivisions"}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{p([...h,{name:"",rate:""}])},className:"h-8",children:[(0,X.jsx)(S.A,{className:"h-4 w-4 mr-1"}),"Add"]})]}),(0,X.jsx)("div",{className:"space-y-2",children:h.map(((e,t)=>(0,X.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,X.jsx)(Vn.p,{placeholder:"Name",value:e.name,onChange:e=>b(t,"name",e.target.value),className:"flex-[2]"}),(0,X.jsx)(Vn.p,{type:"number",placeholder:"Rate",value:e.rate,onChange:e=>b(t,"rate",e.target.value),className:"flex-1"}),(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>(e=>{p(h.filter(((t,n)=>n!==e)))})(t),className:"h-8 w-8",children:(0,X.jsx)(C.A,{className:"h-4 w-4 text-red-500"})})]},t)))})]}),(0,X.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(NW.d,{id:"recurring",checked:f,onCheckedChange:v}),(0,X.jsx)(Ks.J,{htmlFor:"recurring",children:"Recurring Service"})]}),f&&(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-3 pl-6",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"frequency",children:"Frequency"}),(0,X.jsxs)(A.l6,{value:g.frequency,onValueChange:e=>x({...g,frequency:e}),children:[(0,X.jsx)(A.bq,{id:"frequency",className:"mt-1",children:(0,X.jsx)(A.yv,{})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"daily",children:"Daily"}),(0,X.jsx)(A.eb,{value:"hourly",children:"Hourly"})]})]})]}),"daily"===g.frequency&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"dailyPrecision",children:"Precision"}),(0,X.jsxs)(A.l6,{value:g.dailyPrecision,onValueChange:e=>x({...g,dailyPrecision:e}),children:[(0,X.jsx)(A.bq,{id:"dailyPrecision",className:"mt-1",children:(0,X.jsx)(A.yv,{})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"precise",children:"Precise"}),(0,X.jsx)(A.eb,{value:"time_based",children:"Time Based"})]})]})]}),"time_based"===g.dailyPrecision&&(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"resetTime",children:"Reset Time"}),(0,X.jsx)(Vn.p,{id:"resetTime",type:"time",value:g.resetTime,onChange:e=>x({...g,resetTime:e.target.value}),className:"mt-1"})]})]})]})]}),(0,X.jsxs)(Io.Es,{className:"pt-4",children:[(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:r,disabled:"loading"===i,children:"Cancel"}),(0,X.jsx)(w.$,{type:"submit",disabled:"loading"===i,children:"loading"===i?"Saving...":"Save Changes"})]})]})]})})}const EW=e=>{let{isOpen:n,onClose:r,services:a}=e;const[s,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(0),[c,d]=(0,t.useState)(""),u=(0,j.wA)(),{serviceBillCollections:m,status:h}=(0,j.d4)((e=>e.templates));(0,t.useEffect)((()=>{i(m||[])}),[m]),(0,t.useEffect)((()=>{"idle"===h&&u((0,R.QK)())}),[u,h]),(0,t.useEffect)((()=>{const e=a.filter((e=>s.includes(e._id))).reduce(((e,t)=>e+t.rate),0);l(e)}),[s,a]);const p=a.filter((e=>e.name.toLowerCase().includes(c.toLowerCase())||e.category.toLowerCase().includes(c.toLowerCase()))),f=(0,t.useCallback)((e=>{i((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}),[]),v=(0,t.useCallback)((()=>{u((0,R.Vx)({service_collections:s})),r()}),[u,s,r]);return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:"max-w-[95vw] w-full sm:max-w-[200px] md:max-w-[250px] lg:max-w-[500px] xl:max-w-[600px] rounded-lg max-h-[90vh]",children:[(0,X.jsx)(Io.c7,{children:(0,X.jsx)(Io.L3,{className:"text-lg sm:text-xl md:text-2xl",children:"Manage Services"})}),(0,X.jsxs)("div",{className:" relative",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search services...",value:c,onChange:e=>{d(e.target.value)},className:"pl-8 w-full"})]}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Wo.XI,{children:(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[50px]",children:"Select"}),(0,X.jsx)(Wo.nd,{children:"Service Name"}),(0,X.jsx)(Wo.nd,{className:"hidden md:block",children:"Category"})," ",(0,X.jsx)(Wo.nd,{className:"text-right pr-6",children:"Rate"})]})})}),(0,X.jsx)(b.F,{className:"h-[50vh] pr-4 ",children:(0,X.jsx)(Wo.XI,{children:(0,X.jsx)(Wo.BF,{children:p.map((e=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-center",children:(0,X.jsx)(zl,{checked:s.includes(e._id),onCheckedChange:()=>f(e._id),className:"h-5 w-5"})}),(0,X.jsx)(Wo.nA,{children:e.name}),(0,X.jsx)(Wo.nA,{className:"hidden md:block",children:e.category})," ",(0,X.jsx)(Wo.nA,{className:"text-right font-semibold",children:e.rate?`\u20b9${e.rate.toLocaleString("en-IN")}`:""})]},e._id)))})})})]}),(0,X.jsx)(Mo,{}),(0,X.jsxs)("div",{className:"text-right font-bold md:text-lg text-md",children:["Total: \u20b9",o.toLocaleString("en-IN")]}),(0,X.jsxs)(Io.Es,{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:r,className:"w-full sm:w-auto",children:"Close"}),(0,X.jsx)(w.$,{onClick:v,className:"w-full sm:w-auto",children:"Apply"})]})]})})};var CW={version:"0.18.5"},DW=1200,TW=1252,kW=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],AW={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},PW=function(e){-1!=kW.indexOf(e)&&(TW=AW[0]=e)};var OW=function(e){DW=e,PW(e)};function RW(){OW(1200),PW(1252)}function MW(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e.charCodeAt(n);return t}function IW(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var LW,FW=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return 255==t&&254==n?function(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n)+(e.charCodeAt(2*n+1)<<8));return t.join("")}(e.slice(2)):254==t&&255==n?IW(e.slice(2)):65279==t?e.slice(1):e},BW=function(e){return String.fromCharCode(e)},WW=function(e){return String.fromCharCode(e)};var $W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function UW(e){for(var t="",n=0,r=0,a=0,s=0,i=0,o=0,l=0,c=0;c<e.length;)s=(n=e.charCodeAt(c++))>>2,i=(3&n)<<4|(r=e.charCodeAt(c++))>>4,o=(15&r)<<2|(a=e.charCodeAt(c++))>>6,l=63&a,isNaN(r)?o=l=64:isNaN(a)&&(l=64),t+=$W.charAt(s)+$W.charAt(i)+$W.charAt(o)+$W.charAt(l);return t}function zW(e){var t="",n=0,r=0,a=0,s=0,i=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=$W.indexOf(e.charAt(l++))<<2|(s=$W.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&s)<<4|(i=$W.indexOf(e.charAt(l++)))>>2,64!==i&&(t+=String.fromCharCode(r)),a=(3&i)<<6|(o=$W.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(a));return t}var HW=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),VW=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(H5){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function qW(e){return HW?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function GW(e){return HW?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var KW=function(e){return HW?VW(e,"binary"):e.split("").map((function(e){return 255&e.charCodeAt(0)}))};function YW(e){if("undefined"===typeof ArrayBuffer)return KW(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function XW(e){if(Array.isArray(e))return e.map((function(e){return String.fromCharCode(e)})).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function ZW(e){if("undefined"==typeof ArrayBuffer)throw new Error("Unsupported");if(e instanceof ArrayBuffer)return ZW(new Uint8Array(e));for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t}var JW=HW?function(e){return Buffer.concat(e.map((function(e){return Buffer.isBuffer(e)?e:VW(e)})))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),a=0;for(t=0,n=0;t<e.length;n+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map((function(e){return Array.isArray(e)?e:[].slice.call(e)})))};var QW=/\u0000/g,e$=/[\u0001-\u0006]/g;function t$(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function n$(e,t){var n=""+e;return n.length>=t?n:vU("0",t-n.length)+n}function r$(e,t){var n=""+e;return n.length>=t?n:vU(" ",t-n.length)+n}function a$(e,t){var n=""+e;return n.length>=t?n:n+vU(" ",t-n.length)}var s$=Math.pow(2,32);function i$(e,t){return e>s$||e<-s$?function(e,t){var n=""+Math.round(e);return n.length>=t?n:vU("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:vU("0",t-n.length)+n}(Math.round(e),t)}function o$(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var l$=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],c$=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var d$={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},u$={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},m$={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function h$(e,t,n){for(var r=e<0?-1:1,a=e*r,s=0,i=1,o=0,l=1,c=0,d=0,u=Math.floor(a);c<t&&(o=(u=Math.floor(a))*i+s,d=u*c+l,!(a-u<5e-8));)a=1/(a-u),s=i,i=o,l=c,c=d;if(d>t&&(c>t?(d=l,o=s):(d=c,o=i)),!n)return[0,r*o,d];var m=Math.floor(r*o/d);return[m,r*o-m*d,d]}function p$(e,t,n){if(e>2958465||e<0)return null;var r=0|e,a=Math.floor(86400*(e-r)),s=0,i=[],o={D:r,T:a,u:86400*(e-r)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(r+=1462),o.u>.9999&&(o.u=0,86400==++a&&(o.T=a=0,++r,++o.D)),60===r)i=n?[1317,10,29]:[1900,2,29],s=3;else if(0===r)i=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var f$=new Date(1899,11,31,0,0,0),v$=f$.getTime(),g$=new Date(1900,2,1,0,0,0);function x$(e,t){var n=e.getTime();return t?n-=1262304e5:e>=g$&&(n+=864e5),(n-(v$+6e4*(e.getTimezoneOffset()-f$.getTimezoneOffset())))/864e5}function y$(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function b$(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=y$(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=y$(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),y$(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function j$(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):b$(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return U$(14,x$(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function w$(e,t,n,r){var a,s="",i=0,o=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:a=l%100,c=2;break;default:a=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:a=n.m,c=t.length;break;case 3:return c$[n.m-1][1];case 5:return c$[n.m-1][0];default:return c$[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:a=n.d,c=t.length;break;case 3:return l$[n.q][0];default:return l$[n.q][1]}break;case 104:switch(t.length){case 1:case 2:a=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:a=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:a=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(o=r>=2?3===r?1e3:100:1===r?10:1,(i=Math.round(o*(n.S+n.u)))>=60*o&&(i=0),"s"===t?0===i?"0":""+i/o:(s=n$(i,2+r),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):n$(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":a=24*n.D+n.H;break;case"[m]":case"[mm]":a=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":a=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:a=l,c=1}return c>0?n$(a,c):""}function N$(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var _$=/%/g;function S$(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+S$(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),-1===(n=(t/Math.pow(10,s)).toPrecision(r+1+(a+s)%a)).indexOf("e")){var i=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+s):n+="E+"+(i-s);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,a)+"."+n.substr(2+a)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,r){return t+n+r.substr(0,(a+s)%a)+"."+r.substr(s)+"E"}))}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var E$=/# (\?+)( ?)\/( ?)(\d+)/;var C$=/^#*0*\.([0#]+)/,D$=/\).*[0#]/,T$=/\(###\) ###\\?-####/;function k$(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function A$(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function P$(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function O$(e,t,n){if(40===e.charCodeAt(0)&&!t.match(D$)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?O$("n",r,n):"("+O$("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return I$(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(_$,""),a=t.length-r.length;return I$(e,r,n*Math.pow(10,2*a))+vU("%",a)}(e,t,n);if(-1!==t.indexOf("E"))return S$(t,n);if(36===t.charCodeAt(0))return"$"+O$(e,t.substr(" "==t.charAt(1)?2:1),n);var a,s,i,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+i$(l,t.length);if(t.match(/^[#?]+$/))return"0"===(a=i$(n,0))&&(a=""),a.length>t.length?a:k$(t.substr(0,t.length-a.length))+a;if(s=t.match(E$))return function(e,t,n){var r=parseInt(e[4],10),a=Math.round(t*r),s=Math.floor(a/r),i=a-s*r,o=r;return n+(0===s?"":""+s)+" "+(0===i?vU(" ",e[1].length+1+e[4].length):r$(i,e[1].length)+e[2]+"/"+e[3]+n$(o,e[4].length))}(s,l,c);if(t.match(/^#+0+$/))return c+i$(l,t.length-t.indexOf("0"));if(s=t.match(C$))return a=A$(n,s[1].length).replace(/^([^\.]+)$/,"$1."+k$(s[1])).replace(/\.$/,"."+k$(s[1])).replace(/\.(\d*)$/,(function(e,t){return"."+t+vU("0",k$(s[1]).length-t.length)})),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+A$(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+N$(i$(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+O$(e,t,-n):N$(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,s[1].length)))+"."+n$(P$(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return O$(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=t$(O$(e,t.replace(/[\\-]/g,""),n)),i=0,t$(t$(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return i<a.length?a.charAt(i++):"0"===e?"0":""})));if(t.match(T$))return"("+(a=O$(e,"##########",n)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=h$(l,Math.pow(10,i)-1,!1),a=""+c," "==(d=I$("n",s[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],(d=a$(o[2],i)).length<s[4].length&&(d=k$(s[4].substr(s[4].length-d.length))+d),a+=d;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=h$(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?r$(o[1],i)+s[2]+"/"+s[3]+a$(o[2],i):vU(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=i$(n,0),t.length<=a.length?a:k$(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var u=t.indexOf(".")-i,m=t.length-a.length-u;return k$(t.substr(0,u)+a+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=P$(n,s[1].length),n<0?"-"+O$(e,t,-n):N$(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?n$(0,3-e.length):"")+e}))+"."+n$(i,s[1].length);switch(t){case"###,##0.00":return O$(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var h=N$(i$(l,0));return"0"!==h?c+h:"";case"###,###.00":return O$(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return O$(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function R$(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+R$(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),!(n=(t/Math.pow(10,s)).toPrecision(r+1+(a+s)%a)).match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(i-n.length+s):n+="E+"+(i-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,r){return t+n+r.substr(0,(a+s)%a)+"."+r.substr(s)+"E"}))}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function M$(e,t,n){if(40===e.charCodeAt(0)&&!t.match(D$)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?M$("n",r,n):"("+M$("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return I$(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(_$,""),a=t.length-r.length;return I$(e,r,n*Math.pow(10,2*a))+vU("%",a)}(e,t,n);if(-1!==t.indexOf("E"))return R$(t,n);if(36===t.charCodeAt(0))return"$"+M$(e,t.substr(" "==t.charAt(1)?2:1),n);var a,s,i,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+n$(l,t.length);if(t.match(/^[#?]+$/))return a=""+n,0===n&&(a=""),a.length>t.length?a:k$(t.substr(0,t.length-a.length))+a;if(s=t.match(E$))return function(e,t,n){return n+(0===t?"":""+t)+vU(" ",e[1].length+2+e[4].length)}(s,l,c);if(t.match(/^#+0+$/))return c+n$(l,t.length-t.indexOf("0"));if(s=t.match(C$))return a=(a=(""+n).replace(/^([^\.]+)$/,"$1."+k$(s[1])).replace(/\.$/,"."+k$(s[1]))).replace(/\.(\d*)$/,(function(e,t){return"."+t+vU("0",k$(s[1]).length-t.length)})),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+N$(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+M$(e,t,-n):N$(""+n)+"."+vU("0",s[1].length);if(s=t.match(/^#,#*,#0/))return M$(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=t$(M$(e,t.replace(/[\\-]/g,""),n)),i=0,t$(t$(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return i<a.length?a.charAt(i++):"0"===e?"0":""})));if(t.match(T$))return"("+(a=M$(e,"##########",n)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=h$(l,Math.pow(10,i)-1,!1),a=""+c," "==(d=I$("n",s[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],(d=a$(o[2],i)).length<s[4].length&&(d=k$(s[4].substr(s[4].length-d.length))+d),a+=d;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=h$(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?r$(o[1],i)+s[2]+"/"+s[3]+a$(o[2],i):vU(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+n,t.length<=a.length?a:k$(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var u=t.indexOf(".")-i,m=t.length-a.length-u;return k$(t.substr(0,u)+a+t.substr(t.length-m))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+M$(e,t,-n):N$(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?n$(0,3-e.length):"")+e}))+"."+n$(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=N$(""+l);return"0"!==h?c+h:"";default:if(t.match(/\.[0#?]*$/))return M$(e,t.slice(0,t.lastIndexOf(".")),n)+k$(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function I$(e,t,n){return(0|n)===n?M$(e,t,n):O$(e,t,n)}var L$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function F$(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":o$(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(L$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var B$=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function W$(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function $$(e,t){var n=function(e){for(var t=[],n=!1,r=0,a=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(a,r-a),a=r+1}if(t[t.length]=e.substr(a),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,a=n[r-1].indexOf("@");if(r<4&&a>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||a>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=a>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=a>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=a>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var s=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,s];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var i=n[0].match(B$),o=n[1].match(B$);return W$(t,i)?[r,n[0]]:W$(t,o)?[r,n[1]]:[r,n[null!=i&&null!=o?2:1]]}return[r,s]}function U$(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:d$)[e])&&(r=n.table&&n.table[u$[e]]||d$[u$[e]]),null==r&&(r=m$[e]||"General")}if(o$(r,0))return j$(t,n);t instanceof Date&&(t=x$(t,n.date1904));var a=$$(r,t);if(o$(a[1]))return j$(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var a,s,i,o=[],l="",c=0,d="",u="t",m="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!o$(e,c))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(i=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(i);o[o.length]={t:"t",v:l},++c;break;case"\\":var h=e.charAt(++c),p="("===h||")"===h?h:"t";o[o.length]={t:p,v:h},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==a&&null==(a=p$(t,n,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},u=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==a&&null==(a=p$(t,n)))return"";for(l=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)l+=d;"m"===d&&"h"===u.toLowerCase()&&(d="M"),"h"===d&&(d=m),o[o.length]={t:d,v:l},u=d;break;case"A":case"a":case"\u4e0a":var f={t:d,v:d};if(null==a&&(a=p$(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=a&&(f.v=a.H>=12?"P":"A"),f.t="T",m="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=a&&(f.v=a.H>=12?"PM":"AM"),f.t="T",c+=5,m="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=a&&(f.v=a.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),f.t="T",c+=5,m="h"):(f.t="t",++c),null==a&&"T"===f.t)return"";o[o.length]=f,u=d;break;case"[":for(l=d;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(L$)){if(null==a&&null==(a=p$(t,n)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},u=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",F$(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=a){for(l=d;++c<e.length&&"0"===(d=e.charAt(c));)l+=d;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)l+=d;o[o.length]={t:"n",v:l};break;case"?":for(l=d;e.charAt(++c)===d;)l+=d;o[o.length]={t:d,v:l},u=d;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===r?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:d,v:d},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(d))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"t",v:d},++c}var v,g=0,x=0;for(c=o.length-1,u="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=m,u="h",g<1&&(g=1);break;case"s":(v=o[c].v.match(/\.0+$/))&&(x=Math.max(x,v[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":u=o[c].t;break;case"m":"s"===u&&(o[c].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&o[c].v.match(/[Hh]/)&&(g=1),g<2&&o[c].v.match(/[Mm]/)&&(g=2),g<3&&o[c].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M),a.M>=60&&(a.M=0,++a.H);break;case 2:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M)}var y,b="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=w$(o[c].t.charCodeAt(0),o[c].v,a,x),o[c].t="t";break;case"n":case"?":for(y=c+1;null!=o[y]&&("?"===(d=o[y].t)||"D"===d||(" "===d||"t"===d)&&null!=o[y+1]&&("?"===o[y+1].t||"t"===o[y+1].t&&"/"===o[y+1].v)||"("===o[c].t&&(" "===d||"n"===d||")"===d)||"t"===d&&("/"===o[y].v||" "===o[y].v&&null!=o[y+1]&&"?"==o[y+1].t));)o[c].v+=o[y].v,o[y]={v:"",t:";"},++y;b+=o[c].v,c=y-1;break;case"G":o[c].t="t",o[c].v=j$(t,n)}var j,w,N="";if(b.length>0){40==b.charCodeAt(0)?(j=t<0&&45===b.charCodeAt(0)?-t:t,w=I$("n",b,j)):(w=I$("n",b,j=t<0&&r>1?-t:t),j<0&&o[0]&&"t"==o[0].t&&(w=w.substr(1),o[0].v="-"+o[0].v)),y=w.length-1;var _=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){_=c;break}var S=o.length;if(_===o.length&&-1===w.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(y>=o[c].v.length-1?(y-=o[c].v.length,o[c].v=w.substr(y+1,o[c].v.length)):y<0?o[c].v="":(o[c].v=w.substr(0,y+1),y=-1),o[c].t="t",S=c);y>=0&&S<o.length&&(o[S].v=w.substr(0,y+1)+o[S].v)}else if(_!==o.length&&-1===w.indexOf("E")){for(y=w.indexOf(".")-1,c=_;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(s=o[c].v.indexOf(".")>-1&&c===_?o[c].v.indexOf(".")-1:o[c].v.length-1,N=o[c].v.substr(s+1);s>=0;--s)y>=0&&("0"===o[c].v.charAt(s)||"#"===o[c].v.charAt(s))&&(N=w.charAt(y--)+N);o[c].v=N,o[c].t="t",S=c}for(y>=0&&S<o.length&&(o[S].v=w.substr(0,y+1)+o[S].v),y=w.indexOf(".")+1,c=_;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===_)){for(s=o[c].v.indexOf(".")>-1&&c===_?o[c].v.indexOf(".")+1:0,N=o[c].v.substr(0,s);s<o[c].v.length;++s)y<w.length&&(N+=w.charAt(y++));o[c].v=N,o[c].t="t",S=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(j=r>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=I$(o[c].t,o[c].v,j),o[c].t="t");var E="";for(c=0;c!==o.length;++c)null!=o[c]&&(E+=o[c].v);return E}(a[1],t,n,a[0])}function z$(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=d$[n]){if(d$[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return d$[t]=e,t}function H$(e){for(var t=0;392!=t;++t)void 0!==e[t]&&z$(e[t],t)}function V$(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',d$=e}var q$={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},G$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var K$=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,a="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)a[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=a[t]=n>>>8^e[255&n];var s=[];for(r=1;16!=r;++r)s[r-1]="undefined"!==typeof Int32Array?a.subarray(256*r,256*r+256):a.slice(256*r,256*r+256);return s}(t),r=n[0],a=n[1],s=n[2],i=n[3],o=n[4],l=n[5],c=n[6],d=n[7],u=n[8],m=n[9],h=n[10],p=n[11],f=n[12],v=n[13],g=n[14];return e.table=t,e.bstr=function(e,n){for(var r=~n,a=0,s=e.length;a<s;)r=r>>>8^t[255&(r^e.charCodeAt(a++))];return~r},e.buf=function(e,n){for(var x=~n,y=e.length-15,b=0;b<y;)x=g[e[b++]^255&x]^v[e[b++]^x>>8&255]^f[e[b++]^x>>16&255]^p[e[b++]^x>>>24]^h[e[b++]]^m[e[b++]]^u[e[b++]]^d[e[b++]]^c[e[b++]]^l[e[b++]]^o[e[b++]]^i[e[b++]]^s[e[b++]]^a[e[b++]]^r[e[b++]]^t[e[b++]];for(y+=15;b<y;)x=x>>>8^t[255&(x^e[b++])];return~x},e.str=function(e,n){for(var r=~n,a=0,s=e.length,i=0,o=0;a<s;)(i=e.charCodeAt(a++))<128?r=r>>>8^t[255&(r^i)]:i<2048?r=(r=r>>>8^t[255&(r^(192|i>>6&31))])>>>8^t[255&(r^(128|63&i))]:i>=55296&&i<57344?(i=64+(1023&i),o=1023&e.charCodeAt(a++),r=(r=(r=(r=r>>>8^t[255&(r^(240|i>>8&7))])>>>8^t[255&(r^(128|i>>2&63))])>>>8^t[255&(r^(128|o>>6&15|(3&i)<<4))])>>>8^t[255&(r^(128|63&o))]):r=(r=(r=r>>>8^t[255&(r^(224|i>>12&15))])>>>8^t[255&(r^(128|i>>6&63))])>>>8^t[255&(r^(128|63&i))];return~r},e}(),Y$=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function a(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function s(e){xH(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),a=e.read_shift(2),s=e.l+a,i={};if(21589===r)1&(n=e.read_shift(1))&&(i.mtime=e.read_shift(4)),a>5&&(2&n&&(i.atime=e.read_shift(4)),4&n&&(i.ctime=e.read_shift(4))),i.mtime&&(i.mt=new Date(1e3*i.mtime));e.l=s,t[r]=i}return t}function i(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return re(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=w(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(HW&&Buffer.isBuffer(e)?e.toString("binary"):w(e)).split("\r\n"),a=0,s="";for(a=0;a<r.length;++a)if(s=r[a],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),n||(n=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),s.slice(0,n.length)!=n););var i=(r[1]||"").match(/boundary="(.*?)"/);if(!i)throw new Error("MAD cannot find boundary");var o="--"+(i[1]||""),l=[],c=[],d={FileIndex:l,FullPaths:c};m(d);var u,h=0;for(a=0;a<r.length;++a){var p=r[a];p!==o&&p!==o+"--"||(h++&&ce(d,r.slice(u,a),n),u=a)}return d}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,a,s,i,o,h=512,p=[],f=e.slice(0,512);xH(f,0);var v=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(x,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(f);switch(n=v[0]){case 3:h=512;break;case 4:h=4096;break;case 0:if(0==v[1])return re(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==h&&xH(f=e.slice(0,h),28);var y=e.slice(0,h);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(f,n);var b=f.read_shift(4,"i");if(3===n&&0!==b)throw new Error("# Directory Sectors: Expected 0 saw "+b);f.l+=4,s=f.read_shift(4,"i"),f.l+=4,f.chk("00100000","Mini Stream Cutoff Size: "),i=f.read_shift(4,"i"),r=f.read_shift(4,"i"),o=f.read_shift(4,"i"),a=f.read_shift(4,"i");for(var j=-1,N=0;N<109&&!((j=f.read_shift(4,"i"))<0);++N)p[N]=j;var _=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],a=1;a<n;++a)r[a-1]=e.slice(a*t,(a+1)*t);return r[n-1]=e.slice(n*t),r}(e,h);c(o,a,_,h,p);var S=function(e,t,n,r){var a=e.length,s=[],i=[],o=[],l=[],c=r-1,d=0,u=0,m=0,h=0;for(d=0;d<a;++d)if(o=[],(m=d+t)>=a&&(m-=a),!i[m]){l=[];var p=[];for(u=m;u>=0;){p[u]=!0,i[u]=!0,o[o.length]=u,l.push(e[u]);var f=n[Math.floor(4*u/r)];if(r<4+(h=4*u&c))throw new Error("FAT boundary crossed: "+u+" 4 "+r);if(!e[f])break;if(p[u=dH(e[f],h)])break}s[m]={nodes:o,data:Bz([l])}}return s}(_,s,p,h);S[s].name="!Directory",r>0&&i!==g&&(S[i].name="!MiniFAT"),S[p[0]].name="!FAT",S.fat_addrs=p,S.ssz=h;var E=[],C=[],D=[];!function(e,t,n,r,a,s,i,o){for(var c,m=0,h=r.length?2:0,p=t[e].data,f=0,v=0;f<p.length;f+=128){var x=p.slice(f,f+128);xH(x,64),v=x.read_shift(2),c=$z(x,0,v-h),r.push(c);var y={name:c,type:x.read_shift(1),color:x.read_shift(1),L:x.read_shift(4,"i"),R:x.read_shift(4,"i"),C:x.read_shift(4,"i"),clsid:x.read_shift(16),state:x.read_shift(4,"i"),start:0,size:0};0!==x.read_shift(2)+x.read_shift(2)+x.read_shift(2)+x.read_shift(2)&&(y.ct=u(x,x.l-8)),0!==x.read_shift(2)+x.read_shift(2)+x.read_shift(2)+x.read_shift(2)&&(y.mt=u(x,x.l-8)),y.start=x.read_shift(4,"i"),y.size=x.read_shift(4,"i"),y.size<0&&y.start<0&&(y.size=y.type=0,y.start=g,y.name=""),5===y.type?(m=y.start,a>0&&m!==g&&(t[m].name="!StreamData")):y.size>=4096?(y.storage="fat",void 0===t[y.start]&&(t[y.start]=d(n,y.start,t.fat_addrs,t.ssz)),t[y.start].name=y.name,y.content=t[y.start].data.slice(0,y.size)):(y.storage="minifat",y.size<0?y.size=0:m!==g&&y.start!==g&&t[m]&&(y.content=l(y,t[m].data,(t[o]||{}).data))),y.content&&xH(y.content,0),s[c]=y,i.push(y)}}(s,S,_,E,r,{},C,i),function(e,t,n){for(var r=0,a=0,s=0,i=0,o=0,l=n.length,c=[],d=[];r<l;++r)c[r]=d[r]=r,t[r]=n[r];for(;o<d.length;++o)a=e[r=d[o]].L,s=e[r].R,i=e[r].C,c[r]===r&&(-1!==a&&c[a]!==a&&(c[r]=c[a]),-1!==s&&c[s]!==s&&(c[r]=c[s])),-1!==i&&(c[i]=r),-1!==a&&r!=c[r]&&(c[a]=c[r],d.lastIndexOf(a)<o&&d.push(a)),-1!==s&&r!=c[r]&&(c[s]=c[r],d.lastIndexOf(s)<o&&d.push(s));for(r=1;r<l;++r)c[r]===r&&(-1!==s&&c[s]!==s?c[r]=c[s]:-1!==a&&c[a]!==a&&(c[r]=c[a]));for(r=1;r<l;++r)if(0!==e[r].type){if((o=r)!=c[o])do{o=c[o],t[r]=t[o]+"/"+t[r]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(C,D,E),E.shift();var T={FileIndex:C,FullPaths:D};return t&&t.raw&&(T.raw={header:y,sectors:_}),T}function l(e,t,n){for(var r=e.start,a=e.size,s=[],i=r;n&&a>0&&i>=0;)s.push(t.slice(i*v,i*v+v)),a-=v,i=dH(n,4*i);return 0===s.length?bH(0):JW(s).slice(0,e.size)}function c(e,t,n,r,a){var s=g;if(e===g){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var i=n[e],o=(r>>>2)-1;if(!i)return;for(var l=0;l<o&&(s=dH(i,4*l))!==g;++l)a.push(s);c(dH(i,r-4),t-1,n,r,a)}}function d(e,t,n,r,a){var s=[],i=[];a||(a=[]);var o=r-1,l=0,c=0;for(l=t;l>=0;){a[l]=!0,s[s.length]=l,i.push(e[l]);var d=n[Math.floor(4*l/r)];if(r<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[d])break;l=dH(e[d],c)}return{nodes:s,data:Bz([i])}}function u(e,t){return new Date(1e3*(cH(e,t+4)/1e7*Math.pow(2,32)+cH(e,t)/1e7-11644473600))}function m(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(Y$.find(e,"/"+t))return;var n=bH(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),h(e)}(e)}function h(e,t){m(e);for(var a=!1,s=!1,i=e.FullPaths.length-1;i>=0;--i){var o=e.FileIndex[i];switch(o.type){case 0:s?a=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(o.R*o.L*o.C)&&(a=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(a=!0);break;default:a=!0}}if(a||t){var l=new Date(1987,1,19),c=0,d=Object.create?Object.create(null):{},u=[];for(i=0;i<e.FullPaths.length;++i)d[e.FullPaths[i]]=!0,0!==e.FileIndex[i].type&&u.push([e.FullPaths[i],e.FileIndex[i]]);for(i=0;i<u.length;++i){var h=n(u[i][0]);(s=d[h])||(u.push([h,{name:r(h).replace("/",""),type:1,clsid:b,ct:l,mt:l,content:null}]),d[h]=!0)}for(u.sort((function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),a=0,s=0,i=Math.min(n.length,r.length);a<i;++a){if(s=n[a].length-r[a].length)return s;if(n[a]!=r[a])return n[a]<r[a]?-1:1}return n.length-r.length}(e[0],t[0])})),e.FullPaths=[],e.FileIndex=[],i=0;i<u.length;++i)e.FullPaths[i]=u[i][0],e.FileIndex[i]=u[i][1];for(i=0;i<u.length;++i){var p=e.FileIndex[i],f=e.FullPaths[i];if(p.name=r(f).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||b,0===i)p.C=u.length>1?1:-1,p.size=0,p.type=5;else if("/"==f.slice(-1)){for(c=i+1;c<u.length&&n(e.FullPaths[c])!=f;++c);for(p.C=c>=u.length?-1:c,c=i+1;c<u.length&&n(e.FullPaths[c])!=n(f);++c);p.R=c>=u.length?-1:c,p.type=1}else n(e.FullPaths[i+1]||"")==n(f)&&(p.R=i+1),p.type=2}}}function p(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",a=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],s=e.FullPaths[0],i=s,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(i=e.FullPaths[l].slice(s.length),(o=e.FileIndex[l]).size&&o.content&&"\x01Sh33tJ5"!=i){i=i.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,(function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"})).replace(/[\u0080-\uFFFF]/g,(function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"}));for(var c=o.content,d=HW&&Buffer.isBuffer(c)?c.toString("binary"):w(c),u=0,m=Math.min(1024,d.length),h=0,p=0;p<=m;++p)(h=d.charCodeAt(p))>=32&&h<128&&++u;var f=u>=4*m/5;a.push(r),a.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+i),a.push("Content-Transfer-Encoding: "+(f?"quoted-printable":"base64")),a.push("Content-Type: "+ie(o,i)),a.push(""),a.push(f?le(d):oe(d))}return a.push(r+"--\r\n"),a.join("\r\n")}(e,n);if(h(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],s=[],i=bH(1),o=n.compression?8:0,l=0;0;var c=0,d=0,u=0,m=0,h=e.FullPaths[0],p=h,f=e.FileIndex[0],v=[],g=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(h.length),(f=e.FileIndex[c]).size&&f.content&&"\x01Sh33tJ5"!=p){var x=u,y=bH(p.length);for(d=0;d<p.length;++d)y.write_shift(1,127&p.charCodeAt(d));y=y.slice(0,y.l),v[m]=K$.buf(f.content,0);var b=f.content;8==o&&(b=N(b)),(i=bH(30)).write_shift(4,67324752),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),f.mt?a(i,f.mt):i.write_shift(4,0),i.write_shift(-4,8&l?0:v[m]),i.write_shift(4,8&l?0:b.length),i.write_shift(4,8&l?0:f.content.length),i.write_shift(2,y.length),i.write_shift(2,0),u+=i.length,r.push(i),u+=y.length,r.push(y),u+=b.length,r.push(b),8&l&&((i=bH(12)).write_shift(-4,v[m]),i.write_shift(4,b.length),i.write_shift(4,f.content.length),u+=i.l,r.push(i)),(i=bH(46)).write_shift(4,33639248),i.write_shift(2,0),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),i.write_shift(4,0),i.write_shift(-4,v[m]),i.write_shift(4,b.length),i.write_shift(4,f.content.length),i.write_shift(2,y.length),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i.write_shift(4,x),g+=i.l,s.push(i),g+=y.length,s.push(y),++m}return i=bH(22),i.write_shift(4,101010256),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,m),i.write_shift(2,m),i.write_shift(4,g),i.write_shift(4,u),i.write_shift(2,0),JW([JW(r),JW(s),i])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var a=e.FileIndex[r];if(a.content){var s=a.content.length;s>0&&(s<4096?t+=s+63>>6:n+=s+511>>9)}}for(var i=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+n+i+o,c=l+127>>7,d=c<=109?0:Math.ceil((c-109)/127);l+c+d+127>>7>c;)d=++c<=109?0:Math.ceil((c-109)/127);var u=[1,d,c,o,i,n,t,0];return e.FileIndex[0].size=t<<6,u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3),u}(e),s=bH(r[7]<<9),i=0,o=0;for(i=0;i<8;++i)s.write_shift(1,y[i]);for(i=0;i<8;++i)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),i=0;i<3;++i)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,r[2]),s.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:g),s.write_shift(4,r[3]),s.write_shift(-4,r[1]?r[0]-1:g),s.write_shift(4,r[1]),i=0;i<109;++i)s.write_shift(-4,i<r[2]?r[1]+i:-1);if(r[1])for(o=0;o<r[1];++o){for(;i<236+127*o;++i)s.write_shift(-4,i<r[2]?r[1]+i:-1);s.write_shift(-4,o===r[1]-1?g:o+1)}var l=function(e){for(o+=e;i<o-1;++i)s.write_shift(-4,i+1);e&&(++i,s.write_shift(-4,g))};for(o=i=0,o+=r[1];i<o;++i)s.write_shift(-4,j.DIFSECT);for(o+=r[2];i<o;++i)s.write_shift(-4,j.FATSECT);l(r[3]),l(r[4]);for(var c=0,d=0,u=e.FileIndex[0];c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&((d=u.content.length)<4096||(u.start=o,l(d+511>>9)));for(l(r[6]+7>>3);511&s.l;)s.write_shift(-4,j.ENDOFCHAIN);for(o=i=0,c=0;c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&(!(d=u.content.length)||d>=4096||(u.start=o,l(d+63>>6)));for(;511&s.l;)s.write_shift(-4,j.ENDOFCHAIN);for(i=0;i<r[4]<<2;++i){var m=e.FullPaths[i];if(m&&0!==m.length){u=e.FileIndex[i],0===i&&(u.start=u.size?u.start-1:g);var p=0===i&&n.root||u.name;if(d=2*(p.length+1),s.write_shift(64,p,"utf16le"),s.write_shift(2,d),s.write_shift(1,u.type),s.write_shift(1,u.color),s.write_shift(-4,u.L),s.write_shift(-4,u.R),s.write_shift(-4,u.C),u.clsid)s.write_shift(16,u.clsid,"hex");else for(c=0;c<4;++c)s.write_shift(4,0);s.write_shift(4,u.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,u.start),s.write_shift(4,u.size),s.write_shift(4,0)}else{for(c=0;c<17;++c)s.write_shift(4,0);for(c=0;c<3;++c)s.write_shift(4,-1);for(c=0;c<12;++c)s.write_shift(4,0)}}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>=4096)if(s.l=u.start+1<<9,HW&&Buffer.isBuffer(u.content))u.content.copy(s,s.l,0,u.size),s.l+=u.size+511&-512;else{for(c=0;c<u.size;++c)s.write_shift(1,u.content[c]);for(;511&c;++c)s.write_shift(1,0)}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>0&&u.size<4096)if(HW&&Buffer.isBuffer(u.content))u.content.copy(s,s.l,0,u.size),s.l+=u.size+63&-64;else{for(c=0;c<u.size;++c)s.write_shift(1,u.content[c]);for(;63&c;++c)s.write_shift(1,0)}if(HW)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var f,v=64,g=-2,x="d0cf11e0a1b11ae1",y=[208,207,17,224,161,177,26,225],b="00000000000000000000000000000000",j={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:g,FREESECT:-1,HEADER_SIGNATURE:x,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:b,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function w(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function N(e){return f?f.deflateRawSync(e):K(e)}var _=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function C(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var D="undefined"!==typeof Uint8Array,T=D?new Uint8Array(256):[],k=0;k<256;++k)T[k]=C(k);function A(e,t){var n=T[255&e];return t<=8?n>>>8-t:(n=n<<8|T[e>>8&255],t<=16?n>>>16-t:(n=n<<8|T[e>>16&255])>>>24-t)}function P(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function O(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function R(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function M(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function I(e,t,n){var r=7&t,a=t>>>3,s=(1<<n)-1,i=e[a]>>>r;return n<8-r?i&s:(i|=e[a+1]<<8-r,n<16-r?i&s:(i|=e[a+2]<<16-r,n<24-r?i&s:(i|=e[a+3]<<24-r)&s))}function L(e,t,n){var r=7&t,a=t>>>3;return r<=5?e[a]|=(7&n)<<r:(e[a]|=n<<r&255,e[a+1]=(7&n)>>8-r),t+3}function F(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function B(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function W(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function $(e,t){var n=e.length,r=2*n>t?2*n:t+5,a=0;if(n>=t)return e;if(HW){var s=GW(r);if(e.copy)e.copy(s);else for(;a<e.length;++a)s[a]=e[a];return s}if(D){var i=new Uint8Array(r);if(i.set)i.set(e);else for(;a<n;++a)i[a]=e[a];return i}return e.length=r,e}function U(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function z(e,t,n){var r=1,a=0,s=0,i=0,o=0,l=e.length,c=D?new Uint16Array(32):U(32);for(s=0;s<32;++s)c[s]=0;for(s=l;s<n;++s)e[s]=0;l=e.length;var d=D?new Uint16Array(l):U(l);for(s=0;s<l;++s)c[a=e[s]]++,r<a&&(r=a),d[s]=0;for(c[0]=0,s=1;s<=r;++s)c[s+16]=o=o+c[s-1]<<1;for(s=0;s<l;++s)0!=(o=e[s])&&(d[s]=c[o+16]++);var u=0;for(s=0;s<l;++s)if(0!=(u=e[s]))for(o=A(d[s],r)>>r-u,i=(1<<r+4-u)-1;i>=0;--i)t[o|i<<u]=15&u|s<<4;return r}var H=D?new Uint16Array(512):U(512),V=D?new Uint16Array(32):U(32);if(!D){for(var q=0;q<512;++q)H[q]=0;for(q=0;q<32;++q)V[q]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);z(e,V,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);z(n,H,288)}();var G=function(){for(var e=D?new Uint8Array(32768):[],t=0,n=0;t<E.length-1;++t)for(;n<E[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=D?new Uint8Array(259):[];for(t=0,n=0;t<S.length-1;++t)for(;n<S[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),a=n+r==e.length;for(t.write_shift(1,+a),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var a=0,s=0,i=D?new Uint16Array(32768):[];s<t.length;){var o=Math.min(65535,t.length-s);if(o<10){for(7&(a=L(n,a,+!(s+o!=t.length)))&&(a+=8-(7&a)),n.l=a/8|0,n.write_shift(2,o),n.write_shift(2,65535&~o);o-- >0;)n[n.l++]=t[s++];a=8*n.l}else{a=L(n,a,+!(s+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[s],d=-1,u=0;if((d=i[l=32767&(l<<5^c)])&&((d|=-32768&s)>s&&(d-=32768),d<s))for(;t[d+u]==t[s+u]&&u<250;)++u;if(u>2){(c=r[u])<=22?a=B(n,a,T[c+1]>>1)-1:(B(n,a,3),B(n,a+=5,T[c-23]>>5),a+=3);var m=c<8?0:c-4>>2;m>0&&(W(n,a,u-S[c]),a+=m),c=e[s-d],a=B(n,a,T[c]>>3),a-=3;var h=c<4?0:c-2>>1;h>0&&(W(n,a,s-d-E[c]),a+=h);for(var p=0;p<u;++p)i[l]=32767&s,l=32767&(l<<5^t[s]),++s;o-=u-1}else c<=143?c+=48:a=F(n,a,1),a=B(n,a,T[c]),i[l]=32767&s,++s}a=B(n,a,0)-1}}return n.l=(a+7)/8|0,n.l}(t,n)}}();function K(e){var t=bH(50+Math.floor(1.1*e.length)),n=G(e,t);return t.slice(0,n)}var Y=D?new Uint16Array(32768):U(32768),X=D?new Uint16Array(32768):U(32768),Z=D?new Uint16Array(128):U(128),J=1,Q=1;function ee(e,t){var n=R(e,t)+257,r=R(e,t+=5)+1,a=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var s=0,i=D?new Uint8Array(19):U(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=D?new Uint8Array(8):U(8),d=D?new Uint8Array(8):U(8),u=i.length,m=0;m<a;++m)i[_[m]]=s=O(e,t),l<s&&(l=s),c[s]++,t+=3;var h=0;for(c[0]=0,m=1;m<=l;++m)d[m]=h=h+c[m-1]<<1;for(m=0;m<u;++m)0!=(h=i[m])&&(o[m]=d[h]++);var p=0;for(m=0;m<u;++m)if(0!=(p=i[m])){h=T[o[m]]>>8-p;for(var f=(1<<7-p)-1;f>=0;--f)Z[h|f<<p]=7&p|m<<3}var v=[];for(l=1;v.length<n+r;)switch(t+=7&(h=Z[M(e,t)]),h>>>=3){case 16:for(s=3+P(e,t),t+=2,h=v[v.length-1];s-- >0;)v.push(h);break;case 17:for(s=3+O(e,t),t+=3;s-- >0;)v.push(0);break;case 18:for(s=11+M(e,t),t+=7;s-- >0;)v.push(0);break;default:v.push(h),l<h&&(l=h)}var g=v.slice(0,n),x=v.slice(n);for(m=n;m<286;++m)g[m]=0;for(m=r;m<30;++m)x[m]=0;return J=z(g,Y,286),Q=z(x,X,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[qW(t),2];for(var n=0,r=0,a=GW(t||1<<18),s=0,i=a.length>>>0,o=0,l=0;0==(1&r);)if(r=O(e,n),n+=3,r>>>1!=0)for(r>>1==1?(o=9,l=5):(n=ee(e,n),o=J,l=Q);;){!t&&i<s+32767&&(i=(a=$(a,s+32767)).length);var c=I(e,n,o),d=r>>>1==1?H[c]:Y[c];if(n+=15&d,0===((d>>>=4)>>>8&255))a[s++]=d;else{if(256==d)break;var u=(d-=257)<8?0:d-4>>2;u>5&&(u=0);var m=s+S[d];u>0&&(m+=I(e,n,u),n+=u),c=I(e,n,l),n+=15&(d=r>>>1==1?V[c]:X[c]);var h=(d>>>=4)<4?0:d-2>>1,p=E[d];for(h>0&&(p+=I(e,n,h),n+=h),!t&&i<m&&(i=(a=$(a,m+100)).length);s<m;)a[s]=a[s-p],++s}}else{7&n&&(n+=8-(7&n));var f=e[n>>>3]|e[1+(n>>>3)]<<8;if(n+=32,f>0)for(!t&&i<s+f&&(i=(a=$(a,s+f)).length);f-- >0;)a[s++]=e[n>>>3],n+=8}return t?[a,n+7>>>3]:[a.slice(0,s),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function re(e,t){var n=e;xH(n,0);var r={FileIndex:[],FullPaths:[]};m(r,{root:t.root});for(var a=n.length-4;(80!=n[a]||75!=n[a+1]||5!=n[a+2]||6!=n[a+3])&&a>=0;)--a;n.l=a+4,n.l+=4;var i=n.read_shift(2);n.l+=6;var o=n.read_shift(4);for(n.l=o,a=0;a<i;++a){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),d=n.read_shift(2),u=n.read_shift(2),h=n.read_shift(2);n.l+=8;var p=n.read_shift(4),f=s(n.slice(n.l+d,n.l+d+u));n.l+=d+u+h;var v=n.l;n.l=p+4,ae(n,l,c,r,f),n.l=v}return r}function ae(e,t,n,r,a){e.l+=2;var i=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,a=31&n,s=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(s-1),r.setDate(a);var i=31&t,o=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(o),r.setSeconds(i<<1),r}(e);if(8257&i)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),d=e.read_shift(4),u=e.read_shift(2),m=e.read_shift(2),h="",p=0;p<u;++p)h+=String.fromCharCode(e[e.l++]);if(m){var v=s(e.slice(e.l,e.l+m));(v[21589]||{}).mt&&(l=v[21589].mt),((a||{})[21589]||{}).mt&&(l=a[21589].mt)}e.l+=m;var g=e.slice(e.l,e.l+c);switch(o){case 8:g=function(e,t){if(!f)return te(e,t);var n=new(0,f.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,d);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var x=!1;8&i&&(134695760==e.read_shift(4)&&(e.read_shift(4),x=!0),c=e.read_shift(4),d=e.read_shift(4)),c!=t&&ne(x,"Bad compressed size: "+t+" != "+c),d!=n&&ne(x,"Bad uncompressed size: "+n+" != "+d),de(r,h,g,{unsafe:!0,mt:l})}var se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ie(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&se[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&se[r[1]]?se[r[1]]:"application/octet-stream"}function oe(e){for(var t=UW(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,(function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)}));"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),a=0;a<r.length;++a){var s=r[a];if(0!=s.length)for(var i=0;i<s.length;){var o=76,l=s.slice(i,i+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=s.slice(i,i+o),(i+=o)<s.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ce(e,t,n){for(var r,a="",s="",i="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":a=c[2].trim();break;case"content-type":i=c[2].trim();break;case"content-transfer-encoding":s=c[2].trim()}}switch(++o,s.toLowerCase()){case"base64":r=KW(zW(t.slice(o).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var a=0;a<t.length;++a)t[a]=t[a].replace(/[=][0-9A-Fa-f]{2}/g,(function(e){return String.fromCharCode(parseInt(e.slice(1),16))}));return KW(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var d=de(e,a.slice(n.length),r,{unsafe:!0});i&&(d.ctype=i)}function de(e,t,n,a){var s=a&&a.unsafe;s||m(e);var i=!s&&Y$.find(e,t);if(!i){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),i={name:r(t),type:2},e.FileIndex.push(i),e.FullPaths.push(o),s||Y$.utils.cfb_gc(e)}return i.content=n,i.size=n?n.length:0,a&&(a.CLSID&&(i.clsid=a.CLSID),a.mt&&(i.mt=a.mt),a.ct&&(i.ct=a.ct)),i}return t.find=function(e,t){var n=e.FullPaths.map((function(e){return e.toUpperCase()})),r=n.map((function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]})),a=!1;47===t.charCodeAt(0)?(a=!0,t=n[0].slice(0,-1)+t):a=-1!==t.indexOf("/");var s=t.toUpperCase(),i=!0===a?n.indexOf(s):r.indexOf(s);if(-1!==i)return e.FileIndex[i];var o=!s.match(e$);for(s=s.replace(QW,""),o&&(s=s.replace(e$,"!")),i=0;i<n.length;++i){if((o?n[i].replace(e$,"!"):n[i]).replace(QW,"")==s)return e.FileIndex[i];if((o?r[i].replace(e$,"!"):r[i]).replace(QW,"")==s)return e.FileIndex[i]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||HW&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return i(),o(e.readFileSync(t),n)}(t,n);case"base64":return o(KW(zW(t)),n);case"binary":return o(KW(t),n)}return o(t,n)},t.parse=o,t.write=function(t,n){var r=p(t,n);switch(n&&n.type||"buffer"){case"file":return i(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:w(r);case"base64":return UW("string"==typeof r?r:w(r));case"buffer":if(HW)return Buffer.isBuffer(r)?r:VW(r);case"array":return"string"==typeof r?KW(r):r}return r},t.writeFile=function(t,n,r){i();var a=p(t,r);e.writeFileSync(n,a)},t.utils={cfb_new:function(e){var t={};return m(t,e),t},cfb_add:de,cfb_del:function(e,t){m(e);var n=Y$.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){m(e);var a=Y$.find(e,t);if(a)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==a)return e.FileIndex[s].name=r(n),e.FullPaths[s]=n,!0;return!1},cfb_gc:function(e){h(e,!0)},ReadShift:mH,CheckField:gH,prep_blob:xH,bconcat:JW,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");f=e}catch(H5){console.error("cannot use native zlib: "+(H5.message||H5))}},_deflateRaw:K,_inflateRaw:te,consts:j},t}();let X$;function Z$(e){return"string"===typeof e?YW(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function J$(e,t,n){if("undefined"!==typeof X$&&X$.writeFileSync)return n?X$.writeFileSync(e,t,n):X$.writeFileSync(e,t);if("undefined"!==typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=YW(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?rz(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!==typeof Blob){var a=new Blob([Z$(r)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if("undefined"!==typeof saveAs)return saveAs(a,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(s)}),6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(null!=i.download)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(s)}),6e4),s}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=XW(t)),o.write(t),o.close(),t}catch(H5){if(!H5.message||!H5.message.match(/onstruct/))throw H5}throw new Error("cannot save file "+e)}function Q$(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function eU(e,t){for(var n=[],r=Q$(e),a=0;a!==r.length;++a)null==n[e[r[a]][t]]&&(n[e[r[a]][t]]=r[a]);return n}function tU(e){for(var t=[],n=Q$(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function nU(e){for(var t=[],n=Q$(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var rU=new Date(1899,11,30,0,0,0);function aU(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(rU.getTime()+6e4*(e.getTimezoneOffset()-rU.getTimezoneOffset())))/864e5}var sU=new Date,iU=rU.getTime()+6e4*(sU.getTimezoneOffset()-rU.getTimezoneOffset()),oU=sU.getTimezoneOffset();function lU(e){var t=new Date;return t.setTime(24*e*60*60*1e3+iU),t.getTimezoneOffset()!==oU&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-oU)),t}function cU(e){var t=0,n=0,r=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(n=1,s>3&&(r=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":n*=24;case"H":n*=60;case"M":if(!r)throw new Error("Unsupported ISO Duration Field: M");n*=60}t+=n*parseInt(a[s],10)}return t}var dU=new Date("2017-02-19T19:06:09.000Z"),uU=isNaN(dU.getFullYear())?new Date("2/19/17"):dU,mU=2017==uU.getFullYear();function hU(e,t){var n=new Date(e);if(mU)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==uU.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function pU(e,t){if(HW&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return rz(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return rz(IW(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return rz(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return rz(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,(function(e){return n[e]||e}))}catch(H5){}for(var r=[],a=0;a!=e.length;++a)r.push(String.fromCharCode(e[a]));return r.join("")}function fU(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=fU(e[n]));return t}function vU(e,t){for(var n="";n.length<t;)n+=e;return n}function gU(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,(function(){return n*=100,""}));return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,(function(e,t){return n=-n,t})),isNaN(t=Number(r))?t:t/n):t/n}var xU=["january","february","march","april","may","june","july","august","september","october","november","december"];function yU(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return n;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==xU.indexOf(i))return n}else if(i.match(/[a-z]/))return n;return r<0||r>8099?n:(a>0||s>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}var bU=function(){var e=5=="abacaba".split(/(:?b)/i).length;return function(t,n,r){if(e||"string"==typeof n)return t.split(n);for(var a=t.split(n),s=[a[0]],i=1;i<a.length;++i)s.push(r),s.push(a[i]);return s}}();function jU(e){return e?e.content&&e.type?pU(e.content,!0):e.data?FW(e.data):e.asNodeBuffer&&HW?FW(e.asNodeBuffer().toString("binary")):e.asBinary?FW(e.asBinary()):e._data&&e._data.getContent?FW(pU(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function wU(e){if(!e)return null;if(e.data)return MW(e.data);if(e.asNodeBuffer&&HW)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return"string"==typeof t?MW(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function NU(e,t){for(var n=e.FullPaths||Q$(e.files),r=t.toLowerCase().replace(/[\/]/g,"\\"),a=r.replace(/\\/g,"/"),s=0;s<n.length;++s){var i=n[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==i||a==i)return e.files?e.files[n[s]]:e.FileIndex[s]}return null}function _U(e,t){var n=NU(e,t);if(null==n)throw new Error("Cannot find file "+t+" in zip");return n}function SU(e,t,n){if(!n)return(r=_U(e,t))&&".bin"===r.name.slice(-4)?wU(r):jU(r);var r;if(!t)return null;try{return SU(e,t)}catch(H5){return null}}function EU(e,t,n){if(!n)return jU(_U(e,t));if(!t)return null;try{return EU(e,t)}catch(H5){return null}}function CU(e,t,n){if(!n)return wU(_U(e,t));if(!t)return null;try{return CU(e,t)}catch(H5){return null}}function DU(e){for(var t=e.FullPaths||Q$(e.files),n=[],r=0;r<t.length;++r)"/"!=t[r].slice(-1)&&n.push(t[r].replace(/^Root Entry[\/]/,""));return n.sort()}function TU(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=HW?VW(n):function(e){for(var t=[],n=0,r=e.length+250,a=qW(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[n++]=i;else if(i<2048)a[n++]=192|i>>6&31,a[n++]=128|63&i;else if(i>=55296&&i<57344){i=64+(1023&i);var o=1023&e.charCodeAt(++s);a[n++]=240|i>>8&7,a[n++]=128|i>>2&63,a[n++]=128|o>>6&15|(3&i)<<4,a[n++]=128|63&o}else a[n++]=224|i>>12&15,a[n++]=128|i>>6&63,a[n++]=128|63&i;n>r&&(t.push(a.slice(0,n)),n=0,a=qW(65535),r=65530)}return t.push(a.slice(0,n)),JW(t)}(n),Y$.utils.cfb_add(e,t,r);Y$.utils.cfb_add(e,t,n)}else e.file(t,n)}function kU(){return Y$.utils.cfb_new()}function AU(e,t){switch(t.type){case"base64":return Y$.read(e,{type:"base64"});case"binary":return Y$.read(e,{type:"binary"});case"buffer":case"array":return Y$.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function PU(e,t){if("/"==e.charAt(0))return e.slice(1);var n=t.split("/");"/"!=t.slice(-1)&&n.pop();for(var r=e.split("/");0!==r.length;){var a=r.shift();".."===a?n.pop():"."!==a&&n.push(a)}return n.join("/")}var OU='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',RU=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,MU=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/gm,IU=OU.match(MU)?MU:/<[^>]*>/g,LU=/<\w*:/,FU=/<(\/?)\w+:/;function BU(e,t,n){for(var r={},a=0,s=0;a!==e.length&&(32!==(s=e.charCodeAt(a))&&10!==s&&13!==s);++a);if(t||(r[0]=e.slice(0,a)),a===e.length)return r;var i=e.match(RU),o=0,l="",c=0,d="",u="",m=1;if(i)for(c=0;c!=i.length;++c){for(u=i[c],s=0;s!=u.length&&61!==u.charCodeAt(s);++s);for(d=u.slice(0,s).trim();32==u.charCodeAt(s+1);)++s;for(m=34==(a=u.charCodeAt(s+1))||39==a?1:0,l=u.slice(s+1+m,u.length-m),o=0;o!=d.length&&58!==d.charCodeAt(o);++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),r[d]=l,n||(r[d.toLowerCase()]=l);else{var h=(5===o&&"xmlns"===d.slice(0,5)?"xmlns":"")+d.slice(o+1);if(r[h]&&"ext"==d.slice(o-3,o))continue;r[h]=l,n||(r[h.toLowerCase()]=l)}}return r}function WU(e){return e.replace(FU,"<$1")}var $U={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},UU=tU($U),zU=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/gi,t=/_x([\da-fA-F]{4})_/gi;return function n(r){var a=r+"",s=a.indexOf("<![CDATA[");if(-1==s)return a.replace(e,(function(e,t){return $U[e]||String.fromCharCode(parseInt(t,e.indexOf("x")>-1?16:10))||e})).replace(t,(function(e,t){return String.fromCharCode(parseInt(t,16))}));var i=a.indexOf("]]>");return n(a.slice(0,s))+a.slice(s+9,i)+n(a.slice(i+3))}}(),HU=/[&<>'"]/g,VU=/[\u0000-\u0008\u000b-\u001f]/g;function qU(e){return(e+"").replace(HU,(function(e){return UU[e]})).replace(VU,(function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"}))}function GU(e){return qU(e).replace(/ /g,"_x0020_")}var KU=/[\u0000-\u001f]/g;function YU(e){return(e+"").replace(HU,(function(e){return UU[e]})).replace(/\n/g,"<br/>").replace(KU,(function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"}))}var XU=function(){var e=/&#(\d+);/g;function t(e,t){return String.fromCharCode(parseInt(t,10))}return function(n){return n.replace(e,t)}}();function ZU(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function JU(e){for(var t="",n=0,r=0,a=0,s=0,i=0,o=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(a=e.charCodeAt(n++),r>191&&r<224?(i=(31&r)<<6,i|=63&a,t+=String.fromCharCode(i)):(s=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&s):(o=((7&r)<<18|(63&a)<<12|(63&s)<<6|63&(i=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function QU(e){var t,n,r,a=qW(2*e.length),s=1,i=0,o=0;for(n=0;n<e.length;n+=s)s=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),s=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),s=3):(s=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(a[i++]=255&o,a[i++]=o>>>8,o=0),a[i++]=t%256,a[i++]=t>>>8;return a.slice(0,i).toString("ucs2")}function ez(e){return VW(e,"binary").toString("utf8")}var tz="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",nz=HW&&(ez(tz)==JU(tz)&&ez||QU(tz)==JU(tz)&&QU)||JU,rz=HW?function(e){return VW(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,a=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,a=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(63&a)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},az=function(){var e={};return function(t,n){var r=t+"|"+(n||"");return e[r]?e[r]:e[r]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",n||"")}}(),sz=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map((function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]}));return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}(),iz=function(){var e={};return function(t){return void 0!==e[t]?e[t]:e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}(),oz=/<\/?(?:vt:)?variant>/g,lz=/<(?:vt:)([^>]*)>([\s\S]*)</;function cz(e,t){var n=BU(e),r=e.match(iz(n.baseType))||[],a=[];if(r.length!=n.size){if(t.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return a}return r.forEach((function(e){var t=e.replace(oz,"").match(lz);t&&a.push({v:nz(t[2]),t:t[1]})})),a}var dz=/(^\s|\s$|\n)/;function uz(e,t){return"<"+e+(t.match(dz)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function mz(e){return Q$(e).map((function(t){return" "+t+'="'+e[t]+'"'})).join("")}function hz(e,t,n){return"<"+e+(null!=n?mz(n):"")+(null!=t?(t.match(dz)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function pz(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(H5){if(t)throw H5}return""}function fz(e){if(HW&&Buffer.isBuffer(e))return e.toString("utf8");if("string"===typeof e)return e;if("undefined"!==typeof Uint8Array&&e instanceof Uint8Array)return nz(XW(ZW(e)));throw new Error("Bad input format: expected Buffer or string")}var vz=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/gm,gz="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",xz="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",yz="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",bz="http://schemas.openxmlformats.org/package/2006/content-types",jz="http://schemas.openxmlformats.org/package/2006/relationships",wz="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",Nz="http://purl.org/dc/elements/1.1/",_z="http://purl.org/dc/terms/",Sz="http://purl.org/dc/dcmitype/",Ez="http://schemas.openxmlformats.org/officeDocument/2006/relationships",Cz="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",Dz="http://www.w3.org/2001/XMLSchema-instance",Tz="http://www.w3.org/2001/XMLSchema",kz=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Az="urn:schemas-microsoft-com:office:office",Pz="urn:schemas-microsoft-com:office:excel",Oz="urn:schemas-microsoft-com:office:spreadsheet",Rz="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",Mz="http://macVmlSchemaUri",Iz="urn:schemas-microsoft-com:vml",Lz="http://www.w3.org/TR/REC-html40";var Fz=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,a=e[0][n].length;r<a;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},Bz=HW?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map((function(e){return Buffer.isBuffer(e)?e:VW(e)}))):Fz(e)}:Fz,Wz=function(e,t,n){for(var r=[],a=t;a<n;a+=2)r.push(String.fromCharCode(oH(e,a)));return r.join("").replace(QW,"")},$z=HW?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(QW,""):Wz(e,t,n)}:Wz,Uz=function(e,t,n){for(var r=[],a=t;a<t+n;++a)r.push(("0"+e[a].toString(16)).slice(-2));return r.join("")},zz=HW?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):Uz(e,t,n)}:Uz,Hz=function(e,t,n){for(var r=[],a=t;a<n;a++)r.push(String.fromCharCode(iH(e,a)));return r.join("")},Vz=HW?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):Hz(e,t,n)}:Hz,qz=function(e,t){var n=cH(e,t);return n>0?Vz(e,t+4,t+4+n-1):""},Gz=qz,Kz=function(e,t){var n=cH(e,t);return n>0?Vz(e,t+4,t+4+n-1):""},Yz=Kz,Xz=function(e,t){var n=2*cH(e,t);return n>0?Vz(e,t+4,t+4+n-1):""},Zz=Xz,Jz=function(e,t){var n=cH(e,t);return n>0?$z(e,t+4,t+4+n):""},Qz=Jz,eH=function(e,t){var n=cH(e,t);return n>0?Vz(e,t+4,t+4+n):""},tH=eH,nH=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),a=15&e[t+6],s=5;s>=0;--s)a=256*a+e[t+s];return 2047==r?0==a?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,a+=Math.pow(2,52)),n*Math.pow(2,r-52)*a)}(e,t)},rH=nH,aH=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function sH(){$z=function(e,t,n){return LW.utils.decode(1200,e.slice(t,n)).replace(QW,"")},Vz=function(e,t,n){return LW.utils.decode(65001,e.slice(t,n))},Gz=function(e,t){var n=cH(e,t);return n>0?LW.utils.decode(TW,e.slice(t+4,t+4+n-1)):""},Yz=function(e,t){var n=cH(e,t);return n>0?LW.utils.decode(DW,e.slice(t+4,t+4+n-1)):""},Zz=function(e,t){var n=2*cH(e,t);return n>0?LW.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},Qz=function(e,t){var n=cH(e,t);return n>0?LW.utils.decode(1200,e.slice(t+4,t+4+n)):""},tH=function(e,t){var n=cH(e,t);return n>0?LW.utils.decode(65001,e.slice(t+4,t+4+n)):""}}HW&&(Gz=function(e,t){if(!Buffer.isBuffer(e))return qz(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Yz=function(e,t){if(!Buffer.isBuffer(e))return Kz(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Zz=function(e,t){if(!Buffer.isBuffer(e))return Xz(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},Qz=function(e,t){if(!Buffer.isBuffer(e))return Jz(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},tH=function(e,t){if(!Buffer.isBuffer(e))return eH(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},rH=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):nH(e,t)},aH=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof LW&&sH();var iH=function(e,t){return e[t]},oH=function(e,t){return 256*e[t+1]+e[t]},lH=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},cH=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},dH=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},uH=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function mH(e,t){var n,r,a,s,i,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,HW&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(i=0;i<e;++i)l+=String.fromCharCode(oH(this,o)),o+=2;e*=2;break;case"utf8":l=Vz(this,this.l,this.l+e);break;case"utf16le":e*=2,l=$z(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof LW)return mH.call(this,e,"dbcs");l=LW.utils.decode(DW,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=Gz(this,this.l),e=4+cH(this,this.l);break;case"lpstr-cp":l=Yz(this,this.l),e=4+cH(this,this.l);break;case"lpwstr":l=Zz(this,this.l),e=4+2*cH(this,this.l);break;case"lpp4":e=4+cH(this,this.l),l=Qz(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+cH(this,this.l),l=tH(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(a=iH(this,this.l+e++));)c.push(BW(a));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(a=oH(this,this.l+e));)c.push(BW(a)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,i=0;i<e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return a=iH(this,o),this.l=o+1,s=mH.call(this,e-i,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(BW(oH(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof LW){l=LW.utils.decode(DW,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",o=this.l,i=0;i!=e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return a=iH(this,o),this.l=o+1,s=mH.call(this,e-i,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push(BW(iH(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return n=iH(this,this.l),this.l++,n;case 2:return n=("i"===t?lH:oH)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?dH:uH)(this,this.l),this.l+=4,n):(r=cH(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return r=8==e?rH(this,this.l):rH([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=zz(this,this.l,e)}}return this.l+=e,l}var hH=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},pH=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},fH=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function vH(e,t,n){var r=0,a=0;if("dbcs"===n){for(a=0;a!=t.length;++a)fH(this,t.charCodeAt(a),this.l+2*a);r=2*t.length}else if("sbcs"===n){if("undefined"!==typeof LW&&874==TW)for(a=0;a!=t.length;++a){var s=LW.utils.encode(TW,t.charAt(a));this[this.l+a]=s[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=255&t.charCodeAt(a);r=t.length}else{if("hex"===n){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}if("utf16le"===n){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,hH(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=r?-t:t;isFinite(i)?0==i?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[n+o]=255&s;e[n+6]=(15&a)<<4|15&s,e[n+7]=a>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,pH(this,t,this.l)}}return this.l+=r,this}function gH(e,t){var n=zz(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function xH(e,t){e.l=t,e.read_shift=mH,e.chk=gH,e.write_shift=vH}function yH(e,t){e.l+=t}function bH(e){var t=qW(e);return xH(t,0),t}function jH(e,t,n){if(e){var r,a,s;xH(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){128&(o=e.read_shift(1))&&(o=(127&o)+((127&e.read_shift(1))<<7));var c=_Z[o]||_Z[65535];for(s=127&(r=e.read_shift(1)),a=1;a<4&&128&r;++a)s+=(127&(r=e.read_shift(1)))<<7*a;l=e.l+s;var d=c.f&&c.f(e,s,n);if(e.l=l,t(d,c,o))return}}}function wH(){var e=[],t=HW?256:2048,n=function(e){var t=bH(e);return xH(t,0),t},r=n(t),a=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},s=function(e){return r&&e<r.length-r.l?r:(a(),r=n(Math.max(e+1,t)))};return{next:s,push:function(e){a(),null==(r=e).l&&(r.l=r.length),s(t)},end:function(){return a(),JW(e)},_bufs:e}}function NH(e,t,n,r){var a,s=+t;if(!isNaN(s)){r||(r=_Z[s].p||(n||[]).length||0),a=1+(s>=128?1:0)+1,r>=128&&++a,r>=16384&&++a,r>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,128+(127&s)),i.write_shift(1,s>>7));for(var o=0;4!=o;++o){if(!(r>=128)){i.write_shift(1,r);break}i.write_shift(1,128+(127&r)),r>>=7}r>0&&aH(n)&&e.push(n)}}function _H(e,t,n){var r=fU(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function SH(e,t,n){var r=fU(e);return r.s=_H(r.s,t.s,n),r.e=_H(r.e,t.s,n),r}function EH(e,t){if(e.cRel&&e.c<0)for(e=fU(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=fU(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=OH(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function CH(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?EH(e.s,t.biff)+":"+EH(e.e,t.biff):(e.s.rRel?"":"$")+TH(e.s.r)+":"+(e.e.rRel?"":"$")+TH(e.e.r):(e.s.cRel?"":"$")+AH(e.s.c)+":"+(e.e.cRel?"":"$")+AH(e.e.c)}function DH(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function TH(e){return""+(e+1)}function kH(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function AH(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function PH(e){for(var t=0,n=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(n=26*n+(a-64))}return{c:n-1,r:t-1}}function OH(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function RH(e){var t=e.indexOf(":");return-1==t?{s:PH(e),e:PH(e)}:{s:PH(e.slice(0,t)),e:PH(e.slice(t+1))}}function MH(e,t){return"undefined"===typeof t||"number"===typeof t?MH(e.s,e.e):("string"!==typeof e&&(e=OH(e)),"string"!==typeof t&&(t=OH(t)),e==t?e:e+":"+t)}function IH(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,a=0,s=e.length;for(n=0;r<s&&!((a=e.charCodeAt(r)-64)<1||a>26);++r)n=26*n+a;for(t.s.c=--n,n=0;r<s&&!((a=e.charCodeAt(r)-48)<0||a>9);++r)n=10*n+a;if(t.s.r=--n,r===s||10!=a)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=s&&!((a=e.charCodeAt(r)-64)<1||a>26);++r)n=26*n+a;for(t.e.c=--n,n=0;r!=s&&!((a=e.charCodeAt(r)-48)<0||a>9);++r)n=10*n+a;return t.e.r=--n,t}function LH(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=U$(e.z,n?aU(t):t)}catch(H5){}try{return e.w=U$((e.XF||{}).numFmtId||(n?14:0),n?aU(t):t)}catch(H5){return""+t}}function FH(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?NV[e.v]||e.v:LH(e,void 0==t?e.v:t))}function BH(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function WH(e,t,n){var r=n||{},a=e?Array.isArray(e):r.dense;var s=e||(a?[]:{}),i=0,o=0;if(s&&null!=r.origin){if("number"==typeof r.origin)i=r.origin;else{var l="string"==typeof r.origin?PH(r.origin):r.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=IH(s["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),-1==i&&(c.e.r=i=d.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[u].length;++m)if("undefined"!==typeof t[u][m]){var h={v:t[u][m]},p=i+u,f=o+m;if(c.s.r>p&&(c.s.r=p),c.s.c>f&&(c.s.c=f),c.e.r<p&&(c.e.r=p),c.e.c<f&&(c.e.c=f),!t[u][m]||"object"!==typeof t[u][m]||Array.isArray(t[u][m])||t[u][m]instanceof Date)if(Array.isArray(h.v)&&(h.f=t[u][m][1],h.v=h.v[0]),null===h.v)if(h.f)h.t="n";else if(r.nullError)h.t="e",h.v=0;else{if(!r.sheetStubs)continue;h.t="z"}else"number"===typeof h.v?h.t="n":"boolean"===typeof h.v?h.t="b":h.v instanceof Date?(h.z=r.dateNF||d$[14],r.cellDates?(h.t="d",h.w=U$(h.z,aU(h.v))):(h.t="n",h.v=aU(h.v),h.w=U$(h.z,h.v))):h.t="s";else h=t[u][m];if(a)s[p]||(s[p]=[]),s[p][f]&&s[p][f].z&&(h.z=s[p][f].z),s[p][f]=h;else{var v=OH({c:f,r:p});s[v]&&s[v].z&&(h.z=s[v].z),s[v]=h}}}return c.s.c<1e7&&(s["!ref"]=MH(c)),s}function $H(e,t){return WH(null,e,t)}function UH(e,t){return t||(t=bH(4)),t.write_shift(4,e),t}function zH(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function HH(e,t){var n=!1;return null==t&&(n=!0,t=bH(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function VH(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function qH(e,t){var n=e.l,r=e.read_shift(1),a=zH(e),s=[],i={t:a,h:a};if(0!==(1&r)){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(VH(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=n+t,i}var GH=qH;function KH(e,t){var n=!1;return null==t&&(n=!0,t=bH(23+4*e.t.length)),t.write_shift(1,1),HH(e.t,t),t.write_shift(4,1),function(e,t){t||(t=bH(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),n?t.slice(0,t.l):t}function YH(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function XH(e,t){return null==t&&(t=bH(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function ZH(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function JH(e,t){return null==t&&(t=bH(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var QH=zH,eV=HH;function tV(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function nV(e,t){var n=!1;return null==t&&(n=!0,t=bH(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var rV=zH,aV=tV,sV=nV;function iV(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var a=0===r?rH([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):dH(t,0)>>2;return n?a/100:a}function oV(e,t){null==t&&(t=bH(4));var n=0,r=0,a=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?r=1:a==(0|a)&&a>=-(1<<29)&&a<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?a:e)<<2)+(n+2))}function lV(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var cV=lV,dV=function(e,t){return t||(t=bH(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function uV(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function mV(e,t){return(t||bH(8)).write_shift(8,e,"f")}function hV(e,t){if(t||(t=bH(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}function pV(e,t){var n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return{2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"}[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,1==t?"lpstr":"lpwstr")}var fV=80,vV=[fV,81],gV={1:{n:"CodePage",t:2},2:{n:"Category",t:fV},3:{n:"PresentationFormat",t:fV},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:fV},15:{n:"Company",t:fV},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:fV},27:{n:"ContentStatus",t:fV},28:{n:"Language",t:fV},29:{n:"Version",t:fV},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},xV={1:{n:"CodePage",t:2},2:{n:"Title",t:fV},3:{n:"Subject",t:fV},4:{n:"Author",t:fV},5:{n:"Keywords",t:fV},6:{n:"Comments",t:fV},7:{n:"Template",t:fV},8:{n:"LastAuthor",t:fV},9:{n:"RevNumber",t:fV},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:fV},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},yV={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},bV=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function jV(e){return e.map((function(e){return[e>>16&255,e>>8&255,255&e]}))}var wV=fU(jV([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),NV={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},_V={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},SV={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},EV={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function CV(e,t){var n,r=function(e){for(var t=[],n=Q$(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(SV),a=[];a[a.length]=OU,a[a.length]=hz("Types",null,{xmlns:bz,"xmlns:xsd":Tz,"xmlns:xsi":Dz}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map((function(e){return hz("Default",null,{Extension:e[0],ContentType:e[1]})})));var s=function(r){e[r]&&e[r].length>0&&(n=e[r][0],a[a.length]=hz("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:EV[r][t.bookType]||EV[r].xlsx}))},i=function(n){(e[n]||[]).forEach((function(e){a[a.length]=hz("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:EV[n][t.bookType]||EV[n].xlsx})}))},o=function(t){(e[t]||[]).forEach((function(e){a[a.length]=hz("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})}))};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var DV={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function TV(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function kV(e,t){var n={"!id":{}};if(!e)return n;"/"!==t.charAt(0)&&(t="/"+t);var r={};return(e.match(IU)||[]).forEach((function(e){var a=BU(e);if("<Relationship"===a[0]){var s={};s.Type=a.Type,s.Target=a.Target,s.Id=a.Id,a.TargetMode&&(s.TargetMode=a.TargetMode);var i="External"===a.TargetMode?a.Target:PU(a.Target,t);n[i]=s,r[a.Id]=s}})),n["!id"]=r,n}function AV(e){var t=[OU,hz("Relationships",null,{xmlns:jz})];return Q$(e["!id"]).forEach((function(n){t[t.length]=hz("Relationship",null,e["!id"][n])})),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function PV(e,t,n,r,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=r,a.Target=n,s?a.TargetMode=s:[DV.HLINK,DV.XPATH,DV.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function OV(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function RV(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+CW.version+"</meta:generator></office:meta></office:document-meta>"}var MV=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],IV=function(){for(var e=new Array(MV.length),t=0;t<MV.length;++t){var n=MV[t],r="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);e[t]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return e}();function LV(e){var t={};e=nz(e);for(var n=0;n<MV.length;++n){var r=MV[n],a=e.match(IV[n]);null!=a&&a.length>0&&(t[r[1]]=zU(a[1])),"date"===r[2]&&t[r[1]]&&(t[r[1]]=hU(t[r[1]]))}return t}function FV(e,t,n,r,a){null==a[e]&&null!=t&&""!==t&&(a[e]=t,t=qU(t),r[r.length]=n?hz(e,t,n):uz(e,t))}function BV(e,t){var n=t||{},r=[OU,hz("cp:coreProperties",null,{"xmlns:cp":gz,"xmlns:dc":Nz,"xmlns:dcterms":_z,"xmlns:dcmitype":Sz,"xmlns:xsi":Dz})],a={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&FV("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:pz(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a),null!=e.ModifiedDate&&FV("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:pz(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a));for(var s=0;s!=MV.length;++s){var i=MV[s],o=n.Props&&null!=n.Props[i[1]]?n.Props[i[1]]:e?e[i[1]]:null;!0===o?o="1":!1===o?o="0":"number"==typeof o&&(o=String(o)),null!=o&&FV(i[0],o,null,r,a)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var WV=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],$V=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function UV(e,t,n,r){var a=[];if("string"==typeof e)a=cz(e,r);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map((function(e){return{v:e}})));var i="string"==typeof t?cz(t,r).map((function(e){return e.v})):t,o=0,l=0;if(i.length>0)for(var c=0;c!==a.length;c+=2){switch(l=+a[c+1].v,a[c].v){case"Worksheets":case"\u5de5\u4f5c\u8868":case"\u041b\u0438\u0441\u0442\u044b":case"\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0639\u0645\u0644":case"\u30ef\u30fc\u30af\u30b7\u30fc\u30c8":case"\u05d2\u05dc\u05d9\u05d5\u05e0\u05d5\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4":case"Arbeitsbl\xe4tter":case"\xc7al\u0131\u015fma Sayfalar\u0131":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de c\xe1lculo":case"Planilhas":case"Regneark":case"Hojas de c\xe1lculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"\u540d\u524d\u4ed8\u304d\u4e00\u89a7":case"Benannte Bereiche":case"Navngivne omr\xe5der":n.NamedRanges=l,n.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=i.slice(o,o+l)}o+=l}}function zV(e){var t=[],n=hz;return e||(e={}),e.Application="SheetJS",t[t.length]=OU,t[t.length]=hz("Properties",null,{xmlns:yz,"xmlns:vt":Cz}),WV.forEach((function(r){if(void 0!==e[r[1]]){var a;switch(r[2]){case"string":a=qU(String(e[r[1]]));break;case"bool":a=e[r[1]]?"true":"false"}void 0!==a&&(t[t.length]=n(r[0],a))}})),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map((function(e){return"<vt:lpstr>"+qU(e)+"</vt:lpstr>"})).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var HV=/<[^>]+>[^<]*/g;function VV(e){var t=[OU,hz("Properties",null,{xmlns:xz,"xmlns:vt":Cz})];if(!e)return t.join("");var n=1;return Q$(e).forEach((function(r){++n,t[t.length]=hz("property",function(e,t){switch(typeof e){case"string":var n=hz("vt:lpwstr",qU(e));return t&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return hz((0|e)==e?"vt:i4":"vt:r8",qU(String(e)));case"boolean":return hz("vt:bool",e?"true":"false")}if(e instanceof Date)return hz("vt:filetime",pz(e));throw new Error("Unable to serialize "+e)}(e[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:qU(r)})})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var qV,GV={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function KV(e,t,n){qV||(qV=tU(GV)),e[t=qV[t]||t]=n}function YV(e){var t=e.read_shift(4),n=e.read_shift(4);return new Date(1e3*(n/1e7*Math.pow(2,32)+t/1e7-11644473600)).toISOString().replace(/\.000/,"")}function XV(e,t,n){var r=e.l,a=e.read_shift(0,"lpstr-cp");if(n)for(;e.l-r&3;)++e.l;return a}function ZV(e,t,n){var r=e.read_shift(0,"lpwstr");return n&&(e.l+=4-(r.length+1&3)&3),r}function JV(e,t,n){return 31===t?ZV(e):XV(e,0,n)}function QV(e,t,n){return JV(e,t,!1===n?0:4)}function eq(e){var t=e.l,n=rq(e,81);return 0==e[e.l]&&0==e[e.l+1]&&e.l-t&2&&(e.l+=2),[n,rq(e,3)]}function tq(e,t){for(var n=e.read_shift(4),r={},a=0;a!=n;++a){var s=e.read_shift(4),i=e.read_shift(4);r[s]=e.read_shift(i,1200===t?"utf16le":"utf8").replace(QW,"").replace(e$,"!"),1200===t&&i%2&&(e.l+=2)}return 3&e.l&&(e.l=e.l>>3<<2),r}function nq(e){var t=e.read_shift(4),n=e.slice(e.l,e.l+t);return e.l+=t,(3&t)>0&&(e.l+=4-(3&t)&3),n}function rq(e,t,n){var r,a=e.read_shift(2),s=n||{};if(e.l+=2,12!==t&&a!==t&&-1===vV.indexOf(t)&&(4126!=(65534&t)||4126!=(65534&a)))throw new Error("Expected type "+t+" saw "+a);switch(12===t?a:t){case 2:return r=e.read_shift(2,"i"),s.raw||(e.l+=2),r;case 3:return r=e.read_shift(4,"i");case 11:return 0!==e.read_shift(4);case 19:return r=e.read_shift(4);case 30:return XV(e,0,4).replace(QW,"");case 31:return ZV(e);case 64:return YV(e);case 65:return nq(e);case 71:return function(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}(e);case 80:return QV(e,a,!s.raw).replace(QW,"");case 81:return function(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return JV(e,t,0)}(e,a).replace(QW,"");case 4108:return function(e){for(var t=e.read_shift(4),n=[],r=0;r<t/2;++r)n.push(eq(e));return n}(e);case 4126:case 4127:return 4127==a?function(e){for(var t=e.read_shift(4),n=[],r=0;r!=t;++r){var a=e.l;n[r]=e.read_shift(0,"lpwstr").replace(QW,""),e.l-a&2&&(e.l+=2)}return n}(e):function(e){for(var t=e.read_shift(4),n=[],r=0;r!=t;++r)n[r]=e.read_shift(0,"lpstr-cp").replace(QW,"");return n}(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function aq(e,t){var n=bH(4),r=bH(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=bH(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var a=(n*=1e7)/Math.pow(2,32)|0;a>0&&(n%=Math.pow(2,32),r+=a);var s=bH(8);return s.write_shift(4,n),s.write_shift(4,r),s}(t);break;case 31:case 80:for((r=bH(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return JW([n,r])}function sq(e,t){var n=e.l,r=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,l=-1,c={};for(i=0;i!=a;++i){var d=e.read_shift(4),u=e.read_shift(4);s[i]=[d,u+n]}s.sort((function(e,t){return e[1]-t[1]}));var m={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var h=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,h=!1);break;case 80:case 4108:e.l<=s[i][1]&&(e.l=s[i][1],h=!1)}if((!t||0==i)&&e.l<=s[i][1]&&(h=!1,e.l=s[i][1]),h)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var p=t[s[i][0]];if(m[p.n]=rq(e,p.t,{raw:!0}),"version"===p.p&&(m[p.n]=String(m[p.n]>>16)+"."+("0000"+String(65535&m[p.n])).slice(-4)),"CodePage"==p.n)switch(m[p.n]){case 0:m[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:OW(o=m[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[p.n])}}else if(1===s[i][0]){if(o=m.CodePage=rq(e,2),OW(o),-1!==l){var f=e.l;e.l=s[l][1],c=tq(e,o),e.l=f}}else if(0===s[i][0]){if(0===o){l=i,e.l=s[i+1][1];continue}c=tq(e,o)}else{var v,g=c[s[i][0]];switch(e[e.l]){case 65:e.l+=4,v=nq(e);break;case 30:case 31:e.l+=4,v=QV(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,v=e.read_shift(4,"i");break;case 19:e.l+=4,v=e.read_shift(4);break;case 5:e.l+=4,v=e.read_shift(8,"f");break;case 11:e.l+=4,v=mq(e,4);break;case 64:e.l+=4,v=hU(YV(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[g]=v}}return e.l=n+r,m}var iq=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function oq(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function lq(e,t,n){var r=bH(8),a=[],s=[],i=8,o=0,l=bH(8),c=bH(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),a.push(c),i+=8+l.length,!t){(c=bH(8)).write_shift(4,0),a.unshift(c);var d=[bH(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var u=e[o][0];for((l=bH(8+2*(u.length+1)+(u.length%2?0:2))).write_shift(4,o+2),l.write_shift(4,u.length+1),l.write_shift(0,u,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=JW(d),s.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if((!t||t[e[o][0]])&&!(iq.indexOf(e[o][0])>-1||$V.indexOf(e[o][0])>-1)&&null!=e[o][1]){var m=e[o][1],h=0;if(t){var p=n[h=+t[e[o][0]]];if("version"==p.p&&"string"==typeof m){var f=m.split(".");m=(+f[0]<<16)+(+f[1]||0)}l=aq(p.t,m)}else{var v=oq(m);-1==v&&(v=31,m=String(m)),l=aq(v,m)}s.push(l),(c=bH(8)).write_shift(4,t?h:2+o),a.push(c),i+=8+l.length}var g=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,g),g+=s[o].length;return r.write_shift(4,i),r.write_shift(4,s.length),JW([r].concat(a).concat(s))}function cq(e,t,n){var r=e.content;if(!r)return{};xH(r,0);var a,s,i,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var c=r.read_shift(4),d=r.read_shift(16);if(d!==Y$.utils.consts.HEADER_CLSID&&d!==n)throw new Error("Bad PropertySet CLSID "+d);if(1!==(a=r.read_shift(4))&&2!==a)throw new Error("Unrecognized #Sets: "+a);if(s=r.read_shift(16),o=r.read_shift(4),1===a&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);2===a&&(i=r.read_shift(16),l=r.read_shift(4));var u,m=sq(r,t),h={SystemIdentifier:c};for(var p in m)h[p]=m[p];if(h.FMTID=s,1===a)return h;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);try{u=sq(r,null)}catch(H5){}for(p in u)h[p]=u[p];return h.FMTID=[s,i],h}function dq(e,t,n,r,a,s){var i=bH(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Y$.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var l=lq(e,n,r);if(o.push(l),a){var c=lq(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(c)}return JW(o)}function uq(e,t){return e.read_shift(t),null}function mq(e,t){return 1===e.read_shift(t)}function hq(e,t){return t||(t=bH(2)),t.write_shift(2,+!!e),t}function pq(e){return e.read_shift(2,"u")}function fq(e,t){return t||(t=bH(2)),t.write_shift(2,e),t}function vq(e,t){return function(e,t,n){for(var r=[],a=e.l+t;e.l<a;)r.push(n(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return r}(e,t,pq)}function gq(e,t,n){return n||(n=bH(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function xq(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),a="sbcs-cont",s=DW;(n&&n.biff>=8&&(DW=1200),n&&8!=n.biff)?12==n.biff&&(a="wstr"):e.read_shift(1)&&(a="dbcs-cont");n.biff>=2&&n.biff<=5&&(a="cpstr");var i=r?e.read_shift(r,a):"";return DW=s,i}function yq(e){var t=DW;DW=1200;var n,r=e.read_shift(2),a=e.read_shift(1),s=4&a,i=8&a,o=1+(1&a),l=0,c={};i&&(l=e.read_shift(2)),s&&(n=e.read_shift(4));var d=2==o?"dbcs-cont":"sbcs-cont",u=0===r?"":e.read_shift(r,d);return i&&(e.l+=4*l),s&&(e.l+=n),c.t=u,i||(c.raw="<t>"+c.t+"</t>",c.r=c.t),DW=t,c}function bq(e){var t=e.t||"",n=bH(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=bH(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),JW([n,r])}function jq(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function wq(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):jq(e,r,n)}function Nq(e,t,n){if(n.biff>5)return wq(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function _q(e,t,n){return n||(n=bH(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function Sq(e,t){var n=e.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return function(e){var t=e.read_shift(4),n=e.l,r=!1;t>24&&(e.l+=t-24,"795881f43b1d7f48af2c825dc4852763"===e.read_shift(16)&&(r=!0),e.l=n);var a=e.read_shift((r?t-24:t)>>1,"utf16le").replace(QW,"");return r&&(e.l+=24),a}(e);case"0303000000000000c000000000000046":return function(e){for(var t=e.read_shift(2),n="";t-- >0;)n+="../";var r=e.read_shift(0,"lpstr-ansi");if(e.l+=2,57005!=e.read_shift(2))throw new Error("Bad FileMoniker");if(0===e.read_shift(4))return n+r.replace(/\\/g,"/");var a=e.read_shift(4);if(3!=e.read_shift(2))throw new Error("Bad FileMoniker");return n+e.read_shift(a>>1,"utf16le").replace(QW,"")}(e);default:throw new Error("Unsupported Moniker "+n)}}function Eq(e){var t=e.read_shift(4);return t>0?e.read_shift(t,"utf16le").replace(QW,""):""}function Cq(e,t){t||(t=bH(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function Dq(e){var t=bH(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var a=r.indexOf("#"),s=a>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(n=0;n<i.length;++n)t.write_shift(4,i[n]);if(28==s)Cq(r=r.slice(1),t);else if(2&s){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<i.length;++n)t.write_shift(1,parseInt(i[n],16));var o=a>-1?r.slice(0,a):r;for(t.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)t.write_shift(2,o.charCodeAt(n));t.write_shift(2,0),8&s&&Cq(a>-1?r.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<i.length;++n)t.write_shift(1,parseInt(i[n],16));for(var l=0;"../"==r.slice(3*l,3*l+3)||"..\\"==r.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)t.write_shift(1,255&r.charCodeAt(n+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function Tq(e){return[e.read_shift(1),e.read_shift(1),e.read_shift(1),e.read_shift(1)]}function kq(e,t){var n=Tq(e);return n[3]=0,n}function Aq(e){return{r:e.read_shift(2),c:e.read_shift(2),ixfe:e.read_shift(2)}}function Pq(e,t,n,r){return r||(r=bH(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function Oq(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function Rq(e){return[e.read_shift(2),iV(e)]}function Mq(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function Iq(e,t){return t||(t=bH(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Lq(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(1),r:t},e:{c:e.read_shift(1),r:n}}}var Fq=Lq;function Bq(e){e.l+=4;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(2);return e.l+=12,[n,t,r]}function Wq(e){e.l+=2,e.l+=e.read_shift(2)}var $q={0:Wq,4:Wq,5:Wq,6:Wq,7:function(e){return e.l+=4,e.cf=e.read_shift(2),{}},8:Wq,9:Wq,10:Wq,11:Wq,12:Wq,13:function(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t},14:Wq,15:Wq,16:Wq,17:Wq,18:Wq,19:Wq,20:Wq,21:Bq};function Uq(e,t){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=e.read_shift(2),(t-=2)>=2&&(n.dt=e.read_shift(2),e.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return e.read_shift(t),n}function zq(e,t,n){var r=1536,a=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,a=8;break;case"biff4":r=4,a=6;break;case"biff3":r=3,a=6;break;case"biff2":r=2,a=4;break;default:throw new Error("unsupported BIFF version")}var s=bH(a);return s.write_shift(2,r),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Hq(e,t){var n=!t||t.biff>=8?2:1,r=bH(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=r.slice(0,r.l);return a.l=r.l,a}function Vq(e,t,n){var r=0;n&&2==n.biff||(r=e.read_shift(2));var a=e.read_shift(2);return n&&2==n.biff&&(r=1-(a>>15),a&=32767),[{Unsynced:1&r,DyZero:(2&r)>>1,ExAsc:(4&r)>>2,ExDsc:(8&r)>>3},a]}function qq(e,t,n,r){var a=n&&5==n.biff;r||(r=bH(a?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(a?1:2,t.length),a||r.write_shift(1,1),r.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return null==s.l&&(s.l=s.length),s}var Gq=Nq;function Kq(e,t,n){var r=e.l+t,a=8!=n.biff&&n.biff?2:4,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),l=e.read_shift(2);return e.l=r,{s:{r:s,c:o},e:{r:i,c:l}}}function Yq(e,t,n,r){var a=n&&5==n.biff;r||(r=bH(a?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),a||r.write_shift(4,0),r.write_shift(2,0),r}function Xq(e,t,n){var r=Aq(e);2!=n.biff&&9!=t||++e.l;var a=function(e){var t=e.read_shift(1);return 1===e.read_shift(1)?t:1===t}(e);return r.val=a,r.t=!0===a||!1===a?"b":"e",r}var Zq=function(e,t,n){return 0===t?"":Nq(e,0,n)};function Jq(e,t,n){var r,a=e.read_shift(2),s={fBuiltIn:1&a,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return 14849===n.sbcch&&(r=function(e,t,n){e.l+=4,t-=4;var r=e.l+t,a=xq(e,0,n),s=e.read_shift(2);if(s!==(r-=e.l))throw new Error("Malformed AddinUdf: padding = "+r+" != "+s);return e.l+=s,a}(e,t-2,n)),s.body=r||e.read_shift(t-2),"string"===typeof r&&(s.Name=r),s}var Qq=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function eG(e,t,n){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(n&&2==n.biff?1:2),l=0;(!n||n.biff>=5)&&(5!=n.biff&&(e.l+=2),l=e.read_shift(2),5==n.biff&&(e.l+=2),e.l+=4);var c=jq(e,i,n);32&a&&(c=Qq[c.charCodeAt(0)]);var d=r-e.l;n&&2==n.biff&&--d;var u=r!=e.l&&0!==o&&d>0?function(e,t,n,r){var a,s=e.l+t,i=pY(e,r,n);s!==e.l&&(a=hY(e,s-e.l,i,n));return[i,a]}(e,d,n,o):[];return{chKey:s,Name:c,itab:l,rgce:u}}function tG(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=xq(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],a=e.l+t,s=e.read_shift(n.biff>8?4:2);0!==s--;)r.push(Oq(e,n.biff,n));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return r}function nG(e,t,n){var r=Fq(e,6);switch(n.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[r,bY(e,t,n)]}var rG={8:function(e,t){var n=e.l+t;e.l+=10;var r=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=n,{fmt:r}}};function aG(e){var t=bH(24),n=PH(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(r[a],16));return JW([t,Dq(e[1])])}function sG(e){var t=e[1].Tooltip,n=bH(10+2*(t.length+1));n.write_shift(2,2048);var r=PH(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var a=0;a<t.length;++a)n.write_shift(2,t.charCodeAt(a));return n.write_shift(2,0),n}function iG(e,t,n){if(!n.cellStyles)return yH(e,t);var r=n&&n.biff>=12?4:2,a=e.read_shift(r),s=e.read_shift(r),i=e.read_shift(r),o=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var c={s:a,e:s,w:i,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}var oG=Aq,lG=vq,cG=wq;var dG=[2,3,48,49,131,139,140,245],uG=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=tU({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var a=$H(function(t,n){var r=[],a=qW(1);switch(n.type){case"base64":a=KW(zW(t));break;case"binary":a=KW(t);break;case"buffer":case"array":a=t}xH(a,0);var s=a.read_shift(1),i=!!(136&s),o=!1,l=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,i=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var c=0,d=521;2==s&&(c=a.read_shift(2)),a.l+=3,2!=s&&(c=a.read_shift(4)),c>1048576&&(c=1e6),2!=s&&(d=a.read_shift(2));var u=a.read_shift(2),m=n.codepage||1252;2!=s&&(a.l+=16,a.read_shift(1),0!==a[a.l]&&(m=e[a[a.l]]),a.l+=1,a.l+=2),l&&(a.l+=36);for(var h=[],p={},f=Math.min(a.length,2==s?521:d-10-(o?264:0)),v=l?32:11;a.l<f&&13!=a[a.l];)switch((p={}).name=LW.utils.decode(m,a.slice(a.l,a.l+v)).replace(/[\u0000\r\n].*$/g,""),a.l+=v,p.type=String.fromCharCode(a.read_shift(1)),2==s||l||(p.offset=a.read_shift(4)),p.len=a.read_shift(1),2==s&&(p.offset=a.read_shift(2)),p.dec=a.read_shift(1),p.name.length&&h.push(p),2!=s&&(a.l+=l?13:14),p.type){case"B":o&&8==p.len||!n.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==a[a.l]&&(a.l=d-1),13!==a.read_shift(1))throw new Error("DBF Terminator not found "+a.l+" "+a[a.l]);a.l=d;var g=0,x=0;for(r[0]=[],x=0;x!=h.length;++x)r[0][x]=h[x].name;for(;c-- >0;)if(42!==a[a.l])for(++a.l,r[++g]=[],x=0,x=0;x!=h.length;++x){var y=a.slice(a.l,a.l+h[x].len);a.l+=h[x].len,xH(y,0);var b=LW.utils.decode(m,y);switch(h[x].type){case"C":b.trim().length&&(r[g][x]=b.replace(/\s+$/,""));break;case"D":8===b.length?r[g][x]=new Date(+b.slice(0,4),+b.slice(4,6)-1,+b.slice(6,8)):r[g][x]=b;break;case"F":r[g][x]=parseFloat(b.trim());break;case"+":case"I":r[g][x]=l?2147483648^y.read_shift(-4,"i"):y.read_shift(4,"i");break;case"L":switch(b.trim().toUpperCase()){case"Y":case"T":r[g][x]=!0;break;case"N":case"F":r[g][x]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+b+"|")}break;case"M":if(!i)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));r[g][x]="##MEMO##"+(l?parseInt(b.trim(),10):y.read_shift(4));break;case"N":(b=b.replace(/\u0000/g,"").trim())&&"."!=b&&(r[g][x]=+b||0);break;case"@":r[g][x]=new Date(y.read_shift(-8,"f")-621356832e5);break;case"T":r[g][x]=new Date(864e5*(y.read_shift(4)-2440588)+y.read_shift(4));break;case"Y":r[g][x]=y.read_shift(4,"i")/1e4+y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[g][x]=-y.read_shift(-8,"f");break;case"B":if(o&&8==h[x].len){r[g][x]=y.read_shift(8,"f");break}case"G":case"P":y.l+=h[x].len;break;case"0":if("_NullFlags"===h[x].name)break;default:throw new Error("DBF Unsupported data type "+h[x].type)}}else a.l+=u;if(2!=s&&a.l<a.length&&26!=a[a.l++])throw new Error("DBF EOF Marker missing "+(a.l-1)+" of "+a.length+" "+a[a.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=h,r}(t,r),r);return a["!cols"]=r.DBF.map((function(e){return{wch:e.len,DBF:e}})),delete r.DBF,a}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return BH(n(e,t),t)}catch(H5){if(t&&t.WTF)throw H5}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var a=n||{};if(+a.codepage>=0&&OW(+a.codepage),"string"==a.type)throw new Error("Cannot write DBF to JS string");var s=wH(),i=GJ(e,{header:1,raw:!0,cellDates:!0}),o=i[0],l=i.slice(1),c=e["!cols"]||[],d=0,u=0,m=0,h=1;for(d=0;d<o.length;++d)if(((c[d]||{}).DBF||{}).name)o[d]=c[d].DBF.name,++m;else if(null!=o[d]){if(++m,"number"===typeof o[d]&&(o[d]=o[d].toString(10)),"string"!==typeof o[d])throw new Error("DBF Invalid column name "+o[d]+" |"+typeof o[d]+"|");if(o.indexOf(o[d])!==d)for(u=0;u<1024;++u)if(-1==o.indexOf(o[d]+"_"+u)){o[d]+="_"+u;break}}var p=IH(e["!ref"]),f=[],v=[],g=[];for(d=0;d<=p.e.c-p.s.c;++d){var x="",y="",b=0,j=[];for(u=0;u<l.length;++u)null!=l[u][d]&&j.push(l[u][d]);if(0!=j.length&&null!=o[d]){for(u=0;u<j.length;++u){switch(typeof j[u]){case"number":y="B";break;case"string":default:y="C";break;case"boolean":y="L";break;case"object":y=j[u]instanceof Date?"D":"C"}b=Math.max(b,String(j[u]).length),x=x&&x!=y?"C":y}b>250&&(b=250),"C"==(y=((c[d]||{}).DBF||{}).type)&&c[d].DBF.len>b&&(b=c[d].DBF.len),"B"==x&&"N"==y&&(x="N",g[d]=c[d].DBF.dec,b=c[d].DBF.len),v[d]="C"==x||"N"==y?b:r[x]||0,h+=v[d],f[d]=x}else f[d]="?"}var w=s.next(32);for(w.write_shift(4,318902576),w.write_shift(4,l.length),w.write_shift(2,296+32*m),w.write_shift(2,h),d=0;d<4;++d)w.write_shift(4,0);for(w.write_shift(4,(+t[TW]||3)<<8),d=0,u=0;d<o.length;++d)if(null!=o[d]){var N=s.next(32),_=(o[d].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);N.write_shift(1,_,"sbcs"),N.write_shift(1,"?"==f[d]?"C":f[d],"sbcs"),N.write_shift(4,u),N.write_shift(1,v[d]||r[f[d]]||0),N.write_shift(1,g[d]||0),N.write_shift(1,2),N.write_shift(4,0),N.write_shift(1,0),N.write_shift(4,0),N.write_shift(4,0),u+=v[d]||r[f[d]]||0}var S=s.next(264);for(S.write_shift(4,13),d=0;d<65;++d)S.write_shift(4,0);for(d=0;d<l.length;++d){var E=s.next(h);for(E.write_shift(1,0),u=0;u<o.length;++u)if(null!=o[u])switch(f[u]){case"L":E.write_shift(1,null==l[d][u]?63:l[d][u]?84:70);break;case"B":E.write_shift(8,l[d][u]||0,"f");break;case"N":var C="0";for("number"==typeof l[d][u]&&(C=l[d][u].toFixed(g[u]||0)),m=0;m<v[u]-C.length;++m)E.write_shift(1,32);E.write_shift(1,C,"sbcs");break;case"D":l[d][u]?(E.write_shift(4,("0000"+l[d][u].getFullYear()).slice(-4),"sbcs"),E.write_shift(2,("00"+(l[d][u].getMonth()+1)).slice(-2),"sbcs"),E.write_shift(2,("00"+l[d][u].getDate()).slice(-2),"sbcs")):E.write_shift(8,"00000000","sbcs");break;case"C":var D=String(null!=l[d][u]?l[d][u]:"").slice(0,v[u]);for(E.write_shift(1,D,"sbcs"),m=0;m<v[u]-D.length;++m)E.write_shift(1,32)}}return s.next(1).write_shift(1,26),s.end()}}}(),mG=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+Q$(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?WW(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:WW(r)};function a(e,a){var s,i=e.split(/[\n\r]+/),o=-1,l=-1,c=0,d=0,u=[],m=[],h=null,p={},f=[],v=[],g=[],x=0;for(+a.codepage>=0&&OW(+a.codepage);c!==i.length;++c){x=0;var y,b=i[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),j=b.replace(/;;/g,"\0").split(";").map((function(e){return e.replace(/\u0000/g,";")})),w=j[0];if(b.length>0)switch(w){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==j[1].charAt(0)&&m.push(b.slice(3).replace(/;;/g,";"));break;case"C":var N=!1,_=!1,S=!1,E=!1,C=-1,D=-1;for(d=1;d<j.length;++d)switch(j[d].charAt(0)){case"A":case"G":break;case"X":l=parseInt(j[d].slice(1))-1,_=!0;break;case"Y":for(o=parseInt(j[d].slice(1))-1,_||(l=0),s=u.length;s<=o;++s)u[s]=[];break;case"K":'"'===(y=j[d].slice(1)).charAt(0)?y=y.slice(1,y.length-1):"TRUE"===y?y=!0:"FALSE"===y?y=!1:isNaN(gU(y))?isNaN(yU(y).getDate())||(y=hU(y)):(y=gU(y),null!==h&&F$(h)&&(y=lU(y))),"undefined"!==typeof LW&&"string"==typeof y&&"string"!=(a||{}).type&&(a||{}).codepage&&(y=LW.utils.decode(a.codepage,y)),N=!0;break;case"E":E=!0;var T=UK(j[d].slice(1),{r:o,c:l});u[o][l]=[u[o][l],T];break;case"S":S=!0,u[o][l]=[u[o][l],"S5S"];break;case"R":C=parseInt(j[d].slice(1))-1;break;case"C":D=parseInt(j[d].slice(1))-1;break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+b)}if(N&&(u[o][l]&&2==u[o][l].length?u[o][l][0]=y:u[o][l]=y,h=null),S){if(E)throw new Error("SYLK shared formula cannot have own formula");var k=C>-1&&u[C][D];if(!k||!k[1])throw new Error("SYLK shared formula cannot find base");u[o][l][1]=VK(k[1],{r:o-C,c:l-D})}break;case"F":var A=0;for(d=1;d<j.length;++d)switch(j[d].charAt(0)){case"X":l=parseInt(j[d].slice(1))-1,++A;break;case"Y":for(o=parseInt(j[d].slice(1))-1,s=u.length;s<=o;++s)u[s]=[];break;case"M":x=parseInt(j[d].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":h=m[parseInt(j[d].slice(1))];break;case"W":for(g=j[d].slice(1).split(" "),s=parseInt(g[0],10);s<=parseInt(g[1],10);++s)x=parseInt(g[2],10),v[s-1]=0===x?{hidden:!0}:{wch:x},JG(v[s-1]);break;case"C":v[l=parseInt(j[d].slice(1))-1]||(v[l]={});break;case"R":f[o=parseInt(j[d].slice(1))-1]||(f[o]={}),x>0?(f[o].hpt=x,f[o].hpx=tK(x)):0===x&&(f[o].hidden=!0);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+b)}A<1&&(h=null);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+b)}}return f.length>0&&(p["!rows"]=f),v.length>0&&(p["!cols"]=v),a&&a.sheetRows&&(u=u.slice(0,a.sheetRows)),[u,p]}function s(e,t){var n=function(e,t){switch(t.type){case"base64":return a(zW(e),t);case"binary":return a(e,t);case"buffer":return a(HW&&Buffer.isBuffer(e)?e.toString("binary"):XW(e),t);case"array":return a(pU(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],s=n[1],i=$H(r,t);return Q$(s).forEach((function(e){i[e]=s[e]})),i}function i(e,t,n,r){var a="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":a+=e.v||0,e.f&&!e.F&&(a+=";E"+HK(e.f,{r:n,c:r}));break;case"b":a+=e.v?"TRUE":"FALSE";break;case"e":a+=e.w||e.v;break;case"d":a+='"'+(e.w||e.v)+'"';break;case"s":a+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return a}return e["|"]=254,{to_workbook:function(e,t){return BH(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var n,r,a=["ID;PWXL;N;E"],s=[],o=IH(e["!ref"]),l=Array.isArray(e),c="\r\n";a.push("P;PGeneral"),a.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=a,e["!cols"].forEach((function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=GG(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=KG(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)}))),e["!rows"]&&function(e,t){t.forEach((function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*eK(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))}))}(a,e["!rows"]),a.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var d=o.s.r;d<=o.e.r;++d)for(var u=o.s.c;u<=o.e.c;++u){var m=OH({r:d,c:u});(n=l?(e[d]||[])[u]:e[m])&&(null!=n.v||n.f&&!n.F)&&s.push(i(n,0,d,u))}return a.join(c)+c+s.join(c)+c+"E"+c}}}(),hG=function(){function e(e,t){for(var n=e.split("\n"),r=-1,a=-1,s=0,i=[];s!==n.length;++s)if("BOT"!==n[s].trim()){if(!(r<0)){for(var o=n[s].trim().split(","),l=o[0],c=o[1],d=n[++s]||"";1&(d.match(/["]/g)||[]).length&&s<n.length-1;)d+="\n"+n[++s];switch(d=d.trim(),+l){case-1:if("BOT"===d){i[++r]=[],a=0;continue}if("EOD"!==d)throw new Error("Unrecognized DIF special command "+d);break;case 0:"TRUE"===d?i[r][a]=!0:"FALSE"===d?i[r][a]=!1:isNaN(gU(c))?isNaN(yU(c).getDate())?i[r][a]=c:i[r][a]=hU(c):i[r][a]=gU(c),++a;break;case 1:(d=(d=d.slice(1,d.length-1)).replace(/""/g,'"'))&&d.match(/^=".*"$/)&&(d=d.slice(2,-1)),i[r][a++]=""!==d?d:null}if("EOD"===d)break}}else i[++r]=[],a=0;return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}function t(t,n){return $H(function(t,n){switch(n.type){case"base64":return e(zW(t),n);case"binary":return e(t,n);case"buffer":return e(HW&&Buffer.isBuffer(t)?t.toString("binary"):XW(t),n);case"array":return e(pU(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}return{to_workbook:function(e,n){return BH(t(e,n),n)},to_sheet:t,from_sheet:function(){var e=function(e,t,n,r,a){e.push(t),e.push(n+","+r),e.push('"'+a.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,a=[],s=IH(n["!ref"]),i=Array.isArray(n);e(a,"TABLE",0,1,"sheetjs"),e(a,"VECTORS",0,s.e.r-s.s.r+1,""),e(a,"TUPLES",0,s.e.c-s.s.c+1,""),e(a,"DATA",0,0,"");for(var o=s.s.r;o<=s.e.r;++o){t(a,-1,0,"BOT");for(var l=s.s.c;l<=s.e.c;++l){var c=OH({r:o,c:l});if(r=i?(n[o]||[])[l]:n[c])switch(r.t){case"n":var d=r.w;d||null==r.v||(d=r.v),null==d?r.f&&!r.F?t(a,1,0,"="+r.f):t(a,1,0,""):t(a,0,d,"V");break;case"b":t(a,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(a,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=U$(r.z||d$[14],aU(hU(r.v)))),t(a,0,r.w,"V");break;default:t(a,1,0,"")}else t(a,1,0,"")}}t(a,-1,0,"EOD");return a.join("\r\n")}}()}}(),pG=function(){function e(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(e,t){return $H(function(e,t){for(var n=e.split("\n"),r=-1,a=-1,s=0,i=[];s!==n.length;++s){var o=n[s].trim().split(":");if("cell"===o[0]){var l=PH(o[1]);if(i.length<=l.r)for(r=i.length;r<=l.r;++r)i[r]||(i[r]=[]);switch(r=l.r,a=l.c,o[2]){case"t":i[r][a]=o[3].replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n");break;case"v":i[r][a]=+o[3];break;case"vtf":var c=o[o.length-1];case"vtc":"nl"===o[3]?i[r][a]=!!+o[4]:i[r][a]=+o[4],"vtf"==o[2]&&(i[r][a]=[i[r][a],c])}}}return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}(e,t),t)}var n=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),r=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),s="--SocialCalcSpreadsheetControlSave--";function i(t){if(!t||!t["!ref"])return"";for(var n,r=[],a=[],s="",i=RH(t["!ref"]),o=Array.isArray(t),l=i.s.r;l<=i.e.r;++l)for(var c=i.s.c;c<=i.e.c;++c)if(s=OH({r:l,c:c}),(n=o?(t[l]||[])[c]:t[s])&&null!=n.v&&"z"!==n.t){switch(a=["cell",s,"t"],n.t){case"s":case"str":a.push(e(n.v));break;case"n":n.f?(a[2]="vtf",a[3]="n",a[4]=n.v,a[5]=e(n.f)):(a[2]="v",a[3]=n.v);break;case"b":a[2]="vt"+(n.f?"f":"c"),a[3]="nl",a[4]=n.v?"1":"0",a[5]=e(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var d=aU(hU(n.v));a[2]="vtc",a[3]="nd",a[4]=""+d,a[5]=n.w||U$(n.z||d$[14],d);break;case"e":continue}r.push(a.join(":"))}return r.push("sheet:c:"+(i.e.c-i.s.c+1)+":r:"+(i.e.r-i.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,n){return BH(t(e,n),n)},to_sheet:t,from_sheet:function(e){return[n,r,a,r,i(e),s].join("\n")}}}(),fG=function(){function e(e,t,n,r,a){a.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(gU(e))?isNaN(yU(e).getDate())?t[n][r]=e:t[n][r]=hU(e):t[n][r]=gU(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},a=!1,s=0,i=0;s<e.length;++s)34==(i=e.charCodeAt(s))?a=!a:!a&&i in t&&(r[i]=(r[i]||0)+1);for(s in i=[],r)Object.prototype.hasOwnProperty.call(r,s)&&i.push([r[s],s]);if(!i.length)for(s in r=n)Object.prototype.hasOwnProperty.call(r,s)&&i.push([r[s],s]);return i.sort((function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]})),t[i.pop()[1]]||44}function a(e,t){var n=t||{},a="";var s=n.dense?[]:{},i={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(a=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(a=e.charAt(4),e=e.slice(6)):a=r(e.slice(0,1024)):a=n&&n.FS?n.FS:r(e.slice(0,1024));var o=0,l=0,c=0,d=0,u=0,m=a.charCodeAt(0),h=!1,p=0,f=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var v=null!=n.dateNF?function(e){var t="number"==typeof e?d$[e]:e;return t=t.replace(G$,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function g(){var t=e.slice(d,u),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(r.t="n",r.f=t.slice(1)):(r.t="s",r.v=t);else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(c=gU(t)))if(!isNaN(yU(t).getDate())||v&&t.match(v)){r.z=n.dateNF||d$[14];var a=0;v&&t.match(v)&&(t=function(e,t,n){var r=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(t.match(G$)||[]).forEach((function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=c;break;case"d":s=c;break;case"h":i=c;break;case"s":l=c;break;case"m":i>=0?o=c:a=c}})),l>=0&&-1==o&&a>=0&&(o=a,a=-1);var c=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==i&&-1==o&&-1==l?c:-1==r&&-1==a&&-1==s?d:c+"T"+d}(0,n.dateNF,t.match(v)||[]),a=1),n.cellDates?(r.t="d",r.v=hU(t,a)):(r.t="n",r.v=aU(hU(t,a))),!1!==n.cellText&&(r.w=U$(r.z,r.v instanceof Date?aU(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=c;if("z"==r.t||(n.dense?(s[o]||(s[o]=[]),s[o][l]=r):s[OH({c:l,r:o})]=r),d=u+1,f=e.charCodeAt(d),i.e.c<l&&(i.e.c=l),i.e.r<o&&(i.e.r=o),p==m)++l;else if(l=0,++o,n.sheetRows&&n.sheetRows<=o)return!0}e:for(;u<e.length;++u)switch(p=e.charCodeAt(u)){case 34:34===f&&(h=!h);break;case m:case 10:case 13:if(!h&&g())break e}return u-d>0&&g(),s["!ref"]=MH(i),s}function s(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?a(t,n):$H(function(t,n){var r=n||{},a=[];if(!t||0===t.length)return a;for(var s=t.split(/[\r\n]/),i=s.length-1;i>=0&&0===s[i].length;)--i;for(var o=10,l=0,c=0;c<=i;++c)-1==(l=s[c].indexOf(" "))?l=s[c].length:l++,o=Math.max(o,l);for(c=0;c<=i;++c){a[c]=[];var d=0;for(e(s[c].slice(0,o).trim(),a,c,d,r),d=1;d<=(s[c].length-o)/10+1;++d)e(s[c].slice(o+10*(d-1),o+10*d).trim(),a,c,d,r)}return r.sheetRows&&(a=a.slice(0,r.sheetRows)),a}(t,n),n):a(t,n)}function i(e,t){var n="",r="string"==t.type?[0,0,0,0]:MJ(e,t);switch(t.type){case"base64":n=zW(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof LW?LW.utils.decode(t.codepage,e):HW&&Buffer.isBuffer(e)?e.toString("binary"):XW(e);break;case"array":n=pU(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=nz(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=nz(n):"binary"==t.type&&"undefined"!==typeof LW&&t.codepage&&(n=LW.utils.decode(t.codepage,LW.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?pG.to_sheet("string"==t.type?n:nz(n),t):s(n,t)}return{to_workbook:function(e,t){return BH(i(e,t),t)},to_sheet:i,from_sheet:function(e){for(var t,n=[],r=IH(e["!ref"]),a=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){for(var i=[],o=r.s.c;o<=r.e.c;++o){var l=OH({r:s,c:o});if((t=a?(e[s]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(FH(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";i.push(c+(0===o?" ":""))}else i.push("          ")}n.push(i.join(""))}return n.join("\n")}}}();var vG=function(){function e(e,t,n){if(e){xH(e,e.l||0);for(var r=n.Enum||g;e.l<e.length;){var a=e.read_shift(2),s=r[a]||r[65535],i=e.read_shift(2),o=e.l+i,l=s.f&&s.f(e,i,n);if(e.l=o,t(l,s,a))return}}}function t(t,n){if(!t)return t;var r=n||{};var a=r.dense?[]:{},s="Sheet1",i="",o=0,l={},c=[],d=[],u={s:{r:0,c:0},e:{r:0,c:0}},m=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=g,e(t,(function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:u=e;break;case 204:e&&(i=e);break;case 222:i=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||d$[14],r.cellDates&&(e[1].t="d",e[1].v=lU(e[1].v))),r.qpro&&e[3]>o&&(a["!ref"]=MH(u),l[s]=a,c.push(s),a=r.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s=i||"Sheet"+(o+1),i="");var d=r.dense?(a[e[0].r]||[])[e[0].c]:a[OH(e[0])];if(d){d.t=e[1].t,d.v=e[1].v,null!=e[1].z&&(d.z=e[1].z),null!=e[1].f&&(d.f=e[1].f);break}r.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[OH(e[0])]=e[1]}}),r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=x,14==t[2]&&(r.qpro=!0,t.l=0),e(t,(function(e,t,n){switch(n){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(a["!ref"]=MH(u),l[s]=a,c.push(s),a=r.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s="Sheet"+(o+1)),m>0&&e[0].r>=m)break;r.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[OH(e[0])]=e[1],u.e.c<e[0].c&&(u.e.c=e[0].c),u.e.r<e[0].r&&(u.e.r=e[0].r);break;case 27:e[14e3]&&(d[e[14e3][0]]=e[14e3][1]);break;case 1537:d[e[0]]=e[1],e[0]==o&&(s=e[1])}}),r)}if(a["!ref"]=MH(u),l[i||s]=a,c.push(i||s),!d.length)return{SheetNames:c,Sheets:l};for(var h={},p=[],f=0;f<d.length;++f)l[c[f]]?(p.push(d[f]||c[f]),h[d[f]]=l[d[f]]||l[c[f]]):(p.push(d[f]),h[d[f]]={"!ref":"A1"});return{SheetNames:p,Sheets:h}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var a=e.l+t,s=n(e,0,r);if(s[1].t="s",20768==r.vers){e.l++;var i=e.read_shift(1);return s[1].v=e.read_shift(i,"utf8"),s}return r.qpro&&e.l++,s[1].v=e.read_shift(a-e.l,"cstr"),s}function a(e,t,n){var r=bH(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var a=0;a<r.length;++a){var s=n.charCodeAt(a);r.write_shift(1,s>=128?95:s)}return r.write_shift(1,0),r}function s(e,t,n){var r=bH(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function i(e,t,n){var r=bH(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function o(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?AH(t):TH(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function d(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function u(e,t,n,r){var a=bH(6+r.length);a.write_shift(2,e),a.write_shift(1,n),a.write_shift(1,t),a.write_shift(1,39);for(var s=0;s<r.length;++s){var i=r.charCodeAt(s);a.write_shift(1,i>=128?95:i)}return a.write_shift(1,0),a}function m(e,t){var n=d(e),r=e.read_shift(4),a=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===r&&3221225472===a?(n[1].t="e",n[1].v=15):0===r&&3489660928===a?(n[1].t="e",n[1].v=42):n[1].v=0,n;var i=32768&s;return s=(32767&s)-16446,n[1].v=(1-2*i)*(a*Math.pow(2,s+32)+r*Math.pow(2,s)),n}function h(e,t,n,r){var a=bH(14);if(a.write_shift(2,e),a.write_shift(1,n),a.write_shift(1,t),0==r)return a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,65535),a;var s,i=0,o=0,l=0;return r<0&&(i=1,r=-r),o=0|Math.log2(r),0==(2147483648&(l=(r/=Math.pow(2,o-31))>>>0))&&(++o,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,s=(r*=Math.pow(2,32))>>>0,a.write_shift(4,s),a.write_shift(4,l),o+=16383+(i?32768:0),a.write_shift(2,o),a}function p(e,t){var n=d(e),r=e.read_shift(8,"f");return n[1].v=r,n}function f(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function v(e,t){var n=bH(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var a=e.charCodeAt(r);n[n.l++]=a>127?95:a}return n[n.l++]=0,n}var g={0:{n:"BOF",f:pq},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var a=n(e,0,r);return a[1].v=e.read_shift(2,"i"),a}},14:{n:"NUMBER",f:function(e,t,r){var a=n(e,0,r);return a[1].v=e.read_shift(8,"f"),a}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var a=e.l+t,s=n(e,0,r);if(s[1].v=e.read_shift(8,"f"),r.qpro)e.l=a;else{var i=e.read_shift(2);!function(e,t){xH(e,0);var n=[],r=0,a="",s="",i="",d="";for(;e.l<e.length;){var u=e[e.l++];switch(u){case 0:n.push(e.read_shift(8,"f"));break;case 1:s=o(t[0].c,e.read_shift(2),!0),a=o(t[0].r,e.read_shift(2),!1),n.push(s+a);break;case 2:var m=o(t[0].c,e.read_shift(2),!0),h=o(t[0].r,e.read_shift(2),!1);s=o(t[0].c,e.read_shift(2),!0),a=o(t[0].r,e.read_shift(2),!1),n.push(m+h+":"+s+a);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var p="";u=e[e.l++];)p+=String.fromCharCode(u);n.push('"'+p.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:d=n.pop(),i=n.pop(),n.push(["AND","OR"][u-20]+"("+i+","+d+")");break;default:if(u<32&&c[u])d=n.pop(),i=n.pop(),n.push(i+c[u]+d);else{if(!l[u])return u<=7?console.error("WK1 invalid opcode "+u.toString(16)):u<=24?console.error("WK1 unsupported op "+u.toString(16)):u<=30?console.error("WK1 invalid opcode "+u.toString(16)):u<=115?console.error("WK1 unsupported function opcode "+u.toString(16)):console.error("WK1 unrecognized opcode "+u.toString(16));if(69==(r=l[u][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+u.toString(16)+":|"+n.join("|")+"|");var f=n.slice(-r);n.length-=r,n.push(l[u][0]+"("+f.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+i),s),e.l+=i}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:f},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},x={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=d(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:m},24:{n:"NUMBER18",f:function(e,t){var n=d(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=m(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var a=e.read_shift(2);if(14e3==a){for(n[a]=[0,""],n[a][0]=e.read_shift(2);e[e.l];)n[a][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=d(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:p},40:{n:"FORMULA28",f:function(e,t){var n=p(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:f},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&OW(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=wH(),o=IH(e["!ref"]),l=Array.isArray(e),c=[];EZ(r,0,function(e){var t=bH(2);return t.write_shift(2,e),t}(1030)),EZ(r,6,function(e){var t=bH(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var d=Math.min(o.e.r,8191),u=o.s.r;u<=d;++u)for(var m=TH(u),h=o.s.c;h<=o.e.c;++h){u===o.s.r&&(c[h]=AH(h));var p=c[h]+m,f=l?(e[u]||[])[h]:e[p];if(f&&"z"!=f.t)if("n"==f.t)(0|f.v)==f.v&&f.v>=-32768&&f.v<=32767?EZ(r,13,s(u,h,f.v)):EZ(r,14,i(u,h,f.v));else EZ(r,15,a(u,h,FH(f).slice(0,239)))}return EZ(r,1),r.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&OW(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=wH();EZ(r,0,function(e){var t=bH(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,a=0,s=0;s<e.SheetNames.length;++s){var i=e.SheetNames[s],o=e.Sheets[i];if(o&&o["!ref"]){++a;var l=RH(o["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,a),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var a=0,s=0;a<e.SheetNames.length;++a)(e.Sheets[e.SheetNames[a]]||{})["!ref"]&&EZ(r,27,v(e.SheetNames[a],s++));var i=0;for(a=0;a<e.SheetNames.length;++a){var o=e.Sheets[e.SheetNames[a]];if(o&&o["!ref"]){for(var l=IH(o["!ref"]),c=Array.isArray(o),d=[],m=Math.min(l.e.r,8191),p=l.s.r;p<=m;++p)for(var f=TH(p),g=l.s.c;g<=l.e.c;++g){p===l.s.r&&(d[g]=AH(g));var x=d[g]+f,y=c?(o[p]||[])[g]:o[x];if(y&&"z"!=y.t)if("n"==y.t)EZ(r,23,h(p,g,i,y.v));else EZ(r,22,u(p,g,i,FH(y).slice(0,239)))}++i}}return EZ(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(KW(zW(e)),n);case"binary":return t(KW(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var gG=function(){var e=az("t"),t=az("rPr");function n(n){var r=n.match(e);if(!r)return{t:"s",v:""};var a={t:"s",v:zU(r[1])},s=n.match(t);return s&&(a.s=function(e){var t={},n=e.match(IU),r=0,a=!1;if(n)for(;r!=n.length;++r){var s=BU(n[r]);switch(s[0].replace(/\w*:/g,"")){case"<condense":case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if("1"==s.val)break;t.cp=AW[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting"}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if("0"==s.val)break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if("0"==s.val)break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":case"<scheme":case"<scheme>":case"<scheme/>":case"</scheme>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(47!==s[0].charCodeAt(1)&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}(s[1])),a}var r=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(e){return e.replace(r,"").split(a).map(n).filter((function(e){return e.v}))}}(),xG=function(){var e=/(\r\n|\n)/g;function t(t){var n=[[],t.v,[]];return t.v?(t.s&&function(e,t,n){var r=[];e.u&&r.push("text-decoration: underline;"),e.uval&&r.push("text-underline-style:"+e.uval+";"),e.sz&&r.push("font-size:"+e.sz+"pt;"),e.outline&&r.push("text-effect: outline;"),e.shadow&&r.push("text-shadow: auto;"),t.push('<span style="'+r.join("")+'">'),e.b&&(t.push("<b>"),n.push("</b>")),e.i&&(t.push("<i>"),n.push("</i>")),e.strike&&(t.push("<s>"),n.push("</s>"));var a=e.valign||"";"superscript"==a||"super"==a?a="sup":"subscript"==a&&(a="sub"),""!=a&&(t.push("<"+a+">"),n.push("</"+a+">")),n.push("</span>")}(t.s,n[0],n[2]),n[0].join("")+n[1].replace(e,"<br/>")+n[2].join("")):""}return function(e){return e.map(t).join("")}}(),yG=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,bG=/<(?:\w+:)?r>/,jG=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function wG(e,t){var n=!t||t.cellHTML,r={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=zU(nz(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=nz(e),n&&(r.h=YU(r.t))):e.match(bG)&&(r.r=nz(e),r.t=zU(nz((e.replace(jG,"").match(yG)||[]).join("").replace(IU,""))),n&&(r.h=xG(gG(r.r)))),r):{t:""}}var NG=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,_G=/<(?:\w+:)?(?:si|sstItem)>/g,SG=/<\/(?:\w+:)?(?:si|sstItem)>/;var EG=/^\s|\s$|[\t\n\r]/;function CG(e,t){if(!t.bookSST)return"";var n=[OU];n[n.length]=hz("sst",null,{xmlns:kz[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var a=e[r],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(EG)&&(s+=' xml:space="preserve"'),s+=">"+qU(a.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var DG=function(e,t){var n=!1;return null==t&&(n=!0,t=bH(15+4*e.t.length)),t.write_shift(1,0),HH(e.t,t),n?t.slice(0,t.l):t};function TG(e){var t=wH();NH(t,159,function(e,t){return t||(t=bH(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)NH(t,19,DG(e[n]));return NH(t,160),t.end()}function kG(e){if("undefined"!==typeof LW)return LW.utils.encode(TW,e);for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function AG(e,t){var n={};return n.Major=e.read_shift(2),n.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),n}function PG(e){for(var t=e.read_shift(4),n=e.l+t-4,r={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(r.name=e.read_shift(0,"lpp4"),r.comps=s,e.l!=n)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+n);return r}function OG(e){var t=function(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=AG(e,4),t.U=AG(e,4),t.W=AG(e,4),t}(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),4!=e.read_shift(4))throw new Error("Bad !Primary record");return t}function RG(e,t){var n=e.l+t,r={};r.Flags=63&e.read_shift(4),e.l+=4,r.AlgID=e.read_shift(4);var a=!1;switch(r.AlgID){case 26126:case 26127:case 26128:a=36==r.Flags;break;case 26625:a=4==r.Flags;break;case 0:a=16==r.Flags||4==r.Flags||36==r.Flags;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=e.read_shift(4),r.KeySize=e.read_shift(4),r.ProviderType=e.read_shift(4),e.l+=8,r.CSPName=e.read_shift(n-e.l>>1,"utf16le"),e.l=n,r}function MG(e,t){var n={},r=e.l+t;return e.l+=4,n.Salt=e.slice(e.l,e.l+16),e.l+=16,n.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),n.VerifierHash=e.slice(e.l,r),e.l=r,n}function IG(e){if(36!=(63&e.read_shift(4)))throw new Error("EncryptionInfo mismatch");var t=e.read_shift(4);return{t:"Std",h:RG(e,t),v:MG(e,e.length-e.l)}}function LG(){throw new Error("File is password-protected: ECMA-376 Extensible")}function FG(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var n=e.read_shift(e.length-e.l,"utf8"),r={};return n.replace(IU,(function(e){var n=BU(e);switch(WU(n[0])){case"<?xml":case"<encryption":case"</encryption>":case"</keyEncryptors>":case"</keyEncryptor>":break;case"<keyData":t.forEach((function(e){r[e]=n[e]}));break;case"<dataIntegrity":r.encryptedHmacKey=n.encryptedHmacKey,r.encryptedHmacValue=n.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"<keyEncryptor":r.uri=n.uri;break;case"<encryptedKey":r.encs.push(n);break;default:throw n[0]}})),r}function BG(e){var t,n,r=0,a=kG(e),s=a.length+1;for((t=qW(s))[0]=a.length,n=1;n!=s;++n)t[n]=a[n-1];for(n=s-1;n>=0;--n)r=((0===(16384&r)?0:1)|r<<1&32767)^t[n];return 52811^r}var WG=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(e,t){return 255&((n=e^t)/2|128*n);var n};return function(a){for(var s,i,o,l=kG(a),c=function(e){for(var r=t[e.length-1],a=104,s=e.length-1;s>=0;--s)for(var i=e[s],o=0;7!=o;++o)64&i&&(r^=n[a]),i*=2,--a;return r}(l),d=l.length,u=qW(16),m=0;16!=m;++m)u[m]=0;for(1===(1&d)&&(s=c>>8,u[d]=r(e[0],s),--d,s=255&c,i=l[l.length-1],u[d]=r(i,s));d>0;)s=c>>8,u[--d]=r(l[d],s),s=255&c,u[--d]=r(l[d],s);for(d=15,o=15-l.length;o>0;)s=c>>8,u[d]=r(e[o],s),--o,s=255&c,u[--d]=r(l[d],s),--d,--o;return u}}(),$G=function(e){var t=0,n=WG(e);return function(e){var r=function(e,t,n,r,a){var s,i;for(a||(a=t),r||(r=WG(e)),s=0;s!=t.length;++s)i=t[s],i=255&((i^=r[n])>>5|i<<3),a[s]=i,++n;return[a,n,r]}("",e,t,n);return t=r[1],r[0]}};function UG(e,t,n){var r=n||{};return r.Info=e.read_shift(2),e.l-=2,1===r.Info?r.Data=function(e){var t={},n=t.EncryptionVersionInfo=AG(e,4);if(1!=n.Major||1!=n.Minor)throw"unrecognized version code "+n.Major+" : "+n.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}(e):r.Data=function(e,t){var n={},r=n.EncryptionVersionInfo=AG(e,4);if(t-=4,2!=r.Minor)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,n.EncryptionHeader=RG(e,a),t-=a,n.EncryptionVerifier=MG(e,t),n}(e,t),r}var zG=function(){function e(e,n){switch(n.type){case"base64":return t(zW(e),n);case"binary":return t(e,n);case"buffer":return t(HW&&Buffer.isBuffer(e)?e.toString("binary"):XW(e),n);case"array":return t(pU(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach((function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,s=/\\\w+\b/g,i=0,o=-1;r=s.exec(e);){if("\\cell"===r[0]){var l=e.slice(i,s.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][o]=c:n[OH({r:t,c:o})]=c}}i=s.lastIndex}o>a.e.c&&(a.e.c=o)})),n["!ref"]=MH(a),n}return{to_workbook:function(t,n){return BH(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=IH(e["!ref"]),a=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){n.push("\\trowd\\trautofit1");for(var i=r.s.c;i<=r.e.c;++i)n.push("\\cellx"+(i+1));for(n.push("\\pard\\intbl"),i=r.s.c;i<=r.e.c;++i){var o=OH({r:s,c:i});(t=a?(e[s]||[])[i]:e[o])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(FH(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function HG(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}function VG(e,t){if(0===t)return e;var n=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,a=Math.max(t,n,r),s=Math.min(t,n,r),i=a-s;if(0===i)return[0,0,t];var o,l=0,c=a+s;switch(o=i/(c>1?2-c:c),a){case t:l=((n-r)/i+6)%6;break;case n:l=(r-t)/i+2;break;case r:l=(t-n)/i+4}return[l/6,o,c/2]}(function(e){var t=e.slice("#"===e[0]?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}(e));return n[2]=t<0?n[2]*(1+t):1-(1-n[2])*(1-t),HG(function(e){var t,n=e[0],r=e[1],a=e[2],s=2*r*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*n;if(0!==r)switch(0|l){case 0:case 6:t=s*l,o[0]+=s,o[1]+=t;break;case 1:t=s*(2-l),o[0]+=t,o[1]+=s;break;case 2:t=s*(l-2),o[1]+=s,o[2]+=t;break;case 3:t=s*(4-l),o[1]+=t,o[2]+=s;break;case 4:t=s*(l-4),o[2]+=s,o[0]+=t;break;case 5:t=s*(6-l),o[2]+=t,o[0]+=s}for(var c=0;3!=c;++c)o[c]=Math.round(255*o[c]);return o}(n))}var qG=6;function GG(e){return Math.floor((e+Math.round(128/qG)/256)*qG)}function KG(e){return Math.floor((e-5)/qG*100+.5)/100}function YG(e){return Math.round((e*qG+5)/qG*256)/256}function XG(e){return YG(KG(GG(e)))}function ZG(e){var t=Math.abs(e-XG(e)),n=qG;if(t>.005)for(qG=1;qG<15;++qG)Math.abs(e-XG(e))<=t&&(t=Math.abs(e-XG(e)),n=qG);qG=n}function JG(e){e.width?(e.wpx=GG(e.width),e.wch=KG(e.wpx),e.MDW=qG):e.wpx?(e.wch=KG(e.wpx),e.width=YG(e.wch),e.MDW=qG):"number"==typeof e.wch&&(e.width=YG(e.wch),e.wpx=GG(e.width),e.MDW=qG),e.customWidth&&delete e.customWidth}var QG=96;function eK(e){return 96*e/QG}function tK(e){return e*QG/96}var nK={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};var rK=["numFmtId","fillId","fontId","borderId","xfId"],aK=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];var sK=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,r=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(s,i,o){var l,c={};return s?((l=(s=s.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"")).match(e))&&function(e,t,n){t.NumberFmt=[];for(var r=Q$(d$),a=0;a<r.length;++a)t.NumberFmt[r[a]]=d$[r[a]];var s=e[0].match(IU);if(s)for(a=0;a<s.length;++a){var i=BU(s[a]);switch(WU(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":case"</numFmt>":break;case"<numFmt":var o=zU(nz(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&null!=t.NumberFmt[l];--l);t.NumberFmt[l]=o}z$(o,l)}break;default:if(n.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}(l,c,o),(l=s.match(r))&&function(e,t,n,r){t.Fonts=[];var a={},s=!1;(e[0].match(IU)||[]).forEach((function(e){var i=BU(e);switch(WU(i[0])){case"<fonts":case"<fonts>":case"</fonts>":case"<font":case"<font>":case"<name/>":case"</name>":case"<sz/>":case"</sz>":case"<vertAlign/>":case"</vertAlign>":case"<family/>":case"</family>":case"<scheme/>":case"</scheme>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":i.val&&(a.name=nz(i.val));break;case"<b":a.bold=i.val?ZU(i.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=i.val?ZU(i.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(i.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=i.val?ZU(i.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=i.val?ZU(i.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=i.val?ZU(i.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=i.val?ZU(i.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=i.val?ZU(i.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":i.val&&(a.sz=+i.val);break;case"<vertAlign":i.val&&(a.vertAlign=i.val);break;case"<family":i.val&&(a.family=parseInt(i.val,10));break;case"<scheme":i.val&&(a.scheme=i.val);break;case"<charset":if("1"==i.val)break;i.codepage=AW[parseInt(i.val,10)];break;case"<color":if(a.color||(a.color={}),i.auto&&(a.color.auto=ZU(i.auto)),i.rgb)a.color.rgb=i.rgb.slice(-6);else if(i.indexed){a.color.index=parseInt(i.indexed,10);var o=wV[a.color.index];81==a.color.index&&(o=wV[1]),o||(o=wV[1]),a.color.rgb=o[0].toString(16)+o[1].toString(16)+o[2].toString(16)}else i.theme&&(a.color.theme=parseInt(i.theme,10),i.tint&&(a.color.tint=parseFloat(i.tint)),i.theme&&n.themeElements&&n.themeElements.clrScheme&&(a.color.rgb=VG(n.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<AlternateContent":case"<ext":s=!0;break;case"</AlternateContent>":case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in fonts")}}))}(l,c,i,o),(l=s.match(n))&&function(e,t,n,r){t.Fills=[];var a={},s=!1;(e[0].match(IU)||[]).forEach((function(e){var n=BU(e);switch(WU(n[0])){case"<fills":case"<fills>":case"</fills>":case"</fill>":case"<gradientFill>":case"<patternFill/>":case"</patternFill>":case"<bgColor/>":case"</bgColor>":case"<fgColor/>":case"</fgColor>":case"<stop":case"<stop/>":case"</stop>":case"<color":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":n.patternType&&(a.patternType=n.patternType);break;case"<bgColor":a.bgColor||(a.bgColor={}),n.indexed&&(a.bgColor.indexed=parseInt(n.indexed,10)),n.theme&&(a.bgColor.theme=parseInt(n.theme,10)),n.tint&&(a.bgColor.tint=parseFloat(n.tint)),n.rgb&&(a.bgColor.rgb=n.rgb.slice(-6));break;case"<fgColor":a.fgColor||(a.fgColor={}),n.theme&&(a.fgColor.theme=parseInt(n.theme,10)),n.tint&&(a.fgColor.tint=parseFloat(n.tint)),null!=n.rgb&&(a.fgColor.rgb=n.rgb.slice(-6));break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+n[0]+" in fills")}}))}(l,c,0,o),(l=s.match(a))&&function(e,t,n,r){t.Borders=[];var a={},s=!1;(e[0].match(IU)||[]).forEach((function(e){var n=BU(e);switch(WU(n[0])){case"<borders":case"<borders>":case"</borders>":case"</border>":case"<left/>":case"<left":case"<left>":case"</left>":case"<right/>":case"<right":case"<right>":case"</right>":case"<top/>":case"<top":case"<top>":case"</top>":case"<bottom/>":case"<bottom":case"<bottom>":case"</bottom>":case"<diagonal":case"<diagonal>":case"<diagonal/>":case"</diagonal>":case"<horizontal":case"<horizontal>":case"<horizontal/>":case"</horizontal>":case"<vertical":case"<vertical>":case"<vertical/>":case"</vertical>":case"<start":case"<start>":case"<start/>":case"</start>":case"<end":case"<end>":case"<end/>":case"</end>":case"<color":case"<color>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<border":case"<border>":case"<border/>":a={},n.diagonalUp&&(a.diagonalUp=ZU(n.diagonalUp)),n.diagonalDown&&(a.diagonalDown=ZU(n.diagonalDown)),t.Borders.push(a);break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+n[0]+" in borders")}}))}(l,c,0,o),(l=s.match(t))&&function(e,t,n){var r;t.CellXf=[];var a=!1;(e[0].match(IU)||[]).forEach((function(e){var s=BU(e),i=0;switch(WU(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":case"</xf>":case"</alignment>":case"<protection":case"</protection>":case"<protection/>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<xf":case"<xf/>":for(delete(r=s)[0],i=0;i<rK.length;++i)r[rK[i]]&&(r[rK[i]]=parseInt(r[rK[i]],10));for(i=0;i<aK.length;++i)r[aK[i]]&&(r[aK[i]]=ZU(r[aK[i]]));if(t.NumberFmt&&r.numFmtId>392)for(i=392;i>60;--i)if(t.NumberFmt[r.numFmtId]==t.NumberFmt[i]){r.numFmtId=i;break}t.CellXf.push(r);break;case"<alignment":case"<alignment/>":var o={};s.vertical&&(o.vertical=s.vertical),s.horizontal&&(o.horizontal=s.horizontal),null!=s.textRotation&&(o.textRotation=s.textRotation),s.indent&&(o.indent=s.indent),s.wrapText&&(o.wrapText=ZU(s.wrapText)),r.alignment=o;break;case"<AlternateContent":case"<ext":a=!0;break;case"</AlternateContent>":case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+s[0]+" in cellXfs")}}))}(l,c,o),c):c}}();function iK(e,t){var n,r=[OU,hz("styleSheet",null,{xmlns:kz[0],"xmlns:vt":Cz})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach((function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=hz("numFmt",null,{numFmtId:r,formatCode:qU(e[r])}))})),1===t.length?"":(t[t.length]="</numFmts>",t[0]=hz("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=hz("cellXfs",null),e.forEach((function(e){t[t.length]=hz("xf",null,e)})),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=hz("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function oK(e,t,n){n||(n=bH(6+4*t.length)),n.write_shift(2,e),HH(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function lK(e,t){t||(t=bH(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=bH(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),hV(e.color,t);var r=0;return"major"==e.scheme&&(r=1),"minor"==e.scheme&&(r=2),t.write_shift(1,r),HH(e.name,t),t.length>t.l?t.slice(0,t.l):t}var cK,dK=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],uK=yH;function mK(e,t){t||(t=bH(84)),cK||(cK=tU(dK));var n=cK[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(hV({auto:1},t),hV({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function hK(e,t,n){n||(n=bH(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);return n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function pK(e,t){return t||(t=bH(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var fK=yH;function vK(e){var t;NH(e,613,UH(1)),NH(e,46,(t||(t=bH(51)),t.write_shift(1,0),pK(0,t),pK(0,t),pK(0,t),pK(0,t),pK(0,t),t.length>t.l?t.slice(0,t.l):t)),NH(e,614)}function gK(e){var t,n;NH(e,619,UH(1)),NH(e,48,(t={xfId:0,builtinId:0,name:"Normal"},n||(n=bH(52)),n.write_shift(4,t.xfId),n.write_shift(2,1),n.write_shift(1,+t.builtinId),n.write_shift(1,0),nV(t.name||"",n),n.length>n.l?n.slice(0,n.l):n)),NH(e,620)}function xK(e){NH(e,508,function(e,t,n){var r=bH(2052);return r.write_shift(4,e),nV(t,r),nV(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),NH(e,509)}function yK(e,t){var n=wH();return NH(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach((function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n})),0!=n&&(NH(e,615,UH(n)),[[5,8],[23,26],[41,44],[50,392]].forEach((function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&NH(e,44,oK(r,t[r]))})),NH(e,616))}}(n,e.SSF),function(e){NH(e,611,UH(1)),NH(e,43,lK({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),NH(e,612)}(n),function(e){NH(e,603,UH(2)),NH(e,45,mK({patternType:"none"})),NH(e,45,mK({patternType:"gray125"})),NH(e,604)}(n),vK(n),function(e){NH(e,626,UH(1)),NH(e,47,hK({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),NH(e,627)}(n),function(e,t){NH(e,617,UH(t.length)),t.forEach((function(t){NH(e,47,hK(t,0))})),NH(e,618)}(n,t.cellXfs),gK(n),function(e){NH(e,505,UH(0)),NH(e,506)}(n),xK(n),NH(n,279),n.end()}var bK=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function jK(e,t,n){t.themeElements.clrScheme=[];var r={};(e[0].match(IU)||[]).forEach((function(e){var a=BU(e);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=a.val;break;case"<a:sysClr":r.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":"/"===a[0].charAt(1)?(t.themeElements.clrScheme[bK.indexOf(a[0])]=r,r={}):r.name=a[0].slice(3,a[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}}))}function wK(){}function NK(){}var _K=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,SK=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,EK=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;var CK=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function DK(e,t){var n;e&&0!==e.length||(e=TK());var r={};if(!(n=e.match(CK)))throw new Error("themeElements not found in theme");return function(e,t,n){var r;t.themeElements={},[["clrScheme",_K,jK],["fontScheme",SK,wK],["fmtScheme",EK,NK]].forEach((function(a){if(!(r=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](r,t,n)}))}(n[0],r,t),r.raw=e,r}function TK(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[OU];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function kK(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:case 4:e.l+=4;break;case 1:t.xclrValue=function(e,t){return yH(e,t)}(e,4);break;case 2:t.xclrValue=Tq(e);break;case 3:t.xclrValue=function(e){return e.read_shift(4)}(e)}return e.l+=8,t}function AK(e){var t=e.read_shift(2),n=e.read_shift(2)-4,r=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=kK(e);break;case 6:r[1]=function(e,t){return yH(e,t)}(e,n);break;case 14:case 15:r[1]=e.read_shift(1===n?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+n)}return r}function PK(){var e=wH();return NH(e,332),NH(e,334,UH(1)),NH(e,335,function(e){var t=bH(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),HH(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),NH(e,336),NH(e,339,function(e,t){var n=bH(8+2*t.length);return n.write_shift(4,e),HH(t,n),n.slice(0,n.l)}(1,"XLDAPR")),NH(e,52),NH(e,35,UH(514)),NH(e,4096,UH(0)),NH(e,4097,fq(1)),NH(e,36),NH(e,53),NH(e,340),NH(e,337,function(e,t){var n=bH(8);return n.write_shift(4,e),n.write_shift(4,t?1:0),n}(1,!0)),NH(e,51,function(e){var t=bH(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),NH(e,338),NH(e,333),e.end()}function OK(){var e=[OU];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var RK=1024;function MK(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),a=[hz("xml",null,{"xmlns:v":Iz,"xmlns:o":Az,"xmlns:x":Pz,"xmlns:mv":Mz}).replace(/\/>/,">"),hz("o:shapelayout",hz("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),hz("v:shapetype",[hz("v:stroke",null,{joinstyle:"miter"}),hz("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];RK<1e3*e;)RK+=1e3;return t.forEach((function(e){var t=PH(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?hz("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=hz("v:fill",r,n);++RK,a=a.concat(["<v:shape"+mz({id:"_x0000_s"+RK,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,hz("v:shadow",null,{on:"t",obscured:"t"}),hz("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",uz("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),uz("x:AutoFill","False"),uz("x:Row",String(t.r)),uz("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])})),a.push("</xml>"),a.join("")}function IK(e,t,n,r){var a,s=Array.isArray(e);t.forEach((function(t){var i=PH(t.ref);if(s?(e[i.r]||(e[i.r]=[]),a=e[i.r][i.c]):a=e[t.ref],!a){a={t:"z"},s?e[i.r][i.c]=a:e[t.ref]=a;var o=IH(e["!ref"]||"BDWGO1000001:A1");o.s.r>i.r&&(o.s.r=i.r),o.e.r<i.r&&(o.e.r=i.r),o.s.c>i.c&&(o.s.c=i.c),o.e.c<i.c&&(o.e.c=i.c);var l=MH(o);l!==e["!ref"]&&(e["!ref"]=l)}a.c||(a.c=[]);var c={a:t.author,t:t.t,r:t.r,T:n};t.h&&(c.h=t.h);for(var d=a.c.length-1;d>=0;--d){if(!n&&a.c[d].T)return;n&&!a.c[d].T&&a.c.splice(d,1)}if(n&&r)for(d=0;d<r.length;++d)if(c.a==r[d].id){c.a=r[d].name||c.a;break}a.c.push(c)}))}function LK(e){var t=[OU,hz("comments",null,{xmlns:kz[0]})],n=[];return t.push("<authors>"),e.forEach((function(e){e[1].forEach((function(e){var r=qU(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))}))})),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach((function(e){var r=0,a=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach((function(e){e.a&&(r=n.indexOf(qU(e.a))),a.push(e.t||"")})),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),a.length<=1)t.push(uz("t",qU(a[0]||"")));else{for(var s="Comment:\n    "+a[0]+"\n",i=1;i<a.length;++i)s+="Reply:\n    "+a[i]+"\n";t.push(uz("t",qU(s)))}t.push("</text></comment>")})),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function FK(e,t,n){var r=[OU,hz("ThreadedComments",null,{xmlns:wz}).replace(/[\/]>/,">")];return e.forEach((function(e){var a="";(e[1]||[]).forEach((function(s,i){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var o={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==i?a=o.id:o.parentId=a,s.ID=o.id,s.a&&(o.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),r.push(hz("threadedComment",uz("text",s.t||""),o))}else delete s.ID}))})),r.push("</ThreadedComments>"),r.join("")}var BK=zH;function WK(e){var t=wH(),n=[];return NH(t,628),NH(t,630),e.forEach((function(e){e[1].forEach((function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),NH(t,632,function(e){return HH(e.slice(0,54))}(e.a)))}))})),NH(t,631),NH(t,633),e.forEach((function(e){e[1].forEach((function(r){r.iauthor=n.indexOf(r.a);var a={s:PH(e[0]),e:PH(e[0])};NH(t,635,function(e,t){return null==t&&(t=bH(36)),t.write_shift(4,e[1].iauthor),dV(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([a,r])),r.t&&r.t.length>0&&NH(t,637,KH(r)),NH(t,636),delete r.iauthor}))})),NH(t,634),NH(t,629),t.end()}var $K=["xlsb","xlsm","xlam","biff8","xla"];var UK=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,a){var s=!1,i=!1;0==r.length?i=!0:"["==r.charAt(0)&&(i=!0,r=r.slice(1,-1)),0==a.length?s=!0:"["==a.charAt(0)&&(s=!0,a=a.slice(1,-1));var o=r.length>0?0|parseInt(r,10):0,l=a.length>0?0|parseInt(a,10):0;return s?l+=t.c:--l,i?o+=t.r:--o,n+(s?"":"$")+AH(l)+(i?"":"$")+TH(o)}return function(r,a){return t=a,r.replace(e,n)}}(),zK=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,HK=function(){return function(e,t){return e.replace(zK,(function(e,n,r,a,s,i){var o=kH(a)-(r?0:t.c),l=DH(i)-(s?0:t.r);return n+"R"+(0==l?"":s?l+1:"["+l+"]")+"C"+(0==o?"":r?o+1:"["+o+"]")}))}}();function VK(e,t){return e.replace(zK,(function(e,n,r,a,s,i){return n+("$"==r?r+a:AH(kH(a)+t.c))+("$"==s?s+i:TH(DH(i)+t.r))}))}function qK(e,t,n){var r=RH(t).s,a=PH(n);return VK(e,{r:a.r-r.r,c:a.c-r.c})}function GK(e){return e.replace(/_xlfn\./g,"")}function KK(e){e.l+=1}function YK(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function XK(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return ZK(e);12==n.biff&&(r=4)}var a=e.read_shift(r),s=e.read_shift(r),i=YK(e,2),o=YK(e,2);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function ZK(e){var t=YK(e,2),n=YK(e,2),r=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:a,cRel:n[1],rRel:n[2]}}}function JK(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=YK(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),a=YK(e,2);return{r:r,c:a[0],cRel:a[1],rRel:a[2]}}function QK(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function eY(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function tY(e){return[e.read_shift(1),e.read_shift(1)]}function nY(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=mq(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=NV[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=uV(e);break;case 2:n[1]=Nq(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function rY(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),a=[],s=0;s!=r;++s)a.push((12==n.biff?cV:Mq)(e,8));return a}function aY(e,t,n){var r=0,a=0;12==n.biff?(r=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--a&&(a=256));for(var s=0,i=[];s!=r&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=nY(e,n.biff);return i}function sY(e,t,n){return e.l+=2,[QK(e)]}function iY(e){return e.l+=6,[]}function oY(e){return e.l+=2,[pq(e),1&e.read_shift(2)]}var lY=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var cY={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:yH},3:{n:"PtgAdd",f:KK},4:{n:"PtgSub",f:KK},5:{n:"PtgMul",f:KK},6:{n:"PtgDiv",f:KK},7:{n:"PtgPower",f:KK},8:{n:"PtgConcat",f:KK},9:{n:"PtgLt",f:KK},10:{n:"PtgLe",f:KK},11:{n:"PtgEq",f:KK},12:{n:"PtgGe",f:KK},13:{n:"PtgGt",f:KK},14:{n:"PtgNe",f:KK},15:{n:"PtgIsect",f:KK},16:{n:"PtgUnion",f:KK},17:{n:"PtgRange",f:KK},18:{n:"PtgUplus",f:KK},19:{n:"PtgUminus",f:KK},20:{n:"PtgPercent",f:KK},21:{n:"PtgParen",f:KK},22:{n:"PtgMissArg",f:KK},23:{n:"PtgStr",f:function(e,t,n){return e.l++,xq(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,NV[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,uV(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(n&&n.biff<=3?1:2);return[AY[a],kY[a],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],a=e.read_shift(1),s=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[a,(0===s[0]?kY:TY)[s[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,a=!n||n.biff>=8?4:2,s=e.read_shift(a);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,s]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,JK(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,XK(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:yH},40:{n:"PtgMemNoMem",f:yH},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var a=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,a=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==a&&n>=128&&(n-=256),{r:t,c:n,cRel:a,rRel:r}}(e);var a=e.read_shift(r>=12?4:2),s=e.read_shift(2),i=(16384&s)>>14,o=(32768&s)>>15;if(s&=16383,1==o)for(;a>524287;)a-=1048576;if(1==i)for(;s>8191;)s-=16384;return{r:a,c:s,cRel:i,rRel:o}}(e,0,n);return[r,a]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=function(e,t,n){if(n.biff<8)return ZK(e);var r=e.read_shift(12==n.biff?4:2),a=e.read_shift(12==n.biff?4:2),s=YK(e,2),i=YK(e,2);return{s:{r:r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}(e,0,n);return[r,a]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,a,JK(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12;break;case 12:0}return[r,a,XK(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[r,a]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[r,a]}},255:{}},dY={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},uY={1:{n:"PtgElfLel",f:oY},2:{n:"PtgElfRw",f:sY},3:{n:"PtgElfCol",f:sY},6:{n:"PtgElfRwV",f:sY},7:{n:"PtgElfColV",f:sY},10:{n:"PtgElfRadical",f:sY},11:{n:"PtgElfRadicalS",f:iY},13:{n:"PtgElfColS",f:iY},15:{n:"PtgElfColSV",f:iY},16:{n:"PtgElfRadicalLel",f:oY},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&n,rt:lY[n>>2&31],idx:r,c:a,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},mY={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),a=[],s=0;s<=r;++s)a.push(e.read_shift(n&&2==n.biff?1:2));return a}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:eY},33:{n:"PtgAttrBaxcel",f:eY},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),tY(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),tY(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function hY(e,t,n,r){if(r.biff<8)return yH(e,t);for(var a=e.l+t,s=[],i=0;i!==n.length;++i)switch(n[i][0]){case"PtgArray":n[i][1]=aY(e,0,r),s.push(n[i][1]);break;case"PtgMemArea":n[i][2]=rY(e,n[i][1],r),s.push(n[i][2]);break;case"PtgExp":r&&12==r.biff&&(n[i][1][1]=e.read_shift(4),s.push(n[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[i][0]}return 0!==(t=a-e.l)&&s.push(yH(e,t)),s}function pY(e,t,n){for(var r,a,s=e.l+t,i=[];s!=e.l;)t=s-e.l,a=e[e.l],r=cY[a]||cY[dY[a]],24!==a&&25!==a||(r=(24===a?uY:mY)[e[e.l+1]]),r&&r.f?i.push([r.n,r.f(e,t,n)]):yH(e,t);return i}function fY(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],a=[],s=0;s<r.length;++s){var i=r[s];if(i)if(2===i[0])a.push('"'+i[1].replace(/"/g,'""')+'"');else a.push(i[1]);else a.push("")}t.push(a.join(","))}return t.join(";")}var vY={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function gY(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var a="";if(n.biff>8)switch(e[r[0]][0]){case 357:return a=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?a:a+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return a=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?a:a+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map((function(e){return e.Name})).join(";;");default:return e[r[0]][0][3]?(a=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?a:a+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function xY(e,t,n){var r=gY(e,t,n);return"#REF"==r?r:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function yY(e,t,n,r,a){var s,i,o,l,c=a&&a.biff||8,d={s:{c:0,r:0},e:{c:0,r:0}},u=[],m=0,h=0,p="";if(!e[0]||!e[0][0])return"";for(var f=-1,v="",g=0,x=e[0].length;g<x;++g){var y=e[0][g];switch(y[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=u.pop(),i=u.pop(),f>=0){switch(e[0][f][1][0]){case 0:v=vU(" ",e[0][f][1][1]);break;case 1:v=vU("\r",e[0][f][1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][f][1][0])}i+=v,f=-1}u.push(i+vY[y[0]]+s);break;case"PtgIsect":s=u.pop(),i=u.pop(),u.push(i+" "+s);break;case"PtgUnion":s=u.pop(),i=u.pop(),u.push(i+","+s);break;case"PtgRange":s=u.pop(),i=u.pop(),u.push(i+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=_H(y[1][1],d,a),u.push(EH(o,c));break;case"PtgRefN":o=n?_H(y[1][1],n,a):y[1][1],u.push(EH(o,c));break;case"PtgRef3d":m=y[1][1],o=_H(y[1][2],d,a);p=xY(r,m,a);u.push(p+"!"+EH(o,c));break;case"PtgFunc":case"PtgFuncVar":var b=y[1][0],j=y[1][1];b||(b=0);var w=0==(b&=127)?[]:u.slice(-b);u.length-=b,"User"===j&&(j=w.shift()),u.push(j+"("+w.join(",")+")");break;case"PtgBool":u.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":u.push(y[1]);break;case"PtgNum":u.push(String(y[1]));break;case"PtgStr":u.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=SH(y[1][1],n?{s:n}:d,a),u.push(CH(l,a));break;case"PtgArea":l=SH(y[1][1],d,a),u.push(CH(l,a));break;case"PtgArea3d":m=y[1][1],l=y[1][2],p=xY(r,m,a),u.push(p+"!"+CH(l,a));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgName":h=y[1][2];var N=(r.names||[])[h-1]||(r[0]||[])[h],_=N?N.Name:"SH33TJSNAME"+String(h);_&&"_xlfn."==_.slice(0,6)&&!a.xlfn&&(_=_.slice(6)),u.push(_);break;case"PtgNameX":var S,E=y[1][1];if(h=y[1][2],!(a.biff<=5)){var C="";if(14849==((r[E]||[])[0]||[])[0]||(1025==((r[E]||[])[0]||[])[0]?r[E][h]&&r[E][h].itab>0&&(C=r.SheetNames[r[E][h].itab-1]+"!"):C=r.SheetNames[h-1]+"!"),r[E]&&r[E][h])C+=r[E][h].Name;else if(r[0]&&r[0][h])C+=r[0][h].Name;else{var D=(gY(r,E,a)||"").split(";;");D[h-1]?C=D[h-1]:C+="SH33TJSERRX"}u.push(C);break}E<0&&(E=-E),r[E]&&(S=r[E][h]),S||(S={Name:"SH33TJSERRY"}),u.push(S.Name);break;case"PtgParen":var T="(",k=")";if(f>=0){switch(v="",e[0][f][1][0]){case 2:T=vU(" ",e[0][f][1][1])+T;break;case 3:T=vU("\r",e[0][f][1][1])+T;break;case 4:k=vU(" ",e[0][f][1][1])+k;break;case 5:k=vU("\r",e[0][f][1][1])+k;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][f][1][0])}f=-1}u.push(T+u.pop()+k);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":u.push("#REF!");break;case"PtgExp":o={c:y[1][1],r:y[1][0]};var A={c:n.c,r:n.r};if(r.sharedf[OH(o)]){var P=r.sharedf[OH(o)];u.push(yY(P,d,A,r,a))}else{var O=!1;for(s=0;s!=r.arrayf.length;++s)if(i=r.arrayf[s],!(o.c<i[0].s.c||o.c>i[0].e.c)&&!(o.r<i[0].s.r||o.r>i[0].e.r)){u.push(yY(i[1],d,A,r,a)),O=!0;break}O||u.push(y[1])}break;case"PtgArray":u.push("{"+fY(y[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":f=g;break;case"PtgMissArg":u.push("");break;case"PtgList":u.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(y))}if(3!=a.biff&&f>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][g][0])){var R=!0;switch((y=e[0][f])[1][0]){case 4:R=!1;case 0:v=vU(" ",y[1][1]);break;case 5:R=!1;case 1:v=vU("\r",y[1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}u.push((R?v:"")+u.pop()+(R?"":v)),f=-1}}if(u.length>1&&a.WTF)throw new Error("bad formula stack");return u[0]}function bY(e,t,n){var r,a=e.l+t,s=2==n.biff?1:2,i=e.read_shift(s);if(65535==i)return[[],yH(e,t-2)];var o=pY(e,i,n);return t!==i+s&&(r=hY(e,t-i-s,o,n)),e.l=a,[o,r]}function jY(e,t,n){var r,a=e.l+t,s=e.read_shift(2),i=pY(e,s,n);return 65535==s?[[],yH(e,t-2)]:(t!==s+2&&(r=hY(e,a-s-2,i,n)),[i,r])}function wY(e,t,n){var r=e.l+t,a=Aq(e);2==n.biff&&++e.l;var s=function(e){var t;if(65535!==oH(e,e.l+6))return[uV(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=1===e[e.l+2],e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}(e),i=e.read_shift(1);2!=n.biff&&(e.read_shift(1),n.biff>=5&&e.read_shift(4));var o=function(e,t,n){var r,a=e.l+t,s=2==n.biff?1:2,i=e.read_shift(s);if(65535==i)return[[],yH(e,t-2)];var o=pY(e,i,n);return t!==i+s&&(r=hY(e,t-i-s,o,n)),e.l=a,[o,r]}(e,r-e.l,n);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function NY(e,t,n,r,a){var s=Pq(t,n,a),i=function(e){if(null==e){var t=bH(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return mV("number"==typeof e?e:0)}(e.v),o=bH(6);o.write_shift(2,33),o.write_shift(4,0);for(var l=bH(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return JW([s,i,o,l])}function _Y(e,t,n){var r=e.read_shift(4),a=pY(e,r,n),s=e.read_shift(4);return[a,s>0?hY(e,s,a,n):null]}var SY=_Y,EY=_Y,CY=_Y,DY=_Y,TY={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},kY={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},AY={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function PY(e){return"of:"==e.slice(0,3)&&(e=e.slice(3)),61==e.charCodeAt(0)&&61==(e=e.slice(1)).charCodeAt(0)&&(e=e.slice(1)),(e=(e=(e=e.replace(/COM\.MICROSOFT\./g,"")).replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,(function(e,t){return t.replace(/\./g,"")}))).replace(/\[.(#[A-Z]*[?!])\]/g,"$1")).replace(/[;~]/g,",").replace(/\|/g,";")}function OY(e){var t=e.split(":");return[t[0].split(".")[0],t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var RY={},MY={},IY="undefined"!==typeof Map;function LY(e,t,n){var r=0,a=e.length;if(n){if(IY?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var s=IY?n.get(t):n[t];r<s.length;++r)if(e[s[r]].t===t)return e.Count++,s[r]}else for(;r<a;++r)if(e[r].t===t)return e.Count++,r;return e[a]={t:t},e.Count++,e.Unique++,n&&(IY?(n.has(t)||n.set(t,[]),n.get(t).push(a)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(a))),a}function FY(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(qG=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=KG(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=YG(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function BY(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function WY(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],a=60,s=e.length;if(null==r&&n.ssf)for(;a<392;++a)if(null==n.ssf[a]){z$(t.z,a),n.ssf[a]=t.z,n.revssf[t.z]=r=a;break}for(a=0;a!=s;++a)if(e[a].numFmtId===r)return a;return e[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function $Y(e,t,n,r,a,s){try{r.cellNF&&(e.z=d$[t])}catch(H5){if(r.WTF)throw H5}if("z"!==e.t||r.cellStyles){if("d"===e.t&&"string"===typeof e.v&&(e.v=hU(e.v)),(!r||!1!==r.cellText)&&"z"!==e.t)try{if(null==d$[t]&&z$(q$[t]||"General",t),"e"===e.t)e.w=e.w||NV[e.v];else if(0===t)if("n"===e.t)(0|e.v)===e.v?e.w=e.v.toString(10):e.w=b$(e.v);else if("d"===e.t){var i=aU(e.v);e.w=(0|i)===i?i.toString(10):b$(i)}else{if(void 0===e.v)return"";e.w=j$(e.v,MY)}else"d"===e.t?e.w=U$(t,aU(e.v),MY):e.w=U$(t,e.v,MY)}catch(H5){if(r.WTF)throw H5}if(r.cellStyles&&null!=n)try{e.s=s.Fills[n],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=VG(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),r.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=VG(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),r.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(H5){if(r.WTF&&s.Fills)throw H5}}}function UY(e,t,n){if(e&&e["!ref"]){var r=IH(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var zY=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,HY=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,VY=/<(?:\w:)?hyperlink [^>]*>/gm,qY=/"(\w*:\w*)"/,GY=/<(?:\w:)?col\b[^>]*[\/]?>/g,KY=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,YY=/<(?:\w:)?pageMargins[^>]*\/>/g,XY=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,ZY=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,JY=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function QY(e,t,n,r,a,s,i){if(!e)return e;r||(r={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",d="",u=e.match(HY);u?(c=e.slice(0,u.index),d=e.slice(u.index+u[0].length)):c=d=e;var m=c.match(XY);m?eX(m[0],o,a,n):(m=c.match(ZY))&&function(e,t,n,r,a){eX(e.slice(0,e.indexOf(">")),n,r,a)}(m[0],m[1],o,a,n);var h=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var p=c.slice(h,h+50).match(qY);p&&function(e,t){var n=IH(t);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(e["!ref"]=MH(n))}(o,p[1])}var f=c.match(JY);f&&f[1]&&function(e,t){t.Views||(t.Views=[{}]);(e.match(rX)||[]).forEach((function(e,n){var r=BU(e);t.Views[n]||(t.Views[n]={}),+r.zoomScale&&(t.Views[n].zoom=+r.zoomScale),ZU(r.rightToLeft)&&(t.Views[n].RTL=!0)}))}(f[1],a);var v=[];if(t.cellStyles){var g=c.match(GY);g&&function(e,t){for(var n=!1,r=0;r!=t.length;++r){var a=BU(t[r],!0);a.hidden&&(a.hidden=ZU(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!n&&a.width&&(n=!0,ZG(a.width)),JG(a);s<=i;)e[s++]=fU(a)}}(v,g)}u&&sX(u[1],o,t,l,s,i);var x=d.match(KY);x&&(o["!autofilter"]=function(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}(x[0]));var y=[],b=d.match(zY);if(b)for(h=0;h!=b.length;++h)y[h]=IH(b[h].slice(b[h].indexOf('"')+1));var j=d.match(VY);j&&function(e,t,n){for(var r=Array.isArray(e),a=0;a!=t.length;++a){var s=BU(nz(t[a]),!0);if(!s.ref)return;var i=((n||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+zU(s.location))):(s.Target="#"+zU(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=IH(s.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var d=OH({c:c,r:l});r?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}(o,j,r);var w=d.match(YY);if(w&&(o["!margins"]=function(e){var t={};return["left","right","top","bottom","header","footer"].forEach((function(n){e[n]&&(t[n]=parseFloat(e[n]))})),t}(BU(w[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=MH(l)),t.sheetRows>0&&o["!ref"]){var N=IH(o["!ref"]);t.sheetRows<=+N.e.r&&(N.e.r=t.sheetRows-1,N.e.r>l.e.r&&(N.e.r=l.e.r),N.e.r<N.s.r&&(N.s.r=N.e.r),N.e.c>l.e.c&&(N.e.c=l.e.c),N.e.c<N.s.c&&(N.s.c=N.e.c),o["!fullref"]=o["!ref"],o["!ref"]=MH(N))}return v.length>0&&(o["!cols"]=v),y.length>0&&(o["!merges"]=y),o}function eX(e,t,n,r){var a=BU(e);n.Sheets[r]||(n.Sheets[r]={}),a.codeName&&(n.Sheets[r].CodeName=zU(nz(a.codeName)))}var tX=["objects","scenarios","selectLockedCells","selectUnlockedCells"],nX=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];var rX=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function aX(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var a="",s=e.t,i=e.v;if("z"!==e.t)switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=NV[e.v];break;case"d":r&&r.cellDates?a=hU(e.v,-1).toISOString():((e=fU(e)).t="n",a=""+(e.v=aU(hU(e.v)))),"undefined"===typeof e.z&&(e.z=d$[14]);break;default:a=e.v}var o=uz("v",qU(a)),l={r:t},c=WY(r.cellXfs,e,r);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=uz("v",""+LY(r.Strings,e.v,r.revStrings)),l.t="s";break}l.t="str"}if(e.t!=s&&(e.t=s,e.v=i),"string"==typeof e.f&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=hz("f",qU(e.f),d)+(null!=e.v?o:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(l.cm=1),hz("c",o,l)}var sX=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=az("v"),i=az("f");return function(o,l,c,d,u,m){for(var h,p,f,v,g,x=0,y="",b=[],j=[],w=0,N=0,_=0,S="",E=0,C=0,D=0,T=0,k=Array.isArray(m.CellXf),A=[],P=[],O=Array.isArray(l),R=[],M={},I=!1,L=!!c.sheetStubs,F=o.split(t),B=0,W=F.length;B!=W;++B){var $=(y=F[B].trim()).length;if(0!==$){var U=0;e:for(x=0;x<$;++x)switch(y[x]){case">":if("/"!=y[x-1]){++x;break e}if(c&&c.cellStyles){if(E=null!=(p=BU(y.slice(U,x),!0)).r?parseInt(p.r,10):E+1,C=-1,c.sheetRows&&c.sheetRows<E)continue;M={},I=!1,p.ht&&(I=!0,M.hpt=parseFloat(p.ht),M.hpx=tK(M.hpt)),"1"==p.hidden&&(I=!0,M.hidden=!0),null!=p.outlineLevel&&(I=!0,M.level=+p.outlineLevel),I&&(R[E-1]=M)}break;case"<":U=x}if(U>=x)break;if(E=null!=(p=BU(y.slice(U,x),!0)).r?parseInt(p.r,10):E+1,C=-1,!(c.sheetRows&&c.sheetRows<E)){d.s.r>E-1&&(d.s.r=E-1),d.e.r<E-1&&(d.e.r=E-1),c&&c.cellStyles&&(M={},I=!1,p.ht&&(I=!0,M.hpt=parseFloat(p.ht),M.hpx=tK(M.hpt)),"1"==p.hidden&&(I=!0,M.hidden=!0),null!=p.outlineLevel&&(I=!0,M.level=+p.outlineLevel),I&&(R[E-1]=M)),b=y.slice(x).split(e);for(var z=0;z!=b.length&&"<"==b[z].trim().charAt(0);++z);for(b=b.slice(z),x=0;x!=b.length;++x)if(0!==(y=b[x].trim()).length){if(j=y.match(n),w=x,N=0,_=0,y="<c "+("<"==y.slice(0,1)?">":"")+y,null!=j&&2===j.length){for(w=0,S=j[1],N=0;N!=S.length&&!((_=S.charCodeAt(N)-64)<1||_>26);++N)w=26*w+_;C=--w}else++C;for(N=0;N!=y.length&&62!==y.charCodeAt(N);++N);if(++N,(p=BU(y.slice(0,N),!0)).r||(p.r=OH({r:E-1,c:C})),h={t:""},null!=(j=(S=y.slice(N)).match(s))&&""!==j[1]&&(h.v=zU(j[1])),c.cellFormula){if(null!=(j=S.match(i))&&""!==j[1]){if(h.f=zU(nz(j[1])).replace(/\r\n/g,"\n"),c.xlfn||(h.f=GK(h.f)),j[0].indexOf('t="array"')>-1)h.F=(S.match(a)||[])[1],h.F.indexOf(":")>-1&&A.push([IH(h.F),h.F]);else if(j[0].indexOf('t="shared"')>-1){v=BU(j[0]);var H=zU(nz(j[1]));c.xlfn||(H=GK(H)),P[parseInt(v.si,10)]=[v,H,p.r]}}else(j=S.match(/<f[^>]*\/>/))&&P[(v=BU(j[0])).si]&&(h.f=qK(P[v.si][1],P[v.si][2],p.r));var V=PH(p.r);for(N=0;N<A.length;++N)V.r>=A[N][0].s.r&&V.r<=A[N][0].e.r&&V.c>=A[N][0].s.c&&V.c<=A[N][0].e.c&&(h.F=A[N][1])}if(null==p.t&&void 0===h.v)if(h.f||h.F)h.v=0,h.t="n";else{if(!L)continue;h.t="z"}else h.t=p.t||"n";switch(d.s.c>C&&(d.s.c=C),d.e.c<C&&(d.e.c=C),h.t){case"n":if(""==h.v||null==h.v){if(!L)continue;h.t="z"}else h.v=parseFloat(h.v);break;case"s":if("undefined"==typeof h.v){if(!L)continue;h.t="z"}else f=RY[parseInt(h.v,10)],h.v=f.t,h.r=f.r,c.cellHTML&&(h.h=f.h);break;case"str":h.t="s",h.v=null!=h.v?nz(h.v):"",c.cellHTML&&(h.h=YU(h.v));break;case"inlineStr":j=S.match(r),h.t="s",null!=j&&(f=wG(j[1]))?(h.v=f.t,c.cellHTML&&(h.h=f.h)):h.v="";break;case"b":h.v=ZU(h.v);break;case"d":c.cellDates?h.v=hU(h.v,1):(h.v=aU(hU(h.v,1)),h.t="n");break;case"e":c&&!1===c.cellText||(h.w=h.v),h.v=_V[h.v]}if(D=T=0,g=null,k&&void 0!==p.s&&null!=(g=m.CellXf[p.s])&&(null!=g.numFmtId&&(D=g.numFmtId),c.cellStyles&&null!=g.fillId&&(T=g.fillId)),$Y(h,D,T,c,u,m),c.cellDates&&k&&"n"==h.t&&F$(d$[D])&&(h.t="d",h.v=lU(h.v)),p.cm&&c.xlmeta){var q=(c.xlmeta.Cell||[])[+p.cm-1];q&&"XLDAPR"==q.type&&(h.D=!0)}if(O){var G=PH(p.r);l[G.r]||(l[G.r]=[]),l[G.r][G.c]=h}else l[p.r]=h}}}}R.length>0&&(l["!rows"]=R)}}();function iX(e,t,n,r){var a,s=[OU,hz("worksheet",null,{xmlns:kz[0],"xmlns:r":Ez})],i=n.SheetNames[e],o="",l=n.Sheets[i];null==l&&(l={});var c=l["!ref"]||"A1",d=IH(c);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=MH(d)}r||(r={}),l["!comments"]=[];var u=[];!function(e,t,n,r,a){var s=!1,i={},o=null;if("xlsx"!==r.bookType&&t.vbaraw){var l=t.SheetNames[n];try{t.Workbook&&(l=t.Workbook.Sheets[n].CodeName||l)}catch(H5){}s=!0,i.codeName=rz(qU(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+hz("outlinePr",null,c)}(s||o)&&(a[a.length]=hz("sheetPr",o,i))}(l,n,e,t,s),s[s.length]=hz("dimension",null,{ref:c}),s[s.length]=function(e,t,n,r){var a={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),hz("sheetViews",hz("sheetView",null,a),{})}(0,0,0,n),t.sheetFormat&&(s[s.length]=hz("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(s[s.length]=function(e,t){for(var n,r=["<cols>"],a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=hz("col",null,FY(a,n)));return r[r.length]="</cols>",r.join("")}(0,l["!cols"])),s[a=s.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(o=function(e,t){var n,r,a=[],s=[],i=IH(e["!ref"]),o="",l="",c=[],d=0,u=0,m=e["!rows"],h=Array.isArray(e),p={r:l},f=-1;for(u=i.s.c;u<=i.e.c;++u)c[u]=AH(u);for(d=i.s.r;d<=i.e.r;++d){for(s=[],l=TH(d),u=i.s.c;u<=i.e.c;++u){n=c[u]+l;var v=h?(e[d]||[])[u]:e[n];void 0!==v&&null!=(o=aX(v,n,e,t))&&s.push(o)}(s.length>0||m&&m[d])&&(p={r:l},m&&m[d]&&((r=m[d]).hidden&&(p.hidden=1),f=-1,r.hpx?f=eK(r.hpx):r.hpt&&(f=r.hpt),f>-1&&(p.ht=f,p.customHeight=1),r.level&&(p.outlineLevel=r.level)),a[a.length]=hz("row",s.join(""),p))}if(m)for(;d<m.length;++d)m&&m[d]&&(p={r:d+1},(r=m[d]).hidden&&(p.hidden=1),f=-1,r.hpx?f=eK(r.hpx):r.hpt&&(f=r.hpt),f>-1&&(p.ht=f,p.customHeight=1),r.level&&(p.outlineLevel=r.level),a[a.length]=hz("row","",p));return a.join("")}(l,t,0,0),o.length>0&&(s[s.length]=o)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),l["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return tX.forEach((function(n){null!=e[n]&&e[n]&&(t[n]="1")})),nX.forEach((function(n){null==e[n]||e[n]||(t[n]="0")})),e.password&&(t.password=BG(e.password).toString(16).toUpperCase()),hz("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(s[s.length]=function(e,t,n,r){var a="string"==typeof e.ref?e.ref:MH(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,i=RH(a);i.s.r==i.e.r&&(i.e.r=RH(t["!ref"]).e.r,a=MH(i));for(var o=0;o<s.length;++o){var l=s[o];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),hz("autoFilter",null,{ref:a})}(l["!autofilter"],l,n,e)),null!=l["!merges"]&&l["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+MH(e[n])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var m,h,p=-1,f=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach((function(e){e[1].Target&&(m={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(f=PV(r,-1,qU(e[1].Target).replace(/#.*$/,""),DV.HLINK),m["r:id"]="rId"+f),(p=e[1].Target.indexOf("#"))>-1&&(m.location=qU(e[1].Target.slice(p+1))),e[1].Tooltip&&(m.tooltip=qU(e[1].Tooltip)),s[s.length]=hz("hyperlink",null,m))})),s[s.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(s[s.length]=(BY(h=l["!margins"]),hz("pageMargins",null,h))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(s[s.length]=uz("ignoredErrors",hz("ignoredError",null,{numberStoredAsText:1,sqref:c}))),u.length>0&&(f=PV(r,-1,"../drawings/drawing"+(e+1)+".xml",DV.DRAW),s[s.length]=hz("drawing",null,{"r:id":"rId"+f}),l["!drawing"]=u),l["!comments"].length>0&&(f=PV(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",DV.VML),s[s.length]=hz("legacyDrawing",null,{"r:id":"rId"+f}),l["!legacy"]=f),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function oX(e,t,n,r){var a=function(e,t,n){var r=bH(145),a=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var s=320;a.hpx?s=20*eK(a.hpx):a.hpt&&(s=20*a.hpt),r.write_shift(2,s),r.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var c={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var u=-1,m=-1,h=d<<10;h<d+1<<10;++h)c.c=h,(Array.isArray(n)?(n[c.r]||[])[c.c]:n[OH(c)])&&(u<0&&(u=h),m=h);u<0||(++o,r.write_shift(4,u),r.write_shift(4,m))}var p=r.l;return r.l=l,r.write_shift(4,o),r.l=p,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(a.length>17||(t["!rows"]||[])[r])&&NH(e,0,a)}var lX=cV,cX=dV;function dX(e){return[ZH(e),uV(e),"n"]}var uX=cV,mX=dV;var hX=["left","right","top","bottom","header","footer"];function pX(e,t,n,r,a,s,i){if(void 0===t.v)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":(t=fU(t)).z=t.z||d$[14],t.v=aU(hU(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v}var l={r:n,c:r};switch(l.s=WY(a.cellXfs,t,a),t.l&&s["!links"].push([OH(l),t.l]),t.c&&s["!comments"].push([OH(l),t.c]),t.t){case"s":case"str":return a.bookSST?(o=LY(a.Strings,t.v,a.revStrings),l.t="s",l.v=o,i?NH(e,18,function(e,t,n){return null==n&&(n=bH(8)),JH(t,n),n.write_shift(4,t.v),n}(0,l)):NH(e,7,function(e,t,n){return null==n&&(n=bH(12)),XH(t,n),n.write_shift(4,t.v),n}(0,l))):(l.t="str",i?NH(e,17,function(e,t,n){return null==n&&(n=bH(8+4*e.v.length)),JH(t,n),HH(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l)):NH(e,6,function(e,t,n){return null==n&&(n=bH(12+4*e.v.length)),XH(t,n),HH(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?i?NH(e,13,function(e,t,n){return null==n&&(n=bH(8)),JH(t,n),oV(e.v,n),n}(t,l)):NH(e,2,function(e,t,n){return null==n&&(n=bH(12)),XH(t,n),oV(e.v,n),n}(t,l)):i?NH(e,16,function(e,t,n){return null==n&&(n=bH(12)),JH(t,n),mV(e.v,n),n}(t,l)):NH(e,5,function(e,t,n){return null==n&&(n=bH(16)),XH(t,n),mV(e.v,n),n}(t,l)),!0;case"b":return l.t="b",i?NH(e,15,function(e,t,n){return null==n&&(n=bH(5)),JH(t,n),n.write_shift(1,e.v?1:0),n}(t,l)):NH(e,4,function(e,t,n){return null==n&&(n=bH(9)),XH(t,n),n.write_shift(1,e.v?1:0),n}(t,l)),!0;case"e":return l.t="e",i?NH(e,14,function(e,t,n){return null==n&&(n=bH(8)),JH(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,l)):NH(e,3,function(e,t,n){return null==n&&(n=bH(9)),XH(t,n),n.write_shift(1,e.v),n}(t,l)),!0}return i?NH(e,12,function(e,t,n){return null==n&&(n=bH(4)),JH(t,n)}(0,l)):NH(e,1,function(e,t,n){return null==n&&(n=bH(8)),XH(t,n)}(0,l)),!0}function fX(e,t){var n,r;t&&t["!merges"]&&(NH(e,177,(n=t["!merges"].length,null==r&&(r=bH(4)),r.write_shift(4,n),r)),t["!merges"].forEach((function(t){NH(e,176,mX(t))})),NH(e,178))}function vX(e,t){t&&t["!cols"]&&(NH(e,390),t["!cols"].forEach((function(t,n){t&&NH(e,60,function(e,t,n){null==n&&(n=bH(18));var r=FY(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var a=0;return t.hidden&&(a|=1),"number"==typeof r.width&&(a|=2),t.level&&(a|=t.level<<8),n.write_shift(2,a),n}(n,t))})),NH(e,391))}function gX(e,t){t&&t["!ref"]&&(NH(e,648),NH(e,649,function(e){var t=bH(24);return t.write_shift(4,4),t.write_shift(4,1),dV(e,t),t}(IH(t["!ref"]))),NH(e,650))}function xX(e,t,n){t["!links"].forEach((function(t){if(t[1].Target){var r=PV(n,-1,t[1].Target.replace(/#.*$/,""),DV.HLINK);NH(e,494,function(e,t){var n=bH(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));dV({s:PH(e[0]),e:PH(e[0])},n),sV("rId"+t,n);var r=e[1].Target.indexOf("#");return HH((-1==r?"":e[1].Target.slice(r+1))||"",n),HH(e[1].Tooltip||"",n),HH("",n),n.slice(0,n.l)}(t,r))}})),delete t["!links"]}function yX(e,t,n){NH(e,133),NH(e,137,function(e,t,n){null==n&&(n=bH(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),NH(e,138),NH(e,134)}function bX(e,t){var n,r;t["!protect"]&&NH(e,535,(n=t["!protect"],null==r&&(r=bH(66)),r.write_shift(2,n.password?BG(n.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach((function(e){e[1]?r.write_shift(4,null==n[e[0]]||n[e[0]]?0:1):r.write_shift(4,null!=n[e[0]]&&n[e[0]]?0:1)})),r))}function jX(e,t,n,r){var a=wH(),s=n.SheetNames[e],i=n.Sheets[s]||{},o=s;try{n&&n.Workbook&&(o=n.Workbook.Sheets[e].CodeName||o)}catch(H5){}var l,c,d=IH(i["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],NH(a,129),(n.vbaraw||i["!outline"])&&NH(a,147,function(e,t,n){null==n&&(n=bH(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var a=1;a<3;++a)n.write_shift(1,0);return hV({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),eV(e,n),n.slice(0,n.l)}(o,i["!outline"])),NH(a,148,cX(d)),yX(a,0,n.Workbook),vX(a,i),function(e,t,n,r){var a,s=IH(t["!ref"]||"A1"),i="",o=[];NH(e,145);var l=Array.isArray(t),c=s.e.r;t["!rows"]&&(c=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=c;++d){i=TH(d),oX(e,t,s,d);var u=!1;if(d<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){d===s.s.r&&(o[m]=AH(m)),a=o[m]+i;var h=l?(t[d]||[])[m]:t[a];u=!!h&&pX(e,h,d,m,r,t,u)}}NH(e,146)}(a,i,0,t),bX(a,i),function(e,t,n,r){if(t["!autofilter"]){var a=t["!autofilter"],s="string"===typeof a.ref?a.ref:MH(a.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,o=RH(s);o.s.r==o.e.r&&(o.e.r=RH(t["!ref"]).e.r,s=MH(o));for(var l=0;l<i.length;++l){var c=i[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),NH(e,161,dV(IH(s))),NH(e,162)}}(a,i,n,e),fX(a,i),xX(a,i,r),i["!margins"]&&NH(a,476,(l=i["!margins"],null==c&&(c=bH(48)),BY(l),hX.forEach((function(e){mV(l[e],c)})),c)),t&&!t.ignoreEC&&void 0!=t.ignoreEC||gX(a,i),function(e,t,n,r){if(t["!comments"].length>0){var a=PV(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",DV.VML);NH(e,551,sV("rId"+a)),t["!legacy"]=a}}(a,i,e,r),NH(a,130),a.end()}function wX(e,t,n,r,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,l=0,c="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach((function(e){var t=function(e){var t,n=[],r=e.match(/^<c:numCache>/);(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach((function(e){var t=e.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);t&&(n[+t[1]]=r?+t[2]:t[2])}));var a=zU((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/gm)||[]).forEach((function(e){t=e.replace(/<.*?>/g,"")})),[n,a,t]}(e);d.s.r=d.s.c=0,d.e.c=o,c=AH(o),t[0].forEach((function(e,n){i[c+TH(n)]={t:"n",v:e,z:t[1]},l=n})),d.e.r<l&&(d.e.r=l),++o})),o>0&&(i["!ref"]=MH(d)),i}var NX=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],_X=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],SX=[],EX=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function CX(e,t){for(var n=0;n!=e.length;++n)for(var r=e[n],a=0;a!=t.length;++a){var s=t[a];if(null==r[s[0]])r[s[0]]=s[1];else switch(s[2]){case"bool":"string"==typeof r[s[0]]&&(r[s[0]]=ZU(r[s[0]]));break;case"int":"string"==typeof r[s[0]]&&(r[s[0]]=parseInt(r[s[0]],10))}}}function DX(e,t){for(var n=0;n!=t.length;++n){var r=t[n];if(null==e[r[0]])e[r[0]]=r[1];else switch(r[2]){case"bool":"string"==typeof e[r[0]]&&(e[r[0]]=ZU(e[r[0]]));break;case"int":"string"==typeof e[r[0]]&&(e[r[0]]=parseInt(e[r[0]],10))}}}function TX(e){DX(e.WBProps,NX),DX(e.CalcPr,EX),CX(e.WBView,_X),CX(e.Sheets,SX),MY.date1904=ZU(e.WBProps.date1904)}var kX="][*?/\\".split("");function AX(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return kX.forEach((function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}})),n}function PX(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t,n,r,a=e.Workbook&&e.Workbook.Sheets||[];t=e.SheetNames,n=a,r=!!e.vbaraw,t.forEach((function(e,a){AX(e);for(var s=0;s<a;++s)if(e==t[s])throw new Error("Duplicate Sheet Name: "+e);if(r){var i=n&&n[a]&&n[a].CodeName||e;if(95==i.charCodeAt(0)&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}}));for(var s=0;s<e.SheetNames.length;++s)UY(e.Sheets[e.SheetNames[s]],e.SheetNames[s],s)}var OX=/<\w+:workbook/;function RX(e){var t=[OU];t[t.length]=hz("workbook",null,{xmlns:kz[0],"xmlns:r":Ez});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(NX.forEach((function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])})),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=hz("workbookPr",null,r);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&a[s]&&a[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:qU(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden"}t[t.length]=hz("sheet",null,i)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach((function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=hz("definedName",qU(e.Ref),n))})),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function MX(e,t){var n={};return e.read_shift(4),n.ArchID=e.read_shift(4),e.l+=t-8,n}function IX(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n,r,a=t.Workbook.Sheets,s=0,i=-1,o=-1;s<a.length;++s)!a[s]||!a[s].Hidden&&-1==i?i=s:1==a[s].Hidden&&-1==o&&(o=s);if(!(o>i))NH(e,135),NH(e,158,(n=i,r||(r=bH(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,n),r.write_shift(4,n),r.write_shift(1,120),r.length>r.l?r.slice(0,r.l):r)),NH(e,136)}}function LX(e,t){var n=wH();return NH(n,131),NH(n,128,function(e,t){t||(t=bH(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return HH("SheetJS",t),HH(CW.version,t),HH(CW.version,t),HH("7262",t),t.length>t.l?t.slice(0,t.l):t}()),NH(n,153,function(e,t){t||(t=bH(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),eV(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),IX(n,e),function(e,t){NH(e,143);for(var n=0;n!=t.SheetNames.length;++n){NH(e,156,(r={Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]},(a=void 0)||(a=bH(127)),a.write_shift(4,r.Hidden),a.write_shift(4,r.iTabID),sV(r.strRelID,a),HH(r.name.slice(0,31),a),a.length>a.l?a.slice(0,a.l):a))}var r,a;NH(e,144)}(n,e),NH(n,132),n.end()}function FX(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],_Z[16]={n:"BrtFRTArchID$",f:MX},jH(e,(function(e,o,l){switch(l){case 156:i.SheetNames.push(e.name),n.Sheets.push(e);break;case 153:n.WBProps=e;break;case 39:null!=e.Sheet&&(t.SID=e.Sheet),e.Ref=yY(e.Ptg,0,null,i,t),delete t.SID,delete e.Ptg,s.push(e);break;case 1036:case 361:case 2071:case 158:case 143:case 664:case 353:case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:case 16:break;case 357:case 358:case 355:case 667:i[0].length?i.push([l,e]):i[0]=[l,e],i[i.length-1].XTI=[];break;case 362:0===i.length&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(e),i.XTI=i.XTI.concat(e);break;case 35:case 37:r.push(l),a=!0;break;case 36:case 38:r.pop(),a=!1;break;default:if(o.T);else if(!a||t.WTF&&37!=r[r.length-1]&&35!=r[r.length-1])throw new Error("Unexpected record 0x"+l.toString(16))}}),t),TX(n),n.Names=s,n.supbooks=i,n}(e,n):function(e,t){if(!e)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,a="xmlns",s={},i=0;if(e.replace(IU,(function(o,l){var c=BU(o);switch(WU(c[0])){case"<?xml":case"</workbook>":case"<fileVersion/>":case"</fileVersion>":case"<fileSharing":case"<fileSharing/>":case"</workbookPr>":case"<workbookProtection":case"<workbookProtection/>":case"<bookViews":case"<bookViews>":case"</bookViews>":case"</workbookView>":case"<sheets":case"<sheets>":case"</sheets>":case"</sheet>":case"<functionGroups":case"<functionGroups/>":case"<functionGroup":case"<externalReferences":case"</externalReferences>":case"<externalReferences>":case"<externalReference":case"<definedNames/>":case"<definedName/>":case"</calcPr>":case"<oleSize":case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":case"<customWorkbookView":case"</customWorkbookView>":case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":case"<pivotCache":case"<smartTagPr":case"<smartTagPr/>":case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":case"<smartTagType":case"<webPublishing":case"<webPublishing/>":case"<fileRecoveryPr":case"<fileRecoveryPr/>":case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":case"<webPublishObject":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":case"<ArchID":case"<revisionPtr":break;case"<workbook":o.match(OX)&&(a="xmlns"+o.match(/<(\w+):/)[1]),n.xmlns=c[a];break;case"<fileVersion":delete c[0],n.AppVersion=c;break;case"<workbookPr":case"<workbookPr/>":NX.forEach((function(e){if(null!=c[e[0]])switch(e[2]){case"bool":n.WBProps[e[0]]=ZU(c[e[0]]);break;case"int":n.WBProps[e[0]]=parseInt(c[e[0]],10);break;default:n.WBProps[e[0]]=c[e[0]]}})),c.codeName&&(n.WBProps.CodeName=nz(c.codeName));break;case"<workbookView":case"<workbookView/>":delete c[0],n.WBView.push(c);break;case"<sheet":switch(c.state){case"hidden":c.Hidden=1;break;case"veryHidden":c.Hidden=2;break;default:c.Hidden=0}delete c.state,c.name=zU(nz(c.name)),delete c[0],n.Sheets.push(c);break;case"<definedNames>":case"<definedNames":case"<ext":case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</definedNames>":case"</ext>":case"</AlternateContent>":r=!1;break;case"<definedName":(s={}).Name=nz(c.name),c.comment&&(s.Comment=c.comment),c.localSheetId&&(s.Sheet=+c.localSheetId),ZU(c.hidden||"0")&&(s.Hidden=!0),i=l+o.length;break;case"</definedName>":s.Ref=zU(nz(e.slice(i,l))),n.Names.push(s);break;case"<calcPr":case"<calcPr/>":delete c[0],n.CalcPr=c;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+c[0]+" in workbook")}return o})),-1===kz.indexOf(n.xmlns))throw new Error("Unknown Namespace: "+n.xmlns);return TX(n),n}(e,n)}function BX(e,t,n,r,a,s,i,o){return".bin"===t.slice(-4)?function(e,t,n,r,a,s,i){if(!e)return e;var o=t||{};r||(r={"!id":{}});var l,c,d,u,m,h,p,f,v,g,x=o.dense?[]:{},y={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=[],j=!1,w=!1,N=[];o.biff=12,o["!row"]=0;var _=0,S=!1,E=[],C={},D=o.supbooks||a.supbooks||[[]];if(D.sharedf=C,D.arrayf=E,D.SheetNames=a.SheetNames||a.Sheets.map((function(e){return e.name})),!o.supbooks&&(o.supbooks=D,a.Names))for(var T=0;T<a.Names.length;++T)D[0][T+1]=a.Names[T];var k,A,P=[],O=[],R=!1;if(_Z[16]={n:"BrtShortReal",f:dX},jH(e,(function(e,t,T){if(!w)switch(T){case 148:l=e;break;case 0:c=e,o.sheetRows&&o.sheetRows<=c.r&&(w=!0),v=TH(m=c.r),o["!row"]=c.r,(e.hidden||e.hpt||null!=e.level)&&(e.hpt&&(e.hpx=tK(e.hpt)),O[e.r]=e);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(d={t:e[2]},e[2]){case"n":d.v=e[1];break;case"s":f=RY[e[1]],d.v=f.t,d.r=f.r;break;case"b":d.v=!!e[1];break;case"e":d.v=e[1],!1!==o.cellText&&(d.w=NV[d.v]);break;case"str":d.t="s",d.v=e[1];break;case"is":d.t="s",d.v=e[1].t}if((u=i.CellXf[e[0].iStyleRef])&&$Y(d,u.numFmtId,null,o,s,i),h=-1==e[0].c?h+1:e[0].c,o.dense?(x[m]||(x[m]=[]),x[m][h]=d):x[AH(h)+v]=d,o.cellFormula){for(S=!1,_=0;_<E.length;++_){var M=E[_];c.r>=M[0].s.r&&c.r<=M[0].e.r&&h>=M[0].s.c&&h<=M[0].e.c&&(d.F=MH(M[0]),S=!0)}!S&&e.length>3&&(d.f=e[3])}if(y.s.r>c.r&&(y.s.r=c.r),y.s.c>h&&(y.s.c=h),y.e.r<c.r&&(y.e.r=c.r),y.e.c<h&&(y.e.c=h),o.cellDates&&u&&"n"==d.t&&F$(d$[u.numFmtId])){var I=p$(d.v);I&&(d.t="d",d.v=new Date(I.y,I.m-1,I.d,I.H,I.M,I.S,I.u))}k&&("XLDAPR"==k.type&&(d.D=!0),k=void 0),A&&(A=void 0);break;case 1:case 12:if(!o.sheetStubs||j)break;d={t:"z",v:void 0},h=-1==e[0].c?h+1:e[0].c,o.dense?(x[m]||(x[m]=[]),x[m][h]=d):x[AH(h)+v]=d,y.s.r>c.r&&(y.s.r=c.r),y.s.c>h&&(y.s.c=h),y.e.r<c.r&&(y.e.r=c.r),y.e.c<h&&(y.e.c=h),k&&("XLDAPR"==k.type&&(d.D=!0),k=void 0),A&&(A=void 0);break;case 176:N.push(e);break;case 49:k=((o.xlmeta||{}).Cell||[])[e-1];break;case 494:var L=r["!id"][e.relId];for(L?(e.Target=L.Target,e.loc&&(e.Target+="#"+e.loc),e.Rel=L):""==e.relId&&(e.Target="#"+e.loc),m=e.rfx.s.r;m<=e.rfx.e.r;++m)for(h=e.rfx.s.c;h<=e.rfx.e.c;++h)o.dense?(x[m]||(x[m]=[]),x[m][h]||(x[m][h]={t:"z",v:void 0}),x[m][h].l=e):(p=OH({c:h,r:m}),x[p]||(x[p]={t:"z",v:void 0}),x[p].l=e);break;case 426:if(!o.cellFormula)break;E.push(e),(g=o.dense?x[m][h]:x[AH(h)+v]).f=yY(e[1],0,{r:c.r,c:h},D,o),g.F=MH(e[0]);break;case 427:if(!o.cellFormula)break;C[OH(e[0].s)]=e[1],(g=o.dense?x[m][h]:x[AH(h)+v]).f=yY(e[1],0,{r:c.r,c:h},D,o);break;case 60:if(!o.cellStyles)break;for(;e.e>=e.s;)P[e.e--]={width:e.w/256,hidden:!!(1&e.flags),level:e.level},R||(R=!0,ZG(e.w/256)),JG(P[e.e+1]);break;case 161:x["!autofilter"]={ref:MH(e)};break;case 476:x["!margins"]=e;break;case 147:a.Sheets[n]||(a.Sheets[n]={}),e.name&&(a.Sheets[n].CodeName=e.name),(e.above||e.left)&&(x["!outline"]={above:e.above,left:e.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),e.RTL&&(a.Views[0].RTL=!0);break;case 485:case 64:case 1053:case 151:case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:j=!0;break;case 36:j=!1;break;case 37:b.push(T),j=!0;break;case 38:b.pop(),j=!1;break;default:if(t.T);else if(!j||o.WTF)throw new Error("Unexpected record 0x"+T.toString(16))}}),o),delete o.supbooks,delete o["!row"],!x["!ref"]&&(y.s.r<2e6||l&&(l.e.r>0||l.e.c>0||l.s.r>0||l.s.c>0))&&(x["!ref"]=MH(l||y)),o.sheetRows&&x["!ref"]){var M=IH(x["!ref"]);o.sheetRows<=+M.e.r&&(M.e.r=o.sheetRows-1,M.e.r>y.e.r&&(M.e.r=y.e.r),M.e.r<M.s.r&&(M.s.r=M.e.r),M.e.c>y.e.c&&(M.e.c=y.e.c),M.e.c<M.s.c&&(M.s.c=M.e.c),x["!fullref"]=x["!ref"],x["!ref"]=MH(M))}return N.length>0&&(x["!merges"]=N),P.length>0&&(x["!cols"]=P),O.length>0&&(x["!rows"]=O),x}(e,r,n,a,s,i,o):QY(e,r,n,a,s,i,o)}function WX(e,t,n,r,a,s,i,o){return".bin"===t.slice(-4)?function(e,t,n,r,a){if(!e)return e;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=[],o=!1;return jH(e,(function(e,r,l){switch(l){case 550:s["!rel"]=e;break;case 651:a.Sheets[n]||(a.Sheets[n]={}),e.name&&(a.Sheets[n].CodeName=e.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(l);break;case 38:i.pop();break;default:if(r.T>0)i.push(l);else if(r.T<0)i.pop();else if(!o||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),t),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}(e,r,n,a,s):function(e,t,n,r,a){if(!e)return e;r||(r={"!id":{}});var s,i={"!type":"chart","!drawel":null,"!rel":""},o=e.match(XY);return o&&eX(o[0],0,a,n),(s=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=s[1]),r["!id"][i["!rel"]]&&(i["!drawel"]=r["!id"][i["!rel"]]),i}(e,0,n,a,s)}function $X(e,t,n,r){return".bin"===t.slice(-4)?function(e,t,n){var r={NumberFmt:[]};for(var a in d$)r.NumberFmt[a]=d$[a];r.CellXf=[],r.Fonts=[];var s=[],i=!1;return jH(e,(function(e,a,o){switch(o){case 44:r.NumberFmt[e[0]]=e[1],z$(e[1],e[0]);break;case 43:r.Fonts.push(e),null!=e.color.theme&&t&&t.themeElements&&t.themeElements.clrScheme&&(e.color.rgb=VG(t.themeElements.clrScheme[e.color.theme].rgb,e.color.tint||0));break;case 1025:case 45:case 46:case 48:case 507:case 572:case 475:case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 47:617==s[s.length-1]&&r.CellXf.push(e);break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(o),i=!0;break;case 38:s.pop(),i=!1;break;default:if(a.T>0)s.push(o);else if(a.T<0)s.pop();else if(!i||n.WTF&&37!=s[s.length-1])throw new Error("Unexpected record 0x"+o.toString(16))}})),r}(e,n,r):sK(e,n,r)}function UX(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n=[],r=!1;return jH(e,(function(e,a,s){switch(s){case 159:n.Count=e[0],n.Unique=e[1];break;case 19:n.push(e);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(a.T,!r||t.WTF)throw new Error("Unexpected record 0x"+s.toString(16))}})),n}(e,n):function(e,t){var n=[],r="";if(!e)return n;var a=e.match(NG);if(a){r=a[2].replace(_G,"").split(SG);for(var s=0;s!=r.length;++s){var i=wG(r[s].trim(),t);null!=i&&(n[n.length]=i)}a=BU(a[1]),n.Count=a.count,n.Unique=a.uniqueCount}return n}(e,n)}function zX(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n=[],r=[],a={},s=!1;return jH(e,(function(e,i,o){switch(o){case 632:r.push(e);break;case 635:a=e;break;case 637:a.t=e.t,a.h=e.h,a.r=e.r;break;case 636:if(a.author=r[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,n.push(a);break;case 3072:case 37:case 38:break;case 35:s=!0;break;case 36:s=!1;break;default:if(i.T);else if(!s||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}})),n}(e,n):function(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach((function(e){if(""!==e&&""!==e.trim()){var t=e.match(/<(?:\w+:)?author[^>]*>(.*)/);t&&n.push(t[1])}}));var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach((function(e){if(""!==e&&""!==e.trim()){var a=e.match(/<(?:\w+:)?comment[^>]*>/);if(a){var s=BU(a[0]),i={author:s.authorId&&n[s.authorId]||"sheetjsghost",ref:s.ref,guid:s.guid},o=PH(s.ref);if(!(t.sheetRows&&t.sheetRows<=o.r)){var l=e.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),c=!!l&&!!l[1]&&wG(l[1])||{r:"",t:"",h:""};i.r=c.r,"<t></t>"==c.r&&(c.t=c.h=""),i.t=(c.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t.cellHTML&&(i.h=c.h),r.push(i)}}}})),r}(e,n)}function HX(e,t,n){return".bin"===t.slice(-4)?function(e){var t=[];return jH(e,(function(e,n,r){if(63===r)t.push(e);else if(!n.T)throw new Error("Unexpected record 0x"+r.toString(16))})),t}(e):function(e){var t=[];if(!e)return t;var n=1;return(e.match(IU)||[]).forEach((function(e){var r=BU(e);switch(r[0]){case"<?xml":case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete r[0],r.i?n=r.i:r.i=n,t.push(r)}})),t}(e)}function VX(e,t,n,r){if(".bin"===n.slice(-4))return function(e,t,n,r){if(!e)return e;var a=r||{},s=!1;jH(e,(function(e,t,n){switch(n){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(t.T);else if(!s||a.WTF)throw new Error("Unexpected record 0x"+n.toString(16))}}),a)}(e,0,0,r)}function qX(e,t,n){return".bin"===t.slice(-4)?function(e,t,n){var r={Types:[],Cell:[],Value:[]},a=n||{},s=[],i=!1,o=2;return jH(e,(function(e,t,n){switch(n){case 335:r.Types.push({name:e.name});break;case 51:e.forEach((function(e){1==o?r.Cell.push({type:r.Types[e[0]-1].name,index:e[1]}):0==o&&r.Value.push({type:r.Types[e[0]-1].name,index:e[1]})}));break;case 337:o=e?1:0;break;case 338:o=2;break;case 35:s.push(n),i=!0;break;case 36:s.pop(),i=!1;break;default:if(t.T);else if(!i||a.WTF&&35!=s[s.length-1])throw new Error("Unexpected record 0x"+n.toString(16))}})),r}(e,0,n):function(e,t,n){var r={Types:[],Cell:[],Value:[]};if(!e)return r;var a,s=!1,i=2;return e.replace(IU,(function(e){var t=BU(e);switch(WU(t[0])){case"<?xml":case"<metadata":case"</metadata>":case"<metadataTypes":case"</metadataTypes>":case"</metadataType>":case"</futureMetadata>":case"<bk>":case"</bk>":case"</rc>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<metadataType":r.Types.push({name:t.name});break;case"<futureMetadata":for(var o=0;o<r.Types.length;++o)r.Types[o].name==t.name&&(a=r.Types[o]);break;case"<rc":1==i?r.Cell.push({type:r.Types[t.t-1].name,index:+t.v}):0==i&&r.Value.push({type:r.Types[t.t-1].name,index:+t.v});break;case"<cellMetadata":i=1;break;case"</cellMetadata>":case"</valueMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+t.i);break;default:if(!s&&n.WTF)throw new Error("unrecognized "+t[0]+" in metadata")}return e})),r}(e,0,n)}function GX(e,t,n,r,a){return(".bin"===t.slice(-4)?jX:iX)(e,n,r,a)}function KX(e,t,n){return(".bin"===t.slice(-4)?WK:LK)(e,n)}var YX,XX=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,ZX=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function JX(e,t){var n=e.split(/\s+/),r=[];if(t||(r[0]=n[0]),1===n.length)return r;var a,s,i,o=e.match(XX);if(o)for(i=0;i!=o.length;++i)-1===(s=(a=o[i].match(ZX))[1].indexOf(":"))?r[a[1]]=a[2].slice(1,a[2].length-1):r["xmlns:"===a[1].slice(0,6)?"xmlns"+a[1].slice(6):a[1].slice(s+1)]=a[2].slice(1,a[2].length-1);return r}function QX(e){var t={};if(1===e.split(/\s+/).length)return t;var n,r,a,s=e.match(XX);if(s)for(a=0;a!=s.length;++a)-1===(r=(n=s[a].match(ZX))[1].indexOf(":"))?t[n[1]]=n[2].slice(1,n[2].length-1):t["xmlns:"===n[1].slice(0,6)?"xmlns"+n[1].slice(6):n[1].slice(r+1)]=n[2].slice(1,n[2].length-1);return t}function eZ(e,t,n,r){var a=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=ZU(r);break;case"i2":case"int":a=parseInt(r,10);break;case"r4":case"float":a=parseFloat(r);break;case"date":case"dateTime.tz":a=hU(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}e[zU(t)]=a}function tZ(e,t,n){if("z"!==e.t){if(!n||!1!==n.cellText)try{"e"===e.t?e.w=e.w||NV[e.v]:"General"===t?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=b$(e.v):e.w=j$(e.v):e.w=function(e,t){var n=YX[e]||zU(e);return"General"===n?j$(t):U$(n,t)}(t||"General",e.v)}catch(H5){if(n.WTF)throw H5}try{var r=YX[t]||t||"General";if(n.cellNF&&(e.z=r),n.cellDates&&"n"==e.t&&F$(r)){var a=p$(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(H5){if(n.WTF)throw H5}}}function nZ(e,t,n){if(n.cellStyles&&t.Interior){var r=t.Interior;r.Pattern&&(r.patternType=nK[r.Pattern]||r.Pattern)}e[t.ID]=t}function rZ(e,t,n,r,a,s,i,o,l,c){var d="General",u=r.StyleID,m={};c=c||{};var h=[],p=0;for(void 0===u&&o&&(u=o.StyleID),void 0===u&&i&&(u=i.StyleID);void 0!==s[u]&&(s[u].nf&&(d=s[u].nf),s[u].Interior&&h.push(s[u].Interior),s[u].Parent);)u=s[u].Parent;switch(n.Type){case"Boolean":r.t="b",r.v=ZU(e);break;case"String":r.t="s",r.r=XU(zU(e)),r.v=e.indexOf("<")>-1?zU(t||e).replace(/<.*?>/g,""):r.r;break;case"DateTime":"Z"!=e.slice(-1)&&(e+="Z"),r.v=(hU(e)-new Date(Date.UTC(1899,11,30)))/864e5,r.v!==r.v?r.v=zU(e):r.v<60&&(r.v=r.v-1),d&&"General"!=d||(d="yyyy-mm-dd");case"Number":void 0===r.v&&(r.v=+e),r.t||(r.t="n");break;case"Error":r.t="e",r.v=_V[e],!1!==c.cellText&&(r.w=e);break;default:""==e&&""==t?r.t="z":(r.t="s",r.v=XU(t||e))}if(tZ(r,d,c),!1!==c.cellFormula)if(r.Formula){var f=zU(r.Formula);61==f.charCodeAt(0)&&(f=f.slice(1)),r.f=UK(f,a),delete r.Formula,"RC"==r.ArrayRange?r.F=UK("RC:RC",a):r.ArrayRange&&(r.F=UK(r.ArrayRange,a),l.push([IH(r.F),r.F]))}else for(p=0;p<l.length;++p)a.r>=l[p][0].s.r&&a.r<=l[p][0].e.r&&a.c>=l[p][0].s.c&&a.c<=l[p][0].e.c&&(r.F=l[p][1]);c.cellStyles&&(h.forEach((function(e){!m.patternType&&e.patternType&&(m.patternType=e.patternType)})),r.s=m),void 0!==r.StyleID&&(r.ixfe=r.StyleID)}function aZ(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e.v=e.w=e.ixfe=void 0}function sZ(e,t){var n=t||{};V$();var r=FW(fz(e));"binary"!=n.type&&"array"!=n.type&&"base64"!=n.type||(r="undefined"!==typeof LW?LW.utils.decode(65001,MW(r)):nz(r));var a,s=r.slice(0,1024).toLowerCase(),i=!1;if((1023&(s=s.replace(/".*?"/g,"")).indexOf(">"))>Math.min(1023&s.indexOf(","),1023&s.indexOf(";"))){var o=fU(n);return o.type="string",fG.to_workbook(r,o)}if(-1==s.indexOf("<?xml")&&["html","table","head","meta","script","style","div"].forEach((function(e){s.indexOf("<"+e)>=0&&(i=!0)})),i)return function(e,t){var n=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||0==n.length)throw new Error("Invalid HTML: could not find <table>");if(1==n.length)return BH(IZ(n[0],t),t);var r={SheetNames:[],Sheets:{}};return n.forEach((function(e,n){tQ(r,IZ(e,t),"Sheet"+(n+1))})),r}(r,n);YX={"General Number":"General","General Date":d$[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":d$[15],"Short Date":d$[14],"Long Time":d$[19],"Medium Time":d$[18],"Short Time":d$[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:d$[2],Standard:d$[4],Percent:d$[10],Scientific:d$[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[];var d,u={},m=[],h=n.dense?[]:{},p="",f={},v={},g=JX('<Data ss:Type="String">'),x=0,y=0,b=0,j={s:{r:2e6,c:2e6},e:{r:0,c:0}},w={},N={},_="",S=0,E=[],C={},D={},T=0,k=[],A=[],P={},O=[],R=!1,M=[],I=[],L={},F=0,B=0,W={Sheets:[],WBProps:{date1904:!1}},$={};vz.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/gm,"");for(var U="";a=vz.exec(r);)switch(a[3]=(U=a[3]).toLowerCase()){case"data":if("data"==U){if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==a[0].charAt(a[0].length-2)&&c.push([a[3],!0]);break}if(c[c.length-1][1])break;"/"===a[1]?rZ(r.slice(x,a.index),_,g,"comment"==c[c.length-1][0]?P:f,{c:y,r:b},w,O[y],v,M,n):(_="",g=JX(a[0]),x=a.index+a[0].length);break;case"cell":if("/"===a[1])if(A.length>0&&(f.c=A),(!n.sheetRows||n.sheetRows>b)&&void 0!==f.v&&(n.dense?(h[b]||(h[b]=[]),h[b][y]=f):h[AH(y)+TH(b)]=f),f.HRef&&(f.l={Target:zU(f.HRef)},f.HRefScreenTip&&(f.l.Tooltip=f.HRefScreenTip),delete f.HRef,delete f.HRefScreenTip),(f.MergeAcross||f.MergeDown)&&(F=y+(0|parseInt(f.MergeAcross,10)),B=b+(0|parseInt(f.MergeDown,10)),E.push({s:{c:y,r:b},e:{c:F,r:B}})),n.sheetStubs)if(f.MergeAcross||f.MergeDown){for(var z=y;z<=F;++z)for(var H=b;H<=B;++H)(z>y||H>b)&&(n.dense?(h[H]||(h[H]=[]),h[H][z]={t:"z"}):h[AH(z)+TH(H)]={t:"z"});y=F+1}else++y;else f.MergeAcross?y=F+1:++y;else(f=QX(a[0])).Index&&(y=+f.Index-1),y<j.s.c&&(j.s.c=y),y>j.e.c&&(j.e.c=y),"/>"===a[0].slice(-2)&&++y,A=[];break;case"row":"/"===a[1]||"/>"===a[0].slice(-2)?(b<j.s.r&&(j.s.r=b),b>j.e.r&&(j.e.r=b),"/>"===a[0].slice(-2)&&(v=JX(a[0])).Index&&(b=+v.Index-1),y=0,++b):((v=JX(a[0])).Index&&(b=+v.Index-1),L={},("0"==v.AutoFitHeight||v.Height)&&(L.hpx=parseInt(v.Height,10),L.hpt=eK(L.hpx),I[b]=L),"1"==v.Hidden&&(L.hidden=!0,I[b]=L));break;case"worksheet":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"));m.push(p),j.s.r<=j.e.r&&j.s.c<=j.e.c&&(h["!ref"]=MH(j),n.sheetRows&&n.sheetRows<=j.e.r&&(h["!fullref"]=h["!ref"],j.e.r=n.sheetRows-1,h["!ref"]=MH(j))),E.length&&(h["!merges"]=E),O.length>0&&(h["!cols"]=O),I.length>0&&(h["!rows"]=I),u[p]=h}else j={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([a[3],!1]),l=JX(a[0]),p=zU(l.Name),h=n.dense?[]:{},E=[],M=[],I=[],$={name:p,Hidden:0},W.Sheets.push($);break;case"table":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else{if("/>"==a[0].slice(-2))break;c.push([a[3],!1]),O=[],R=!1}break;case"style":"/"===a[1]?nZ(w,N,n):N=JX(a[0]);break;case"numberformat":N.nf=zU(JX(a[0]).Format||"General"),YX[N.nf]&&(N.nf=YX[N.nf]);for(var V=0;392!=V&&d$[V]!=N.nf;++V);if(392==V)for(V=57;392!=V;++V)if(null==d$[V]){z$(N.nf,V);break}break;case"column":if("table"!==c[c.length-1][0])break;if((d=JX(a[0])).Hidden&&(d.hidden=!0,delete d.Hidden),d.Width&&(d.wpx=parseInt(d.Width,10)),!R&&d.wpx>10){R=!0,qG=6;for(var q=0;q<O.length;++q)O[q]&&JG(O[q])}R&&JG(d),O[d.Index-1||O.length]=d;for(var G=0;G<+d.Span;++G)O[O.length]=fU(d);break;case"namedrange":if("/"===a[1])break;W.Names||(W.Names=[]);var K=BU(a[0]),Y={Name:K.Name,Ref:UK(K.RefersTo.slice(1),{r:0,c:0})};W.Sheets.length>0&&(Y.Sheet=W.Sheets.length-1),W.Names.push(Y);break;case"namedcell":case"b":case"i":case"u":case"s":case"em":case"h2":case"h3":case"sub":case"sup":case"span":case"alignment":case"borders":case"border":case"protection":case"paragraphs":case"name":case"pixelsperinch":case"null":break;case"font":if("/>"===a[0].slice(-2))break;"/"===a[1]?_+=r.slice(S,a.index):S=a.index+a[0].length;break;case"interior":if(!n.cellStyles)break;N.Interior=JX(a[0]);break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if("/>"===a[0].slice(-2))break;"/"===a[1]?KV(C,U,r.slice(T,a.index)):T=a.index+a[0].length;break;case"styles":case"workbook":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else c.push([a[3],!1]);break;case"comment":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"));aZ(P),A.push(P)}else c.push([a[3],!1]),P={a:(l=JX(a[0])).Author};break;case"autofilter":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else if("/"!==a[0].charAt(a[0].length-2)){var X=JX(a[0]);h["!autofilter"]={ref:UK(X.Range).replace(/\$/g,"")},c.push([a[3],!0])}break;case"datavalidation":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==a[0].charAt(a[0].length-2)&&c.push([a[3],!0]);break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==a[0].charAt(a[0].length-2)&&c.push([a[3],!0]);break;default:if(0==c.length&&"document"==a[3])return YZ(r,n);if(0==c.length&&"uof"==a[3])return YZ(r,n);var Z=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(a[3]){case"allowpng":case"removepersonalinformation":case"downloadcomponents":case"locationofcomponents":case"colors":case"color":case"index":case"rgb":case"targetscreensize":case"readonlyrecommended":break;default:Z=!1}break;case"componentoptions":switch(a[3]){case"toolbar":case"hideofficelogo":case"spreadsheetautofit":case"label":case"caption":case"maxheight":case"maxwidth":case"nextsheetnumber":break;default:Z=!1}break;case"excelworkbook":switch(a[3]){case"date1904":W.WBProps.date1904=!0;break;case"windowheight":case"windowwidth":case"windowtopx":case"windowtopy":case"tabratio":case"protectstructure":case"protectwindow":case"protectwindows":case"activesheet":case"displayinknotes":case"firstvisiblesheet":case"supbook":case"sheetname":case"sheetindex":case"sheetindexfirst":case"sheetindexlast":case"dll":case"acceptlabelsinformulas":case"donotsavelinkvalues":case"iteration":case"maxiterations":case"maxchange":case"path":case"xct":case"count":case"selectedsheets":case"calculation":case"uncalced":case"startupprompt":case"crn":case"externname":case"formula":case"colfirst":case"collast":case"wantadvise":case"boolean":case"error":case"text":case"ole":case"noautorecover":case"publishobjects":case"donotcalculatebeforesave":case"number":case"refmoder1c1":case"embedsavesmarttags":break;default:Z=!1}break;case"workbookoptions":switch(a[3]){case"owcversion":case"height":case"width":break;default:Z=!1}break;case"worksheetoptions":switch(a[3]){case"visible":if("/>"===a[0].slice(-2));else if("/"===a[1])switch(r.slice(T,a.index)){case"SheetHidden":$.Hidden=1;break;case"SheetVeryHidden":$.Hidden=2}else T=a.index+a[0].length;break;case"header":h["!margins"]||BY(h["!margins"]={},"xlml"),isNaN(+BU(a[0]).Margin)||(h["!margins"].header=+BU(a[0]).Margin);break;case"footer":h["!margins"]||BY(h["!margins"]={},"xlml"),isNaN(+BU(a[0]).Margin)||(h["!margins"].footer=+BU(a[0]).Margin);break;case"pagemargins":var J=BU(a[0]);h["!margins"]||BY(h["!margins"]={},"xlml"),isNaN(+J.Top)||(h["!margins"].top=+J.Top),isNaN(+J.Left)||(h["!margins"].left=+J.Left),isNaN(+J.Right)||(h["!margins"].right=+J.Right),isNaN(+J.Bottom)||(h["!margins"].bottom=+J.Bottom);break;case"displayrighttoleft":W.Views||(W.Views=[]),W.Views[0]||(W.Views[0]={}),W.Views[0].RTL=!0;break;case"freezepanes":case"frozennosplit":case"splithorizontal":case"splitvertical":case"donotdisplaygridlines":case"activerow":case"activecol":case"toprowbottompane":case"leftcolumnrightpane":case"unsynced":case"print":case"printerrors":case"panes":case"scale":case"pane":case"number":case"layout":case"pagesetup":case"selected":case"protectobjects":case"enableselection":case"protectscenarios":case"validprinterinfo":case"horizontalresolution":case"verticalresolution":case"numberofcopies":case"activepane":case"toprowvisible":case"leftcolumnvisible":case"fittopage":case"rangeselection":case"papersizeindex":case"pagelayoutzoom":case"pagebreakzoom":case"filteron":case"fitwidth":case"fitheight":case"commentslayout":case"zoom":case"lefttoright":case"gridlines":case"allowsort":case"allowfilter":case"allowinsertrows":case"allowdeleterows":case"allowinsertcols":case"allowdeletecols":case"allowinserthyperlinks":case"allowformatcells":case"allowsizecols":case"allowsizerows":case"tabcolorindex":case"donotdisplayheadings":case"showpagelayoutzoom":case"blackandwhite":case"donotdisplayzeros":case"displaypagebreak":case"rowcolheadings":case"donotdisplayoutline":case"noorientation":case"allowusepivottables":case"zeroheight":case"viewablerange":case"selection":case"protectcontents":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;default:Z=!1}break;case"pivottable":case"pivotcache":switch(a[3]){case"immediateitemsondrop":case"showpagemultipleitemlabel":case"compactrowindent":case"location":case"pivotfield":case"orientation":case"layoutform":case"layoutsubtotallocation":case"layoutcompactrow":case"position":case"pivotitem":case"datatype":case"datafield":case"sourcename":case"parentfield":case"ptlineitems":case"ptlineitem":case"countofsameitems":case"item":case"itemtype":case"ptsource":case"cacheindex":case"consolidationreference":case"filename":case"reference":case"nocolumngrand":case"norowgrand":case"blanklineafteritems":case"hidden":case"subtotal":case"basefield":case"mapchilditems":case"function":case"refreshonfileopen":case"printsettitles":case"mergelabels":case"defaultversion":case"refreshname":case"refreshdate":case"refreshdatecopy":case"versionlastrefresh":case"versionlastupdate":case"versionupdateablemin":case"versionrefreshablemin":case"calculation":break;default:Z=!1}break;case"pagebreaks":switch(a[3]){case"colbreaks":case"colbreak":case"rowbreaks":case"rowbreak":case"colstart":case"colend":case"rowend":break;default:Z=!1}break;case"autofilter":switch(a[3]){case"autofiltercolumn":case"autofiltercondition":case"autofilterand":case"autofilteror":break;default:Z=!1}break;case"querytable":switch(a[3]){case"id":case"autoformatfont":case"autoformatpattern":case"querysource":case"querytype":case"enableredirections":case"refreshedinxl9":case"urlstring":case"htmltables":case"connection":case"commandtext":case"refreshinfo":case"notitles":case"nextid":case"columninfo":case"overwritecells":case"donotpromptforfile":case"textwizardsettings":case"source":case"number":case"decimal":case"thousandseparator":case"trailingminusnumbers":case"formatsettings":case"fieldtype":case"delimiters":case"tab":case"comma":case"autoformatname":case"versionlastedit":case"versionlastrefresh":break;default:Z=!1}break;case"datavalidation":switch(a[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":case"cellrangelist":break;default:Z=!1}break;case"sorting":case"conditionalformatting":switch(a[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"cellrangelist":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":break;default:Z=!1}break;case"mapinfo":case"schema":case"data":switch(a[3]){case"map":case"entry":case"range":case"xpath":case"field":case"xsdtype":case"filteron":case"aggregate":case"elementtype":case"attributetype":case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":case"row":break;default:Z=!1}break;case"smarttags":break;default:Z=!1}if(Z)break;if(a[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+a[3]+"|"+c.join("|");if("customdocumentproperties"===c[c.length-1][0]){if("/>"===a[0].slice(-2))break;"/"===a[1]?eZ(D,U,k,r.slice(T,a.index)):(k=a,T=a.index+a[0].length);break}if(n.WTF)throw"Unrecognized tag: "+a[3]+"|"+c.join("|")}var Q={};return n.bookSheets||n.bookProps||(Q.Sheets=u),Q.SheetNames=m,Q.Workbook=W,Q.SSF=fU(d$),Q.Props=C,Q.Custprops=D,Q}function iZ(e,t){switch(CJ(t=t||{}),t.type||"base64"){case"base64":return sZ(zW(e),t);case"binary":case"buffer":case"file":return sZ(e,t);case"array":return sZ(XW(e),t)}}function oZ(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return Q$(GV).map((function(e){for(var t=0;t<MV.length;++t)if(MV[t][1]==e)return MV[t];for(t=0;t<WV.length;++t)if(WV[t][1]==e)return WV[t];throw e})).forEach((function(r){if(null!=e[r[1]]){var a=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof a?a=String(a):!0===a||!1===a?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),n.push(uz(GV[r[1]]||r[1],a))}})),hz("DocumentProperties",n.join(""),{xmlns:Az})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",a=[];return e&&Q$(e).forEach((function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<MV.length;++r)if(t==MV[r][1])return;for(r=0;r<WV.length;++r)if(t==WV[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var s=e[t],i="string";"number"==typeof s?(i="float",s=String(s)):!0===s||!1===s?(i="boolean",s=s?"1":"0"):s=String(s),a.push(hz(GU(t),s,{"dt:dt":i}))}})),t&&Q$(t).forEach((function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],s="string";"number"==typeof r?(s="float",r=String(r)):!0===r||!1===r?(s="boolean",r=r?"1":"0"):r instanceof Date?(s="dateTime.tz",r=r.toISOString()):r=String(r),a.push(hz(GU(n),r,{"dt:dt":s}))}})),"<"+r+' xmlns="'+Az+'">'+a.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function lZ(e){return hz("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+HK(e.Ref,{r:0,c:0})})}function cZ(e,t,n,r,a,s,i){if(!e||void 0==e.v&&void 0==e.f)return"";var o={};if(e.f&&(o["ss:Formula"]="="+qU(HK(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=PH(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=qU(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=qU(e.l.Tooltip))),n["!merges"])for(var c=n["!merges"],d=0;d!=c.length;++d)c[d].s.c==i.c&&c[d].s.r==i.r&&(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var u="",m="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":u="Number",m=String(e.v);break;case"b":u="Boolean",m=e.v?"1":"0";break;case"e":u="Error",m=NV[e.v];break;case"d":u="DateTime",m=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||d$[14]);break;case"s":u="String",m=((e.v||"")+"").replace(HU,(function(e){return UU[e]})).replace(KU,(function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"}))}var h=WY(r.cellXfs,e,r);o["ss:StyleID"]="s"+(21+h),o["ss:Index"]=i.c+1;var p=null!=e.v?m:"",f="z"==e.t?"":'<Data ss:Type="'+u+'">'+p+"</Data>";return(e.c||[]).length>0&&(f+=e.c.map((function(e){var t=hz("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return hz("Comment",t,{"ss:Author":e.a})})).join("")),hz("Cell",f,o)}function dZ(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=tK(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function uZ(e,t,n){var r=[],a=n.SheetNames[e],s=n.Sheets[a],i=s?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var a=r.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||s.push(lZ(o)))}return s.join("")}(s,0,e,n):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=s?function(e,t){if(!e["!ref"])return"";var n=IH(e["!ref"]),r=e["!merges"]||[],a=0,s=[];e["!cols"]&&e["!cols"].forEach((function(e,t){JG(e);var n=!!e.width,r=FY(t,e),a={"ss:Index":t+1};n&&(a["ss:Width"]=GG(r.width)),e.hidden&&(a["ss:Hidden"]="1"),s.push(hz("Column",null,a))}));for(var i=Array.isArray(e),o=n.s.r;o<=n.e.r;++o){for(var l=[dZ(o,(e["!rows"]||[])[o])],c=n.s.c;c<=n.e.c;++c){var d=!1;for(a=0;a!=r.length;++a)if(!(r[a].s.c>c)&&!(r[a].s.r>o)&&!(r[a].e.c<c)&&!(r[a].e.r<o)){r[a].s.c==c&&r[a].s.r==o||(d=!0);break}if(!d){var u={r:o,c:c},m=OH(u),h=i?(e[o]||[])[c]:e[m];l.push(cZ(h,m,e,t,0,0,u))}}l.push("</Row>"),l.length>2&&s.push(l.join(""))}return s.join("")}(s,t):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(hz("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(hz("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(hz("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)a.push(hz("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&(!r.Workbook.Sheets[s]||r.Workbook.Sheets[s].Hidden);++s);s==n&&a.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(uz("ProtectContents","True")),e["!protect"].objects&&a.push(uz("ProtectObjects","True")),e["!protect"].scenarios&&a.push(uz("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||a.push(uz("EnableSelection","UnlockedCells")):a.push(uz("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach((function(t){e["!protect"][t[0]]&&a.push("<"+t[1]+"/>")}))),0==a.length?"":hz("WorksheetOptions",a.join(""),{xmlns:Pz})}(s,0,e,n)),r.join("")}function mZ(e,t){t||(t={}),e.SSF||(e.SSF=fU(d$)),e.SSF&&(V$(),H$(e.SSF),t.revssf=nU(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],WY(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(oZ(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(hz("Worksheet",uZ(r,t,e),{"ss:Name":qU(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach((function(e,t){var r=[];r.push(hz("NumberFormat",null,{"ss:Format":qU(d$[e.numFmtId])}));var a={"ss:ID":"s"+(21+t)};n.push(hz("Style",r.join(""),a))})),hz("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var a=t[r];null==a.Sheet&&(a.Name.match(/^_xlfn\./)||n.push(lZ(a)))}return hz("Names",n.join(""))}(e),OU+hz("Workbook",n.join(""),{xmlns:Oz,"xmlns:o":Az,"xmlns:x":Pz,"xmlns:ss":Oz,"xmlns:dt":Rz,"xmlns:html":Lz})}function hZ(e){var t={},n=e.content;if(n.l=28,t.AnsiUserType=n.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=function(e){return pV(e,1)}(n),n.length-n.l<=4)return t;var r=n.read_shift(4);return 0==r||r>40?t:(n.l-=4,t.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4||1907505652!==(r=n.read_shift(4))?t:(t.UnicodeClipboardFormat=function(e){return pV(e,2)}(n),0==(r=n.read_shift(4))||r>40?t:(n.l-=4,void(t.Reserved2=n.read_shift(0,"lpwstr")))))}var pZ=[60,1084,2066,2165,2175];function fZ(e,t,n,r,a){var s=r,i=[],o=n.slice(n.l,n.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:case 133:break;default:a.enc.insitu(o)}i.push(o),n.l+=s;for(var l=oH(n,n.l),c=SZ[l],d=0;null!=c&&pZ.indexOf(l)>-1;)s=oH(n,n.l+2),d=n.l+4,2066==l?d+=4:2165!=l&&2175!=l||(d+=12),o=n.slice(d,n.l+4+s),i.push(o),n.l+=4+s,c=SZ[l=oH(n,n.l)];var u=JW(i);xH(u,0);var m=0;u.lens=[];for(var h=0;h<i.length;++h)u.lens.push(m),m+=i[h].length;if(u.length<r)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+u.length+" < "+r;return t.f(u,u.length,a)}function vZ(e,t,n){if("z"!==e.t&&e.XF){var r=0;try{r=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=d$[r])}catch(H5){if(t.WTF)throw H5}if(!t||!1!==t.cellText)try{"e"===e.t?e.w=e.w||NV[e.v]:0===r||"General"==r?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=b$(e.v):e.w=j$(e.v):e.w=U$(r,e.v,{date1904:!!n,dateNF:t&&t.dateNF})}catch(H5){if(t.WTF)throw H5}if(t.cellDates&&r&&"n"==e.t&&F$(d$[r]||String(r))){var a=p$(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function gZ(e,t,n){return{v:e,ixfe:t,t:n}}function xZ(e,t){var n={opts:{}},r={};var a,s,i,o,l,c,d,u,m=t.dense?[]:{},h={},p={},f=null,v=[],g="",x={},y="",b={},j=[],w=[],N=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},E=function(e){return e<8?wV[e]:e<64&&N[e-8]||wV[e]},C=function(e,t,n){if(!(L>1)&&!(n.sheetRows&&e.r>=n.sheetRows)){if(n.cellStyles&&t.XF&&t.XF.data&&function(e,t,n){var r,a=t.XF.data;a&&a.patternType&&n&&n.cellStyles&&(t.s={},t.s.patternType=a.patternType,(r=HG(E(a.icvFore)))&&(t.s.fgColor={rgb:r}),(r=HG(E(a.icvBack)))&&(t.s.bgColor={rgb:r}))}(0,t,n),delete t.ixfe,delete t.XF,a=e,y=OH(e),p&&p.s&&p.e||(p={s:{r:0,c:0},e:{r:0,c:0}}),e.r<p.s.r&&(p.s.r=e.r),e.c<p.s.c&&(p.s.c=e.c),e.r+1>p.e.r&&(p.e.r=e.r+1),e.c+1>p.e.c&&(p.e.c=e.c+1),n.cellFormula&&t.f)for(var r=0;r<j.length;++r)if(!(j[r][0].s.c>e.c||j[r][0].s.r>e.r)&&!(j[r][0].e.c<e.c||j[r][0].e.r<e.r)){t.F=MH(j[r][0]),j[r][0].s.c==e.c&&j[r][0].s.r==e.r||delete t.f,t.f&&(t.f=""+yY(j[r][1],0,e,R,D));break}n.dense?(m[e.r]||(m[e.r]=[]),m[e.r][e.c]=t):m[y]=t}},D={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:j,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(D.password=t.password);var T=[],k=[],A=[],P=[],O=!1,R=[];R.SheetNames=D.snames,R.sharedf=D.sharedf,R.arrayf=D.arrayf,R.names=[],R.XTI=[];var M,I=0,L=0,F=0,B=[],W=[];D.codepage=1200,OW(1200);for(var $=!1;e.l<e.length-1;){var U=e.l,z=e.read_shift(2);if(0===z&&10===I)break;var H=e.l===e.length?0:e.read_shift(2),V=SZ[z];if(V&&V.f){if(t.bookSheets&&133===I&&133!==z)break;if(I=z,2===V.r||12==V.r){var q=e.read_shift(2);if(H-=2,!D.enc&&q!==z&&((255&q)<<8|q>>8)!==z)throw new Error("rt mismatch: "+q+"!="+z);12==V.r&&(e.l+=10,H-=10)}var G={};if(G=10===z?V.f(e,H,D):fZ(z,V,e,H,D),0==L&&-1===[9,521,1033,2057].indexOf(I))continue;switch(z){case 34:n.opts.Date1904=_.WBProps.date1904=G;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(D.enc||(e.l=0),D.enc=G,!t.password)throw new Error("File is password-protected");if(null==G.valid)throw new Error("Encryption scheme unsupported");if(!G.valid)throw new Error("Password is incorrect");break;case 92:D.lastuser=G;break;case 66:var K=Number(G);switch(K){case 21010:K=1200;break;case 32768:K=1e4;break;case 32769:K=1252}OW(D.codepage=K),$=!0;break;case 317:D.rrtabid=G;break;case 25:D.winlocked=G;break;case 439:n.opts.RefreshAll=G;break;case 12:n.opts.CalcCount=G;break;case 16:n.opts.CalcDelta=G;break;case 17:n.opts.CalcIter=G;break;case 13:n.opts.CalcMode=G;break;case 14:n.opts.CalcPrecision=G;break;case 95:n.opts.CalcSaveRecalc=G;break;case 15:D.CalcRefMode=G;break;case 2211:n.opts.FullCalc=G;break;case 129:G.fDialog&&(m["!type"]="dialog"),G.fBelow||((m["!outline"]||(m["!outline"]={})).above=!0),G.fRight||((m["!outline"]||(m["!outline"]={})).left=!0);break;case 224:w.push(G);break;case 430:R.push([G]),R[R.length-1].XTI=[];break;case 35:case 547:R[R.length-1].push(G);break;case 24:case 536:M={Name:G.Name,Ref:yY(G.rgce,0,null,R,D)},G.itab>0&&(M.Sheet=G.itab-1),R.names.push(M),R[0]||(R[0]=[],R[0].XTI=[]),R[R.length-1].push(G),"_xlnm._FilterDatabase"==G.Name&&G.itab>0&&G.rgce&&G.rgce[0]&&G.rgce[0][0]&&"PtgArea3d"==G.rgce[0][0][0]&&(W[G.itab-1]={ref:MH(G.rgce[0][0][1][2])});break;case 22:D.ExternCount=G;break;case 23:0==R.length&&(R[0]=[],R[0].XTI=[]),R[R.length-1].XTI=R[R.length-1].XTI.concat(G),R.XTI=R.XTI.concat(G);break;case 2196:if(D.biff<8)break;null!=M&&(M.Comment=G[1]);break;case 18:m["!protect"]=G;break;case 19:0!==G&&D.WTF&&console.error("Password verifier: "+G);break;case 133:h[G.pos]=G,D.snames.push(G.name);break;case 10:if(--L)break;if(p.e){if(p.e.r>0&&p.e.c>0){if(p.e.r--,p.e.c--,m["!ref"]=MH(p),t.sheetRows&&t.sheetRows<=p.e.r){var Y=p.e.r;p.e.r=t.sheetRows-1,m["!fullref"]=m["!ref"],m["!ref"]=MH(p),p.e.r=Y}p.e.r++,p.e.c++}T.length>0&&(m["!merges"]=T),k.length>0&&(m["!objects"]=k),A.length>0&&(m["!cols"]=A),P.length>0&&(m["!rows"]=P),_.Sheets.push(S)}""===g?x=m:r[g]=m,m=t.dense?[]:{};break;case 9:case 521:case 1033:case 2057:if(8===D.biff&&(D.biff={9:2,521:3,1033:4}[z]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[G.BIFFVer]||8),D.biffguess=0==G.BIFFVer,0==G.BIFFVer&&4096==G.dt&&(D.biff=5,$=!0,OW(D.codepage=28591)),8==D.biff&&0==G.BIFFVer&&16==G.dt&&(D.biff=2),L++)break;if(m=t.dense?[]:{},D.biff<8&&!$&&($=!0,OW(D.codepage=t.codepage||1252)),D.biff<5||0==G.BIFFVer&&4096==G.dt){""===g&&(g="Sheet1"),p={s:{r:0,c:0},e:{r:0,c:0}};var X={pos:e.l-H,name:g};h[X.pos]=X,D.snames.push(g)}else g=(h[U]||{name:""}).name;32==G.dt&&(m["!type"]="chart"),64==G.dt&&(m["!type"]="macro"),T=[],k=[],D.arrayf=j=[],A=[],P=[],O=!1,S={Hidden:(h[U]||{hs:0}).hs,name:g};break;case 515:case 3:case 2:"chart"==m["!type"]&&(t.dense?(m[G.r]||[])[G.c]:m[OH({c:G.c,r:G.r})])&&++G.c,c={ixfe:G.ixfe,XF:w[G.ixfe]||{},v:G.val,t:"n"},F>0&&(c.z=B[c.ixfe>>8&63]),vZ(c,t,n.opts.Date1904),C({c:G.c,r:G.r},c,t);break;case 5:case 517:c={ixfe:G.ixfe,XF:w[G.ixfe],v:G.val,t:G.t},F>0&&(c.z=B[c.ixfe>>8&63]),vZ(c,t,n.opts.Date1904),C({c:G.c,r:G.r},c,t);break;case 638:c={ixfe:G.ixfe,XF:w[G.ixfe],v:G.rknum,t:"n"},F>0&&(c.z=B[c.ixfe>>8&63]),vZ(c,t,n.opts.Date1904),C({c:G.c,r:G.r},c,t);break;case 189:for(var Z=G.c;Z<=G.C;++Z){var J=G.rkrec[Z-G.c][0];c={ixfe:J,XF:w[J],v:G.rkrec[Z-G.c][1],t:"n"},F>0&&(c.z=B[c.ixfe>>8&63]),vZ(c,t,n.opts.Date1904),C({c:Z,r:G.r},c,t)}break;case 6:case 518:case 1030:if("String"==G.val){f=G;break}if((c=gZ(G.val,G.cell.ixfe,G.tt)).XF=w[c.ixfe],t.cellFormula){var Q=G.formula;if(Q&&Q[0]&&Q[0][0]&&"PtgExp"==Q[0][0][0]){var ee=Q[0][0][1][0],te=Q[0][0][1][1],ne=OH({r:ee,c:te});b[ne]?c.f=""+yY(G.formula,0,G.cell,R,D):c.F=((t.dense?(m[ee]||[])[te]:m[ne])||{}).F}else c.f=""+yY(G.formula,0,G.cell,R,D)}F>0&&(c.z=B[c.ixfe>>8&63]),vZ(c,t,n.opts.Date1904),C(G.cell,c,t),f=G;break;case 7:case 519:if(!f)throw new Error("String record expects Formula");f.val=G,(c=gZ(G,f.cell.ixfe,"s")).XF=w[c.ixfe],t.cellFormula&&(c.f=""+yY(f.formula,0,f.cell,R,D)),F>0&&(c.z=B[c.ixfe>>8&63]),vZ(c,t,n.opts.Date1904),C(f.cell,c,t),f=null;break;case 33:case 545:j.push(G);var re=OH(G[0].s);if(s=t.dense?(m[G[0].s.r]||[])[G[0].s.c]:m[re],t.cellFormula&&s){if(!f)break;if(!re||!s)break;s.f=""+yY(G[1],0,G[0],R,D),s.F=MH(G[0])}break;case 1212:if(!t.cellFormula)break;if(y){if(!f)break;b[OH(f.cell)]=G[0],((s=t.dense?(m[f.cell.r]||[])[f.cell.c]:m[OH(f.cell)])||{}).f=""+yY(G[0],0,a,R,D)}break;case 253:c=gZ(v[G.isst].t,G.ixfe,"s"),v[G.isst].h&&(c.h=v[G.isst].h),c.XF=w[c.ixfe],F>0&&(c.z=B[c.ixfe>>8&63]),vZ(c,t,n.opts.Date1904),C({c:G.c,r:G.r},c,t);break;case 513:t.sheetStubs&&(c={ixfe:G.ixfe,XF:w[G.ixfe],t:"z"},F>0&&(c.z=B[c.ixfe>>8&63]),vZ(c,t,n.opts.Date1904),C({c:G.c,r:G.r},c,t));break;case 190:if(t.sheetStubs)for(var ae=G.c;ae<=G.C;++ae){var se=G.ixfe[ae-G.c];c={ixfe:se,XF:w[se],t:"z"},F>0&&(c.z=B[c.ixfe>>8&63]),vZ(c,t,n.opts.Date1904),C({c:ae,r:G.r},c,t)}break;case 214:case 516:case 4:(c=gZ(G.val,G.ixfe,"s")).XF=w[c.ixfe],F>0&&(c.z=B[c.ixfe>>8&63]),vZ(c,t,n.opts.Date1904),C({c:G.c,r:G.r},c,t);break;case 0:case 512:1===L&&(p=G);break;case 252:v=G;break;case 1054:if(4==D.biff){B[F++]=G[1];for(var ie=0;ie<F+163&&d$[ie]!=G[1];++ie);ie>=163&&z$(G[1],F+163)}else z$(G[1],G[0]);break;case 30:B[F++]=G;for(var oe=0;oe<F+163&&d$[oe]!=G;++oe);oe>=163&&z$(G,F+163);break;case 229:T=T.concat(G);break;case 93:k[G.cmo[0]]=D.lastobj=G;break;case 438:D.lastobj.TxO=G;break;case 127:D.lastobj.ImData=G;break;case 440:for(l=G[0].s.r;l<=G[0].e.r;++l)for(o=G[0].s.c;o<=G[0].e.c;++o)(s=t.dense?(m[l]||[])[o]:m[OH({c:o,r:l})])&&(s.l=G[1]);break;case 2048:for(l=G[0].s.r;l<=G[0].e.r;++l)for(o=G[0].s.c;o<=G[0].e.c;++o)(s=t.dense?(m[l]||[])[o]:m[OH({c:o,r:l})])&&s.l&&(s.l.Tooltip=G[1]);break;case 28:if(D.biff<=5&&D.biff>=2)break;s=t.dense?(m[G[0].r]||[])[G[0].c]:m[OH(G[0])];var le=k[G[2]];s||(t.dense?(m[G[0].r]||(m[G[0].r]=[]),s=m[G[0].r][G[0].c]={t:"z"}):s=m[OH(G[0])]={t:"z"},p.e.r=Math.max(p.e.r,G[0].r),p.s.r=Math.min(p.s.r,G[0].r),p.e.c=Math.max(p.e.c,G[0].c),p.s.c=Math.min(p.s.c,G[0].c)),s.c||(s.c=[]),i={a:G[1],t:le.TxO.t},s.c.push(i);break;case 2173:w[G.ixfe],G.ext.forEach((function(e){e[0]}));break;case 125:if(!D.cellStyles)break;for(;G.e>=G.s;)A[G.e--]={width:G.w/256,level:G.level||0,hidden:!!(1&G.flags)},O||(O=!0,ZG(G.w/256)),JG(A[G.e+1]);break;case 520:var ce={};null!=G.level&&(P[G.r]=ce,ce.level=G.level),G.hidden&&(P[G.r]=ce,ce.hidden=!0),G.hpt&&(P[G.r]=ce,ce.hpt=G.hpt,ce.hpx=tK(G.hpt));break;case 38:case 39:case 40:case 41:m["!margins"]||BY(m["!margins"]={}),m["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[z]]=G;break;case 161:m["!margins"]||BY(m["!margins"]={}),m["!margins"].header=G.header,m["!margins"].footer=G.footer;break;case 574:G.RTL&&(_.Views[0].RTL=!0);break;case 146:N=G;break;case 2198:u=G;break;case 140:d=G;break;case 442:g?S.CodeName=G||S.name:_.WBProps.CodeName=G||"ThisWorkbook"}}else V||console.error("Missing Info for XLS Record 0x"+z.toString(16)),e.l+=H}return n.SheetNames=Q$(h).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return h[e].name})),t.bookSheets||(n.Sheets=r),!n.SheetNames.length&&x["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=x)):n.Preamble=x,n.Sheets&&W.forEach((function(e,t){n.Sheets[n.SheetNames[t]]["!autofilter"]=e})),n.Strings=v,n.SSF=fU(d$),D.enc&&(n.Encryption=D.enc),u&&(n.Themes=u),n.Metadata={},void 0!==d&&(n.Metadata.Country=d),R.names.length>0&&(_.Names=R.names),n.Workbook=_,n}var yZ="e0859ff2f94f6810ab9108002b27b3d9",bZ="02d5cdd59c2e1b10939708002b2cf9ae",jZ="05d5cdd59c2e1b10939708002b2cf9ae";function wZ(e,t){var n,r,a,s;if(t||(t={}),CJ(t),RW(),t.codepage&&PW(t.codepage),e.FullPaths){if(Y$.find(e,"/encryption"))throw new Error("File is password-protected");n=Y$.find(e,"!CompObj"),r=Y$.find(e,"/Workbook")||Y$.find(e,"/Book")}else{switch(t.type){case"base64":e=KW(zW(e));break;case"binary":e=KW(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e))}xH(e,0),r={content:e}}if(n&&hZ(n),t.bookProps&&!t.bookSheets)a={};else{var i=HW?"buffer":"array";if(r&&r.content)a=xZ(r.content,t);else if((s=Y$.find(e,"PerfectOffice_MAIN"))&&s.content)a=vG.to_workbook(s.content,(t.type=i,t));else{if(!(s=Y$.find(e,"NativeContent_MAIN"))||!s.content)throw(s=Y$.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");a=vG.to_workbook(s.content,(t.type=i,t))}t.bookVBA&&e.FullPaths&&Y$.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=function(e){var t=Y$.utils.cfb_new({root:"R"});return e.FullPaths.forEach((function(n,r){if("/"!==n.slice(-1)&&n.match(/_VBA_PROJECT_CUR/)){var a=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Y$.utils.cfb_add(t,a,e.FileIndex[r].content)}})),Y$.write(t)}(e))}var o={};return e.FullPaths&&function(e,t,n){var r=Y$.find(e,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var a=cq(r,gV,bZ);for(var s in a)t[s]=a[s]}catch(H5){if(n.WTF)throw H5}var i=Y$.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=cq(i,xV,yZ);for(var l in o)null==t[l]&&(t[l]=o[l])}catch(H5){if(n.WTF)throw H5}t.HeadingPairs&&t.TitlesOfParts&&(UV(t.HeadingPairs,t.TitlesOfParts,t,n),delete t.HeadingPairs,delete t.TitlesOfParts)}(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function NZ(e,t){var n=t||{},r=Y$.utils.cfb_new({root:"R"}),a="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":a="/Workbook",n.biff=8;break;case"biff5":a="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Y$.utils.cfb_add(r,a,MZ(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],a=[],s=[],i=0,o=eU(gV,"n"),l=eU(xV,"n");if(e.Props)for(n=Q$(e.Props),i=0;i<n.length;++i)(Object.prototype.hasOwnProperty.call(o,n[i])?r:Object.prototype.hasOwnProperty.call(l,n[i])?a:s).push([n[i],e.Props[n[i]]]);if(e.Custprops)for(n=Q$(e.Custprops),i=0;i<n.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},n[i])||(Object.prototype.hasOwnProperty.call(o,n[i])?r:Object.prototype.hasOwnProperty.call(l,n[i])?a:s).push([n[i],e.Custprops[n[i]]]);var c=[];for(i=0;i<s.length;++i)iq.indexOf(s[i][0])>-1||$V.indexOf(s[i][0])>-1||null!=s[i][1]&&c.push(s[i]);a.length&&Y$.utils.cfb_add(t,"/\x05SummaryInformation",dq(a,yZ,l,xV)),(r.length||c.length)&&Y$.utils.cfb_add(t,"/\x05DocumentSummaryInformation",dq(r,bZ,o,gV,c.length?c:null,jZ))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach((function(n,r){if(0!=r){var a=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==a.slice(-1)&&Y$.utils.cfb_add(e,a,t.FileIndex[r].content)}}))}(r,Y$.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var _Z={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=r,7&s&&(n.level=7&s),16&s&&(n.hidden=!0),32&s&&(n.hpt=a/20),n}},1:{f:function(e){return[YH(e)]}},2:{f:function(e){return[YH(e),iV(e),"n"]}},3:{f:function(e){return[YH(e),e.read_shift(1),"e"]}},4:{f:function(e){return[YH(e),e.read_shift(1),"b"]}},5:{f:function(e){return[YH(e),uV(e),"n"]}},6:{f:function(e){return[YH(e),zH(e),"str"]}},7:{f:function(e){return[YH(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,a=YH(e);a.r=n["!row"];var s=[a,zH(e),"str"];if(n.cellFormula){e.l+=2;var i=EY(e,r-e.l,n);s[3]=yY(i,0,a,n.supbooks,n)}else e.l=r;return s}},9:{f:function(e,t,n){var r=e.l+t,a=YH(e);a.r=n["!row"];var s=[a,uV(e),"n"];if(n.cellFormula){e.l+=2;var i=EY(e,r-e.l,n);s[3]=yY(i,0,a,n.supbooks,n)}else e.l=r;return s}},10:{f:function(e,t,n){var r=e.l+t,a=YH(e);a.r=n["!row"];var s=[a,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var i=EY(e,r-e.l,n);s[3]=yY(i,0,a,n.supbooks,n)}else e.l=r;return s}},11:{f:function(e,t,n){var r=e.l+t,a=YH(e);a.r=n["!row"];var s=[a,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var i=EY(e,r-e.l,n);s[3]=yY(i,0,a,n.supbooks,n)}else e.l=r;return s}},12:{f:function(e){return[ZH(e)]}},13:{f:function(e){return[ZH(e),iV(e),"n"]}},14:{f:function(e){return[ZH(e),e.read_shift(1),"e"]}},15:{f:function(e){return[ZH(e),e.read_shift(1),"b"]}},16:{f:dX},17:{f:function(e){return[ZH(e),zH(e),"str"]}},18:{f:function(e){return[ZH(e),e.read_shift(4),"s"]}},19:{f:qH},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=rV(e),i=CY(e,0,n),o=tV(e);e.l=r;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var a=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(a.fItalic&&(r.italic=1),a.fCondense&&(r.condense=1),a.fExtend&&(r.extend=1),a.fShadow&&(r.shadow=1),a.fOutline&&(r.outline=1),a.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(r.underline=s);var i=e.read_shift(1);i>0&&(r.family=i);var o=e.read_shift(1);switch(o>0&&(r.charset=o),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),a=e.read_shift(2,"i"),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=wV[r];l&&(t.rgb=HG(l));break;case 2:t.rgb=HG([s,i,o]);break;case 3:t.theme=r}return 0!=a&&(t.tint=a>0?a/32767:a/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=zH(e),r}},44:{f:function(e,t){return[e.read_shift(2),zH(e)]}},45:{f:uK},46:{f:fK},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),a=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:a}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:iG},62:{f:function(e){return[YH(e),qH(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=OH(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:yH,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=QH(e,t-19),n}},148:{f:lX,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var a=t>8?zH(e):"";return a.length>0&&(n.CodeName=a),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=aV(e,t-8),n.name=zH(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:cV},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:uX},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:zH(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:aV},357:{},358:{},359:{},360:{T:1},361:{},362:{f:tG},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,a=lV(e),s=e.read_shift(1),i=[a];if(i[2]=s,n.cellFormula){var o=SY(e,r-e.l,n);i[1]=o}else e.l=r;return i}},427:{f:function(e,t,n){var r=e.l+t,a=[cV(e,16)];if(n.cellFormula){var s=DY(e,r-e.l,n);a[1]=s,e.l=r}else e.l=r;return a}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return hX.forEach((function(n){t[n]=uV(e)})),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=cV(e,16),a=tV(e),s=zH(e),i=zH(e),o=zH(e);e.l=n;var l={rfx:r,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:aV},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:BK},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=cV(e,16);return t.rfx=n.s,t.ref=OH(n.s),e.l+=16,t}},636:{T:-1},637:{f:GH},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:zH(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},SZ={6:{f:wY},10:{f:uq},12:{f:pq},13:{f:pq},14:{f:mq},15:{f:mq},16:{f:uV},17:{f:mq},18:{f:mq},19:{f:pq},20:{f:Zq},21:{f:Zq},23:{f:tG},24:{f:eG},25:{f:mq},26:{},27:{},28:{f:function(e,t,n){return function(e,t,n){if(!(n.biff<8)){var r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=Nq(e,0,n);return n.biff<8&&e.read_shift(1),[{r:r,c:a},o,i,s]}}(e,0,n)}},29:{},34:{f:mq},35:{f:Jq},38:{f:uV},39:{f:uV},40:{f:uV},41:{f:uV},42:{f:mq},43:{f:mq},47:{f:function(e,t,n){var r={Type:n.biff>=8?e.read_shift(2):0};return r.Type?UG(e,t-2,r):function(e,t,n,r){var a={key:pq(e),verificationBytes:pq(e)};n.password&&(a.verifier=BG(n.password)),r.valid=a.verificationBytes===a.verifier,r.valid&&(r.insitu=$G(n.password))}(e,n.biff,n,r),r}},49:{f:function(e,t,n){var r={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10}return r.name=xq(e,0,n),r}},51:{f:pq},60:{},61:{f:function(e){return{Pos:[e.read_shift(2),e.read_shift(2)],Dim:[e.read_shift(2),e.read_shift(2)],Flags:e.read_shift(2),CurTab:e.read_shift(2),FirstTab:e.read_shift(2),Selected:e.read_shift(2),TabRatio:e.read_shift(2)}}},64:{f:mq},65:{f:function(){}},66:{f:pq},77:{},80:{},81:{},82:{},85:{f:pq},89:{},90:{},91:{},92:{f:function(e,t,n){if(n.enc)return e.l+=t,"";var r=e.l,a=Nq(e,0,n);return e.read_shift(t+r-e.l),a}},93:{f:function(e,t,n){if(n&&n.biff<8)return function(e,t,n){e.l+=4;var r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((rG[r]||yH)(e,t,n)),{cmo:[a,r,s],ft:i}}(e,t,n);var r=Bq(e),a=function(e,t){for(var n=e.l+t,r=[];e.l<n;){var a=e.read_shift(2);e.l-=2;try{r.push($q[a](e,n-e.l))}catch(H5){return e.l=n,r}}return e.l!=n&&(e.l=n),r}(e,t-22,r[1]);return{cmo:r,ft:a}}},94:{},95:{f:mq},96:{},97:{},99:{f:mq},125:{f:iG},128:{f:function(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(0!==t[0]&&t[0]--,0!==t[1]&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}},129:{f:function(e,t,n){var r=n&&8==n.biff||2==t?e.read_shift(2):(e.l+=t,0);return{fDialog:16&r,fBelow:64&r,fRight:128&r}}},130:{f:pq},131:{f:mq},132:{f:mq},133:{f:function(e,t,n){var r=e.read_shift(4),a=3&e.read_shift(1),s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule"}var i=xq(e,0,n);return 0===i.length&&(i="Sheet1"),{pos:r,hs:a,dt:s,name:i}}},134:{},140:{f:function(e){var t,n=[0,0];return t=e.read_shift(2),n[0]=yV[t]||t,t=e.read_shift(2),n[1]=yV[t]||t,n}},141:{f:pq},144:{},146:{f:function(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(kq(e));return n}},151:{},152:{},153:{},154:{},155:{},156:{f:pq},157:{},158:{},160:{f:lG},161:{f:function(e,t){var n={};return t<32||(e.l+=16,n.header=uV(e),n.footer=uV(e),e.l+=2),n}},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:function(e,t){for(var n=e.l+t-2,r=e.read_shift(2),a=e.read_shift(2),s=[];e.l<n;)s.push(Rq(e));if(e.l!==n)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:r,c:a,C:i,rkrec:s}}},190:{f:function(e,t){for(var n=e.l+t-2,r=e.read_shift(2),a=e.read_shift(2),s=[];e.l<n;)s.push(e.read_shift(2));if(e.l!==n)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:r,c:a,C:i,ixfe:s}}},193:{f:uq},197:{},198:{},199:{},200:{},201:{},202:{f:mq},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:pq},220:{},221:{f:mq},222:{},224:{f:function(e,t,n){var r={};return r.ifnt=e.read_shift(2),r.numFmtId=e.read_shift(2),r.flags=e.read_shift(2),r.fStyle=r.flags>>2&1,r.data=function(e,t,n,r){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return a.patternType=bV[o>>26],r.cellStyles?(a.alc=7&s,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=15&i,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=127&o,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=127&l,a.icvBack=l>>7&127,a.fsxButton=l>>14&1,a):a}(e,0,r.fStyle,n),r}},225:{f:function(e,t){return 0===t||e.read_shift(2),1200}},226:{f:uq},227:{},229:{f:function(e,t){for(var n=[],r=e.read_shift(2);r--;)n.push(Mq(e));return n}},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:function(e,t){for(var n=e.l+t,r=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<n;++i)s.push(yq(e));return s.Count=r,s.Unique=a,s}},253:{f:function(e){var t=Aq(e);return t.isst=e.read_shift(4),t}},255:{f:function(e,t){var n={};return n.dsst=e.read_shift(2),e.l+=t-2,n}},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:vq},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:mq},353:{f:uq},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:function(e,t,n){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(n.sbcch=s,1025==s||14849==s)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=jq(e,s),o=[];r>e.l;)o.push(wq(e));return[s,a,i,o]}},431:{f:mq},432:{},433:{},434:{},437:{},438:{f:function(e,t,n){var r=e.l,a="";try{e.l+=4;var s=(n.lastobj||{cmo:[0,0]}).cmo[1];-1==[0,5,7,11,12,14].indexOf(s)?e.l+=6:function(e){var t=e.read_shift(1);e.l++;var n=e.read_shift(2);return e.l+=2,[t,n]}(e);var i=e.read_shift(2);e.read_shift(2),pq(e);var o=e.read_shift(2);e.l+=o;for(var l=1;l<e.lens.length-1;++l){if(e.l-r!=e.lens[l])throw new Error("TxO: bad continue record");var c=e[e.l];if((a+=jq(e,e.lens[l+1]-e.lens[l]-1)).length>=(c?i:2*i))break}if(a.length!==i&&a.length!==2*i)throw new Error("cchText: "+i+" != "+a.length);return e.l=r+t,{t:a}}catch(H5){return e.l=r+t,{t:a}}}},439:{f:mq},440:{f:function(e,t){var n=Mq(e);e.l+=16;var r=function(e,t){var n=e.l+t,r=e.read_shift(4);if(2!==r)throw new Error("Unrecognized streamVersion: "+r);var a=e.read_shift(2);e.l+=2;var s,i,o,l,c,d,u="";16&a&&(s=Eq(e,e.l)),128&a&&(i=Eq(e,e.l)),257===(257&a)&&(o=Eq(e,e.l)),1===(257&a)&&(l=Sq(e,e.l)),8&a&&(u=Eq(e,e.l)),32&a&&(c=e.read_shift(16)),64&a&&(d=YV(e)),e.l=n;var m=i||o||l||"";m&&u&&(m+="#"+u),m||(m="#"+u),2&a&&"/"==m.charAt(0)&&"/"!=m.charAt(1)&&(m="file://"+m);var h={Target:m};return c&&(h.guid=c),d&&(h.time=d),s&&(h.Tooltip=s),h}(e,t-24);return[n,r]}},441:{},442:{f:wq},443:{},444:{f:pq},445:{},446:{},448:{f:uq},449:{f:function(e){return e.read_shift(2),e.read_shift(4)},r:2},450:{f:uq},512:{f:Kq},513:{f:oG},515:{f:function(e,t,n){n.biffguess&&2==n.biff&&(n.biff=5);var r=Aq(e),a=uV(e);return r.val=a,r}},516:{f:function(e,t,n){n.biffguess&&2==n.biff&&(n.biff=5),e.l;var r=Aq(e);2==n.biff&&e.l++;var a=wq(e,e.l,n);return r.val=a,r}},517:{f:Xq},519:{f:cG},520:{f:function(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var n=e.read_shift(2);e.l+=4;var r=e.read_shift(1);return e.l+=3,7&r&&(t.level=7&r),32&r&&(t.hidden=!0),64&r&&(t.hpt=n/20),t}},523:{},545:{f:nG},549:{f:Vq},566:{},574:{f:function(e,t,n){return n&&n.biff>=2&&n.biff<5?{}:{RTL:64&e.read_shift(2)}}},638:{f:function(e){var t=e.read_shift(2),n=e.read_shift(2),r=Rq(e);return{r:t,c:n,ixfe:r[0],rknum:r[1]}}},659:{},1048:{},1054:{f:function(e,t,n){return[e.read_shift(2),Nq(e,0,n)]}},1084:{},1212:{f:function(e,t,n){var r=Lq(e);e.l++;var a=e.read_shift(1);return[jY(e,t-=8,n),a,r]}},2048:{f:function(e,t){e.read_shift(2);var n=Mq(e),r=e.read_shift((t-10)/2,"dbcs-cont");return[n,r=r.replace(QW,"")]}},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Uq},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:uq},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:function(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t},r:12},2173:{f:function(e,t){e.l,e.l+=2;var n=e.read_shift(2);e.l+=2;for(var r=e.read_shift(2),a=[];r-- >0;)a.push(AK(e,e.l));return{ixfe:n,ext:a}},r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:mq,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:function(e,t,n){if(!(n.biff<8)){var r=e.read_shift(2),a=e.read_shift(2);return[jq(e,r,n),jq(e,a,n)]}e.l+=t},r:12},2197:{},2198:{f:function(e,t,n){var r=e.l+t;if(124226!==e.read_shift(4))if(n.cellStyles){var a,s=e.slice(e.l);e.l=r;try{a=AU(s,{type:"array"})}catch(H5){return}var i=EU(a,"theme/theme/theme1.xml",!0);if(i)return DK(i,n)}else e.l=r},r:12},2199:{},2200:{},2201:{},2202:{f:function(e){return[0!==e.read_shift(4),0!==e.read_shift(4),e.read_shift(4)]},r:12},2203:{f:uq},2204:{},2205:{},2206:{},2207:{},2211:{f:function(e){var t=function(e){var t=e.read_shift(2),n=e.read_shift(2);return e.l+=8,{type:t,flags:n}}(e);if(2211!=t.type)throw new Error("Invalid Future Record "+t.type);return 0!==e.read_shift(4)}},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:pq},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:function(e,t,n){var r={area:!1};if(5!=n.biff)return e.l+=t,r;var a=e.read_shift(1);return e.l+=3,16&a&&(r.area=!0),r}},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:function(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(kq(e));return n}},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Kq},1:{},2:{f:function(e){var t=Aq(e);++e.l;var n=e.read_shift(2);return t.t="n",t.val=n,t}},3:{f:function(e){var t=Aq(e);++e.l;var n=uV(e);return t.t="n",t.val=n,t}},4:{f:function(e,t,n){n.biffguess&&5==n.biff&&(n.biff=2);var r=Aq(e);++e.l;var a=Nq(e,0,n);return r.t="str",r.val=a,r}},5:{f:Xq},7:{f:function(e){var t=e.read_shift(1);return 0===t?(e.l++,""):e.read_shift(t,"sbcs-cont")}},8:{},9:{f:Uq},11:{},22:{f:pq},30:{f:Gq},31:{},32:{},33:{f:nG},36:{},37:{f:Vq},50:{f:function(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}},62:{},52:{},67:{},68:{f:pq},69:{},86:{},126:{},127:{f:function(e){var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),a={fmt:t,env:n,len:r,data:e.slice(e.l,e.l+r)};return e.l+=r,a}},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:function(e,t,n){var r=e.l+t,a=Aq(e),s=e.read_shift(2),i=jq(e,s,n);return e.l=r,a.t="str",a.val=i,a}},223:{},234:{},354:{},421:{},518:{f:wY},521:{f:Uq},536:{f:eG},547:{f:Jq},561:{},579:{},1030:{f:wY},1033:{f:Uq},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function EZ(e,t,n,r){var a=t;if(!isNaN(a)){var s=r||(n||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&aH(n)&&e.push(n)}}function CZ(e,t,n){return e||(e=bH(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function DZ(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var a="d"==t.t?aU(hU(t.v)):t.v;return void(a==(0|a)&&a>=0&&a<65536?EZ(e,2,function(e,t,n){var r=bH(9);return CZ(r,e,t),r.write_shift(2,n),r}(n,r,a)):EZ(e,3,function(e,t,n){var r=bH(15);return CZ(r,e,t),r.write_shift(8,n,"f"),r}(n,r,a)));case"b":case"e":return void EZ(e,5,function(e,t,n,r){var a=bH(9);return CZ(a,e,t),gq(n,r||"b",a),a}(n,r,t.v,t.t));case"s":case"str":return void EZ(e,4,function(e,t,n){var r=bH(8+2*n.length);return CZ(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}EZ(e,1,CZ(null,n,r))}function TZ(e,t){var n=t||{};for(var r=wH(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==n.sheet&&(a=s);if(0==a&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return EZ(r,4==n.biff?1033:3==n.biff?521:9,zq(0,16,n)),function(e,t,n,r){var a,s=Array.isArray(t),i=IH(t["!ref"]||"A1"),o="",l=[];if(i.e.c>255||i.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),a=MH(i)}for(var c=i.s.r;c<=i.e.r;++c){o=TH(c);for(var d=i.s.c;d<=i.e.c;++d){c===i.s.r&&(l[d]=AH(d)),a=l[d]+o;var u=s?(t[c]||[])[d]:t[a];u&&DZ(e,u,c,d)}}}(r,e.Sheets[e.SheetNames[a]],0,n),EZ(r,10),r.end()}function kZ(e,t,n){EZ(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,a=bH(r?15+n.length:16+2*n.length);return a.write_shift(2,20*(e.sz||12)),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,n.length),r||a.write_shift(1,1),a.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),a}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function AZ(e,t){if(t){var n=0;t.forEach((function(t,r){++n<=256&&t&&EZ(e,125,function(e,t){var n=bH(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(FY(r,t),r))}))}}function PZ(e,t,n,r,a){var s=16+WY(a.cellXfs,t,a);if(null!=t.v||t.bf)if(t.bf)EZ(e,6,NY(t,n,r,0,s));else switch(t.t){case"d":case"n":EZ(e,515,function(e,t,n,r){var a=bH(14);return Pq(e,t,r,a),mV(n,a),a}(n,r,"d"==t.t?aU(hU(t.v)):t.v,s));break;case"b":case"e":EZ(e,517,function(e,t,n,r,a,s){var i=bH(8);return Pq(e,t,r,i),gq(n,s,i),i}(n,r,t.v,s,0,t.t));break;case"s":case"str":if(a.bookSST)EZ(e,253,function(e,t,n,r){var a=bH(10);return Pq(e,t,r,a),a.write_shift(4,n),a}(n,r,LY(a.Strings,t.v,a.revStrings),s));else EZ(e,516,function(e,t,n,r,a){var s=!a||8==a.biff,i=bH(+s+8+(1+s)*n.length);return Pq(e,t,r,i),i.write_shift(2,n.length),s&&i.write_shift(1,1),i.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),i}(n,r,(t.v||"").slice(0,255),s,a));break;default:EZ(e,513,Pq(n,r,s))}else EZ(e,513,Pq(n,r,s))}function OZ(e,t,n){var r,a=wH(),s=n.SheetNames[e],i=n.Sheets[s]||{},o=(n||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=8==t.biff,u="",m=[],h=IH(i["!ref"]||"A1"),p=d?65536:16384;if(h.e.c>255||h.e.r>=p){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,p-1)}EZ(a,2057,zq(0,16,t)),EZ(a,13,fq(1)),EZ(a,12,fq(100)),EZ(a,15,hq(!0)),EZ(a,17,hq(!1)),EZ(a,16,mV(.001)),EZ(a,95,hq(!0)),EZ(a,42,hq(!1)),EZ(a,43,hq(!1)),EZ(a,130,fq(1)),EZ(a,128,function(e){var t=bH(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),EZ(a,131,hq(!1)),EZ(a,132,hq(!1)),d&&AZ(a,i["!cols"]),EZ(a,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=bH(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(h,t)),d&&(i["!links"]=[]);for(var f=h.s.r;f<=h.e.r;++f){u=TH(f);for(var v=h.s.c;v<=h.e.c;++v){f===h.s.r&&(m[v]=AH(v)),r=m[v]+u;var g=c?(i[f]||[])[v]:i[r];g&&(PZ(a,g,f,v,t),d&&g.l&&i["!links"].push([r,g.l]))}}var x=l.CodeName||l.name||s;return d&&EZ(a,574,function(e){var t=bH(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&EZ(a,229,function(e){var t=bH(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)Iq(e[n],t);return t}(i["!merges"])),d&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];EZ(e,440,aG(r)),r[1].Tooltip&&EZ(e,2048,sG(r))}delete t["!links"]}(a,i),EZ(a,442,_q(x)),d&&function(e,t){var n=bH(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),EZ(e,2151,n),(n=bH(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),Iq(IH(t["!ref"]||"A1"),n),n.write_shift(4,4),EZ(e,2152,n)}(a,i),EZ(a,10),a.end()}function RZ(e,t,n){var r=wH(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=8==n.biff,l=5==n.biff;(EZ(r,2057,zq(0,5,n)),"xla"==n.bookType&&EZ(r,135),EZ(r,225,o?fq(1200):null),EZ(r,193,function(e,t){t||(t=bH(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),l&&EZ(r,191),l&&EZ(r,192),EZ(r,226),EZ(r,92,function(e,t){var n=!t||8==t.biff,r=bH(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),EZ(r,66,fq(o?1200:1252)),o&&EZ(r,353,fq(0)),o&&EZ(r,448),EZ(r,317,function(e){for(var t=bH(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),o&&e.vbaraw&&EZ(r,211),o&&e.vbaraw)&&EZ(r,442,_q(i.CodeName||"ThisWorkbook"));EZ(r,156,fq(17)),EZ(r,25,hq(!1)),EZ(r,18,hq(!1)),EZ(r,19,fq(0)),o&&EZ(r,431,hq(!1)),o&&EZ(r,444,fq(0)),EZ(r,61,function(){var e=bH(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),EZ(r,64,hq(!1)),EZ(r,141,fq(0)),EZ(r,34,hq("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&ZU(e.Workbook.WBProps.date1904)?"true":"false"}(e))),EZ(r,14,hq(!0)),o&&EZ(r,439,hq(!1)),EZ(r,218,fq(0)),kZ(r,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach((function(r){for(var a=r[0];a<=r[1];++a)null!=t[a]&&EZ(e,1054,qq(a,t[a],n))}))}(r,e.SSF,n),function(e,t){for(var n=0;n<16;++n)EZ(e,224,Yq({numFmtId:0,style:!0},0,t));t.cellXfs.forEach((function(n){EZ(e,224,Yq(n,0,t))}))}(r,n),o&&EZ(r,352,hq(!1));var c,d=r.end(),u=wH();o&&EZ(u,140,(c||(c=bH(4)),c.write_shift(2,1),c.write_shift(2,1),c)),o&&n.Strings&&function(e,t,n,r){var a=r||(n||[]).length||0;if(a<=8224)return EZ(e,t,n,a);var s=t;if(!isNaN(s)){for(var i=n.parts||[],o=0,l=0,c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c;l<a;){for((d=e.next(4)).write_shift(2,60),c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;d.write_shift(2,c),e.push(n.slice(l,l+c)),l+=c}}}(u,252,function(e){var t=bH(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],r=0;r<e.length;++r)n[r]=bq(e[r]);var a=JW([t].concat(n));return a.parts=[t.length].concat(n.map((function(e){return e.length}))),a}(n.Strings)),EZ(u,10);var m=u.end(),h=wH(),p=0,f=0;for(f=0;f<e.SheetNames.length;++f)p+=(o?12:11)+(o?2:1)*e.SheetNames[f].length;var v=d.length+p+m.length;for(f=0;f<e.SheetNames.length;++f){EZ(h,133,Hq({pos:v,hs:(s[f]||{}).Hidden||0,dt:0,name:e.SheetNames[f]},n)),v+=t[f].length}var g=h.end();if(p!=g.length)throw new Error("BS8 "+p+" != "+g.length);var x=[];return d.length&&x.push(d),g.length&&x.push(g),m.length&&x.push(m),JW(x)}function MZ(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];if(r&&r["!ref"])RH(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var a=t||{};switch(a.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=fU(d$)),e&&e.SSF&&(V$(),H$(e.SSF),n.revssf=nU(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,DJ(n),n.cellXfs=[],WY(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)r[r.length]=OZ(a,n,e);return r.unshift(RZ(e,r,n)),JW(r)}(e,t);case 4:case 3:case 2:return TZ(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function IZ(e,t){var n=t||{};var r=n.dense?[]:{},a=(e=e.replace(/<!--.*?-->/g,"")).match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,l=bU(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,d=0,u=0,m=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(i=0;i<l.length;++i){var f=l[i].trim(),v=f.slice(0,3).toLowerCase();if("<tr"!=v){if("<td"==v||"<th"==v){var g=f.split(/<\/t[dh]>/i);for(o=0;o<g.length;++o){var x=g[o].trim();if(x.match(/<t[dh]/i)){for(var y=x,b=0;"<"==y.charAt(0)&&(b=y.indexOf(">"))>-1;)y=y.slice(b+1);for(var j=0;j<p.length;++j){var w=p[j];w.s.c==d&&w.s.r<c&&c<=w.e.r&&(d=w.e.c+1,j=-1)}var N=BU(x.slice(0,x.indexOf(">")));m=N.colspan?+N.colspan:1,((u=+N.rowspan)>1||m>1)&&p.push({s:{r:c,c:d},e:{r:c+(u||1)-1,c:d+m-1}});var _=N.t||N["data-t"]||"";if(y.length)if(y=sz(y),h.s.r>c&&(h.s.r=c),h.e.r<c&&(h.e.r=c),h.s.c>d&&(h.s.c=d),h.e.c<d&&(h.e.c=d),y.length){var S={t:"s",v:y};n.raw||!y.trim().length||"s"==_||("TRUE"===y?S={t:"b",v:!0}:"FALSE"===y?S={t:"b",v:!1}:isNaN(gU(y))?isNaN(yU(y).getDate())||(S={t:"d",v:hU(y)},n.cellDates||(S={t:"n",v:aU(S.v)}),S.z=n.dateNF||d$[14]):S={t:"n",v:gU(y)}),n.dense?(r[c]||(r[c]=[]),r[c][d]=S):r[OH({r:c,c:d})]=S,d+=m}else d+=m;else d+=m}}}}else{if(++c,n.sheetRows&&n.sheetRows<=c){--c;break}d=0}}return r["!ref"]=MH(h),p.length&&(r["!merges"]=p),r}function LZ(e,t,n,r){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,c=0;c<a.length;++c)if(!(a[c].s.r>n||a[c].s.c>i)&&!(a[c].e.r<n||a[c].e.c<i)){if(a[c].s.r<n||a[c].s.c<i){o=-1;break}o=a[c].e.r-a[c].s.r+1,l=a[c].e.c-a[c].s.c+1;break}if(!(o<0)){var d=OH({r:n,c:i}),u=r.dense?(e[n]||[])[i]:e[d],m=u&&null!=u.v&&(u.h||YU(u.w||(FH(u),u.w)||""))||"",h={};o>1&&(h.rowspan=o),l>1&&(h.colspan=l),r.editable?m='<span contenteditable="true">'+m+"</span>":u&&(h["data-t"]=u&&u.t||"z",null!=u.v&&(h["data-v"]=u.v),null!=u.z&&(h["data-z"]=u.z),u.l&&"#"!=(u.l.Target||"#").charAt(0)&&(m='<a href="'+u.l.Target+'">'+m+"</a>")),h.id=(r.id||"sjs")+"-"+d,s.push(hz("td",m,h))}}return"<tr>"+s.join("")+"</tr>"}var FZ='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',BZ="</body></html>";function WZ(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function $Z(e,t){var n=t||{},r=null!=n.header?n.header:FZ,a=null!=n.footer?n.footer:BZ,s=[r],i=RH(e["!ref"]);n.dense=Array.isArray(e),s.push(WZ(0,0,n));for(var o=i.s.r;o<=i.e.r;++o)s.push(LZ(e,i,o,n));return s.push("</table>"+a),s.join("")}function UZ(e,t,n){var r=n||{};var a=0,s=0;if(null!=r.origin)if("number"==typeof r.origin)a=r.origin;else{var i="string"==typeof r.origin?PH(r.origin):r.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=RH(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),-1==a&&(c.e.r=a=d.e.r+1)}var u=[],m=0,h=e["!rows"]||(e["!rows"]=[]),p=0,f=0,v=0,g=0,x=0,y=0;for(e["!cols"]||(e["!cols"]=[]);p<o.length&&f<l;++p){var b=o[p];if(HZ(b)){if(r.display)continue;h[f]={hidden:!0}}var j=b.children;for(v=g=0;v<j.length;++v){var w=j[v];if(!r.display||!HZ(w)){var N=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):sz(w.innerHTML),_=w.getAttribute("data-z")||w.getAttribute("z");for(m=0;m<u.length;++m){var S=u[m];S.s.c==g+s&&S.s.r<f+a&&f+a<=S.e.r&&(g=S.e.c+1-s,m=-1)}y=+w.getAttribute("colspan")||1,((x=+w.getAttribute("rowspan")||1)>1||y>1)&&u.push({s:{r:f+a,c:g+s},e:{r:f+a+(x||1)-1,c:g+s+(y||1)-1}});var E={t:"s",v:N},C=w.getAttribute("data-t")||w.getAttribute("t")||"";null!=N&&(0==N.length?E.t=C||"z":r.raw||0==N.trim().length||"s"==C||("TRUE"===N?E={t:"b",v:!0}:"FALSE"===N?E={t:"b",v:!1}:isNaN(gU(N))?isNaN(yU(N).getDate())||(E={t:"d",v:hU(N)},r.cellDates||(E={t:"n",v:aU(E.v)}),E.z=r.dateNF||d$[14]):E={t:"n",v:gU(N)})),void 0===E.z&&null!=_&&(E.z=_);var D="",T=w.getElementsByTagName("A");if(T&&T.length)for(var k=0;k<T.length&&(!T[k].hasAttribute("href")||"#"==(D=T[k].getAttribute("href")).charAt(0));++k);D&&"#"!=D.charAt(0)&&(E.l={Target:D}),r.dense?(e[f+a]||(e[f+a]=[]),e[f+a][g+s]=E):e[OH({c:g+s,r:f+a})]=E,c.e.c<g+s&&(c.e.c=g+s),g+=y}}++f}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),c.e.r=Math.max(c.e.r,f-1+a),e["!ref"]=MH(c),f>=l&&(e["!fullref"]=MH((c.e.r=o.length-p+f-1+a,c))),e}function zZ(e,t){return UZ((t||{}).dense?[]:{},e,t)}function HZ(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}function VZ(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,(function(e,t){return Array(parseInt(t,10)+1).join(" ")})).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n");return[zU(t.replace(/<[^>]*>/g,""))]}var qZ={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function GZ(e,t){var n=t||{};var r,a,s,i,o,l,c=fz(e),d=[],u={name:""},m="",h=0,p={},f=[],v=n.dense?[]:{},g={value:""},x="",y=0,b=[],j=-1,w=-1,N={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,S={},E=[],C={},D=[],T=1,k=1,A=[],P={Names:[]},O={},R=["",""],M=[],I={},L="",F=0,B=!1,W=!1,$=0;for(vz.lastIndex=0,c=c.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");o=vz.exec(c);)switch(o[3]=o[3].replace(/_.*$/,"")){case"table":case"\u5de5\u4f5c\u8868":"/"===o[1]?(N.e.c>=N.s.c&&N.e.r>=N.s.r?v["!ref"]=MH(N):v["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=N.e.r&&(v["!fullref"]=v["!ref"],N.e.r=n.sheetRows-1,v["!ref"]=MH(N)),E.length&&(v["!merges"]=E),D.length&&(v["!rows"]=D),s.name=s["\u540d\u79f0"]||s.name,"undefined"!==typeof JSON&&JSON.stringify(s),f.push(s.name),p[s.name]=v,W=!1):"/"!==o[0].charAt(o[0].length-2)&&(s=BU(o[0],!1),j=w=-1,N.s.r=N.s.c=1e7,N.e.r=N.e.c=0,v=n.dense?[]:{},E=[],D=[],W=!0);break;case"table-row-group":"/"===o[1]?--_:++_;break;case"table-row":case"\u884c":if("/"===o[1]){j+=T,T=1;break}if((i=BU(o[0],!1))["\u884c\u53f7"]?j=i["\u884c\u53f7"]-1:-1==j&&(j=0),(T=+i["number-rows-repeated"]||1)<10)for($=0;$<T;++$)_>0&&(D[j+$]={level:_});w=-1;break;case"covered-table-cell":"/"!==o[1]&&++w,n.sheetStubs&&(n.dense?(v[j]||(v[j]=[]),v[j][w]={t:"z"}):v[OH({r:j,c:w})]={t:"z"}),x="",b=[];break;case"table-cell":case"\u6570\u636e":if("/"===o[0].charAt(o[0].length-2))++w,g=BU(o[0],!1),k=parseInt(g["number-columns-repeated"]||"1",10),l={t:"z",v:null},g.formula&&0!=n.cellFormula&&(l.f=PY(zU(g.formula))),"string"==(g["\u6570\u636e\u7c7b\u578b"]||g["value-type"])&&(l.t="s",l.v=zU(g["string-value"]||""),n.dense?(v[j]||(v[j]=[]),v[j][w]=l):v[OH({r:j,c:w})]=l),w+=k-1;else if("/"!==o[1]){x="",y=0,b=[],k=1;var U=T?j+T-1:j;if(++w>N.e.c&&(N.e.c=w),w<N.s.c&&(N.s.c=w),j<N.s.r&&(N.s.r=j),U>N.e.r&&(N.e.r=U),M=[],I={},l={t:(g=BU(o[0],!1))["\u6570\u636e\u7c7b\u578b"]||g["value-type"],v:null},n.cellFormula)if(g.formula&&(g.formula=zU(g.formula)),g["number-matrix-columns-spanned"]&&g["number-matrix-rows-spanned"]&&(C={s:{r:j,c:w},e:{r:j+(parseInt(g["number-matrix-rows-spanned"],10)||0)-1,c:w+(parseInt(g["number-matrix-columns-spanned"],10)||0)-1}},l.F=MH(C),A.push([C,l.F])),g.formula)l.f=PY(g.formula);else for($=0;$<A.length;++$)j>=A[$][0].s.r&&j<=A[$][0].e.r&&w>=A[$][0].s.c&&w<=A[$][0].e.c&&(l.F=A[$][1]);switch((g["number-columns-spanned"]||g["number-rows-spanned"])&&(C={s:{r:j,c:w},e:{r:j+(parseInt(g["number-rows-spanned"],10)||0)-1,c:w+(parseInt(g["number-columns-spanned"],10)||0)-1}},E.push(C)),g["number-columns-repeated"]&&(k=parseInt(g["number-columns-repeated"],10)),l.t){case"boolean":l.t="b",l.v=ZU(g["boolean-value"]);break;case"float":case"percentage":case"currency":l.t="n",l.v=parseFloat(g.value);break;case"date":l.t="d",l.v=hU(g["date-value"]),n.cellDates||(l.t="n",l.v=aU(l.v)),l.z="m/d/yy";break;case"time":l.t="n",l.v=cU(g["time-value"])/86400,n.cellDates&&(l.t="d",l.v=lU(l.v)),l.z="HH:MM:SS";break;case"number":l.t="n",l.v=parseFloat(g["\u6570\u636e\u6570\u503c"]);break;default:if("string"!==l.t&&"text"!==l.t&&l.t)throw new Error("Unsupported value type "+l.t);l.t="s",null!=g["string-value"]&&(x=zU(g["string-value"]),b=[])}}else{if(B=!1,"s"===l.t&&(l.v=x||"",b.length&&(l.R=b),B=0==y),O.Target&&(l.l=O),M.length>0&&(l.c=M,M=[]),x&&!1!==n.cellText&&(l.w=x),B&&(l.t="z",delete l.v),(!B||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=j))for(var z=0;z<T;++z){if(k=parseInt(g["number-columns-repeated"]||"1",10),n.dense)for(v[j+z]||(v[j+z]=[]),v[j+z][w]=0==z?l:fU(l);--k>0;)v[j+z][w+k]=fU(l);else for(v[OH({r:j+z,c:w})]=l;--k>0;)v[OH({r:j+z,c:w+k})]=fU(l);N.e.c<=w&&(N.e.c=w)}w+=(k=parseInt(g["number-columns-repeated"]||"1",10))-1,k=0,l={},x="",b=[]}O={};break;case"document":case"document-content":case"\u7535\u5b50\u8868\u683c\u6587\u6863":case"spreadsheet":case"\u4e3b\u4f53":case"scripts":case"styles":case"font-face-decls":case"master-styles":if("/"===o[1]){if((r=d.pop())[0]!==o[3])throw"Bad state: "+r}else"/"!==o[0].charAt(o[0].length-2)&&d.push([o[3],!0]);break;case"annotation":if("/"===o[1]){if((r=d.pop())[0]!==o[3])throw"Bad state: "+r;I.t=x,b.length&&(I.R=b),I.a=L,M.push(I)}else"/"!==o[0].charAt(o[0].length-2)&&d.push([o[3],!1]);L="",F=0,x="",y=0,b=[];break;case"creator":"/"===o[1]?L=c.slice(F,o.index):F=o.index+o[0].length;break;case"meta":case"\u5143\u6570\u636e":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if("/"===o[1]){if((r=d.pop())[0]!==o[3])throw"Bad state: "+r}else"/"!==o[0].charAt(o[0].length-2)&&d.push([o[3],!1]);x="",y=0,b=[];break;case"scientific-number":case"currency-symbol":case"currency-style":case"script":case"libraries":case"automatic-styles":case"default-style":case"page-layout":case"style":case"map":case"font-face":case"paragraph-properties":case"table-properties":case"table-column-properties":case"table-row-properties":case"table-cell-properties":case"fraction":case"boolean-style":case"boolean":case"text-style":case"text-content":case"text-properties":case"embedded-text":case"body":case"\u7535\u5b50\u8868\u683c":case"forms":case"table-column":case"table-header-rows":case"table-rows":case"table-column-group":case"table-header-columns":case"table-columns":case"null-date":case"graphic-properties":case"calculation-settings":case"named-expressions":case"label-range":case"label-ranges":case"named-expression":case"sort":case"sort-by":case"sort-groups":case"tab":case"line-break":case"span":case"s":case"date":case"object":case"title":case"\u6807\u9898":case"desc":case"binary-data":case"table-source":case"scenario":case"iteration":case"content-validations":case"content-validation":case"help-message":case"error-message":case"database-ranges":case"filter":case"filter-and":case"filter-or":case"filter-condition":case"list-level-style-bullet":case"list-level-style-number":case"list-level-properties":case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":case"event-listener":case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":case"config-item":case"page-number":case"page-count":case"time":case"cell-range-source":case"detective":case"operation":case"highlighted-range":case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":case"rect":case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":case"properties":case"property":case"table-protection":case"data-pilot-grand-total":case"office-document-common-attrs":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if("/"===o[1]){if(S[u.name]=m,(r=d.pop())[0]!==o[3])throw"Bad state: "+r}else"/"!==o[0].charAt(o[0].length-2)&&(m="",u=BU(o[0],!1),d.push([o[3],!0]));break;case"number":case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(d[d.length-1][0]){case"time-style":case"date-style":a=BU(o[0],!1),m+=qZ[o[3]]["long"===a.style?1:0]}break;case"text":if("/>"===o[0].slice(-2))break;if("/"===o[1])switch(d[d.length-1][0]){case"number-style":case"date-style":case"time-style":m+=c.slice(h,o.index)}else h=o.index+o[0].length;break;case"named-range":R=OY((a=BU(o[0],!1))["cell-range-address"]);var H={Name:a.name,Ref:R[0]+"!"+R[1]};W&&(H.Sheet=f.length),P.Names.push(H);break;case"p":case"\u6587\u672c\u4e32":if(["master-styles"].indexOf(d[d.length-1][0])>-1)break;if("/"!==o[1]||g&&g["string-value"])BU(o[0],!1),y=o.index+o[0].length;else{var V=VZ(c.slice(y,o.index));x=(x.length>0?x+"\n":"")+V[0]}break;case"database-range":if("/"===o[1])break;try{p[(R=OY(BU(o[0])["target-range-address"]))[0]]["!autofilter"]={ref:R[1]}}catch(H5){}break;case"a":if("/"!==o[1]){if(!(O=BU(o[0],!1)).href)break;O.Target=zU(O.href),delete O.href,"#"==O.Target.charAt(0)&&O.Target.indexOf(".")>-1?(R=OY(O.Target.slice(1)),O.Target="#"+R[0]+"!"+R[1]):O.Target.match(/^\.\.[\\\/]/)&&(O.Target=O.Target.slice(3))}break;default:switch(o[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"\u8868:":case"\u5b57:":break;default:if(n.WTF)throw new Error(o)}}var q={Sheets:p,SheetNames:f,Workbook:P};return n.bookSheets&&delete q.Sheets,q}function KZ(e,t){t=t||{},NU(e,"META-INF/manifest.xml")&&function(e,t){for(var n,r,a=fz(e);n=vz.exec(a);)switch(n[3]){case"manifest":break;case"file-entry":if("/"==(r=BU(n[0],!1)).path&&"application/vnd.oasis.opendocument.spreadsheet"!==r.type)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}(SU(e,"META-INF/manifest.xml"),t);var n=EU(e,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var r=GZ(nz(n),t);return NU(e,"meta.xml")&&(r.Props=LV(SU(e,"meta.xml"))),r}function YZ(e,t){return GZ(e,t)}var XZ=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+mz({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return OU+t}}(),ZZ=function(){var e="          <table:table-cell />\n",t=function(t,n,r){var a=[];a.push('      <table:table table:name="'+qU(n.SheetNames[r])+'" table:style-name="ta1">\n');var s=0,i=0,o=RH(t["!ref"]||"A1"),l=t["!merges"]||[],c=0,d=Array.isArray(t);if(t["!cols"])for(i=0;i<=o.e.c;++i)a.push("        <table:table-column"+(t["!cols"][i]?' table:style-name="co'+t["!cols"][i].ods+'"':"")+"></table:table-column>\n");var u="",m=t["!rows"]||[];for(s=0;s<o.s.r;++s)u=m[s]?' table:style-name="ro'+m[s].ods+'"':"",a.push("        <table:table-row"+u+"></table:table-row>\n");for(;s<=o.e.r;++s){for(u=m[s]?' table:style-name="ro'+m[s].ods+'"':"",a.push("        <table:table-row"+u+">\n"),i=0;i<o.s.c;++i)a.push(e);for(;i<=o.e.c;++i){var h=!1,p={},f="";for(c=0;c!=l.length;++c)if(!(l[c].s.c>i)&&!(l[c].s.r>s)&&!(l[c].e.c<i)&&!(l[c].e.r<s)){l[c].s.c==i&&l[c].s.r==s||(h=!0),p["table:number-columns-spanned"]=l[c].e.c-l[c].s.c+1,p["table:number-rows-spanned"]=l[c].e.r-l[c].s.r+1;break}if(h)a.push("          <table:covered-table-cell/>\n");else{var v=OH({r:s,c:i}),g=d?(t[s]||[])[i]:t[v];if(g&&g.f&&(p["table:formula"]=qU(("of:="+g.f.replace(zK,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")),g.F&&g.F.slice(0,v.length)==v)){var x=RH(g.F);p["table:number-matrix-columns-spanned"]=x.e.c-x.s.c+1,p["table:number-matrix-rows-spanned"]=x.e.r-x.s.r+1}if(g){switch(g.t){case"b":f=g.v?"TRUE":"FALSE",p["office:value-type"]="boolean",p["office:boolean-value"]=g.v?"true":"false";break;case"n":f=g.w||String(g.v||0),p["office:value-type"]="float",p["office:value"]=g.v||0;break;case"s":case"str":f=null==g.v?"":g.v,p["office:value-type"]="string";break;case"d":f=g.w||hU(g.v).toISOString(),p["office:value-type"]="date",p["office:date-value"]=hU(g.v).toISOString(),p["table:style-name"]="ce1";break;default:a.push(e);continue}var y=qU(f).replace(/  +/g,(function(e){return'<text:s text:c="'+e.length+'"/>'})).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>");if(g.l&&g.l.Target){var b=g.l.Target;"#"==(b="#"==b.charAt(0)?"#"+b.slice(1).replace(/\./,"!"):b).charAt(0)||b.match(/^\w+:/)||(b="../"+b),y=hz("text:a",y,{"xlink:href":b.replace(/&/g,"&amp;")})}a.push("          "+hz("table:table-cell",hz("text:p",y,{}),p)+"\n")}else a.push(e)}}a.push("        </table:table-row>\n")}return a.push("      </table:table>\n"),a.join("")};return function(e,n){var r=[OU],a=mz({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=mz({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==n.bookType?(r.push("<office:document"+a+s+">\n"),r.push(RV().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+a+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var a=t["!cols"][r];if(null==a.width&&null==a.wpx&&null==a.wch)continue;JG(a),a.ods=n;var s=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++n}}));var r=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var a=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+a+'"/>\n'),e.push("  </style:style>\n"),++r}})),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var i=0;i!=e.SheetNames.length;++i)r.push(t(e.Sheets[e.SheetNames[i]],e,i));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==n.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function JZ(e,t){if("fods"==t.bookType)return ZZ(e,t);var n=kU(),r="",a=[],s=[];return TU(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),TU(n,r="content.xml",ZZ(e,t)),a.push([r,"text/xml"]),s.push([r,"ContentFile"]),TU(n,r="styles.xml",XZ(e,t)),a.push([r,"text/xml"]),s.push([r,"StylesFile"]),TU(n,r="meta.xml",OU+RV()),a.push([r,"text/xml"]),s.push([r,"MetadataFile"]),TU(n,r="manifest.rdf",function(e){var t,n,r=[OU];r.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var a=0;a!=e.length;++a)r.push(OV(e[a][0],e[a][1])),r.push((t="",n=e[a][0],['  <rdf:Description rdf:about="'+t+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+n+'"/>\n',"  </rdf:Description>\n"].join("")));return r.push(OV("","Document","pkg")),r.push("</rdf:RDF>"),r.join("")}(s)),a.push([r,"application/rdf+xml"]),TU(n,r="META-INF/manifest.xml",function(e){var t=[OU];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(a)),n}function QZ(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function eJ(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):nz(XW(e))}function tJ(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):KW(rz(e))}function nJ(e){var t=e.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(e,r),r+=e.length})),n}function rJ(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>>24}function aJ(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function sJ(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function iJ(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function oJ(e){for(var t=[],n=[0];n[0]<e.length;){var r,a=n[0],s=aJ(e,n),i=7&s,o=0;if(0==(s=Math.floor(s/8)))break;switch(i){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:o=4,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=aJ(e,n),r=e.slice(n[0],n[0]+o),n[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var c={data:r,type:i};null==t[s]?t[s]=[c]:t[s].push(c)}return t}function lJ(e){var t=[];return e.forEach((function(e,n){e.forEach((function(e){e.data&&(t.push(sJ(8*n+e.type)),2==e.type&&t.push(sJ(e.data.length)),t.push(e.data))}))})),nJ(t)}function cJ(e,t){return(null==e?void 0:e.map((function(e){return t(e.data)})))||[]}function dJ(e){for(var t,n=[],r=[0];r[0]<e.length;){var a=aJ(e,r),s=oJ(e.slice(r[0],r[0]+a));r[0]+=a;var i={id:iJ(s[1][0].data),messages:[]};s[2].forEach((function(t){var n=oJ(t.data),a=iJ(n[3][0].data);i.messages.push({meta:n,data:e.slice(r[0],r[0]+a)}),r[0]+=a})),(null==(t=s[3])?void 0:t[0])&&(i.merge=iJ(s[3][0].data)>>>0>0),n.push(i)}return n}function uJ(e){var t=[];return e.forEach((function(e){var n=[];n[1]=[{data:sJ(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:sJ(+!!e.merge),type:0}]);var r=[];e.messages.forEach((function(e){r.push(e.data),e.meta[3]=[{type:0,data:sJ(e.data.length)}],n[2].push({data:lJ(e.meta),type:2})}));var a=lJ(n);t.push(sJ(a.length)),t.push(a),r.forEach((function(e){return t.push(e)}))})),nJ(t)}function mJ(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=aJ(t,n),a=[];n[0]<t.length;){var s=3&t[n[0]];if(0!=s){var i=0,o=0;if(1==s?(o=4+(t[n[0]]>>2&7),i=(224&t[n[0]++])<<3,i|=t[n[0]++]):(o=1+(t[n[0]++]>>2),2==s?(i=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(i=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),a=[nJ(a)],0==i)throw new Error("Invalid offset 0");if(i>a[0].length)throw new Error("Invalid offset beyond length");if(o>=i)for(a.push(a[0].slice(-i)),o-=i;o>=a[a.length-1].length;)a.push(a[a.length-1]),o-=a[a.length-1].length;a.push(a[0].slice(-i,-i+o))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}a.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var d=nJ(a);if(d.length!=r)throw new Error("Unexpected length: ".concat(d.length," != ").concat(r));return d}function hJ(e){for(var t=[],n=0;n<e.length;){var r=e[n++],a=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(mJ(r,e.slice(n,n+a))),n+=a}if(n!==e.length)throw new Error("data is not a valid framed stream!");return nJ(t)}function pJ(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),a=new Uint8Array(4);t.push(a);var s=sJ(r),i=s.length;t.push(s),r<=60?(i++,t.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),i+=r,a[0]=0,a[1]=255&i,a[2]=i>>8&255,a[3]=i>>16&255,n+=r}return nJ(t)}function fJ(e,t,n){var r,a=QZ(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);switch(1&s&&(c=function(e,t){for(var n=(127&e[t+15])<<7|e[t+14]>>1,r=1&e[t+14],a=t+13;a>=t;--a)r=256*r+e[a];return(128&e[t+15]?-r:r)*Math.pow(10,n-6176)}(e,i),i+=16),2&s&&(d=a.getFloat64(i,!0),i+=8),4&s&&(u.setTime(u.getTime()+1e3*a.getFloat64(i,!0)),i+=8),8&s&&(l=a.getUint32(i,!0),i+=4),16&s&&(o=a.getUint32(i,!0),i+=4),e[1]){case 0:break;case 2:case 10:r={t:"n",v:c};break;case 3:r={t:"s",v:t[l]};break;case 5:r={t:"d",v:u};break;case 6:r={t:"b",v:d>0};break;case 7:r={t:"n",v:d/86400};break;case 8:r={t:"e",v:0};break;case 9:if(!(o>-1))throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&s," : ").concat(e.slice(0,4)));r={t:"s",v:n[o]};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&s," : ").concat(e.slice(0,4)))}return r}function vJ(e,t){var n=new Uint8Array(32),r=QZ(n),a=12,s=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,a=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=255&a;e[t+15]|=n>=0?0:128}(n,a,e.v),s|=1,a+=16;break;case"b":n[1]=6,r.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,s,!0),n.slice(0,a)}function gJ(e,t){var n=new Uint8Array(32),r=QZ(n),a=12,s=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":n[2]=6,r.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,s,!0),n.slice(0,a)}function xJ(e,t,n){switch(e[0]){case 0:case 1:case 2:case 3:return function(e,t,n,r){var a,s=QZ(e),i=s.getUint32(4,!0),o=(r>1?12:8)+4*rJ(i&(r>1?3470:398)),l=-1,c=-1,d=NaN,u=new Date(2001,0,1);switch(512&i&&(l=s.getUint32(o,!0),o+=4),o+=4*rJ(i&(r>1?12288:4096)),16&i&&(c=s.getUint32(o,!0),o+=4),32&i&&(d=s.getFloat64(o,!0),o+=8),64&i&&(u.setTime(u.getTime()+1e3*s.getFloat64(o,!0)),o+=8),e[2]){case 0:break;case 2:a={t:"n",v:d};break;case 3:a={t:"s",v:t[c]};break;case 5:a={t:"d",v:u};break;case 6:a={t:"b",v:d>0};break;case 7:a={t:"n",v:d/86400};break;case 8:a={t:"e",v:0};break;case 9:if(l>-1)a={t:"s",v:n[l]};else if(c>-1)a={t:"s",v:t[c]};else{if(isNaN(d))throw new Error("Unsupported cell type ".concat(e.slice(0,4)));a={t:"n",v:d}}break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return a}(e,t,n,e[0]);case 5:return fJ(e,t,n);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function yJ(e){return aJ(oJ(e)[1][0].data)}function bJ(e,t){var n=oJ(t.data),r=iJ(n[1][0].data),a=n[3],s=[];return(a||[]).forEach((function(t){var n=oJ(t.data),a=iJ(n[1][0].data)>>>0;switch(r){case 1:s[a]=eJ(n[3][0].data);break;case 8:var i=oJ(e[yJ(n[9][0].data)][0].data),o=e[yJ(i[1][0].data)][0],l=iJ(o.meta[1][0].data);if(2001!=l)throw new Error("2000 unexpected reference to ".concat(l));var c=oJ(o.data);s[a]=c[3].map((function(e){return eJ(e.data)})).join("")}})),s}function jJ(e,t){var n,r=oJ(t.data),a=(null==(n=null==r?void 0:r[7])?void 0:n[0])?iJ(r[7][0].data)>>>0>0?1:0:-1,s=cJ(r[5],(function(e){return function(e,t){var n,r,a,s,i,o,l,c,d,u,m,h,p,f,v,g,x=oJ(e),y=iJ(x[1][0].data)>>>0,b=iJ(x[2][0].data)>>>0,j=(null==(r=null==(n=x[8])?void 0:n[0])?void 0:r.data)&&iJ(x[8][0].data)>0||!1;if((null==(s=null==(a=x[7])?void 0:a[0])?void 0:s.data)&&0!=t)v=null==(o=null==(i=x[7])?void 0:i[0])?void 0:o.data,g=null==(c=null==(l=x[6])?void 0:l[0])?void 0:c.data;else{if(!(null==(u=null==(d=x[4])?void 0:d[0])?void 0:u.data)||1==t)throw"NUMBERS Tile missing ".concat(t," cell storage");v=null==(h=null==(m=x[4])?void 0:m[0])?void 0:h.data,g=null==(f=null==(p=x[3])?void 0:p[0])?void 0:f.data}for(var w=j?4:1,N=QZ(v),_=[],S=0;S<v.length/2;++S){var E=N.getUint16(2*S,!0);E<65535&&_.push([S,E])}if(_.length!=b)throw"Expected ".concat(b," cells, found ").concat(_.length);var C=[];for(S=0;S<_.length-1;++S)C[_[S][0]]=g.subarray(_[S][1]*w,_[S+1][1]*w);return _.length>=1&&(C[_[_.length-1][0]]=g.subarray(_[_.length-1][1]*w)),{R:y,cells:C}}(e,a)}));return{nrows:iJ(r[4][0].data)>>>0,data:s.reduce((function(e,t){return e[t.R]||(e[t.R]=[]),t.cells.forEach((function(n,r){if(e[t.R][r])throw new Error("Duplicate cell r=".concat(t.R," c=").concat(r));e[t.R][r]=n})),e}),[])}}function wJ(e,t){var n={"!ref":"A1"},r=e[yJ(oJ(t.data)[2][0].data)],a=iJ(r[0].meta[1][0].data);if(6001!=a)throw new Error("6000 unexpected reference to ".concat(a));return function(e,t,n){var r,a=oJ(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(iJ(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(iJ(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));n["!ref"]=MH(s);var i=oJ(a[4][0].data),o=bJ(e,e[yJ(i[4][0].data)][0]),l=(null==(r=i[17])?void 0:r[0])?bJ(e,e[yJ(i[17][0].data)][0]):[],c=oJ(i[3][0].data),d=0;c[1].forEach((function(t){var r=oJ(t.data),a=e[yJ(r[2][0].data)][0],s=iJ(a.meta[1][0].data);if(6002!=s)throw new Error("6001 unexpected reference to ".concat(s));var i=jJ(0,a);i.data.forEach((function(e,t){e.forEach((function(e,r){var a=OH({r:d+t,c:r}),s=xJ(e,o,l);s&&(n[a]=s)}))})),d+=i.nrows}))}(e,r[0],n),n}function NJ(e,t){var n={SheetNames:[],Sheets:{}};if(cJ(oJ(t.data)[1],yJ).forEach((function(t){e[t].forEach((function(t){if(2==iJ(t.meta[1][0].data)){var r=function(e,t){var n,r=oJ(t.data),a={name:(null==(n=r[1])?void 0:n[0])?eJ(r[1][0].data):"",sheets:[]};return cJ(r[2],yJ).forEach((function(t){e[t].forEach((function(t){6e3==iJ(t.meta[1][0].data)&&a.sheets.push(wJ(e,t))}))})),a}(e,t);r.sheets.forEach((function(e,t){tQ(n,e,0==t?r.name:r.name+"_"+t,!0)}))}}))})),0==n.SheetNames.length)throw new Error("Empty NUMBERS file");return n}function _J(e){var t,n,r,a,s={},i=[];if(e.FullPaths.forEach((function(e){if(e.match(/\.iwpv2/))throw new Error("Unsupported password protection")})),e.FileIndex.forEach((function(e){if(e.name.match(/\.iwa$/)){var t,n;try{t=hJ(e.content)}catch(H5){return console.log("?? "+e.content.length+" "+(H5.message||H5))}try{n=dJ(t)}catch(H5){return console.log("## "+(H5.message||H5))}n.forEach((function(e){s[e.id]=e.messages,i.push(e.id)}))}})),!i.length)throw new Error("File has no messages");var o=(null==(a=null==(r=null==(n=null==(t=null==s?void 0:s[1])?void 0:t[0])?void 0:n.meta)?void 0:r[1])?void 0:a[0].data)&&1==iJ(s[1][0].meta[1][0].data)&&s[1][0];if(o||i.forEach((function(e){s[e].forEach((function(e){if(1==iJ(e.meta[1][0].data)>>>0){if(o)throw new Error("Document has multiple roots");o=e}}))})),!o)throw new Error("Cannot find Document root");return NJ(s,o)}function SJ(e,t,n){var r,a,s,i;if(!(null==(r=e[6])?void 0:r[0])||!(null==(a=e[7])?void 0:a[0]))throw"Mutation only works on post-BNC storages!";if((null==(i=null==(s=e[8])?void 0:s[0])?void 0:i.data)&&iJ(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var o=0,l=QZ(e[7][0].data),c=0,d=[],u=QZ(e[4][0].data),m=0,h=[],p=0;p<t.length;++p)if(null!=t[p]){var f,v;switch(l.setUint16(2*p,c,!0),u.setUint16(2*p,m,!0),typeof t[p]){case"string":f=vJ({t:"s",v:t[p]},n),v=gJ({t:"s",v:t[p]},n);break;case"number":f=vJ({t:"n",v:t[p]},n),v=gJ({t:"n",v:t[p]},n);break;case"boolean":f=vJ({t:"b",v:t[p]},n),v=gJ({t:"b",v:t[p]},n);break;default:throw new Error("Unsupported value "+t[p])}d.push(f),c+=f.length,h.push(v),m+=v.length,++o}else l.setUint16(2*p,65535,!0),u.setUint16(2*p,65535);for(e[2][0].data=sJ(o);p<e[7][0].data.length/2;++p)l.setUint16(2*p,65535,!0),u.setUint16(2*p,65535,!0);return e[6][0].data=nJ(d),e[3][0].data=nJ(h),o}function EJ(e){return function(t){for(var n=0;n!=e.length;++n){var r=e[n];void 0===t[r[0]]&&(t[r[0]]=r[1]),"n"===r[2]&&(t[r[0]]=Number(t[r[0]]))}}}function CJ(e){EJ([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function DJ(e){EJ([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function TJ(e,t,n,r,a,s,i,o,l,c,d,u){try{s[r]=kV(EU(e,n,!0),t);var m,h=SU(e,t);switch(o){case"sheet":m=BX(h,t,a,l,s[r],c,d,u);break;case"chart":if(!(m=WX(h,t,a,l,s[r],c))||!m["!drawel"])break;var p=PU(m["!drawel"].Target,t),f=TV(p),v=function(e,t){if(!e)return"??";var n=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][n].Target}(EU(e,p,!0),kV(EU(e,f,!0),p)),g=PU(v,p),x=TV(g);m=wX(EU(e,g,!0),0,0,kV(EU(e,x,!0),g),0,m);break;case"macro":b=t,s[r],b.slice(-4),m={"!type":"macro"};break;case"dialog":m=function(e,t){return t.slice(-4),{"!type":"dialog"}}(0,t,0,0,s[r]);break;default:throw new Error("Unrecognized sheet type "+o)}i[r]=m;var y=[];s&&s[r]&&Q$(s[r]).forEach((function(n){var a="";if(s[r][n].Type==DV.CMNT){a=PU(s[r][n].Target,t);var i=zX(SU(e,a,!0),a,l);if(!i||!i.length)return;IK(m,i,!1)}s[r][n].Type==DV.TCMNT&&(a=PU(s[r][n].Target,t),y=y.concat(function(e,t){var n=[],r=!1,a={},s=0;return e.replace(IU,(function(i,o){var l=BU(i);switch(WU(l[0])){case"<?xml":case"<ThreadedComments":case"</ThreadedComments>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<threadedComment":a={author:l.personId,guid:l.id,ref:l.ref,T:1};break;case"</threadedComment>":null!=a.t&&n.push(a);break;case"<text>":case"<text":s=o+i.length;break;case"</text>":a.t=e.slice(s,o).replace(/\r\n/g,"\n").replace(/\r/g,"\n");break;case"<mentions":case"<mentions>":case"<ext":r=!0;break;case"</mentions>":case"</ext>":r=!1;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i})),n}(SU(e,a,!0),l)))})),y&&y.length&&IK(m,y,!0,l.people||[])}catch(H5){if(l.WTF)throw H5}var b}function kJ(e){return"/"==e.charAt(0)?e.slice(1):e}function AJ(e,t){if(V$(),CJ(t=t||{}),NU(e,"META-INF/manifest.xml"))return KZ(e,t);if(NU(e,"objectdata.xml"))return KZ(e,t);if(NU(e,"Index/Document.iwa")){if("undefined"==typeof Uint8Array)throw new Error("NUMBERS file parsing requires Uint8Array support");if(e.FileIndex)return _J(e);var n=Y$.utils.cfb_new();return DU(e).forEach((function(t){TU(n,t,CU(e,t))})),_J(n)}if(!NU(e,"[Content_Types].xml")){if(NU(e,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(NU(e,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");throw new Error("Unsupported ZIP file")}var r,a,s=DU(e),i=function(e){var t={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};if(!e||!e.match)return t;var n={};if((e.match(IU)||[]).forEach((function(e){var r=BU(e);switch(r[0].replace(LU,"<")){case"<?xml":break;case"<Types":t.xmlns=r["xmlns"+(r[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[r.Extension]=r.ContentType;break;case"<Override":void 0!==t[SV[r.ContentType]]&&t[SV[r.ContentType]].push(r.PartName)}})),t.xmlns!==bz)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=n,delete t.calcchains,t}(EU(e,"[Content_Types].xml")),o=!1;if(0===i.workbooks.length&&SU(e,a="xl/workbook.xml",!0)&&i.workbooks.push(a),0===i.workbooks.length){if(!SU(e,a="xl/workbook.bin",!0))throw new Error("Could not find workbook");i.workbooks.push(a),o=!0}"bin"==i.workbooks[0].slice(-3)&&(o=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(RY=[],i.sst)try{RY=UX(SU(e,kJ(i.sst)),i.sst,t)}catch(H5){if(t.WTF)throw H5}t.cellStyles&&i.themes.length&&(l=function(e,t,n){return DK(e,n)}(EU(e,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],t)),i.style&&(c=$X(SU(e,kJ(i.style)),i.style,l,t))}i.links.map((function(n){try{kV(EU(e,TV(kJ(n))),n);return VX(SU(e,kJ(n)),0,n,t)}catch(H5){}}));var d=FX(SU(e,kJ(i.workbooks[0])),i.workbooks[0],t),u={},m="";i.coreprops.length&&((m=SU(e,kJ(i.coreprops[0]),!0))&&(u=LV(m)),0!==i.extprops.length&&(m=SU(e,kJ(i.extprops[0]),!0))&&function(e,t,n){var r={};t||(t={}),e=nz(e),WV.forEach((function(n){var a=(e.match(az(n[0]))||[])[1];switch(n[2]){case"string":a&&(t[n[1]]=zU(a));break;case"bool":t[n[1]]="true"===a;break;case"raw":var s=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));s&&s.length>0&&(r[n[1]]=s[1])}})),r.HeadingPairs&&r.TitlesOfParts&&UV(r.HeadingPairs,r.TitlesOfParts,t,n)}(m,u,t));var h={};t.bookSheets&&!t.bookProps||0!==i.custprops.length&&(m=EU(e,kJ(i.custprops[0]),!0))&&(h=function(e,t){var n={},r="",a=e.match(HV);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=BU(i);switch(o[0]){case"<?xml":case"<Properties":break;case"<property":r=zU(o.name);break;case"</property>":r=null;break;default:if(0===i.indexOf("<vt:")){var l=i.split(">"),c=l[0].slice(4),d=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":case"cy":case"error":n[r]=zU(d);break;case"bool":n[r]=ZU(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(d,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(d);break;case"filetime":case"date":n[r]=hU(d);break;default:if("/"==c.slice(-1))break;t.WTF&&"undefined"!==typeof console&&console.warn("Unexpected",i,c,l)}}else if("</"===i.slice(0,2));else if(t.WTF)throw new Error(i)}}return n}(m,t));var p={};if((t.bookSheets||t.bookProps)&&(d.Sheets?r=d.Sheets.map((function(e){return e.name})):u.Worksheets&&u.SheetNames.length>0&&(r=u.SheetNames),t.bookProps&&(p.Props=u,p.Custprops=h),t.bookSheets&&"undefined"!==typeof r&&(p.SheetNames=r),t.bookSheets?p.SheetNames:t.bookProps))return p;r={};var f={};t.bookDeps&&i.calcchain&&(f=HX(SU(e,kJ(i.calcchain)),i.calcchain));var v,g,x=0,y={},b=d.Sheets;u.Worksheets=b.length,u.SheetNames=[];for(var j=0;j!=b.length;++j)u.SheetNames[j]=b[j].name;var w=o?"bin":"xml",N=i.workbooks[0].lastIndexOf("/"),_=(i.workbooks[0].slice(0,N+1)+"_rels/"+i.workbooks[0].slice(N+1)+".rels").replace(/^\//,"");NU(e,_)||(_="xl/_rels/workbook."+w+".rels");var S=kV(EU(e,_,!0),_.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(t.xlmeta=qX(SU(e,kJ(i.metadata[0])),i.metadata[0],t)),(i.people||[]).length>=1&&(t.people=function(e,t){var n=[],r=!1;return e.replace(IU,(function(e){var a=BU(e);switch(WU(a[0])){case"<?xml":case"<personList":case"</personList>":case"</person>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<person":n.push({name:a.displayname,id:a.id});break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return e})),n}(SU(e,kJ(i.people[0])),t)),S&&(S=function(e,t){if(!e)return 0;try{e=t.map((function(t){return t.id||(t.id=t.strRelID),[t.name,e["!id"][t.id].Target,(n=e["!id"][t.id].Type,DV.WS.indexOf(n)>-1?"sheet":DV.CS&&n==DV.CS?"chart":DV.DS&&n==DV.DS?"dialog":DV.MS&&n==DV.MS?"macro":n&&n.length?n:"sheet")];var n}))}catch(H5){return null}return e&&0!==e.length?e:null}(S,d.Sheets));var E=SU(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(x=0;x!=u.Worksheets;++x){var C="sheet";if(S&&S[x]?(v="xl/"+S[x][1].replace(/[\/]?xl\//,""),NU(e,v)||(v=S[x][1]),NU(e,v)||(v=_.replace(/_rels\/.*$/,"")+S[x][1]),C=S[x][2]):v=(v="xl/worksheets/sheet"+(x+1-E)+"."+w).replace(/sheet0\./,"sheet."),g=v.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&null!=t.sheets)switch(typeof t.sheets){case"number":if(x!=t.sheets)continue e;break;case"string":if(u.SheetNames[x].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var D=!1,T=0;T!=t.sheets.length;++T)"number"==typeof t.sheets[T]&&t.sheets[T]==x&&(D=1),"string"==typeof t.sheets[T]&&t.sheets[T].toLowerCase()==u.SheetNames[x].toLowerCase()&&(D=1);if(!D)continue e}}TJ(e,v,g,u.SheetNames[x],x,y,r,C,t,d,l,c)}return p={Directory:i,Workbook:d,Props:u,Custprops:h,Deps:f,Sheets:r,SheetNames:u.SheetNames,Strings:RY,Styles:c,Themes:l,SSF:fU(d$)},t&&t.bookFiles&&(e.files?(p.keys=s,p.files=e.files):(p.keys=[],p.files={},e.FullPaths.forEach((function(t,n){t=t.replace(/^Root Entry[\/]/,""),p.keys.push(t),p.files[t]=e.FileIndex[n]})))),t&&t.bookVBA&&(i.vba.length>0?p.vbaraw=SU(e,kJ(i.vba[0]),!0):i.defaults&&"application/vnd.ms-office.vbaProject"===i.defaults.bin&&(p.vbaraw=SU(e,"xl/vbaProject.bin",!0))),p}function PJ(e,t){var n=t||{},r="Workbook",a=Y$.find(e,r);try{if(r="/!DataSpaces/Version",!(a=Y$.find(e,r))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(function(e){var t={};t.id=e.read_shift(0,"lpp4"),t.R=AG(e,4),t.U=AG(e,4),t.W=AG(e,4)}(a.content),r="/!DataSpaces/DataSpaceMap",!(a=Y$.find(e,r))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);var s=function(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(PG(e));return t}(a.content);if(1!==s.length||1!==s[0].comps.length||0!==s[0].comps[0].t||"StrongEncryptionDataSpace"!==s[0].name||"EncryptedPackage"!==s[0].comps[0].v)throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",!(a=Y$.find(e,r))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);var i=function(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(e.read_shift(0,"lpp4"));return t}(a.content);if(1!=i.length||"StrongEncryptionTransform"!=i[0])throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",!(a=Y$.find(e,r))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);OG(a.content)}catch(H5){}if(r="/EncryptionInfo",!(a=Y$.find(e,r))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=function(e){var t=AG(e);switch(t.Minor){case 2:return[t.Minor,IG(e)];case 3:return[t.Minor,LG()];case 4:return[t.Minor,FG(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}(a.content);if(r="/EncryptedPackage",!(a=Y$.find(e,r))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(4==o[0]&&"undefined"!==typeof decrypt_agile)return decrypt_agile(o[1],a.content,n.password||"",n);if(2==o[0]&&"undefined"!==typeof decrypt_std76)return decrypt_std76(o[1],a.content,n.password||"",n);throw new Error("File is password-protected")}function OJ(e,t){return"ods"==t.bookType?JZ(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=RH(n["!ref"]);r.s.r=r.s.c=0;var a=!1;r.e.c>9&&(a=!0,r.e.c=9),r.e.r>49&&(a=!0,r.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(MH(r)));var s=GJ(n,{range:r,header:1}),i=["~Sh33tJ5~"];s.forEach((function(e){return e.forEach((function(e){"string"==typeof e&&i.push(e)}))}));var o={},l=[],c=Y$.read(t.numbers,{type:"base64"});c.FileIndex.map((function(e,t){return[e,c.FullPaths[t]]})).forEach((function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&dJ(hJ(t.content)).forEach((function(e){l.push(e.id),o[e.id]={deps:[],location:n,type:iJ(e.messages[0].meta[1][0].data)}}))})),l.sort((function(e,t){return e-t}));var d=l.filter((function(e){return e>1})).map((function(e){return[e,sJ(e)]}));c.FileIndex.map((function(e,t){return[e,c.FullPaths[t]]})).forEach((function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&dJ(hJ(t.content)).forEach((function(e){e.messages.forEach((function(t){d.forEach((function(t){e.messages.some((function(e){return 11006!=iJ(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])}))&&o[t[0]].deps.push(e.id)}))}))}))}));for(var u,m=Y$.find(c,o[1].location),h=dJ(hJ(m.content)),p=0;p<h.length;++p){var f=h[p];1==f.id&&(u=f)}var v=yJ(oJ(u.messages[0].data)[1][0].data);for(h=dJ(hJ((m=Y$.find(c,o[v].location)).content)),p=0;p<h.length;++p)(f=h[p]).id==v&&(u=f);for(v=yJ(oJ(u.messages[0].data)[2][0].data),h=dJ(hJ((m=Y$.find(c,o[v].location)).content)),p=0;p<h.length;++p)(f=h[p]).id==v&&(u=f);for(v=yJ(oJ(u.messages[0].data)[2][0].data),h=dJ(hJ((m=Y$.find(c,o[v].location)).content)),p=0;p<h.length;++p)(f=h[p]).id==v&&(u=f);var g=oJ(u.messages[0].data);g[6][0].data=sJ(r.e.r+1),g[7][0].data=sJ(r.e.c+1);for(var x=yJ(g[46][0].data),y=Y$.find(c,o[x].location),b=dJ(hJ(y.content)),j=0;j<b.length&&b[j].id!=x;++j);if(b[j].id!=x)throw"Bad ColumnRowUIDMapArchive";var w=oJ(b[j].messages[0].data);w[1]=[],w[2]=[],w[3]=[];for(var N=0;N<=r.e.c;++N){var _=[];_[1]=_[2]=[{type:0,data:sJ(N+420690)}],w[1].push({type:2,data:lJ(_)}),w[2].push({type:0,data:sJ(N)}),w[3].push({type:0,data:sJ(N)})}w[4]=[],w[5]=[],w[6]=[];for(var S=0;S<=r.e.r;++S)(_=[])[1]=_[2]=[{type:0,data:sJ(S+726270)}],w[4].push({type:2,data:lJ(_)}),w[5].push({type:0,data:sJ(S)}),w[6].push({type:0,data:sJ(S)});b[j].messages[0].data=lJ(w),y.content=pJ(uJ(b)),y.size=y.content.length,delete g[46];var E=oJ(g[4][0].data);E[7][0].data=sJ(r.e.r+1);var C=yJ(oJ(E[1][0].data)[2][0].data);if((b=dJ(hJ((y=Y$.find(c,o[C].location)).content)))[0].id!=C)throw"Bad HeaderStorageBucket";var D=oJ(b[0].messages[0].data);for(S=0;S<s.length;++S){var T=oJ(D[2][0].data);T[1][0].data=sJ(S),T[4][0].data=sJ(s[S].length),D[2][S]={type:D[2][0].type,data:lJ(T)}}b[0].messages[0].data=lJ(D),y.content=pJ(uJ(b)),y.size=y.content.length;var k=yJ(E[2][0].data);if((b=dJ(hJ((y=Y$.find(c,o[k].location)).content)))[0].id!=k)throw"Bad HeaderStorageBucket";for(D=oJ(b[0].messages[0].data),N=0;N<=r.e.c;++N)(T=oJ(D[2][0].data))[1][0].data=sJ(N),T[4][0].data=sJ(r.e.r+1),D[2][N]={type:D[2][0].type,data:lJ(T)};b[0].messages[0].data=lJ(D),y.content=pJ(uJ(b)),y.size=y.content.length;var A=yJ(E[4][0].data);!function(){for(var e,t=Y$.find(c,o[A].location),n=dJ(hJ(t.content)),r=0;r<n.length;++r){var a=n[r];a.id==A&&(e=a)}var s=oJ(e.messages[0].data);s[3]=[];var l=[];i.forEach((function(e,t){l[1]=[{type:0,data:sJ(t)}],l[2]=[{type:0,data:sJ(1)}],l[3]=[{type:2,data:tJ(e)}],s[3].push({type:2,data:lJ(l)})})),e.messages[0].data=lJ(s);var d=pJ(uJ(n));t.content=d,t.size=t.content.length}();var P=oJ(E[3][0].data),O=P[1][0];delete P[2];var R=oJ(O.data),M=yJ(R[2][0].data);!function(){for(var e,t=Y$.find(c,o[M].location),n=dJ(hJ(t.content)),a=0;a<n.length;++a){var l=n[a];l.id==M&&(e=l)}var d=oJ(e.messages[0].data);delete d[6],delete P[7];var u=new Uint8Array(d[5][0].data);d[5]=[];for(var m=0,h=0;h<=r.e.r;++h){var p=oJ(u);m+=SJ(p,s[h],i),p[1][0].data=sJ(h),d[5].push({data:lJ(p),type:2})}d[1]=[{type:0,data:sJ(r.e.c+1)}],d[2]=[{type:0,data:sJ(r.e.r+1)}],d[3]=[{type:0,data:sJ(m)}],d[4]=[{type:0,data:sJ(r.e.r+1)}],e.messages[0].data=lJ(d);var f=pJ(uJ(n));t.content=f,t.size=t.content.length}(),O.data=lJ(R),E[3][0].data=lJ(P),g[4][0].data=lJ(E),u.messages[0].data=lJ(g);var I=pJ(uJ(h));return m.content=I,m.size=m.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){RK=1024,e&&!e.SSF&&(e.SSF=fU(d$));e&&e.SSF&&(V$(),H$(e.SSF),t.revssf=nU(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,IY?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=$K.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};DJ(t=t||{});var s=kU(),i="",o=0;t.cellXfs=[],WY(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(TU(s,i="docProps/core.xml",BV(e.Props,t)),a.coreprops.push(i),PV(t.rels,2,i,DV.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,TU(s,i,zV(e.Props)),a.extprops.push(i),PV(t.rels,3,i,DV.EXT_PROPS),e.Custprops!==e.Props&&Q$(e.Custprops||{}).length>0&&(TU(s,i="docProps/custom.xml",VV(e.Custprops)),a.custprops.push(i),PV(t.rels,4,i,DV.CUST_PROPS));for(o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},u=e.Sheets[e.SheetNames[o-1]];(u||{})["!type"];if(TU(s,i="xl/worksheets/sheet"+o+"."+n,GX(o-1,i,t,e,d)),a.sheets.push(i),PV(t.wbrels,-1,"worksheets/sheet"+o+"."+n,DV.WS[0]),u){var m=u["!comments"],h=!1,p="";m&&m.length>0&&(TU(s,p="xl/comments"+o+"."+n,KX(m,p,t)),a.comments.push(p),PV(d,-1,"../comments"+o+"."+n,DV.CMNT),h=!0),u["!legacy"]&&h&&TU(s,"xl/drawings/vmlDrawing"+o+".vml",MK(o,u["!comments"])),delete u["!comments"],delete u["!legacy"]}d["!id"].rId1&&TU(s,TV(i),AV(d))}null!=t.Strings&&t.Strings.length>0&&(TU(s,i="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?TG:CG)(e,n)}(t.Strings,i,t)),a.strs.push(i),PV(t.wbrels,-1,"sharedStrings."+n,DV.SST));TU(s,i="xl/workbook."+n,function(e,t,n){return(".bin"===t.slice(-4)?LX:RX)(e,n)}(e,i,t)),a.workbooks.push(i),PV(t.rels,1,i,DV.WB),TU(s,i="xl/theme/theme1.xml",TK(e.Themes,t)),a.themes.push(i),PV(t.wbrels,-1,"theme/theme1.xml",DV.THEME),TU(s,i="xl/styles."+n,function(e,t,n){return(".bin"===t.slice(-4)?yK:iK)(e,n)}(e,i,t)),a.styles.push(i),PV(t.wbrels,-1,"styles."+n,DV.STY),e.vbaraw&&r&&(TU(s,i="xl/vbaProject.bin",e.vbaraw),a.vba.push(i),PV(t.wbrels,-1,"vbaProject.bin",DV.VBA));return TU(s,i="xl/metadata."+n,function(e){return(".bin"===e.slice(-4)?PK:OK)()}(i)),a.metadata.push(i),PV(t.wbrels,-1,"metadata."+n,DV.XLMETA),TU(s,"[Content_Types].xml",CV(a,t)),TU(s,"_rels/.rels",AV(t.rels)),TU(s,"xl/_rels/workbook."+n+".rels",AV(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):RJ(e,t)}function RJ(e,t){RK=1024,e&&!e.SSF&&(e.SSF=fU(d$)),e&&e.SSF&&(V$(),H$(e.SSF),t.revssf=nU(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,IY?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=$K.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};DJ(t=t||{});var s=kU(),i="",o=0;if(t.cellXfs=[],WY(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),TU(s,i="docProps/core.xml",BV(e.Props,t)),a.coreprops.push(i),PV(t.rels,2,i,DV.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,TU(s,i,zV(e.Props)),a.extprops.push(i),PV(t.rels,3,i,DV.EXT_PROPS),e.Custprops!==e.Props&&Q$(e.Custprops||{}).length>0&&(TU(s,i="docProps/custom.xml",VV(e.Custprops)),a.custprops.push(i),PV(t.rels,4,i,DV.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},m=e.Sheets[e.SheetNames[o-1]];(m||{})["!type"];if(TU(s,i="xl/worksheets/sheet"+o+"."+n,iX(o-1,t,e,u)),a.sheets.push(i),PV(t.wbrels,-1,"worksheets/sheet"+o+"."+n,DV.WS[0]),m){var h=m["!comments"],p=!1,f="";if(h&&h.length>0){var v=!1;h.forEach((function(e){e[1].forEach((function(e){1==e.T&&(v=!0)}))})),v&&(TU(s,f="xl/threadedComments/threadedComment"+o+"."+n,FK(h,d,t)),a.threadedcomments.push(f),PV(u,-1,"../threadedComments/threadedComment"+o+"."+n,DV.TCMNT)),TU(s,f="xl/comments"+o+"."+n,LK(h)),a.comments.push(f),PV(u,-1,"../comments"+o+"."+n,DV.CMNT),p=!0}m["!legacy"]&&p&&TU(s,"xl/drawings/vmlDrawing"+o+".vml",MK(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}u["!id"].rId1&&TU(s,TV(i),AV(u))}return null!=t.Strings&&t.Strings.length>0&&(TU(s,i="xl/sharedStrings."+n,CG(t.Strings,t)),a.strs.push(i),PV(t.wbrels,-1,"sharedStrings."+n,DV.SST)),TU(s,i="xl/workbook."+n,RX(e)),a.workbooks.push(i),PV(t.rels,1,i,DV.WB),TU(s,i="xl/theme/theme1.xml",TK(e.Themes,t)),a.themes.push(i),PV(t.wbrels,-1,"theme/theme1.xml",DV.THEME),TU(s,i="xl/styles."+n,iK(e,t)),a.styles.push(i),PV(t.wbrels,-1,"styles."+n,DV.STY),e.vbaraw&&r&&(TU(s,i="xl/vbaProject.bin",e.vbaraw),a.vba.push(i),PV(t.wbrels,-1,"vbaProject.bin",DV.VBA)),TU(s,i="xl/metadata."+n,OK()),a.metadata.push(i),PV(t.wbrels,-1,"metadata."+n,DV.XLMETA),d.length>1&&(TU(s,i="xl/persons/person.xml",function(e){var t=[OU,hz("personList",null,{xmlns:wz,"xmlns:x":kz[0]}).replace(/[\/]>/,">")];return e.forEach((function(e,n){t.push(hz("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))})),t.push("</personList>"),t.join("")}(d)),a.people.push(i),PV(t.wbrels,-1,"persons/person.xml",DV.PEOPLE)),TU(s,"[Content_Types].xml",CV(a,t)),TU(s,"_rels/.rels",AV(t.rels)),TU(s,"xl/_rels/workbook.xml.rels",AV(t.wbrels)),delete t.revssf,delete t.ssf,s}function MJ(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=zW(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function IJ(e,t){var n=0;e:for(;n<e.length;)switch(e.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return iZ(e.slice(n),t);default:break e}return fG.to_workbook(e,t)}function LJ(e,t,n,r){return r?(n.type="string",fG.to_workbook(e,n)):fG.to_workbook(t,n)}function FJ(e,t){RW();var n=t||{};if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer)return FJ(new Uint8Array(e),((n=fU(n)).type="array",n));"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&!n.type&&(n.type="undefined"!==typeof Deno?"buffer":"array");var r,a=e,s=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),MY={},n.dateNF&&(MY.dateNF=n.dateNF),n.type||(n.type=HW&&Buffer.isBuffer(e)?"buffer":"base64"),"file"==n.type&&(n.type=HW?"buffer":"binary",a=function(e){if("undefined"!==typeof X$)return X$.readFileSync(e);if("undefined"!==typeof Deno)return Deno.readFileSync(e);if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var t=File(e);t.open("r"),t.encoding="binary";var n=t.read();return t.close(),n}catch(H5){if(!H5.message||!H5.message.match(/onstruct/))throw H5}throw new Error("Cannot access file "+e)}(e),"undefined"===typeof Uint8Array||HW||(n.type="array")),"string"==n.type&&(s=!0,n.type="binary",n.codepage=65001,a=function(e){return e.match(/[^\x00-\x7F]/)?rz(e):e}(e)),"array"==n.type&&"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&"undefined"!==typeof ArrayBuffer){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return(n=fU(n)).type="array",FJ(ZW(a),n)}switch((r=MJ(a,n))[0]){case 208:if(207===r[1]&&17===r[2]&&224===r[3]&&161===r[4]&&177===r[5]&&26===r[6]&&225===r[7])return function(e,t){return Y$.find(e,"EncryptedPackage")?PJ(e,t):wZ(e,t)}(Y$.read(a,n),n);break;case 9:if(r[1]<=8)return wZ(a,n);break;case 60:return iZ(a,n);case 73:if(73===r[1]&&42===r[2]&&0===r[3])throw new Error("TIFF Image File is not a spreadsheet");if(68===r[1])return function(e,t){var n=t||{},r=!!n.WTF;n.WTF=!0;try{var a=mG.to_workbook(e,n);return n.WTF=r,a}catch(H5){if(n.WTF=r,!H5.message.match(/SYLK bad record ID/)&&r)throw H5;return fG.to_workbook(e,t)}}(a,n);break;case 84:if(65===r[1]&&66===r[2]&&76===r[3])return hG.to_workbook(a,n);break;case 80:return 75===r[1]&&r[2]<9&&r[3]<9?function(e,t){var n=e,r=t||{};return r.type||(r.type=HW&&Buffer.isBuffer(e)?"buffer":"base64"),AJ(AU(n,r),r)}(a,n):LJ(e,a,n,s);case 239:return 60===r[3]?iZ(a,n):LJ(e,a,n,s);case 255:if(254===r[1])return function(e,t){var n=e;return"base64"==t.type&&(n=zW(n)),n=LW.utils.decode(1200,n.slice(2),"str"),t.type="binary",IJ(n,t)}(a,n);if(0===r[1]&&2===r[2]&&0===r[3])return vG.to_workbook(a,n);break;case 0:if(0===r[1]){if(r[2]>=2&&0===r[3])return vG.to_workbook(a,n);if(0===r[2]&&(8===r[3]||9===r[3]))return vG.to_workbook(a,n)}break;case 3:case 131:case 139:case 140:return uG.to_workbook(a,n);case 123:if(92===r[1]&&114===r[2]&&116===r[3])return zG.to_workbook(a,n);break;case 10:case 13:case 32:return function(e,t){var n="",r=MJ(e,t);switch(t.type){case"base64":n=zW(e);break;case"binary":n=e;break;case"buffer":n=e.toString("binary");break;case"array":n=pU(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]&&(n=nz(n)),t.type="binary",IJ(n,t)}(a,n);case 137:if(80===r[1]&&78===r[2]&&71===r[3])throw new Error("PNG Image File is not a spreadsheet")}return dG.indexOf(r[0])>-1&&r[2]<=12&&r[3]<=31?uG.to_workbook(a,n):LJ(e,a,n,s)}function BJ(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return J$(t.file,Y$.write(e,{type:HW?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Y$.write(e,t)}function WJ(e,t){var n={},r=HW?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Y$.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!==typeof Deno&&"string"==typeof a){if("binary"==t.type||"base64"==t.type)return a;a=new Uint8Array(YW(a))}return t.password&&"undefined"!==typeof encrypt_agile?BJ(encrypt_agile(a,t.password),t):"file"===t.type?J$(t.file,a):"string"==t.type?nz(a):a}function $J(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return UW(rz(r));case"binary":return rz(r);case"string":return e;case"file":return J$(t.file,r,"utf8");case"buffer":return HW?VW(r,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(r):$J(r,{type:"binary"}).split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}function UJ(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?UW(n):"string"==t.type?nz(n):n;case"file":return J$(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function zJ(e,t){RW(),PX(e);var n=fU(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=zJ(e,n);return n.type="array",YW(r)}var a=0;if(n.sheet&&(a="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return $J(mZ(e,n),n);case"slk":case"sylk":return $J(mG.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"htm":case"html":return $J($Z(e.Sheets[e.SheetNames[a]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return UW(e);case"binary":case"string":return e;case"file":return J$(t.file,e,"binary");case"buffer":return HW?VW(e,"binary"):e.split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}(ZJ(e.Sheets[e.SheetNames[a]],n),n);case"csv":return $J(XJ(e.Sheets[e.SheetNames[a]],n),n,"\ufeff");case"dif":return $J(hG.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"dbf":return UJ(uG.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"prn":return $J(fG.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"rtf":return $J(zG.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"eth":return $J(pG.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"fods":return $J(JZ(e,n),n);case"wk1":return UJ(vG.sheet_to_wk1(e.Sheets[e.SheetNames[a]],n),n);case"wk3":return UJ(vG.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),UJ(MZ(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return BJ(NZ(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var n=fU(t||{});return WJ(OJ(e,n),n)}(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function HJ(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function VJ(e,t,n){var r=n||{};return r.type="file",r.file=t,HJ(r),zJ(e,r)}function qJ(e,t,n,r,a,s,i,o){var l=TH(n),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),u=!0,m=1===a?[]:{};if(1!==a)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:n,enumerable:!1})}catch(H5){m.__rowNum__=n}else m.__rowNum__=n;if(!i||e[n])for(var h=t.s.c;h<=t.e.c;++h){var p=i?e[n][h]:e[r[h]+l];if(void 0!==p&&void 0!==p.t){var f=p.v;switch(p.t){case"z":if(null==f)break;continue;case"e":f=0==f?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=s[h]){if(null==f)if("e"==p.t&&null===f)m[s[h]]=null;else if(void 0!==c)m[s[h]]=c;else{if(!d||null!==f)continue;m[s[h]]=null}else m[s[h]]=d&&("n"!==p.t||"n"===p.t&&!1!==o.rawNumbers)?f:FH(p,f,o);null!=f&&(u=!1)}}else{if(void 0===c)continue;null!=s[h]&&(m[s[h]]=c)}}return{row:m,isempty:u}}function GJ(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=null!=c.range?c.range:e["!ref"];switch(1===c.header?r=1:"A"===c.header?r=2:Array.isArray(c.header)?r=3:null==c.header&&(r=0),typeof d){case"string":l=IH(d);break;case"number":(l=IH(e["!ref"])).s.r=d;break;default:l=d}r>0&&(a=0);var u=TH(l.s.r),m=[],h=[],p=0,f=0,v=Array.isArray(e),g=l.s.r,x=0,y={};v&&!e[g]&&(e[g]=[]);var b=c.skipHidden&&e["!cols"]||[],j=c.skipHidden&&e["!rows"]||[];for(x=l.s.c;x<=l.e.c;++x)if(!(b[x]||{}).hidden)switch(m[x]=AH(x),n=v?e[g][x]:e[m[x]+u],r){case 1:s[x]=x-l.s.c;break;case 2:s[x]=m[x];break;case 3:s[x]=c.header[x-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),o=i=FH(n,null,c),f=y[i]||0){do{o=i+"_"+f++}while(y[o]);y[i]=f,y[o]=1}else y[i]=1;s[x]=o}for(g=l.s.r+a;g<=l.e.r;++g)if(!(j[g]||{}).hidden){var w=qJ(e,l,g,m,r,s,v,c);(!1===w.isempty||(1===r?!1!==c.blankrows:c.blankrows))&&(h[p++]=w.row)}return h.length=p,h}var KJ=/"/g;function YJ(e,t,n,r,a,s,i,o){for(var l=!0,c=[],d="",u=TH(n),m=t.s.c;m<=t.e.c;++m)if(r[m]){var h=o.dense?(e[n]||[])[m]:e[r[m]+u];if(null==h)d="";else if(null!=h.v){l=!1,d=""+(o.rawNumbers&&"n"==h.t?h.v:FH(h,null,o));for(var p=0,f=0;p!==d.length;++p)if((f=d.charCodeAt(p))===a||f===s||34===f||o.forceQuotes){d='"'+d.replace(KJ,'""')+'"';break}"ID"==d&&(d='"ID"')}else null==h.f||h.F?d="":(l=!1,(d="="+h.f).indexOf(",")>=0&&(d='"'+d.replace(KJ,'""')+'"'));c.push(d)}return!1===o.blankrows&&l?null:c.join(i)}function XJ(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var a=IH(e["!ref"]),s=void 0!==r.FS?r.FS:",",i=s.charCodeAt(0),o=void 0!==r.RS?r.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==s?"\\|":s)+"+$"),d="",u=[];r.dense=Array.isArray(e);for(var m=r.skipHidden&&e["!cols"]||[],h=r.skipHidden&&e["!rows"]||[],p=a.s.c;p<=a.e.c;++p)(m[p]||{}).hidden||(u[p]=AH(p));for(var f=0,v=a.s.r;v<=a.e.r;++v)(h[v]||{}).hidden||null!=(d=YJ(e,a,v,u,i,l,s,r))&&(r.strip&&(d=d.replace(c,"")),(d||!1!==r.blankrows)&&n.push((f++?o:"")+d));return delete r.dense,n.join("")}function ZJ(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=XJ(e,t);if("undefined"==typeof LW||"string"==t.type)return n;var r=LW.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function JJ(e,t,n){var r,a=n||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&null!=a.origin)if("number"==typeof a.origin)o=a.origin;else{var c="string"==typeof a.origin?PH(a.origin):a.origin;o=c.r,l=c.c}var d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var u=IH(i["!ref"]);d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),-1==o&&(o=u.e.r+1,d.e.r=o+t.length-1+s)}else-1==o&&(o=0,d.e.r=t.length-1+s);var m=a.header||[],h=0;t.forEach((function(e,t){Q$(e).forEach((function(n){-1==(h=m.indexOf(n))&&(m[h=m.length]=n);var c=e[n],d="z",u="",p=OH({c:l+h,r:o+t+s});r=QJ(i,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?d="n":"boolean"==typeof c?d="b":"string"==typeof c?d="s":c instanceof Date?(d="d",a.cellDates||(d="n",c=aU(c)),u=a.dateNF||d$[14]):null===c&&a.nullError&&(d="e",c=0),r?(r.t=d,r.v=c,delete r.w,delete r.R,u&&(r.z=u)):i[p]=r={t:d,v:c},u&&(r.z=u)):i[p]=c}))})),d.e.c=Math.max(d.e.c,l+m.length-1);var p=TH(o);if(s)for(h=0;h<m.length;++h)i[AH(h+l)+p]={t:"s",v:m[h]};return i["!ref"]=MH(d),i}function QJ(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=PH(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return QJ(e,OH("number"!=typeof t?t:{r:t,c:n||0}))}function eQ(){return{SheetNames:[],Sheets:{}}}function tQ(e,t,n,r){var a=1;if(!n)for(;a<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+a);++a,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||n;for(++a;a<=65535&&-1!=e.SheetNames.indexOf(n=i+a);++a);}if(AX(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function nQ(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var rQ={encode_col:AH,encode_row:TH,encode_cell:OH,encode_range:MH,decode_col:kH,decode_row:DH,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:PH,decode_range:RH,format_cell:FH,sheet_add_aoa:WH,sheet_add_json:JJ,sheet_add_dom:UZ,aoa_to_sheet:$H,json_to_sheet:function(e,t){return JJ(null,e,t)},table_to_sheet:zZ,table_to_book:function(e,t){return BH(zZ(e,t),t)},sheet_to_csv:XJ,sheet_to_txt:ZJ,sheet_to_json:GJ,sheet_to_html:$Z,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var a,s=IH(e["!ref"]),i="",o=[],l=[],c=Array.isArray(e);for(a=s.s.c;a<=s.e.c;++a)o[a]=AH(a);for(var d=s.s.r;d<=s.e.r;++d)for(i=TH(d),a=s.s.c;a<=s.e.c;++a)if(n=o[a]+i,r="",void 0!==(t=c?(e[d]||[])[a]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:GJ,sheet_get_cell:QJ,book_new:eQ,book_append_sheet:tQ,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:nQ,cell_set_internal_link:function(e,t,n){return nQ(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var a="string"!=typeof t?t:IH(t),s="string"==typeof t?t:MH(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=QJ(e,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};CW.version;const aQ=()=>{const e=(0,j.wA)(),{services:n,servicesStatus:r,deleteServiceStatus:s}=(0,j.d4)((e=>e.services)),{toast:i}=(0,H.dj)(),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)("All"),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(!1),[f,v]=(0,t.useState)(null),[g,x]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null),N=Zc("(max-width: 640px)"),[E,C]=(0,t.useState)(!1),[D,T]=(0,t.useState)(!1),P=(0,a.Zp)(),[O,R]=(0,t.useState)(!1),M=t.useRef();(0,t.useEffect)((()=>{"idle"===r&&e(lt())}),[r,e]);const I=e=>{d(e)},L=["All",...new Set(n.map((e=>e.category)))],F=n.filter((e=>e.name.toLowerCase().includes(o.toLowerCase()))).filter((e=>"All"===c||e.category===c)),B=()=>{const e=F.map((e=>({Name:e.name,Category:e.category,Rate:e.rate}))),t=rQ.json_to_sheet(e),n=rQ.book_new();rQ.book_append_sheet(n,t,"Services"),VJ(n,"services_list.xlsx")},W=()=>{M.current.click()},$=async t=>{const n=t.target.files[0];if(n){R(!0);try{const t=FJ(await n.arrayBuffer(),{type:"array"}),r=t.SheetNames[0],a=t.Sheets[r],s=rQ.sheet_to_json(a).map((e=>({name:e.Name,category:e.Category,rate:e.Rate})));await e(ut(s)).unwrap(),i({title:"Import successful",description:`${s.length} services imported.`,variant:"success"}),e(lt())}catch(r){i({title:"Import failed",description:r.message||"Could not import services.",variant:"destructive"})}finally{R(!1),t.target.value=""}}};return(0,X.jsxs)(k.Zp,{className:"w-full mx-auto border-0 shadow-none",children:[(0,X.jsx)(k.aR,{children:(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{onClick:()=>{P(-1)},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsxs)("div",{children:[(0,X.jsx)(k.ZB,{className:"font-semibold",children:"Services"}),(0,X.jsx)(k.BT,{children:"Manage and view service information"})]})]}),N&&(0,X.jsxs)("div",{className:"flex space-x-2",children:[(0,X.jsx)(w.$,{size:"icon",onClick:()=>m(!0),children:(0,X.jsx)(S.A,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{size:"icon",variant:"outline",onClick:()=>T(!0),children:(0,X.jsx)(pi.A,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{size:"icon",variant:"outline",onClick:B,children:(0,X.jsx)(bW,{className:"h-4 w-4"})}),(0,X.jsxs)(w.$,{size:"icon",variant:"outline",onClick:W,disabled:O,children:[(0,X.jsx)("span",{className:"sr-only",children:"Import"}),(0,X.jsx)("input",{type:"file",accept:".xlsx, .xls",ref:M,onChange:$,style:{display:"none"}}),(0,X.jsx)(bW,{className:"h-4 w-4 rotate-180"})]})]})]})}),(0,X.jsxs)(k.Wu,{className:"px-4",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:justify-between md:items-center md:space-y-0 md:space-x-2 mb-4",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:space-x-2 md:space-y-0",children:[(0,X.jsxs)("div",{className:"flex w-full space-x-2",children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search services...",value:o,onChange:e=>{l(e.target.value)},className:"pl-8 w-full"})]}),N&&(0,X.jsx)(w.$,{variant:"outline",className:"shrink-0",onClick:()=>C(!E),children:(0,X.jsx)(Yc,{className:"h-4 w-4"})})]}),N?(0,X.jsx)(fd,{children:E&&(0,X.jsx)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden w-full",children:(0,X.jsx)("div",{className:"pt-2 space-y-2",children:(0,X.jsxs)(A.l6,{onValueChange:e=>I(e),defaultValue:"All",children:[(0,X.jsx)(A.bq,{className:"w-full",children:(0,X.jsx)(A.yv,{placeholder:"Select category"})}),(0,X.jsx)(A.gC,{children:L.map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})})})}):(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full md:w-auto",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All"===c?"Select category":c]})}),(0,X.jsx)(Ws,{children:L.map((e=>(0,X.jsx)($s,{onClick:()=>I(e),children:e},e)))})]})]}),!N&&(0,X.jsxs)("div",{className:"flex-row-reverse space-x-2",children:[(0,X.jsxs)(w.$,{variant:"outline",onClick:B,className:"w-full md:w-auto",children:[(0,X.jsx)(bW,{className:"mr-2 h-4 w-4"})," Export"]}),(0,X.jsx)(w.$,{variant:"outline",onClick:W,className:"w-full md:w-auto",disabled:O,children:"Import"}),(0,X.jsx)("input",{type:"file",accept:".xlsx, .xls",ref:M,onChange:$,style:{display:"none"}}),(0,X.jsxs)(w.$,{variant:"outline",onClick:()=>m(!0),className:"w-full md:w-auto",children:[(0,X.jsx)(S.A,{className:"mr-2 h-4 w-4"})," Add Service"]}),(0,X.jsxs)(w.$,{variant:"outline",onClick:()=>T(!0),className:"w-full md:w-auto",children:[(0,X.jsx)(pi.A,{className:"mr-2 h-4 w-4"})," Manage"]})]})]}),0===F.length?(0,X.jsxs)("div",{className:"text-center py-12",children:[(0,X.jsx)("p",{className:"mt-4 text-lg font-medium text-muted-foreground",children:"No services found"}),(0,X.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Try adjusting your search or filter to find what you're looking for."})]}):(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Name"}),(0,X.jsx)(Wo.nd,{className:"hidden md:table-cell",children:"Category"}),(0,X.jsx)(Wo.nd,{children:"Rate (\u20b9)"}),(0,X.jsx)(Wo.nd,{children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:F.map((e=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"capitalize font-bold",children:e.name}),(0,X.jsx)(Wo.nA,{className:"hidden md:table-cell",children:e.category}),(0,X.jsx)(Wo.nA,{children:e.rate?`${e.rate.toLocaleString("en-IN")}`:""}),(0,X.jsxs)(Wo.nA,{className:"flex",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{v(e),p(!0)})(e),children:(0,X.jsx)(Py,{className:"h-3 w-3"})}),(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{b(e),x(!0)})(e),children:(0,X.jsx)(ky,{className:"h-3 w-3"})})]})]},e._id)))})]})})]}),(0,X.jsx)(wW,{isOpen:u,onClose:()=>m(!1)}),(0,X.jsx)(SW,{isOpen:h,onClose:()=>p(!1),service:f}),(0,X.jsx)(EW,{isOpen:D,onClose:()=>T(!1),services:n}),(0,X.jsx)(Ce,{open:g,onOpenChange:x,children:(0,X.jsxs)(Ae,{className:"max-w-[90vw] w-full sm:max-w-[425px] rounded-lg",children:[(0,X.jsxs)(Pe,{children:[(0,X.jsxs)(Re,{className:"text-lg sm:text-xl",children:["Delete ",null===y||void 0===y?void 0:y.name,"?"]}),(0,X.jsx)(Me,{className:"text-sm sm:text-base",children:"This action cannot be undone. This will permanently delete the service."})]}),(0,X.jsxs)(Oe,{className:"flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[(0,X.jsx)(Le,{className:"w-full sm:w-auto",onClick:()=>x(!1),children:"Cancel"}),(0,X.jsx)(Ie,{className:"w-full sm:w-auto",onClick:()=>{e(dt(y._id)).unwrap().then((()=>{i({title:"Service deleted successfully",description:"The service has been removed.",variant:"success"})})).catch((e=>{i({title:"Failed to delete service",description:e.message||"There was an error deleting the service. Please try again.",variant:"destructive"})})).finally((()=>{x(!1),b(null)}))},disabled:"loading"===s,children:"loading"===s?"Deleting...":"Delete"})]})]})})]})},sQ=(0,N.A)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),iQ=(0,N.A)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),oQ=e=>{var n,r,s;let{initialBillId:i,initialBillDatas:o,patientData:l,isEmbedded:c=!1}=e;const d=(0,j.wA)(),u=(0,a.Zp)(),{billId:m}=(0,a.g)(),h=(0,a.zy)(),{toast:p}=(0,H.dj)(),f=(0,j.d4)((e=>e.hospitalSettings.settings)),{settings:v}=(0,j.d4)((e=>e.hospitalSettings)),[g,x]=(0,t.useState)(null),[y,b]=(0,t.useState)([]),[N,_]=(0,t.useState)(!1),[E,D]=(0,t.useState)(null),T=E,{services:A,servicesStatus:P}=(0,j.d4)((e=>e.services)),O=(0,j.d4)((e=>e.bills.createBillStatus)),R=(0,j.d4)((e=>e.bills.updateBillStatus)),[I,L]=(0,t.useState)([]),[F,B]=(0,t.useState)({serviceName:"",quantity:"",rate:"",total:"",category:""}),[W,$]=(0,t.useState)(""),[U,z]=(0,t.useState)(""),[V,q]=(0,t.useState)("amount"),[G,K]=(0,t.useState)(!1),[Y,Z]=(0,t.useState)(!1),[J,Q]=(0,t.useState)(!1),[ee,te]=(0,t.useState)([]),[ne,re]=(0,t.useState)((()=>!1!==(null===f||void 0===f?void 0:f.defaultBreakBillMode))),[ae,se]=(0,t.useState)(""),[ie,oe]=(0,t.useState)(!1),[le,ce]=(0,t.useState)(!1),[de,ue]=(0,t.useState)(!1),[me,he]=(0,t.useState)(null),[pe,fe]=(0,t.useState)(o),[ve,ge]=(0,t.useState)(pe||{}),[xe,ye]=(0,t.useState)(null),be=i||m;(0,t.useEffect)((()=>{re(!1!==(null===f||void 0===f?void 0:f.defaultBreakBillMode))}),[f]),(0,t.useEffect)((()=>{if(pe&&l){var e,t;K(!0);const n=pe.services.flatMap(((e,t)=>e.services.map(((n,r)=>({id:`${t}-${r}`,service:n.name,category:n.category,type:n.type,quantity:n.quantity,date:n.date,rate:n.rate,_id:n._id,total:n.rate*n.quantity,isExisting:!0,billId:e._id})))));L(n),te(n.map((e=>e.id)));const r=null===pe||void 0===pe||null===(e=pe.services)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.additionalDiscount;z(r.toString()),D({_id:l._id,name:l.name,contactNumber:l.contactNumber,registrationNumber:l.registrationNumber,age:l.age,gender:l.gender,address:l.address,bloodGroup:l.bloodGroup,type:l.type,admissionDate:l.admissionDate||null,dischargeDate:l.dischargeDate||null,bookingDate:l.bookingDate||null,ipdNumber:l.ipdNumber||null})}else be&&d(yt(be)).unwrap().then((e=>{var t,n,r,a,s,i,o,l,c,d,u,m,p,f,v,g,x,y,j,w,N;K(!0),b([]);const _=null===(t=h.state)||void 0===t?void 0:t.lastServiceId;let S=e.services;if(_){const e=S.findIndex((e=>e._id===_));-1!==e&&(S=S.slice(0,e+1))}const E={services:[{_id:e._id,services:S.map((e=>({name:e.name,category:e.category,quantity:e.quantity,_id:e._id,type:e.type,date:e.date,rate:e.rate}))),createdAt:e.createdAt,totalAmount:e.totalAmount,additionalDiscount:e.additionalDiscount,subtotal:e.subtotal,amountPaid:e.amountPaid,payments:e.payments,invoiceNumber:e.invoiceNumber}],visit:null===e||void 0===e?void 0:e.visit,admission:null===e||void 0===e?void 0:e.admission,operationName:e.operationName,procedureName:e.procedureName,createdBy:e.createdBy},C=S.map(((e,t)=>({id:t+1,service:e.name,_id:e._id,date:e.date,type:e.type,category:e.category,quantity:e.quantity,rate:e.rate,total:e.rate*e.quantity,isExisting:!0})));L(C),te(C.map((e=>e.id))),z(e.additionalDiscount||""),D({_id:(null===(n=e.patient)||void 0===n?void 0:n._id)||(null===(r=e.patientInfo)||void 0===r?void 0:r._id),name:(null===(a=e.patientInfo)||void 0===a?void 0:a.name)||(null===(s=e.patient)||void 0===s?void 0:s.name),contactNumber:(null===(i=e.patientInfo)||void 0===i?void 0:i.phone)||(null===(o=e.patient)||void 0===o?void 0:o.phone),registrationNumber:(null===(l=e.patient)||void 0===l?void 0:l.registrationNumber)||(null===(c=e.patientInfo)||void 0===c?void 0:c.registrationNumber),age:(null===(d=e.patient)||void 0===d?void 0:d.age)||(null===(u=e.patientInfo)||void 0===u?void 0:u.age),gender:(null===(m=e.patient)||void 0===m?void 0:m.gender)||(null===(p=e.patientInfo)||void 0===p?void 0:p.gender),address:(null===(f=e.patient)||void 0===f?void 0:f.address)||(null===(v=e.patientInfo)||void 0===v?void 0:v.address),bloodGroup:(null===(g=e.patient)||void 0===g?void 0:g.bloodGroup)||(null===(x=e.patientInfo)||void 0===x?void 0:x.bloodGroup),ipdNumber:(null===(y=e.patientInfo)||void 0===y?void 0:y.ipdNumber)||(null===(j=e.patient)||void 0===j?void 0:j.ipdNumber),type:e.patientType||(null===(w=e.patientInfo)||void 0===w?void 0:w.type),bookingDate:(null===(N=e.patient)||void 0===N?void 0:N.bookingDate)||e.createdAt||null}),ge(E)})).catch((e=>{p({title:"Error fetching bill",description:"Could not load the bill details. Please try again.",variant:"destructive"}),c||u("/billings")}))}),[]);const je=(0,t.useMemo)((()=>{var e,t,n,r,a,s;const i=(null===ve||void 0===ve?void 0:ve.subtotal)||(null===ve||void 0===ve||null===(e=ve.services)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.subtotal)||0,o=(null===ve||void 0===ve||null===(n=ve.services)||void 0===n||null===(r=n[0])||void 0===r||r.services,(ne?I.filter((e=>"breakup"===e.type)):I.filter((e=>"breakup"!==e.type))).reduce(((e,t)=>e+t.total),0));Math.max(0,i-o);if(ne){var l,c;const e=parseFloat(ae||0);let t=0;return""!==U&&(t="amount"===V?parseFloat(U):parseFloat(U)/100*e),t=Math.min(t,e),{subtotal:i,additionalDiscount:t.toFixed(2),totalAmount:i-t,currentServicesSubtotal:o,totalAmountPaid:(null===ve||void 0===ve?void 0:ve.amountPaid)||(null===ve||void 0===ve||null===(l=ve.services)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.amountPaid)||0}}const d=o;let u=0;return""!==U&&(u="amount"===V?parseFloat(U):parseFloat(U)/100*d),u=Math.min(u,d),{subtotal:d,additionalDiscount:u.toFixed(2),totalAmount:d-u,currentServicesSubtotal:o,totalAmountPaid:(null===ve||void 0===ve?void 0:ve.amountPaid)||(null===ve||void 0===ve||null===(a=ve.services)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.amountPaid)||0}}),[I,U,V,ve,ne,ae,xe]);(0,t.useEffect)((()=>{je.totalAmount&&se(je.totalAmount)}),[je]),(0,t.useEffect)((()=>{"idle"===P&&d(lt())}),[d,P]),(0,t.useEffect)((()=>{"succeeded"===O?(p({variant:"success",title:"Bill created successfully",description:"The bill has been successfully created."}),"OPD"===(null===T||void 0===T?void 0:T.type)&&(ge({patient:T,bill:{_id:Date.now().toString(),services:I.map((e=>({name:e.service,quantity:e.quantity,rate:e.rate}))),createdAt:new Date,subtotal:je.subtotal,additionalDiscount:je.additionalDiscount,totalAmount:je.totalAmount,amountPaid:je.totalAmount},payment:{paymentMethod:"Cash"}}),Z(!0)),d(_t()),u("/billings")):"failed"===O&&(p({title:"Error creating bill",description:"There was an error creating the bill. Please try again.",variant:"destructive"}),d(_t()))}),[O,d,p,u,T,I,je]),(0,t.useEffect)((()=>{"succeeded"===R?(p({variant:"success",title:"Bill updated succesuhusfully",description:"The bill has been successfully updated."}),d(_t()),_(!0),Ce()):"failed"===R&&(p({title:"Error updating bill",description:"There was an error updating the bill. Please try again.",variant:"destructive"}),d(_t()))}),[R,d,p]);const we=e=>{const{name:t,value:n}=e.target;B((e=>{const r={...e,[t]:n};if(r.quantity&&r.rate){const e=parseInt(r.quantity),t=parseFloat(r.rate);r.total=e*t}return r}))};(0,t.useEffect)((()=>{W&&B((e=>({...e,serviceName:W})))}),[W]);const Ne=e=>{const t=e.target.checked;if(y.length>0)return he(t),void ue(!0);_e(t)},_e=e=>{re(e);const t=I.filter((t=>t.isExisting&&(e?"breakup"===t.type:"breakup"!==t.type)||"Room Rent"===t.category));b([]),te(t.map((e=>e.id)))},Se=e=>{const t=I.find((t=>t.id===e));L((t=>t.filter((t=>t.id!==e)))),t.isExisting||b((t=>t.filter((t=>t.id!==e)))),te((t=>t.filter((t=>t!==e))))},Ee=e=>{const t=I.find((t=>t.id===e));t&&(t.isExisting&&re(!1),B({serviceName:t.service,quantity:t.quantity.toString(),rate:t.rate.toString(),total:t.total.toString(),category:t.category}),$(t.service),L((t=>t.filter((t=>t.id!==e)))),t.isExisting||b((t=>t.filter((t=>t.id!==e)))),te((t=>t.filter((t=>t!==e)))))},Ce=()=>{var e;const t=I.filter((e=>ee.includes(e.id)&&(!ne||"additional"!==e.type&&(e.type||"Room Rent"===e.category)))),n=t.reduce(((e,t)=>e+t.total),0);let r=parseFloat(U)||0;"percentage"===V&&(r=r/100*n);const a=(null===ve||void 0===ve||null===(e=ve.services)||void 0===e?void 0:e[0])||{};if("OPD"===(null===T||void 0===T?void 0:T.type)){const e={patient:{name:null===T||void 0===T?void 0:T.name,age:null===T||void 0===T?void 0:T.age,gender:null===T||void 0===T?void 0:T.gender,contactNumber:null===T||void 0===T?void 0:T.contactNumber,registrationNumber:null===T||void 0===T?void 0:T.registrationNumber,address:null===T||void 0===T?void 0:T.address},bill:{_id:a._id||Date.now().toString(),services:t.map((e=>({name:e.service,quantity:e.quantity,rate:e.rate,total:e.total}))),createdAt:a.createdAt||new Date,subtotal:je.subtotal,additionalDiscount:r,totalAmount:je.totalAmount,amountPaid:je.totalAmountPaid,payments:a.payments||[],invoiceNumber:a.invoiceNumber||null},admissionRecord:null===ve||void 0===ve?void 0:ve.visit,payment:a.payments||[]};x(e),null!==T&&void 0!==T&&T.name?Z(!0):Z(!1)}else{const e={_id:a._id||Date.now().toString(),createdAt:a.createdAt||new Date,admissionDate:null===T||void 0===T?void 0:T.admissionDate,dischargeDate:null===T||void 0===T?void 0:T.dischargeDate,patientInfo:{name:null===T||void 0===T?void 0:T.name,age:null===T||void 0===T?void 0:T.age,gender:null===T||void 0===T?void 0:T.gender,address:null===T||void 0===T?void 0:T.address,contactNumber:null===T||void 0===T?void 0:T.contactNumber,registrationNumber:null===T||void 0===T?void 0:T.registrationNumber,ipdNumber:null===T||void 0===T?void 0:T.ipdNumber},services:t.map((e=>({name:e.service,quantity:e.quantity,rate:e.rate,date:e.date}))),totalAmount:je.totalAmount,invoiceNumber:a.invoiceNumber||null,subtotal:je.subtotal,additionalDiscount:r,amountPaid:je.totalAmountPaid,payments:a.payments||ve.payments||[],operationName:null===ve||void 0===ve?void 0:ve.operationName,createdBy:null===ve||void 0===ve?void 0:ve.createdBy};x(e),null!==T&&void 0!==T&&T.name?Q(!0):Q(!1)}},De="loading"===O||"loading"===R,Te=e=>{e.target.checked?te(I.map((e=>e.id))):te([])},ke=e=>{te((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},Ae=(0,t.useMemo)((()=>{if(!ne||!ae)return 0;const e=I.filter((e=>"breakup"===e.type||"Room Rent"===e.category)).reduce(((e,t)=>e+t.total),0);return parseFloat(ae)-e}),[ne,ae,I]),Pe=()=>(0,X.jsxs)("div",{className:"flex items-center justify-between mb-4 p-2 bg-gray-50 rounded-lg  h-5",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)("input",{type:"checkbox",id:"breakTotalMode",checked:ne,onChange:Ne,className:"h-4 w-4 rounded border-gray-300"}),(0,X.jsxs)("label",{htmlFor:"breakTotalMode",className:"text-sm font-medium",children:["Break Total Mode"," ",(0,X.jsxs)("span",{className:"text-xs text-gray-500",children:["(To be only used when"," ",(0,X.jsx)("span",{className:"font-bold text-black",children:"net total"})," has to be divided)"]})]})]}),ne&&(0,X.jsxs)("div",{className:"flex items-center space-x-2 ",children:[(0,X.jsx)("label",{htmlFor:"targetTotal",className:"text-sm font-medium",children:"Target Total:"}),(0,X.jsx)(Vn.p,{id:"targetTotal",value:ae,onChange:e=>se(e.target.value),className:"w-32 h-6",placeholder:"Enter total"}),ae&&(0,X.jsxs)("div",{className:"text-sm",children:["Remaining:"," ",(0,X.jsxs)("span",{className:Ae<0?"text-red-500 font-bold":"text-green-500 font-bold",children:["\u20b9",Ae.toFixed(2)]})]})]})]}),[Oe,Re]=(0,t.useState)(v.defaultBillPrintView||"list");(0,t.useEffect)((()=>{v&&Re(v.defaultBillPrintView||"list")}),[v]);const Me=(0,t.useMemo)((()=>I.filter((e=>(ne?"breakup"===e.type:"breakup"!==e.type)||"Room Rent"===e.category))),[I,ne]),Ie=(0,t.useMemo)((()=>{if(ne||"datewise"!==Oe)return null;const e=Me.reduce(((e,t)=>{const n=t.date?(0,Go.GP)(new Date(t.date),"yyyy-MM-dd"):"No Date";return e[n]||(e[n]=[]),e[n].push(t),e}),{});return Object.entries(e).sort(((e,t)=>{let[n]=e,[r]=t;return new Date(n)-new Date(r)})).map((e=>{let[t,n]=e;return{date:t,services:n.sort(((e,t)=>new Date(e.date)-new Date(t.date)))}}))}),[Me,ne,Oe]),[Le,Fe]=(0,t.useState)(!1),[We,$e]=(0,t.useState)(""),[Ue,ze]=(0,t.useState)(!1),[He,Ve]=(0,t.useState)([]),qe=async e=>{if(!Ye)return;const t=Ye.map((e=>{const t=A.find((t=>t._id===e.id));return{service:null===t||void 0===t?void 0:t.name,category:null===t||void 0===t?void 0:t.category,quantity:1,rate:e.rate,total:e.rate,type:"additional"}}));try{var n,r,a;const s=await d((0,Be.Cn)({admissionId:(null===ve||void 0===ve||null===(n=ve.admission)||void 0===n?void 0:n._id)||(null===ve||void 0===ve||null===(r=ve.services)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.admission),operationName:t.map((e=>e.service)).join(", "),billId:be||pe.services[0]._id,includeInBill:e,serviceDetails:e?t:null})).unwrap();if(ge(s),e){const e=t.map((e=>({id:Date.now()+Math.random(),service:e.service,category:e.category,quantity:e.quantity,rate:e.rate,total:e.total,isExisting:!0,date:(new Date).toISOString(),type:e.type})));L((t=>[...t,...e])),b((t=>[...t,...e])),te((t=>[...t,...e.map((e=>e.id))])),Xe(null),Ve([])}p({title:"Success",description:"Operation name updated successfully",variant:"success"})}catch(s){p({title:"Error",description:"Failed to update operation name",variant:"destructive"})}finally{Ke(!1),Xe(null)}},[Ge,Ke]=(0,t.useState)(!1),[Ye,Xe]=(0,t.useState)(null);return(0,X.jsxs)("div",{className:"w-full  max-h-[calc(100vh-2rem)] overflow-hidden flex flex-col",children:[c?null:(0,X.jsx)("div",{className:"flex items-center justify-between",children:(0,X.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>u(-1),children:[(0,X.jsx)(Uo.A,{className:"mr-2"}),(0,X.jsx)("h3",{className:" font-bold",children:G?"Edit Bill":"Add Bill"})]})}),(0,X.jsx)(k.Zp,{children:(0,X.jsx)(k.Wu,{className:"p-2",children:(0,X.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center mb-2 md:mb-0",children:[(0,X.jsxs)(Co,{className:"h-10 w-10 mr-3",children:[(0,X.jsx)(Do,{src:`https://api.dicebear.com/6.x/initials/svg?seed=${null===T||void 0===T?void 0:T.name}`,alt:null===T||void 0===T?void 0:T.name}),(0,X.jsx)(To,{children:null===T||void 0===T||null===(n=T.name)||void 0===n?void 0:n.charAt(0)})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h2",{className:"font-semibold",children:null===T||void 0===T?void 0:T.name}),(0,X.jsxs)("div",{className:"flex flex-wrap gap-1 mt-0.5",children:[(0,X.jsx)(Yo.E,{variant:"outline",children:null===T||void 0===T?void 0:T.gender}),(0,X.jsx)(Yo.E,{variant:"outline",children:(0,M.F1)(null===T||void 0===T?void 0:T.age,{yearLabel:"Years",monthLabel:"Months",dayLabel:"Days"})}),(null===T||void 0===T?void 0:T.bloodGroup)&&(0,X.jsx)(Yo.E,{variant:"outline",children:T.bloodGroup}),(null===T||void 0===T?void 0:T.registrationNumber)&&(0,X.jsxs)(Yo.E,{variant:"outline",children:["UHID No: ",T.registrationNumber]}),(null===T||void 0===T?void 0:T.ipdNumber)&&(0,X.jsxs)(Yo.E,{variant:"outline",children:["IPD No: ",T.ipdNumber]}),"IPD"===(null===T||void 0===T?void 0:T.type)&&(0,X.jsx)(Yo.E,{variant:"bluish",className:"cursor-pointer ",onClick:()=>ze(!0),children:(0,X.jsxs)("span",{className:"flex items-center gap-1 text-xs",children:["Operation:"," ",(null===ve||void 0===ve?void 0:ve.operationName)||"Select Operation",(0,X.jsx)(Py,{className:"ml-1 h-3 w-3"})]})})]})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1 text-sm",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(lx,{className:"w-4 h-4 text-gray-400"}),(0,X.jsx)("span",{children:null===T||void 0===T?void 0:T.contactNumber})]}),(null===T||void 0===T?void 0:T.admissionDate)&&(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(iQ,{className:"w-4 h-4 text-gray-400"}),(0,X.jsxs)("span",{children:["Admit Date:"," ",(0,Go.GP)(new Date(T.admissionDate),"dd/MM/yyyy")]})]}),(null===T||void 0===T?void 0:T.dischargeDate)&&(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(iQ,{className:"w-4 h-4 text-gray-400"}),(0,X.jsxs)("span",{children:["Discharge:"," ",(0,Go.GP)(new Date(T.dischargeDate),"dd/MM/yyyy")]})]}),(null===T||void 0===T?void 0:T.address)&&(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(cx,{className:"w-4 h-4 text-gray-400"}),(0,X.jsx)("span",{children:T.address})]})]})]})})}),(0,X.jsx)(k.Zp,{children:(0,X.jsxs)(k.Wu,{className:"p-3",children:[(0,X.jsx)(Pe,{}),(0,X.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=parseFloat(F.total),n=parseFloat(F.quantity);if(ne){if(I.filter((e=>"breakup"===e.type||"Room Rent"===e.category)).reduce(((e,t)=>e+t.total),0)+t>parseFloat(ae||0))return void p({title:"Exceeds Target Total",description:"This service would exceed the target total amount.",variant:"destructive"})}const r={id:Date.now(),service:F.serviceName,category:F.category||"Not specified",quantity:n,rate:t/n,total:t,isExisting:!1,date:(new Date).toISOString(),type:ne?"breakup":"additional"};L((e=>[...e,r])),b((e=>[...e,r])),te((e=>[...e,r.id])),B({serviceName:"",quantity:"",rate:"",total:"",category:""}),$("")},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 items-end mb-2",children:[(0,X.jsxs)("div",{className:"col-span-full sm:col-span-1 md:col-span-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"serviceName",children:"Service Name"}),(0,X.jsx)(Gs.P,{suggestions:ne?A.filter((e=>"Sub Category"===e.category)):A,placeholder:"Enter service name",value:W,setValue:$,onSuggestionSelect:e=>{B((t=>({...t,serviceName:e.name,rate:e.rate,total:e.rate,category:e.category,quantity:1})))}})]}),(0,X.jsx)("div",{className:"col-span-full sm:col-span-1 md:col-span-3 lg:col-span-3",children:(0,X.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,X.jsxs)("div",{className:"col-span-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"quantity",className:"hidden sm:block",children:"Quantity *"}),(0,X.jsx)(Vn.p,{type:"number",id:"quantity",name:"quantity",placeholder:"Qty *",value:F.quantity,onChange:we,required:!0,className:"w-full"})]}),(0,X.jsxs)("div",{className:"col-span-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"rate",className:"hidden sm:block",children:"Rate"}),(0,X.jsx)(Vn.p,{type:"number",id:"rate",name:"rate",placeholder:"Rate",value:F.rate,onChange:we,className:"w-full"})]}),(0,X.jsxs)("div",{className:"col-span-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"total",className:"hidden sm:block",children:"Total *"}),(0,X.jsx)(Vn.p,{type:"number",id:"total",name:"total",placeholder:"Total *",value:F.total,onChange:we,required:!0,className:"w-full"})]})]})}),(0,X.jsxs)("div",{className:"col-span-full sm:col-span-1 flex items-center justify-center mt-2 sm:mt-0",children:[(0,X.jsxs)(w.$,{type:"submit",size:"sm",className:"h-8 w-full sm:w-auto sm:px-3 mr-2 flex items-center justify-center",children:[(0,X.jsx)(S.A,{className:"h-4 w-4 mr-2"}),(0,X.jsx)("span",{children:"Add"})]}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",size:"sm",className:"h-8 w-full sm:w-8 sm:p-0",onClick:()=>B({serviceName:"",quantity:"",rate:"",total:"",category:""}),children:[(0,X.jsx)(C.A,{className:"h-4 w-4 sm:inline"}),(0,X.jsx)("span",{className:"sm:hidden",children:"Clear"})]})]})]}),(0,X.jsx)(Mo,{className:"my-2"}),(0,X.jsx)("div",{className:"sm:hidden space-y-1",children:"datewise"!==Oe||ne?Me.map((e=>(0,X.jsx)(k.Zp,{className:"mb-1",children:(0,X.jsxs)(k.Wu,{className:"p-2",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsx)("span",{className:"font-semibold",children:e.service}),(0,X.jsxs)("div",{children:[(0,X.jsx)(w.$,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 mr-2",onClick:()=>Ee(e.id),children:(0,X.jsx)(Py,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>Se(e.id),children:(0,X.jsx)(C.A,{className:"h-4 w-4"})})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,X.jsxs)("div",{children:["Date:"," ",e.date?(0,Go.GP)(new Date(e.date),"dd/MM/yyyy  hh:mm a"):"-"]}),(0,X.jsxs)("div",{children:["Quantity: ",e.quantity]}),(0,X.jsxs)("div",{children:["Rate: ",e.rate.toLocaleString("en-IN")]}),(0,X.jsxs)("div",{children:["Total: \u20b9",e.total.toLocaleString("en-IN")]})]})]})},e.id))):null===Ie||void 0===Ie?void 0:Ie.map((e=>{let{date:t,services:n}=e;return(0,X.jsxs)("div",{className:"mb-4",children:[(0,X.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"No Date"===t?"No Date":(0,Go.GP)(new Date(t),"dd MMMM yyyy")}),n.map((e=>(0,X.jsx)(k.Zp,{className:"mb-1",children:(0,X.jsxs)(k.Wu,{className:"p-2",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)("input",{type:"checkbox",className:"h-4 w-4 mr-2",checked:ee.includes(e.id),onChange:()=>ke(e.id)}),(0,X.jsx)("span",{className:"font-semibold",children:e.service})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(w.$,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 mr-2",onClick:()=>Ee(e.id),children:(0,X.jsx)(Py,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>Se(e.id),children:(0,X.jsx)(C.A,{className:"h-4 w-4"})})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,X.jsxs)("div",{children:["Time:"," ",e.date?(0,Go.GP)(new Date(e.date),"hh:mm a"):"-"]}),(0,X.jsxs)("div",{children:["Quantity: ",e.quantity]}),(0,X.jsxs)("div",{children:["Rate: ",e.rate.toLocaleString("en-IN")]}),(0,X.jsxs)("div",{children:["Total: \u20b9",e.total.toLocaleString("en-IN")]})]})]})},e.id)))]},t)}))}),(0,X.jsx)("div",{className:"hidden sm:block",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[50px] h-[35px]",children:(0,X.jsx)("input",{type:"checkbox",className:"h-4 w-4",checked:ee.length===Me.length&&Me.length>0,onChange:Te})}),(0,X.jsx)(Wo.nd,{className:"h-[35px]",children:"Service"}),(0,X.jsx)(Wo.nd,{className:"h-[35px]",children:"Date"}),(0,X.jsx)(Wo.nd,{className:"h-[35px]",children:"Quantity"}),(0,X.jsx)(Wo.nd,{className:"text-right h-[35px]",children:"Rate"}),(0,X.jsx)(Wo.nd,{className:"text-right h-[35px]",children:"Total"}),(0,X.jsx)(Wo.nd,{className:"text-right h-[20px]",children:"Action"})]})}),(0,X.jsx)(Wo.BF,{children:"datewise"!==Oe||ne?Me.map((e=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:(0,X.jsx)("input",{type:"checkbox",className:"h-4 w-4",checked:ee.includes(e.id),onChange:()=>ke(e.id)})}),(0,X.jsx)(Wo.nA,{className:"font-medium",children:e.service}),(0,X.jsx)(Wo.nA,{children:e.date?(0,Go.GP)(new Date(e.date),"dd/MM/yyyy hh:mm a"):"-"}),(0,X.jsx)(Wo.nA,{children:e.quantity}),(0,X.jsx)(Wo.nA,{className:"text-right",children:e.rate.toLocaleString("en-IN")}),(0,X.jsx)(Wo.nA,{className:"text-right font-semibold",children:e.total.toLocaleString("en-IN")}),(0,X.jsxs)(Wo.nA,{className:"text-right",children:[(0,X.jsxs)(w.$,{variant:"outline",size:"sm",className:"h-6 w-6 p-0 mr-2",onClick:()=>Ee(e.id),children:[(0,X.jsx)("span",{className:"sr-only",children:"Edit"}),(0,X.jsx)(Py,{className:"h-3 w-3"})]}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>Se(e.id),children:[(0,X.jsx)("span",{className:"sr-only",children:"Remove"}),(0,X.jsx)(C.A,{className:"h-3 w-3 text-red-600"})]})]})]},e.id))):null===Ie||void 0===Ie?void 0:Ie.map((e=>{let{date:t,services:n}=e;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Wo.Hj,{children:(0,X.jsx)(Wo.nA,{colSpan:7,className:"bg-gray-50",children:(0,X.jsx)("span",{className:"font-semibold",children:"No Date"===t?"No Date":(0,Go.GP)(new Date(t),"dd MMMM yyyy")})})},`date-${t}`),n.map((e=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:(0,X.jsx)("input",{type:"checkbox",className:"h-3 w-3",checked:ee.includes(e.id),onChange:()=>ke(e.id)})}),(0,X.jsx)(Wo.nA,{className:"font-medium",children:e.service}),(0,X.jsx)(Wo.nA,{children:e.date?(0,Go.GP)(new Date(e.date),"hh:mm a"):"-"}),(0,X.jsx)(Wo.nA,{children:e.quantity}),(0,X.jsx)(Wo.nA,{className:"text-right",children:e.rate.toLocaleString("en-IN")}),(0,X.jsx)(Wo.nA,{className:"text-right font-semibold",children:e.total.toLocaleString("en-IN")}),(0,X.jsxs)(Wo.nA,{className:"text-right",children:[(0,X.jsxs)(w.$,{variant:"outline",size:"sm",className:"h-6 w-6 p-0 mr-2",onClick:()=>Ee(e.id),children:[(0,X.jsx)("span",{className:"sr-only",children:"Edit"}),(0,X.jsx)(Py,{className:"h-3 w-3"})]}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",onClick:()=>Se(e.id),children:[(0,X.jsx)("span",{className:"sr-only",children:"Remove"}),(0,X.jsx)(C.A,{className:"h-3 w-3 text-red-600"})]})]})]},e.id)))]})}))})]})})]})}),(0,X.jsx)(k.Zp,{children:(0,X.jsxs)(k.Wu,{className:"p-1 grid grid-cols-"+(ne?"1":"2"),children:[!ne&&(0,X.jsxs)("div",{className:"flex  mb-2 space-x-2",children:[(0,X.jsx)(w.$,{variant:"list"===Oe?"default":"outline",size:"sm",onClick:()=>Re("list"),className:"h-8",children:"List View"}),(0,X.jsx)(w.$,{variant:"datewise"===Oe?"default":"outline",size:"sm",onClick:()=>Re("datewise"),className:"h-8",children:"Date-wise View"}),(0,X.jsx)(w.$,{variant:"listwithoutdate"===Oe?"default":"outline",size:"sm",onClick:()=>Re("listwithoutdate"),className:"h-8",children:"List without Date"})]}),(0,X.jsxs)("div",{className:"flex flex-col items-end space-y-0.5 text-sm",children:[(0,X.jsxs)("div",{className:"flex justify-end items-center w-full",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-4 min-w-[100px] text-right",children:"Subtotal(\u20b9):"}),(0,X.jsx)("div",{className:"w-32 text-right",children:(0,X.jsx)("span",{className:"font-medium",children:parseFloat(je.subtotal||0).toFixed(2)})})]}),(0,X.jsxs)("div",{className:"flex justify-end items-center w-full ",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-4 min-w-[100px] text-right",children:"Discount(\u20b9):"}),(0,X.jsx)("div",{className:"w-32",children:(0,X.jsx)(Vn.p,{value:(parseFloat(U)||0).toFixed(2),onChange:e=>{z(e.target.value)},className:"w-full h-7 text-right text-red-600 font-medium border-0 p-0 focus:ring-1 focus-visible:ring-1 focus-visible:ring-offset-1 bg-transparent",placeholder:""})})]}),(0,X.jsxs)("div",{className:"flex justify-end items-center w-full border-t border-gray-200 ",children:[(0,X.jsx)("span",{className:"font-medium mr-4 min-w-[100px] text-right",children:"Net Total(\u20b9):"}),(0,X.jsx)("div",{className:"w-32 text-right",children:(0,X.jsx)("span",{className:"font-medium",children:null===(r=je.totalAmount)||void 0===r?void 0:r.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})})})]}),(0,X.jsxs)("div",{className:"flex justify-end items-center w-full",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-4 min-w-[100px] text-right",children:"Paid(\u20b9):"}),(0,X.jsx)("div",{className:"w-32 text-right",children:(0,X.jsx)("span",{className:"text-green-600 font-bold",children:null===(s=je.totalAmountPaid)||void 0===s?void 0:s.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})})})]}),(0,X.jsxs)("div",{className:"flex justify-end items-center w-full border-t border-gray-200 ",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-4 min-w-[100px] text-right",children:"Balance Due(\u20b9):"}),(0,X.jsx)("div",{className:"w-32 text-right",children:(0,X.jsx)("span",{className:"text-red-600 font-bold",children:(je.totalAmount-(je.totalAmountPaid||0)).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})})})]})]})]})}),(0,X.jsx)("div",{className:"flex flex-col sm:flex-row justify-end space-y-1 sm:space-y-0 sm:space-x-4 mt-2",children:(0,X.jsxs)("div",{className:"flex w-full sm:w-auto gap-2",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>{L([]),b([]),B({serviceName:"",quantity:"",rate:"",total:"",category:""}),$(""),z(""),q("amount"),te([])},disabled:De,className:"w-1/2 sm:w-auto",children:"Reset"}),(0,X.jsxs)(w.$,{variant:"outline",onClick:Ce,className:"w-1/2 sm:w-auto",children:[(0,X.jsx)(Xn.A,{className:"mr-2 h-4 w-4"}),"Print Bill"]}),(0,X.jsxs)(w.$,{variant:"outline",onClick:()=>{var e,t,n,r,a,s;const i={_id:(null===ve||void 0===ve||null===(e=ve.services)||void 0===e||null===(t=e[0])||void 0===t?void 0:t._id)||be,totalAmount:je.totalAmount,amountPaid:je.totalAmountPaid,payments:(null===ve||void 0===ve||null===(n=ve.services)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.payments)||[],createdAt:(null===ve||void 0===ve||null===(a=ve.services)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.createdAt)||new Date};x(i),oe(!0)},className:"w-1/2 sm:w-auto",disabled:!be&&!pe,children:[(0,X.jsx)(sQ,{className:"mr-2 h-4 w-4"}),"Pay"]}),(0,X.jsx)(w.$,{onClick:()=>{if(0===I.length)return void p({title:"No services added",description:"Please add at least one service before creating the bill.",variant:"destructive"});let e=parseFloat(U)||0;"percentage"===V&&(e=e/100*je.subtotal);const t={services:I.map((e=>({name:e.service,quantity:e.quantity,rate:e.rate,_id:e._id,discount:e.discAmt,date:e.date,category:e.category,isExisting:e.isExisting||!1,type:e.type}))),patient:T._id,patientType:T.type,patientInfo:{name:T.name,phone:T.contactNumber},totals:{totalAmount:je.totalAmount,subtotal:je.subtotal,additionalDiscount:e,currentServicesSubtotal:je.currentServicesSubtotal}};d(G?ft({billId:be||pe.services[0]._id,billData:t}):ht(t))},disabled:De,className:"w-1/2 sm:w-auto",children:De?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}),G?"Updating...":"Creating..."]}):G?"Update Bill":"Create Bill"})]})}),(0,X.jsx)(jx,{isOpen:Y,setIsOpen:()=>{Z(!1),u("/billings")},patientData:g,services:I,selectedServices:ee,onSelectService:ke,onSelectAll:Te}),(0,X.jsx)(Jc,{isOpen:J,setIsOpen:()=>{Q(!1),N&&(_(!1),u("/billings"))},billData:g,services:I,selectedServices:ee,onSelectService:ke,onSelectAll:Te,viewMode:Oe}),(0,X.jsx)(td,{isOpen:ie,setIsOpen:oe,billData:g,onPaymentSuccess:e=>(e=>{ge(e),e._id,e.totalAmount,e.amountPaid,e.payments,x(e),Q(!0)})(e)}),(0,X.jsx)(Io.lG,{open:de,onOpenChange:ue,children:(0,X.jsxs)(Io.Cf,{children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Warning"}),(0,X.jsx)(Io.rr,{children:"Changing the break total mode will delete all newly added services as they were calculated under different rules. Existing services will be preserved.Update the bill to reflect any chnages. Do you want to proceed?"})]}),(0,X.jsxs)(Io.Es,{children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>{ue(!1),he(null)},children:"Cancel"}),(0,X.jsx)(w.$,{onClick:()=>{_e(me),ue(!1),he(null)},children:"Proceed"})]})]})}),(0,X.jsx)(Ex,{isOpen:Ue,onClose:()=>ze(!1),services:A.filter((e=>"Surgery"===e.category)),selectedServices:He,onServicesChange:e=>{Ve(e),(async e=>{0!==e.length&&(Xe(e),Ke(!0),ze(!1))})(e)}}),(0,X.jsx)(Io.lG,{open:Ge,onOpenChange:Ke,children:(0,X.jsxs)(Io.Cf,{children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Operation Options"}),(0,X.jsx)(Io.rr,{children:"How would you like to add the selected operation?"})]}),(0,X.jsxs)("div",{className:"flex flex-col gap-4 py-4",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>qe(!1),className:"w-full",children:"Add Operation Name Only"}),(0,X.jsx)(w.$,{onClick:()=>qe(!0),className:"w-full",children:"Add Operation Name with Charges in Bill"})]})]})})]})},lQ=(0,N.A)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),cQ=(0,N.A)("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]),dQ=(0,N.A)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),uQ=(0,N.A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);function mQ(){const e=(0,a.Zp)(),[n,r]=(0,t.useState)(!1),s=()=>{r(!1)};return(0,X.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,X.jsxs)("header",{className:"px-2 lg:px-6 h-16 flex items-center justify-between bg-white shadow-sm",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsxs)(Qi,{open:n,onOpenChange:r,children:[(0,X.jsx)(eo,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"ghost",size:"icon",className:"md:hidden mr-0",children:[(0,X.jsx)(Zs,{className:"h-6 w-6"}),(0,X.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,X.jsx)(ao,{side:"left",children:(0,X.jsxs)("nav",{className:"flex flex-col gap-4 mt-4",children:[(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",onClick:s,children:"Home"}),(0,X.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:t=>((t,n)=>{t.preventDefault(),s(),"scrollToFeatures"===n&&setTimeout((()=>{e("/",{state:{scrollToFeatures:!0}})}),300)})(t,"scrollToFeatures"),children:"Features"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",onClick:s,children:"About"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",onClick:s,children:"Contact"})]})})]}),(0,X.jsxs)(f,{className:"flex items-center justify-center",to:"/",children:[(0,X.jsx)(Xi,{className:"h-6 w-6 sm:h-7 sm:w-7 text-blue-600"}),(0,X.jsx)("span",{className:"ml-2 text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:"The Hospital"})]})]}),(0,X.jsxs)("nav",{className:"hidden md:flex items-center space-x-4",children:[(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",children:"Home"}),(0,X.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:t=>{t.preventDefault(),e("/",{state:{scrollToFeatures:!0}})},children:"Features"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",children:"About"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",children:"Contact"})]}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",className:"md:hidden mr-2",onClick:()=>{e("/",{state:{scrollToLogin:!0}})},children:[(0,X.jsx)(Js,{className:"h-4 w-4 mr-2"}),"Login"]})]}),(0,X.jsxs)("main",{className:"flex-1",children:[(0,X.jsx)("section",{className:"w-full py-12 sm:py-16 md:py-20 lg:py-32 bg-white",children:(0,X.jsx)("div",{className:"container px-4 md:px-6 mx-auto",children:(0,X.jsx)("div",{className:"flex flex-col items-center justify-center space-y-4 text-center",children:(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold tracking-tighter",children:"About The Hospital"}),(0,X.jsx)("p",{className:"max-w-[900px] text-sm sm:text-base md:text-lg lg:text-xl text-gray-500",children:"Revolutionizing healthcare management with cutting-edge software solutions."})]})})})}),(0,X.jsx)("section",{className:"w-full py-8 sm:py-12 md:py-16 lg:py-20 bg-gray-100",children:(0,X.jsxs)("div",{className:"container px-4 md:px-6 mx-auto",children:[(0,X.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter text-center mb-8 sm:mb-12",children:"Comprehensive Healthcare Management Solution"}),(0,X.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 lg:gap-12",children:[(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(ri,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Secure Patient Records"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"State-of-the-art encryption and access controls ensure patient data privacy and compliance with healthcare regulations."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(ai,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Pharmacy Management"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Streamline inventory, prescriptions, and billing with our integrated pharmacy management system."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(ui,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Laboratory Management"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Efficiently manage lab orders, results, and reporting to enhance diagnostic processes."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(lQ,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Staff Management"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Optimize scheduling, performance tracking, and resource allocation for healthcare professionals."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(si,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Advanced Analytics"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Gain actionable insights with powerful reporting tools and predictive analytics."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(ci,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Telemedicine Integration"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Seamlessly incorporate virtual consultations and remote patient monitoring into your workflow."})]})]})]})}),(0,X.jsx)("section",{className:"w-full py-8 sm:py-12 md:py-16 lg:py-20 bg-blue-50",children:(0,X.jsxs)("div",{className:"container px-4 md:px-6 mx-auto",children:[(0,X.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter text-center mb-8",children:"Our Impact on Healthcare"}),(0,X.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 lg:gap-12",children:[(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(cQ,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Improved Patient Care"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Our software enables healthcare providers to focus more on patient care by streamlining administrative tasks."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(si,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Enhanced Efficiency"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Hospitals using our solution report up to 30% increase in operational efficiency and resource utilization."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(ri,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Empowered Staff"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Healthcare professionals can make informed decisions quickly with our intuitive and data-driven platform."})]})]})]})}),(0,X.jsx)("section",{className:"w-full py-8 sm:py-12 md:py-16 lg:py-20 bg-gray-100",children:(0,X.jsxs)("div",{className:"container px-4 md:px-6 mx-auto",children:[(0,X.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter text-center mb-8 sm:mb-12",children:"Our Core Values"}),(0,X.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 lg:gap-12",children:[(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(ri,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Patient-Centric Approach"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"We prioritize the needs of patients and healthcare providers in every feature we develop."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(dQ,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Innovation"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"We continuously push the boundaries of technology to bring cutting-edge solutions to healthcare management."})]}),(0,X.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,X.jsx)(uQ,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Excellence"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"We strive for excellence in every aspect of our software, from functionality to user experience."})]})]})]})}),(0,X.jsx)("section",{className:"w-full py-8 sm:py-12 md:py-16 lg:py-20",children:(0,X.jsxs)("div",{className:"container px-4 md:px-6 mx-auto",children:[(0,X.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter text-center mb-8 sm:mb-12",children:"Why Choose Our Solution"}),(0,X.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:gap-12",children:[(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Interoperability"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Our software seamlessly integrates with existing healthcare systems and devices, ensuring smooth data flow and compatibility."})]}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Scalability"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Whether you're a small clinic or a large hospital network, our solution grows with your needs."})]}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Customization"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Tailor the software to your specific workflows and requirements with our flexible configuration options."})]}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"24/7 Support"}),(0,X.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Our dedicated support team is always available to ensure your operations run smoothly around the clock."})]})]})]})}),(0,X.jsx)("section",{className:"w-full py-8 sm:py-12 md:py-16 lg:py-20",children:(0,X.jsx)("div",{className:"container px-4 md:px-6 mx-auto",children:(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 text-center",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter",children:"Our Team"}),(0,X.jsx)("p",{className:"max-w-[900px] text-sm sm:text-base md:text-lg lg:text-xl text-gray-500",children:"Behind The Hospital is a dedicated team of healthcare professionals, software engineers, and industry experts committed to revolutionizing hospital management."})]}),(0,X.jsx)("div",{className:"w-full max-w-sm space-y-2",children:(0,X.jsxs)(w.$,{className:"w-full bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{e("/contact",{state:{scrollToContact:!0}})},children:[(0,X.jsx)(Hx,{className:"mr-2 h-4 w-4"})," Contact Us"]})})]})})})]}),(0,X.jsxs)("footer",{className:"flex flex-col gap-2 sm:flex-row py-4 sm:py-6 w-full shrink-0 items-center px-4 md:px-6 border-t bg-white",children:[(0,X.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(Xi,{className:"h-5 w-5 text-blue-600"}),(0,X.jsx)("p",{className:"text-xs text-gray-500",children:"\xa9 2024 The Hospital. All rights reserved."})]}),(0,X.jsx)("span",{className:"hidden sm:inline text-gray-300",children:"|"}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)("img",{src:so,alt:"Thousand Ways Logo",className:"h-5 w-5 object-contain"}),(0,X.jsxs)("p",{className:"text-xs text-gray-500",children:["Powered by ",(0,X.jsx)("a",{href:"https://thethousandways.com/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 transition-colors",children:"Thousand Ways"})]})]})]}),(0,X.jsxs)("nav",{className:"sm:ml-auto flex gap-4 sm:gap-6",children:[(0,X.jsx)(f,{className:"text-xs hover:underline underline-offset-4",to:"/terms",children:"Terms of Service"}),(0,X.jsx)(f,{className:"text-xs hover:underline underline-offset-4",to:"/privacy",children:"Privacy"})]})]})]})}const hQ=(0,N.A)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),pQ=(0,N.A)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),fQ=(0,N.A)("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);function vQ(){const e=(0,a.Zp)(),n=(0,a.zy)(),r=(0,t.useRef)(null),[s,i]=(0,t.useState)(!1);(0,t.useEffect)((()=>{var e;null!==(e=n.state)&&void 0!==e&&e.scrollToContact&&r.current&&r.current.scrollIntoView({behavior:"smooth"})}),[n]);const o=()=>{i(!1)};return(0,X.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,X.jsxs)("header",{className:"px-2 lg:px-6 h-16 flex items-center justify-between bg-white shadow-sm",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsxs)(Qi,{open:s,onOpenChange:i,children:[(0,X.jsx)(eo,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"ghost",size:"icon",className:"md:hidden mr-0",children:[(0,X.jsx)(Zs,{className:"h-6 w-6"}),(0,X.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,X.jsx)(ao,{side:"left",children:(0,X.jsxs)("nav",{className:"flex flex-col gap-4 mt-4",children:[(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",onClick:o,children:"Home"}),(0,X.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:t=>((t,n)=>{t.preventDefault(),o(),"scrollToFeatures"===n&&setTimeout((()=>{e("/",{state:{scrollToFeatures:!0}})}),300)})(t,"scrollToFeatures"),children:"Features"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",onClick:o,children:"About"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",onClick:o,children:"Contact"})]})})]}),(0,X.jsxs)(f,{className:"flex items-center justify-center",to:"/",children:[(0,X.jsx)(Xi,{className:"h-6 w-6 sm:h-7 sm:w-7 text-blue-600"}),(0,X.jsx)("span",{className:"ml-2 text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:"The Hospital"})]})]}),(0,X.jsxs)("nav",{className:"hidden md:flex items-center space-x-4",children:[(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",children:"Home"}),(0,X.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:t=>{t.preventDefault(),e("/",{state:{scrollToFeatures:!0}})},children:"Features"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",children:"About"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",children:"Contact"})]}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",className:"md:hidden mr-2",onClick:()=>{e("/",{state:{scrollToLogin:!0}})},children:[(0,X.jsx)(Js,{className:"h-4 w-4 mr-2"}),"Login"]})]}),(0,X.jsxs)("main",{className:"flex-1",children:[(0,X.jsx)("section",{className:"w-full py-6 sm:py-8 md:py-12 bg-white",children:(0,X.jsx)("div",{className:"container px-4 md:px-6",children:(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2 sm:space-y-4 text-center",children:[(0,X.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter",children:"Contact Us"}),(0,X.jsx)("p",{className:"max-w-[600px] text-gray-500 text-sm sm:text-base md:text-lg",children:"We're here to help. Get in touch with us for any inquiries or support."})]})})}),(0,X.jsx)("section",{className:"w-full py-6 sm:py-8 md:py-12",children:(0,X.jsx)("div",{className:"container px-4 md:px-6",children:(0,X.jsxs)("div",{className:"grid gap-8 md:gap-12 lg:grid-cols-2",children:[(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tighter",children:"Contact Information"}),(0,X.jsx)(k.Zp,{className:"w-full",children:(0,X.jsx)(k.Wu,{className:"p-4 sm:p-6",children:(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,X.jsx)(lx,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 flex-shrink-0"}),(0,X.jsx)("span",{className:"text-sm sm:text-base",children:"+91 9942000425"})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,X.jsx)(Hx,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 flex-shrink-0"}),(0,X.jsx)("span",{className:"text-sm sm:text-base",children:"thousandways.help@gmail.com  "})]}),(0,X.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,X.jsx)(cx,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 flex-shrink-0 mt-1"}),(0,X.jsxs)("span",{className:"text-sm sm:text-base",children:["Thousand Ways Private Limited",(0,X.jsx)("br",{}),"Dariyapur, Bodh Gaya,",(0,X.jsx)("br",{}),"Bihar 824237, India"]})]})]})})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Follow Us"}),(0,X.jsxs)("div",{className:"flex space-x-4",children:[(0,X.jsxs)(f,{href:"#",className:"text-gray-500 hover:text-blue-600",children:[(0,X.jsx)(hQ,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,X.jsx)("span",{className:"sr-only",children:"Facebook"})]}),(0,X.jsxs)(f,{href:"#",className:"text-gray-500 hover:text-blue-600",children:[(0,X.jsx)(pQ,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,X.jsx)("span",{className:"sr-only",children:"Twitter"})]}),(0,X.jsxs)("a",{href:"https://youtube.com/@thehospital_in?si=7bUryvDSFQC8Lxtf",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-blue-600",children:[(0,X.jsx)(fQ,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,X.jsx)("span",{className:"sr-only",children:"Youtube"})]})]})]})]}),(0,X.jsxs)("div",{className:"space-y-4",ref:r,children:[(0,X.jsx)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tighter",children:"Contact Us"}),(0,X.jsx)("p",{className:"text-gray-500 text-sm sm:text-base",children:"We appreciate your interest. Please complete the form below, and a member of our team will respond promptly."}),(0,X.jsxs)("form",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("label",{htmlFor:"name",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Full Name"}),(0,X.jsx)(Vn.p,{id:"name",placeholder:"Enter your full name",required:!0,className:"w-full"})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("label",{htmlFor:"mobile",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Contact Number"}),(0,X.jsx)(Vn.p,{id:"mobile",placeholder:"Enter your contact number",required:!0,type:"tel",className:"w-full"})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)("label",{htmlFor:"message",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Inquiry"}),(0,X.jsx)(Xo.T,{id:"message",placeholder:"Please provide details about your inquiry",required:!0,className:"w-full"})]}),(0,X.jsx)(w.$,{type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",children:"Submit Inquiry"})]})]})]})})})]}),(0,X.jsxs)("footer",{className:"flex flex-col sm:flex-row justify-between items-center py-6 px-4 md:px-6 border-t bg-white",children:[(0,X.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(Xi,{className:"h-5 w-5 text-blue-600"}),(0,X.jsx)("p",{className:"text-xs text-gray-500",children:"\xa9 2024 The Hospital. All rights reserved."})]}),(0,X.jsx)("span",{className:"hidden sm:inline text-gray-300",children:"|"}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)("img",{src:so,alt:"Thousand Ways Logo",className:"h-5 w-5 object-contain"}),(0,X.jsxs)("p",{className:"text-xs text-gray-500",children:["Powered by ",(0,X.jsx)("a",{href:"https://thethousandways.com/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 transition-colors",children:"Thousand Ways"})]})]})]}),(0,X.jsxs)("nav",{className:"flex gap-4",children:[(0,X.jsx)(f,{className:"text-xs hover:underline underline-offset-4",to:"/terms",children:"Terms of Service"}),(0,X.jsx)(f,{className:"text-xs hover:underline underline-offset-4",to:"/privacy",children:"Privacy"})]})]})]})}const gQ=(0,N.A)("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),xQ=[{_id:"1",name:"Supplies"},{_id:"2",name:"Utilities"},{_id:"3",name:"Salaries"},{_id:"4",name:"Equipment"},{_id:"5",name:"Maintenance"},{_id:"6",name:"OPDReturn"}],yQ=e=>{let{isOpen:n,onClose:r,expenseToEdit:a}=e;const s=(0,j.wA)(),{createExpenseStatus:i,updateExpenseStatus:o}=(0,j.d4)((e=>e.expenses)),{toast:l}=(0,H.dj)(),[c,d]=(0,t.useState)({category:"",description:"",amount:"",date:"",amountPaid:"",paymentMethod:""}),[u,m]=(0,t.useState)({category:"",description:"",amount:"",date:"",paymentMethod:""});(0,t.useEffect)((()=>{if(a){const e=new Date(a.date);d({category:a.category,description:a.description,amount:a.amount.toString(),date:(0,Go.GP)(e,"yyyy-MM-dd"),amountPaid:a.amountPaid.toString(),paymentMethod:a.paymentMethod||""})}else d({category:"",description:"",amount:"",date:(0,Go.GP)(new Date,"yyyy-MM-dd"),amountPaid:"",paymentMethod:""})}),[a]);const h=e=>{const{name:t,value:n}=e.target;d((e=>{const r={...e,[t]:n};return"amount"===t&&(r.amountPaid=n),r}))};return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:" sm:max-w-[425px] max-w-[90vw] rounded-lg",onOpenAutoFocus:e=>e.preventDefault(),children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{className:"text-2xl font-semibold",children:a?"Edit Expense":"Add New Expense"}),(0,X.jsx)(Io.rr,{className:"text-gray-500",children:a?"Update the expense details below.":"Fill in the details to add a new expense."})]}),(0,X.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{let e=!0;const t={category:"",description:"",amount:"",date:"",paymentMethod:""};return c.category.trim()||(t.category="Category is required",e=!1),c.description.trim()||(t.description="Description is required",e=!1),c.amount?(isNaN(c.amount)||parseFloat(c.amount)<=0)&&(t.amount="Please enter a valid amount",e=!1):(t.amount="Amount is required",e=!1),c.date||(t.date="Date is required",e=!1),c.paymentMethod||(t.paymentMethod="Payment method is required",e=!1),m(t),e})())return void l({title:"Validation Error",description:"Please fill in all required fields correctly.",variant:"destructive"});const t={...c,amount:parseFloat(c.amount),amountPaid:parseFloat(c.amountPaid),date:new Date(c.date).toISOString()},n=a?Ft({...t,_id:a._id}):Lt(t);s(n).unwrap().then((()=>{l({title:`Expense ${a?"updated":"added"} successfully`,description:`The expense has been ${a?"updated":"added"}.`,variant:"success"}),d({category:"",description:"",amount:"",date:(0,Go.GP)(new Date,"yyyy-MM-dd"),amountPaid:"",paymentMethod:""}),r()})).catch((e=>{l({title:`Failed to ${a?"update":"add"} expense`,description:e.message||`There was an error ${a?"updating":"adding"} the expense. Please try again.`,variant:"destructive"})}))},className:"space-y-6",children:[(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"category",children:"Category *"}),(0,X.jsx)(Gs.A,{suggestions:xQ,placeholder:"Select or type category",value:c.category,setValue:e=>d((t=>({...t,category:e}))),onSuggestionSelect:e=>d((t=>({...t,category:e.name})))}),u.category&&(0,X.jsx)("span",{className:"text-sm text-red-500",children:u.category})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"description",children:"Description/PAID To * "}),(0,X.jsx)(Vn.p,{id:"description",name:"description",value:c.description,onChange:h,placeholder:(e=>{switch(e){case"OPDReturn":return"Enter Patient Details";case"Salaries":return"Enter Salary Description";case"Supplies":return"Enter Supply Details";case"Utilities":return"Enter Utility Bill Details";case"Equipment":return"Enter Equipment Details";case"Maintenance":return"Enter Maintenance Details";default:return"Enter description of the expense"}})(c.category),className:u.description?"border-red-500 ring-red-500":""}),u.description&&(0,X.jsx)("span",{className:"text-sm text-red-500",children:u.description})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"amount",children:"Amount *"}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"\u20b9"}),(0,X.jsx)(Vn.p,{id:"amount",name:"amount",type:"number",value:c.amount,onChange:h,placeholder:"0.00",className:"pl-7 "+(u.amount?"border-red-500 ring-red-500":"")}),u.amount&&(0,X.jsx)("span",{className:"text-sm text-red-500",children:u.amount})]})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"date",children:"Date *"}),(0,X.jsx)(Vn.p,{id:"date",name:"date",type:"date",value:c.date,onChange:h,className:u.date?"border-red-500 ring-red-500":""}),u.date&&(0,X.jsx)("span",{className:"text-sm text-red-500",children:u.date})]})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"paymentMethod",children:"Payment Method *"}),(0,X.jsxs)(A.l6,{name:"paymentMethod",value:c.paymentMethod,onValueChange:e=>h({target:{name:"paymentMethod",value:e}}),children:[(0,X.jsx)(A.bq,{className:"w-full "+(u.paymentMethod?"border-red-500 ring-red-500":""),children:(0,X.jsx)(A.yv,{placeholder:"Select method"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Cash",children:"Cash"}),(0,X.jsx)(A.eb,{value:"Card",children:"Card"}),(0,X.jsx)(A.eb,{value:"UPI",children:"UPI"}),(0,X.jsx)(A.eb,{value:"Bank Transfer",children:"Bank Transfer"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]})]}),u.paymentMethod&&(0,X.jsx)("span",{className:"text-sm text-red-500",children:u.paymentMethod})]})]}),(0,X.jsxs)(Io.Es,{className:"flex justify-end space-x-2",children:[(0,X.jsx)(w.$,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),(0,X.jsx)(w.$,{type:"submit",disabled:a?"loading"===o:"loading"===i,className:"px-4 py-2",children:a?"loading"===o?"Updating...":"Update Expense":"loading"===i?"Adding...":"Add Expense"})]})]})]})})},bQ=e=>{var n;let{isOpen:r,setIsOpen:a,expenseData:s}=e;const i=(0,j.wA)(),{toast:o}=(0,H.dj)(),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(""),[m,h]=(0,t.useState)(!1),p=Zc("(max-width: 640px)");(0,t.useEffect)((()=>{r&&(c(""),u(""))}),[r]);const f=(null===s||void 0===s?void 0:s.amount)||0,v=f-((null===s||void 0===s?void 0:s.amountPaid)||0),g=v<=0;if(!s)return null;return(0,X.jsx)(Io.lG,{open:r,onOpenChange:a,children:(0,X.jsxs)(Io.Cf,{className:"w-[90vw] max-w-[425px] max-h-[90vh] overflow-y-auto",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{className:"text-xl font-semibold",children:"Add Payment"}),(0,X.jsx)(Io.rr,{children:"Manage payments for the expense."})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between text-sm font-medium",children:[(0,X.jsxs)("span",{children:["Total Amount: ",(0,X.jsxs)("span",{className:"text-primary",children:["\u20b9",f.toLocaleString("en-IN")]})]}),(0,X.jsxs)("span",{children:["Due Amount: ",(0,X.jsxs)("span",{className:"text-red-600",children:["\u20b9",v.toLocaleString("en-IN")]})]})]}),(0,X.jsx)(Mo,{}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"paymentAmount",children:"Payment Amount"}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Vn.p,{id:"paymentAmount",type:"number",value:l,onChange:e=>c(e.target.value),placeholder:"Enter amount",className:"pr-10",disabled:g}),(0,X.jsx)(w.$,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2",onClick:()=>{c(v.toFixed(2))},title:"Set Due Amount",disabled:g,children:(0,X.jsx)(jc,{className:"h-4 w-4"})})]})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{htmlFor:"paymentMethod",children:"Payment Method"}),(0,X.jsxs)(A.l6,{onValueChange:u,value:d,disabled:g,children:[(0,X.jsx)(A.bq,{id:"paymentMethod",children:(0,X.jsx)(A.yv,{placeholder:"Select method"})}),(0,X.jsx)(A.gC,{children:["Cash","UPI","Card","Bank Transfer","Other"].map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})]})]}),(0,X.jsx)(Mo,{}),(0,X.jsxs)("div",{className:"space-y-0",children:[(0,X.jsx)("h4",{className:"text-sm font-semibold",children:"Recent Payments"}),null!==s&&void 0!==s&&s.payments&&(null===s||void 0===s||null===(n=s.payments)||void 0===n?void 0:n.length)>0?(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[80px]",children:"Date"}),!p&&(0,X.jsx)(Wo.nd,{className:"w-[80px]",children:"Time"}),(0,X.jsx)(Wo.nd,{children:"Amount"}),(0,X.jsx)(Wo.nd,{children:"Method"})]})}),(0,X.jsx)(Wo.BF,{children:s.payments.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-xs",children:new Date(e.createdAt).toLocaleDateString("en-IN")}),!p&&(0,X.jsx)(Wo.nA,{className:"text-xs",children:new Date(e.createdAt).toLocaleTimeString("en-IN",{hour:"numeric",minute:"numeric",hour12:!0})}),(0,X.jsxs)(Wo.nA,{className:"text-xs font-medium",children:["\u20b9",e.amount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,X.jsx)(Wo.nA,{className:"text-xs",children:e.paymentMethod})]},t)))})]})}):(0,X.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-500 py-4",children:[(0,X.jsx)(Jo,{size:18}),(0,X.jsx)("span",{children:"No recent payments found"})]})]}),(0,X.jsxs)(Io.Es,{className:"mt-6 flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>a(!1),disabled:m,className:"w-full sm:w-auto",children:"Cancel"}),(0,X.jsx)(w.$,{onClick:()=>{if(!l||!d)return void o({title:"Error",description:"Please fill in all fields",variant:"destructive"});h(!0);const e={amount:parseFloat(l),paymentMethod:d};i(Bt({id:s._id,paymentData:e})).unwrap().then((()=>{o({title:"Payment added successfully",description:`Payment of \u20b9${l} has been added successfully.`,variant:"success"}),a(!1)})).catch((e=>{o({title:"Error",description:`Failed to add payment: ${e.message}`,variant:"destructive"})})).finally((()=>{h(!1)}))},disabled:m||g,className:"w-full sm:w-auto",children:m?"Processing...":g?"Fully Paid":"Add Payment"})]})]})})},jQ=e=>{let{isOpen:t,onClose:n,expenses:r}=e;const a=r.reduce(((e,t)=>{const{category:n,amount:r}=t;return e[n]||(e[n]={totalAmount:0,count:0}),e[n].totalAmount+=r,e[n].count+=1,e}),{}),{grandTotal:s,totalCount:i}=Object.values(a).reduce(((e,t)=>{let{totalAmount:n,count:r}=t;return e.grandTotal+=n,e.totalCount+=r,e}),{grandTotal:0,totalCount:0}),o=Object.entries(a).sort(((e,t)=>{let[,n]=e,[,r]=t;return r.totalAmount-n.totalAmount}));return(0,X.jsx)(Io.lG,{open:t,onOpenChange:n,children:(0,X.jsxs)(Io.Cf,{className:"max-w-[90vw] w-full sm:max-w-lg",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Expense Summary"}),(0,X.jsx)(Io.rr,{children:"A category-wise summary of the selected expenses."})]}),(0,X.jsx)(b.F,{className:"h-[400px] border rounded-md",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Category"}),(0,X.jsx)(Wo.nd,{className:"text-center font-semibold",children:"Transactions"}),(0,X.jsx)(Wo.nd,{className:"text-right font-semibold",children:"Total Amount"})]})}),(0,X.jsx)(Wo.BF,{children:o.length>0?o.map((e=>{let[t,{totalAmount:n,count:r}]=e;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"font-medium",children:t}),(0,X.jsx)(Wo.nA,{className:"text-center",children:(0,X.jsx)(Yo.E,{variant:"secondary",children:r})}),(0,X.jsxs)(Wo.nA,{className:"text-right",children:["\u20b9",n.toLocaleString("en-IN")]})]},t)})):(0,X.jsx)(Wo.Hj,{children:(0,X.jsx)(Wo.nA,{colSpan:"3",className:"h-24 text-center",children:"No expenses to summarize."})})})]})}),(0,X.jsx)(Io.Es,{className:"mt-4 sm:mt-6 pt-4 border-t",children:(0,X.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,X.jsxs)("div",{className:"text-base font-medium",children:["Total Transactions:"," ",(0,X.jsx)("span",{className:"font-bold",children:i})]}),(0,X.jsxs)("div",{className:"text-base font-medium",children:["Grand Total:"," ",(0,X.jsxs)("span",{className:"font-bold",children:["\u20b9",s.toLocaleString("en-IN")]})]})]})})]})})},wQ=()=>{const e=(0,j.wA)(),{expenses:n,expensesStatus:r,deleteExpenseStatus:a}=(0,j.d4)((e=>e.expenses)),s=(0,j.d4)((e=>{var t,n;return(null===(t=e.user)||void 0===t||null===(n=t.userData)||void 0===n?void 0:n.permissions)||[]})),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)("All"),[d,u]=(0,t.useState)("Today"),[m,h]=(0,t.useState)({from:null,to:null}),[p,f]=(0,t.useState)({from:null,to:null}),[v,g]=(0,t.useState)(!1),[x,y]=(0,t.useState)(!1),[b,N]=(0,t.useState)(null),{toast:_}=(0,H.dj)(),[E,C]=(0,t.useState)(!1),[D,T]=(0,t.useState)(null),[P,O]=(0,t.useState)(!1),[R,I]=(0,t.useState)(null),[L,F]=(0,t.useState)(null),B=Zc("(max-width: 640px)"),[W,$]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if("idle"===r){const t=new Date;e($t({startDate:(0,Go.GP)(t,"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(t,1),"yyyy-MM-dd")}))}}),[e,r]),(0,t.useEffect)((()=>{if("idle"!==r){const t=new Date;let n=null;switch(d){case"Today":n={startDate:(0,Go.GP)(t,"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(t,1),"yyyy-MM-dd")};break;case"Yesterday":const e=(0,Wc.e)(t,1);n={startDate:(0,Go.GP)(e,"yyyy-MM-dd"),endDate:(0,Go.GP)(t,"yyyy-MM-dd")};break;case"This Week":n={startDate:(0,Go.GP)((0,Rc.k)(t),"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(t,1),"yyyy-MM-dd")};break;case"Custom":return void(m.from&&m.to&&(n={startDate:(0,Go.GP)(m.from,"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(m.to,1),"yyyy-MM-dd")}))}n&&e($t(n))}}),[e,d,m]);const U=n.filter((e=>{const t=e.description.toLowerCase().includes(i.toLowerCase())||e.category.toLowerCase().includes(i.toLowerCase());let n=!0;const r=YB(e.date),a=new Date;switch(d){case"Today":n=Oc(r,{start:(0,kc.o)(a),end:(0,Ac.D)(a)});break;case"Yesterday":const e=(0,Wc.e)(a,1);n=Oc(r,{start:(0,kc.o)(e),end:(0,Ac.D)(e)});break;case"This Week":n=Oc(r,{start:(0,Rc.k)(a),end:(0,Ac.D)(a)});break;case"Custom":m.from&&m.to&&(n=Oc(r,{start:(0,kc.o)(m.from),end:(0,Ac.D)(m.to)}))}let s=!0;if("All"!==l){const t=e.amount===e.amountPaid;s=t&&"Paid"===l||!t&&"Due"===l}return t&&n&&s})),z=e=>{const t=new Date(e);return(0,Go.GP)(t,"MMM dd, yyyy")},V=()=>{if(h(p),u("Custom"),p.from&&p.to){const t={startDate:(0,Go.GP)(p.from,"yyyy-MM-dd"),endDate:(0,Go.GP)((0,zc.f)(p.to,1),"yyyy-MM-dd")};e($t(t))}},q=()=>{f({from:null,to:null}),u("Today")},G=()=>{N(null),g(!0),F(null)};return(0,X.jsxs)(k.Zp,{className:"w-full mx-auto border-0 shadow-none",children:[(0,X.jsx)(k.aR,{children:(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(k.ZB,{className:"font-semibold",children:"Expenses List"}),(0,X.jsx)(k.BT,{children:"Manage and view hospital expenses"})]}),B&&(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(w.$,{size:"icon",variant:"outline",onClick:()=>y(!0),children:(0,X.jsx)(gQ,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{size:"icon",onClick:G,children:(0,X.jsx)(S.A,{className:"h-4 w-4"})})]})]})}),(0,X.jsxs)(k.Wu,{className:"px-4",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:justify-between md:items-center md:space-y-0 md:space-x-2 mb-4",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:space-x-2 md:space-y-0",children:[(0,X.jsxs)("div",{className:"flex w-full space-x-2",children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search expenses...",value:i,onChange:e=>o(e.target.value),className:"pl-8 w-full"})]}),B&&(0,X.jsx)(w.$,{variant:"outline",className:"shrink-0",onClick:()=>$(!W),children:(0,X.jsx)(Ho,{className:"h-4 w-4"})})]}),B?(0,X.jsx)(fd,{children:W&&(0,X.jsx)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden w-full",children:(0,X.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,X.jsxs)(A.l6,{onValueChange:e=>c(e),defaultValue:"All",children:[(0,X.jsx)(A.bq,{className:"w-full",children:(0,X.jsx)(A.yv,{placeholder:"Filter by Status"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"All",children:"All"}),(0,X.jsx)(A.eb,{value:"Paid",children:"Paid"}),(0,X.jsx)(A.eb,{value:"Due",children:"Due"})]})]}),(0,X.jsxs)(A.l6,{onValueChange:e=>u(e),defaultValue:"Today",children:[(0,X.jsx)(A.bq,{className:"w-full",children:(0,X.jsx)(A.yv,{placeholder:"Time Filter Options"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Today",children:"Today"}),(0,X.jsx)(A.eb,{value:"Yesterday",children:"Yesterday"}),(0,X.jsx)(A.eb,{value:"This Week",children:"This Week"}),(0,X.jsx)(A.eb,{value:"Custom",children:"Custom Range"})]})]}),"Custom"===d&&(0,X.jsx)(M.Ur,{from:p.from,to:p.to,onSelect:e=>f(e),onSearch:V,onCancel:q})]})})}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"ml-auto",children:[(0,X.jsx)(Ho,{className:"mr-2 h-4 w-4"}),"All"===l?"Status":l]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Status"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>c("All"),children:"All"}),(0,X.jsx)($s,{onSelect:()=>c("Paid"),children:"Paid"}),(0,X.jsx)($s,{onSelect:()=>c("Due"),children:"Due"})]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),d]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Time Filter Options"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>u("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>u("Yesterday"),children:"Yesterday"}),(0,X.jsx)($s,{onSelect:()=>u("This Week"),children:"This Week"}),(0,X.jsx)($s,{onSelect:()=>u("Custom"),children:"Custom Range"})]})]}),"Custom"===d&&(0,X.jsx)(M.Ur,{from:p.from,to:p.to,onSelect:e=>f(e),onSearch:V,onCancel:q})]})]}),!B&&(0,X.jsxs)("div",{className:"flex space-x-2",children:[(0,X.jsxs)(w.$,{variant:"outline",onClick:()=>y(!0),children:[(0,X.jsx)(gQ,{className:"mr-2 h-4 w-4"}),"Summary"]}),(0,X.jsxs)(w.$,{variant:"outline",onClick:G,disabled:!(null!==s&&void 0!==s&&s.includes("record_expense")),children:[(0,X.jsx)(S.A,{className:"mr-2 h-4 w-4"})," ",null!==s&&void 0!==s&&s.includes("record_expense")?"Add Expense":"No permission to add expense"]})]})]}),0===U.length?(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-10",children:[(0,X.jsx)(Xc,{className:"h-16 w-16 text-gray-400 mb-4"}),(0,X.jsx)("p",{className:"text-xl font-semibold text-gray-600",children:"No expenses found"}),(0,X.jsx)("p",{className:"text-gray-500 mt-2",children:"There are no expenses matching your search criteria."})]}):(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"font-semibold hidden md:table-cell",children:"Expense ID"}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Description"}),(0,X.jsx)(Wo.nd,{className:"font-semibold hidden md:table-cell",children:"Category"}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Amount"}),(0,X.jsx)(Wo.nd,{className:"font-semibold md:hidden",children:"Date"}),(0,X.jsx)(Wo.nd,{className:"font-semibold  md:table-cell",children:"Methods"}),(0,X.jsx)(Wo.nd,{className:"font-semibold hidden md:table-cell",children:"Date"}),(0,X.jsx)(Wo.nd,{className:"font-semibold hidden md:table-cell",children:"Status"}),(0,X.jsx)(Wo.nd,{className:"font-semibold hidden md:table-cell",children:"Created By"}),(0,X.jsx)(Wo.nd,{className:"font-semibold",children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:U.map((e=>{var t,n,r,a,s,i;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"hidden md:table-cell",children:`E${null===(t=e._id)||void 0===t?void 0:t.slice(-6)}`}),(0,X.jsx)(Wo.nA,{children:e.description}),(0,X.jsx)(Wo.nA,{className:"hidden md:table-cell",children:e.category}),(0,X.jsxs)(Wo.nA,{children:["\u20b9",null===(n=e.amount)||void 0===n?void 0:n.toLocaleString("en-IN")]}),(0,X.jsx)(Wo.nA,{className:"md:hidden",children:(0,Go.GP)(new Date(e.date),"dd MMM")}),(0,X.jsx)(Wo.nA,{className:"hidden md:table-cell",children:null===(r=e.payments)||void 0===r?void 0:r.map((e=>e.paymentMethod)).join(", ")}),(0,X.jsx)(Wo.nA,{className:"hidden md:table-cell",children:z(e.date)}),(0,X.jsx)(Wo.nA,{className:"hidden md:table-cell",children:(0,X.jsx)(Yo.E,{variant:(s=e.amount,i=e.amountPaid,s===i?"success":"destructive"),children:e.amount===e.amountPaid?"Paid":"Due"})}),(0,X.jsx)(Wo.nA,{className:"hidden md:table-cell",children:null!==(a=e.createdByName)&&void 0!==a?a:"N/A"}),(0,X.jsx)(Wo.nA,{children:(0,X.jsxs)(Ms,{open:L===e._id,onOpenChange:()=>{return t=e._id,void F(L===t?null:t);var t},children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,X.jsx)(lo,{className:"h-4 w-4"})})}),(0,X.jsxs)(Ws,{align:"end",children:[(0,X.jsx)($s,{onClick:()=>(e=>{N(e),g(!0),F(null)})(e),children:"Edit Expense"}),(0,X.jsx)($s,{onClick:()=>(e=>{I(e),O(!0),F(null)})(e),children:"Payments"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{className:"text-red-600",onClick:()=>(e=>{T(e),C(!0),F(null)})(e),children:"Delete Expense"})]})]})})]},e._id)}))})]})})]}),(0,X.jsx)(yQ,{isOpen:v,onClose:()=>{g(!1),N(null),F(null)},expenseToEdit:b}),(0,X.jsx)(jQ,{isOpen:x,onClose:()=>y(!1),expenses:U}),(0,X.jsx)(Ce,{open:E,onOpenChange:C,children:(0,X.jsxs)(Ae,{className:"max-w-[90vw] w-full sm:max-w-[425px]",children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{className:"text-lg sm:text-xl",children:"Delete Expense?"}),(0,X.jsx)(Me,{className:"text-sm sm:text-base",children:"Are you sure you want to delete this expense? This action cannot be undone."})]}),(0,X.jsxs)(Oe,{className:"flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[(0,X.jsx)(Le,{className:"w-full sm:w-auto",children:"Cancel"}),(0,X.jsx)(Ie,{className:"w-full sm:w-auto",onClick:()=>{e(Wt(D._id)).unwrap().then((()=>{_({title:"Expense deleted successfully",description:"The expense has been removed.",variant:"success"})})).catch((e=>{_({title:"Failed to delete expense",description:e.message||"There was an error deleting the expense. Please try again.",variant:"destructive"})})).finally((()=>{C(!1),T(null)}))},disabled:"loading"===a,children:"loading"===a?"Deleting...":"Delete"})]})]})}),(0,X.jsx)(bQ,{isOpen:P,setIsOpen:O,expenseData:R})]})},NQ=(0,N.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),_Q=(0,N.A)("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),SQ=(0,N.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function EQ(){const e=(0,j.wA)(),n=(0,a.Zp)(),{toast:r}=(0,H.dj)(),[s,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[h,p]=(0,t.useState)([]),[f,v]=(0,t.useState)([]),[g,x]=(0,t.useState)([]),{diagnosisTemplate:y=[],comorbidities:N=[],medicinelist:E=[]}=(0,j.d4)((e=>e.templates)),{doctors:C}=(0,j.d4)((e=>e.staff)),{status:D,error:P,updateStatus:O,updateError:M,copiedData:I,currentDoctorData:F}=(0,j.d4)((e=>e.doctorData));(0,t.useEffect)((()=>{e((0,R.QK)()),e(L())}),[e]),(0,t.useEffect)((()=>{u||(h!==y&&p(y),f!==N&&v(N),g!==E&&x(E))}),[y,u]);const B=(e,t,n,r)=>{e.trim()&&(r([...n,...e.trim().split(",")]),t(""))},W=(e,t,n,r,a,s)=>(0,X.jsxs)("div",{className:"mb-6",children:[(0,X.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-2",children:e}),(0,X.jsxs)("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-2 mb-4",children:[(0,X.jsx)(Vn.p,{placeholder:t,value:n,onChange:e=>r(e.target.value),onKeyPress:e=>"Enter"===e.key&&B(n,r,a,s),className:"w-full sm:flex-grow"}),(0,X.jsxs)(w.$,{onClick:()=>B(n,r,a,s),className:"w-full sm:w-auto whitespace-nowrap",children:[(0,X.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Add"]})]}),(0,X.jsx)(b.F,{className:"flex-grow border rounded-lg p-2 sm:p-4",children:0===a.length?(0,X.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No items added yet."}):(0,X.jsx)("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:a.map(((e,t)=>(0,X.jsxs)("div",{className:"flex items-center bg-gray-100 text-gray-800 px-2 py-1 sm:px-3 sm:py-1.5 rounded text-xs sm:text-sm font-medium transition-colors hover:bg-gray-200 whitespace-nowrap",children:[(0,X.jsx)("span",{className:"mr-1 sm:mr-2",children:e}),(0,X.jsx)("button",{onClick:()=>((e,t,n)=>{n(t.filter((t=>t!==e)))})(e,a,s),className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:(0,X.jsx)(T.A,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]},t)))})})]});return(0,X.jsx)("div",{className:"h-full flex flex-col p-2 sm:p-4",children:(0,X.jsxs)(k.Zp,{className:"flex-grow flex flex-col overflow-hidden",children:[(0,X.jsxs)(k.aR,{className:"flex flex-row items-center justify-between p-4",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>{n(-1)},className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsx)(k.ZB,{className:"text-xl",children:"Customization"})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsxs)(A.l6,{value:u,onValueChange:async t=>{if(m(t),t)try{const n=await e(Nn(t)).unwrap();n&&(p(n.diagnosis||[]),v(n.comorbidities||[]),x(n.medicines||[]))}catch(P){r({title:"Error",description:"Failed to fetch doctor data",variant:"destructive"})}else p(y),v(N),x(E),e(En())},disabled:"loading"===D,children:[(0,X.jsx)(A.bq,{className:"w-[200px]",children:(0,X.jsx)(A.yv,{placeholder:"loading"===D?"Loading...":"Select a doctor (optional)"})}),(0,X.jsx)(A.gC,{children:C.map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.name},e._id)))})]}),(0,X.jsx)(w.$,{variant:"outline",size:"icon",onClick:()=>{if(u)e(Cn());else{e(Cn({diagnosis:h,comorbidities:f,medicines:g}))}r({title:"Success",variant:"success",description:"Customization data copied successfully"})},className:"h-8 w-8",title:"Copy customization",children:(0,X.jsx)(NQ,{className:"h-4 w-4"})}),I&&(0,X.jsx)(w.$,{variant:"outline",size:"icon",onClick:()=>{I&&(p(I.diagnosis),v(I.comorbidities),x(I.medicines),r({title:"Success",variant:"success",description:"Customization data pasted successfully"}))},className:"h-8 w-8",title:"Paste customization",children:(0,X.jsx)(_Q,{className:"h-4 w-4"})}),(0,X.jsxs)(w.$,{onClick:async()=>{try{if(u){await e(jn({doctor:u,medicines:g,diagnosis:h,comorbidities:f,complaints:[]})).unwrap();r({title:"Success",variant:"success",description:"Doctor-specific customization saved successfully"})}else await e((0,R.ub)({diagnosisTemplate:h,comorbidities:f,medicinelist:g})),r({title:"Success",variant:"success",description:"Global templates updated successfully"})}catch(P){console.error("Save error:",P),r({title:"Error",description:M||"Failed to save customization",variant:"destructive"})}},className:"whitespace-nowrap",disabled:"loading"===D||"loading"===O,children:[(0,X.jsx)(SQ,{className:"h-4 w-4 mr-2"}),"loading"===O?"Saving...":"Save Changes"]})]})]}),(0,X.jsx)(k.Wu,{className:"flex-grow flex flex-col p-2 sm:p-4 border-2",children:"loading"===D?(0,X.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,X.jsx)("p",{className:"text-gray-500",children:"Loading doctor data..."})}):(0,X.jsxs)(X.Fragment,{children:[W("Diagnosis Customization","Add new diagnosis like this (Diagnosis1, Diagnosis2) in comma separated form, then add then save changes",s,i,h,p),W("Comorbidities Customization","Add new comorbidities like this (Comorbidites1, Comorbidites2) in comma separated form, then add then save changes",o,l,f,v),W("Medicine List Customization","Add new medicine like this (Medicine1, Medicine2) in comma separated form, then add then save changes",c,d,g,x)]})})]})})}const CQ=(0,Ge.A)("opdProcedure/create",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/opd-procedures`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}})),DQ=(0,Ge.A)("opdProcedure/fetchAll",(async(e,t)=>{let{rejectWithValue:n}=t;try{const e=await fetch(`${M.B8}/api/opd-procedures`,{credentials:"include"});if(!e.ok){return n(await e.json())}return await e.json()}catch(r){return n(r.message)}})),TQ=(0,Ge.A)("opdProcedure/updatePayment",(async(e,t)=>{let{rejectWithValue:n}=t;try{const t=await fetch(`${M.B8}/api/opd-procedures/${e}/payment`,{method:"PATCH",credentials:"include"});if(!t.ok){return n(await t.json())}return await t.json()}catch(r){return n(r.message)}})),kQ=((0,I.Z0)({name:"opdProcedure",initialState:{procedures:[],status:"idle",error:null,createStatus:"idle",updateStatus:"idle"},reducers:{},extraReducers:e=>{e.addCase(CQ.pending,(e=>{e.createStatus="loading"})).addCase(CQ.fulfilled,((e,t)=>{e.createStatus="succeeded",e.procedures.unshift(t.payload)})).addCase(CQ.rejected,((e,t)=>{e.createStatus="failed",e.error=t.payload})).addCase(DQ.pending,(e=>{e.status="loading"})).addCase(DQ.fulfilled,((e,t)=>{e.status="succeeded",e.procedures=t.payload})).addCase(DQ.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(TQ.pending,(e=>{e.updateStatus="loading"})).addCase(TQ.fulfilled,((e,t)=>{e.updateStatus="succeeded";const n=e.procedures.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.procedures[n]=t.payload)})).addCase(TQ.rejected,((e,t)=>{e.updateStatus="failed",e.error=t.payload}))}}).reducer,e=>{let{isOpen:n,setIsOpen:r,procedureData:a}=e;const s=(0,t.useRef)(),[i,o]=(0,t.useState)(!1),l=Zc("(max-width: 640px)"),c=(0,j.d4)((e=>e.hospital.hospitalInfo)),d=(0,j.d4)((e=>e.templates.headerTemplateArray)),u=(null===d||void 0===d?void 0:d.length)>0?d[0].value:Kn.h,m=(0,Gn.G)(u||Kn.h),h=(0,qn.useReactToPrint)({content:()=>s.current,onBeforeGetContent:()=>(o(!0),new Promise((e=>{setTimeout((()=>{o(!1),e()}),0)}))),pageStyle:"\n      @media print {\n        @page {\n          size: A4;\n          margin: 20mm;\n        }\n        body {\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-only {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n        .print-content {\n          position: relative;\n          min-height: 100vh;\n          padding: 20px;\n        }\n      }\n    "});if(!a)return null;const{opdProcedure:p,servicesBill:f,payments:v}=a;return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:"max-w-3xl max-h-[90vh] overflow-visible rounded-lg",children:[(0,X.jsxs)(b.F,{className:"max-h-[80vh]",children:[(0,X.jsxs)("div",{ref:s,className:i?"print-content":"",children:[(0,X.jsx)("div",{className:"hidden print:block mb-2",children:(0,X.jsx)(m,{hospitalInfo:c})}),(0,X.jsxs)("div",{className:"print:pb-6",children:[(0,X.jsx)("div",{className:"no-print",children:(0,X.jsx)(Io.c7,{className:"pb-2",children:(0,X.jsx)(Io.L3,{children:"OPD Procedure Bill"})})}),(0,X.jsxs)("div",{className:"grid gap-2 py-1",children:[(0,X.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Name:"}),(0,X.jsx)("p",{children:p.name||"N/A"})]}),p.registrationNumber&&(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"UHID. No:"}),(0,X.jsx)("p",{children:p.registrationNumber||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Contact:"}),(0,X.jsx)("p",{children:p.contactNumber||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Age/Gender:"}),(0,X.jsx)("p",{children:`${p.age||"N/A"} yrs/${p.gender||"N/A"}`})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Address:"}),(0,X.jsx)("p",{children:p.address||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Procedure:"}),(0,X.jsx)("p",{children:p.procedureName||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Invoice No:"}),(0,X.jsx)("p",{children:f.invoiceNumber||"N/A"})]}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)(Ks.J,{className:"font-semibold mr-2",children:"Date:"}),(0,X.jsx)("p",{children:p.date?(0,Go.GP)(new Date(p.date),"dd/MM/yyyy"):"N/A"})]})]}),(0,X.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,X.jsx)("div",{className:"w-full",children:(0,X.jsxs)(Wo.XI,{className:"border-2 border-gray-200",children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{className:"border-b border-gray-200 bg-gray-200",children:[(0,X.jsx)(Wo.nd,{className:"border-r border-gray-300 w-16",children:"No."}),(0,X.jsx)(Wo.nd,{className:"border-r border-gray-300 w-1/2",children:"Service Name"}),(0,X.jsx)(Wo.nd,{className:"border-r border-gray-300 w-24",children:"Quantity"}),(0,X.jsx)(Wo.nd,{className:"border-r border-gray-300 w-24",children:"Price (INR)"}),(0,X.jsx)(Wo.nd,{className:"w-24",children:"Total (INR)"})]})}),(0,X.jsx)(Wo.BF,{children:f.services.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{className:"border-b border-gray-200",children:[(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200",children:t+1}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200",children:e.name||"N/A"}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200",children:e.quantity||0}),(0,X.jsx)(Wo.nA,{className:"border-r border-gray-200",children:(e.rate||0).toFixed(2)}),(0,X.jsx)(Wo.nA,{children:((e.quantity||0)*(e.rate||0)).toFixed(2)})]},t)))})]})}),(0,X.jsx)("div",{className:"flex justify-end",children:(0,X.jsx)("div",{className:"w-64",children:(0,X.jsxs)("div",{className:"border rounded p-3 space-y-2 bg-white text-sm",children:[(0,X.jsx)("h3",{className:"font-semibold text-base border-b pb-1",children:"Payment Summary"}),(0,X.jsxs)("div",{className:"flex flex-col items-end space-y-0.5",children:[(0,X.jsxs)("div",{className:"flex justify-end w-full items-center",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-3",children:"Sub Total:"}),(0,X.jsxs)("span",{children:["\u20b9",f.subtotal.toFixed(2)]})]}),(0,X.jsxs)("div",{className:"flex justify-end w-full items-center",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-3",children:"Discount:"}),(0,X.jsxs)("span",{children:["\u20b9",(f.additionalDiscount||0).toFixed(2)]})]}),(0,X.jsxs)("div",{className:"flex justify-end w-full items-center border-t border-gray-200 pt-0.5",children:[(0,X.jsx)("span",{className:"font-medium mr-3",children:"Net Total:"}),(0,X.jsxs)("span",{className:"font-medium",children:["\u20b9",f.totalAmount.toFixed(2)]})]}),(0,X.jsxs)("div",{className:"flex justify-end w-full items-center",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-3",children:"Paid:"}),(0,X.jsxs)("span",{className:"text-green-600",children:["\u20b9",f.amountPaid.toFixed(2)]})]}),(0,X.jsxs)("div",{className:"flex justify-end w-full items-center border-t border-gray-200 pt-0.5",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-3",children:"Balance:"}),(0,X.jsxs)("span",{className:"text-red-600",children:["\u20b9",(f.totalAmount-f.amountPaid).toFixed(2)]})]}),(0,X.jsxs)("div",{className:"w-full text-right text-xs mt-0.5",children:[(0,X.jsx)("span",{className:"font-medium",children:"Status: "}),(0,X.jsx)("span",{className:f.amountPaid===f.totalAmount?"text-green-600 font-bold":"text-red-600 font-bold",children:f.amountPaid===f.totalAmount?"Paid":"Due"})]})]})]})})})]}),(0,X.jsxs)("div",{className:"mt-1",children:[(0,X.jsxs)("div",{className:"flex flex-row items-center mb-2 w-auto gap-2",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:"Payment History"}),v&&v.length>0&&(0,X.jsx)(Qo,{payments:v,billData:{patientInfo:p,...f,procedureName:p.procedureName},styleData:!0})]}),v&&v.length>0?(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[80px]",children:"Date"}),!l&&(0,X.jsx)(Wo.nd,{className:"w-[80px]",children:"Time"}),(0,X.jsx)(Wo.nd,{children:"Amount"}),(0,X.jsx)(Wo.nd,{children:"Method"}),(0,X.jsx)(Wo.nd,{className:"no-print",children:"Receipt"})]})}),(0,X.jsx)(Wo.BF,{children:v.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"text-xs",children:new Date(e.createdAt).toLocaleDateString("en-IN")}),!l&&(0,X.jsx)(Wo.nA,{className:"text-xs",children:new Date(e.createdAt).toLocaleTimeString("en-IN",{hour:"numeric",minute:"numeric",hour12:!0})}),(0,X.jsxs)(Wo.nA,{className:"text-xs font-medium",children:["\u20b9",e.amount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,X.jsx)(Wo.nA,{className:"text-xs",children:e.paymentMethod}),(0,X.jsx)(Wo.nA,{className:"text-xs no-print",children:(0,X.jsx)(Qo,{payment:e,billData:{patientInfo:p,...f,procedureName:p.procedureName}})})]},t)))})]})}):(0,X.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-500 py-4",children:[(0,X.jsx)(Jo,{size:18}),(0,X.jsx)("span",{children:"No payment history found"})]})]})]})]})]}),(0,X.jsxs)("div",{className:"flex flex-col-reverse gap-1 sm:flex-row sm:space-y-0 sm:space-x-2 mt-4 justify-end",children:[(0,X.jsx)(w.$,{type:"button",variant:"secondary",onClick:()=>r(!1),children:"Close"}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",onClick:h,children:[(0,X.jsx)(Xn.A,{className:"mr-2 h-4 w-4"}),"Print Bill"]})]})]}),(0,X.jsxs)("button",{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",onClick:()=>r(!1),children:[(0,X.jsx)(T.A,{className:"h-4 w-4"}),(0,X.jsx)("span",{className:"sr-only",children:"Close"})]})]})})}),AQ=e=>{let{open:n,onOpenChange:r,initialPatientData:a}=e;const s={name:"",registrationNumber:"",ipdNumber:"",gender:"",age:"",contactNumber:"",procedureName:"",totalAmount:"",amountPaid:"",paymentMethod:[],address:""},[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(s),[m,h]=(0,t.useState)({}),p=(0,j.wA)(),f=(0,j.d4)((e=>e.services.services)),v=(0,t.useMemo)((()=>{var e;return null===f||void 0===f||null===(e=f.filter((e=>"OPD Procedure"===e.category)))||void 0===e?void 0:e.map((e=>({name:`${e.name} - \u20b9${e.amount}`,...e})))}),[f]);(0,t.useEffect)((()=>{n&&a?u((e=>({...e,name:a.name||"",registrationNumber:a.registrationNumber||"",gender:a.gender||"",age:a.age||"",contactNumber:a.contactNumber||"",address:a.address?"string"===typeof a.address?a.address:`${a.address.street||""}, ${a.address.city||""}, ${a.address.state||""}, ${a.address.postalCode||""}`.replace(/(, )+$/,""):"",procedureName:a.procedureName||"",totalAmount:a.totalAmount||""}))):n||(u(s),h({}))}),[n,a]);const g=e=>{const{name:t,value:n}=e.target;u({...d,[t]:n})};(0,t.useEffect)((()=>{u((e=>({...e,amountPaid:e.paymentMethod.reduce(((e,t)=>e+(t.amount?parseFloat(t.amount):0)),0)})))}),[d.paymentMethod]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Io.lG,{open:n,onOpenChange:e=>{e||(u(s),h({})),r(e)},children:(0,X.jsxs)(Io.Cf,{onInteractOutside:e=>e.preventDefault(),className:"sm:max-w-[700px] w-[95%] max-h-[90vh] overflow-y-auto",children:[(0,X.jsx)(Io.c7,{children:(0,X.jsx)(Io.L3,{className:"text-xl sm:text-2xl font-bold text-center",children:"Register OPD Procedure"})}),(0,X.jsxs)("form",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,X.jsx)("div",{children:(0,X.jsx)(Nl,{id:"name",name:"name",label:"Patient Name",value:d.name,onChange:g,error:m.name})}),(0,X.jsx)("div",{className:"space-y-2",children:(0,X.jsx)(Gs.A,{suggestions:v,placeholder:"Select procedure",value:d.procedureName,setValue:e=>u((t=>({...t,procedureName:e}))),onSuggestionSelect:e=>{u({...d,procedureName:e.name,totalAmount:e.rate})}})}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsx)("div",{className:"col-span-1",children:(0,X.jsxs)(A.l6,{value:d.gender,onValueChange:e=>{u({...d,gender:e})},children:[(0,X.jsx)(A.bq,{className:"w-full h-9",children:(0,X.jsx)(A.yv,{placeholder:"Select Gender"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Male",children:"Male"}),(0,X.jsx)(A.eb,{value:"Female",children:"Female"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]})]})}),(0,X.jsx)("div",{className:"col-span-1",children:(0,X.jsx)(Nl,{id:"age",name:"age",type:"text",label:"Age",value:d.age,onChange:g,error:m.age})})]}),(0,X.jsx)("div",{children:(0,X.jsx)(Xo.T,{id:"address",name:"address",value:d.address,onChange:g,placeholder:"Address",className:"min-h-9 h-9 no-scrollbar"})}),(0,X.jsx)("div",{children:(0,X.jsx)(Nl,{id:"contactNumber",name:"contactNumber",label:"Contact Number",value:d.contactNumber,onChange:g,error:m.contactNumber})}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Nl,{id:"registrationNumber",name:"registrationNumber",label:"UHID No",value:d.registrationNumber,onChange:g}),(0,X.jsx)("button",{type:"button",onClick:async()=>{if(d.registrationNumber)try{var e,t,n;const s=await p((0,Be.bW)({searchQuery:d.registrationNumber.trim()})).unwrap();if(null!==(e=s.results)&&void 0!==e&&e.patients&&(null===(t=s.results)||void 0===t||null===(n=t.patients)||void 0===n?void 0:n.length)>0){var r,a;const e=null===(r=s.results)||void 0===r||null===(a=r.patients)||void 0===a?void 0:a[0];u({...d,name:e.name,gender:e.gender,age:e.age,contactNumber:e.contactNumber,address:e.address||""})}else(0,H.oR)({title:"Not Found",description:"No patient found with this registration number",variant:"destructive"})}catch(s){(0,H.oR)({title:"Error",description:"Failed to fetch patient details",variant:"destructive"})}},className:"absolute right-2 top-[50%] transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:(0,X.jsx)(oo.A,{className:"h-4 w-4"})})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Nl,{id:"totalAmount",name:"totalAmount",label:"Total Amount",value:d.totalAmount,onChange:g,error:m.totalAmount,className:"w-full"}),(0,X.jsxs)("div",{className:d.paymentMethod.length>0?`grid grid-cols-${1===d.paymentMethod.length?"2":"3"} gap-2`:"grid grid-cols-2 gap-2",children:[(0,X.jsx)("div",{children:(0,X.jsx)(Zo.A,{suggestions:[{name:"Cash"},{name:"UPI"},{name:"Card"},{name:"Insurance"}],placeholder:d.paymentMethod.length>0?d.paymentMethod.map((e=>e.method)).join(","):"Payment Method",selectedValues:d.paymentMethod.map((e=>({name:e.method}))),setSelectedValues:e=>{u((t=>{const n=t.paymentMethod.reduce(((e,t)=>(e[t.method]=t.amount,e)),{}),r=e.map((e=>({method:e.name,amount:n[e.name]||""})));return{...t,paymentMethod:r}}))},onError:!!m.paymentMethod})}),d.paymentMethod.length>0?d.paymentMethod.map((e=>(0,X.jsx)(Nl,{id:`payment-${e.method}`,label:`${e.method} Paid`,value:e.amount,onChange:t=>{return n=e.method,r=t.target.value,void u((e=>({...e,paymentMethod:e.paymentMethod.map((e=>e.method===n?{...e,amount:r}:e)),amountPaid:e.paymentMethod.reduce(((e,t)=>e+(t.amount?parseFloat(t.amount):0)),0)})));var n,r},className:"bg-gray-50",error:m.amountPaid},e.method))):(0,X.jsx)(Nl,{id:"paymentpaiddisabled",label:"Amount Paid",disabled:!0,className:"bg-gray-50 disabled",error:m.amountPaid})]})]})]}),(0,X.jsx)("div",{className:"flex justify-end mt-4",children:(0,X.jsx)(w.$,{onClick:async e=>{if(e.preventDefault(),(()=>{const e={};return d.name||(e.name="Required"),d.age||(e.age="Required"),d.gender||(e.gender="Required"),d.contactNumber||(e.contactNumber="Required"),d.procedureName||(e.procedureName="Required"),d.totalAmount||(e.totalAmount="Required"),d.amountPaid||0===d.paymentMethod.length||(e.amountPaid="Required"),0===d.paymentMethod.length&&(e.paymentMethod="Required"),h(e),0===Object.keys(e).length})())try{p(CQ(d)).unwrap().then((e=>{(0,H.oR)({title:"Success",description:"OPD Procedure registered successfully",variant:"success"}),c(e),o(!0),u(s),r(!1)})).catch((e=>{(0,H.oR)({title:"Error",description:"Failed to register OPD procedure",variant:"destructive"})}))}catch(t){(0,H.oR)({title:"Error",description:"Failed to register OPD procedure",variant:"destructive"})}},className:"w-full sm:w-auto",children:"Submit"})})]})}),i&&l&&(0,X.jsx)(kQ,{isOpen:i,setIsOpen:o,procedureData:l})]})};function PQ(){var e,n,r;const s=(0,a.zy)(),i=(0,a.Zp)(),o=(null===(e=s.state)||void 0===e?void 0:e.searchResults)||{},l=o.patients||[],c=o.totalPatients||0,d=o.currentPage||1,u=o.totalPages||1,m=(null===(n=s.state)||void 0===n?void 0:n.searchQuery)||"",[h,p]=(0,t.useState)(null),[f,v]=(0,t.useState)(!1),[g,x]=(0,t.useState)(null),[y,b]=(0,t.useState)(!1),[N,_]=(0,t.useState)(!1),[S,E]=(0,t.useState)(null),C=(0,j.wA)(),D=Zc("(max-width: 640px)");Zc("(max-width: 1024px)");(0,t.useEffect)((()=>{1===l.length?p(l[0]):p(null)}),[l]);const T=async e=>{if(e>=1&&e<=u&&m)try{const t=10,n=await C((0,Be.bW)({searchQuery:m.trim(),page:e,limit:t}));if(Be.bW.fulfilled.match(n)){const{results:e}=n.payload;i(s.pathname,{state:{searchResults:e,searchQuery:m}})}else console.error("Failed to fetch new page:",n.payload||n.error)}catch(t){console.error("Error dispatching searchPatients:",t)}},A=[{name:"View / Edit",icon:ei,action:()=>i(`/patient-overview/${h._id}`)},{name:"OPD Follow Up",icon:ux,action:()=>{x({name:h.name,age:h.age,gender:h.gender,contactNumber:h.contactNumber,registrationNumber:h.registrationNumber,_id:h._id}),v(!0)}},{name:"IPD",icon:mi,action:()=>b(!0)},{name:"OPD Procedure",icon:ny,action:()=>{E({name:h.name,registrationNumber:h.registrationNumber,gender:h.gender,age:h.age,contactNumber:h.contactNumber,address:h.address,_id:h._id}),_(!0)}}],P=e=>{if(e.lastVisit)return(0,Go.GP)(YB(e.lastVisit),"dd-MM-yyyy");const t=[...(e.visits||[]).map((e=>YB(e.bookingDate))),...(e.admissionDetails||[]).map((e=>YB(e.bookingDate)))];return t.length>0?(0,Go.GP)(new Date(Math.max(...t)),"dd-MM-yyyy"):"-"},O=e=>{let{patient:t}=e;return(0,X.jsx)(k.Zp,{className:"mb-4 hover:shadow-md transition-shadow",children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsx)("h3",{className:"text-lg font-semibold capitalize mr-2",children:t.name})}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",size:"sm",children:["Actions ",(0,X.jsx)(lo,{className:"h-4 w-4 ml-2"})]})}),(0,X.jsx)(Ws,{align:"end",children:A.map((e=>(0,X.jsx)($s,{onSelect:()=>e.action(t),children:e.name},e.name)))})]})]}),(0,X.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Reg: ",t.registrationNumber]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,X.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last Visit:"}),(0,X.jsx)("p",{className:"text-sm font-medium",children:P(t)})]}),t.lastVisitType&&(0,X.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Visit Type:"}),(0,X.jsx)("p",{className:"text-sm font-medium",children:t.lastVisitType})]}),(0,X.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Age:"}),(0,X.jsx)("p",{className:"text-sm font-medium",children:t.age})]}),(0,X.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Mobile:"}),(0,X.jsx)("p",{className:"text-sm font-medium",children:t.contactNumber})]}),(0,X.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Gender:"}),(0,X.jsx)("p",{className:"text-sm font-medium",children:t.gender})]})]})]})})})};return(0,X.jsxs)(k.Zp,{className:"w-full",children:[(0,X.jsxs)(k.aR,{className:"flex flex-row items-center justify-between",children:[(0,X.jsxs)("div",{children:[(0,X.jsxs)(k.ZB,{children:["Search Results for: ",m]}),(0,X.jsxs)(k.BT,{children:["Displaying ",l.length," of ",c," Registered patients found. Page ",d," of ",u,"."]})]}),l.length>0&&u>1&&(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(w.$,{onClick:()=>T(d-1),disabled:d<=1,variant:"outline",children:"Previous"}),(0,X.jsxs)("span",{className:"text-sm",children:["Page ",d," of ",u]}),(0,X.jsx)(w.$,{onClick:()=>T(d+1),disabled:d>=u,variant:"outline",children:"Next"})]})]}),(0,X.jsxs)(k.Wu,{children:[0===l.length?(0,X.jsxs)("div",{className:"text-center py-8",children:[(0,X.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No patients found"}),(0,X.jsx)("p",{className:"text-muted-foreground mb-4",children:"Try searching with a different query"})]}):(0,X.jsxs)(X.Fragment,{children:[D?(0,X.jsx)("div",{children:l.map((e=>(0,X.jsx)(O,{patient:e},e._id)))}):(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"S No."}),(0,X.jsx)(Wo.nd,{children:"Patient Name"}),(0,X.jsx)(Wo.nd,{children:"Registration Number"}),(0,X.jsx)(Wo.nd,{children:"Last Visit"}),(0,X.jsx)(Wo.nd,{children:"Last Visit Type"}),(0,X.jsx)(Wo.nd,{children:"Address"}),(0,X.jsx)(Wo.nd,{children:"Age"}),(0,X.jsx)(Wo.nd,{children:"Gender"}),(0,X.jsx)(Wo.nd,{children:"Mobile Number"}),(0,X.jsx)(Wo.nd,{children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:l.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{className:"cursor-pointer "+((null===h||void 0===h?void 0:h._id)===e._id?"bg-blue-100 hover:bg-blue-200":"hover:bg-gray-100"),onClick:()=>p(e),children:[(0,X.jsx)(Wo.nA,{children:t+1}),(0,X.jsx)(Wo.nA,{className:"font-medium",children:e.name}),(0,X.jsx)(Wo.nA,{children:e.registrationNumber}),(0,X.jsx)(Wo.nA,{children:P(e)}),(0,X.jsx)(Wo.nA,{children:e.lastVisitType||"-"}),(0,X.jsx)(Wo.nA,{children:e.address||"-"}),(0,X.jsx)(Wo.nA,{children:e.age}),(0,X.jsx)(Wo.nA,{children:e.gender}),(0,X.jsx)(Wo.nA,{children:e.contactNumber}),(0,X.jsx)(Wo.nA,{children:(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,X.jsx)(lo,{className:"h-4 w-4"})})}),(0,X.jsx)(Ws,{align:"end",children:A.map((t=>(0,X.jsx)($s,{onSelect:()=>t.action(e),children:t.name},t.name)))})]})})]},e._id)))})]})}),h&&!D&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(k.Zp,{className:"mt-4",children:(0,X.jsxs)(k.Wu,{className:"flex items-center justify-between p-4",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsxs)(Co,{className:"h-12 w-12 mr-4",children:[(0,X.jsx)(Do,{src:`https://api.dicebear.com/6.x/initials/svg?seed=${h.name}`,alt:h.name}),(0,X.jsx)(To,{children:h.name.charAt(0)})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h2",{className:"font-semibold",children:h.name}),(0,X.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,X.jsx)(Yo.E,{variant:"outline",children:h.gender}),(0,X.jsxs)(Yo.E,{variant:"outline",children:[h.age," years"]}),h.bloodGroup&&(0,X.jsx)(Yo.E,{variant:"outline",children:h.bloodGroup})]})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(iQ,{className:"w-4 h-4 text-gray-400"}),(0,X.jsx)("span",{children:(0,Go.GP)(new Date(h.createdAt),"MMM dd, hh:mm a")})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(lx,{className:"w-4 h-4 text-gray-400"}),(0,X.jsx)("span",{children:h.contactNumber})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(Hx,{className:"w-4 h-4 text-gray-400"}),(0,X.jsxs)("span",{children:["Reg:",h.registrationNumber]})]}),(null===(r=h.address)||void 0===r?void 0:r.city)&&(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(cx,{className:"w-4 h-4 text-gray-400"}),(0,X.jsx)("span",{children:h.address.city})]})]})]})}),(0,X.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:A.map((e=>(0,X.jsxs)(w.$,{variant:"outline",className:"flex items-center justify-start space-x-2 h-16",onClick:()=>e.action(h),children:[(0,X.jsx)(e.icon,{className:"w-6 h-6"}),(0,X.jsx)("span",{children:e.name})]},e.name)))})]})]}),(0,X.jsx)(Sx,{open:f,onOpenChange:v,patientData:g}),(0,X.jsx)(Dx,{open:y,onOpenChange:b,patientData:h}),(0,X.jsx)(AQ,{open:N,onOpenChange:_,initialPatientData:S})]})]})}function OQ(){var e;const{patientId:n}=(0,a.g)(),r=(0,a.zy)(),s=(0,a.Zp)(),i=(0,j.wA)(),o=null===(e=r.state)||void 0===e?void 0:e.patient,[l,c]=(0,t.useState)([]),[d,u]=(0,t.useState)({name:"",quantity:1,rate:"",total:""}),[m,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(""),{services:v,servicesStatus:g}=(0,j.d4)((e=>e.services)),{createOPDProcedureBillStatus:x}=(0,j.d4)((e=>e.bills));(0,t.useEffect)((()=>{"idle"===g&&i(lt())}),[i,g]),(0,t.useEffect)((()=>{}),[o,n]);const y=e=>{c(l.filter((t=>t.id!==e)))},N=e=>{const t=l.find((t=>t.id===e));t&&(u({name:t.name,quantity:t.quantity,rate:t.rate,total:t.total}),f(t.name),c((t=>t.filter((t=>t.id!==e)))))},_=(0,t.useMemo)((()=>{const e=l.reduce(((e,t)=>e+t.total),0);return{subtotal:e,totalAmount:e}}),[l]);return o?(0,X.jsxs)("div",{className:"w-full mx-auto p-2 space-y-4",children:[(0,X.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>{s(-1)},children:[(0,X.jsx)(Uo.A,{className:"mr-2"}),(0,X.jsx)("h1",{className:"text-lg font-bold",children:"Add OPD Procedure"})]}),(0,X.jsx)(k.Zp,{children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center mb-4 md:mb-0",children:[(0,X.jsxs)(Co,{className:"h-12 w-12 mr-4",children:[(0,X.jsx)(Do,{src:`https://api.dicebear.com/6.x/initials/svg?seed=${o.name}`,alt:o.name}),(0,X.jsx)(To,{children:o.name.charAt(0)})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h2",{className:"font-semibold",children:o.name}),(0,X.jsxs)("div",{className:"flex flex-wrap gap-2 mt-1",children:[(0,X.jsx)(Yo.E,{variant:"outline",children:o.gender}),(0,X.jsxs)(Yo.E,{variant:"outline",children:[o.age," yrs"]}),o.bloodGroup&&(0,X.jsx)(Yo.E,{variant:"outline",children:o.bloodGroup})]})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(iQ,{className:"w-4 h-4 text-gray-400"}),(0,X.jsx)("span",{children:o.registrationNumber})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(lx,{className:"w-4 h-4 text-gray-400"}),(0,X.jsx)("span",{children:o.contactNumber})]})]})]})})}),(0,X.jsx)(k.Zp,{children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.name&&d.rate>0&&(c([...l,{...d,id:Date.now(),total:d.total}]),u({name:"",quantity:1,rate:0,total:0}),f(""))},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 items-end mb-4",children:[(0,X.jsxs)("div",{className:"col-span-full sm:col-span-1 md:col-span-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"serviceName",children:"Service Name"}),(0,X.jsx)(Gs.P,{suggestions:v,placeholder:"Enter service name",value:p,setValue:f,onSuggestionSelect:e=>{u((t=>({...t,name:e.name,rate:e.rate,total:e.rate*t.quantity})))}})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"quantity",className:"hidden sm:block",children:"Quantity *"}),(0,X.jsx)(Vn.p,{type:"number",id:"quantity",value:d.quantity,onChange:e=>{const t=parseInt(e.target.value)||0;u((e=>({...e,quantity:t,total:t*e.rate})))},placeholder:"Qty *",required:!0,min:"1"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"rate",className:"hidden sm:block",children:"Rate"}),(0,X.jsx)(Vn.p,{type:"number",id:"rate",value:d.rate,onChange:e=>{const t=parseFloat(e.target.value)||0;u((e=>({...e,rate:t,total:e.quantity*t})))},placeholder:"Rate",required:!0,min:"0",step:"1"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"total",className:"hidden sm:block",children:"Total"}),(0,X.jsx)(Vn.p,{type:"number",id:"total",value:d.total,onChange:e=>{const t=parseFloat(e.target.value)||0;u((e=>({...e,total:t})))},placeholder:"Total",step:"1"})]}),(0,X.jsxs)("div",{className:"col-span-full sm:col-span-1 flex items-center justify-center mt-2 sm:mt-0",children:[(0,X.jsxs)(w.$,{type:"submit",variant:"outline",size:"sm",className:"h-8 w-full sm:w-auto sm:px-3 mr-2",children:[(0,X.jsx)(S.A,{className:"h-4 w-4 mr-2"}),(0,X.jsx)("span",{children:"Add"})]}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",size:"sm",className:"h-8 w-full sm:w-8 sm:p-0",onClick:()=>u({name:"",quantity:1,rate:"",total:""}),children:[(0,X.jsx)(C.A,{className:"h-4 w-4 sm:inline"}),(0,X.jsx)("span",{className:"sm:hidden",children:"Clear"})]})]})]}),(0,X.jsx)(Mo,{className:"my-2"}),(0,X.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Added Services"}),l.length>0?(0,X.jsx)("div",{className:"sm:hidden",children:l.map((e=>(0,X.jsx)(k.Zp,{className:"mb-2",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsx)("span",{className:"font-semibold",children:e.name}),(0,X.jsxs)("div",{children:[(0,X.jsx)(w.$,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 mr-2",onClick:()=>N(e.id),children:(0,X.jsx)(Py,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>y(e.id),children:(0,X.jsx)(C.A,{className:"h-4 w-4"})})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,X.jsxs)("div",{children:["Quantity: ",e.quantity]}),(0,X.jsxs)("div",{children:["Rate: \u20b9",e.rate.toLocaleString("en-IN")]}),(0,X.jsxs)("div",{className:"col-span-2 font-semibold",children:["Total: \u20b9",e.total.toLocaleString("en-IN")]})]})]})},e.id)))}):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center h-[200px] text-gray-500",children:[(0,X.jsx)(Jo,{className:"w-12 h-12 mb-2"}),(0,X.jsx)("p",{children:"No services added yet. Please add a service above."})]}),(0,X.jsx)("div",{className:"hidden sm:block",children:(0,X.jsx)(b.F,{className:"h-[300px] w-full",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[50px]",children:"#"}),(0,X.jsx)(Wo.nd,{children:"Service"}),(0,X.jsx)(Wo.nd,{children:"Quantity"}),(0,X.jsx)(Wo.nd,{children:"Rate"}),(0,X.jsx)(Wo.nd,{children:"Total"}),(0,X.jsx)(Wo.nd,{className:"text-right",children:"Action"})]})}),(0,X.jsx)(Wo.BF,{children:l.map(((e,t)=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:t+1}),(0,X.jsx)(Wo.nA,{children:e.name}),(0,X.jsx)(Wo.nA,{children:e.quantity}),(0,X.jsx)(Wo.nA,{children:e.rate.toLocaleString("en-IN")}),(0,X.jsx)(Wo.nA,{children:e.total.toLocaleString("en-IN")}),(0,X.jsx)(Wo.nA,{className:"text-right",children:(0,X.jsxs)("div",{children:[(0,X.jsx)(w.$,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 mr-2",onClick:()=>N(e.id),children:(0,X.jsx)(Py,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>y(e.id),children:(0,X.jsx)(C.A,{className:"h-4 w-4"})})]})})]},e.id)))})]})})})]})}),(0,X.jsx)(k.Zp,{children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsx)("div",{className:"flex md:flex-row justify-between items-start md:items-center",children:(0,X.jsxs)("div",{className:"flex flex-col items-start md:items-end",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(Ks.J,{children:"Subtotal:"}),(0,X.jsxs)("span",{children:["\u20b9",_.subtotal.toLocaleString("en-IN")]})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(Ks.J,{children:"Total:"}),(0,X.jsxs)("span",{className:"text-xl font-bold",children:["\u20b9",_.totalAmount.toLocaleString("en-IN")]})]})]})})})}),(0,X.jsx)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-4 mt-4",children:(0,X.jsxs)("div",{className:"flex w-full sm:w-auto",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>c([]),disabled:m,className:"w-1/2 sm:w-auto mr-2 sm:mr-0",children:"Reset"}),(0,X.jsx)(w.$,{onClick:async e=>{e.preventDefault(),h(!0);const t={services:l.map((e=>({name:e.name,quantity:e.quantity,rate:e.rate,total:e.total}))),totalAmount:_.totalAmount,subtotal:_.subtotal,patient:n,patientInfo:{name:o.name,phone:o.contactNumber}};try{const e=await i(xt(t));xt.fulfilled.match(e)?(c([]),s("/billings")):xt.rejected.match(e)&&console.error("Failed to create OPD Procedure bill:",e.error)}catch(r){console.error("An error occurred:",r)}finally{h(!1)}},disabled:"loading"===x,className:"w-1/2 sm:w-auto",children:"loading"===x?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Bill"})]})})]}):(0,X.jsx)("div",{children:"Loading..."})}const RQ=(0,N.A)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),MQ=(0,N.A)("TestTubeDiagonal",[["path",{d:"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01a2.83 2.83 0 0 1 0-4L17 3",key:"1ub6xw"}],["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"M12 16H4",key:"1cjfip"}]]),IQ=(0,N.A)("DoorClosed",[["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}],["path",{d:"M14 12v.01",key:"xfcn54"}]]),LQ=(0,N.A)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),FQ=(0,N.A)("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]),BQ=()=>{const[e,n]=(0,t.useState)(!1),[r,s]=(0,t.useState)(!1),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),d=(0,j.wA)(),u=(0,j.d4)((e=>e.patients.todaysPatientList)),{departments:m,status:h}=(0,j.d4)((e=>e.departments)),p=(0,j.d4)((e=>e.hospital.hospitalInfo)),f=(0,t.useMemo)((()=>0!==m.length&&(null===m||void 0===m?void 0:m.some((e=>e.name.toLowerCase().includes("obstetrics"))))),[m]);(0,t.useEffect)((()=>{"idle"===h&&d(We())}),[m]),(0,t.useEffect)((()=>{d((0,Be.PP)({startDate:(new Date).toLocaleDateString("en-In").split("/").reverse().join("-")}))}),[]);const v=(0,a.Zp)(),g=u.filter((e=>"OPD"===e.type)),x=u.filter((e=>"IPD"===e.type)),y=[{title:"Today's Patients",description:`OPD: ${g.length} | IPD: ${x.length}`,icon:ri,action:()=>v("/patients"),color:"bg-amber-200 text-amber-800 hover:bg-amber-300"},{title:"Book OPD",description:"Register a new OPD patient",icon:ux,action:()=>{(null===p||void 0===p?void 0:p.discontinuedDaysLeft)<0?c(!0):n(!0)},color:"bg-blue-200 text-blue-800 hover:bg-blue-300"},{title:"Book IPD",description:"Register a new IPD patient",icon:mi,action:()=>{(null===p||void 0===p?void 0:p.discontinuedDaysLeft)<0?c(!0):s(!0)},color:"bg-green-200 text-green-800 hover:bg-green-300"},{title:"OPD Procedure",description:"Register new OPD procedure",icon:ny,action:()=>o(!0),color:"bg-purple-200 text-purple-800 hover:bg-purple-300"},{title:"Patient List",description:"View and manage all patients",icon:ri,action:()=>v("/patients"),color:"bg-pink-200 text-pink-800 hover:bg-pink-300"},{title:"Admitted Patients",description:"View and discharge admitted patients",icon:mi,action:()=>v("/patients/admitted"),color:"bg-yellow-200 text-yellow-800 hover:bg-yellow-300"},{title:"Billings/Invoices",description:"Manage patient bills and payments",icon:RQ,action:()=>v("/billings"),color:"bg-red-200 text-red-800 hover:bg-red-300"},{title:"Doctor's Section",description:"For filling diagnosis, medications etc ...",icon:ci,action:()=>v("/doctors"),color:"bg-indigo-200 text-indigo-800 hover:bg-indigo-300"},{title:"Pharmacy",description:"Manage medicines and sales",icon:di,action:()=>v("/pharmacy/sales"),color:"bg-emerald-200 text-emerald-800 hover:bg-emerald-300"},{title:"Laboratory",description:"Manage lab tests and reports",icon:MQ,action:()=>v("/lab/list"),color:"bg-orange-200 text-orange-800 hover:bg-orange-300"},{title:"Rooms",description:"Manage hospital rooms and beds",icon:IQ,action:()=>v("/rooms"),color:"bg-cyan-200 text-cyan-800 hover:bg-cyan-300"},{title:"Services",description:"Manage hospital services",icon:LQ,action:()=>v("/services"),color:"bg-violet-200 text-violet-800 hover:bg-violet-300"},{title:"Expenses/Debit",description:"Track and manage expenses",icon:jc,action:()=>v("/expenses"),color:"bg-rose-200 text-rose-800 hover:bg-rose-300"},{title:"Payments",description:"View and manage all payments",icon:LQ,action:()=>v("/payments"),color:"bg-lime-200 text-lime-800 hover:bg-lime-300"},{title:"Statistics",description:"View hospital statistics and reports",icon:si,action:()=>v("/statistics"),color:"bg-teal-200 text-teal-800 hover:bg-teal-300"},{title:"Settings",description:"Configure hospital settings",icon:pi.A,action:()=>v("/settings"),color:"bg-gray-200 text-gray-800 hover:bg-gray-300"}];return f&&y.push({title:"Baby Record",description:"View and Manage all babies",icon:FQ,action:()=>v("/patients/babies"),color:"bg-pink-300 text-gray-800 hover:bg-pink-400"}),(0,X.jsxs)("div",{className:"p-4 space-y-6",children:[(0,X.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(((e,t)=>(0,X.jsx)(k.Zp,{className:`cursor-pointer transition-all duration-300 hover:shadow-lg ${e.color}`,onClick:e.action,children:(0,X.jsx)(k.Wu,{className:"p-6",children:(0,X.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,X.jsx)("div",{className:"p-3 rounded-full bg-white",children:(0,X.jsx)(e.icon,{className:"h-6 w-6"})}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h2",{className:"text-lg font-semibold",children:e.title}),(0,X.jsx)("p",{className:"text-sm opacity-90 "+(0===t?"font-semibold":""),children:e.description})]})]})})},t)))}),(0,X.jsx)(Sx,{open:e,onOpenChange:n}),(0,X.jsx)(Dx,{open:r,onOpenChange:s}),(0,X.jsx)(AQ,{open:i,onOpenChange:o}),(0,X.jsx)(Lo,{isOpen:l,setIsOpen:c})]})};function WQ(){var e,n,r;const{patientId:s}=(0,a.g)(),i=(0,a.Zp)(),o=(0,a.zy)(),l=(0,j.wA)(),{toast:c}=(0,H.dj)(),[d,u]=(0,t.useState)("visits"),{patientDetailsStatus:m}=(0,j.d4)((e=>e.patients)),[h,p]=(0,t.useState)(null),[f,v]=(0,t.useState)(null),[g,x]=(0,t.useState)(null),[y,b]=(0,t.useState)(!1);(0,t.useEffect)((()=>{l((0,Be.uZ)(s)).unwrap().then((e=>{p(e);let t=[...e.visits,...e.admissionDetails];if(t=t.sort(((e,t)=>new Date(t.bookingDate)-new Date(e.bookingDate))),t.length>0){const e=t.find((e=>{var t;return e._id===(null===o||void 0===o||null===(t=o.state)||void 0===t?void 0:t.ID)}))||t[0];v(e)}})).catch((e=>{c({title:"Error",description:"Error fetching patient details",variant:"destructive"})}))}),[l,s,null===o||void 0===o||null===(e=o.state)||void 0===e?void 0:e.ID]),(0,t.useEffect)((()=>{var e,t;(null===f||void 0===f||null===(e=f.bills)||void 0===e||null===(t=e.services)||void 0===t?void 0:t.length)>0?x({billId:f.bills.services[0]._id,billData:f.bills}):x(null)}),[f]);if((0,t.useEffect)((()=>{var e;null!==(e=o.state)&&void 0!==e&&e.activeTab&&u(o.state.activeTab)}),[o.state]),"loading"===m)return(0,X.jsx)("div",{children:"Loading..."});return(0,X.jsx)(k.Zp,{className:"min-h-screen border-none",children:(0,X.jsxs)(yl,{value:d,className:"w-full",onValueChange:e=>{u(e),"payments"===e&&null!==g&&void 0!==g&&g.billData&&b(!0)},children:[(0,X.jsx)("div",{className:"border-b bg-white sticky top-0 z-10 shadow-sm",children:(0,X.jsx)("div",{className:"container mx-auto px-4",children:(0,X.jsxs)("div",{className:"flex items-center h-10",children:[(0,X.jsxs)("button",{className:"flex items-center gap-2 hover:text-primary transition-colors mr-8",onClick:()=>i("/patients"),children:[(0,X.jsx)(Uo.A,{className:"h-4 w-4"}),(0,X.jsx)("span",{className:"text-sm font-medium",children:"Back"})]}),(0,X.jsxs)(bl,{className:"h-9 bg-muted/50",children:[(0,X.jsx)(jl,{value:"visits",className:"text-sm px-4 data-[state=active]:bg-background",children:"Visit History"}),(0,X.jsx)(jl,{value:"bills",className:"text-sm px-4 data-[state=active]:bg-background",children:"Bills"}),(0,X.jsx)(jl,{value:"payments",className:"text-sm px-4 data-[state=active]:bg-background",children:"Payments"})]})]})})}),(0,X.jsxs)("div",{className:"container mx-auto px-4 ",children:[(0,X.jsx)(wl,{value:"visits",className:"m-0",children:(0,X.jsx)(Gx,{patientData:h,selectedVisit:f,onVisitSelect:e=>{v(e)}})}),(0,X.jsx)(wl,{value:"bills",className:"m-0",children:g?(0,X.jsx)(oQ,{initialBillId:g.billId,initialBillData:g.billData,patientData:h,isEmbedded:!0}):(0,X.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No bills found for this patient"})}),(0,X.jsx)(wl,{value:"payments",className:"m-0",children:null!==g&&void 0!==g&&g.billData?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("div",{className:"text-center py-8 text-gray-500",children:["Click here to manage payments",(0,X.jsx)(w.$,{variant:"outline",className:"ml-2",onClick:()=>{b(!0)},children:"Open Payment Dialog"})]}),(0,X.jsx)(td,{isOpen:y,setIsOpen:b,billData:null===g||void 0===g||null===(n=g.billData)||void 0===n||null===(r=n.services)||void 0===r?void 0:r[0]})]}):(0,X.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No bills found for this patient"})})]})]})})}function $Q(){const{toast:e}=(0,H.dj)(),n=(0,j.wA)(),r=(0,a.Zp)(),{admittedPatientsStatus:s}=(0,j.d4)((e=>e.patients)),[i,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(null),[v,g]=(0,t.useState)(!1),x=(0,j.d4)((e=>e.templates.dischargeFormTemplateArray)),y=(0,j.d4)((e=>e.templates.dischargeFormTemplates));(0,t.useEffect)((()=>{n((0,Be.NJ)()).unwrap().then((e=>{o(e)}))}),[]);const N=e=>"Discharged"===e.status&&e.formConfig?[e.formConfig]:(null===x||void 0===x?void 0:x.filter((t=>{var n,r;const a=t.isDefault,s=(null===(n=t.associatedDoctors)||void 0===n?void 0:n.map((e=>{var t;return null===(t=e._id)||void 0===t?void 0:t.toString()})))||[],i=null===(r=e.assignedDoctor._id)||void 0===r?void 0:r.toString();return a||s.includes(i)})))||[],_=(e,t,n)=>{const a=N(t),s=n?null===a||void 0===a?void 0:a.find((e=>e._id===n)):(null===a||void 0===a?void 0:a[0])||y;r(`/patients/discharge/${e}`,{state:{ignoreList:!0,dischargeData:t,selectedTemplate:s||null}})},E=e=>{var t,n;c({patientData:{_id:e._id,name:e.patient.name,registrationNumber:e.patient.registrationNumber,ipdNumber:e.ipdNumber,age:e.patient.age,gender:e.patient.gender,contactNumber:e.patient.contactNumber,address:e.patient.address,bookingDate:e.bookingDate,admissionDate:(null===(t=e.dischargeData)||void 0===t?void 0:t.admissionDate)||e.bookingDate,dischargeDate:null===(n=e.dischargeData)||void 0===n?void 0:n.dateDischarged,type:"IPD"},initialBillData:{operationName:e.operationName,services:[e.bills.services[0]]||0}}),u(!0)},C=()=>{u(!1),c(null),n((0,Be.NJ)())},D=()=>{0!==m.length?n((0,Be.TM)(m.trim())).unwrap().then((e=>{o(e)})):e({title:"Error",description:"Please enter a registration number",variant:"destructive"})},T=e=>{h(e.target.value)},P=()=>{p?n((0,Be.s3)(p)).unwrap().then((e=>{o(e),g(!1)})).catch((t=>{e({title:"Error",description:"getting server error",variant:"destructive"})})).finally((()=>{})):e({title:"Error",description:"Please select a date",variant:"destructive"})};return(0,X.jsx)("div",{className:"",children:d?(0,X.jsxs)("div",{children:[(0,X.jsx)("div",{className:"flex items-center",children:(0,X.jsxs)(w.$,{variant:"ghost",onClick:C,className:"flex items-center gap-2",children:[(0,X.jsx)(Uo.A,{className:"h-4 w-4"}),"Back to Admitted Patients"]})}),(0,X.jsx)(oQ,{isEmbedded:!0,patientData:{...l.patientData},initialBillDatas:l.initialBillData,onClose:C})]}):(0,X.jsxs)(k.Zp,{className:"w-full",children:[(0,X.jsx)(k.aR,{className:"bg-primary text-primary-foreground",children:(0,X.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>r(-1),className:"h-6 w-6",children:(0,X.jsx)(Uo.A,{className:"h-4 w-4"})}),(0,X.jsx)(k.ZB,{className:"text-xl font-bold",children:"Admitted Patients"})]}),(0,X.jsxs)("div",{className:"flex flex-row items-center gap-2 w-full sm:hidden",children:[(0,X.jsxs)("div",{className:"relative flex-1",children:[(0,X.jsx)(Vn.p,{type:"text",placeholder:"Search by UHID...",value:m,onChange:T,onKeyDown:e=>"Enter"===e.key&&D(),className:"bg-white/90 border-0 pr-8 text-black w-full"}),(0,X.jsx)(oo.A,{className:"h-4 w-4 absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-500 hover:cursor-pointer",onClick:D})]}),(0,X.jsxs)(ko.AM,{children:[(0,X.jsx)(ko.Wv,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"secondary",size:"icon",className:"bg-white text-black hover:bg-white/75",children:(0,X.jsx)(S.A,{className:"h-4 w-4"})})}),(0,X.jsx)(ko.hl,{className:"w-64 p-2",align:"end",children:(0,X.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,X.jsxs)(ko.AM,{children:[(0,X.jsx)(ko.Wv,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),p?(0,Go.GP)(p,"PPP"):"Date wise discharged"]})}),(0,X.jsxs)(ko.hl,{className:"w-auto p-0",align:"start",children:[(0,X.jsx)(Gg.V,{mode:"single",selected:p,onSelect:f,initialFocus:!0}),(0,X.jsx)("div",{className:"p-2 border-t",children:(0,X.jsx)(w.$,{className:"w-full",onClick:P,children:"Search"})})]})]}),(0,X.jsxs)(w.$,{onClick:()=>r("/patients/discharge"),variant:"outline",className:"w-full justify-start text-left",children:[(0,X.jsx)(Py,{className:"mr-2 h-4 w-4"}),"Create Discharge"]})]})})]})]}),(0,X.jsxs)("div",{className:"hidden sm:flex flex-row items-center gap-2",children:[(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(Vn.p,{type:"text",placeholder:"Search by UHID...",value:m,onChange:T,onKeyDown:e=>"Enter"===e.key&&D(),className:"bg-white/90 border-0 pr-8 text-black w-72"}),(0,X.jsx)(oo.A,{className:"h-4 w-4 absolute right-2.5 top-1/2 -translate-y-1/2 text-gray-500 hover:cursor-pointer",onClick:D})]}),(0,X.jsxs)(ko.AM,{open:v,onOpenChange:g,children:[(0,X.jsx)(ko.Wv,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:(0,Ee.cn)("bg-white text-black hover:bg-white/75 w-[240px] justify-start text-left font-normal",!p&&"text-muted-foreground"),children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),p?(0,Go.GP)(p,"PPP"):"Date wise discharged"]})}),(0,X.jsxs)(ko.hl,{className:"w-auto p-0",align:"start",children:[(0,X.jsx)(Gg.V,{mode:"single",selected:p,onSelect:f,initialFocus:!0}),(0,X.jsx)("div",{className:"p-2 border-t",children:(0,X.jsx)(w.$,{className:"w-full",onClick:P,children:"Search"})})]})]}),(0,X.jsxs)(w.$,{onClick:()=>r("/patients/discharge"),variant:"secondary",className:"bg-white text-black hover:bg-white",children:[(0,X.jsx)(Py,{className:"h-4 w-4 mr-2"}),"Create Discharge"]})]})]})}),(0,X.jsx)(k.Wu,{className:"p-0",children:(0,X.jsx)(b.F,{className:"h-[calc(100vh-8rem)]",children:"loading"===s?(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-12rem)]",children:[(0,X.jsx)(ti,{className:"h-8 w-8 animate-spin text-primary mb-2"}),(0,X.jsx)("span",{className:"text-muted-foreground",children:"Loading patients..."})]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("div",{className:"hidden md:block",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{className:"bg-muted/50",children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[140px]",children:"UHID No."}),(0,X.jsx)(Wo.nd,{className:"w-[120px]",children:"IPD No."}),(0,X.jsx)(Wo.nd,{className:"w-[200px]",children:"Name"}),(0,X.jsx)(Wo.nd,{className:"w-[150px]",children:"Operation Name"}),(0,X.jsx)(Wo.nd,{className:"w-[120px]",children:"Admission Date"}),(0,X.jsx)(Wo.nd,{className:"text-right w-[100px]",children:"Amount (\u20b9)"}),(0,X.jsx)(Wo.nd,{className:"text-right w-[120px]",children:"Paid (\u20b9)"}),(0,X.jsx)(Wo.nd,{className:"text-right w-[120px]",children:"Due (\u20b9)"}),(0,X.jsx)(Wo.nd,{className:"text-center w-[120px]",children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:0===i.length?(0,X.jsx)(Wo.Hj,{children:(0,X.jsx)(Wo.nA,{colSpan:8,className:"h-24 text-center",children:(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center text-muted-foreground",children:[(0,X.jsx)(Jo,{className:"h-8 w-8 mb-2"}),(0,X.jsx)("span",{children:"No admitted patients found"})]})})}):i.map((e=>{var t,n,a,s;return(0,X.jsxs)(Wo.Hj,{className:"border-b hover:bg-muted/50",children:[(0,X.jsx)(Wo.nA,{className:"font-medium",children:e.patient.registrationNumber}),(0,X.jsx)(Wo.nA,{className:"font-medium",children:e.ipdNumber||"-"}),(0,X.jsx)(Wo.nA,{children:e.patient.name}),(0,X.jsx)(Wo.nA,{children:(null===e||void 0===e||null===(t=e.operationName)||void 0===t?void 0:t.length)>20?`${e.operationName.substring(0,20)}...`:null===e||void 0===e?void 0:e.operationName}),(0,X.jsx)(Wo.nA,{children:(0,Go.GP)(new Date(e.admissionDate),"dd/MM/yyyy")}),(0,X.jsx)(Wo.nA,{className:"text-right tabular-nums font-bold",children:(0,M.vv)(e.totalAmount)}),(0,X.jsx)(Wo.nA,{className:"text-right tabular-nums font-bold text-green-600",children:(0,M.vv)(e.amountPaid)}),(0,X.jsx)(Wo.nA,{className:"text-right tabular-nums font-bold text-red-600",children:(0,M.vv)(e.amountDue)}),(0,X.jsx)(Wo.nA,{className:"text-center",children:(0,X.jsxs)("div",{className:"flex gap-2 justify-end pr-4",children:[(null===(n=e.department)||void 0===n?void 0:n.toLowerCase().includes("obstetric"))&&"female"===(null===e||void 0===e||null===(a=e.patient)||void 0===a||null===(s=a.gender)||void 0===s?void 0:s.toLowerCase())&&(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(w.$,{onClick:()=>r(`/patients/${e._id}/babies`,{state:{motherData:{...e.patient,bookingDate:e.bookingDate,bookingTime:e.bookingTime}}}),variant:"outline",size:"sm",className:"border-pink-200 hover:border-pink-300 hover:bg-pink-50 inline-flex items-center gap-1",children:(0,X.jsx)(FQ,{className:"h-4 w-4 text-pink-500"})})}),(0,X.jsxs)(w.$,{onClick:()=>E(e),variant:"outline",size:"sm",className:"inline-flex items-center",children:[(0,X.jsx)(ny,{className:"h-4 w-4"}),"Bills"]}),(()=>{const t=N(e);return 0===t.length?(0,X.jsx)(w.$,{onClick:()=>_(e._id,e),variant:"default",size:"sm",className:" h-8 text-xs bg-blue-600 hover:bg-blue-700 text-white",children:"Discharged"===e.status?"View/Edit":"Discharge"}):1===t.length?(0,X.jsx)(w.$,{onClick:()=>_(e._id,e,t[0]._id),variant:"default",size:"sm",className:" h-8 text-xs bg-blue-600 hover:bg-blue-700 text-white",children:"Discharged"===e.status?"View/Edit":"Discharge"}):(0,X.jsxs)(A.l6,{onValueChange:t=>_(e._id,e,t),children:[(0,X.jsx)(A.bq,{className:"bg-blue-600 hover:bg-blue-700 text-white border-0 h-8",children:(0,X.jsx)(A.yv,{placeholder:"Discharge"})}),(0,X.jsx)(A.gC,{children:t.map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.name},e._id)))})]})})()]})})]},e._id)}))})]})}),(0,X.jsx)("div",{className:"block md:hidden px-2 py-1",children:0===i.length?(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center h-32 text-muted-foreground m-4",children:[(0,X.jsx)(Jo,{className:"h-8 w-8 mb-2"}),(0,X.jsx)("span",{children:"No admitted patients found"})]}):i.map((e=>{var t,n,a;return(0,X.jsx)(k.Zp,{className:"mb-2 mx-2",children:(0,X.jsx)(k.Wu,{className:"p-3",children:(0,X.jsxs)("div",{className:"space-y-1.5",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("h3",{className:"font-semibold text-base",children:e.patient.name}),(0,X.jsxs)("div",{className:"text-xs text-muted-foreground space-y-0.5",children:[(0,X.jsxs)("div",{children:["UHID No:"," ",e.patient.registrationNumber]}),(0,X.jsxs)("div",{children:["IPD No: ",e.ipdNumber||"-"]})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 text-xs gap-x-4",children:[(0,X.jsxs)("div",{className:"flex justify-between",children:[(0,X.jsx)("span",{className:"text-muted-foreground",children:"Admission:"}),(0,X.jsx)("span",{children:(0,Go.GP)(new Date(e.admissionDate),"dd/MM/yyyy")})]}),(0,X.jsxs)("div",{className:"flex justify-between",children:[(0,X.jsx)("span",{className:"text-muted-foreground",children:"Total:"}),(0,X.jsx)("span",{className:"font-medium",children:(0,M.vv)(e.totalAmount)})]}),(0,X.jsxs)("div",{className:"flex justify-between",children:[(0,X.jsx)("span",{className:"text-muted-foreground",children:"Paid:"}),(0,X.jsx)("span",{className:"font-medium text-green-600",children:(0,M.vv)(e.amountPaid)})]}),(0,X.jsxs)("div",{className:"flex justify-between",children:[(0,X.jsx)("span",{className:"text-muted-foreground",children:"Due:"}),(0,X.jsx)("span",{className:"font-medium text-red-600",children:(0,M.vv)(e.amountDue)})]})]}),(0,X.jsxs)("div",{className:"flex flex-wrap gap-2 pt-1.5",children:[(null===(t=e.department)||void 0===t?void 0:t.toLowerCase().includes("obstetric"))&&"female"===(null===e||void 0===e||null===(n=e.patient)||void 0===n||null===(a=n.gender)||void 0===a?void 0:a.toLowerCase())&&(0,X.jsxs)(w.$,{onClick:()=>r(`/patients/${e._id}/babies`,{state:{motherData:{...e.patient,bookingDate:null===e||void 0===e?void 0:e.bookingDate,bookingTime:null===e||void 0===e?void 0:e.bookingTime}}}),variant:"outline",size:"sm",className:"flex-1 min-w-[120px] h-8 text-xs border-pink-200 hover:border-pink-300 hover:bg-pink-50 inline-flex items-center justify-center gap-1",children:[(0,X.jsx)(FQ,{className:"h-3 w-3 text-pink-500"}),"Babies"]}),(0,X.jsxs)(w.$,{onClick:()=>E(e),variant:"outline",size:"sm",className:"flex-1 min-w-[120px] h-8 text-xs inline-flex items-center justify-center gap-1",children:[(0,X.jsx)(ny,{className:"h-3 w-3"}),"Bills"]}),(0,X.jsxs)(w.$,{onClick:()=>(e=>{r(`/patients/add-services/${e._id}`,{state:{patientData:{_id:e._id,name:e.patient.name,registrationNumber:e.patient.registrationNumber,ipdNumber:e.ipdNumber,age:e.patient.age,gender:e.patient.gender,contactNumber:e.patient.contactNumber,address:e.patient.address,bookingDate:e.bookingDate,type:"IPD"},initialBillData:{operationName:e.operationName,services:[e.bills.services[0]]||0}}})})(e),variant:"outline",size:"sm",className:"flex-1 min-w-[120px] h-8 text-xs inline-flex items-center justify-center gap-1",children:[(0,X.jsx)(S.A,{className:"h-3 w-3"}),"Add Services"]}),(()=>{const t=N(e);return 0===t.length?(0,X.jsx)(w.$,{onClick:()=>_(e._id,e),variant:"default",size:"sm",className:"  h-8 text-xs bg-blue-600 hover:bg-blue-700 text-white",children:"Discharged"===e.status?"View/Edit":"Discharge"}):1===t.length?(0,X.jsx)(w.$,{onClick:()=>_(e._id,e,t[0]._id),variant:"default",size:"sm",className:"  h-8 text-xs bg-blue-600 hover:bg-blue-700 text-white",children:"Discharged"===e.status?"View/Edit":"Discharge"}):(0,X.jsxs)(A.l6,{onValueChange:t=>_(e._id,e,t),children:[(0,X.jsx)(A.bq,{className:"bg-blue-600 hover:bg-blue-700 text-white border-0 h-8",children:(0,X.jsx)(A.yv,{placeholder:"Discharge"})}),(0,X.jsx)(A.gC,{children:t.map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.name},e._id)))})]})})()]})]})})},e._id)}))})]})})})]})})}function UQ(){var e;const n=(0,a.zy)(),r=(0,a.Zp)(),s=(0,j.wA)(),{toast:i}=(0,H.dj)(),{patientId:o}=(0,a.g)(),[l,c]=(0,t.useState)((null===(e=n.state)||void 0===e?void 0:e.patientData)||null),[d,u]=(0,t.useState)([]),[m,h]=(0,t.useState)({serviceName:"",quantity:"",rate:"",total:"",category:""}),[p,f]=(0,t.useState)(""),[v,g]=(0,t.useState)(!1),[x,y]=(0,t.useState)(null),[N,_]=(0,t.useState)([]),{services:S,servicesStatus:E}=(0,j.d4)((e=>e.services)),D=(0,j.d4)((e=>e.bills.createBillStatus)),T=S.filter((e=>"OPD Procedure"===e.category&&"Surgery"!==e.category));(0,t.useEffect)((()=>{"idle"===E&&s(lt())}),[s,E]),(0,t.useEffect)((()=>{var e,t,r;const a=(null===(e=n.state)||void 0===e||null===(t=e.initialBillData)||void 0===t||null===(r=t.services[0])||void 0===r?void 0:r.services)||[];_(a.filter((e=>"Surgery"!==e.category)).map(((e,t)=>({id:`existing-${t}`,service:e.name,quantity:e.quantity,rate:e.rate,total:e.rate*e.quantity,category:e.category}))))}),[n.state]);const A=e=>{const{name:t,value:n}=e.target;h((e=>{const r={...e,[t]:n};if(r.quantity&&r.rate){const e=parseInt(r.quantity),t=parseFloat(r.rate);r.total=e*t}return r}))},P=()=>{var e,t;const r=d.reduce(((e,t)=>e+t.total),0),a=(null===(e=n.state)||void 0===e||null===(t=e.initialBillData)||void 0===t?void 0:t.services[0])||{},s=a.subtotal||0,i=a.additionalDiscount||0,o=a.amountPaid||0,l=r+s,c=l-i;return{subtotal:l,discount:i,totalAmount:c,totalAmountPaid:o,balance:c-o,billId:a._id}};return l?(0,X.jsxs)("div",{className:"w-full h-[calc(100vh-4rem)] flex flex-col gap-1",children:[(0,X.jsxs)("div",{className:"flex items-center mb-1",children:[(0,X.jsxs)("div",{variant:"ghost",onClick:()=>r(-1),className:"flex items-center gap-2",children:[(0,X.jsx)(Uo.A,{className:"h-2 w-4"}),"Back"]}),(0,X.jsx)("h2",{className:"text-lg font-bold ml-2",children:"Add Services"})]}),(0,X.jsx)(k.Zp,{className:"flex-shrink-0",children:(0,X.jsx)(k.Wu,{className:"p-1",children:(0,X.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:(0,X.jsxs)("div",{className:"flex items-center mb-2 md:mb-0",children:[(0,X.jsxs)(Co,{className:"h-10 w-10 mr-3",children:[(0,X.jsx)(Do,{src:`https://api.dicebear.com/6.x/initials/svg?seed=${l.name}`,alt:l.name}),(0,X.jsx)(To,{children:l.name.charAt(0)})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h2",{className:"font-semibold",children:l.name}),(0,X.jsxs)("div",{className:"flex flex-wrap gap-1 mt-0.5",children:[(0,X.jsx)(Yo.E,{variant:"outline",children:l.gender}),(0,X.jsxs)(Yo.E,{variant:"outline",children:[l.age," yrs"]}),(0,X.jsxs)(Yo.E,{variant:"outline",children:["UHID No: ",l.registrationNumber]}),l.ipdNumber&&(0,X.jsxs)(Yo.E,{variant:"outline",children:["IPD No: ",l.ipdNumber]})]})]})]})})})}),(0,X.jsx)(k.Zp,{className:" flex flex-col overflow-hidden",children:(0,X.jsxs)(k.Wu,{className:"p-2 flex flex-col h-full",children:[(0,X.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={id:d.length+1,service:m.serviceName,category:m.category||"OPD Procedure",quantity:parseInt(m.quantity),rate:parseFloat(m.rate),total:parseFloat(m.total)};u((e=>[...e,t])),h({serviceName:"",quantity:"",rate:"",total:"",category:""}),f("")},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-1 items-end",children:[(0,X.jsxs)("div",{className:"col-span-full sm:col-span-1 md:col-span-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"serviceName",children:"Service Name"}),(0,X.jsx)(Gs.P,{suggestions:T,placeholder:"Enter service name",value:p,setValue:f,onSuggestionSelect:e=>{h((t=>({...t,serviceName:e.name,rate:e.rate,total:e.rate,category:e.category,quantity:1})))}})]}),(0,X.jsx)("div",{className:"col-span-full sm:col-span-1 md:col-span-3 lg:col-span-3",children:(0,X.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"quantity",children:"Quantity"}),(0,X.jsx)(Vn.p,{type:"number",id:"quantity",name:"quantity",value:m.quantity,onChange:A,required:!0})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"rate",children:"Rate"}),(0,X.jsx)(Vn.p,{type:"number",id:"rate",name:"rate",value:m.rate,onChange:A,required:!0})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{htmlFor:"total",children:"Total"}),(0,X.jsx)(Vn.p,{type:"number",id:"total",name:"total",value:m.total,onChange:A,required:!0})]})]})}),(0,X.jsx)("div",{className:"col-span-full sm:col-span-1",children:(0,X.jsx)(w.$,{type:"submit",className:"w-full",children:"Add Service"})})]}),(0,X.jsx)(Mo,{className:"my-2"}),(0,X.jsx)(b.F,{className:"border rounded-md h-[290px]",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{className:"sticky top-0 bg-white",children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Service"}),(0,X.jsx)(Wo.nd,{children:"Quantity"}),(0,X.jsx)(Wo.nd,{children:"Rate"}),(0,X.jsx)(Wo.nd,{children:"Total"}),(0,X.jsx)(Wo.nd,{className:"text-right",children:"Action"})]})}),(0,X.jsxs)(Wo.BF,{className:"overflow-auto",children:[N.map((e=>(0,X.jsxs)(Wo.Hj,{className:"bg-muted/30",children:[(0,X.jsx)(Wo.nA,{className:"py-2",children:e.service}),(0,X.jsx)(Wo.nA,{className:"py-2",children:e.quantity}),(0,X.jsx)(Wo.nA,{className:"py-2",children:e.rate}),(0,X.jsx)(Wo.nA,{className:"py-2",children:e.total}),(0,X.jsx)(Wo.nA,{className:"text-right py-2",children:(0,X.jsx)(Yo.E,{variant:"secondary",children:"Existing"})})]},e.id))),d.map((e=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"py-2",children:e.service}),(0,X.jsx)(Wo.nA,{className:"py-2",children:e.quantity}),(0,X.jsx)(Wo.nA,{className:"py-2",children:e.rate}),(0,X.jsx)(Wo.nA,{className:"py-2",children:e.total}),(0,X.jsx)(Wo.nA,{className:"text-right py-2",children:(0,X.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,void u((e=>e.filter((e=>e.id!==t))));var t},children:(0,X.jsx)(C.A,{className:"h-4 w-4"})})})]},e.id)))]})]})}),(0,X.jsx)(k.Zp,{className:"mt-2",children:(0,X.jsx)(k.Wu,{className:"p-1",children:(0,X.jsxs)("div",{className:"flex flex-col items-end space-y-0.5",children:[(0,X.jsxs)("div",{className:"flex justify-end w-48 items-center text-sm",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-3",children:"Subtotal:"}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)("span",{className:"mr-1",children:"\u20b9"}),(0,X.jsx)(Vn.p,{value:P().subtotal.toFixed(2),className:"w-20 h-7 text-right font-medium border-0 p-0 focus:ring-0 focus-visible:ring-0 focus-visible:ring-offset-0 bg-transparent",placeholder:"0.00",readOnly:!0})]})]}),(0,X.jsxs)("div",{className:"flex justify-end w-48 items-center text-sm",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-3",children:"Discount:"}),(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)("span",{className:"text-red-600 mr-1",children:"\u20b9"}),(0,X.jsx)(Vn.p,{value:P().discount.toFixed(2),className:"w-20 h-7 text-right text-red-600 font-medium border-0 p-0 focus:ring-0 focus-visible:ring-0 focus-visible:ring-offset-0 bg-transparent",placeholder:"0.00",readOnly:!0})]})]}),(0,X.jsxs)("div",{className:"flex justify-end w-48 items-center text-sm border-t border-gray-200 pt-0.5",children:[(0,X.jsx)("span",{className:"font-medium mr-3",children:"Net Total:"}),(0,X.jsxs)("span",{className:"font-medium",children:["\u20b9",P().totalAmount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,X.jsxs)("div",{className:"flex justify-end w-48 items-center text-sm",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-3",children:"Paid:"}),(0,X.jsxs)("span",{className:"text-green-600 font-bold",children:["\u20b9",P().totalAmountPaid.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,X.jsxs)("div",{className:"flex justify-end w-48 items-center text-sm border-t border-gray-200 pt-0.5",children:[(0,X.jsx)("span",{className:"text-gray-600 mr-3",children:"Balance:"}),(0,X.jsxs)("span",{className:"text-red-600 font-bold",children:["\u20b9",P().balance.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})})]})}),(0,X.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>r(-1),children:"Cancel"}),(0,X.jsx)(w.$,{onClick:()=>{if(0===d.length)return void i({title:"No services added",description:"Please add at least one service before creating the bill.",variant:"destructive"});const e=P(),t={services:[...N.filter((e=>"Surgery"!==e.category)).map((e=>({name:e.service,quantity:e.quantity,rate:e.rate,category:e.category}))),...d.map((e=>({name:e.service,quantity:e.quantity,rate:e.rate,category:e.category})))],patient:l._id,patientType:l.type,patientInfo:{name:l.name,phone:l.contactNumber},totals:{subtotal:e.subtotal,additionalDiscount:e.discount,totalAmount:e.totalAmount,amountPaid:e.totalAmountPaid}};s(ft({billId:e.billId,billData:t})).unwrap().then((()=>{i({variant:"success",title:"Services added successfully",description:"The services have been successfully added to the bill."})})).catch((e=>{i({title:"Error adding services",description:"There was an error adding the services. Please try again.",variant:"destructive"})}))},disabled:"loading"===D,children:"loading"===D?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ti,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding Services..."]}):"Add Services"})]}),(0,X.jsx)(Jc,{isOpen:v,setIsOpen:g,billData:x,onClose:()=>g(!1)})]}):(0,X.jsx)("div",{children:"No patient data available"})}function zQ(){var e,n;const{toast:r}=(0,H.dj)(),s=(0,j.wA)(),{labTestsTemplate:i,status:o}=(0,j.d4)((e=>e.templates)),l=(0,a.Zp)(),c=(0,a.zy)(),d=null===(e=c.state)||void 0===e?void 0:e.editMode,u=null===(n=c.state)||void 0===n?void 0:n.templateData,{labCategories:m,labReportFields:h,fetchLabDataStatus:p}=(0,j.d4)((e=>e.lab));(0,t.useEffect)((()=>{"idle"===p&&s(nn())}),[p,s]);const[f,v]=(0,t.useState)({}),[g,x]=(0,t.useState)({}),[y,N]=(0,t.useState)(""),[E,C]=(0,t.useState)(""),[D,k]=(0,t.useState)({}),[A,P]=(0,t.useState)({}),[O,M]=(0,t.useState)(""),[I,L]=(0,t.useState)(!1),[F,B]=(0,t.useState)(""),[W,$]=(0,t.useState)(null),U=(0,t.useRef)(null),z=(0,t.useRef)(null),[V,q]=(0,t.useState)({}),[G,K]=(0,t.useState)(!1),Y=t.useRef(),Z=e=>e.toLowerCase().replace(/[()]/g,"").replace(/\s+/g,"-"),J=(e,t,n,r,a)=>{const s=Z(e);x((e=>{var i,o,l;return{...e,[s]:{...e[s],[t]:{...null===(i=e[s])||void 0===i?void 0:i[t],[n]:{...null===(o=e[s])||void 0===o||null===(l=o[t])||void 0===l?void 0:l[n],[r]:a}}}}}))};(0,t.useEffect)((()=>{d&&u&&(N(u.name),M(u.rate))}),[d,u]);const Q=e=>{L(e),e||(C(""),k({}))},ee=e=>{P((t=>({...t,[e]:!t[e]})))},te=t.useMemo((()=>m.reduce(((e,t)=>(e[Z(t.name)]=t.name,e)),{})),[m]),ne=(0,t.useMemo)((()=>{const e=[];return Object.entries(h).forEach((t=>{let[n,r]=t;Object.entries(r).forEach((t=>{let[r,a]=t;a.forEach((t=>{var a;e.push({categoryKey:n,category:(null===(a=m.find((e=>Z(e.name)===n)))||void 0===a?void 0:a.name)||n,test:r,field:t})}))}))})),e}),[m,h]),re=(0,t.useMemo)((()=>{if(!F.trim())return[];const e=F.toLowerCase();return ne.filter((t=>t.field.label.toLowerCase().includes(e)||t.field.name.toLowerCase().includes(e)||t.field.unit&&t.field.unit.toLowerCase().includes(e)||t.test.toLowerCase().includes(e)))}),[F,ne,m,h]);(0,t.useEffect)((()=>{if(W){const e=setTimeout((()=>{$(null)}),2e3);return()=>clearTimeout(e)}}),[W]);(0,t.useEffect)((()=>{if(!d){let e=0,t=null,n=null;Object.entries(f).forEach((r=>{let[a,s]=r;Object.entries(s).forEach((r=>{let[s,i]=r;i&&(e++,t=s,n=te[a])}))})),1===e?N(`${t}`):e>1&&N("")}}),[f,te,d]);return(0,t.useEffect)((()=>{"idle"===o&&s((0,R.QK)())}),[o,s]),(0,t.useEffect)((()=>{if(d&&u){N(u.name),M(u.rate);const e={},t={},n={};Object.entries(u.fields).forEach((r=>{let[a,s]=r,i=!1;for(const[n,o]of Object.entries(h)){for(const[r,l]of Object.entries(o)){if(l.find((e=>e.name===a))){e[n]||(e[n]={}),e[n][r]=!0,t[n]||(t[n]={}),t[n][r]||(t[n][r]={}),t[n][r][a]={...s,isSelected:!0,fromLabReportFields:!0},i=!0;break}}if(i)break}if(!i){n[`custom-field-${a}`]={...s,name:a,isSelected:!0,isCustom:!0}}})),v(e),x(t),q(n)}}),[d,u]),(0,X.jsxs)("div",{className:"p-6",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{onClick:()=>{l(-1)},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-2xl font-bold",children:"Create Test Template"})]}),(0,X.jsxs)("div",{className:"flex gap-2",children:[(0,X.jsxs)(w.$,{variant:"outline",onClick:()=>{const e=i||[];if(0===e.length)return void r({title:"No templates to export",description:"Please create some templates first.",variant:"destructive"});const t=e.flatMap((e=>{var t;const n={TemplateName:e.name||"",Rate:e.rate||0,Notes:e.notes||"",Sections:(null===(t=e.sections)||void 0===t?void 0:t.map((e=>e.name)).join(", "))||"",TemplateId:e._id||""};return e.fields&&0!==Object.keys(e.fields).length?Object.entries(e.fields).map(((e,t)=>{let[r,a]=e;return{...n,FieldName:r,Field:a.label||r,FieldId:a._id||"",Unit:a.unit||"",NormalRange:a.normalRange||"",Options:Array.isArray(a.options)?a.options.join(", "):a.options||""}})):[n]})),n=rQ.json_to_sheet(t),a=rQ.book_new();rQ.book_append_sheet(a,n,"Test Templates"),VJ(a,"test_templates.xlsx")},className:"w-full md:w-auto",children:[(0,X.jsx)(bW,{className:"mr-2 h-4 w-4"})," Export"]}),(0,X.jsx)(w.$,{variant:"outline",onClick:()=>{Y.current.click()},className:"w-full md:w-auto",disabled:G,children:"Import"}),(0,X.jsx)("input",{type:"file",accept:".xlsx, .xls",ref:Y,onChange:async e=>{const t=e.target.files[0];if(t){K(!0);try{const e=FJ(await t.arrayBuffer(),{type:"array"}),n=e.SheetNames[0],a=e.Sheets[n],i=rQ.sheet_to_json(a),o=i.reduce(((e,t)=>{const n=t.TemplateId||t.TemplateName;e[n]||(e[n]={_id:t.TemplateId||void 0,name:t.TemplateName,rate:Number(t.Rate)||0,notes:t.Notes||"",sections:t.Sections?t.Sections.split(",").map(((e,t)=>({name:e.trim(),position:t}))):[],fields:{}});const r=t.FieldName;return r&&(e[n].fields[r]={label:t.Field,value:"",unit:t.Unit||"",normalRange:t.NormalRange||"",options:t.Options?t.Options.split(",").map((e=>e.trim())):[],isSelected:!0}),e}),{}),l=Object.values(o);await s((0,R.jc)({labTestsTemplate:l})).unwrap(),r({title:"Import successful",description:`${l.length} templates imported with ${i.length} fields.`,variant:"success"})}catch(n){r({title:"Import failed",description:n.message||"Could not import test templates.",variant:"destructive"})}finally{K(!1),e.target.value=""}}},style:{display:"none"}}),(0,X.jsx)(w.$,{onClick:()=>L(!0),children:"Create Template"})]})]}),(0,X.jsxs)("div",{className:"mb-6",children:[(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search for parameters (e.g. WBC, Hemoglobin, etc.)",value:F,onChange:e=>B(e.target.value),className:"pl-8"})]}),F.trim()&&(0,X.jsx)("div",{className:"mt-2 border rounded-lg shadow-sm",children:(0,X.jsxs)(b.F,{className:"h-[200px]",children:[re.map(((e,t)=>(0,X.jsxs)("div",{className:"p-2 hover:bg-gray-50 cursor-pointer",onClick:()=>(e=>{const t=Z(e.category),n=e.test;v((e=>({...e,[t]:{...e[t],[n]:!0}}))),x((e=>{var r;const a=(null===(r=e[t])||void 0===r?void 0:r[n])||{};return{...e,[t]:{...e[t],[n]:a}}})),x((r=>{var a;return{...r,[t]:{...r[t],[n]:{...null===(a=r[t])||void 0===a?void 0:a[n],[e.field.name]:{label:e.field.label,value:e.field.value,unit:e.field.unit||"",normalRange:e.field.normalRange||"",options:e.field.options||"",calculationDetails:e.field.calculationDetails||null,isSelected:!0}}}}}));const r=`${t}-${n}-${e.field.name}`;P((e=>({...e,[r]:!0}))),$({category:t,test:n,field:e.field.name}),B("");const a=document.getElementById(`test-${t}-${n}`);a&&a.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>{const r=document.getElementById(`parameter-${t}-${n}-${e.field.name}`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})}),100)})(e),children:[(0,X.jsx)("div",{className:"font-medium",children:e.field.label}),(0,X.jsxs)("div",{className:"text-sm text-gray-500",children:[e.category," \u2192 ",e.test,e.field.unit&&` (${e.field.unit})`]})]},`${e.category}-${e.test}-${e.field.name}-${t}`))),0===re.length&&(0,X.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No parameters found matching your search"})]})})]}),(0,X.jsx)(Io.lG,{open:I,onOpenChange:Q,children:(0,X.jsxs)(Io.Cf,{children:[(0,X.jsx)(Io.c7,{children:(0,X.jsx)(Io.L3,{children:d?"Update Test Template":"Create New Test Template"})}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Vn.p,{placeholder:"Report/Test Name",value:y,onChange:e=>{N(e.target.value),C("")}}),E&&(0,X.jsx)("p",{className:"text-red-500 text-sm mt-1",children:E})]}),(0,X.jsx)("div",{children:(0,X.jsx)(Vn.p,{placeholder:"Rate",type:"number",value:O,onChange:e=>M(e.target.value)})})]}),(0,X.jsxs)(Io.Es,{children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),(0,X.jsx)(w.$,{onClick:async()=>{let e=!1;const t={};if(y.trim()||(C("Report/Test name is required."),e=!0),Object.entries(g).forEach((n=>{let[r,a]=n;Object.entries(a).forEach((n=>{let[a,s]=n;Object.entries(s).forEach((n=>{let[s,i]=n;var o;i.isSelected&&(null!==(o=i.label)&&void 0!==o&&o.trim()||(t[`${r}-${a}-${s}-label`]="Label is required",e=!0))}))}))})),k(t),!e)try{const e={name:y.trim(),rate:Number(O)||0,fields:{...Object.entries(V).filter((e=>{let[t,n]=e;return n.isSelected})).reduce(((e,t)=>{let[n,r]=t;return{...e,[r.name]:{label:r.label,value:r.value,unit:r.unit,normalRange:r.normalRange,...r.options&&r.options.length>0&&{options:r.options.split(",").map((e=>e.trim())).filter((e=>""!==e))},...r.calculationDetails&&{calculationDetails:r.calculationDetails}}}}),{}),...Object.entries(g).reduce(((e,t)=>{let[n,r]=t;return Object.entries(r).forEach((t=>{let[n,r]=t;Object.entries(r).filter((e=>{let[t,n]=e;return n.isSelected})).forEach((t=>{var n,r,a;let[s,i]=t;const o=Array.isArray(i.options)?i.options:null===(n=i.options)||void 0===n||null===(r=n.split(","))||void 0===r||null===(a=r.map((e=>e.trim())))||void 0===a?void 0:a.filter((e=>""!==e));e[`${s}`]={label:i.label,value:i.value,unit:i.unit,normalRange:i.normalRange,...(null===o||void 0===o?void 0:o.length)>0&&{options:o},...i.calculationDetails&&{calculationDetails:i.calculationDetails}}}))})),e}),{})}};if(d){const t=i.findIndex((e=>e.name===u.name));-1!==t&&(await s((0,R.X_)({field:"labTestsTemplate",index:t,newValue:{...u,...e}})).unwrap(),r({title:"Success",description:"Template updated successfully",variant:"success"}))}else await s((0,R.ub)({labTestsTemplate:e})).unwrap(),r({title:"Success",description:"Template created successfully",variant:"success"});d||(v({}),x({}),N(""),M("")),C(""),L(!1),l("/settings/lab-templates")}catch(n){console.error("Error saving template:",n),r({variant:"destructive",title:"Error",description:"Failed to save template. Please try again."})}},children:d?"Update Template":"Create Template"})]})]})}),(0,X.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,X.jsxs)("div",{className:"flex gap-6 h-[600px]",children:[(0,X.jsx)(b.F,{className:"w-1/3 border rounded-lg p-4",ref:U,children:m.map((e=>(0,X.jsxs)("div",{className:"mb-6",children:[(0,X.jsx)("h3",{className:"font-semibold text-lg mb-3",children:e.name}),(0,X.jsx)("div",{className:"space-y-2",children:e.types.map((t=>{var n;return(0,X.jsxs)("div",{id:`test-${Z(e.name)}-${t}`,className:"flex items-center space-x-2 p-2 rounded transition-colors duration-200 "+((null===W||void 0===W?void 0:W.category)===Z(e.name)&&(null===W||void 0===W?void 0:W.test)===t?"bg-blue-50":"hover:bg-gray-50"),children:[(0,X.jsx)(zl,{id:`${e.name}-${t}`,checked:(null===(n=f[Z(e.name)])||void 0===n?void 0:n[t])||!1,onCheckedChange:()=>((e,t)=>{var n;const r=Z(e),a=t;v((e=>{var t;return{...e,[r]:{...e[r],[a]:!(null!==(t=e[r])&&void 0!==t&&t[a])}}})),null!==(n=f[r])&&void 0!==n&&n[a]?x((e=>{const t={...e};return t[r]&&delete t[r][a],t})):x((e=>{var t;return{...e,[r]:{...e[r],[a]:(null===(t=e[r])||void 0===t?void 0:t[a])||{}}}}))})(e.name,t)}),(0,X.jsx)("label",{htmlFor:`${e.name}-${t}`,className:"font-medium",children:t})]},t)}))})]},e.name)))}),(0,X.jsxs)(b.F,{className:"w-2/3 border rounded-lg p-4",ref:z,children:[(0,X.jsxs)("div",{className:"mb-6",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,X.jsx)("h3",{className:"font-semibold text-lg",children:"Custom Fields"}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>{const e=`custom-field-${Date.now()}`;q((t=>({...t,[e]:{name:e,label:"New Field",value:"",unit:"",normalRange:"",options:"",calculationDetails:null,isSelected:!0,isCustom:!0}}))),P((t=>({...t,[e]:!0})))},children:[(0,X.jsx)(S.A,{className:"h-4 w-4 mr-1"})," Add Field"]})]}),(0,X.jsx)("div",{className:"space-y-2 grid grid-cols-2 gap-2",children:Object.entries(V).map((e=>{let[t,n]=e;return(0,X.jsxs)("div",{className:"border rounded p-2",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{checked:n.isSelected,onCheckedChange:e=>{q((n=>({...n,[t]:{...n[t],isSelected:e}})))}}),(0,X.jsx)("label",{className:"font-medium",children:n.label})]}),(0,X.jsxs)("div",{className:"flex items-center gap-1",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>ee(t),children:(0,X.jsx)(pi.A,{className:"h-4 w-4"})}),(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",onClick:()=>{q((e=>{const n={...e};return delete n[t],n}))},children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})]})]}),A[t]&&(0,X.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,X.jsx)(Vn.p,{placeholder:"Label",value:n.label,onChange:e=>{q((n=>({...n,[t]:{...n[t],label:e.target.value}})))}}),(0,X.jsx)(Vn.p,{placeholder:"Unit",value:n.unit,onChange:e=>{q((n=>({...n,[t]:{...n[t],unit:e.target.value}})))}}),(0,X.jsx)(Vn.p,{placeholder:"Normal Range",value:n.normalRange,onChange:e=>{q((n=>({...n,[t]:{...n[t],normalRange:e.target.value}})))}}),(0,X.jsx)(Vn.p,{placeholder:"Options (comma separated)",value:n.options,onChange:e=>{q((n=>({...n,[t]:{...n[t],options:e.target.value}})))}})]})]},t)}))})]}),m.map((e=>{const t=Z(e.name);return e.types.map((n=>{var r,a,s;if(null===(r=f[t])||void 0===r||!r[n])return null;const i=(null===(a=h[t])||void 0===a?void 0:a[n])||[];return(0,X.jsxs)("div",{children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsx)("h4",{className:"font-semibold",children:n}),(0,X.jsx)("div",{className:"flex gap-2",children:(0,X.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>((e,t)=>{var n;const r=Z(e),a=(null===(n=h[r])||void 0===n?void 0:n[t])||[],s={};a.forEach((e=>{s[e.name]={label:e.label,value:e.value,unit:e.unit||"",normalRange:e.normalRange||"",options:e.options||"",calculationDetails:e.calculationDetails||null,isSelected:!0}})),x((e=>({...e,[r]:{...e[r],[t]:s}})))})(e.name,n),children:"Select All Fields"})})]}),(0,X.jsx)("div",{className:"space-y-2 grid grid-cols-2",children:[...i,...Object.entries((null===(s=g[t])||void 0===s?void 0:s[n])||{}).filter((e=>{let[t,n]=e;return n.isCustom})).map((e=>{let[t,n]=e;return{name:t,label:n.label,unit:n.unit,normalRange:n.normalRange,options:n.options,calculationDetails:n.calculationDetails,isCustom:!0}}))].map((r=>{var a,s;const i=`${t}-${n}-${r.name}`,o=null===(a=g[t])||void 0===a||null===(s=a[n])||void 0===s?void 0:s[r.name];return(0,X.jsxs)("div",{id:`parameter-${t}-${n}-${r.name}`,className:"border rounded p-1 transition-colors duration-200 "+((null===W||void 0===W?void 0:W.category)===t&&(null===W||void 0===W?void 0:W.test)===n&&(null===W||void 0===W?void 0:W.field)===r.name?"bg-blue-50":""),children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{checked:(null===o||void 0===o?void 0:o.isSelected)||!1,onCheckedChange:()=>((e,t,n)=>{const r=Z(e),a=t;x((e=>{var t,s,i,o;return{...e,[r]:{...e[r],[a]:{...null===(t=e[r])||void 0===t?void 0:t[a],[n.name]:{label:n.label,value:n.value,unit:n.unit||"",normalRange:n.normalRange||"",options:n.options||"",calculationDetails:n.calculationDetails||null,isSelected:!(null!==(s=e[r])&&void 0!==s&&null!==(i=s[a])&&void 0!==i&&null!==(o=i[n.name])&&void 0!==o&&o.isSelected)}}}}}))})(e.name,n,r)}),(0,X.jsx)("label",{className:"font-medium",children:r.isCustom?null===o||void 0===o?void 0:o.label:r.label})]}),(null===o||void 0===o?void 0:o.isSelected)&&(0,X.jsxs)("div",{className:"flex items-center gap-1",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>ee(i),children:(0,X.jsx)(pi.A,{className:"h-4 w-4"})}),r.isCustom&&(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",onClick:()=>{x((e=>{const a={...e};return delete a[t][n][r.name],a}))},children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})]})]}),A[i]&&(null===o||void 0===o?void 0:o.isSelected)&&(0,X.jsxs)("div",{className:"mt-2 space-y-2 pl-6",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(Vn.p,{placeholder:"Label",value:o.label||"",onChange:t=>J(e.name,n,r.name,"label",t.target.value)}),D[`${t}-${n}-${r.name}-label`]&&(0,X.jsx)("p",{className:"text-red-500 text-xs mt-1",children:D[`${t}-${n}-${r.name}-label`]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Vn.p,{placeholder:"Unit",value:o.unit||"",onChange:t=>J(e.name,n,r.name,"unit",t.target.value)}),D[`${t}-${n}-${r.name}-unit`]&&(0,X.jsx)("p",{className:"text-red-500 text-xs mt-1",children:D[`${t}-${n}-${r.name}-unit`]})]}),(0,X.jsx)("div",{children:(0,X.jsx)(Vn.p,{placeholder:"Normal Range",value:o.normalRange||"",onChange:t=>J(e.name,n,r.name,"normalRange",t.target.value)})}),(0,X.jsx)(Vn.p,{placeholder:"Options (comma separated)",value:o.options||"",onChange:t=>J(e.name,n,r.name,"options",t.target.value)}),o.calculationDetails&&(0,X.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded border",children:[(0,X.jsx)("h5",{className:"text-sm font-semibold mb-1",children:"Calculation Details"}),(0,X.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,X.jsxs)("p",{children:[(0,X.jsxs)("span",{className:"font-medium",children:["Formula:"," "]}),o.calculationDetails.formula]}),o.calculationDetails.dependencies&&(0,X.jsxs)("p",{children:[(0,X.jsxs)("span",{className:"font-medium",children:["Dependencies:"," "]}),o.calculationDetails.dependencies.join(", ")]})]})]})]})]},i)}))})]},`${t}-${n}`)}))}))]})]})})]})}function HQ(){const e=(0,a.Zp)();return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>{e(-1)},className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Printing Templates"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[(0,X.jsxs)(w.$,{onClick:()=>e("/settings/printing-templates/discharge-preview"),className:"w-full p-6 h-auto flex flex-col items-center gap-2",children:[(0,X.jsx)("span",{className:"text-lg",children:"Discharge Template"}),(0,X.jsx)("span",{className:"text-sm text-gray-200",children:"Preview and customize discharge summary template"})]}),(0,X.jsxs)(w.$,{onClick:()=>e("/settings/printing-templates/header-preview"),className:"w-full p-6 h-auto flex flex-col items-center gap-2",children:[(0,X.jsx)("span",{className:"text-lg",children:"Hospital Header"}),(0,X.jsx)("span",{className:"text-sm text-gray-200",children:"Preview and customize hospital header template"})]}),(0,X.jsxs)(w.$,{onClick:()=>e("/settings/printing-templates/opd-preview"),className:"w-full p-6 h-auto flex flex-col items-center gap-2",children:[(0,X.jsx)("span",{className:"text-lg",children:"OPD Prescription"}),(0,X.jsx)("span",{className:"text-sm text-gray-200",children:"Preview and customize OPD prescription template"})]}),(0,X.jsxs)(w.$,{onClick:()=>e("/settings/printing-templates/opd-rx-preview"),className:"w-full p-6 h-auto flex flex-col items-center gap-2",children:[(0,X.jsx)("span",{className:"text-lg",children:"OPD Rx Template"}),(0,X.jsx)("span",{className:"text-sm text-gray-200",children:"Preview and customize OPD Rx template"})]}),(0,X.jsxs)(w.$,{onClick:()=>e("/settings/printing-templates/opd-bill-token-preview"),className:"w-full p-6 h-auto flex flex-col items-center gap-2",children:[(0,X.jsx)("span",{className:"text-lg",children:"OPD Bill Token"}),(0,X.jsx)("span",{className:"text-sm text-gray-200",children:"Preview and customize OPD bill token template"})]}),(0,X.jsxs)(w.$,{onClick:()=>e("/settings/printing-templates/lab-report-preview"),className:"w-full p-6 h-auto flex flex-col items-center gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,X.jsx)("span",{className:"text-lg",children:"Lab Report Template"}),(0,X.jsx)("span",{className:"text-sm text-gray-200",children:"Preview and customize laboratory report template"})]}),(0,X.jsxs)(w.$,{onClick:()=>e("/settings/printing-templates/lab-billing-preview"),className:"w-full p-6 h-auto flex flex-col items-center gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,X.jsx)("span",{className:"text-lg",children:"Lab Billing Template"}),(0,X.jsx)("span",{className:"text-sm text-gray-200",children:"Preview and customize lab billing template"})]}),(0,X.jsxs)(w.$,{onClick:()=>e("/settings/printing-templates/merge-template-preview"),className:"w-full p-6 h-auto flex flex-col items-center gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,X.jsx)("span",{className:"text-lg",children:"Merge Template Report"}),(0,X.jsx)("span",{className:"text-sm text-gray-200",children:"Preview and customize merge template report"})]}),(0,X.jsxs)(w.$,{onClick:()=>e("/settings/printing-templates/consent-preview"),className:"w-full p-6 h-auto flex flex-col items-center gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,X.jsx)("span",{className:"text-lg",children:"Consent Form Template"}),(0,X.jsx)("span",{className:"text-sm text-gray-200",children:"Preview and customize consent form template"})]})]})]})}var VQ=__webpack_require__(2698),qQ=__webpack_require__(961);function GQ(){const e=(0,j.d4)((e=>e.hospital.hospitalInfo)),n=(0,j.d4)((e=>e.templates.dischargeSummaryTemplateArray)),[r,a]=((0,j.wA)(),(0,t.useState)([{name:"System Default",value:VQ.P},{name:"configBasedDischargeSummaryTemplate",value:'\n(formData, patient, hospital, formConfig, ref) => {\n  // Helper functions\n  const formatLabel = (label) => {\n    if (!label) return "";\n    const regex = /^([^)]+)|^(?:\\S+\\s?){1,3}/;\n    const match = label.match(regex);\n    return match ? match[0].trim() : label;\n  };\n\n  const formatDate = (date) => {\n    if (!date) return "--";\n    return new Date(date).toLocaleDateString(\'en-IN\', { day: \'2-digit\', month: \'2-digit\', year: \'numeric\' }).split(\'/\').join(\'-\');\n  };\n\n  const hasValue = (obj) => {\n    if (!obj) return false;\n    return Object.values(obj).some(value => value !== "" && value !== null && value !== undefined);\n  };\n\n  // Get the form configuration - use provided formConfig\n  const config = formConfig || {\n    sections: [\n      {\n        id: "patientInfo",\n        title: "Patient Information",\n        fields: []\n      },\n      {\n        id: "clinicalInfo",\n        fields: []\n      }\n    ]\n  };\n\n  // Helper function to get field value\n  const getFieldValue = (field) => {\n    // For patient info section, get values from patient object\n    if (field.id in patient) {\n      return patient[field.id];\n    }\n\n    // For other fields, get from formData\n    if (field.id.includes(".")) {\n      // Handle nested paths (e.g., "vitals.admission.bloodPressure")\n      return field.id.split(".").reduce((obj, key) => obj?.[key], formData);\n    }\n\n    // Handle special cases\n    switch (field.type) {\n      case "multiselect":\n        if (field.id === "diagnosis") {\n          return formData.diagnosis ? formData.diagnosis.split(", ").map(d => ({ name: d })) : [];\n        }\n        if (field.id === "comorbidities") {\n          return formData.comorbidities || [];\n        }\n        return formData[field.id] || [];\n      case "investigations":\n        return formData.investigations || [];\n      case "medicineAdvice":\n        return formData[field.id] || [];\n      case "vitals":\n        return formData.vitals?.[field.prefix] || {};\n      default:\n        return formData[field.id];\n    }\n  };\n\n  // Helper function to render field based on type\n  const renderField = (field) => {\n    const value = getFieldValue(field);\n   \n    if (!field || !field.id) return null;\n\n    switch (field.type) {\n      case "vitals":\n        const vitalsData = formData.vitals?.[field.prefix];\n        return hasValue(vitalsData) && React.createElement("div", { style: styles.section },\n          React.createElement("span", { style: styles.sectionTitle }, `${field.label}:`),\n          React.createElement("span", { style: styles.sectionContent },\n            [\n              vitalsData.bloodPressure && `BP: ${vitalsData.bloodPressure} mmHg`,\n              vitalsData.heartRate && `Heart Rate: ${vitalsData.heartRate} bpm`,\n              vitalsData.temperature && `Temperature: ${vitalsData.temperature}\xb0C`,\n              vitalsData.oxygenSaturation && `O2 Saturation: ${vitalsData.oxygenSaturation}%`,\n              vitalsData.respiratoryRate && `Respiratory Rate: ${vitalsData.respiratoryRate} breaths/min`\n            ].filter(Boolean).join(", ")\n          )\n        );\n\n      case "investigations":\n        return value && value.length > 0 && React.createElement("div", null,\n          React.createElement("div", { style: styles.sectionTitle }, field.label),\n          React.createElement("div", { style: { border: "1px solid black" } },\n          React.createElement("div", { style: { marginLeft: "10px" } },\n            value.filter(inv => inv.name && inv.report).map((investigation, index) => {\n              const hasFindings = investigation.report?.findings && \n                Object.values(investigation.report.findings).some(value => value);\n              const hasImpression = investigation.report?.impression && \n                Object.values(investigation.report.impression).some(value => value);\n              const reportEntries = Object.entries(investigation.report || {})\n                .filter(([_, testData]) => testData.value);\n              const halfLength = Math.ceil(reportEntries.length / 2);\n\n              return React.createElement("div", {\n                key: index,\n                style: {\n                  marginLeft: "5px",\n                  marginBottom: "3px",\n                  display: "flex",\n                  flexDirection: hasFindings || hasImpression ? "row" : "column"\n                }\n              },\n                React.createElement("div", null,\n                  React.createElement("div", { \n                    style: { \n                      fontSize: "10px", \n                      marginBottom: "2px", \n                      fontWeight: "bold" \n                    } \n                  },\n                    `${investigation.name.toUpperCase()} (${formatDate(investigation.date)})`\n                  )\n                ),\n                (hasFindings || hasImpression) ? \n                  React.createElement("div", { style: { display: "flex", flexDirection: "row", width: "100%" } },\n                    React.createElement("div", { style: { width: "100%" } },\n                      investigation.report.findings && React.createElement("div", {\n                        style: {\n                          marginLeft: "50px",\n                          fontSize: "9px",\n                          width: "100%"\n                        }\n                      },\n                        React.createElement("div", { style: { width: "100%", fontSize: "9px" } },\n                          React.createElement("span", null, investigation.report.findings.value)\n                        )\n                      ),\n                      investigation.report.impression && React.createElement("div", {\n                        style: {\n                          marginLeft: "50px",\n                          fontSize: "9px",\n                          width: "100%",\n                          marginTop: "2px"\n                        }\n                      },\n                        React.createElement("div", { style: { width: "100%", fontSize: "9px" } },\n                          React.createElement("span", null, investigation.report.impression.value)\n                        )\n                      )\n                    )\n                  ) :\n                  React.createElement("div", { style: { display: "flex", flexDirection: "row" } },\n                    React.createElement("div", { style: { width: "50%" } },\n                      reportEntries.slice(0, halfLength).map(([testName, testData]) =>\n                        testData.value && React.createElement("div", {\n                          key: testName,\n                          style: { \n                            display: "flex", \n                            flexDirection: "row", \n                            fontSize: "9px", \n                            marginBottom: "1px",\n                            marginLeft: "5px" \n                          }\n                        },\n                          React.createElement("div", { style: { width: "60%", fontSize: "9px" } },\n                            React.createElement("span", null, formatLabel(testData.label) || testName)\n                          ),\n                          React.createElement("div", { style: { width: "20%", fontSize: "9px" } },\n                            React.createElement("span", null, testData.value)\n                          ),\n                          testData.unit && React.createElement("div", { style: { width: "20%", fontSize: "9px" } },\n                            React.createElement("span", null, testData.unit)\n                          )\n                        )\n                      )\n                    ),\n                    React.createElement("div", { style: { width: "50%" } },\n                      reportEntries.slice(halfLength).map(([testName, testData]) =>\n                        testData.value && React.createElement("div", {\n                        key: testName,\n                          style: { \n                            display: "flex", \n                            flexDirection: "row", \n                            fontSize: "9px", \n                            marginBottom: "1px",\n                            marginLeft: "5px" \n                          }\n                        },\n                          React.createElement("div", { style: { width: "60%", fontSize: "9px" } },\n                            React.createElement("span", null, formatLabel(testData.label) || testName)\n                          ),\n                          React.createElement("div", { style: { width: "20%", fontSize: "9px" } },\n                            React.createElement("span", null, testData.value)\n                          ),\n                          testData.unit && React.createElement("div", { style: { width: "20%", fontSize: "9px" } },\n                            React.createElement("span", null, testData.unit)\n                      )\n                    )\n                )\n              )\n            )\n              );\n            })\n           )\n          )\n        );\n\n      case "medicineAdvice":\n        return value && value.length > 0 && React.createElement("div", { style: styles.section },\n          React.createElement("span", { style: styles.sectionTitle ,}, field.label),\n          React.createElement("span", { style: { border: "1px solid black" } },\n          React.createElement("div", { style: { marginLeft: "20px" } },\n            value.filter(med => med.name || med.dosage || med.duration).map((med, index) => \n              React.createElement("div", { \n                key: index,\n                style: { fontSize: "11px", marginBottom: "2px" }\n              },\n                React.createElement("span", { style: { display: "inline-block", width: "20px" } },\n                  `${index + 1}.`\n                ),\n                React.createElement("span", { style: { display: "inline-block", minWidth: "200px" } },\n                  med.name\n                ),\n                (med.dosage && med.dosage !== "0-0-0") && React.createElement("span", { style: { display: "inline-block", minWidth: "150px" } },\n                  `Dosage: ${med.dosage}`\n                ),\n                med.duration && React.createElement("span", { style: { display: "inline-block" } },\n                  `${med.duration} Days`\n                )\n              )\n            )\n          )\n         )\n        );\n\n      case "multiselect":\n        if (field.id === "comorbidities") {\n          const comorbiditiesString = value?.filter(c => c.name).map(c => c.name).join(", ");\n          return comorbiditiesString && React.createElement("div", { style: styles.section },\n            React.createElement("span", { style: styles.sectionTitle }, field.label + ":"),\n            React.createElement("span", { style: styles.sectionContent }, comorbiditiesString)\n          );\n        }\n        if (field.id === "diagnosis") {\n          return React.createElement("div", { style: styles.section },\n            React.createElement("span", { style: styles.sectionTitle }, field.label + ":"),\n            React.createElement("span", { style: styles.sectionContent }, \n              Array.isArray(value) ? value.map(item => item.name).join(", ") : value\n            )\n          );\n        }\n        return React.createElement("div", { style: styles.section },\n          React.createElement("span", { style: styles.sectionTitle }, field.label + ":"),\n          React.createElement("span", { style: styles.sectionContent }, \n            Array.isArray(value) ? value.join(", ") : value\n          )\n        );\n\n      case "date":\n        return React.createElement("div", { style: styles.section },\n          React.createElement("span", { style: styles.sectionTitle }, field.label + ":"),\n          React.createElement("span", { style: styles.sectionContent }, formatDate(value))\n        );\n       case "babyTable":\n        return formData?.babyDetails?.length > 0 && React.createElement("div", null,\n      React.createElement("div", { \n        style: { \n          backgroundColor: "#663399", \n          color: "white", \n          padding: "2px 8px", \n          textAlign: "center",\n          marginBottom: "2px",\n          fontWeight: "bold"\n        } \n      }, "BABY DETAILS"),\n      React.createElement("table", { style: styles.table },\n        React.createElement("thead", null,\n          React.createElement("tr", null,\n            React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "Baby No."),\n            React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "Sex"),\n            React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "Weight (gm)"),\n            React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "Date"),\n            React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "Time"),\n            React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "APGAR Score")\n          )\n        ),\n        React.createElement("tbody", null,\n          formData?.babyDetails.map((baby, index) => \n            React.createElement("tr", { key: index },\n              React.createElement("td", { style: styles.tableCell }, baby.number || "--"),\n              React.createElement("td", { style: styles.tableCell }, baby.sex || "--"),\n              React.createElement("td", { style: styles.tableCell }, baby.weight || "--"),\n               React.createElement("td", { style: styles.tableCell }, formatDate(baby.date) || "--"),\n              React.createElement("td", { style: styles.tableCell }, baby.time || "--"),\n              React.createElement("td", { style: styles.tableCell }, baby.apgar || "--")\n            )\n          )\n        )\n      )\n    );\n      case "textarea":\n      case "text":\n      default:\n        return value && React.createElement("div", { style: styles.section },\n          React.createElement("span", { style: styles.sectionTitle }, field.label + ":"),\n          React.createElement("span", { style: styles.sectionContent }, value)\n        );\n    }\n  };\n\n  // Common styles\n  const styles = {\n    section: {\n      marginBottom: "4px",\n      display: "flex",\n      flexDirection: "column"\n    },\n    sectionTitle: {\n      fontWeight: "bold",\n      backgroundColor: "#663399",\n      color: "white",\n      textAlign: "center",\n      padding: "2px 8px",\n      marginBottom: "2px",\n    },\n    sectionContent: {\n      padding: "4px 8px",\n      border: "1px solid black",\n      fontSize: "12px",\n      whiteSpace: "pre-line"\n    },\n    table: {\n      width: "100%",\n      borderCollapse: "collapse",\n      marginBottom: "6px"\n    },\n    tableCell: {\n      border: "1px solid black",\n      padding: "2px 4px",\n      textAlign: "center",\n      fontSize: "11px"\n    }\n  };\n\n  return React.createElement("div", { ref: ref, style: { padding: "20px",paddingBottom:"25px" }, className: "print-content" },\n    // Header with purple background\n    React.createElement("div",  {},\n      React.createElement(HospitalHeader, { hospitalInfo: hospital })\n    ),\n\n    // Discharge Summary Title\n    React.createElement("div", { \n      style: { \n        backgroundColor: "#663399", \n        color: "white", \n        padding: "4px 8px", \n        textAlign: "center",\n        marginBottom: "4px",\n        fontWeight: "bold",\n        fontSize: "14px"\n      } \n    }, "DISCHARGE SUMMARY"),\n\n    // Consultant Name\n    React.createElement("div", { \n      style: { \n        backgroundColor: "#d3d3d3", \n        padding: "4px", \n        textAlign: "center",\n        marginBottom: "6px",\n        fontSize: "11px"\n      } \n    }, "Consultant: Dr Anupam Kumar Chaurasia"),\n\n    // Baby Details Section (if exists)\n    \n\n    // Patient Info Table\n    React.createElement("table", { style: styles.table },\n      React.createElement("tbody", null,\n        React.createElement("tr", null,\n          React.createElement("td", { style: styles.tableCell }, "REG NO"),\n          React.createElement("td", { style: styles.tableCell }, patient?.registrationNumber || "--"),\n          React.createElement("td", { style: styles.tableCell }, "ADMISSION NO"),\n          React.createElement("td", { style: styles.tableCell }, patient?.ipdNumber || "--")\n        ),\n        React.createElement("tr", null,\n          React.createElement("td", { style: styles.tableCell }, "NAME"),\n          React.createElement("td", { style: styles.tableCell }, patient?.name || "--"),\n          React.createElement("td", { style: styles.tableCell }, patient?.relation?.toUpperCase() || "HUSBAND"),\n          React.createElement("td", { style: styles.tableCell }, patient?.[patient?.relation] || patient?.husbandName || "--")\n        ),\n        React.createElement("tr", null,\n          React.createElement("td", { style: styles.tableCell }, "AGE/SEX"),\n          React.createElement("td", { style: styles.tableCell }, `${patient?.age || "--"}/${patient?.gender || "--"}`),\n          React.createElement("td", { style: styles.tableCell }, "MOBILE NO"),\n          React.createElement("td", { style: styles.tableCell }, patient?.contactNumber || "--")\n        ),\n        React.createElement("tr", null,\n          React.createElement("td", { style: styles.tableCell }, "ADDRESS"),\n          React.createElement("td", { style: { ...styles.tableCell, textAlign: "left" }, colSpan: "3" }, patient?.address || "--")\n        ),\n        React.createElement("tr", null,\n          React.createElement("td", { style: styles.tableCell }, "ADMISSION DATE/TIME"),\n          React.createElement("td", { style: styles.tableCell }, formatDate(formData.admissionDate)+(formData.admittedTime? " At "+formData.admittedTime:"")),\n          React.createElement("td", { style: styles.tableCell }, "DISCHARGE DATE/TIME"),\n          React.createElement("td", { style: styles.tableCell }, formatDate(formData.dateDischarged)+(formData.timeDischarged? " At "+formData.timeDischarged:""))\n        )\n      )\n    ),\n\n    // Render remaining sections from formConfig\n    (formConfig?.sections || [])\n      .filter(section => section.id !== "patientInfo") // Skip patient info section\n      .map((section, sectionIndex) => \n        React.createElement("div", { key: sectionIndex, style: { marginBottom: "4px" } },\n          section.fields\n            .filter(field => !field.hidden)\n            .map((field, fieldIndex) => renderField(field))\n        )\n    ),\n\n    // Doctor\'s Signature\n    React.createElement("div", { \n      style: { \n        width: "100%", \n        textAlign: "right", \n        marginTop: "15px",\n        paddingRight: "50px"\n      }\n    },\n      React.createElement("div", { style: { fontSize: "12px", fontWeight: "bold" } }, \n        "Doctor\'s Signature"\n      )\n    )\n  );\n}'},{name:"hybrid",value:'\n(formData, patient, hospital, formConfig, ref) => {\n  // Helper functions\n  const formatLabel = (label) => {\n    if (!label) return "";\n    const regex = /^([^)]+)|^(?:\\S+\\s?){1,3}/;\n    const match = label.match(regex);\n    return match ? match[0].trim() : label;\n  };\n\n  const formatDate = (date) => {\n    if (!date) return "--";\n    return new Date(date).toLocaleDateString(\'en-IN\', { day: \'2-digit\', month: \'2-digit\', year: \'numeric\' }).split(\'/\').join(\'-\');\n  };\n\n  const hasValue = (obj) => {\n    if (!obj) return false;\n    return Object.values(obj).some(value => value !== "" && value !== null && value !== undefined);\n  };\n\n  // Get field value helper\n  const getFieldValue = (field) => {\n    if (field.id in patient) {\n      return patient[field.id];\n    }\n\n    if (field.id.includes(".")) {\n      return field.id.split(".").reduce((obj, key) => obj?.[key], formData);\n    }\n\n    switch (field.type) {\n      case "multiselect":\n        if (field.id === "diagnosis") {\n          return formData.diagnosis ? formData.diagnosis.split(", ").map(d => ({ name: d })) : [];\n        }\n        if (field.id === "comorbidities") {\n          return formData.comorbidities || [];\n        }\n        return formData[field.id] || [];\n      case "investigations":\n        return formData.investigations || [];\n      case "medicineAdvice":\n        return formData[field.id] || [];\n      case "vitals":\n        return formData.vitals?.[field.prefix] || {};\n      default:\n        return formData[field.id];\n    }\n  };\n\n \n\n  // Field renderer\n  const renderField = (field) => {\n    const value = getFieldValue(field);\n   \n    if (!field || !field.id) return null;\n\n    switch (field.type) {\n      case "vitals":\n        const vitalsData = formData.vitals?.[field.prefix];\n        return hasValue(vitalsData) && React.createElement("div", { style: styles.section },\n          React.createElement("div", { style: styles.sectionTitle }, field.label),\n          React.createElement("div", { style: styles.sectionContent },\n            [\n              vitalsData.bloodPressure && `BP: ${vitalsData.bloodPressure} mmHg`,\n              vitalsData.heartRate && `Heart Rate: ${vitalsData.heartRate} bpm`,\n              vitalsData.temperature && `Temperature: ${vitalsData.temperature}\xb0C`,\n              vitalsData.oxygenSaturation && `O2 Saturation: ${vitalsData.oxygenSaturation}%`,\n              vitalsData.respiratoryRate && `Respiratory Rate: ${vitalsData.respiratoryRate} breaths/min`\n            ].filter(Boolean).join(", ")\n          )\n        );\n\n      case "investigations":\n        return value && value.length > 0 && React.createElement("div", null,\n          React.createElement("div", { style: styles.sectionTitle }, field.label),\n          React.createElement("div", { style: { border: "1px solid black" } },\n            React.createElement("div", { style: { marginLeft: "10px" } },\n              value.filter(inv => inv.name && inv.report).map((investigation, index) => {\n                const hasFindings = investigation.report?.findings && \n                  Object.values(investigation.report.findings).some(value => value);\n                const hasImpression = investigation.report?.impression && \n                  Object.values(investigation.report.impression).some(value => value);\n                const reportEntries = Object.entries(investigation.report || {})\n                  .filter(([_, testData]) => testData.value);\n                const halfLength = Math.ceil(reportEntries.length / 2);\n\n                return React.createElement("div", {\n                  key: index,\n                  style: {\n                    marginLeft: "5px",\n                    marginBottom: "3px",\n                    display: "flex",\n                    flexDirection: hasFindings || hasImpression ? "row" : "column"\n                  }\n                },\n                  React.createElement("div", null,\n                    React.createElement("div", { \n                      style: { \n                        fontSize: "10px", \n                        marginBottom: "2px", \n                        fontWeight: "bold" \n                      } \n                    },\n                      `${investigation.name.toUpperCase()} (${formatDate(investigation.date)})`\n                    )\n                  ),\n                  (hasFindings || hasImpression) ? \n                    React.createElement("div", { style: { display: "flex", flexDirection: "row", width: "100%" } },\n                      React.createElement("div", { style: { width: "100%" } },\n                        investigation.report.findings && React.createElement("div", {\n                          style: {\n                            marginLeft: "50px",\n                            fontSize: "9px",\n                            width: "100%"\n                          }\n                        },\n                          React.createElement("div", { style: { width: "100%", fontSize: "9px" } },\n                            React.createElement("span", null, investigation.report.findings.value)\n                          )\n                        ),\n                        investigation.report.impression && React.createElement("div", {\n                          style: {\n                            marginLeft: "50px",\n                            fontSize: "9px",\n                            width: "100%",\n                            marginTop: "2px"\n                          }\n                        },\n                          React.createElement("div", { style: { width: "100%", fontSize: "9px" } },\n                            React.createElement("span", null, investigation.report.impression.value)\n                          )\n                        )\n                      )\n                    ) :\n                    React.createElement("div", { style: { display: "flex", flexDirection: "row" } },\n                      React.createElement("div", { style: { width: "50%" } },\n                        reportEntries.slice(0, halfLength).map(([testName, testData]) =>\n                          testData.value && React.createElement("div", {\n                            key: testName,\n                            style: { \n                              display: "flex", \n                              flexDirection: "row", \n                              fontSize: "9px", \n                              marginBottom: "1px",\n                              marginLeft: "5px" \n                            }\n                          },\n                            React.createElement("div", { style: { width: "60%", fontSize: "9px" } },\n                              React.createElement("span", null, formatLabel(testData.label) || testName)\n                            ),\n                            React.createElement("div", { style: { width: "20%", fontSize: "9px" } },\n                              React.createElement("span", null, testData.value)\n                            ),\n                            testData.unit && React.createElement("div", { style: { width: "20%", fontSize: "9px" } },\n                              React.createElement("span", null, testData.unit)\n                            )\n                          )\n                        )\n                      ),\n                      React.createElement("div", { style: { width: "50%" } },\n                        reportEntries.slice(halfLength).map(([testName, testData]) =>\n                          testData.value && React.createElement("div", {\n                            key: testName,\n                            style: { \n                              display: "flex", \n                              flexDirection: "row", \n                              fontSize: "9px", \n                              marginBottom: "1px",\n                              marginLeft: "5px" \n                            }\n                          },\n                            React.createElement("div", { style: { width: "60%", fontSize: "9px" } },\n                              React.createElement("span", null, formatLabel(testData.label) || testName)\n                            ),\n                            React.createElement("div", { style: { width: "20%", fontSize: "9px" } },\n                              React.createElement("span", null, testData.value)\n                            ),\n                            testData.unit && React.createElement("div", { style: { width: "20%", fontSize: "9px" } },\n                              React.createElement("span", null, testData.unit)\n                            )\n                          )\n                        )\n                      )\n                    )\n                );\n              })\n            )\n          )\n        );\n\n      case "medicineAdvice":\n        return value && value.length > 0 && React.createElement("div", { style: styles.section },\n          React.createElement("div", { style: styles.sectionTitle }, field.label),\n          React.createElement("div", { style: { border: "1px solid black" } },\n            React.createElement("div", { style: { marginLeft: "20px" } },\n              value.filter(med => med.name || med.dosage || med.duration).map((med, index) => \n                React.createElement("div", { \n                  key: index,\n                  style: { fontSize: "11px", marginBottom: "2px" }\n                },\n                  React.createElement("span", { style: { display: "inline-block", width: "20px" } },\n                    `${index + 1}.`\n                  ),\n                  React.createElement("span", { style: { display: "inline-block", minWidth: "200px" } },\n                    med.name\n                  ),\n                  (med.dosage && med.dosage !== "0-0-0") && React.createElement("span", { style: { display: "inline-block", minWidth: "150px" } },\n                    `Dosage: ${med.dosage}`\n                  ),\n                  med.duration && React.createElement("span", { style: { display: "inline-block" } },\n                    `${med.duration} Days`\n                  )\n                )\n              )\n            )\n          )\n        );\n\n      case "multiselect":\n        if (field.id === "comorbidities") {\n          const comorbiditiesString = value?.filter(c => c.name).map(c => c.name).join(", ");\n          return comorbiditiesString && React.createElement("div", { style: styles.section },\n            React.createElement("div", { style: styles.sectionTitle }, field.label),\n            React.createElement("div", { style: styles.sectionContent }, comorbiditiesString)\n          );\n        }\n        if (field.id === "diagnosis") {\n          return React.createElement("div", { style: styles.section },\n            React.createElement("div", { style: styles.sectionTitle }, field.label),\n            React.createElement("div", { style: styles.sectionContent }, \n              Array.isArray(value) ? value.map(item => item.name).join(", ") : value\n            )\n          );\n        }\n        return React.createElement("div", { style: styles.section },\n          React.createElement("div", { style: styles.sectionTitle }, field.label),\n          React.createElement("div", { style: styles.sectionContent }, \n            Array.isArray(value) ? value.join(", ") : value\n          )\n        );\n\n      case "date":\n        return React.createElement("div", { style: styles.section },\n          React.createElement("div", { style: styles.sectionTitle }, field.label),\n          React.createElement("div", { style: styles.sectionContent }, formatDate(value))\n        );\n\n      case "babyTable":\n        return formData?.babyDetails?.length > 0 && React.createElement("div", null,\n          React.createElement("div", { style: styles.sectionTitle }, "BABY DETAILS"),\n          React.createElement("table", { style: styles.table },\n            React.createElement("thead", null,\n              React.createElement("tr", null,\n                React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "Baby No."),\n                React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "Sex"),\n                React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "Weight (gm)"),\n                React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "Date"),\n                React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "Time"),\n                React.createElement("th", { style: { ...styles.tableCell, backgroundColor: "#f0f0f0", fontWeight: "bold" } }, "APGAR Score")\n              )\n            ),\n            React.createElement("tbody", null,\n              formData?.babyDetails.map((baby, index) => \n                React.createElement("tr", { key: index },\n                  React.createElement("td", { style: styles.tableCell }, baby.number || "--"),\n                  React.createElement("td", { style: styles.tableCell }, baby.sex || "--"),\n                  React.createElement("td", { style: styles.tableCell }, baby.weight || "--"),\n                  React.createElement("td", { style: styles.tableCell }, formatDate(baby.date) || "--"),\n                  React.createElement("td", { style: styles.tableCell }, baby.time || "--"),\n                  React.createElement("td", { style: styles.tableCell }, baby.apgar || "--")\n                )\n              )\n            )\n          )\n        );\n\n      case "textarea":\n      case "text":\n      default:\n        return value && React.createElement("div", { style: styles.section },\n          React.createElement("div", { style: styles.sectionTitle }, field.label),\n          React.createElement("div", { style: styles.sectionContent }, value)\n        );\n    }\n  };\n\n  return React.createElement("div", { ref: ref, style: styles.page, className: "print-content" },\n    React.createElement("div", { className: " print:block mb-2" },\n      React.createElement(HospitalHeader, { hospitalInfo: hospital })\n    ),\n    React.createElement("div", { style: styles.title }, "Dischar43ge Summary"),\n    \n    // Patient Info Section\n    React.createElement("div", { style: { ...styles.section } },\n      React.createElement("div", { style: { ...styles.patientInfoSection } },\n        React.createElement("div", { style: { ...styles.row, marginBottom: "2px" } },\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Name: "),\n            React.createElement("span", { style: styles.value }, patient?.name || "--")\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Age/Gender: "),\n            React.createElement("span", { style: styles.value }, \n              patient?.age && patient?.gender ? `${patient?.age} yrs/${patient?.gender}` : "--"\n            )\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "UHID No: "),\n            React.createElement("span", { style: styles.value }, patient?.registrationNumber || "--")\n          )\n        ),\n        React.createElement("div", { style: { ...styles.row, marginBottom: "2px" } },\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "IPD No: "),\n            React.createElement("span", { style: styles.value }, patient?.ipdNumber || "--")\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Admit Date: "),\n            React.createElement("span", { style: styles.value }, formatDate(formData.admissionDate))\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Discharge Date: "),\n            React.createElement("span", { style: styles.value }, formatDate(formData.dateDischarged))\n          )\n        ),\n        React.createElement("div", { style: styles.row },\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Room: "),\n            React.createElement("span", { style: styles.value }, patient?.roomNumber || "--")\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Contact: "),\n            React.createElement("span", { style: styles.value }, patient?.contactNumber || "--")\n          ),\n          React.createElement("span", { style: styles.infoItem },\n            React.createElement("span", { style: styles.label }, "Address: "),\n            React.createElement("span", { style: { ...styles.value, whiteSpace: "nowrap", textOverflow: "ellipsis", overflow: "hidden" } },\n              patient?.address || "--"\n            )\n          )\n        )\n      )\n    ),\n\n    // Render form config sections\n    (formConfig?.sections || [])\n      .filter(section => section.id !== "patientInfo")\n      .map((section, sectionIndex) => \n        React.createElement("div", { key: sectionIndex },\n          section.fields\n            .filter(field => !field.hidden)\n            .map((field, fieldIndex) => renderField(field))\n        )\n      ),\n\n    // Doctor\'s Signature\n    React.createElement("div", { \n      style: { \n        width: "100%", \n        textAlign: "right", \n        marginTop: "15px",\n        paddingRight: "50px"\n      }\n    },\n      React.createElement("div", { style: { fontSize: "12px", fontWeight: "bold" } }, \n        "Doctor\'s Signature"\n      )\n    )\n  );\n}'},...n||[]])),[s,i]=(0,t.useState)(r[0]||{name:"",value:""}),[o,l]=(0,t.useState)(null);return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex flex-col gap-6 mb-6",children:[(0,X.jsx)("div",{className:"flex justify-between items-center",children:(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Discharge Template Preview"})}),(0,X.jsx)("div",{className:"flex flex-wrap gap-3",children:r.map(((e,t)=>(0,X.jsx)("div",{className:"relative",children:o===t?(0,X.jsx)("div",{className:"flex items-center gap-2",children:(0,X.jsx)(Vn.p,{value:e.name,onChange:t=>((e,t)=>{const n=r.findIndex((t=>t===e));if(-1===n)return;const o=r.map(((e,r)=>r===n?{...e,name:t}:e));a(o),s===e&&i(o[n])})(e,t.target.value),onBlur:()=>l(null),onKeyDown:e=>{"Enter"===e.key&&l(null)},className:"w-[150px]",autoFocus:!0})}):(0,X.jsx)(w.$,{variant:"outline",className:(0,Ee.cn)("relative min-w-[150px]",s===e&&"border-2 border-primary bg-primary/10"),onClick:()=>i(e),onDoubleClick:()=>l(t),children:e.name||"Unnamed Template"})},t)))})]}),(0,X.jsx)("div",{className:"flex justify-center bg-gray-100 p-4 min-h-[calc(100vh-200px)] overflow-auto",children:(0,X.jsx)("div",{className:"bg-white shadow-lg",style:{width:"210mm",height:"297mm",padding:"8mm",margin:"0 auto"},children:(0,X.jsx)(qQ.A,{hospital:e,patient:{},formData:{},templateString:null===s||void 0===s?void 0:s.value})})})]})}function KQ(){const{hospitalInfo:e}=(0,j.d4)((e=>e.hospital)),n=(0,j.wA)(),r=(0,j.d4)((e=>e.templates.headerTemplateArray)),[a,s]=(0,t.useState)([{name:"experimental",value:'\nReact.createElement("div", { className: "" },\n    React.createElement("div", { className: "flex items-center gap-4 w-full" },\n      React.createElement("img", {\n        src: hospitalInfo?.hospitalLogo2Blob,\n        alt: "Medical Symbol",\n        style: {\n          width: "100px",\n          height: "100px",\n          objectFit: "contain"\n        }\n      }),\n      React.createElement("div", { className: "flex-1 text-center" },\n        React.createElement("h1", { \n          className: "text-[#000080] text-4xl font-bold mb-1",\n          style: { fontFamily: "\'Brush Script MT\', cursive" }\n        }, \n          hospitalInfo?.doctorName || "Dr. Shiv Narayan Singh"\n        ),\n        React.createElement("div", { className: "text-sm mb-1" },\n          "M.S. (Gen. Surgery), M.C.H. (G.I. Surgery)"\n        ),\n        React.createElement("div", { className: "text-sm mb-1" },\n          "F.M.A.S. (Fellow of Minimal Access Surgeons of India Given by AMASI)"\n        ),\n        React.createElement("div", { className: "text-sm mb-1" },\n          "Assistant Professor (Dept. of Surgery)"\n        ),\n        React.createElement("div", { className: "text-sm" },\n          "ANUGRAH NARAYAN MAGADH MEDICAL COLLEGE & HOSPITAL, GAYA"\n        )\n      ),\n      React.createElement("img", {\n        src: hospitalInfo?.hospitalLogo2Blob,\n        alt: "Medical Symbol",\n        style: {\n          width: "100px",\n          height: "100px",\n          objectFit: "contain"\n        }\n      })\n    )\n  ,\n   React.createElement("div", { className: "flex justify-end mb-2 mt-20" },\n    React.createElement("div", { className: "text-sm" }, "Date ____________")\n  )\n \n    \n   \n   \n   \n   \n  \n)\n'},{name:"System Default",value:Kn.h},{name:"image",value:'\nReact.createElement("div", { \n  className: "mb-2",\n  style: {\n    maxWidth: "794px",\n    margin: "0 auto"\n  }\n},\n  React.createElement("img", {\n    src: hospitalInfo?.hospitalLogo2Blob,\n    alt: "Hospital Header",\n    style: {\n      width: "100%",\n      height: "auto",\n      objectFit: "contain"\n    }\n  })\n)\n'},...r||[]]),[i,o]=(0,t.useState)(a[0]||{name:"",value:""}),[l,c]=(0,t.useState)(null),d=(0,Gn.G)((null===i||void 0===i?void 0:i.value)||"");return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex flex-col gap-6 mb-6",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Hospital Header Preview"}),(0,X.jsx)(w.$,{onClick:()=>{i&&n((0,R.ub)({headerTemplate:{name:i.name,value:i.value}}))},children:"Save Template"})]}),(0,X.jsx)("div",{className:"flex flex-wrap gap-3",children:a.map(((e,t)=>(0,X.jsx)("div",{className:"relative",children:l===t?(0,X.jsx)("div",{className:"flex items-center gap-2",children:(0,X.jsx)(Vn.p,{value:e.name,onChange:t=>((e,t)=>{const n=a.findIndex((t=>t===e));if(-1===n)return;const r=a.map(((e,r)=>r===n?{...e,name:t}:e));s(r),i===e&&o(r[n])})(e,t.target.value),onBlur:()=>c(null),onKeyDown:e=>{"Enter"===e.key&&c(null)},className:"w-[150px]",autoFocus:!0})}):(0,X.jsx)(w.$,{variant:"outline",className:(0,Ee.cn)("relative min-w-[150px]",i===e&&"border-2 border-primary bg-primary/10"),onClick:()=>o(e),onDoubleClick:()=>c(t),children:e.name||"Unnamed Template"})},t)))})]}),(0,X.jsx)("div",{className:"flex justify-center bg-gray-100 p-4 min-h-[calc(100vh-200px)] overflow-auto",children:(0,X.jsx)("div",{className:"bg-white shadow-lg",style:{width:"210mm",height:"297mm",padding:"8mm",margin:"0 auto"},children:(0,X.jsx)(d,{hospitalInfo:e})})})]})}function YQ(){const e=(0,j.wA)(),{hospitalInfo:n}=(0,j.d4)((e=>e.hospital)),r=(0,j.d4)((e=>e.templates.opdPrescriptionTemplateArray)),[a,s]=((0,t.useRef)(null),(0,t.useState)([{name:"System Default",value:Xg},{name:"Experimental",value:'\n( patient, vitals, prescription, labTests, selectedComorbidities, hospital, ref) => {\n  const capitalizeAll = (str) => {\n    return str?.toUpperCase() || \'\';\n  };\n\n  const VitalItem = ({ label, value, unit }) => {\n    if (value === undefined || value === null || value === \'\') {\n      return null;\n    }\n    return React.createElement("div", { style: { fontSize: "8px" } },\n      React.createElement("div", null,\n        React.createElement("span", { style: { fontWeight: "bold" } },\n          label === "O2" ? React.createElement(React.Fragment, null, "O", React.createElement("sub", null, "2"), "%") : capitalizeAll(label),\n          ": "\n        ),\n        React.createElement("span", null,\n          value, " ", unit\n        )\n      )\n    );\n  };\n\n  const vitalItems = [\n    { label: "Temperature", value: vitals.temperature, unit: "\xb0C" },\n    { label: "Heart Rate", value: vitals.heartRate, unit: "bpm" },\n    { label: "Blood Pressure", value: vitals.bloodPressure, unit: "mmHg" },\n    { label: "Respiratory Rate", value: vitals.respiratoryRate, unit: "bpm" },\n    { label: "Height", value: vitals.height, unit: "cm" },\n    { label: "Weight", value: vitals.weight, unit: "kg" },\n    { label: "BMI", value: vitals.bmi, unit: "" },\n    { label: "O2", value: vitals.oxygenSaturation, unit: "%" },\n  ];\n\n  const presentVitals = vitalItems.filter(item => \n    item.value !== undefined && item.value !== null && item.value !== \'\'\n  );\n\n  return React.createElement("div", { ref: ref, style: { width: "100%",padding: "25px" } ,className: "print-content"},\n    React.createElement("div", { style: { paddingBottom: "5px" } },\n      React.createElement("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2px", position: "relative" } },\n        React.createElement("img", {\n          src: hospital?.hospitalLogo2Blob,\n          alt: "Brain Icon",\n          style: { width: "100px", height: "80px" }\n        }),\n        React.createElement("div", { style: { flex: 1, textAlign: "center", position: "relative", marginTop: "-10px" } },\n          React.createElement("h1", { \n            style: { \n              fontSize: "56px",\n              color: "#1a237e",\n              fontWeight: "bold"\n            }\n          }, "\u0906\u0926\u094d\u200c\u092f\u093e \u0928\u094d\u092f\u0942\u0930\u094b \u0938\u0947\u0928\u094d\u091f\u0930")\n        ),\n        React.createElement("img", {\n          src: hospital?.hospitalLogo2Blob,\n          alt: "Brain Icon",\n          style: { width: "100px", height: "80px" }\n        })\n      ),\n      React.createElement("div", { style: { textAlign: "center", position: "relative", marginTop: "-10px" } },\n        React.createElement("p", { style: { fontSize: "14px", color: "#333333", marginBottom: "2px", fontWeight: "bold" } }, \n          "\u092e\u094b\u0939\u0932\u094d\u0932\u093e\u0926\u093e\u0930 \u0915\u0947 \u0905\u0926\u0930, \u092e\u0941\u0930\u093e\u0930\u092a\u0941\u0930 \u092e\u094b\u0921\u093c \u091c\u09400 \u092c\u09400 \u0930\u094b\u0921, \u0917\u092f\u093e"\n        ),\n        React.createElement("div", { style: { display: "flex", justifyContent: "center", gap: "20px", fontWeight: "bold" } },\n          React.createElement("p", { style: { fontSize: "14px", color: "#333333" } },\n            "Mob: 7463811885"\n          ),\n          React.createElement("p", { style: { fontSize: "14px", color: "#333333" } },\n            "Mob: 9199029251"\n          )\n        )\n      ),\n      React.createElement("div", { style: { display: "flex", justifyContent: "space-between", position: "relative", marginTop: "-30px" } },\n        React.createElement("div", null,\n          React.createElement("h2", { style: { fontSize: "24px", color: "#1a237e", fontWeight: "bold" } },\n            "\u0921\u093e0 \u091c\u092f\u0947\u0928\u094d\u0926\u094d\u0930 \u0915\u0941\u092e\u093e\u0930"\n          ),\n          React.createElement("p", { style: { fontSize: "10px", color: "#333333", fontWeight: "bold" } },\n            "M.B.B.S, M.ch (Neurosurgery)",\n            React.createElement("br"),\n            "Associate Professor (J.N.M.M.C.H Gaya)",\n            React.createElement("br"),\n            "Consultant Neurosurgeon AIIMS, Gaya",\n            React.createElement("br"),\n            "Ex Assistant Professor N.M.C.H., Sasaram",\n            React.createElement("br"),\n            "Ex Senior Resident (Rims Ranchi)",\n            React.createElement("br"),\n            "Specialised in Microscopic",\n            React.createElement("br"),\n            "Endoscopic Brain & Spine Surgery",\n            React.createElement("br"),\n            "Reg No.: 36623"\n          )\n        ),\n        React.createElement("div", { style: { display: "flex", justifyContent: "space-between", fontSize: "10px", color: "#333333", fontWeight: "bold", position: "absolute", top: "100px", left: "200px" } },\n          React.createElement("div", { style: { display: "flex", flexDirection: "column", justifyContent: "center", alignItems: "center" } },\n            "\u0938\u094b\u092e\u0935\u093e\u0930 \u0938\u0947 \u0936\u0928\u093f\u0935\u093e\u0930",\n            React.createElement("br"),\n            "\u0936\u093e\u092e 05:00 \u092c\u091c\u0947 \u0938\u0947 07:00 \u092c\u091c\u0947 \u0924\u0915"\n          )\n        ),\n        React.createElement("div", { style: { display: "flex", justifyContent: "space-between", fontSize: "10px", color: "#333333", fontWeight: "bold", position: "absolute", top: "100px", right: "150px" } },\n          React.createElement("div", { style: { display: "flex", flexDirection: "column", justifyContent: "center", alignItems: "center" } },\n            "\u0938\u094b\u092e\u0935\u093e\u0930 \u0938\u0947 \u0936\u0928\u093f\u0935\u093e\u0930",\n            React.createElement("br"),\n            "\u0936\u093e\u092e 05:00 \u092c\u091c\u0947 \u0938\u0947 07:00 \u092c\u091c\u0947 \u0924\u0915",\n            React.createElement("br"),\n            "\u0930\u0935\u093f\u0935\u093e\u0930",\n            React.createElement("br"),\n            "\u0938\u0941\u092c\u0939 09:00 \u092c\u091c\u0947 \u0938\u0947 11:00 \u092c\u091c\u0947 \u0924\u0915"\n          )\n        ),\n        React.createElement("div", { style: { display: "flex", justifyContent: "center", alignItems: "center" } },\n          React.createElement("img", {\n            src: hospital?.hospitalLogoBlob,\n            alt: "Hospital Logo",\n            style: { width: "100px", height: "140px", marginTop: "30px" }\n          })\n        ),\n        React.createElement("div", { style: { display: "flex", textAlign: "right", flexDirection: "column" } },\n          React.createElement("h2", { style: { fontSize: "24px", color: "#1a237e", fontWeight: "bold", marginBottom: "4px" } },\n            "\u0921\u093e0 \u0928\u093f\u092d\u093e"\n          ),\n          React.createElement("p", { style: { fontSize: "10px", color: "#333333", fontWeight: "bold" } },\n            "M.B.B.S, MD (Biochemistry)",\n            React.createElement("br"),\n            "Assistant Professor IMCH, Sasaram",\n            React.createElement("br"),\n            "Ex Medical Officer",\n            React.createElement("br"),\n            "Sadar Hospital, Aurangabad",\n            React.createElement("br"),\n            "Ex Resident ANMMCH, Gaya",\n            React.createElement("br"),\n            "Reg No. 37738"\n          )\n        )\n      )\n    ),\n\n    React.createElement("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "10px" } },\n      React.createElement("div"),\n      React.createElement("h1", { style: { fontSize: "15px", color: "#1a5f7a", fontWeight: "bold", textAlign: "center", flex: 1 } }, "OPD Prescription"),\n      React.createElement("div", { style: { fontSize: "14px", color: "#2c3e50",fontWeight: "bold" } }, format(new Date(), "dd/MM/yyyy"))\n    ),\n\n    React.createElement("div", { style: { display: "grid", gridTemplateColumns: "1fr 1fr", gap: "10px", marginBottom: "10px" } },\n      React.createElement("div", { style: { display: "flex", gap: "5px" } },\n        React.createElement("span", { style: { fontWeight: "bold", fontSize: "14px" } }, "Name:"),\n        React.createElement("span", { style: { fontSize: "14px" } }, patient?.name || \'\')\n      ),\n      React.createElement("div", { style: { display: "flex", gap: "5px" } },\n        React.createElement("span", { style: { fontWeight: "bold", fontSize: "14px" } }, "Age/Sex:"),\n        React.createElement("span", { style: { fontSize: "14px" } }, `${patient?.age || \'\'}/ ${patient?.gender || \'\'}`)\n      ),\n      React.createElement("div", { style: { display: "flex", gap: "5px" } },\n        React.createElement("span", { style: { fontWeight: "bold", fontSize: "14px" } }, "UHID No:"),\n        React.createElement("span", { style: { fontSize: "14px" } }, patient?.registrationNumber || \'\')\n      ),\n      React.createElement("div", { style: { display: "flex", gap: "5px" } },\n        React.createElement("span", { style: { fontWeight: "bold", fontSize: "14px" } }, "Contact:"),\n        React.createElement("span", { style: { fontSize: "14px" } }, patient?.contactNumber || \'\')\n      )\n    ),\n\n    presentVitals.length > 0 && React.createElement("div", { style: { marginBottom: "10px" } },\n      React.createElement("div", { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", marginBottom: "5px" } }, "Vitals"),\n      React.createElement("div", { style: { display: "grid", gridTemplateColumns: "repeat(4, 1fr)", gap: "5px" } },\n        presentVitals.map((item, index) => \n          React.createElement(VitalItem, { key: index, ...item })\n        )\n      )\n    ),\n\n    prescription?.chiefComplaints && React.createElement("div", { style: { marginBottom: "10px" } },\n      React.createElement("div", { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", marginBottom: "5px" } }, "Chief Complaints"),\n      React.createElement("div", { style: { fontSize: "14px" } }, prescription.chiefComplaints)\n    ),\n\n    prescription?.diagnosis && React.createElement("div", { style: { marginBottom: "10px" } },\n      React.createElement("div", { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", marginBottom: "5px" } }, "Diagnosis"),\n      React.createElement("div", { style: { fontSize: "14px" } }, prescription.diagnosis)\n    ),\n\n    selectedComorbidities?.length > 0 && React.createElement("div", { style: { marginBottom: "10px" } },\n      React.createElement("div", { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", marginBottom: "5px" } }, "Comorbidities"),\n      selectedComorbidities.map((comorbidity, index) =>\n        React.createElement("div", { key: index, style: { fontSize: "14px" } }, comorbidity.name)\n      )\n    ),\n         labTests?.length > 0 && React.createElement("div", { style: { marginBottom: "10px" } },\n      React.createElement("div", { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", marginBottom: "5px" } }, "Lab Tests"),\n      React.createElement("div", { style: { fontSize: "14px" } }, labTests.join(\', \'))\n    ),\n   prescription?.medications?.length > 0 &&\n  React.createElement("div", { style: { marginBottom: "10px" } },\n    prescription.medications.some(medication => medication.name) && (\n      React.createElement("div", { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", marginBottom: "5px" } }, "Medications")\n    ),\n    React.createElement("div", { style: { width: "100%" } },\n      prescription.medications\n        .filter(medication => medication.name) // Only include medications with a name\n        .map((medication, index) =>\n          React.createElement("div", { key: index, style: { display: "grid", gridTemplateColumns: "5% 35% 30% 30%", marginBottom: "3px", fontSize: "14px" } },\n            React.createElement("span", null, `${index + 1}.`),\n            React.createElement("span", null, medication.name),\n            React.createElement("span", null, medication.frequency),\n            React.createElement("span", null, `${medication.duration} days`)\n          )\n        )\n    )\n  ),\n\n\n    prescription?.advice && React.createElement("div", { style: { marginBottom: "10px" } },\n      React.createElement("div", { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", marginBottom: "5px" } }, "Advice"),\n      React.createElement("div", { style: { fontSize: "14px" } }, prescription.advice)\n    ),\n\n    labTests?.length > 0 && React.createElement("div", { style: { marginBottom: "10px" } },\n      React.createElement("div", { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", marginBottom: "5px" } }, "Lab Tests"),\n      React.createElement("div", { style: { fontSize: "14px" } }, labTests.join(\', \'))\n    ),\n\n    prescription?.followUp && React.createElement("div", { style: { marginBottom: "10px" } },\n      React.createElement("div", { style: { fontSize: "14px", fontWeight: "bold", color: "#34495e", marginBottom: "5px" } }, "Follow Up"),\n      React.createElement("div", { style: { fontSize: "14px" } }, prescription.followUp)\n    ),\n\n  );\n}'},...r||[]])),[i,o]=(0,t.useState)(a[0]||{name:"",value:""}),[l,c]=(0,t.useState)(null);return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex flex-col gap-6 mb-6",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"OPD Prescription Template Preview"}),(0,X.jsx)(w.$,{onClick:()=>{i&&e((0,R.ub)({opdPrescriptionTemplateArray:a.filter((e=>e!==a[0]))}))},children:"Save Template"})]}),(0,X.jsx)("div",{className:"flex flex-wrap gap-3",children:a.map(((e,t)=>(0,X.jsx)("div",{className:"relative",children:l===t?(0,X.jsx)("div",{className:"flex items-center gap-2",children:(0,X.jsx)(Vn.p,{value:e.name,onChange:t=>((e,t)=>{const n=a.findIndex((t=>t===e));if(-1===n)return;const r=a.map(((e,r)=>r===n?{...e,name:t}:e));s(r),i===e&&o(r[n])})(e,t.target.value),onBlur:()=>c(null),onKeyDown:e=>{"Enter"===e.key&&c(null)},className:"w-[150px]",autoFocus:!0})}):(0,X.jsx)(w.$,{variant:"outline",className:(0,Ee.cn)("relative min-w-[150px]",i===e&&"border-2 border-primary bg-primary/10"),onClick:()=>{o(e)},onDoubleClick:()=>c(t),children:e.name||"Unnamed Template"})},t)))})]}),(0,X.jsx)("div",{className:"flex justify-center bg-gray-100 p-4 min-h-[calc(100vh-200px)] overflow-auto",children:(0,X.jsx)("div",{className:"bg-white shadow-lg",style:{width:"210mm",height:"297mm",padding:"6mm 5mm",margin:"0 auto"},children:(0,X.jsx)(Zg,{hospital:n,patient:{},formData:{comorbidities:[{name:"BP"},{name:"CKD"},{name:"Sugar"}],diagnosis:[{name:"Fever"},{name:"Cold"}],labTests:[{name:"CBC"},{name:"Reticulocyte Count"}],medications:[{name:"Paracetamol",frequency:"100mg",duration:"10 days"},{name:"Crocin",frequency:"100mg",duration:"10 days"}]},field:kn.sections})})})]})}function XQ(){(0,j.wA)();const{hospitalInfo:e}=(0,j.d4)((e=>e.hospital)),n=(0,j.d4)((e=>e.templates.opdRxTemplateArray)),r={patient:{name:"Sample Patient",age:"45-1",gender:"Male",address:"123 Sample Street"},registrationNumber:"REG123",contactNumber:"9876543210",guardianName:"Sample Guardian",createdAt:(new Date).toISOString(),bookingDate:(new Date).toISOString(),doctor:{name:"Dr. Sample Doctor",_id:"sample_doctor_id"},department:"General Medicine",vitals:{bloodPressure:"",weight:"70"}},[a,s]=(0,t.useState)([{name:"System Default",value:gx},{name:"Experimental",value:'(patient, hospital, ref) => {\n    const renderField = (label, value, suffix = \'\') => {\n        if (!value) return null;\n        return React.createElement("div", { className: "flex gap-2" },\n            React.createElement("span", { className: "font-bold min-w-[100px]" }, label),\n            React.createElement("span", null, suffix ? `${value} ${suffix}` : value)\n        );\n    };\n\n    // Create vitals section only if any vitals exist\n    const renderVitals = () => {\n        const hasVitals = patient?.vitals?.bloodPressure || patient?.vitals?.weight || patient?.vitals?.temperature;\n        if (!hasVitals) return null;\n\n        return React.createElement("div", { className: "flex flex-wrap gap-4" },\n            patient?.vitals?.bloodPressure && renderField("BP", patient.vitals.bloodPressure, "mmHg"),\n            patient?.vitals?.temperature && renderField("Temp", patient.vitals.temperature, "\xb0F"),\n            patient?.vitals?.weight && renderField("Weight", patient.vitals.weight, "kg")\n        );\n    };\n\n    return React.createElement("div", { className: "print-content p-5" },\n        // Header Section\n        React.createElement("div", { className: "" },\n            React.createElement("div", { className: "flex items-center gap-4 w-full" },\n                React.createElement("img", {\n                    src: hospital?.hospitalLogo2Blob,\n                    alt: "Medical Symbol",\n                    style: {\n                        width: "100px",\n                        height: "100px",\n                        objectFit: "contain"\n                    }\n                }),\n                React.createElement("div", { className: "flex-1 text-center" },\n                    React.createElement("h1", { \n                        className: "text-[#000080] text-4xl font-bold mb-1",\n                        style: { fontFamily: "\'Brush Script MT\', cursive" }\n                    }, \n                        hospital?.doctorName || "Dr. Shiv Narayan Singh"\n                    ),\n                    React.createElement("div", { className: "text-sm mb-1" },\n                        "M.S. (Gen. Surgery), M.C.H. (G.I. Surgery)"\n                    ),\n                    React.createElement("div", { className: "text-sm mb-1" },\n                        "F.M.A.S. (Fellow of Minimal Access Surgeons of India Given by AMASI)"\n                    ),\n                    React.createElement("div", { className: "text-sm mb-1" },\n                        "Assistant Professor (Dept. of Surgery)"\n                    ),\n                    React.createElement("div", { className: "text-sm" },\n                        "ANUGRAH NARAYAN MAGADH MEDICAL COLLEGE & HOSPITAL, GAYA"\n                    )\n                ),\n                React.createElement("img", {\n                    src: hospital?.hospitalLogo2Blob,\n                    alt: "Medical Symbol",\n                    style: {\n                        width: "100px",\n                        height: "100px",\n                        objectFit: "contain"\n                    }\n                })\n            ),\n            React.createElement("div", { className: "flex justify-between items-center mb-2 mt-4" },\n                React.createElement("div", { className: "text-sm font-bold" }, \n                    patient?.registrationNumber ? `UHID/Reg No: ${patient.registrationNumber}` : ""\n                ),\n                React.createElement("div", { className: "text-sm" }, \n                    "Date: " + new Date(patient?.createdAt).toLocaleDateString("en-IN")\n                )\n            )\n        ),\n\n        // Patient Details Section - Grid Layout\n        React.createElement("div", { \n            style: {\n               \n                width: \'100%\',\n                display: \'grid\',\n                gridTemplateColumns: \'repeat(2, 1fr)\',\n                gap: \'12px\',\n                padding: \'15px\',\n                backgroundColor: \'#f8f8f8\',\n                borderRadius: \'8px\',\n                border: \'1px solid #e0e0e0\',\n                boxShadow: \'0 1px 3px rgba(0,0,0,0.1)\'\n            }\n        },\n            React.createElement("div", { className: "grid gap-3" },\n                renderField("Name", patient?.patient?.name),\n                renderField("Age/Sex", patient?.patient?.age && patient?.patient?.gender ? \n                    `${patient.patient.age}  / ${patient.patient.gender}` : null\n                ),\n                renderField("Guardian", patient?.guardianName)\n            ),\n            React.createElement("div", { className: "grid gap-3" },\n                renderField("Mobile", patient?.patient?.contactNumber),\n                renderField("Address", patient?.patient?.address),\n                renderVitals()\n            )\n        )\n    );\n}'},{name:"Minimal",value:'(patient, hospital, ref) => {\n    const renderField = (label, value,valueundersocre=true,suffix = \'\') => {\n        return React.createElement("div", { className: "flex gap-2" },\n            React.createElement("span", { className: "font-bold min-w-[100px] " }, label),\n            React.createElement("span", null, value ? (suffix ? `${value} ${suffix}` : value) : valueundersocre?"________________":null)\n        );\n    };\n\n    return React.createElement("div", { className: "print-content p-5" },\n        // Header Section with Dr. REEMA KUMARI details\n        React.createElement("div", { className: "" },\n            React.createElement("div", { className: "flex items-center gap-4 w-full" },\n                React.createElement("img", {\n                    src: hospital?.hospitalLogo2Blob,\n                    alt: "Medical Symbol",\n                    style: {\n                        width: "100px",\n                        height: "100px",\n                        objectFit: "contain"\n                    }\n                }),\n                React.createElement("div", { className: "flex-1 text-center font-bold" },\n                    React.createElement("h1", { \n                        className: "text-[#000080] text-4xl mb-1",\n                        style: { fontFamily: "\'Brush Script MT\', cursive" }\n                    }, \n                        "Dr. REEMA KUMARI"\n                    ),\n                    React.createElement("div", { className: "text-sm mb-1" },\n                        "Professor"\n                    ),\n                    React.createElement("div", { className: "text-sm mb-1" },\n                        "Department of Obs/Gynae"\n                    ),\n                    React.createElement("div", { className: "text-sm" },\n                        "ANUGRAH NARAYAN MAGADH MEDICAL COLLEGE & HOSPITAL, GAYA"\n                    ),\n                    React.createElement("div", { className: "text-sm mb-1" },\n                        "Ex. Senior Resident | GIMS Departement of Reproductive Biology, Patna"\n                    )\n                ),\n                React.createElement("img", {\n                    src: hospital?.hospitalLogo2Blob,\n                    alt: "Medical Symbol",\n                    style: {\n                        width: "100px",\n                        height: "100px",\n                        objectFit: "contain"\n                    }\n                })\n            )\n        ),\n\n      \n        // Patient Details Section\n        React.createElement("div", { \n            style: {\n                padding: \'0 15px\',\n                display: \'grid\',\n                gap: \'12px\',\n                marginTop: \'20px\',\n                marginBottom:"40px"\n            }\n        },\n            // Name and Date Section\n            React.createElement("div", { className: "grid gap-3" },\n                React.createElement("div", { className: "flex justify-between w-full" },\n                    renderField("Name", patient?.patient?.name),\n                    renderField("Reg. No", patient?.registrationNumber),\n                    renderField("Date", patient?.bookingDate ? new Date(patient?.bookingDate).toLocaleDateString("en-IN") : null)\n                ),\n                React.createElement("div", { className: "flex justify-between w-full" },\n                    renderField("Address", patient?.patient?.address),\n                    renderField("Age/Sex", patient?.patient?.age && patient?.patient?.gender ? \n                        `${patient.patient.age} / ${patient.patient.gender}` : null\n                    ),\n                    renderField("Late Date", "")\n                )\n            ),\n\n            // Medical History Grid\n            React.createElement("div", { \n                \n                style: {\n                    display:"flex",\n                    justifyContent:"space-between",\n                    borderTop: "2px solid #e0e0e0",\n                    paddingTop: "12px"\n                }\n            },\n               \n\n\n                //left column\n                React.createElement("div", { className: " flex  flex-col justify-between" },\n                    renderField("M/H", ""),\n                    renderField("O/H", ""),\n                ),\n                React.createElement("div", { className: " flex  flex-col gap-5" },\n                    renderField("BP", patient?.vitals?.bloodPressure, "mmHg"),\n                    renderField("Weight", patient?.vitals?.weight, "kg"),\n               \n               \n                    renderField("Bowel bladder", ""),\n                    renderField("CHEST CVS", "")\n                ),\n                \n            )\n\n           \n        ),\n        \n    \n     React.createElement("div", { className: "pl-[15px] pt-[80px]  flex flex-col  gap-5" },\n                renderField("Medical History", "",valueundersocre=false),\n                renderField("Surgical History", "",valueundersocre=false),\n                renderField("Drug History", "",valueundersocre=false),\n                renderField("Allergies", "",valueundersocre=false),\n                renderField("Family History", "",valueundersocre=false)\n            )\n    );\n}'},{name:"Experimental 3",value:"(patient, hospital, ref) => {\n    return React.createElement(\"div\", { className: \"print-content\" },\n        // Patient Details Section - Left Column\n        React.createElement(\"div\", { \n            style: {\n                position: 'absolute',\n                top: '60mm',\n                left: '15mm',\n                width: '100mm',\n                fontFamily: 'Arial, sans-serif',\n                fontSize: '14px',\n                lineHeight: '1.3'\n            }\n        },\n            React.createElement(\"div\", null,\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold', \n                        display: 'inline-block', \n                        width: '35mm' \n                    } \n                }, \"Patient Name :\"),\n                patient?.patient?.name || ''\n            ),\n            React.createElement(\"div\", null,\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold', \n                        display: 'inline-block', \n                        width: '35mm' \n                    } \n                }, \"Guardian Name :\"),\n                patient?.guardianName || ''\n            ),\n            React.createElement(\"div\", null,\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold', \n                        display: 'inline-block', \n                        width: '35mm' \n                    } \n                }, \"Consultant Dr. :\"),\n                patient?.doctor?.name || ''\n            ),\n            React.createElement(\"div\", null,\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold', \n                        display: 'inline-block', \n                        width: '35mm' \n                    } \n                }, \"Department :\"),\n                patient?.department || ''\n            ),\n            React.createElement(\"div\", null,\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold', \n                        display: 'inline-block', \n                        width: '35mm' \n                    } \n                }, \"Address :\"),\n                patient?.patient?.address || ''\n            )\n        ),\n\n        // Patient Details Section - Right Column\n        React.createElement(\"div\", { \n            style: {\n                position: 'absolute',\n                top: '60mm',\n                left: '110mm',\n                width: '85mm',\n                fontFamily: 'Arial, sans-serif',\n                fontSize: '14px',\n                paddingLeft: '10mm',\n                lineHeight: '1.3'\n            }\n        },\n            React.createElement(\"div\", null,\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold', \n                        display: 'inline-block', \n                        width: '35mm' \n                    } \n                }, \"UHID/Reg No :\"),\n                patient?.registrationNumber || ''\n            ),\n            React.createElement(\"div\", null,\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold', \n                        display: 'inline-block', \n                        width: '35mm' \n                    } \n                }, \"Reg. Date :\"),\n                new Date(patient?.createdAt).toLocaleString(\"en-IN\", { \n                    year: 'numeric', \n                    month: '2-digit', \n                    day: '2-digit', \n                    hour: '2-digit', \n                    minute: '2-digit',\n                    hour12: true\n                })\n            ),\n            React.createElement(\"div\", null,\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold', \n                        display: 'inline-block', \n                        width: '35mm' \n                    } \n                }, \"Valid For :\"),\n                new Date(new Date(patient?.createdAt).setDate(new Date(patient?.createdAt).getDate() + 13))\n                    .toLocaleString(\"en-IN\", { \n                        year: 'numeric', \n                        month: '2-digit', \n                        day: '2-digit'\n                    })\n            ),\n            React.createElement(\"div\", null,\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold', \n                        display: 'inline-block', \n                        width: '35mm' \n                    } \n                }, \"Age/Sex :\"),\n                `${patient?.patient?.age || ''}  / ${patient?.patient?.gender || ''}`\n            ),\n            React.createElement(\"div\", null,\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold', \n                        display: 'inline-block', \n                        width: '35mm' \n                    } \n                }, \"Mobile No :\"),\n                patient?.patient?.contactNumber || patient?.contactNumber || ''\n            )\n        ),\n\n        // BP and Weight Section - Below both columns\n        React.createElement(\"div\", { \n            style: {\n                position: 'absolute',\n                top: '85mm',\n                left: '15mm',\n                width: '180mm',\n                fontFamily: 'Arial, sans-serif',\n                fontSize: '14px',\n                textAlign: 'right',\n                paddingRight: '20mm'\n            }\n        },\n            React.createElement(\"div\", null,\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold' \n                    } \n                }, \"Weight(kgs) : \"),\n                patient?.vitals?.weight ? `${patient?.vitals?.weight} ` : ''\n            ),\n            React.createElement(\"div\", { \n                style: { \n                    marginBottom: '2mm' \n                } \n            },\n                React.createElement(\"span\", { \n                    style: { \n                        fontWeight: 'bold' \n                    } \n                }, \"BP : \"),\n                patient?.vitals?.bloodPressure || ''\n            )\n        )\n    );\n}"},...n||[]]),[i,o]=(0,t.useState)(a[0]||{name:"",value:""}),[l,c]=(0,t.useState)(null);return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex flex-col gap-6 mb-6",children:[(0,X.jsx)("div",{className:"flex justify-between items-center",children:(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"OPD Rx Template Preview"})}),(0,X.jsx)("div",{className:"flex flex-wrap gap-3",children:a.map(((e,t)=>(0,X.jsx)("div",{className:"relative",children:l===t?(0,X.jsx)("div",{className:"flex items-center gap-2",children:(0,X.jsx)(Vn.p,{value:e.name,onChange:t=>((e,t)=>{const n=a.findIndex((t=>t===e));if(-1===n)return;const r=a.map(((e,r)=>r===n?{...e,name:t}:e));s(r),i===e&&o(r[n])})(e,t.target.value),onBlur:()=>c(null),onKeyDown:e=>{"Enter"===e.key&&c(null)},className:"w-[150px]",autoFocus:!0})}):(0,X.jsx)(w.$,{variant:"outline",className:(0,Ee.cn)("relative min-w-[150px]",i===e&&"border-2 border-primary bg-primary/10"),onClick:()=>o(e),onDoubleClick:()=>c(t),children:e.name||"Unnamed Template"})},t)))})]}),(0,X.jsx)("div",{className:"flex justify-center bg-gray-100 p-4 min-h-[calc(100vh-200px)] overflow-auto",children:(0,X.jsx)("div",{className:"bg-white shadow-lg",style:{width:"210mm",height:"297mm",margin:"0 auto",position:"relative"},children:(0,X.jsx)(xx,{hospital:e,patient:r,templateString:i.value})})})]})}function ZQ(){const e=(0,j.d4)((e=>e.hospital.hospitalInfo)),{toast:t}=((0,j.wA)(),(0,H.dj)()),n={patient:{name:"John Doe",age:"35-1",gender:"Male",registrationNumber:"REG123456",contactNumber:"9876543210",address:"123 Main Street, City"},bill:{invoiceNumber:"INV-001",createdAt:(new Date).toISOString(),services:[{name:"Consultation",quantity:1,rate:500},{name:"Blood Test",quantity:1,rate:800},{name:"X-Ray",quantity:1,rate:1200}],subtotal:2500,additionalDiscount:200,totalAmount:2300,amountPaid:2300},payment:[{paymentMethod:"Cash"}],admissionRecord:{bookingNumber:"BK001",vitals:{bloodPressure:"120/80",weight:"75",heartRate:"72",temperature:"98.6",oxygenSaturation:"98",respiratoryRate:"16"}}};return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsx)("div",{className:"flex flex-col gap-6 mb-6",children:(0,X.jsx)("div",{className:"flex justify-between items-center",children:(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"OPD Bill Token Template Preview"})})}),(0,X.jsx)("div",{className:"flex justify-center bg-gray-100 p-2 min-h-[calc(100vh-200px)] overflow-auto",children:(0,X.jsx)("div",{className:"bg-white shadow-lg relative py-2 w-[210mm] h-[297mm]",children:(0,X.jsx)(bx,{hospital:e,patientData:n})})})]})}function JQ(){(0,j.wA)();const{toast:e}=(0,H.dj)(),n=(0,j.d4)((e=>e.hospital.hospitalInfo)),[r,a]=(0,t.useState)({patientName:"John Doe",patientId:"PAT12345",age:45,gender:"Male",labNumber:"LAB-2023-0123",dateOfBirth:"1978-05-15",contactNumber:"+1 (555) 123-4567",patient:{age:"45-41",gender:"Male"},address:"123 Main Street, Anytown, USA",labTests:[{name:"Complete Blood Count",reportStatus:"Completed"},{name:"Liver Function Test",reportStatus:"Completed"},{name:"Lipid Profile",reportStatus:"Completed"},{name:"Thyroid Function Test",reportStatus:"Sample Collected"},{name:"Kidney Function Test",reportStatus:"Registered"}],doctor:"Dr. Sarah Johnson",dateOfCollection:"2023-10-15T09:30:00",dateOfReport:"2023-10-16T14:00:00"}),[s,i]=(0,t.useState)([{name:"Complete Blood Count",reportId:"CBC-001",date:"2023-10-16",report:{hemoglobin:{value:"14.5",unit:"g/dL",normalRange:"13.5-17.5",label:"Hemoglobin"},rbc:{value:"5.2",unit:"mill/mm\xb3",normalRange:"4.5-5.9",label:"Red Blood Cells"},wbc:{value:"7500",unit:"/mm\xb3",normalRange:"4000-11000",label:"White Blood Cells"},platelets:{value:"250000",unit:"/mm\xb3",normalRange:"150000-450000",label:"Platelets"},hematocrit:{value:"45",unit:"%",normalRange:"41-50",label:"Hematocrit"},mcv:{value:"88",unit:"fL",normalRange:"80-96",label:"Mean Corpuscular Volume"},mch:{value:"29",unit:"pg",normalRange:"27-33",label:"Mean Corpuscular Hemoglobin"},mchc:{value:"33",unit:"g/dL",normalRange:"33-36",label:"Mean Corpuscular Hemoglobin Concentration"}},interpretation:"All parameters are within normal limits.",technician:"Lab Tech A"},{name:"Liver Function Test",reportId:"LFT-002",date:"2023-10-16",report:{totalBilirubin:{value:"0.8",unit:"mg/dL",normalRange:"0.3-1.2",label:"Total Bilirubin"},directBilirubin:{value:"0.2",unit:"mg/dL",normalRange:"0.0-0.3",label:"Direct Bilirubin"},sgot:{value:"32",unit:"U/L",normalRange:"5-40",label:"SGOT (AST)"},sgpt:{value:"35",unit:"U/L",normalRange:"7-56",label:"SGPT (ALT)"},alkalinePhosphatase:{value:"85",unit:"U/L",normalRange:"44-147",label:"Alkaline Phosphatase"},totalProtein:{value:"7.2",unit:"g/dL",normalRange:"6.0-8.3",label:"Total Protein"},albumin:{value:"4.5",unit:"g/dL",normalRange:"3.5-5.2",label:"Albumin"}},interpretation:"Liver function tests are within normal reference range.",technician:"Lab Tech B"},{name:"Lipid Profile",reportId:"LP-003",date:"2023-10-16",report:{totalCholesterol:{value:"185",unit:"mg/dL",normalRange:"<200",label:"Total Cholesterol"},triglycerides:{value:"120",unit:"mg/dL",normalRange:"<150",label:"Triglycerides"},hdlCholesterol:{value:"45",unit:"mg/dL",normalRange:">40",label:"HDL Cholesterol"},ldlCholesterol:{value:"116",unit:"mg/dL",normalRange:"<130",label:"LDL Cholesterol"},vldlCholesterol:{value:"24",unit:"mg/dL",normalRange:"<30",label:"VLDL Cholesterol"},cholesterolRatio:{value:"4.1",unit:"",normalRange:"<4.5",label:"Cholesterol Ratio"}},interpretation:"Lipid profile within acceptable ranges.",technician:"Lab Tech C"}]);return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsx)("div",{className:"flex flex-col gap-6 mb-6",children:(0,X.jsx)("div",{className:"flex justify-between items-center",children:(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Merge Template Preview"})})}),(0,X.jsx)("div",{className:"flex justify-center bg-gray-100  min-h-[calc(100vh-200px)] overflow-auto border-2 ",children:(0,X.jsx)("div",{className:"bg-white shadow-lg relative p-2",children:(0,X.jsx)(mW,{reportsData:s,patientData:r,hospital:n})})})]})}function QQ(){const[e,n]=(0,t.useState)({registration:{prefix:"",sequence:0,useYearSuffix:!0,label:"OPD/UHID Number"},ipd:{prefix:"IPD",sequence:0,useYearSuffix:!0,label:"IPD Number"},lab:{prefix:"LAB",sequence:0,useYearSuffix:!0,label:"Lab Number"},invoice:{prefix:"INV",sequence:0,useYearSuffix:!0,label:"Invoice/Bill Number"},payment:{prefix:"PAY",sequence:0,useYearSuffix:!0,label:"Payment Number"}}),[r,s]=(0,t.useState)(!1),{toast:i}=(0,H.dj)(),o=(0,a.Zp)();(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch(`${M.B8}/api/registration/settings`,{credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();n((e=>({...e,registration:{...e.registration,...t.registration},ipd:{...e.ipd,...t.ipd},lab:{...e.lab,...t.lab},invoice:{...e.invoice,...t.invoice},payment:{...e.payment,...t.payment}})))}catch(e){console.error("Error fetching settings:",e),i({title:"Failed to fetch settings",variant:"destructive"})}})()}),[]);const l=(e,t,r)=>{n((n=>({...n,[e]:{...n[e],[t]:"sequence"===t?parseInt(r)||0:r}})))};return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>{o(-1)},className:"h-8 w-8 p-0",children:(0,X.jsx)(Uo.A,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Prefix Settings"})]}),(0,X.jsxs)(w.$,{onClick:async t=>{t&&t.preventDefault(),s(!0);try{if(!(await fetch(`${M.B8}/api/registration/settings`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({registration:{prefix:e.registration.prefix,useYearSuffix:e.registration.useYearSuffix,sequence:e.registration.sequence},ipd:{prefix:e.ipd.prefix,useYearSuffix:e.ipd.useYearSuffix,sequence:e.ipd.sequence},lab:{prefix:e.lab.prefix,useYearSuffix:e.lab.useYearSuffix,sequence:e.lab.sequence},invoice:{prefix:e.invoice.prefix,useYearSuffix:e.invoice.useYearSuffix,sequence:e.invoice.sequence},payment:{prefix:e.payment.prefix,useYearSuffix:e.payment.useYearSuffix,sequence:e.payment.sequence}})})).ok)throw new Error("Failed to update settings");i({title:"Settings updated successfully",variant:"success"})}catch(n){console.error("Error updating settings:",n),i({title:"Failed to update settings",description:n.message,variant:"destructive"})}finally{s(!1)}},disabled:r,className:"flex items-center gap-2",children:[(0,X.jsx)(SQ,{className:"h-4 w-4"}),r?"Saving...":"Save Settings"]})]}),(0,X.jsxs)("div",{className:"w-full",children:[(0,X.jsxs)("div",{className:"grid grid-cols-5 gap-4 font-medium text-sm bg-gray-100 p-4 rounded-t-lg",children:[(0,X.jsx)("div",{children:"Number Type"}),(0,X.jsx)("div",{children:"Prefix"}),(0,X.jsx)("div",{children:"Sequence"}),(0,X.jsx)("div",{children:"Year Suffix"}),(0,X.jsx)("div",{children:"Next Number Preview"})]}),(0,X.jsx)("div",{className:"space-y-2 mt-2",children:Object.entries(e).map((e=>{let[t,n]=e;const r=(new Date).getFullYear().toString().slice(-2),a=(new Date).getFullYear().toString(),s=`${n.prefix}/${n.useYearSuffix?r:a}/${(parseInt(n.sequence)+1).toString()}`;return(0,X.jsxs)("div",{className:"grid grid-cols-5 gap-4 items-center p-4 bg-white border rounded-lg",children:[(0,X.jsx)("div",{children:(0,X.jsx)("div",{className:"font-medium",children:n.label})}),(0,X.jsx)("div",{children:(0,X.jsx)("input",{type:"text",value:n.prefix,onChange:e=>l(t,"prefix",e.target.value),className:"w-full p-2 border rounded-md",placeholder:"Enter prefix"})}),(0,X.jsx)("div",{children:(0,X.jsx)("input",{type:"number",value:n.sequence,onChange:e=>l(t,"sequence",e.target.value),className:"w-full p-2 border rounded-md",placeholder:"Enter sequence",min:"0"})}),(0,X.jsx)("div",{children:(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsx)("input",{type:"checkbox",id:`useYearSuffix-${t}`,checked:n.useYearSuffix,onChange:e=>l(t,"useYearSuffix",e.target.checked),className:"rounded mr-2"}),(0,X.jsx)("label",{htmlFor:`useYearSuffix-${t}`,children:"Include Year"})]})}),(0,X.jsx)("div",{children:(0,X.jsx)("div",{className:"p-2 bg-gray-50 rounded-md font-mono text-gray-700",children:s})})]},t)}))})]})]})}const e0=(0,N.A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),t0=(0,N.A)("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]),n0=(0,N.A)("NotebookTabs",[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M15 2v20",key:"dcj49h"}],["path",{d:"M15 7h5",key:"1xj5lc"}],["path",{d:"M15 12h5",key:"w5shd9"}],["path",{d:"M15 17h5",key:"1qaofu"}]]),r0=e=>{let{hospitalInfo:n,motherData:r,babyData:a,certificateNumber:s,basicFormData:i,birthCertificateTempleteHeader:o}=e;const l=(0,t.useRef)(),c=(0,qn.useReactToPrint)({content:()=>l.current,pageStyle:"\n      @page {\n        size: A4;\n        margin: 20mm;\n      }\n      @media print {\n        body {\n          print-color-adjust: exact;\n          -webkit-print-color-adjust: exact;\n        }\n        .print-only {\n          display: block !important;\n        }\n        .no-print {\n          display: none !important;\n        }\n        .print-content {\n          position: relative;\n          min-height: 100vh;\n          padding: 20px;\n        }\n      }\n    "});return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(w.$,{variant:"outline",onClick:c,children:[(0,X.jsx)(Xn.A,{className:"h-4 w-4 mr-2"}),"Print"]}),(0,X.jsx)("div",{style:{display:"none"},children:(0,X.jsxs)("div",{ref:l,className:"print-content mt-10",children:[(0,X.jsxs)("div",{className:"border-[1px] border-black mb-20",children:[o(n),(0,X.jsxs)("div",{className:"font-cursive px-4",children:[(0,X.jsx)("h2",{className:"text-center text-2xl mt-2 font-bold underline italic tracking-wider",style:{fontFamily:"cursive"},children:"BIRTH CERTIFICATE"}),(0,X.jsx)("div",{className:"text-right text-xl",children:(0,X.jsxs)("p",{className:"text-base font-bold underline",children:["BIRTH NO:",s]})}),(0,X.jsx)("div",{className:"mt-2",children:(0,X.jsxs)("p",{className:"leading-relaxed text-base text-justify",children:["THIS IS CERTIFIED THAT"," ",(0,X.jsxs)("span",{className:"font-bold uppercase underline",children:[null===r||void 0===r?void 0:r.name," ",(0,X.jsx)("span",{className:"font-bold",children:null===i||void 0===i?void 0:i.guardianRelationWithPatient})," ",(0,X.jsx)("span",{className:"font-bold",children:null===i||void 0===i?void 0:i.babyFatherName})]})," ","WAS ADMITTED IN THIS HOSPITAL ON"," ",(0,X.jsxs)("span",{className:"uppercase",children:[(0,Go.GP)(new Date(a.admissionDate),"dd-MMM-yyyy")," AT"," ",a.timeOfAdmission]})," ","AND DELIVERED A LIVE ",a.gender.toUpperCase()," CHILD ON"," ",(0,X.jsxs)("span",{className:"uppercase",children:[(0,Go.GP)(new Date(a.dateOfBirth),"dd-MMM-yyyy")," AT"," ",a.timeOfBirth]}),". WEIGHT OF THE CHILD AT THE TIME OF BIRTH ",a.weight," GM AND THIS BABY HANDED OVER TO"," ",(0,X.jsx)("span",{className:"uppercase",children:null===i||void 0===i?void 0:i.babyHandOverRelation})," ",(0,X.jsx)("span",{className:"uppercase",children:null===i||void 0===i?void 0:i.babyHandOverName})," ","AFTER EXAMINATION BY PAEDIATRICIAN."]})}),(0,X.jsx)("div",{className:"mt-8 mb-8 mr-12 text-right",children:(0,X.jsx)("p",{className:"font-bold underline",children:"SIGNATURE"})})]})]}),(0,X.jsxs)("div",{className:"border-[1px] border-black mb-4",children:[o(n),(0,X.jsxs)("div",{className:"font-cursive px-4",children:[(0,X.jsx)("h2",{className:"text-center text-2xl mt-2 font-bold underline italic tracking-wider",style:{fontFamily:"cursive"},children:"BIRTH CERTIFICATE"}),(0,X.jsx)("div",{className:"text-right text-xl",children:(0,X.jsxs)("p",{className:"text-base font-bold underline",children:["BIRTH NO:",s]})}),(0,X.jsx)("div",{className:"mt-2",children:(0,X.jsxs)("p",{className:"leading-relaxed text-base text-justify",children:["THIS IS CERTIFIED THAT"," ",(0,X.jsxs)("span",{className:"font-bold uppercase underline",children:[null===r||void 0===r?void 0:r.name," ",(0,X.jsx)("span",{className:"font-bold",children:null===i||void 0===i?void 0:i.guardianRelationWithPatient})," ",(0,X.jsx)("span",{className:"font-bold",children:null===i||void 0===i?void 0:i.babyFatherName})]})," ","WAS ADMITTED IN THIS HOSPITAL ON"," ",(0,X.jsxs)("span",{className:"",children:[(0,Go.GP)(new Date(a.admissionDate),"dd-MMM-yyyy")," AT"," ",a.timeOfAdmission]})," ","AND DELIVERED A LIVE ",a.gender.toUpperCase()," CHILD ON"," ",(0,X.jsxs)("span",{className:"",children:[(0,Go.GP)(new Date(a.dateOfBirth),"dd-MMM-yyyy")," AT"," ",a.timeOfBirth]}),". WEIGHT OF THE CHILD AT THE TIME OF BIRTH ",a.weight," GM AND THIS BABY HANDED OVER TO"," ",(0,X.jsx)("span",{className:"",children:null===i||void 0===i?void 0:i.babyHandOverRelation})," ",(0,X.jsx)("span",{className:"uppercase",children:null===i||void 0===i?void 0:i.babyHandOverName})," ","AFTER EXAMINATION BY PAEDIATRICIAN."]})}),(0,X.jsx)("div",{className:"mt-8 mb-8 mr-12 text-right",children:(0,X.jsx)("p",{className:"font-bold underline",children:"SIGNATURE"})})]})]})]})})]})};function a0(e){let{open:n,onOpenChange:r,hospitalInfo:a,motherData:s,babyData:i,certificateNumber:o}=e;const{toast:l}=(0,H.dj)(),c=(0,j.wA)(),{editBabyStatus:d}=(0,j.d4)((e=>e.babies)),u=(0,j.d4)((e=>e.templates.birthCertificateTemplate)),{headerTemplateArray:m,headerTemplate:h}=(0,j.d4)((e=>e.templates)),p=`(hospitalInfo) => {\n      return ${(null===m||void 0===m?void 0:m.length)>0?m[0].value:h}\n  }`,[f,v]=(0,t.useState)({babyFatherName:(null===i||void 0===i?void 0:i.babyFatherName)||"",guardianRelationWithPatient:"W/O",babyHandOverName:(null===i||void 0===i?void 0:i.babyHandOverName)||"",babyHandOverRelation:(null===i||void 0===i?void 0:i.babyHandOverRelation)||""});(0,t.useEffect)((()=>{v({babyFatherName:(null===i||void 0===i?void 0:i.babyFatherName)||"",guardianRelationWithPatient:"W/O",babyHandOverName:(null===i||void 0===i?void 0:i.babyHandOverName)||"",babyHandOverRelation:(null===i||void 0===i?void 0:i.babyHandOverRelation)||""})}),[i]);const g=new Function("React",`return ${u||p}`)(t);return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{className:"max-w-[250mm] ",children:[(0,X.jsxs)("div",{className:"border-[1px] border-black mt-4",children:[g(a),(0,X.jsxs)("div",{className:"space-y-3 px-4",children:[(0,X.jsx)("div",{className:"text-right",children:(0,X.jsxs)("p",{className:"text-base font-bold underline",children:["BIRTH NO:",o]})}),(0,X.jsx)("div",{className:"mt-2",children:(0,X.jsxs)("p",{className:"leading-relaxed text-base text-justify",children:["THIS IS CERTIFIED THAT"," ",(0,X.jsxs)("span",{className:"font-bold uppercase",children:[null===s||void 0===s?void 0:s.name," ",(0,X.jsx)(Vn.p,{className:"w-[45px] px-1 py-0 h-6 inline-block font-bold uppercase text-center",value:f.guardianRelationWithPatient,onChange:e=>v({...f,guardianRelationWithPatient:e.target.value})})," ",(0,X.jsx)(Vn.p,{className:"w-50 px-1 py-0 h-6 inline-block font-bold uppercase text-center",value:f.babyFatherName,placeholder:"Enter Husband Name",autoFocus:!0,onChange:e=>v({...f,babyFatherName:e.target.value})})]})," ","WAS ADMITTED IN THIS HOSPITAL ON"," ",(0,X.jsxs)("span",{className:"font-bold",children:[(0,Go.GP)(new Date(i.admissionDate),"dd-MMM-yyyy")," AT"," ",i.timeOfAdmission]})," ","AND DELIVERED A LIVE ",i.gender.toUpperCase()," CHILD ON"," ",(0,X.jsxs)("span",{className:"font-bold",children:[(0,Go.GP)(new Date(i.dateOfBirth),"dd-MMM-yyyy")," AT"," ",i.timeOfBirth]}),". WEIGHT OF THE CHILD AT THE TIME OF BIRTH ",i.weight," GM AND THIS BABY HANDED OVER TO"," ",(0,X.jsx)(Vn.p,{className:"w-24 px-1 py-0 h-6 inline-block font-bold uppercase text-center",value:f.babyHandOverRelation,onChange:e=>v({...f,babyHandOverRelation:e.target.value})})," ",(0,X.jsx)(Vn.p,{className:"w-50 px-1 py-0 h-6 inline-block font-bold uppercase text-center",value:f.babyHandOverName,onChange:e=>v({...f,babyHandOverName:e.target.value})})," ","AFTER EXAMINATION BY PAEDIATRICIAN."]})}),(0,X.jsx)("div",{className:"mt-8 mb-4 mr-12 text-right",children:(0,X.jsx)("p",{className:"font-bold underline",children:"SIGNATURE"})})]})]}),(0,X.jsxs)("div",{className:"flex gap-2 justify-end py-2",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),(0,X.jsx)(r0,{hospitalInfo:a,motherData:s,babyData:i,certificateNumber:o,basicFormData:f,birthCertificateTempleteHeader:g}),(0,X.jsx)(w.$,{variant:"outline",onClick:()=>{""!==f.babyFatherName?c((0,zt.nB)({...i,...f})).unwrap().then((()=>{l({title:"Success",variant:"success",description:"Birth certificate details saved successfully"})})).catch((e=>{l({title:"Error",description:e.message||"Failed to save birth certificate details",variant:"destructive"})})):l({title:"Error",description:"Please Enter Husband Name",variant:"destructive"})},disabled:"loading"===d,className:"bg-purple-600 hover:bg-purple-700 text-white",children:"loading"===d?"Saving...":"Save"})]})]})})}const s0=(0,N.A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var i0=__webpack_require__(1669),o0=__webpack_require__(7099),l0=__webpack_require__(4942),c0=__webpack_require__(849);function d0(){return Object.assign({},(0,c0.q)())}function u0(e,t){const n=function(e){return"function"===typeof e&&e.prototype?.constructor===e}(t)?new t(0):(0,Lc.w)(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}class m0{subPriority=0;validate(e,t){return!0}}class h0 extends m0{constructor(e,t,n,r,a){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class p0 extends m0{priority=10;subPriority=-1;constructor(e,t){super(),this.context=e||(e=>(0,Lc.w)(t,e))}set(e,t){return t.timestampIsSet?e:(0,Lc.w)(e,u0(e,this.context))}}class f0{run(e,t,n,r){const a=this.parse(e,t,n,r);return a?{setter:new h0(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,n){return!0}}const v0=/^(1[0-2]|0?\d)/,g0=/^(3[0-1]|[0-2]?\d)/,x0=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,y0=/^(5[0-3]|[0-4]?\d)/,b0=/^(2[0-3]|[0-1]?\d)/,j0=/^(2[0-4]|[0-1]?\d)/,w0=/^(1[0-1]|0?\d)/,N0=/^(1[0-2]|0?\d)/,_0=/^[0-5]?\d/,S0=/^[0-5]?\d/,E0=/^\d/,C0=/^\d{1,2}/,D0=/^\d{1,3}/,T0=/^\d{1,4}/,k0=/^-?\d+/,A0=/^-?\d/,P0=/^-?\d{1,2}/,O0=/^-?\d{1,3}/,R0=/^-?\d{1,4}/,M0=/^([+-])(\d{2})(\d{2})?|Z/,I0=/^([+-])(\d{2})(\d{2})|Z/,L0=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,F0=/^([+-])(\d{2}):(\d{2})|Z/,B0=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function W0(e,t){return e?{value:t(e.value),rest:e.rest}:e}function $0(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function U0(e,t){const n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};const r="+"===n[1]?1:-1,a=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,i=n[5]?parseInt(n[5],10):0;return{value:r*(a*KB.s0+s*KB.Cg+i*KB._m),rest:t.slice(n[0].length)}}function z0(e){return $0(k0,e)}function H0(e,t){switch(e){case 1:return $0(E0,t);case 2:return $0(C0,t);case 3:return $0(D0,t);case 4:return $0(T0,t);default:return $0(new RegExp("^\\d{1,"+e+"}"),t)}}function V0(e,t){switch(e){case 1:return $0(A0,t);case 2:return $0(P0,t);case 3:return $0(O0,t);case 4:return $0(R0,t);default:return $0(new RegExp("^-?\\d{1,"+e+"}"),t)}}function q0(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function G0(e,t){const n=t>0,r=n?t:1-t;let a;if(r<=50)a=e||100;else{const t=r+50;a=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?a:1-a}function K0(e){return e%400===0||e%4===0&&e%100!==0}var Y0=__webpack_require__(9504);var X0=__webpack_require__(9415);var Z0=__webpack_require__(2750);function J0(e,t,n){const r=(0,Pc.a)(e,n?.in),a=(0,Z0.N)(r,n)-t;return r.setDate(r.getDate()-7*a),(0,Pc.a)(r,n?.in)}var Q0=__webpack_require__(5385);function e1(e,t,n){const r=(0,Pc.a)(e,n?.in),a=(0,Q0.s)(r,n)-t;return r.setDate(r.getDate()-7*a),r}const t1=[31,28,31,30,31,30,31,31,30,31,30,31],n1=[31,29,31,30,31,30,31,31,30,31,30,31];function r1(e,t,n){const r=(0,c0.q)(),a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=(0,Pc.a)(e,n?.in),i=s.getDay(),o=7-a,l=t<0||t>6?t-(i+o)%7:((t%7+7)%7+o)%7-(i+o)%7;return(0,zc.f)(s,l,n)}function a1(e,t){const n=(0,Pc.a)(e,t?.in).getDay();return 0===n?7:n}function s1(e,t,n){const r=(0,Pc.a)(e,n?.in),a=t-a1(r,n);return(0,zc.f)(r,a,n)}var i1=__webpack_require__(9219);const o1={G:new class extends f0{priority=140;parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]},y:new class extends f0{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return W0(H0(4,e),r);case"yo":return W0(n.ordinalNumber(e,{unit:"year"}),r);default:return W0(H0(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const t=G0(n.year,r);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const a="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}},Y:new class extends f0{priority=130;parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return W0(H0(4,e),r);case"Yo":return W0(n.ordinalNumber(e,{unit:"year"}),r);default:return W0(H0(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const a=(0,Y0.h)(e,r);if(n.isTwoDigitYear){const t=G0(n.year,a);return e.setFullYear(t,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),(0,Rc.k)(e,r)}const s="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(s,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),(0,Rc.k)(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:new class extends f0{priority=130;parse(e,t){return V0("R"===t?4:t.length,e)}set(e,t,n){const r=(0,Lc.w)(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),(0,X0.b)(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:new class extends f0{priority=130;parse(e,t){return V0("u"===t?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},Q:new class extends f0{priority=120;parse(e,t,n){switch(t){case"Q":case"QQ":return H0(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:new class extends f0{priority=120;parse(e,t,n){switch(t){case"q":case"qq":return H0(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:new class extends f0{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,n){const r=e=>e-1;switch(t){case"M":return W0($0(v0,e),r);case"MM":return W0(H0(2,e),r);case"Mo":return W0(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},L:new class extends f0{priority=110;parse(e,t,n){const r=e=>e-1;switch(t){case"L":return W0($0(v0,e),r);case"LL":return W0(H0(2,e),r);case"Lo":return W0(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:new class extends f0{priority=100;parse(e,t,n){switch(t){case"w":return $0(y0,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return H0(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return(0,Rc.k)(J0(e,n,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:new class extends f0{priority=100;parse(e,t,n){switch(t){case"I":return $0(y0,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return H0(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return(0,X0.b)(e1(e,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:new class extends f0{priority=90;subPriority=1;parse(e,t,n){switch(t){case"d":return $0(g0,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return H0(t.length,e)}}validate(e,t){const n=K0(e.getFullYear()),r=e.getMonth();return n?t>=1&&t<=n1[r]:t>=1&&t<=t1[r]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:new class extends f0{priority=90;subpriority=1;parse(e,t,n){switch(t){case"D":case"DD":return $0(x0,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return H0(t.length,e)}}validate(e,t){return K0(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:new class extends f0{priority=90;parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=r1(e,n,r)).setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]},e:new class extends f0{priority=90;parse(e,t,n,r){const a=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return W0(H0(t.length,e),a);case"eo":return W0(n.ordinalNumber(e,{unit:"day"}),a);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=r1(e,n,r)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:new class extends f0{priority=90;parse(e,t,n,r){const a=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return W0(H0(t.length,e),a);case"co":return W0(n.ordinalNumber(e,{unit:"day"}),a);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=r1(e,n,r)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:new class extends f0{priority=90;parse(e,t,n){const r=e=>0===e?7:e;switch(t){case"i":case"ii":return H0(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return W0(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return W0(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return W0(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return W0(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return(e=s1(e,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:new class extends f0{priority=80;parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(q0(n),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]},b:new class extends f0{priority=80;parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(q0(n),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]},B:new class extends f0{priority=80;parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(q0(n),0,0,0),e}incompatibleTokens=["a","b","t","T"]},h:new class extends f0{priority=70;parse(e,t,n){switch(t){case"h":return $0(N0,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return H0(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):r||12!==n?e.setHours(n,0,0,0):e.setHours(0,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]},H:new class extends f0{priority=70;parse(e,t,n){switch(t){case"H":return $0(b0,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return H0(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]},K:new class extends f0{priority=70;parse(e,t,n){switch(t){case"K":return $0(w0,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return H0(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]},k:new class extends f0{priority=70;parse(e,t,n){switch(t){case"k":return $0(j0,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return H0(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]},m:new class extends f0{priority=60;parse(e,t,n){switch(t){case"m":return $0(_0,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return H0(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}incompatibleTokens=["t","T"]},s:new class extends f0{priority=50;parse(e,t,n){switch(t){case"s":return $0(S0,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return H0(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}incompatibleTokens=["t","T"]},S:new class extends f0{priority=30;parse(e,t){return W0(H0(t.length,e),(e=>Math.trunc(e*Math.pow(10,3-t.length))))}set(e,t,n){return e.setMilliseconds(n),e}incompatibleTokens=["t","T"]},X:new class extends f0{priority=10;parse(e,t){switch(t){case"X":return U0(M0,e);case"XX":return U0(I0,e);case"XXXX":return U0(L0,e);case"XXXXX":return U0(B0,e);default:return U0(F0,e)}}set(e,t,n){return t.timestampIsSet?e:(0,Lc.w)(e,e.getTime()-(0,i1.G)(e)-n)}incompatibleTokens=["t","T","x"]},x:new class extends f0{priority=10;parse(e,t){switch(t){case"x":return U0(M0,e);case"xx":return U0(I0,e);case"xxxx":return U0(L0,e);case"xxxxx":return U0(B0,e);default:return U0(F0,e)}}set(e,t,n){return t.timestampIsSet?e:(0,Lc.w)(e,e.getTime()-(0,i1.G)(e)-n)}incompatibleTokens=["t","T","X"]},t:new class extends f0{priority=40;parse(e){return z0(e)}set(e,t,n){return[(0,Lc.w)(e,1e3*n),{timestampIsSet:!0}]}incompatibleTokens="*"},T:new class extends f0{priority=20;parse(e){return z0(e)}set(e,t,n){return[(0,Lc.w)(e,n),{timestampIsSet:!0}]}incompatibleTokens="*"}},l1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,c1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,d1=/^'([^]*?)'?$/,u1=/''/g,m1=/\S/,h1=/[a-zA-Z]/;function p1(e,t,n,r){const a=()=>(0,Lc.w)(r?.in||n,NaN),s=d0(),i=r?.locale??s.locale??i0.c,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0;if(!t)return e?a():(0,Pc.a)(n,r?.in);const c={firstWeekContainsDate:o,weekStartsOn:l,locale:i},d=[new p0(r?.in,n)],u=t.match(c1).map((e=>{const t=e[0];if(t in o0.m){return(0,o0.m[t])(e,i.formatLong)}return e})).join("").match(l1),m=[];for(let v of u){!r?.useAdditionalWeekYearTokens&&(0,l0.xM)(v)&&(0,l0.Ss)(v,t,e),!r?.useAdditionalDayOfYearTokens&&(0,l0.ef)(v)&&(0,l0.Ss)(v,t,e);const n=v[0],s=o1[n];if(s){const{incompatibleTokens:t}=s;if(Array.isArray(t)){const e=m.find((e=>t.includes(e.token)||e.token===n));if(e)throw new RangeError(`The format string mustn't contain \`${e.fullToken}\` and \`${v}\` at the same time`)}else if("*"===s.incompatibleTokens&&m.length>0)throw new RangeError(`The format string mustn't contain \`${v}\` and any other token at the same time`);m.push({token:n,fullToken:v});const r=s.run(e,v,i.match,c);if(!r)return a();d.push(r.setter),e=r.rest}else{if(n.match(h1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===v?v="'":"'"===n&&(v=v.match(d1)[1].replace(u1,"'")),0!==e.indexOf(v))return a();e=e.slice(v.length)}}if(e.length>0&&m1.test(e))return a();const h=d.map((e=>e.priority)).sort(((e,t)=>t-e)).filter(((e,t,n)=>n.indexOf(e)===t)).map((e=>d.filter((t=>t.priority===e)).sort(((e,t)=>t.subPriority-e.subPriority)))).map((e=>e[0]));let p=(0,Pc.a)(n,r?.in);if(isNaN(+p))return a();const f={};for(const v of h){if(!v.validate(p,c))return a();const e=v.set(p,f,c);Array.isArray(e)?(p=e[0],Object.assign(f,e[1])):p=e}return p}const f1=e=>{var n,r;let{open:a,onOpenChange:s,motherData:i,admissionId:o}=e;const{toast:l}=(0,H.dj)(),c=(0,j.wA)(),d=new Date,u=(0,Go.GP)(d,"hh:mm a"),{createBabyStatus:m}=(0,j.d4)((e=>e.babies)),[h,p]=(0,t.useState)({gender:"",dateOfBirth:(0,Go.GP)(new Date,"yyyy-MM-dd"),timeOfBirth:u,weight:"",admissionDate:null!==i&&void 0!==i&&i.bookingDate?(0,Go.GP)(new Date(i.bookingDate),"yyyy-MM-dd"):(0,Go.GP)(new Date,"yyyy-MM-dd"),timeOfAdmission:(0,M.IF)(null===i||void 0===i?void 0:i.bookingTime),apgarScore:{oneMinute:"",fiveMinutes:"",tenMinutes:""},babyHandOverName:"",babyHandOverRelation:""}),f=e=>{const{name:t,value:n}=e.target;if(t.startsWith("apgarScore.")){const e=t.split(".")[1];p((t=>({...t,apgarScore:{...t.apgarScore,[e]:n}})))}else p((e=>({...e,[t]:n})))};return(0,X.jsx)(Io.lG,{open:a,onOpenChange:s,children:(0,X.jsxs)(Io.Cf,{className:"max-w-3xl max-h-[90vh]  overflow-visible",children:[(0,X.jsx)(Io.c7,{className:"",children:(0,X.jsxs)(Io.L3,{className:"flex items-center gap-2",children:[(0,X.jsx)(FQ,{className:"h-6 w-6 text-pink-500"}),"Register New Baby"]})}),(0,X.jsxs)(b.F,{className:" px-1 max-h-[80vh]",children:[(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-2 p-4 bg-gradient-to-r from-pink-50 to-blue-50 rounded-xl border-2 border-pink-100",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(Fx,{className:"h-5 w-5 text-pink-500"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Mother's Name"}),(0,X.jsx)("p",{className:"font-semibold",children:null===i||void 0===i?void 0:i.name})]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(e0,{className:"h-5 w-5 text-blue-500"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"UHID"}),(0,X.jsx)("p",{className:"font-semibold",children:null===i||void 0===i?void 0:i.registrationNumber})]})]}),(0,X.jsx)("div",{className:"col-span-2",children:(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{className:"",children:[(0,X.jsx)(Ks.J,{children:"Admission Date"}),(0,X.jsx)(Vn.p,{type:"date",name:"admissionDate",value:h.admissionDate,onChange:f,className:"border-2 border-pink-200 hover:border-pink-300 transition-colors"})]}),(0,X.jsxs)("div",{className:"",children:[(0,X.jsx)(Ks.J,{children:"Admission Time"}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)("div",{className:"relative flex-1",children:(0,X.jsx)(Vn.p,{type:"time",name:"timeOfAdmission",value:h.timeOfAdmission.split(" ")[0],onChange:e=>{const t=e.target.value;if(t){const e=p1(t,"HH:mm",new Date),n=(0,Go.GP)(e,"hh:mm a");p((e=>({...e,timeOfAdmission:n})))}},className:"border-2 border-pink-200 hover:border-pink-300 transition-colors "})}),(0,X.jsxs)(A.l6,{value:(null===(n=h.timeOfAdmission.split(" ")[1])||void 0===n?void 0:n.toLowerCase())||"am",onValueChange:e=>{const t=h.timeOfAdmission.split(" ")[0];p((n=>({...n,timeOfAdmission:`${t} ${e.toUpperCase()}`})))},children:[(0,X.jsx)(A.bq,{className:"w-[80px] border-2 border-pink-200 hover:border-pink-300 transition-colors",children:(0,X.jsx)(A.yv,{placeholder:"AM"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"am",children:"AM"}),(0,X.jsx)(A.eb,{value:"pm",children:"PM"})]})]})]})]})]})})]}),(0,X.jsxs)("div",{className:"grid grid-cols-4 gap-2 p-1",children:[(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{children:"Gender"}),(0,X.jsxs)(A.l6,{onValueChange:e=>p((t=>({...t,gender:e}))),value:h.gender,children:[(0,X.jsx)(A.bq,{children:(0,X.jsx)(A.yv,{placeholder:"Select gender"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Male",children:"Male"}),(0,X.jsx)(A.eb,{value:"Female",children:"Female"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]})]})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{children:"Weight (grams)"}),(0,X.jsx)(Vn.p,{type:"number",name:"weight",value:h.weight,onChange:f,placeholder:"Enter weight"})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{children:"Date of Birth"}),(0,X.jsx)(Vn.p,{type:"date",name:"dateOfBirth",value:h.dateOfBirth,onChange:f})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{children:"Time of Birth"}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsxs)("div",{className:"relative flex-1",children:[(0,X.jsx)(Vn.p,{type:"time",name:"timeOfBirth",value:h.timeOfBirth.split(" ")[0],onChange:e=>{const t=e.target.value;if(t){const e=p1(t,"HH:mm",new Date),n=(0,Go.GP)(e,"hh:mm a");p((e=>({...e,timeOfBirth:n})))}},className:"pl-10"}),(0,X.jsx)(mo,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"})]}),(0,X.jsxs)(A.l6,{value:(null===(r=h.timeOfBirth.split(" ")[1])||void 0===r?void 0:r.toLowerCase())||"am",onValueChange:e=>{const t=h.timeOfBirth.split(" ")[0];p((n=>({...n,timeOfBirth:`${t} ${e.toUpperCase()}`})))},children:[(0,X.jsx)(A.bq,{className:"w-[80px]",children:(0,X.jsx)(A.yv,{placeholder:"AM"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"am",children:"AM"}),(0,X.jsx)(A.eb,{value:"pm",children:"PM"})]})]})]})]})]}),(0,X.jsxs)("div",{className:"space-y-2 p-2",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(s0,{className:"h-5 w-5 text-yellow-500"}),(0,X.jsx)("h3",{className:"font-semibold",children:"APGAR Score"})]}),(0,X.jsx)("div",{className:"grid grid-cols-3 gap-4",children:["oneMinute","fiveMinutes","tenMinutes"].map((e=>(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{children:"oneMinute"===e?"1 Minute":"fiveMinutes"===e?"5 Minutes":"10 Minutes"}),(0,X.jsx)(Vn.p,{type:"number",min:"0",max:"10",name:`apgarScore.${e}`,value:h.apgarScore[e],onChange:f})]},e)))})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-2",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{children:"Handover Person Name"}),(0,X.jsx)(Vn.p,{name:"babyHandOverName",value:h.babyHandOverName,onChange:f,placeholder:"Enter name"})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{children:"Relation with Baby"}),(0,X.jsx)(Vn.p,{name:"babyHandOverRelation",value:h.babyHandOverRelation,onChange:f,placeholder:"Enter relation"})]})]})]}),(0,X.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,X.jsx)(w.$,{onClick:async e=>{if(e.preventDefault(),h.gender&&h.weight)try{await c((0,zt.xA)({...h,mother:i._id,isNew:!0,ipdAdmission:o,weight:parseFloat(h.weight),apgarScore:{oneMinute:parseInt(h.apgarScore.oneMinute),fiveMinutes:parseInt(h.apgarScore.fiveMinutes),tenMinutes:parseInt(h.apgarScore.tenMinutes)}})).unwrap();l({variant:"success",title:"Success",description:"Baby record has been registered successfully"}),s(!1)}catch(t){l({title:"Error",description:t.message||"Something went wrong",variant:"destructive"})}else l({title:"Error",description:"Please fill all required fields",variant:"destructive"})},className:"bg-pink-600 hover:bg-pink-700",disabled:"loading"===m,children:"loading"===m?"Registering...":"Register Baby"})]})]})]})})},v1=e=>{var n,r;let{open:a,onOpenChange:s,babyData:i,motherData:o}=e;const{toast:l}=(0,H.dj)(),c=(0,j.wA)(),{editBabyStatus:d}=(0,j.d4)((e=>e.babies)),[u,m]=(0,t.useState)({gender:"",dateOfBirth:"",timeOfBirth:"",weight:"",admissionDate:"",timeOfAdmission:"",apgarScore:{oneMinute:"",fiveMinutes:"",tenMinutes:""},babyHandOverName:"",babyHandOverRelation:"",babyFatherName:""});(0,t.useEffect)((()=>{var e,t,n;i&&m({gender:i.gender||"",dateOfBirth:(0,Go.GP)(new Date(i.dateOfBirth),"yyyy-MM-dd"),timeOfBirth:i.timeOfBirth||"",weight:i.weight||"",admissionDate:(0,Go.GP)(new Date(i.admissionDate),"yyyy-MM-dd"),timeOfAdmission:i.timeOfAdmission||"",apgarScore:{oneMinute:(null===(e=i.apgarScore)||void 0===e?void 0:e.oneMinute)||"",fiveMinutes:(null===(t=i.apgarScore)||void 0===t?void 0:t.fiveMinutes)||"",tenMinutes:(null===(n=i.apgarScore)||void 0===n?void 0:n.tenMinutes)||""},babyHandOverName:i.babyHandOverName||"",babyHandOverRelation:i.babyHandOverRelation||"",babyFatherName:i.babyFatherName||""})}),[i]);const h=e=>{const{name:t,value:n}=e.target;if(t.startsWith("apgarScore.")){const e=t.split(".")[1];m((t=>({...t,apgarScore:{...t.apgarScore,[e]:n}})))}else m((e=>({...e,[t]:n})))};return(0,X.jsx)(Io.lG,{open:a,onOpenChange:s,children:(0,X.jsxs)(Io.Cf,{className:"max-w-3xl max-h-[90vh] overflow-visible",children:[(0,X.jsx)(Io.c7,{className:"",children:(0,X.jsxs)(Io.L3,{className:"flex items-center gap-2",children:[(0,X.jsx)(FQ,{className:"h-6 w-6 text-pink-500"}),"Edit Baby Details"]})}),(0,X.jsxs)(b.F,{className:"px-1 max-h-[80vh]",children:[(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:" gap-2 p-4 bg-gradient-to-r from-pink-50 to-blue-50 rounded-xl border-2 border-pink-100",children:[(0,X.jsxs)("div",{className:"flex justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(Fx,{className:"h-5 w-5 text-pink-500"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Mother's Name"}),(0,X.jsx)("p",{className:"font-semibold uppercase",children:null===o||void 0===o?void 0:o.name})]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(e0,{className:"h-5 w-5 text-blue-500"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"Birth Number"}),(0,X.jsx)("p",{className:"font-semibold",children:null===i||void 0===i?void 0:i.birthCounter})]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(e0,{className:"h-5 w-5 text-blue-500"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-sm text-gray-600",children:"UHID"}),(0,X.jsx)("p",{className:"font-semibold",children:null===o||void 0===o?void 0:o.registrationNumber})]})]})]}),(0,X.jsx)("div",{className:"col-span-2",children:(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{className:"",children:[(0,X.jsx)(Ks.J,{children:"Admission Date"}),(0,X.jsx)(Vn.p,{type:"date",name:"admissionDate",value:u.admissionDate,onChange:h,className:"border-2 border-pink-200 hover:border-pink-300 transition-colors"})]}),(0,X.jsxs)("div",{className:"",children:[(0,X.jsx)(Ks.J,{children:"Admission Time"}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsxs)("div",{className:"relative flex-1",children:[(0,X.jsx)(Vn.p,{type:"time",name:"timeOfAdmission",value:u.timeOfAdmission.split(" ")[0],onChange:e=>{const t=e.target.value;if(t){const e=p1(t,"HH:mm",new Date),n=(0,Go.GP)(e,"hh:mm a");m((e=>({...e,timeOfAdmission:n})))}},className:"border-2 border-pink-200 hover:border-pink-300 transition-colors pl-10"}),(0,X.jsx)(mo,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"})]}),(0,X.jsxs)(A.l6,{value:(null===(n=u.timeOfAdmission.split(" ")[1])||void 0===n?void 0:n.toLowerCase())||"am",onValueChange:e=>{const t=u.timeOfAdmission.split(" ")[0];m((n=>({...n,timeOfAdmission:`${t} ${e.toUpperCase()}`})))},children:[(0,X.jsx)(A.bq,{className:"w-[80px] border-2 border-pink-200 hover:border-pink-300 transition-colors",children:(0,X.jsx)(A.yv,{placeholder:"AM"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"am",children:"AM"}),(0,X.jsx)(A.eb,{value:"pm",children:"PM"})]})]})]})]})]})})]}),(0,X.jsxs)("div",{className:"grid grid-cols-4 gap-2 p-1",children:[(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{children:"Gender"}),(0,X.jsxs)(A.l6,{onValueChange:e=>m((t=>({...t,gender:e}))),value:u.gender,children:[(0,X.jsx)(A.bq,{children:(0,X.jsx)(A.yv,{placeholder:"Select gender"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"Male",children:"Male"}),(0,X.jsx)(A.eb,{value:"Female",children:"Female"}),(0,X.jsx)(A.eb,{value:"Other",children:"Other"})]})]})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{children:"Weight (grams)"}),(0,X.jsx)(Vn.p,{type:"number",name:"weight",value:u.weight,onChange:h,placeholder:"Enter weight"})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{children:"Date of Birth"}),(0,X.jsx)(Vn.p,{type:"date",name:"dateOfBirth",value:u.dateOfBirth,onChange:h})]}),(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{children:"Time of Birth"}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsxs)("div",{className:"relative flex-1",children:[(0,X.jsx)(Vn.p,{type:"time",name:"timeOfBirth",value:u.timeOfBirth.split(" ")[0],onChange:e=>{const t=e.target.value;if(t){const e=p1(t,"HH:mm",new Date),n=(0,Go.GP)(e,"hh:mm a");m((e=>({...e,timeOfBirth:n})))}},className:"border-2 border-pink-200 hover:border-pink-300 transition-colors pl-10"}),(0,X.jsx)(mo,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"})]}),(0,X.jsxs)(A.l6,{value:(null===(r=u.timeOfBirth.split(" ")[1])||void 0===r?void 0:r.toLowerCase())||"am",onValueChange:e=>{const t=u.timeOfBirth.split(" ")[0];m((n=>({...n,timeOfBirth:`${t} ${e.toUpperCase()}`})))},children:[(0,X.jsx)(A.bq,{className:"w-[80px] border-2 border-pink-200 hover:border-pink-300 transition-colors",children:(0,X.jsx)(A.yv,{placeholder:"AM"})}),(0,X.jsxs)(A.gC,{children:[(0,X.jsx)(A.eb,{value:"am",children:"AM"}),(0,X.jsx)(A.eb,{value:"pm",children:"PM"})]})]})]})]})]}),(0,X.jsxs)("div",{className:"space-y-2 p-2",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(s0,{className:"h-5 w-5 text-yellow-500"}),(0,X.jsx)("h3",{className:"font-semibold",children:"APGAR Score"})]}),(0,X.jsx)("div",{className:"grid grid-cols-3 gap-4",children:["oneMinute","fiveMinutes","tenMinutes"].map((e=>(0,X.jsxs)("div",{className:"space-y-1",children:[(0,X.jsx)(Ks.J,{children:"oneMinute"===e?"1 Minute":"fiveMinutes"===e?"5 Minutes":"10 Minutes"}),(0,X.jsx)(Vn.p,{type:"number",min:"0",max:"10",name:`apgarScore.${e}`,value:u.apgarScore[e],onChange:h,className:"border-2 border-pink-200 hover:border-pink-300 transition-colors"})]},e)))})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-2",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{children:"Handover Person Name"}),(0,X.jsx)(Vn.p,{name:"babyHandOverName",value:u.babyHandOverName,onChange:h,placeholder:"Enter name",className:"border-2 border-pink-200 hover:border-pink-300 transition-colors"})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{children:"Relation with Baby"}),(0,X.jsx)(Vn.p,{name:"babyHandOverRelation",value:u.babyHandOverRelation,onChange:h,placeholder:"Enter relation",className:"border-2 border-pink-200 hover:border-pink-300 transition-colors"})]})]})]}),(0,X.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,X.jsx)(w.$,{onClick:async e=>{if(e.preventDefault(),u.gender&&u.weight)try{await c((0,zt.nB)({...i,...u,weight:parseFloat(u.weight),apgarScore:{oneMinute:parseInt(u.apgarScore.oneMinute),fiveMinutes:parseInt(u.apgarScore.fiveMinutes),tenMinutes:parseInt(u.apgarScore.tenMinutes)}})).unwrap(),l({variant:"success",title:"Success",description:"Baby record has been updated successfully"}),s(!1)}catch(t){l({title:"Error",description:t.message||"Something went wrong",variant:"destructive"})}else l({title:"Error",description:"Please fill all required fields",variant:"destructive"})},className:"bg-pink-600 hover:bg-pink-700",disabled:"loading"===d,children:"loading"===d?"Saving...":"Save Changes"})]})]})]})})};function g1(){const e=(0,a.Zp)(),n=(0,j.wA)(),{ipdAdmissionId:r}=(0,a.g)(),{currentPatientBabies:s,fetchCurrentPatientBabiesStatus:i}=(0,j.d4)((e=>e.babies)),o=(0,j.d4)((e=>e.hospital.hospitalInfo)),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)(!1),p=(0,a.zy)(),{motherData:f}=p.state||{},[v,g]=(0,t.useState)(!1),[x,y]=(0,t.useState)(null),[N,_]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{var e;const t=await n((0,zt.PK)(r)).unwrap();_(null===(e=t[0])||void 0===e?void 0:e.ipdAdmission)})()}),[n,r]);return(0,X.jsxs)("div",{className:"h-[calc(100vh-4rem)] p-4 bg-gradient-to-b from-pink-50 to-blue-50",children:[(0,X.jsxs)("div",{className:"h-full flex flex-col gap-4",children:[(0,X.jsxs)("div",{className:"flex",children:[(0,X.jsx)(w.$,{variant:"ghost",onClick:()=>e(-1),className:"flex items-center gap-2 hover:bg-pink-100 w-fit",children:(0,X.jsx)(Uo.A,{className:"h-4 w-4"})}),(0,X.jsxs)("div",{className:"flex items-center gap-3",children:[(0,X.jsx)(FQ,{className:"h-8 w-8 text-pink-500"}),(0,X.jsx)(k.ZB,{className:"text-2xl font-bold text-gray-700",children:"Baby Records"})]})]}),(0,X.jsxs)(k.Zp,{className:"flex-1 border-2 border-pink-200 shadow-lg flex flex-col overflow-hidden",children:[(0,X.jsx)(k.aR,{className:"bg-gradient-to-r from-pink-200 to-blue-200 border-b-2 border-pink-200",children:(0,X.jsxs)("div",{className:"flex justify-between gap-4 items-center ",children:[(0,X.jsxs)("div",{className:"flex items-center gap-3",children:[(0,X.jsx)(Fx,{className:"h-5 w-5 text-pink-500 shrink-0"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-sm font-medium text-gray-600 ",children:"Mother's Name"}),(0,X.jsx)("p",{className:"text-lg font-semibold text-gray-800 uppercase",children:null===f||void 0===f?void 0:f.name})]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-3",children:[(0,X.jsx)(e0,{className:"h-5 w-5 text-blue-500 shrink-0"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"UHID"}),(0,X.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:null===f||void 0===f?void 0:f.registrationNumber})]})]}),(0,X.jsx)("div",{children:(0,X.jsxs)(w.$,{variant:"default",size:"sm",onClick:()=>h(!0),className:"bg-pink-600 hover:bg-pink-700 text-white inline-flex items-center gap-1",children:[(0,X.jsx)(FQ,{className:"h-4 w-4"}),"Register Birth"]})})]})}),(0,X.jsx)(b.F,{className:"flex-1",children:(0,X.jsx)(k.Wu,{className:"p-6",children:"loading"===i?(0,X.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,X.jsx)("div",{className:"w-8 h-8 border-4 border-pink-400 border-t-transparent rounded-full animate-spin"})}):0===s.length?(0,X.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No baby records found"}):(0,X.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map((t=>(0,X.jsx)(k.Zp,{className:"border-2 border-pink-100 hover:border-pink-200 transition-colors",children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(FQ,{className:"h-5 w-5 text-pink-500"}),(0,X.jsx)("h3",{className:"font-semibold text-lg",children:t.gender})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsxs)(w.$,{className:"border-pink-200 hover:border-pink-300 hover:bg-pink-50",variant:"outline",size:"sm",onClick:()=>(e=>{y(e),g(!0)})(t),children:[(0,X.jsx)(t0,{className:"h-4 w-4 text-pink-300 mr-1"}),"Edit"]}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>(e=>{c(e),u(!0)})(t),className:"border-pink-200 hover:border-pink-300 hover:bg-pink-50",children:[(0,X.jsx)(Xn.A,{className:"h-4 w-4 mr-2 text-pink-500"}),"Print Certificate"]}),(0,X.jsx)(w.$,{variant:"outline",size:"sm",onClick:()=>{return n=t._id,void e(`/babies/${n}`);var n},className:"border-pink-200 hover:border-pink-300 hover:bg-pink-50",children:"View Details"})]})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(n0,{className:"h-4 w-4 text-purple-500"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Certificate Number"}),(0,X.jsx)("p",{className:"font-medium",children:t.birthCounter})]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(zo,{className:"h-4 w-4 text-blue-500"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Birth Date"}),(0,X.jsx)("p",{className:"font-medium",children:(0,Go.GP)(new Date(t.dateOfBirth),"dd/MM/yyyy")})]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(mo,{className:"h-4 w-4 text-green-500"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Birth Time"}),(0,X.jsx)("p",{className:"font-medium",children:t.timeOfBirth})]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(Wx,{className:"h-4 w-4 text-yellow-500"}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Weight"}),(0,X.jsxs)("p",{className:"font-medium",children:[t.weight,"g"]})]})]})]})]})})},t._id)))})})})]})]}),l&&(0,X.jsx)(a0,{open:d,onOpenChange:u,hospitalInfo:o,motherData:l.mother,babyData:l,certificateNumber:l.birthCounter}),m&&(0,X.jsx)(f1,{open:m,onOpenChange:h,motherData:{...f,bookingDate:null!==N&&void 0!==N&&N.bookingDate?null===N||void 0===N?void 0:N.bookingDate:null===f||void 0===f?void 0:f.bookingDate,bookingTime:null!==N&&void 0!==N&&N.bookingTime?null===N||void 0===N?void 0:N.bookingTime:null===f||void 0===f?void 0:f.bookingTime},admissionId:r}),x&&(0,X.jsx)(v1,{open:v,onOpenChange:g,babyData:x,motherData:f})]})}function x1(){const e=(0,a.Zp)(),{babyId:t}=(0,a.g)(),n=(0,j.d4)((e=>e.babies.currentPatientBabies.find((e=>e._id===t))));return n?(0,X.jsx)("div",{className:"h-[calc(100vh-4rem)] p-4 bg-gradient-to-b from-pink-50 to-blue-50",children:(0,X.jsxs)("div",{className:"h-full flex flex-col gap-4",children:[(0,X.jsxs)(w.$,{variant:"ghost",onClick:()=>e(-1),className:"flex items-center gap-2 hover:bg-pink-100 w-fit",children:[(0,X.jsx)(Uo.A,{className:"h-4 w-4"}),"Back"]}),(0,X.jsxs)(k.Zp,{className:"flex-1 border-2 border-pink-200 shadow-lg flex flex-col overflow-hidden",children:[(0,X.jsx)(k.aR,{className:"bg-gradient-to-r from-pink-200 to-blue-200 border-b-2 border-pink-200",children:(0,X.jsxs)("div",{className:"flex items-center gap-3",children:[(0,X.jsx)(FQ,{className:"h-8 w-8 text-pink-500"}),(0,X.jsx)(k.ZB,{className:"text-2xl font-bold text-gray-700",children:"Baby Details"})]})}),(0,X.jsx)(b.F,{className:"flex-1",children:(0,X.jsxs)(k.Wu,{className:"p-6 space-y-6",children:[(0,X.jsx)(k.Zp,{className:"border-2 border-pink-100",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,X.jsx)(Fx,{className:"h-5 w-5 text-pink-500"}),(0,X.jsx)("h3",{className:"font-semibold text-lg",children:"Mother's Information"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Name"}),(0,X.jsx)("p",{className:"font-medium uppercase",children:n.mother.name})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"UHID"}),(0,X.jsx)("p",{className:"font-medium",children:n.mother.registrationNumber})]})]})]})}),(0,X.jsx)(k.Zp,{className:"border-2 border-blue-100",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,X.jsx)(Cc,{className:"h-5 w-5 text-blue-500"}),(0,X.jsx)("h3",{className:"font-semibold text-lg",children:"Baby Information"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Gender"}),(0,X.jsx)("p",{className:"font-medium",children:n.gender})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Weight"}),(0,X.jsxs)("p",{className:"font-medium",children:[n.weight,"g"]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Birth Date"}),(0,X.jsx)("p",{className:"font-medium",children:(0,Go.GP)(new Date(n.dateOfBirth),"dd/MM/yyyy")})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Birth Time"}),(0,X.jsx)("p",{className:"font-medium",children:n.timeOfBirth})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Admission Date"}),(0,X.jsx)("p",{className:"font-medium",children:(0,Go.GP)(new Date(n.admissionDate),"dd/MM/yyyy")})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Admission Time"}),(0,X.jsx)("p",{className:"font-medium",children:n.timeOfAdmission})]})]})]})}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsx)(k.Zp,{className:"border-2 border-yellow-100",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,X.jsx)(e0,{className:"h-5 w-5 text-yellow-500"}),(0,X.jsx)("h3",{className:"font-semibold text-lg",children:"APGAR Scores"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"1 Minute"}),(0,X.jsx)("p",{className:"font-medium",children:n.apgarScore.oneMinute})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"5 Minutes"}),(0,X.jsx)("p",{className:"font-medium",children:n.apgarScore.fiveMinutes})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"10 Minutes"}),(0,X.jsx)("p",{className:"font-medium",children:n.apgarScore.tenMinutes})]})]})]})}),(0,X.jsx)(k.Zp,{className:"border-2 border-green-100",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,X.jsx)(Cc,{className:"h-5 w-5 text-green-500"}),(0,X.jsx)("h3",{className:"font-semibold text-lg",children:"Handover Information"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Handed Over To"}),(0,X.jsx)("p",{className:"font-medium",children:n.babyHandOverName||"-"})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("p",{className:"text-gray-500",children:"Relation"}),(0,X.jsx)("p",{className:"font-medium",children:n.babyHandOverRelation||"-"})]})]})]})})]})]})})]})]})}):(0,X.jsx)("div",{className:"h-[calc(100vh-2rem)] p-4 flex items-center justify-center",children:(0,X.jsx)(k.Zp,{className:"w-full max-w-md",children:(0,X.jsxs)(k.Wu,{className:"p-6 text-center",children:[(0,X.jsx)("div",{className:"text-gray-500",children:"Baby record not found"}),(0,X.jsx)(w.$,{variant:"ghost",onClick:()=>e(-1),className:"mt-4",children:"Go Back"})]})})})}const y1=e=>{let{trigger:n}=e;const[r,a]=t.useState(""),s=(0,j.wA)(),{toast:i}=(0,H.dj)();return(0,X.jsxs)(Io.lG,{children:[(0,X.jsx)(Io.zM,{asChild:!0,children:n}),(0,X.jsxs)(Io.Cf,{className:"sm:max-w-[425px]",children:[(0,X.jsx)(Io.c7,{children:(0,X.jsx)(Io.L3,{children:"Add New Department"})}),(0,X.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await s($e({name:r,staffIds:[]})).unwrap(),i({title:"Success",variant:"success",description:"Department created successfully"}),a("")}catch(t){i({variant:"destructive",title:"Error",description:t.message||"Something went wrong"})}},className:"space-y-4",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"name",children:"Department Name"}),(0,X.jsx)(Vn.p,{id:"name",value:r,onChange:e=>a(e.target.value),placeholder:"Enter department name",required:!0})]}),(0,X.jsx)(w.$,{type:"submit",children:"Create Department"})]})]})]})},b1=()=>{const e=(0,j.wA)(),n=(0,a.Zp)(),{toast:r}=(0,H.dj)(),[s,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(""),{departments:u,status:m,error:h}=(0,j.d4)((e=>e.departments));(0,t.useEffect)((()=>{"idle"!==m&&e(We())}),[e]),(0,t.useEffect)((()=>{h&&r({variant:"destructive",title:"Fetch Error",description:"string"===typeof h?h:"Failed to load departments"})}),[h,r]);return(0,X.jsxs)("div",{className:"w-full",children:[(0,X.jsxs)(k.Zp,{children:[(0,X.jsxs)(k.aR,{className:"flex flex-row items-center justify-between",children:[(0,X.jsxs)("div",{className:"flex items-center gap-4",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>{n(-1)},className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsx)(k.ZB,{className:"text-xl",children:"Departments"})]}),(0,X.jsx)(y1,{trigger:(0,X.jsxs)(w.$,{children:[(0,X.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Add Department"]})})]}),(0,X.jsx)(k.Wu,{children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{children:"Department Name"}),(0,X.jsx)(Wo.nd,{children:"Staff Count"}),(0,X.jsx)(Wo.nd,{children:"Staff Members"}),(0,X.jsx)(Wo.nd,{children:"Actions"})]})}),(0,X.jsxs)(Wo.BF,{children:[u.length&&u.map((t=>{var n,a;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"font-medium",children:t.name}),(0,X.jsx)(Wo.nA,{children:(null===(n=t.staff)||void 0===n?void 0:n.length)||0}),(0,X.jsx)(Wo.nA,{children:(null===(a=t.staff)||void 0===a?void 0:a.map((e=>e.name)).join(", "))||"No staff"}),(0,X.jsxs)(Wo.nA,{children:[(0,X.jsx)(w.$,{variant:"outline",size:"sm",className:"mr-2",onClick:()=>(e=>{l(e),d(e.name),i(!0)})(t),children:"Edit"}),(0,X.jsx)(w.$,{variant:"destructive",size:"sm",onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this department?"))try{await e(Ve(t)).unwrap()&&(r({title:"Department Deleted",description:"Department has been removed successfully"}),e(We()))}catch(h){r({variant:"destructive",title:"Delete Failed",description:(null===h||void 0===h?void 0:h.message)||"Could not delete department"})}})(t._id),children:"Delete"})]})]},t._id)})),0===u.length&&(0,X.jsx)(Wo.Hj,{children:(0,X.jsx)(Wo.nA,{colSpan:4,className:"text-center",children:"No departments found"})})]})]})})]}),(0,X.jsx)(Io.lG,{open:s,onOpenChange:i,children:(0,X.jsxs)(Io.Cf,{children:[(0,X.jsx)(Io.c7,{children:(0,X.jsx)(Io.L3,{children:"Edit Department"})}),(0,X.jsx)("div",{className:"py-4",children:(0,X.jsx)(Vn.p,{value:c,onChange:e=>d(e.target.value),placeholder:"Department Name"})}),(0,X.jsxs)(Io.Es,{children:[(0,X.jsx)(w.$,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),(0,X.jsx)(w.$,{onClick:async()=>{if(""!==c.trim())try{const t=await e(He({id:o._id,name:c})).unwrap();i(!1),e(We()),t&&r({title:"Department Updated",description:`Successfully renamed to "${t.name}"`})}catch(h){r({variant:"destructive",title:"Update Failed",description:(null===h||void 0===h?void 0:h.message)||"Could not update department name"})}else r({variant:"destructive",title:"Validation Error",description:"Department name cannot be empty"})},children:"Save Changes"})]})]})})]})},j1=()=>{const e=(0,j.wA)(),n=(0,a.Zp)(),[r,s]=(0,t.useState)(""),[i,o]=(0,t.useState)("All"),[l,c]=(0,t.useState)("All Time"),d=Zc("(max-width: 640px)"),[u,m]=(0,t.useState)(null),{babies:h,status:p,error:f}=(0,j.d4)((e=>e.babies));(0,t.useEffect)((()=>{"idle"===p&&e((0,zt._Z)())}),[e,h]);const v=h.filter((e=>{var t,n;const a=null===(t=e.mother)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().includes(r.toLowerCase()),s="All"===i||e.gender===i,o=new Date(e.dateOfBirth),c=new Date,d=o.toDateString()===c.toDateString(),u=(c-o)/864e5<=7,m=o.getMonth()===c.getMonth()&&o.getFullYear()===c.getFullYear();return a&&s&&("All Time"===l||"Today"===l&&d||"This Week"===l&&u||"This Month"===l&&m)}));if("failed"===p)return(0,X.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,X.jsx)("p",{className:"text-red-500",children:"There are some problem try later"})});const g=e=>{n(`/patients/${e.ipdAdmission}/babies`,{state:{motherData:e.mother}})},x=e=>{let{baby:t}=e;return(0,X.jsx)(k.Zp,{className:"mb-4 hover:bg-gradient-to-r from-pink-50/80 to-white transition-colors duration-200 cursor-pointer border border-pink-100/50",children:(0,X.jsx)(k.Wu,{className:"p-4",children:(0,X.jsxs)("div",{className:"flex justify-between items-stretch",children:[(0,X.jsxs)("div",{className:"flex-grow",children:[(0,X.jsxs)("div",{className:"flex items-center mb-1",children:[(0,X.jsxs)("h3",{className:"text-lg font-semibold uppercase",children:["Baby of ",t.mother.name]}),(0,X.jsx)(Yo.E,{variant:"outline",className:"ml-2",children:t.gender})]}),(0,X.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Birth ID: ",t.birthCounter]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[(0,X.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Weight:"}),(0,X.jsxs)("p",{className:"font-sm",children:[t.weight,"g"]})]}),(0,X.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,X.jsx)("p",{className:"text-sm text-muted-foreground uppercase",children:"Father:"}),(0,X.jsx)("p",{className:"font-sm",children:t.babyFatherName})]}),(0,X.jsxs)("div",{className:"flex gap-2 items-center col-span-2",children:[(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Birth:"}),(0,X.jsxs)("p",{className:"font-sm",children:[(0,Go.GP)(new Date(t.dateOfBirth),"MMM dd, yyyy")," at ",t.timeOfBirth]})]})]})]}),(0,X.jsx)("div",{className:"flex flex-col justify-between items-end ml-4",children:(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,X.jsx)($o,{className:"h-4 w-4"})})}),(0,X.jsx)(Ws,{align:"end",children:(0,X.jsx)($s,{onSelect:()=>g(t),children:"View Details"})})]})})]})})})};return(0,X.jsx)("div",{className:"h-[calc(100vh-4rem)] bg-gradient-to-b from-pink-50 to-blue-50",children:(0,X.jsxs)(b.F,{className:"h-full w-full",children:[(0,X.jsxs)(k.Zp,{className:"w-full mx-auto border-0 shadow-none bg-transparent",children:[(0,X.jsx)(k.aR,{className:"px-4 pb-2",children:(0,X.jsx)("div",{className:"flex justify-between items-center",children:(0,X.jsxs)("div",{className:"flex items-center gap-0",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>{n(-1)},className:"hover:bg-pink-300",children:(0,X.jsx)(Uo.A,{className:"h-5 w-5 text-gray-600"})}),(0,X.jsx)("div",{children:(0,X.jsx)(k.ZB,{className:"text-gray-800 text-2xl",children:"Birth Records"})})]})})}),(0,X.jsxs)(k.Wu,{className:"px-4",children:[(0,X.jsx)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4",children:(0,X.jsxs)("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:space-x-2 md:space-y-0",children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,X.jsx)(Vn.p,{placeholder:"Search by mother's name...",value:r,onChange:e=>s(e.target.value),className:"pl-8 focus:border-pink-300 focus:ring-pink-200 bg-white"})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"border-gray-200 hover:bg-pink-50/50 bg-white",children:[(0,X.jsx)(Ho,{className:"mr-2 h-4 w-4 text-gray-500"}),i]})}),(0,X.jsxs)(Ws,{children:[(0,X.jsx)($s,{onSelect:()=>o("All"),children:"All"}),(0,X.jsx)($s,{onSelect:()=>o("Male"),children:"Male"}),(0,X.jsx)($s,{onSelect:()=>o("Female"),children:"Female"})]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"border-gray-200 hover:bg-pink-50/50 bg-white",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4 text-gray-500"}),l]})}),(0,X.jsxs)(Ws,{children:[(0,X.jsx)($s,{onSelect:()=>c("All Time"),children:"All Time"}),(0,X.jsx)($s,{onSelect:()=>c("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>c("This Week"),children:"This Week"}),(0,X.jsx)($s,{onSelect:()=>c("This Month"),children:"This Month"})]})]})]})}),v.length>0?d?(0,X.jsx)("div",{children:v.map((e=>(0,X.jsx)(x,{baby:e},e._id)))}):(0,X.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow-sm border border-gray-100",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{className:"bg-gradient-to-r from-pink-50 to-white",children:[(0,X.jsx)(Wo.nd,{className:"font-semibold text-gray-700",children:"Birth ID"}),(0,X.jsx)(Wo.nd,{className:"font-semibold text-gray-700",children:"Mother's Name"}),(0,X.jsx)(Wo.nd,{className:"font-semibold text-gray-700",children:"UHID"}),(0,X.jsx)(Wo.nd,{className:"font-semibold text-gray-700",children:"Gender"}),(0,X.jsx)(Wo.nd,{className:"font-semibold text-gray-700",children:"Date & Time"}),(0,X.jsx)(Wo.nd,{className:"font-semibold text-gray-700",children:"Weight"}),(0,X.jsx)(Wo.nd,{className:"font-semibold text-gray-700",children:"Father's Name"}),(0,X.jsx)(Wo.nd,{className:"font-semibold text-gray-700",children:"Actions"})]})}),(0,X.jsx)(Wo.BF,{children:v.map((e=>{var t,n;return(0,X.jsxs)(Wo.Hj,{className:"hover:bg-pink-50/50 transition-colors",children:[(0,X.jsx)(Wo.nA,{children:e.birthCounter}),(0,X.jsx)(Wo.nA,{className:"uppercase font-semibold text-gray-800",children:null===(t=e.mother)||void 0===t?void 0:t.name}),(0,X.jsx)(Wo.nA,{children:null===(n=e.mother)||void 0===n?void 0:n.registrationNumber}),(0,X.jsx)(Wo.nA,{children:(0,X.jsx)(Yo.E,{variant:"outline",className:"bg-pink-50/80 text-gray-700 border-pink-200",children:e.gender})}),(0,X.jsxs)(Wo.nA,{className:"text-gray-600",children:[(0,Go.GP)(new Date(e.dateOfBirth),"MMM dd, yyyy")," at ",e.timeOfBirth]}),(0,X.jsxs)(Wo.nA,{children:[e.weight,"g"]}),(0,X.jsx)(Wo.nA,{className:"uppercase",children:e.babyFatherName}),(0,X.jsx)(Wo.nA,{children:(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",className:"h-8 w-8 p-0 hover:text-pink-500",children:(0,X.jsx)(lo,{className:"h-4 w-4"})})}),(0,X.jsx)(Ws,{align:"end",children:(0,X.jsx)($s,{onSelect:()=>g(e),children:"View Details"})})]})})]},e._id)}))})]})}):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 bg-white rounded-lg shadow-sm",children:[(0,X.jsx)(Xc,{className:"h-16 w-16 text-gray-300 mb-4"}),(0,X.jsx)("p",{className:"text-xl font-semibold text-gray-700",children:"No birth records found"}),(0,X.jsx)("p",{className:"text-gray-500 mt-2",children:"There are no birth records matching your search criteria."})]})]})]}),(0,X.jsx)(b.$,{orientation:"vertical"})]})})},w1=()=>{var e,n;const r=(0,j.wA)(),{payments:s,status:i}=(0,j.d4)((e=>e.payments)),{dashboardData:o}=(0,j.d4)((e=>e.dashboard)),{userData:l}=(0,j.d4)((e=>e.user)),{staffMembers:c}=(0,j.d4)((e=>e.staff)),[d,u]=(0,t.useState)(""),[m,h]=(0,t.useState)("Today"),[p,f]=(0,t.useState)({from:null,to:null}),[v,g]=(0,t.useState)({from:null,to:null}),[x,y]=(0,t.useState)("All"),[b,N]=(0,t.useState)("All"),[S,E]=(0,t.useState)({name:"All Staff",id:""}),[C,D]=(0,t.useState)("All"),A=(0,t.useMemo)((()=>{const e=new Set;return s.forEach((t=>{t.paymentMethod&&e.add(t.paymentMethod)})),Array.from(e)}),[s]),{toast:P}=(0,H.dj)(),O=Zc("(max-width: 640px)"),[R,I]=(0,t.useState)(!1),F=(0,t.useRef)(),B=(0,a.Zp)(),W=(0,a.zy)(),$=async()=>{try{r((0,it.r)(!0));const e=(()=>{const e=new Date;switch(m){case"Today":return{startDate:new Date(e.setHours(0,0,0,0)).toISOString(),endDate:new Date(e.setHours(23,59,59,999)).toISOString()};case"Yesterday":const r=new Date(e);return r.setDate(r.getDate()-1),{startDate:new Date(r.setHours(0,0,0,0)).toISOString(),endDate:new Date(r.setHours(23,59,59,999)).toISOString()};case"This Week":const a=new Date(e);return a.setDate(e.getDate()-7),{startDate:new Date(a.setHours(0,0,0,0)).toISOString(),endDate:new Date(e.setHours(23,59,59,999)).toISOString()};case"Custom":var t,n;return p.from&&p.to?{startDate:new Date(null===(t=p.from)||void 0===t?void 0:t.setHours(0,0,0,0)).toISOString(),endDate:new Date(null===(n=p.to)||void 0===n?void 0:n.setHours(23,59,59,999)).toISOString()}:null;default:return null}})();null!==e&&void 0!==e&&e.startDate&&null!==e&&void 0!==e&&e.endDate&&await Promise.all([r(Ht({startDate:null===e||void 0===e?void 0:e.startDate,endDate:null===e||void 0===e?void 0:e.endDate})).unwrap(),r(Pt({startDate:null===e||void 0===e?void 0:e.startDate,endDate:null===e||void 0===e?void 0:e.endDate})).unwrap()])}catch(e){P({title:"Error",description:e.message||"Failed to fetch data",variant:"destructive"})}finally{r((0,it.r)(!1))}};(0,t.useEffect)((()=>{"idle"===i&&$()}),[i]),(0,t.useEffect)((()=>{var e,t,n;null!==(e=W.state)&&void 0!==e&&e.paymentCategoryFilter&&N(W.state.paymentCategoryFilter),null!==(t=W.state)&&void 0!==t&&t.paymentTypeFilter&&y(W.state.paymentTypeFilter),null!==(n=W.state)&&void 0!==n&&n.dateFilter&&(h(W.state.dateFilter),W.state.dateRange&&"Custom"===W.state.dateFilter&&(f(W.state.dateRange),g(W.state.dateRange)))}),[W.state]),(0,t.useEffect)((()=>{$()}),[m,p,d]),(0,t.useEffect)((()=>{r(L())}),[r]);const U=()=>{f(v),h("Custom")},z=()=>{g({from:null,to:null}),h("Today")},V=e=>new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),q=e=>new Date(e).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),G=(0,t.useMemo)((()=>s.filter((e=>{var t,n,r,a,s,i;const o=null===l||void 0===l||null===(t=l.permissions)||void 0===t?void 0:t.includes("view_otherscollection_all"),c=null===l||void 0===l||null===(n=l.permissions)||void 0===n?void 0:n.includes("view_otherscollection_for_just_today");if((null===(r=e.createdBy)||void 0===r?void 0:r._id)!==(null===l||void 0===l?void 0:l._id)&&null!==(a=e.createdBy)&&void 0!==a&&a._id){if(!o&&!c)return!1;if(c&&!o){const t=new Date,n=new Date(e.createdAt);if(!(n.getDate()===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()))return!1}}if("All"!==b&&(null===(s=e.paymentType)||void 0===s?void 0:s.name)!==b)return!1;if("All"!==x&&e.type!==x)return!1;if("All"!==C&&e.paymentMethod!==C)return!1;if(S.id&&(null===(i=e.createdBy)||void 0===i?void 0:i._id)!==S.id)return!1;if(d){var u,m,h;const t=d.toLowerCase();if(![e.description,e.paymentMethod,null===(u=e.paymentType)||void 0===u?void 0:u.name,e.createdByName,null===(m=e.createdBy)||void 0===m?void 0:m.name,V(e.createdAt),q(e.createdAt),null===(h=e.amount)||void 0===h?void 0:h.toString()].filter(Boolean).join(" ").toLowerCase().includes(t))return!1}return!0}))),[s,x,C,S,d,l,b]),K=G.filter((e=>"Income"===e.type)).reduce(((e,t)=>e+t.amount),0),Y=G.filter((e=>"Expense"===e.type)).reduce(((e,t)=>e+t.amount),0),Z=K-Y,J=(0,t.useMemo)((()=>{const e={};return G.forEach((t=>{e[t.paymentMethod]||(e[t.paymentMethod]={credit:0,debit:0}),"Income"===t.type?e[t.paymentMethod].credit+=t.amount:e[t.paymentMethod].debit+=t.amount})),e}),[G]),Q=(0,t.useMemo)((()=>{const e={ipdCollection:0,opdCollection:0,opdprocedureCollection:0,pharmacyCollection:0,laboratoryCollection:0};return G.forEach((t=>{var n;if("Income"===t.type)switch(null===(n=t.paymentType)||void 0===n?void 0:n.name){case"IPD":e.ipdCollection+=t.amount;break;case"OPD":e.opdCollection+=t.amount;break;case"OPDProcedure":e.opdprocedureCollection+=t.amount;break;case"Pharmacy":e.pharmacyCollection+=t.amount;break;case"Laboratory":e.laboratoryCollection+=t.amount}})),e}),[G]),ee=(0,t.useMemo)((()=>o&&"object"===typeof o?Object.values(o).reduce(((e,t)=>(e.totalPatients=(e.totalPatients||0)+(t.visitCount||0),e.totalAppointments=(e.totalAppointments||0)+(t.ipdCount||0),e)),{totalPatients:0,totalAppointments:0}):{totalPatients:0,totalAppointments:0}),[o]),te=(0,qn.useReactToPrint)({content:()=>F.current,onBeforeGetContent:()=>new Promise((e=>{e()})),pageStyle:"\n      @media print {\n        @page {\n          size: A4;\n          margin: 5mm;\n        }\n        body {\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n          font-size: 90%; /* Reduce overall font size */\n        }\n        .print-section {\n          display: block !important;\n          padding: 5px;\n        }\n        .no-print {\n          display: none !important;\n        }\n        .print-content {\n          position: relative;\n          padding: 10px;\n        }\n        /* Make cards more compact */\n        .grid {\n          gap: 0.5rem !important;\n        }\n        .p-4 {\n          padding: 0.5rem !important;\n        }\n        .p-3 {\n          padding: 0.375rem !important;\n        }\n        .text-xl {\n          font-size: 1rem !important;\n        }\n        .text-2xl {\n          font-size: 1.25rem !important;\n        }\n        .mb-4 {\n          margin-bottom: 0.5rem !important;\n        }\n        .mb-6 {\n          margin-bottom: 0.75rem !important;\n        }\n        /* Reduce table text size */\n        table {\n          font-size: 75% !important;\n        }\n        th, td {\n          padding: 4px !important;\n        }\n        /* Make table more compact */\n        .border {\n          border-width: 1px !important;\n        }\n        /* Ensure table headers are distinct */\n        th {\n          font-weight: bold !important;\n          background-color: #f3f4f6 !important;\n        }\n      }\n    "});return(0,X.jsxs)(k.Zp,{className:"w-full border-none shadow-none",children:[(0,X.jsx)(k.aR,{children:(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{onClick:()=>{B(-1)},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsxs)("div",{children:[(0,X.jsx)(k.ZB,{children:"Payments List"}),(0,X.jsx)(k.BT,{children:"View and manage all payments"})]})]}),(0,X.jsxs)(w.$,{onClick:te,className:"flex items-center gap-2 no-print",children:[(0,X.jsx)(Xn.A,{className:"h-4 w-4"}),"Print"]})]})}),(0,X.jsxs)(k.Wu,{children:[(0,X.jsx)("div",{className:"flex flex-col space-y-4 mb-4 no-print",children:(0,X.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[(0,X.jsxs)("div",{className:"flex-1 flex gap-2",children:[(0,X.jsxs)("div",{className:"relative flex-grow",children:[(0,X.jsx)(oo.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{placeholder:"Search payments...",value:d,onChange:e=>u(e.target.value),className:"pl-8 w-full"}),d&&(0,X.jsx)("button",{onClick:()=>u(""),className:"absolute right-2 top-2.5 text-muted-foreground hover:text-foreground",children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})]}),O&&(0,X.jsx)(w.$,{variant:"outline",className:"shrink-0",onClick:()=>I(!R),children:(0,X.jsx)(Ho,{className:"h-4 w-4"})})]}),O?(0,X.jsx)(fd,{children:R&&(0,X.jsx)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden w-full",children:(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All"===C?"Payment Method":C]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Payment Method"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>D("All"),children:"All"}),A.map((e=>(0,X.jsx)($s,{onSelect:()=>D(e),children:e},e)))]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All"===b?"Payment Category":b]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Category"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>N("All"),children:"All"}),(0,X.jsx)($s,{onSelect:()=>N("IPD"),children:"IPD"}),(0,X.jsx)($s,{onSelect:()=>N("OPD"),children:"OPD"}),(0,X.jsx)($s,{onSelect:()=>N("OPDProcedure"),children:"OPD Procedure"}),(0,X.jsx)($s,{onSelect:()=>N("Laboratory"),children:"Laboratory"})]})]}),(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All"===x?"Payment Type":x]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Payment Type"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>y("All"),children:"All"}),(0,X.jsx)($s,{onSelect:()=>y("Income"),children:"Credit"}),(0,X.jsx)($s,{onSelect:()=>y("Expense"),children:"Debit"})]})]}),"Custom"===m&&(0,X.jsx)(M.Ur,{from:v.from,to:v.to,onSelect:e=>{g(e)},onSearch:U,onCancel:z})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",className:"w-full",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All Staff"===S.name?"All Staff":S.name]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Staff Account"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>E({name:"All Staff",id:""}),children:"All Staff"}),null===c||void 0===c?void 0:c.map((e=>(0,X.jsx)($s,{onSelect:()=>E({name:e.name,id:e._id}),children:e.name},e._id)))]})]}),"Custom"===m&&(0,X.jsx)(M.Ur,{from:v.from,to:v.to,onSelect:e=>g(e),onSearch:U,onCancel:z})]})})}):(0,X.jsxs)("div",{className:"flex gap-2",children:[(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All"===C?"Payment Method":C]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Payment Method"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>D("All"),children:"All"}),A.map((e=>(0,X.jsx)($s,{onSelect:()=>D(e),children:e},e)))]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All"===b?"Payment Category":b]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Category"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>N("All"),children:"All"}),(0,X.jsx)($s,{onSelect:()=>N("IPD"),children:"IPD"}),(0,X.jsx)($s,{onSelect:()=>N("OPD"),children:"OPD"}),(0,X.jsx)($s,{onSelect:()=>N("OPDProcedure"),children:"OPD Procedure"}),(0,X.jsx)($s,{onSelect:()=>N("Laboratory"),children:"Laboratory"})]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All"===x?"Payment Type":x]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Payment Type"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>y("All"),children:"All"}),(0,X.jsx)($s,{onSelect:()=>y("Income"),children:"Income"}),(0,X.jsx)($s,{onSelect:()=>y("Expense"),children:"Expense"})]})]}),(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(zo,{className:"mr-2 h-4 w-4"}),m]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Time Filter Options"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>h("Today"),children:"Today"}),(0,X.jsx)($s,{onSelect:()=>h("Yesterday"),children:"Yesterday"}),(0,X.jsx)($s,{onSelect:()=>h("This Week"),children:"Last 7 Days"}),(0,X.jsx)($s,{onSelect:()=>h("Custom"),children:"Custom Range"})]})]}),"Custom"===m&&(0,X.jsx)(M.Ur,{from:v.from,to:v.to,onSelect:e=>g(e),onSearch:U,onCancel:z}),((null===l||void 0===l||null===(e=l.permissions)||void 0===e?void 0:e.includes("view_otherscollection_all"))||(null===l||void 0===l||null===(n=l.permissions)||void 0===n?void 0:n.includes("view_otherscollection_for_just_today")))&&(0,X.jsxs)(Ms,{children:[(0,X.jsx)(Is,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"outline",children:[(0,X.jsx)(Yc,{className:"mr-2 h-4 w-4"}),"All Staff"===S.name?"All Staffs":S.name]})}),(0,X.jsxs)(Ws,{align:"start",className:"w-[200px]",children:[(0,X.jsx)(Us,{children:"Filter by Staff Account"}),(0,X.jsx)(zs,{}),(0,X.jsx)($s,{onSelect:()=>E({name:"All Staff",id:""}),children:"All Staff"}),null===c||void 0===c?void 0:c.map((e=>(0,X.jsx)($s,{onSelect:()=>E({name:e.name,id:e._id}),children:e.name},e._id)))]})]})]})]})}),(0,X.jsx)("div",{ref:F,className:"print-content",children:(0,X.jsxs)("div",{className:"print-section",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,X.jsx)("h2",{className:"text-2xl font-bold print:block hidden",children:"Payments Report"}),(0,X.jsx)("div",{className:"print:block hidden text-right",children:(0,X.jsx)("span",{className:"font-semibold",children:(()=>{const e=new Date;switch(m){case"Today":return`${V(e)}`;case"Yesterday":const t=new Date(e);return t.setDate(t.getDate()-1),`${V(t)}`;case"This Week":const n=new Date(e);return n.setDate(e.getDate()-7),`${V(n)} - ${V(e)}`;case"Custom":return p.from&&p.to?`${V(p.from)} - ${V(p.to)}`:"";default:return""}})()})})]}),(0,X.jsxs)("div",{className:"grid grid-cols-1 gap-4 mb-6 print:hidden",children:[(0,X.jsxs)("div",{className:"hidden md:grid gap-4",style:{gridTemplateColumns:`repeat(${Object.keys(J).length+3}, minmax(0, 1fr))`},children:[(0,X.jsx)(k.Zp,{className:"bg-blue-100",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsx)("h3",{className:"font-semibold text-sm",children:"Total Credit"}),(0,X.jsx)("p",{className:"text-xl",children:(0,M.vv)(K)})]})}),(0,X.jsx)(k.Zp,{className:"bg-red-100",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsx)("h3",{className:"font-semibold text-sm",children:"Total Debit"}),(0,X.jsx)("p",{className:"text-xl",children:(0,M.vv)(Y)})]})}),(0,X.jsx)(k.Zp,{className:"bg-green-100",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsx)("h3",{className:"font-semibold text-sm",children:"Net Amount"}),(0,X.jsx)("p",{className:"text-xl",children:(0,M.vv)(Z)})]})}),Object.entries(J).map((e=>{let[t,n]=e;return(0,X.jsx)(k.Zp,{className:"bg-purple-100",children:(0,X.jsxs)(k.Wu,{className:"p-3",children:[(0,X.jsx)("h3",{className:"font-semibold text-sm mb-1",children:t}),(0,X.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,X.jsxs)("div",{className:"text-green-600 font-bold text-xl",children:["+",(0,M.vv)(n.credit)]}),(0,X.jsxs)("div",{className:"text-red-600 font-bold text-xl",children:["-",(0,M.vv)(n.debit)]})]}),(0,X.jsxs)("div",{className:"text-xl text-center font-bold mt-1",children:["Net: ",(0,M.vv)(n.credit-n.debit)]})]})},t)}))]}),(0,X.jsxs)("div",{className:"grid md:hidden gap-4",children:[(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsx)(k.Zp,{className:"bg-blue-100",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsx)("h3",{className:"font-semibold text-sm",children:"Total Credit"}),(0,X.jsx)("p",{className:"text-xl",children:(0,M.vv)(K)})]})}),(0,X.jsx)(k.Zp,{className:"bg-red-100",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsx)("h3",{className:"font-semibold text-sm",children:"Total Debit"}),(0,X.jsx)("p",{className:"text-xl",children:(0,M.vv)(Y)})]})})]}),(0,X.jsx)(k.Zp,{className:"bg-green-100",children:(0,X.jsxs)(k.Wu,{className:"p-4",children:[(0,X.jsx)("h3",{className:"font-semibold text-sm",children:"Net Amount"}),(0,X.jsx)("p",{className:"text-xl",children:(0,M.vv)(Z)})]})}),(0,X.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries(J).map((e=>{let[t,n]=e;return(0,X.jsx)(k.Zp,{className:"bg-purple-100",children:(0,X.jsxs)(k.Wu,{className:"p-3",children:[(0,X.jsx)("h3",{className:"font-semibold text-sm mb-1",children:t}),(0,X.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,X.jsxs)("div",{className:"text-green-600 font-bold text-xl",children:["+",(0,M.vv)(n.credit)]}),(0,X.jsxs)("div",{className:"text-red-600 font-bold text-xl",children:["-",(0,M.vv)(n.debit)]})]}),(0,X.jsxs)("div",{className:"text-xl text-center font-bold mt-1",children:["Net: ",(0,M.vv)(n.credit-n.debit)]})]})},t)}))})]})]}),(0,X.jsx)("div",{className:"hidden print:block mb-4",children:(0,X.jsxs)("div",{className:"flex gap-4",children:[(0,X.jsx)("div",{className:"w-1/2",children:(0,X.jsx)("table",{className:"w-full border-collapse border",children:(0,X.jsxs)("tbody",{children:[(0,X.jsxs)("tr",{className:"border",children:[(0,X.jsx)("td",{className:"border p-2 font-semibold w-[200px]",children:"Total Credit:"}),(0,X.jsx)("td",{className:"border p-2",children:(0,M.vv)(K)})]}),(0,X.jsxs)("tr",{className:"border",children:[(0,X.jsx)("td",{className:"border p-2 font-semibold",children:"Total Debit:"}),(0,X.jsx)("td",{className:"border p-2",children:(0,M.vv)(Y)})]}),(0,X.jsxs)("tr",{className:"border",children:[(0,X.jsx)("td",{className:"border p-2 font-semibold",children:"Net Amount:"}),(0,X.jsx)("td",{className:"border p-2 font-bold",children:(0,M.vv)(Z)})]})]})})}),(0,X.jsx)("div",{className:"w-1/2",children:(0,X.jsxs)("table",{className:"w-full border-collapse border",children:[(0,X.jsx)("thead",{children:(0,X.jsxs)("tr",{children:[(0,X.jsx)("th",{className:"border p-2",children:"Payment Method"}),(0,X.jsx)("th",{className:"border p-2",children:"Credit"}),(0,X.jsx)("th",{className:"border p-2",children:"Debit"}),(0,X.jsx)("th",{className:"border p-2",children:"Net"})]})}),(0,X.jsx)("tbody",{children:Object.entries(J).map((e=>{let[t,n]=e;return(0,X.jsxs)("tr",{children:[(0,X.jsx)("td",{className:"border p-2",children:t}),(0,X.jsx)("td",{className:"border p-2 text-green-600 font-semibold",children:(0,M.vv)(n.credit)}),(0,X.jsx)("td",{className:"border p-2 text-red-600 font-semibold",children:(0,M.vv)(n.debit)}),(0,X.jsx)("td",{className:"border p-2 font-semibold",children:(0,M.vv)(n.credit-n.debit)})]},t)}))})]})})]})}),"All Staff"===S.name&&(0,X.jsx)("div",{className:"hidden print:block mb-4",children:(0,X.jsxs)("table",{className:"w-full border-collapse border text-sm",children:[(0,X.jsx)("thead",{children:(0,X.jsxs)("tr",{children:[(0,X.jsx)("th",{className:"border p-1 text-left bg-gray-50 w-1/4",children:"Patient Count"}),(0,X.jsx)("th",{className:"border p-1 text-left bg-gray-50 w-1/4",children:"Collection Type"}),(0,X.jsx)("th",{className:"border p-1 text-left bg-gray-50 w-1/4",children:"Collection Type"}),(0,X.jsx)("th",{className:"border p-1 text-left bg-gray-50 w-1/4",children:"Collection Type"})]})}),(0,X.jsx)("tbody",{children:(0,X.jsxs)("tr",{children:[(0,X.jsxs)("td",{className:"border p-1",children:["OPD Visits: ",ee.totalPatients,(0,X.jsx)("br",{}),"IPD Admissions: ",ee.totalAppointments]}),(0,X.jsxs)("td",{className:"border p-1",children:["OPD Collection:"," ",(0,M.vv)(Q.opdCollection),(0,X.jsx)("br",{}),"IPD Collection:"," ",(0,M.vv)(Q.ipdCollection)]}),(0,X.jsxs)("td",{className:"border p-1",children:["OPD Procedure Collection:"," ",(0,M.vv)(Q.opdprocedureCollection),(0,X.jsx)("br",{}),"Pharmacy Collection:"," ",(0,M.vv)(Q.pharmacyCollection)]}),(0,X.jsxs)("td",{className:"border p-1",children:["Laboratory Collection:"," ",(0,M.vv)(Q.laboratoryCollection)]})]})})]})}),G.length>0?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("div",{className:"hidden md:block print:block rounded-md border",children:(0,X.jsxs)(Wo.XI,{className:"border-2 border-gray-200",children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"w-[25px] h-[30px]",children:"No."}),(0,X.jsx)(Wo.nd,{className:"h-[30px]",children:"Date&Time"}),(0,X.jsx)(Wo.nd,{className:"print:hidden h-[30px]",children:"Payment Type"}),(0,X.jsx)(Wo.nd,{className:"h-[30px]",children:"Mode"}),(0,X.jsx)(Wo.nd,{className:"h-[30px]",children:"Type"}),(0,X.jsx)(Wo.nd,{className:"h-[30px] ",children:"Description"}),(0,X.jsx)(Wo.nd,{className:"h-[30px]",children:"Amount"}),(0,X.jsx)(Wo.nd,{className:"h-[30px]",children:"User"})]})}),(0,X.jsx)(Wo.BF,{children:G.map(((e,t)=>{var n,r;return(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{children:t+1}),(0,X.jsxs)(Wo.nA,{children:[V(e.createdAt)," ",q(e.createdAt)]}),(0,X.jsx)(Wo.nA,{className:"print:hidden",children:(0,X.jsx)(Yo.E,{variant:"Income"===e.type?"success":"destructive",children:e.type})}),(0,X.jsx)(Wo.nA,{className:"print:text-center",children:e.paymentMethod}),(0,X.jsx)(Wo.nA,{children:(null===(n=e.paymentType)||void 0===n?void 0:n.name)||"--"}),(0,X.jsx)(Wo.nA,{className:"font-medium",children:"Expense"===e.type?e.description||"":(e.description?e.description:"")+(e.associatedInvoiceOrId?" - "+e.associatedInvoiceOrId:"")}),(0,X.jsxs)(Wo.nA,{className:"font-medium",children:["Income"===e.type?"+":"-",(0,M.vv)(e.amount)]}),(0,X.jsx)(Wo.nA,{children:e.createdByName||(null===(r=e.createdBy)||void 0===r?void 0:r.name)||"--"})]},e._id)}))})]})}),(0,X.jsx)("div",{className:"grid grid-cols-1 gap-3 md:hidden print:hidden",children:G.map(((e,t)=>{var n,r;return(0,X.jsxs)(k.Zp,{className:"p-3",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsxs)("span",{className:"text-sm text-gray-500",children:["#",t+1]}),(0,X.jsx)(Yo.E,{variant:"Income"===e.type?"success":"destructive",children:e.type}),(0,X.jsxs)("p",{className:"text-sm text-gray-500",children:[V(e.createdAt)," ",q(e.createdAt)]})]}),(0,X.jsx)("p",{className:"text-base font-bold",children:(0,M.vv)(e.amount)})]}),(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 text-sm",children:[(0,X.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,X.jsx)("span",{className:"text-gray-500",children:"Method:"}),(0,X.jsx)("span",{children:e.paymentMethod})]}),(0,X.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,X.jsx)("span",{className:"text-gray-500",children:"Visit Type:"}),(0,X.jsx)("span",{children:(null===(n=e.paymentType)||void 0===n?void 0:n.name)||"--"})]}),(0,X.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,X.jsx)("span",{className:"text-gray-500",children:"Description:"}),(0,X.jsx)("span",{className:"text-right",children:"Expense"===e.type?e.description||"":(e.description?e.description:"")+(e.associatedInvoiceOrId?" ("+e.associatedInvoiceOrId+")":"")})]}),(0,X.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,X.jsx)("span",{className:"text-gray-500",children:"Created By:"}),(0,X.jsx)("span",{children:e.createdByName||(null===(r=e.createdBy)||void 0===r?void 0:r.name)||"--"})]})]})]},e._id)}))})]}):(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center py-10",children:[(0,X.jsx)(Xc,{className:"h-16 w-16 text-gray-400 mb-4"}),(0,X.jsx)("p",{className:"text-xl font-semibold text-gray-600",children:"No payments found"}),(0,X.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]})]})})]})]})};function N1(){const e=(0,a.Zp)(),n=(0,j.wA)(),{labTestsTemplate:r}=(0,j.d4)((e=>e.templates)),[s,i]=(0,t.useState)({}),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),[f,v]=(0,t.useState)(!1),[g,x]=(0,t.useState)(null),y=null===r||void 0===r?void 0:r.filter((e=>{if(!(!!f||"inactive"!==(null===e||void 0===e?void 0:e.status)))return!1;const t=null===e||void 0===e?void 0:e.name.toLowerCase().includes(o.toLowerCase());return c?t&&(!(null!==e&&void 0!==e&&e.fields)||0===Object.keys(null===e||void 0===e?void 0:e.fields).length):t})),b=null===r||void 0===r?void 0:r.filter((e=>!(null!==e&&void 0!==e&&e.fields)||0===Object.keys(null===e||void 0===e?void 0:e.fields).length)).length;return(0,X.jsxs)("div",{className:"p-6",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{onClick:()=>{e(-1)},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-2xl font-bold",children:"Lab Templates"})]}),(0,X.jsxs)("div",{className:"flex items-center gap-4",children:[(0,X.jsx)(Vn.p,{type:"text",placeholder:"Search by template name...",value:o,onChange:e=>l(e.target.value),className:"max-w-sm font-semibold"}),(0,X.jsxs)(w.$,{variant:c?"secondary":"outline",onClick:()=>d(!c),className:"whitespace-nowrap text-red-500 font-bold",children:["No Parameters (",b,")"]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(NW.d,{id:"show-inactive",checked:f,onCheckedChange:v}),(0,X.jsx)(Ks.J,{htmlFor:"show-inactive",children:"Show Inactive"})]})]}),(0,X.jsx)(w.$,{onClick:()=>e("/settings/create-test-template"),children:"Create New Template"})]}),(0,X.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:null===y||void 0===y?void 0:y.map((t=>(0,X.jsxs)("div",{className:(0,Ee.cn)("border-2 rounded-lg p-4 transition-all duration-200","hover:shadow-lg hover:border-blue-400",s[t.name]?"border-blue-500 bg-blue-50/50":"border-gray-200 hover:border-blue-300"),children:[(0,X.jsxs)("div",{className:"flex flex-col cursor-pointer",onClick:()=>{return e=t.name,void i((t=>({...t,[e]:!t[e]})));var e},children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold",children:t.name}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:["inactive"===t.status&&(0,X.jsx)("span",{className:"text-xs font-bold text-yellow-500",children:"(Inactive)"}),(0,X.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["\u20b9",t.rate]})]})]}),(!t.fields||0===Object.keys(t.fields).length)&&(0,X.jsx)("div",{className:"text-sm font-bold text-red-500 mt-1",children:"No parameters"}),(0,X.jsx)("div",{className:"flex justify-center",children:(0,X.jsx)(Vg.div,{animate:{rotate:s[t.name]?180:0},transition:{duration:.2},children:(0,X.jsx)(lo,{className:(0,Ee.cn)("h-5 w-5 transition-colors duration-200",s[t.name]?"text-blue-500":"text-gray-400")})})})]}),(0,X.jsx)(fd,{children:s[t.name]&&(0,X.jsxs)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:[(0,X.jsx)("div",{className:"space-y-2 pt-2 mt-2 border-t border-blue-200",children:Object.entries((null===t||void 0===t?void 0:t.fields)||{}).map((e=>{let[t,n]=e;return(0,X.jsxs)("div",{className:"text-sm",children:[(0,X.jsxs)("span",{className:"font-medium text-blue-700",children:[n.label,":"]}),(0,X.jsx)("span",{className:"ml-2 text-gray-600",children:n.options&&Array.isArray(n.options)?n.options.join(", "):n.options||n.unit||n.normalRange})]},t)}))}),(0,X.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,X.jsx)(w.$,{size:"sm",variant:"outline",onClick:()=>e("/settings/edit-test-template",{state:{name:t.name}}),className:"hover:bg-blue-50 hover:text-blue-600 hover:border-blue-300",children:"Edit"}),"inactive"===t.status?(0,X.jsx)(w.$,{size:"sm",variant:"outline",onClick:()=>(e=>{x({action:"activate",template:e})})(t),className:"text-green-600 border-green-300 hover:bg-green-50 hover:text-green-700",children:"Activate"}):(0,X.jsx)(w.$,{size:"sm",variant:"outline",onClick:()=>(e=>{x({action:"deactivate",template:e})})(t),className:"text-yellow-600 border-yellow-300 hover:bg-yellow-50 hover:text-yellow-700",children:"Deactivate"}),(0,X.jsx)(w.$,{size:"sm",variant:"destructive",onClick:()=>(e=>{p(e),m(!0)})(t),className:"hover:bg-red-600",children:"Delete"})]})]})})]},t.name)))}),(0,X.jsx)(Ce,{open:u,onOpenChange:m,children:(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Are you absolutely sure?"}),(0,X.jsx)(Me,{children:"This action cannot be undone. This will permanently delete the template from the database."})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{children:"Cancel"}),(0,X.jsx)(Ie,{onClick:async()=>{if(!h)return;const e=r.findIndex((e=>e.name===h.name));-1!==e&&(await n((0,R.I7)({field:"labTestsTemplate",index:e})),m(!1),p(null))},children:"Confirm"})]})]})}),(0,X.jsx)(Ce,{open:!!g,onOpenChange:e=>!e&&x(null),children:(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsxs)(Re,{children:["Are you sure you want to ",null===g||void 0===g?void 0:g.action," this template?"]}),(0,X.jsx)(Me,{children:"activate"===(null===g||void 0===g?void 0:g.action)?`This will make "${null===g||void 0===g?void 0:g.template.name}" active and available for use.`:`This will deactivate "${null===g||void 0===g?void 0:g.template.name}". It will be hidden from the default list but not permanently deleted.`})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{onClick:()=>x(null),children:"Cancel"}),(0,X.jsx)(Ie,{onClick:async()=>{if(!g)return;const{action:e,template:t}=g,a=r.findIndex((e=>e.name===t.name));if(-1===a)return;const s="activate"===e?"active":"inactive",i={...t,status:s};await n((0,R.X_)({field:"labTestsTemplate",index:a,newValue:i})),x(null)},children:"Confirm"})]})]})})]})}const _1=(0,N.A)("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),S1=(0,N.A)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),E1=(0,N.A)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),C1=(0,N.A)("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);var D1=__webpack_require__(4259),T1=__webpack_require__(9786);const k1=[{value:"header",label:"Header",icon:_1},{value:"paragraph",label:"Paragraph",icon:S1},{value:"table",label:"Table",icon:E1},{value:"list",label:"Bullet List",icon:C1}];function A1(e){let{value:n=[],onChange:r}=e;const[a,s]=(0,t.useState)(!1),[i,o]=(0,t.useState)({}),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[m,h]=(0,t.useState)({header:["","",""],rows:[["","",""]]}),p=(e,t)=>{const a=[...n];a[e]={...a[e],...t},r(a)},f=(e,t)=>{switch(e.type){case"header":return(0,X.jsx)("div",{className:"mt-2",children:(0,X.jsx)(Vn.p,{value:e.content||"",onChange:e=>p(t,{content:e.target.value}),placeholder:"Enter header text...",className:"text-lg font-bold leading-relaxed"})});case"paragraph":return(0,X.jsx)("div",{className:"mt-2",children:(0,X.jsx)(Xo.T,{value:e.content||"",onChange:e=>p(t,{content:e.target.value}),placeholder:"Enter paragraph text...",className:"min-h-[100px] text-base leading-relaxed"})});case"list":return(0,X.jsxs)("div",{className:"mt-2 space-y-3",children:[e.items.map(((n,r)=>(0,X.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,X.jsx)("div",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-gray-100 text-gray-600 font-medium",children:r+1}),(0,X.jsx)(Vn.p,{value:n,onChange:n=>{const a=[...e.items];a[r]=n.target.value,p(t,{items:a})},placeholder:`List item ${r+1}`,className:"flex-1"}),(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"icon",className:"text-gray-400 hover:text-red-500 hover:bg-red-50",onClick:()=>{const n=e.items.filter(((e,t)=>t!==r));p(t,{items:n})},children:(0,X.jsx)(C.A,{className:"h-4 w-4"})})]},r))),(0,X.jsxs)(w.$,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>p(t,{items:[...e.items,""]}),children:[(0,X.jsx)(S.A,{className:"h-4 w-4 mr-2"})," Add Item"]})]});case"table":return(0,X.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,X.jsx)("div",{className:"overflow-x-auto rounded-lg border",children:(0,X.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,X.jsx)("thead",{className:"bg-gray-50",children:(0,X.jsxs)("tr",{children:[e.header.map(((r,a)=>(0,X.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,X.jsxs)("div",{className:"flex items-center gap-1",children:[(0,X.jsx)(Vn.p,{value:r,onChange:n=>{const r=[...e.header];r[a]=n.target.value,p(t,{header:r})},placeholder:`Column ${a+1}`,className:"font-semibold bg-transparent border-none p-0 focus:ring-0"}),(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full",onClick:()=>((e,t)=>{const r=n[e];if(!r||!r.header||!r.rows)return;const a=r.header.filter(((e,n)=>n!==t)),s=r.rows.map((e=>e.filter(((e,n)=>n!==t))));p(e,{header:a,rows:s})})(t,a),children:(0,X.jsx)(C.A,{className:"h-3 w-3"})})]})},a))),(0,X.jsx)("th",{className:"px-3 py-2",children:(0,X.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,X.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.rows.map(((n,r)=>(0,X.jsxs)("tr",{className:"group",children:[n.map(((n,a)=>(0,X.jsx)("td",{className:"px-3 py-1 whitespace-nowrap",children:(0,X.jsx)(Vn.p,{value:n,onChange:n=>{const s=[...e.rows];s[r][a]=n.target.value,p(t,{rows:s})},placeholder:"...",className:"w-full bg-transparent border-none p-1 focus:ring-1 focus:ring-blue-500 rounded"})},a))),(0,X.jsx)("td",{className:"px-3 py-1 text-center",children:(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 opacity-0 group-hover:opacity-100 hover:text-red-500 hover:bg-red-50 rounded-full",onClick:()=>{const n=e.rows.filter(((e,t)=>t!==r));p(t,{rows:n})},children:(0,X.jsx)(C.A,{className:"h-4 w-4"})})})]},r)))})]})}),(0,X.jsxs)("div",{className:"flex gap-3",children:[(0,X.jsxs)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>p(t,{header:[...e.header,""],rows:e.rows.map((e=>[...e,""]))}),children:[(0,X.jsx)(S.A,{className:"h-4 w-4 mr-2"})," Add Column"]}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>p(t,{rows:[...e.rows,new Array(e.header.length).fill("")]}),children:[(0,X.jsx)(S.A,{className:"h-4 w-4 mr-2"})," Add Row"]})]})]});default:return null}};return(0,X.jsxs)("div",{className:"space-y-6",children:[(0,X.jsx)("div",{className:"flex flex-wrap gap-3",children:k1.map((e=>{const t=e.icon;return(0,X.jsxs)(w.$,{type:"button",variant:"outline",className:"bg-white hover:bg-gray-50",onClick:()=>(e=>{const t={id:Date.now(),type:e,content:"paragraph"===e||"header"===e?"":void 0,items:"list"===e?[""]:void 0,header:"table"===e?["","",""]:void 0,rows:"table"===e?[["","",""]]:void 0};r([...n,t]),o((e=>({...e,[t.id]:!0})))})(e.value),children:[(0,X.jsx)(t,{className:"h-4 w-4 mr-2"}),"Add ",e.label]},e.value)}))}),(0,X.jsx)(T1.JY,{onDragEnd:e=>{if(!e.destination)return;const t=Array.from(n),[a]=t.splice(e.source.index,1);t.splice(e.destination.index,0,a),r(t)},children:(0,X.jsx)(T1.gL,{droppableId:"remarks",children:e=>(0,X.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"space-y-4",children:[n.map(((e,t)=>(0,X.jsx)(T1.sx,{draggableId:String(e.id||t),index:t,children:n=>{var r,a;const s=null!==(r=e.id)&&void 0!==r?r:t;return(0,X.jsxs)("div",{ref:n.innerRef,...n.draggableProps,className:"border rounded-lg p-5 bg-white shadow-sm hover:shadow-md transition-shadow",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>{return e=s,void o((t=>({...t,[e]:!t[e]})));var e},children:[(0,X.jsxs)("div",{...n.dragHandleProps,className:"flex items-center gap-3 text-gray-600",onClick:e=>e.stopPropagation(),children:[(0,X.jsx)(D1.A,{className:"h-5 w-5 text-gray-400"}),(t=>{const n=(null===(t=k1.find((t=>t.value===e.type)))||void 0===t?void 0:t.icon)||S1;return(0,X.jsx)(n,{className:"h-5 w-5"})})(),(0,X.jsx)("span",{className:"font-medium",children:null===(a=k1.find((t=>t.value===e.type)))||void 0===a?void 0:a.label})]}),(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"icon",className:"text-gray-400 hover:text-red-500 hover:bg-red-50",onClick:e=>{e.stopPropagation(),(e=>{u(e),c(!0)})(t)},children:(0,X.jsx)(C.A,{className:"h-4 w-4"})}),(0,X.jsx)(Vg.div,{animate:{rotate:i[s]?180:0},transition:{duration:.2},children:(0,X.jsx)(lo,{className:"h-5 w-5 text-gray-500"})})]})]}),(0,X.jsx)(fd,{children:i[s]&&(0,X.jsx)(Vg.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,X.jsx)("div",{className:"pt-4 mt-4 border-t p-1",children:f(e,t)})})})]})}},e.id||t))),e.placeholder,0===n.length&&(0,X.jsx)("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed",children:"No remarks added yet. Click one of the buttons above to add a remark."})]})})}),(0,X.jsx)(Ce,{open:l,onOpenChange:c,children:(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Delete Remark"}),(0,X.jsx)(Me,{children:"Are you sure you want to delete this remark? This action cannot be undone."})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{onClick:()=>u(null),children:"Cancel"}),(0,X.jsx)(Ie,{onClick:()=>{if(null!==d){const e=[...n];e.splice(d,1),r(e),c(!1),u(null)}},children:"Delete"})]})]})})]})}const P1=(e,t)=>{if(!e)return[];const n=Object.keys(t);return e.filter((e=>!n.includes(e)))};let O1=0;const R1=e=>(O1+=1,`${e}-${O1}-${Math.random().toString(36).substr(2,9)}`);function M1(){const e=(0,a.zy)().state.name,n=(0,j.wA)(),r=(0,a.Zp)(),{labReportFields:s,fetchLabDataStatus:i}=(0,j.d4)((e=>e.lab));(0,t.useEffect)((()=>{"idle"===i&&n(nn())}),[i,n]);const o=e=>{for(const t of Object.values(s))for(const n of Object.values(t))if(Array.isArray(n)){const t=n.find((t=>t.name===e));if(null!==t&&void 0!==t&&t.calculationDetails)return t.calculationDetails}return null},{labTestsTemplate:l}=(0,j.d4)((e=>e.templates)),[c,d]=(0,t.useState)({name:"",rate:0,fields:{},notes:"",sections:[],order:[],remarksArray:[]});(0,t.useEffect)((()=>{const t=null===l||void 0===l?void 0:l.find((t=>t.name.trim()===e.trim()));if(t){const e=Object.keys(t.fields||{}),n=[...t.sections||[]].sort(((e,t)=>e.position-t.position));let r=[],a=0;const s=n.length>0?n[0].position:e.length;for(let t=0;t<s;t++)a<e.length&&(r.push({type:"field",id:e[a]}),a++);for(let t=0;t<n.length;t++){const s=n[t],i=t<n.length-1?n[t+1].position:e.length,o=s._id;r.push({type:"section",id:o});const l=i-s.position;for(let t=0;t<l;t++)a<e.length&&(r.push({type:"field",id:e[a]}),a++)}for(;a<e.length;)r.push({type:"field",id:e[a]}),a++;const i=Object.entries((null===t||void 0===t?void 0:t.fields)||{}).reduce(((e,t)=>{let[n,r]=t;const a=r.calculationDetails||o(n);return{...e,[n]:{...r,fieldName:n,fromLabReportFields:!r.calculationDetails,...a&&{calculationDetails:a,isFormulaVisible:!1}}}}),{}),l=(t.sections||[]).map((e=>({...e,id:e._id||Date.now().toString(),isCollapsed:!1})));d({...t,fields:i,sections:l,order:r,remarksArray:t.remarksArray||[]})}}),[e,l]);const u=(e,t,n)=>{d((r=>({...r,fields:{...r.fields,[e]:{...r.fields[e],[t]:n}}})))},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=R1("field"),n={label:"New Field",value:"",unit:"",normalRange:"",options:[],fieldName:t,isNew:!0};d((r=>{const a=[...r.order],s={type:"field",id:t};return null!==e?a.splice(e+1,0,s):a.push(s),{...r,fields:{...r.fields,[t]:n},order:a}}))},h=e=>{const t=o(e);t&&d((n=>({...n,fields:{...n.fields,[e]:{...n.fields[e],calculationDetails:t,isFormulaApplied:!0,fromLabReportFields:!1}}})))},p=e=>{d((t=>({...t,fields:{...t.fields,[e]:{...t.fields[e],calculationDetails:void 0,isFormulaApplied:!1,fromLabReportFields:!0}}})))};return(0,X.jsxs)("div",{className:"p-6",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{onClick:()=>r(-1),variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsxs)("h1",{className:"text-2xl font-bold",children:["Edit Template: ",e]})]}),(0,X.jsxs)("div",{className:"flex gap-2",children:[(0,X.jsxs)(w.$,{onClick:()=>{r("/settings/create-test-template",{state:{editMode:!0,templateData:{name:c.name,rate:c.rate,fields:c.fields,notes:c.notes,sections:c.sections,remarksArray:c.remarksArray}}})},variant:"outline",children:[(0,X.jsx)(Vx,{className:"mr-2 h-4 w-4"})," Edit in Template Builder"]}),(0,X.jsx)(w.$,{variant:"destructive",onClick:async()=>{if(window.confirm("Are you sure you want to delete this template?"))try{await n((0,R.I7)({field:"labTestsTemplate",index:l.findIndex((t=>t.name===e))})).unwrap(),r("/settings/lab-templates")}catch(t){console.error("Error deleting template:",t)}},children:"Delete Template"})]})]}),(0,X.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=(a=c.fields,c.order.filter((e=>"field"===e.type)).map((e=>e.id)).reduce(((e,t)=>{const n=a[t];if(n){var r;const a="string"===typeof n.options?n.options.split(",").map((e=>e.trim())).filter((e=>e)):n.options;e[t]={label:n.label,value:n.value,unit:n.unit,normalRange:n.normalRange,...(null===a||void 0===a?void 0:a.length)>0&&{options:a},...(n.isFormulaApplied||!n.fromLabReportFields)&&(null===(r=n.calculationDetails)||void 0===r?void 0:r.formula)&&{calculationDetails:n.calculationDetails}}}return e}),{})),s=c.order.map(((e,t)=>({...e,visualPosition:t}))),i=c.sections.map((e=>{const t=s.findIndex((t=>"section"===t.type&&t.id===e.id)),n=s.slice(0,t).filter((e=>"field"===e.type)).length;return{name:e.name,position:n}})),o={name:c.name,rate:c.rate,fields:t,notes:c.notes,sections:i,remarksArray:c.remarksArray};await n((0,R.X_)({field:"labTestsTemplate",index:l.findIndex((t=>t.name===e)),newValue:o})).unwrap(),r("/settings/lab-templates")}catch(s){console.error("Error updating template:",s)}var a},className:"space-y-6",children:[(0,X.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:(0,X.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,X.jsxs)("div",{className:"flex items-center gap-3 col-span-2",children:[(0,X.jsx)("label",{className:"whitespace-nowrap text-sm font-medium text-gray-700 w-32",children:"Template Name:"}),(0,X.jsxs)("div",{className:"flex-1 flex items-center",children:[(0,X.jsx)(Vn.p,{className:"flex-1 font-semibold",value:c.name,onChange:e=>d({...c,name:e.target.value})}),(0,X.jsxs)("div",{className:"flex items-center ml-4",children:[(0,X.jsx)("label",{className:"whitespace-nowrap text-sm font-medium text-gray-700 mr-3",children:"Rate:"}),(0,X.jsx)(Vn.p,{type:"number",className:"w-[150px] text-right font-semibold",value:c.rate,onChange:e=>d({...c,rate:e.target.value})}),(0,X.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"\u20b9"})]})]})]}),(0,X.jsxs)("div",{className:"col-span-2",children:[(0,X.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes:"}),(0,X.jsx)("textarea",{className:"w-full p-2 border rounded-md",rows:3,value:c.notes||"",onChange:e=>d({...c,notes:e.target.value}),placeholder:"Add any notes about this test template..."})]})]})}),(0,X.jsxs)("div",{className:"space-y-6",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center",children:[(0,X.jsx)("h2",{className:"text-lg font-semibold",children:"Test Fields and Sections"}),(0,X.jsxs)("div",{className:"space-x-2",children:[(0,X.jsxs)(w.$,{type:"button",onClick:()=>m(),size:"sm",variant:"outline",children:[(0,X.jsx)(S.A,{className:"mr-2 h-4 w-4"})," Add Field"]}),(0,X.jsxs)(w.$,{type:"button",onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=R1("section"),n={id:t,name:"New Section",isCollapsed:!1};d((r=>{const a=[...r.order],s={type:"section",id:t};return null!==e?a.splice(e+1,0,s):a.push(s),{...r,sections:[...r.sections,n],order:a}}))}(),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,X.jsx)(S.A,{className:"mr-2 h-4 w-4"})," Add Section"]})]})]}),(0,X.jsx)(T1.JY,{onDragEnd:e=>{if(!e.destination)return;const{source:t,destination:n}=e,r=Array.from(c.order),[a]=r.splice(t.index,1);r.splice(n.index,0,a),d((e=>({...e,order:r})))},children:(0,X.jsx)(T1.gL,{droppableId:"main-list",mode:"standard",type:"DEFAULT",children:e=>(0,X.jsxs)("div",{ref:e.innerRef,...e.droppableProps,className:"space-y-2",children:[c.order.some((e=>"field"===e.type))&&(0,X.jsx)("div",{className:"pl-[20px]",children:(0,X.jsxs)("div",{className:"flex items-center gap-4",children:[(0,X.jsx)("div",{className:"w-4 h-4"}),(0,X.jsx)("div",{className:"w-8 h-8"}),(0,X.jsxs)("div",{className:"grid grid-cols-[2fr,1fr,1fr,2fr,auto] gap-4 flex-1",children:[(0,X.jsx)("div",{className:"text-sm font-medium",children:"Name"}),(0,X.jsx)("div",{className:"text-sm font-medium",children:"Unit"}),(0,X.jsx)("div",{className:"text-sm font-medium",children:"Normal Range"}),(0,X.jsx)("div",{className:"text-sm font-medium",children:"Options"}),(0,X.jsx)("div",{className:"w-8"})]})]})}),c.order.map(((e,t)=>(0,X.jsx)(T1.sx,{draggableId:`${e.type}-${e.id}`,index:t,children:n=>{var r,a,s,i,l,f,v,g,x,y,b;return(0,X.jsx)("div",{ref:n.innerRef,...n.draggableProps,className:"bg-white rounded-lg shadow-sm "+("section"===e.type?"border-l-4 border-green-500":""),children:"field"===e.type?(0,X.jsxs)("div",{className:"p-3",children:[(0,X.jsxs)("div",{className:"flex items-center gap-4",children:[(0,X.jsx)("div",{...n.dragHandleProps,children:(0,X.jsx)(D1.A,{className:"h-4 w-4 text-gray-400"})}),(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"sm",className:"p-0 h-8 w-8",onClick:()=>{d((t=>({...t,fields:{...t.fields,[e.id]:{...t.fields[e.id],isFormulaVisible:!t.fields[e.id].isFormulaVisible}}})))},children:null!==(r=c.fields[e.id])&&void 0!==r&&r.isFormulaVisible?(0,X.jsx)(lo,{className:"h-4 w-4"}):(0,X.jsx)(ly.A,{className:"h-4 w-4"})}),(0,X.jsxs)("div",{className:"grid grid-cols-[2fr,1fr,1fr,2fr,auto] gap-4 flex-1",children:[(0,X.jsx)(Vn.p,{className:"h-8 font-semibold",value:(null===(a=c.fields[e.id])||void 0===a?void 0:a.label)||"",onChange:t=>u(e.id,"label",t.target.value)}),(0,X.jsx)(Vn.p,{className:"h-8",value:(null===(s=c.fields[e.id])||void 0===s?void 0:s.unit)||"",onChange:t=>u(e.id,"unit",t.target.value)}),(0,X.jsx)(Vn.p,{className:"h-8",value:(null===(i=c.fields[e.id])||void 0===i?void 0:i.normalRange)||"",onChange:t=>u(e.id,"normalRange",t.target.value)}),(0,X.jsx)(Vn.p,{className:"h-8",value:Array.isArray(null===(l=c.fields[e.id])||void 0===l?void 0:l.options)?c.fields[e.id].options.join(", "):(null===(f=c.fields[e.id])||void 0===f?void 0:f.options)||"",onChange:t=>u(e.id,"options",t.target.value),placeholder:"Comma separated values"}),(0,X.jsx)("div",{className:"flex gap-2",children:(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:bg-red-50",onClick:()=>{return t=e.id,void d((e=>{const n={...e.fields};return delete n[t],{...e,fields:n,order:e.order.filter((e=>!("field"===e.type&&e.id===t)))}}));var t},children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})})]})]}),(null===(v=c.fields[e.id])||void 0===v?void 0:v.isFormulaVisible)&&(0,X.jsx)("div",{className:"mt-2 ml-12 p-3 bg-gray-50 rounded-md",children:null!==(g=c.fields[e.id])&&void 0!==g&&g.calculationDetails?(0,X.jsx)(X.Fragment,{children:(()=>{const t=P1(c.fields[e.id].calculationDetails.dependencies,c.fields);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("div",{className:"text-sm",children:[(0,X.jsxs)("span",{className:"font-medium",children:["Formula:"," "]}),(0,X.jsx)("span",{className:"text-gray-600",children:c.fields[e.id].calculationDetails.formula})]}),(0,X.jsxs)("div",{className:"text-sm mt-1",children:[(0,X.jsxs)("span",{className:"font-medium",children:["Dependencies:"," "]}),(0,X.jsx)("span",{className:"text-gray-600",children:c.fields[e.id].calculationDetails.dependencies.join(", ")})]}),t.length>0?(0,X.jsxs)("div",{className:"mt-2",children:[(0,X.jsxs)("div",{className:"text-sm text-red-500 mb-2",children:["Missing dependencies:"," ",t.join(", ")]}),c.fields[e.id].fromLabReportFields?(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>h(e.id),children:"Apply Formula"}):(0,X.jsx)(w.$,{type:"button",variant:"destructive",size:"sm",onClick:()=>p(e.id),children:"Remove Formula"})]}):(0,X.jsx)("div",{className:"mt-2",children:c.fields[e.id].fromLabReportFields?(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>h(e.id),children:"Apply Formula"}):(0,X.jsx)(w.$,{type:"button",variant:"destructive",size:"sm",onClick:()=>p(e.id),children:"Remove Formula"})})]})})()}):(0,X.jsx)(X.Fragment,{children:(()=>{const t=o(e.id);if(!t)return(0,X.jsx)("div",{className:"text-sm text-gray-500",children:"No calculation formula found for this parameter in the system."});const n=P1(t.dependencies,c.fields);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("div",{className:"text-sm",children:[(0,X.jsxs)("span",{className:"font-medium",children:["Available Formula:"," "]}),(0,X.jsx)("span",{className:"text-gray-600",children:t.formula})]}),(0,X.jsxs)("div",{className:"text-sm mt-1",children:[(0,X.jsxs)("span",{className:"font-medium",children:["Dependencies:"," "]}),(0,X.jsx)("span",{className:"text-gray-600",children:t.dependencies.join(", ")})]}),n.length>0?(0,X.jsxs)("div",{className:"mt-2 text-sm text-red-500",children:["Missing dependencies:"," ",n.join(", ")]}):(0,X.jsx)("div",{className:"mt-2",children:c.fields[e.id].fromLabReportFields?(0,X.jsx)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>h(e.id),children:"Apply Formula"}):(0,X.jsx)(w.$,{type:"button",variant:"destructive",size:"sm",onClick:()=>p(e.id),children:"Remove Formula"})})]})})()})})]}):(0,X.jsx)("div",{className:"p-3",children:(0,X.jsxs)("div",{className:"flex items-center gap-4",children:[(0,X.jsx)("div",{...n.dragHandleProps,children:(0,X.jsx)(D1.A,{className:"h-4 w-4 text-gray-400"})}),(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"sm",className:"p-0 h-8 w-8",onClick:()=>{return t=e.id,void d((e=>({...e,sections:e.sections.map((e=>e.id===t?{...e,isCollapsed:!e.isCollapsed}:e))})));var t},children:null!==(x=c.sections.find((t=>{var n;return(null===(n=t.id)||void 0===n?void 0:n.toString())===e.id})))&&void 0!==x&&x.isCollapsed?(0,X.jsx)(ly.A,{className:"h-4 w-4"}):(0,X.jsx)(lo,{className:"h-4 w-4"})}),(0,X.jsx)(Vn.p,{className:"h-8 font-medium flex-1",value:null!==(y=null===(b=c.sections.find((t=>t.id===e.id)))||void 0===b?void 0:b.name)&&void 0!==y?y:"",onChange:t=>{d((n=>({...n,sections:n.sections.map((n=>n.id===e.id?{...n,name:t.target.value}:n))})))}}),(0,X.jsxs)("div",{className:"flex gap-2",children:[(0,X.jsxs)(w.$,{type:"button",onClick:()=>m(t),size:"sm",variant:"outline",children:[(0,X.jsx)(S.A,{className:"mr-2 h-4 w-4"})," Add Field"]}),(0,X.jsx)(w.$,{type:"button",variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:bg-red-50",onClick:()=>{return t=e.id,void d((e=>({...e,sections:e.sections.filter((e=>e.id!==t)),order:e.order.filter((e=>!("section"===e.type&&e.id===t)))})));var t},children:(0,X.jsx)(T.A,{className:"h-4 w-4"})})]})]})})})}},`${e.type}-${e.id}`))),e.placeholder]})})}),(0,X.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[(0,X.jsx)("h2",{className:"text-lg font-semibold",children:"Custom Remarks"}),(0,X.jsx)(A1,{value:c.remarksArray,onChange:e=>d((t=>({...t,remarksArray:e})))})]})]}),(0,X.jsxs)("div",{className:"flex justify-end space-x-3 pt-6",children:[(0,X.jsx)(w.$,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Save Changes"}),(0,X.jsx)(w.$,{type:"button",variant:"outline",className:"border-gray-300 text-gray-700 hover:bg-gray-50",onClick:()=>r("/settings/lab-templates"),children:"Cancel"})]})]})]})}var I1=__webpack_require__(3800);function L1(){const e=(0,j.d4)((e=>e.hospital.hospitalInfo)),t=((0,j.wA)(),{completeType:"HAEMATOLOGY",date:(new Date).toISOString(),report:{"WHITE CELL COUNT(TC)":{value:"11600",unit:"million/cumm",normalRange:""},"RBC (RED BLOOD CELLS)":{value:"4.22",unit:"million/cumm",normalRange:"3.7-5.0"},"HB (HAEMOGLOBIN)":{value:"8.9",unit:"gm/dl",normalRange:"11.5-15.00"},"PLATELET COUNT":{value:"2.80",unit:"lakh/cumm",normalRange:"1.5-3.5"},"HCT(PCV)":{value:"26.70",unit:"%",normalRange:"36-45"},MCV:{value:"63.27",unit:"fl",normalRange:"80-100"},MCH:{value:"21.09",unit:"pg",normalRange:"27-32"},MCHC:{value:"33.33",unit:"gm%",normalRange:"32-38"}}});return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsx)("div",{className:"flex flex-col gap-6 mb-6",children:(0,X.jsx)("div",{className:"flex justify-between items-center",children:(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Lab Report Template Preview"})})}),(0,X.jsx)("div",{className:"flex justify-center bg-gray-100 p-2 min-h-[calc(100vh-200px)] overflow-auto",children:(0,X.jsx)("div",{className:"bg-white shadow-lg relative p-2",children:(0,X.jsx)(I1.A,{hospital:e,patientData:{patientName:"ANJU KUMARI",age:"21-3",gender:"FEMALE",registrationNumber:"850125",contactNumber:"9876543210",referredBy:{name:"Ayush"},patient:{age:"21-4",gender:"FEMALE"}},reportData:t})})})]})}function F1(){const e=(0,j.d4)((e=>e.hospital.hospitalInfo)),t=((0,j.wA)(),{patientName:"John Doe",age:"35-1",gender:"Male",registrationNumber:"LAB123",contactNumber:"9876543210",address:"123 Main St",bookingDate:(new Date).toISOString(),labNumber:"L001",referredBy:{name:"Dr. Smith"},paymentInfo:{totalAmount:1500,additionalDiscount:100,amountPaid:1e3,balanceDue:400,paymentMethod:[{amount:1e3,method:"Cash",date:(new Date).toISOString()}]},labTests:[{name:"Complete Blood Count",price:500,reportStatus:"Completed"},{name:"Blood Sugar",price:300,reportStatus:"Pending"},{name:"Lipid Profile",price:700,reportStatus:"In Progress"}]});return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsx)("div",{className:"flex flex-col gap-6 mb-6",children:(0,X.jsx)("div",{className:"flex justify-between items-center",children:(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Lab Billing Template Preview"})})}),(0,X.jsx)("div",{className:"flex justify-center bg-gray-100 p-2 min-h-[calc(100vh-200px)] overflow-auto",children:(0,X.jsx)("div",{className:"bg-white shadow-lg relative  ",children:(0,X.jsx)(Hl,{hospital:e,labData:t})})})]})}function B1(){const e=(0,a.Zp)(),n=(0,j.wA)(),{settings:r,status:s}=(0,j.d4)((e=>e.hospitalSettings)),[i,o]=(0,t.useState)({defaultBreakBillMode:!1,defaultBillPrintView:"list"});(0,t.useEffect)((()=>{r&&o({defaultBreakBillMode:r.defaultBreakBillMode||!1,defaultBillPrintView:r.defaultBillPrintView||"list"})}),[r]);const l=r&&(r.defaultBreakBillMode!==i.defaultBreakBillMode||r.defaultBillPrintView!==i.defaultBillPrintView);return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,X.jsx)(w.$,{onClick:()=>{e(-1)},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Hospital Settings"})]}),(0,X.jsxs)("div",{className:"space-y-6",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(zl,{id:"breakBillMode",checked:i.defaultBreakBillMode,onCheckedChange:e=>{o((t=>({...t,defaultBreakBillMode:e})))}}),(0,X.jsx)("label",{htmlFor:"breakBillMode",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Default Break Bill Mode"})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-medium",children:"Default Bill Print View"}),(0,X.jsxs)(yc,{value:i.defaultBillPrintView,onValueChange:e=>{o((t=>({...t,defaultBillPrintView:e})))},className:"flex flex-col space-y-1",children:[(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(bc,{value:"datewise",id:"datewise"}),(0,X.jsx)(Ks.J,{htmlFor:"datewise",children:"Datewise"})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(bc,{value:"list",id:"list"}),(0,X.jsx)(Ks.J,{htmlFor:"list",children:"List"})]}),(0,X.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,X.jsx)(bc,{value:"listwithoutdate",id:"listwithoutdate"}),(0,X.jsx)(Ks.J,{htmlFor:"listwithoutdate",children:"List Without Date"})]})]})]}),(0,X.jsx)(w.$,{onClick:async()=>{try{await n(mn(i)).unwrap()}catch(e){console.error("Failed to update settings:",e)}},disabled:!l||"loading"===s,className:"mt-4",children:"loading"===s?"Saving...":"Save Changes"})]})]})}const W1=(0,N.A)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),$1=()=>{const e=(0,j.wA)(),{doctors:n}=(0,j.d4)((e=>e.staff)),{doctorWiseFee:r,consultationTypes:a,status:s}=(0,j.d4)((e=>e.consultationFees)),[i,o]=(0,t.useState)(""),{toast:l}=(0,H.dj)(),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)({}),[h,p]=(0,t.useState)(!1),[f,v]=(0,t.useState)({followUpDateWithin:14}),[g,x]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{e(L()),e(pn())}),[e]),(0,X.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between",children:[(0,X.jsx)("h1",{className:"text-3xl font-bold",children:"Consultation Fees Management"}),(0,X.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>p(!h),className:"flex items-center gap-2",children:[(0,X.jsx)(W1,{className:"w-4 h-4"}),h?"Hide":"Manage"," Types"]})]}),h&&(0,X.jsxs)(k.Zp,{children:[(0,X.jsxs)(k.aR,{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold",children:"Consultation Types"}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add or remove consultation types. Types in use cannot be removed."})]}),(0,X.jsxs)(k.Wu,{children:[(0,X.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,X.jsx)(Vn.p,{placeholder:"Enter new consultation type...",value:c,onChange:e=>d(e.target.value),className:"max-w-sm"}),(0,X.jsxs)(w.$,{onClick:async()=>{if(c)if(a.includes(c.toLowerCase()))l({title:"Error",description:"This consultation type already exists",variant:"destructive"});else try{const t=[...a,c.toLowerCase()];await e(vn(t)).unwrap(),d(""),l({title:"Success",description:"Consultation type added successfully"})}catch(t){l({title:"Error",description:t.message||"Failed to add consultation type",variant:"destructive"})}},children:[(0,X.jsx)(S.A,{className:"w-4 h-4 mr-2"}),"Add Type"]})]}),(0,X.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.map((t=>(0,X.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-md bg-secondary",children:[(0,X.jsx)("span",{className:"capitalize",children:t}),(0,X.jsx)("button",{onClick:()=>(async t=>{if(r.some((e=>e.consultationType&&e.consultationType[t])))l({title:"Error",description:"Cannot remove a type that is being used by doctors",variant:"destructive"});else try{const n=a.filter((e=>e!==t));await e(vn(n)).unwrap();const r={...u};delete r[t],m(r),l({title:"Success",description:"Consultation type removed successfully",variant:"success"})}catch(n){l({title:"Error",description:n.message||"Failed to remove consultation type",variant:"destructive"})}})(t),className:"text-destructive hover:text-destructive/80",children:(0,X.jsx)(T.A,{className:"w-4 h-4"})})]},t))),0===a.length&&(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"No consultation types defined yet. Add your first type above."})]})]})]}),(0,X.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,X.jsxs)(k.Zp,{className:"lg:col-span-1",children:[(0,X.jsxs)(k.aR,{children:[(0,X.jsxs)("h2",{className:"text-xl font-semibold flex items-center justify-between",children:[(0,X.jsx)("span",{children:"Set Consultation Fees"}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",size:"sm",onClick:()=>x(!g),className:"flex items-center gap-2",children:[(0,X.jsx)(W1,{className:"w-4 h-4"}),g?"Hide":"Show"," Settings"]})]}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a doctor and set their consultation fees"}),g&&(0,X.jsx)("div",{className:"space-y-4 p-4 bg-secondary/20 rounded-lg",children:(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"followUpDays",children:"Follow-up Period (Days)"}),(0,X.jsx)(Vn.p,{id:"followUpDays",type:"number",min:"1",value:f.followUpDateWithin,onChange:e=>v({...f,followUpDateWithin:e.target.value}),className:"w-full"}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Number of days within which a patient is considered for follow-up"})]})})]}),(0,X.jsx)(k.Wu,{children:(0,X.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!i)return void l({title:"Error",description:"Please select a doctor",variant:"destructive"});const n={};a.forEach((e=>{n[e]=Number(u[e])||0}));const r={doctor:i,consultationType:n,followUpDateWithin:Number(f.followUpDateWithin)};try{await e(fn(r)).unwrap(),l({title:"Success",description:"Consultation fees updated successfully"})}catch(s){l({title:"Error",description:s.message||"Failed to update consultation fees",variant:"destructive"})}},className:"space-y-6",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"doctor",children:"Doctor"}),(0,X.jsxs)(A.l6,{value:i,onValueChange:e=>{o(e);const t=r.find((t=>t.doctor._id===e));if(t){const e={};a.forEach((n=>{var r;e[n]=(null===(r=t.consultationType)||void 0===r?void 0:r[n])||""})),m(e),v({followUpDateWithin:t.followUpDateWithin||14})}else{const e={};a.forEach((t=>{e[t]=""})),m(e),v({followUpDateWithin:14})}},children:[(0,X.jsx)(A.bq,{id:"doctor",children:(0,X.jsx)(A.yv,{placeholder:"Select a doctor"})}),(0,X.jsx)(A.gC,{children:n.map((e=>(0,X.jsx)(A.eb,{value:e._id,children:e.name},e._id)))})]})]}),(0,X.jsxs)("div",{className:"space-y-4",children:[a.map((e=>(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsxs)(Ks.J,{htmlFor:e,className:"capitalize flex items-center gap-2",children:[e,(0,X.jsx)("span",{className:"text-xs text-muted-foreground",children:"Fee"})]}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)(li,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,X.jsx)(Vn.p,{id:e,type:"number",min:"0",value:u[e],onChange:t=>m({...u,[e]:t.target.value}),className:"pl-10",required:!0})]})]},e))),0===a.length&&(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"No consultation types available. Please add types first."})]}),(0,X.jsx)(w.$,{type:"submit",className:"w-full",disabled:"loading"===s||0===a.length,children:"loading"===s?"Saving...":"Save Consultation Fees"})]})})]}),(0,X.jsxs)(k.Zp,{className:"lg:col-span-2",children:[(0,X.jsxs)(k.aR,{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold",children:"Current Fee Structure"}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"Overview of consultation fees for all doctors"})]}),(0,X.jsx)(k.Wu,{children:(0,X.jsx)("div",{className:"overflow-x-auto",children:(0,X.jsxs)(Wo.XI,{children:[(0,X.jsx)(Wo.A0,{children:(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nd,{className:"min-w-[150px]",children:"Doctor Name"}),a.map((e=>(0,X.jsx)(Wo.nd,{className:"capitalize min-w-[120px]",children:e},e)))]})}),(0,X.jsxs)(Wo.BF,{children:[r.map((e=>(0,X.jsxs)(Wo.Hj,{children:[(0,X.jsx)(Wo.nA,{className:"font-medium",children:e.doctor.name||"Unknown Doctor"}),a.map((t=>{var n;return(0,X.jsxs)(Wo.nA,{children:["\u20b9",(null===(n=e.consultationType)||void 0===n?void 0:n[t])||"-"]},t)}))]},e.doctor._id))),(0===r.length||0===a.length)&&(0,X.jsx)(Wo.Hj,{children:(0,X.jsx)(Wo.nA,{colSpan:a.length+3,className:"text-center h-24 text-muted-foreground",children:0===a.length?"No consultation types defined yet":"No consultation fees set yet"})})]})]})})})]})]})]})},U1=()=>{const{hospitalInfo:e}=(0,j.d4)((e=>e.hospital)),t=(null===e||void 0===e?void 0:e.subscriptionTimeline)||[],n=(null===e||void 0===e?void 0:e.paymentData)||[],r=(0,a.Zp)(),{daysLeft:s,isExpired:i,extraDays:o}=(()=>{if(null===e||void 0===e||!e.renewalDate)return{daysLeft:0,isExpired:!0,extraDays:0};const t=new Date,n=new Date(e.renewalDate)-t,r=Math.ceil(n/864e5);return{daysLeft:r,isExpired:r<0,extraDays:r<0?Math.abs(r):0}})(),l=null===e||void 0===e?void 0:e.discontinuedDaysLeft,c=e=>{switch(e){case"install":return"\u2713";case"trial":return"\ud83d\udcc5";case"payment":return"\ud83d\udcb3";default:return"\u2022"}},d=e=>{switch(e){case"install":return"bg-green-500";case"trial":return"bg-blue-500";case"payment":return"bg-purple-500";default:return"bg-gray-500"}};return(0,X.jsxs)("div",{className:"p-4 max-w-[1200px] mx-auto",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:()=>r(-1),className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Subscription"})]}),(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,X.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,X.jsx)("h4",{className:"font-bold text-gray-800 text-lg mb-6",children:"\ud83d\udccb Subscription Timeline"}),(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)("div",{className:"absolute left-[45px] top-0 h-full w-0.5 bg-gray-300"}),t.map(((e,t)=>(0,X.jsxs)("div",{className:"flex items-start mb-8 relative",children:[(0,X.jsx)("div",{className:`flex items-center justify-center w-[24px] h-[24px] rounded-full text-white relative z-10 ${d(e.type)}`,children:c(e.type)}),(0,X.jsxs)("div",{className:"ml-8",children:[(0,X.jsx)("h5",{className:"font-semibold text-gray-800",children:e.event}),(0,X.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.date).toLocaleDateString()}),(0,X.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]},t))),(0,X.jsxs)("div",{className:"flex items-start relative",children:[(0,X.jsx)("div",{className:"flex items-center justify-center w-[24px] h-[24px] rounded-full text-white relative z-10 "+(i?"bg-red-500":s<=7?"bg-yellow-500":"bg-green-500"),children:i?"\u26a0\ufe0f":"\u2713"}),(0,X.jsxs)("div",{className:"ml-8",children:[(0,X.jsx)("h5",{className:"font-semibold text-gray-800",children:"Current Status"}),(0,X.jsx)("p",{className:"text-sm font-medium "+(i?"text-red-600":"text-green-600"),children:i?`${o} days overdue`:`${s} days remaining`}),(0,X.jsxs)("div",{className:"flex items-center mt-1 space-x-2",children:[(0,X.jsx)("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium "+(i?"bg-red-100 text-red-700":s<=7?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:i?"Expired":s<=7?"Expiring Soon":"Active"}),(0,X.jsxs)("span",{className:"text-xs text-gray-500",children:[(null===e||void 0===e?void 0:e.planType)||"Trial"," subscription"]})]}),i&&l>=0&&(0,X.jsx)("div",{className:"mt-2",children:(0,X.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,X.jsxs)("div",{className:"flex",children:[(0,X.jsx)("div",{className:"flex-shrink-0",children:(0,X.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,X.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,X.jsxs)("div",{className:"ml-3",children:[(0,X.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Service Discontinuation Notice"}),(0,X.jsxs)("div",{className:"mt-1 text-sm text-red-700",children:[(0,X.jsxs)("p",{children:["Services will be discontinued in ",(0,X.jsx)("strong",{children:l})," days."]}),(0,X.jsx)("p",{className:"text-xs mt-1",children:"Please renew your subscription to avoid service interruption."})]})]})]})})})]})]})]}),(0,X.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,X.jsx)("div",{className:"flex justify-between items-center text-sm",children:(0,X.jsxs)("span",{className:"text-gray-600",children:["Current Plan: ",(0,X.jsx)("span",{className:"font-semibold",children:(null===e||void 0===e?void 0:e.planType)||"Trial"})]})}),i&&(null===e||void 0===e?void 0:e.renewalDate)&&(0,X.jsxs)("div",{className:"flex justify-between items-center text-sm mt-2",children:[(0,X.jsx)("span",{className:"text-gray-600",children:"Renewal Date:"}),(0,X.jsx)("span",{className:"inline-flex items-center rounded-md bg-red-100 px-2 py-1 text-xs font-medium text-red-700",children:new Date(e.renewalDate).toLocaleDateString()})]}),i&&(null===e||void 0===e?void 0:e.serviceDiscontinuedDate)&&(0,X.jsxs)("div",{className:"flex justify-between items-center text-sm mt-2",children:[(0,X.jsx)("span",{className:"text-gray-600",children:"Service Discontinuation Date:"}),(0,X.jsx)("span",{className:"inline-flex items-center rounded-md bg-red-100 px-2 py-1 text-xs font-medium text-red-700",children:new Date(e.serviceDiscontinuedDate).toLocaleDateString()})]})]})]}),(0,X.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,X.jsx)("h4",{className:"font-bold text-gray-800 text-lg mb-6",children:"\ud83d\udcb3 Payment History"}),(0,X.jsxs)("div",{className:"space-y-4",children:[n.map(((e,t)=>(0,X.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-100 hover:border-gray-200 transition-colors",children:(0,X.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,X.jsxs)("div",{children:[(0,X.jsxs)("h5",{className:"font-semibold text-gray-800",children:[e.planType," Plan"]}),(0,X.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),e.remark&&(0,X.jsx)("p",{className:"text-xs text-gray-500",children:e.remark})]}),(0,X.jsxs)("div",{className:"text-right",children:[(0,X.jsxs)("p",{className:"font-semibold text-gray-800",children:["\u20b9",e.amount.toLocaleString()]}),(0,X.jsx)("p",{className:"text-sm text-gray-500",children:e.method})]})]})},t))),0===n.length&&(0,X.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No payment history available"})]}),(0,X.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,X.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[(0,X.jsx)("span",{children:"Total Paid:"}),(0,X.jsxs)("span",{className:"font-semibold",children:["\u20b9",n.reduce(((e,t)=>e+t.amount),0).toLocaleString()]})]})})]})]})]})};function z1(e){let{value:n="",onChange:r=()=>{},templates:a=[],onTemplatesChange:s=()=>{},formTemplate:i=null,field:o={}}=e;const[l,c]=(0,t.useState)(!1),d=(0,j.wA)(),[u,m]=(0,t.useState)([...a]),[h,p]=(0,t.useState)({name:"",content:""});return(0,X.jsx)("div",{className:"flex items-center gap-2 w-full",children:(0,X.jsxs)(Io.lG,{open:l,onOpenChange:c,children:[(0,X.jsx)(Io.zM,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"outline",size:"icon",className:"shrink-0",children:(0,X.jsx)(Rs.c11,{className:"h-4 w-4"})})}),(0,X.jsxs)(Io.Cf,{className:"sm:max-w-[500px]",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Manage Templates"}),(0,X.jsx)(Io.rr,{children:"Create new templates or delete existing ones."})]}),(0,X.jsxs)("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-1",children:[0===u.length&&(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"No templates saved."}),u.map(((e,t)=>(0,X.jsxs)("div",{className:"flex items-start justify-between gap-2 p-3 border rounded-md cursor-pointer hover:bg-secondary/20",onClick:()=>(e=>{const t=u[e];t&&(r(t.content),c(!1))})(t),children:[(0,X.jsxs)("div",{className:"flex-1",children:[(0,X.jsx)("p",{className:"font-medium text-sm mb-1",children:e.name}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:e.content})]}),(0,X.jsx)(w.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),((e,t,n)=>{const r=u[e];r._id&&d(Un({templateId:r._id,formTemplate:t,field:n})),m(u.filter(((t,n)=>n!==e)))})(t,i,o)},className:"text-red-500 hover:text-red-600",children:(0,X.jsx)(Rs.ucK,{className:"h-4 w-4"})})]},t)))]}),(0,X.jsxs)("div",{className:"mt-4 space-y-3 border-t pt-4",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-medium",children:"Add New Template"}),(0,X.jsx)(Vn.p,{placeholder:"Template Name",value:h.name,onChange:e=>p((t=>({...t,name:e.target.value})))}),(0,X.jsx)(Xo.T,{placeholder:"Template Content",value:h.content,onChange:e=>p((t=>({...t,content:e.target.value}))),className:"min-h-[100px]"}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",onClick:()=>{h.name.trim()&&h.content.trim()&&(u.some((e=>e.name===h.name.trim()))||(m([...u,{...h}]),p({name:"",content:""})))},children:[(0,X.jsx)(Rs.c11,{className:"h-4 w-4 mr-2"})," Add Template"]})]}),(0,X.jsxs)(Io.Es,{children:[(0,X.jsx)(w.$,{onClick:async()=>{const e=u.filter((e=>!e._id));let t=[];if(e.length>0&&i&&o){const n=e.map((e=>d($n({templateData:e,formTemplate:i,field:o})).unwrap()));t=await Promise.all(n).catch((()=>[]))}const n=[...u.filter((e=>e._id)),...t];s(n),c(!1)},children:"Save"}),(0,X.jsx)(Io.HM,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"secondary",children:"Close"})})]})]})]})})}const H1=(0,I.zD)("listSuggestions/save",(async(e,t)=>{let{suggestion:n,formTemplate:r,field:a}=e,{rejectWithValue:s}=t;try{const e=await fetch(`${M.B8}/api/prescription-templates/listSuggestions/${r._id}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({suggestion:n,fieldId:a.id})}),t=await e.json();if(!t.success)throw new Error(t.message||"Failed to save suggestion");return t.suggestion}catch(i){return s(i.message)}})),V1=(0,I.zD)("listSuggestions/delete",(async(e,t)=>{let{suggestion:n,formTemplate:r,field:a}=e,{rejectWithValue:s}=t;try{const e=await fetch(`${M.B8}/api/prescription-templates/listSuggestions/${r._id}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({fieldId:a.id,suggestion:n})}),t=await e.json();if(!t.success)throw new Error(t.message||"Failed to delete suggestion");return n}catch(i){return s(i.message)}})),q1=(0,I.zD)("listSuggestions/saveMany",(async(e,t)=>{let{suggestions:n,formTemplate:r,field:a}=e,{rejectWithValue:s}=t;try{const e=await fetch(`${M.B8}/api/prescription-templates/listSuggestions/${r._id}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({suggestions:n,fieldId:a.id})}),t=await e.json();if(!t.success)throw new Error(t.message||"Failed to save suggestions");return t.suggestions}catch(i){return s(i.message)}}));(0,I.Z0)({name:"listSuggestions",initialState:{suggestions:[],status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(H1.pending,(e=>{e.status="loading"})).addCase(H1.fulfilled,((e,t)=>{e.status="succeeded",e.suggestions.push(t.payload)})).addCase(H1.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(V1.pending,(e=>{e.status="loading"})).addCase(V1.fulfilled,((e,t)=>{e.status="succeeded",e.suggestions=e.suggestions.filter((e=>e!==t.payload))})).addCase(V1.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(q1.pending,(e=>{e.status="loading"})).addCase(q1.fulfilled,((e,t)=>{e.status="succeeded",e.suggestions.push(...t.payload)})).addCase(q1.rejected,((e,t)=>{e.status="failed",e.error=t.payload}))}}).reducer;function G1(e){let{value:n="",onChange:r=()=>{},suggestions:a=[],onSuggestionsChange:s=()=>{},formTemplate:i=null,field:o={}}=e;const[l,c]=(0,t.useState)(!1),d=(0,j.wA)(),[u,m]=(0,t.useState)([...a]),[h,p]=(0,t.useState)("");return(0,X.jsx)("div",{className:"flex items-center gap-2 w-full",children:(0,X.jsxs)(Io.lG,{open:l,onOpenChange:c,children:[(0,X.jsx)(Io.zM,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"outline",size:"icon",children:(0,X.jsx)(Rs.c11,{className:"h-4 w-4"})})}),(0,X.jsxs)(Io.Cf,{className:"sm:max-w-[450px]",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Manage Suggestions"}),(0,X.jsx)(Io.rr,{children:"Add or remove selectable options for this field."})]}),(0,X.jsxs)("div",{className:"flex flex-wrap gap-1.5 max-h-60 overflow-y-auto pr-1",children:[0===u.length&&(0,X.jsx)("p",{className:"text-sm text-muted-foreground",children:"No suggestions."}),u.map(((e,t)=>(0,X.jsxs)("div",{className:"flex items-center gap-2 bg-blue-400 px-2 py-1 text-white  rounded text-xs font-medium cursor-pointer hover:bg-gray-200 whitespace-nowrap",onClick:()=>(e=>{const t=u[e];t&&(r(t),c(!1))})(t),children:[(0,X.jsx)("span",{className:"mr-1",children:e}),(0,X.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{const t=u[e];i&&o&&t&&d(V1({suggestion:t,formTemplate:i,field:o})),m(u.filter(((t,n)=>n!==e)))})(t)},className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:(0,X.jsx)(T.A,{className:"h-3 w-3 text-white"})})]})))]}),(0,X.jsxs)("div",{className:"mt-4 space-y-3 border-t pt-4",children:[(0,X.jsx)(Ks.J,{className:"text-sm font-medium",children:"Add New Suggestion"}),(0,X.jsx)(Vn.p,{placeholder:"Enter suggestion text",value:h,onChange:e=>p(e.target.value)}),(0,X.jsxs)(w.$,{type:"button",variant:"outline",onClick:()=>{const e=h.split(",").map((e=>e.trim())).filter(Boolean);if(0===e.length)return;const t=[...u];e.forEach((e=>{t.includes(e)||t.push(e)})),m(t),p("")},children:[(0,X.jsx)(Rs.c11,{className:"h-4 w-4 mr-2"})," Add Suggestion"]})]}),(0,X.jsxs)(Io.Es,{children:[(0,X.jsx)(w.$,{onClick:async()=>{const e=u.filter((e=>!a.includes(e)));e.length>0&&i&&o&&await d(q1({suggestions:e,formTemplate:i,field:o})).unwrap(),s(u),c(!1)},children:"Save"}),(0,X.jsx)(Io.HM,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"secondary",children:"Close"})})]})]})]})})}const K1="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function Y1(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function X1(e){return"nodeType"in e}function Z1(e){var t,n;return e?Y1(e)?e:X1(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function J1(e){const{Document:t}=Z1(e);return e instanceof t}function Q1(e){return!Y1(e)&&e instanceof Z1(e).HTMLElement}function e2(e){return e instanceof Z1(e).SVGElement}function t2(e){return e?Y1(e)?e.document:X1(e)?J1(e)?e:Q1(e)||e2(e)?e.ownerDocument:document:document:document}const n2=K1?t.useLayoutEffect:t.useEffect;function r2(e){const n=(0,t.useRef)(e);return n2((()=>{n.current=e})),(0,t.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return null==n.current?void 0:n.current(...t)}),[])}function a2(e,n){void 0===n&&(n=[e]);const r=(0,t.useRef)(e);return n2((()=>{r.current!==e&&(r.current=e)}),n),r}function s2(e,n){const r=(0,t.useRef)();return(0,t.useMemo)((()=>{const t=e(r.current);return r.current=t,t}),[...n])}function i2(e){const n=r2(e),r=(0,t.useRef)(null),a=(0,t.useCallback)((e=>{e!==r.current&&(null==n||n(e,r.current)),r.current=e}),[]);return[r,a]}function o2(e){const n=(0,t.useRef)();return(0,t.useEffect)((()=>{n.current=e}),[e]),n.current}let l2={};function c2(e,n){return(0,t.useMemo)((()=>{if(n)return n;const t=null==l2[e]?0:l2[e]+1;return l2[e]=t,e+"-"+t}),[e,n])}function d2(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[a,s]of r){const n=t[a];null!=n&&(t[a]=n+e*s)}return t}),{...t})}}const u2=d2(1),m2=d2(-1);function h2(e){if(!e)return!1;const{KeyboardEvent:t}=Z1(e.target);return t&&e instanceof t}function p2(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=Z1(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const f2=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[f2.Translate.toString(e),f2.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),v2="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function g2(e){return e.matches(v2)?e:e.querySelector(v2)}const x2={display:"none"};function y2(e){let{id:n,value:r}=e;return t.createElement("div",{id:n,style:x2},r)}function b2(e){let{id:n,announcement:r,ariaLiveType:a="assertive"}=e;return t.createElement("div",{id:n,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},r)}const j2=(0,t.createContext)(null);const w2={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},N2={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function _2(e){let{announcements:n=N2,container:r,hiddenTextDescribedById:a,screenReaderInstructions:i=w2}=e;const{announce:o,announcement:l}=function(){const[e,n]=(0,t.useState)("");return{announce:(0,t.useCallback)((e=>{null!=e&&n(e)}),[]),announcement:e}}(),c=c2("DndLiveRegion"),[d,u]=(0,t.useState)(!1);if((0,t.useEffect)((()=>{u(!0)}),[]),function(e){const n=(0,t.useContext)(j2);(0,t.useEffect)((()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)}),[e,n])}((0,t.useMemo)((()=>({onDragStart(e){let{active:t}=e;o(n.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;n.onDragMove&&o(n.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;o(n.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;o(n.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;o(n.onDragCancel({active:t,over:r}))}})),[o,n])),!d)return null;const m=t.createElement(t.Fragment,null,t.createElement(y2,{id:a,value:i.draggable}),t.createElement(b2,{id:c,announcement:l}));return r?(0,s.createPortal)(m,r):m}var S2,E2;function C2(){}function D2(e,n){return(0,t.useMemo)((()=>({sensor:e,options:null!=n?n:{}})),[e,n])}(E2=S2||(S2={})).DragStart="dragStart",E2.DragMove="dragMove",E2.DragEnd="dragEnd",E2.DragCancel="dragCancel",E2.DragOver="dragOver",E2.RegisterDroppable="registerDroppable",E2.SetDroppableDisabled="setDroppableDisabled",E2.UnregisterDroppable="unregisterDroppable";const T2=Object.freeze({x:0,y:0});function k2(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function A2(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function P2(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function O2(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function R2(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function M2(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const I2=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=M2(t,t.left,t.top),s=[];for(const i of r){const{id:e}=i,t=n.get(e);if(t){const n=k2(M2(t),a);s.push({id:e,data:{droppableContainer:i,value:n}})}}return s.sort(A2)};function L2(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=a-r,o=s-n;if(r<a&&n<s){const n=t.width*t.height,r=e.width*e.height,a=i*o;return Number((a/(n+r-a)).toFixed(4))}return 0}const F2=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const s of r){const{id:e}=s,r=n.get(e);if(r){const n=L2(r,t);n>0&&a.push({id:e,data:{droppableContainer:s,value:n}})}}return a.sort(P2)};function B2(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:T2}function W2(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const $2=W2(1);function U2(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const z2={ignoreTransform:!1};function H2(e,t){void 0===t&&(t=z2);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=Z1(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=U2(t);if(!r)return e;const{scaleX:a,scaleY:s,x:i,y:o}=r,l=e.left-i-(1-a)*parseFloat(n),c=e.top-o-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,u=s?e.height/s:e.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}(n,t,r))}const{top:r,left:a,width:s,height:i,bottom:o,right:l}=n;return{top:r,left:a,width:s,height:i,bottom:o,right:l}}function V2(e){return H2(e,{ignoreTransform:!0})}function q2(e,t){const n=[];return e?function r(a){if(null!=t&&n.length>=t)return n;if(!a)return n;if(J1(a)&&null!=a.scrollingElement&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Q1(a)||e2(a))return n;if(n.includes(a))return n;const s=Z1(e).getComputedStyle(a);return a!==e&&function(e,t){void 0===t&&(t=Z1(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"===typeof r&&n.test(r)}))}(a,s)&&n.push(a),function(e,t){return void 0===t&&(t=Z1(e).getComputedStyle(e)),"fixed"===t.position}(a,s)?n:r(a.parentNode)}(e):n}function G2(e){const[t]=q2(e,1);return null!=t?t:null}function K2(e){return K1&&e?Y1(e)?e:X1(e)?J1(e)||e===t2(e).scrollingElement?window:Q1(e)?e:null:null:null}function Y2(e){return Y1(e)?e.scrollX:e.scrollLeft}function X2(e){return Y1(e)?e.scrollY:e.scrollTop}function Z2(e){return{x:Y2(e),y:X2(e)}}var J2,Q2;function e4(e){return!(!K1||!e)&&e===document.scrollingElement}function t4(e){const t={x:0,y:0},n=e4(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}(Q2=J2||(J2={}))[Q2.Forward=1]="Forward",Q2[Q2.Backward=-1]="Backward";const n4={x:.2,y:.2};function r4(e,t,n,r,a){let{top:s,left:i,right:o,bottom:l}=n;void 0===r&&(r=10),void 0===a&&(a=n4);const{isTop:c,isBottom:d,isLeft:u,isRight:m}=t4(e),h={x:0,y:0},p={x:0,y:0},f=t.height*a.y,v=t.width*a.x;return!c&&s<=t.top+f?(h.y=J2.Backward,p.y=r*Math.abs((t.top+f-s)/f)):!d&&l>=t.bottom-f&&(h.y=J2.Forward,p.y=r*Math.abs((t.bottom-f-l)/f)),!m&&o>=t.right-v?(h.x=J2.Forward,p.x=r*Math.abs((t.right-v-o)/v)):!u&&i<=t.left+v&&(h.x=J2.Backward,p.x=r*Math.abs((t.left+v-i)/v)),{direction:h,speed:p}}function a4(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function s4(e){return e.reduce(((e,t)=>u2(e,Z2(t))),T2)}function i4(e,t){if(void 0===t&&(t=H2),!e)return;const{top:n,left:r,bottom:a,right:s}=t(e);G2(e)&&(a<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const o4=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+Y2(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+X2(t)),0)}]];class l4{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=q2(t),r=s4(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,s,i]of o4)for(const e of s)Object.defineProperty(this,e,{get:()=>{const t=i(n),s=r[a]-t;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class c4{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function d4(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"===typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var u4,m4,h4,p4;function f4(e){e.preventDefault()}function v4(e){e.stopPropagation()}(m4=u4||(u4={})).Click="click",m4.DragStart="dragstart",m4.Keydown="keydown",m4.ContextMenu="contextmenu",m4.Resize="resize",m4.SelectionChange="selectionchange",m4.VisibilityChange="visibilitychange",(p4=h4||(h4={})).Space="Space",p4.Down="ArrowDown",p4.Right="ArrowRight",p4.Left="ArrowLeft",p4.Up="ArrowUp",p4.Esc="Escape",p4.Enter="Enter",p4.Tab="Tab";const g4={start:[h4.Space,h4.Enter],cancel:[h4.Esc],end:[h4.Space,h4.Enter,h4.Tab]},x4=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case h4.Right:return{...n,x:n.x+25};case h4.Left:return{...n,x:n.x-25};case h4.Down:return{...n,y:n.y+25};case h4.Up:return{...n,y:n.y-25}}};class y4{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new c4(t2(t)),this.windowListeners=new c4(Z1(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(u4.Resize,this.handleCancel),this.windowListeners.add(u4.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(u4.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&i4(n),t(T2)}handleKeyDown(e){if(h2(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:a=g4,coordinateGetter:s=x4,scrollBehavior:i="smooth"}=r,{code:o}=e;if(a.end.includes(o))return void this.handleEnd(e);if(a.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:T2;this.referenceCoordinates||(this.referenceCoordinates=c);const d=s(e,{active:t,context:n.current,currentCoordinates:c});if(d){const t=m2(d,c),r={x:0,y:0},{scrollableAncestors:a}=n.current;for(const n of a){const a=e.code,{isTop:s,isRight:o,isLeft:l,isBottom:c,maxScroll:u,minScroll:m}=t4(n),h=a4(n),p={x:Math.min(a===h4.Right?h.right-h.width/2:h.right,Math.max(a===h4.Right?h.left:h.left+h.width/2,d.x)),y:Math.min(a===h4.Down?h.bottom-h.height/2:h.bottom,Math.max(a===h4.Down?h.top:h.top+h.height/2,d.y))},f=a===h4.Right&&!o||a===h4.Left&&!l,v=a===h4.Down&&!c||a===h4.Up&&!s;if(f&&p.x!==d.x){const e=n.scrollLeft+t.x,s=a===h4.Right&&e<=u.x||a===h4.Left&&e>=m.x;if(s&&!t.y)return void n.scrollTo({left:e,behavior:i});r.x=s?n.scrollLeft-e:a===h4.Right?n.scrollLeft-u.x:n.scrollLeft-m.x,r.x&&n.scrollBy({left:-r.x,behavior:i});break}if(v&&p.y!==d.y){const e=n.scrollTop+t.y,s=a===h4.Down&&e<=u.y||a===h4.Up&&e>=m.y;if(s&&!t.x)return void n.scrollTo({top:e,behavior:i});r.y=s?n.scrollTop-e:a===h4.Down?n.scrollTop-u.y:n.scrollTop-m.y,r.y&&n.scrollBy({top:-r.y,behavior:i});break}}this.handleMove(e,u2(m2(d,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function b4(e){return Boolean(e&&"distance"in e)}function j4(e){return Boolean(e&&"delay"in e)}y4.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=g4,onActivation:a}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class w4{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=Z1(e);return e instanceof t?e:t2(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:s}=a;this.props=e,this.events=t,this.document=t2(s),this.documentListeners=new c4(this.document),this.listeners=new c4(n),this.windowListeners=new c4(Z1(s)),this.initialCoordinates=null!=(r=p2(a))?r:T2,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(u4.Resize,this.handleCancel),this.windowListeners.add(u4.DragStart,f4),this.windowListeners.add(u4.VisibilityChange,this.handleCancel),this.windowListeners.add(u4.ContextMenu,f4),this.documentListeners.add(u4.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(j4(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(b4(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(u4.Click,v4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(u4.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:a}=this,{onMove:s,options:{activationConstraint:i}}=a;if(!r)return;const o=null!=(t=p2(e))?t:T2,l=m2(r,o);if(!n&&i){if(b4(i)){if(null!=i.tolerance&&d4(l,i.tolerance))return this.handleCancel();if(d4(l,i.distance))return this.handleStart()}return j4(i)&&d4(l,i.tolerance)?this.handleCancel():void this.handlePending(i,l)}e.cancelable&&e.preventDefault(),s(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===h4.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const N4={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class _4 extends w4{constructor(e){const{event:t}=e,n=t2(t.target);super(e,N4,n)}}_4.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const S4={move:{name:"mousemove"},end:{name:"mouseup"}};var E4,C4;(C4=E4||(E4={}))[C4.RightClick=2]="RightClick";(class extends w4{constructor(e){super(e,S4,t2(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==E4.RightClick&&(null==r||r({event:n}),!0)}}];const D4={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var T4,k4,A4,P4;function O4(e){let{acceleration:n,activator:r=T4.Pointer,canScroll:a,draggingRect:s,enabled:i,interval:o=5,order:l=A4.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:h}=e;const p=function(e){let{delta:t,disabled:n}=e;const r=o2(t);return s2((e=>{if(n||!r||!e)return R4;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[J2.Backward]:e.x[J2.Backward]||-1===a.x,[J2.Forward]:e.x[J2.Forward]||1===a.x},y:{[J2.Backward]:e.y[J2.Backward]||-1===a.y,[J2.Forward]:e.y[J2.Forward]||1===a.y}}}),[n,t,r])}({delta:m,disabled:!i}),[f,v]=function(){const e=(0,t.useRef)(null);return[(0,t.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]),(0,t.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),g=(0,t.useRef)({x:0,y:0}),x=(0,t.useRef)({x:0,y:0}),y=(0,t.useMemo)((()=>{switch(r){case T4.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case T4.DraggableRect:return s}}),[r,s,c]),b=(0,t.useRef)(null),j=(0,t.useCallback)((()=>{const e=b.current;if(!e)return;const t=g.current.x*x.current.x,n=g.current.y*x.current.y;e.scrollBy(t,n)}),[]),w=(0,t.useMemo)((()=>l===A4.TreeOrder?[...d].reverse():d),[l,d]);(0,t.useEffect)((()=>{if(i&&d.length&&y){for(const e of w){if(!1===(null==a?void 0:a(e)))continue;const t=d.indexOf(e),r=u[t];if(!r)continue;const{direction:s,speed:i}=r4(e,r,y,n,h);for(const e of["x","y"])p[e][s[e]]||(i[e]=0,s[e]=0);if(i.x>0||i.y>0)return v(),b.current=e,f(j,o),g.current=i,void(x.current=s)}g.current={x:0,y:0},x.current={x:0,y:0},v()}else v()}),[n,j,a,v,i,o,JSON.stringify(y),JSON.stringify(p),f,d,w,u,JSON.stringify(h)])}(class extends w4{constructor(e){super(e,D4)}static setup(){return window.addEventListener(D4.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(D4.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return!(a.length>1)&&(null==r||r({event:n}),!0)}}],(k4=T4||(T4={}))[k4.Pointer=0]="Pointer",k4[k4.DraggableRect=1]="DraggableRect",(P4=A4||(A4={}))[P4.TreeOrder=0]="TreeOrder",P4[P4.ReversedTreeOrder=1]="ReversedTreeOrder";const R4={x:{[J2.Backward]:!1,[J2.Forward]:!1},y:{[J2.Backward]:!1,[J2.Forward]:!1}};var M4,I4,L4;(I4=M4||(M4={}))[I4.Always=0]="Always",I4[I4.BeforeDragging=1]="BeforeDragging",I4[I4.WhileDragging=2]="WhileDragging",(L4||(L4={})).Optimized="optimized";const F4=new Map;function B4(e,t){return s2((n=>e?n||("function"===typeof t?t(e):e):null),[t,e])}function W4(e){let{callback:n,disabled:r}=e;const a=r2(n),s=(0,t.useMemo)((()=>{if(r||"undefined"===typeof window||"undefined"===typeof window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(a)}),[r]);return(0,t.useEffect)((()=>()=>null==s?void 0:s.disconnect()),[s]),s}function $4(e){return new l4(H2(e),e)}function U4(e,n,r){void 0===n&&(n=$4);const[a,s]=(0,t.useState)(null);function i(){s((t=>{if(!e)return null;var a;if(!1===e.isConnected)return null!=(a=null!=t?t:r)?a:null;const s=n(e);return JSON.stringify(t)===JSON.stringify(s)?t:s}))}const o=function(e){let{callback:n,disabled:r}=e;const a=r2(n),s=(0,t.useMemo)((()=>{if(r||"undefined"===typeof window||"undefined"===typeof window.MutationObserver)return;const{MutationObserver:e}=window;return new e(a)}),[a,r]);return(0,t.useEffect)((()=>()=>null==s?void 0:s.disconnect()),[s]),s}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){i();break}}}}),l=W4({callback:i});return n2((()=>{i(),e?(null==l||l.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==o||o.disconnect())}),[e]),a}const z4=[];function H4(e,n){void 0===n&&(n=[]);const r=(0,t.useRef)(null);return(0,t.useEffect)((()=>{r.current=null}),n),(0,t.useEffect)((()=>{const t=e!==T2;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)}),[e]),r.current?m2(e,r.current):T2}function V4(e){return(0,t.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const q4=[];function G4(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Q1(t)?t:e}const K4=[{sensor:_4,options:{}},{sensor:y4,options:{}}],Y4={current:{}},X4={draggable:{measure:V2},droppable:{measure:V2,strategy:M4.WhileDragging,frequency:L4.Optimized},dragOverlay:{measure:H2}};class Z4 extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const J4={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Z4,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:C2},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:X4,measureDroppableContainers:C2,windowRect:null,measuringScheduled:!1},Q4={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:C2,draggableNodes:new Map,over:null,measureDroppableContainers:C2},e3=(0,t.createContext)(Q4),t3=(0,t.createContext)(J4);function n3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Z4}}}function r3(e,t){switch(t.type){case S2.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case S2.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case S2.DragEnd:case S2.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case S2.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new Z4(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case S2.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Z4(e.droppable.containers);return i.set(n,{...s,disabled:a}),{...e,droppable:{...e.droppable,containers:i}}}case S2.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const s=new Z4(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function a3(e){let{disabled:n}=e;const{active:r,activatorEvent:a,draggableNodes:s}=(0,t.useContext)(e3),i=o2(a),o=o2(null==r?void 0:r.id);return(0,t.useEffect)((()=>{if(!n&&!a&&i&&null!=o){if(!h2(i))return;if(document.activeElement===i.target)return;const e=s.get(o);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=g2(e);if(t){t.focus();break}}}))}}),[a,n,s,o,i]),null}function s3(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}const i3=(0,t.createContext)({...T2,scaleX:1,scaleY:1});var o3,l3;(l3=o3||(o3={}))[l3.Uninitialized=0]="Uninitialized",l3[l3.Initializing=1]="Initializing",l3[l3.Initialized=2]="Initialized";const c3=(0,t.memo)((function(e){var n,r,a,i;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:u=K4,collisionDetection:m=F2,measuring:h,modifiers:p,...f}=e;const v=(0,t.useReducer)(r3,void 0,n3),[g,x]=v,[y,b]=function(){const[e]=(0,t.useState)((()=>new Set)),n=(0,t.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]);return[(0,t.useCallback)((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),n]}(),[j,w]=(0,t.useState)(o3.Uninitialized),N=j===o3.Initialized,{draggable:{active:_,nodes:S,translate:E},droppable:{containers:C}}=g,D=null!=_?S.get(_):null,T=(0,t.useRef)({initial:null,translated:null}),k=(0,t.useMemo)((()=>{var e;return null!=_?{id:_,data:null!=(e=null==D?void 0:D.data)?e:Y4,rect:T}:null}),[_,D]),A=(0,t.useRef)(null),[P,O]=(0,t.useState)(null),[R,M]=(0,t.useState)(null),I=a2(f,Object.values(f)),L=c2("DndDescribedBy",o),F=(0,t.useMemo)((()=>C.getEnabled()),[C]),B=(W=h,(0,t.useMemo)((()=>({draggable:{...X4.draggable,...null==W?void 0:W.draggable},droppable:{...X4.droppable,...null==W?void 0:W.droppable},dragOverlay:{...X4.dragOverlay,...null==W?void 0:W.dragOverlay}})),[null==W?void 0:W.draggable,null==W?void 0:W.droppable,null==W?void 0:W.dragOverlay]));var W;const{droppableRects:$,measureDroppableContainers:U,measuringScheduled:z}=function(e,n){let{dragging:r,dependencies:a,config:s}=n;const[i,o]=(0,t.useState)(null),{frequency:l,measure:c,strategy:d}=s,u=(0,t.useRef)(e),m=function(){switch(d){case M4.Always:return!1;case M4.BeforeDragging:return r;default:return!r}}(),h=a2(m),p=(0,t.useCallback)((function(e){void 0===e&&(e=[]),h.current||o((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[h]),f=(0,t.useRef)(null),v=s2((t=>{if(m&&!r)return F4;if(!t||t===F4||u.current!==e||null!=i){const t=new Map;for(let n of e){if(!n)continue;if(i&&i.length>0&&!i.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new l4(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,i,r,m,c]);return(0,t.useEffect)((()=>{u.current=e}),[e]),(0,t.useEffect)((()=>{m||p()}),[r,m]),(0,t.useEffect)((()=>{i&&i.length>0&&o(null)}),[JSON.stringify(i)]),(0,t.useEffect)((()=>{m||"number"!==typeof l||null!==f.current||(f.current=setTimeout((()=>{p(),f.current=null}),l))}),[l,m,p,...a]),{droppableRects:v,measureDroppableContainers:p,measuringScheduled:null!=i}}(F,{dragging:N,dependencies:[E.x,E.y],config:B.droppable}),H=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return s2((e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(S,_),V=(0,t.useMemo)((()=>R?p2(R):null),[R]),q=function(){const e=!1===(null==P?void 0:P.autoScrollEnabled),t="object"===typeof c?!1===c.enabled:!1===c,n=N&&!e&&!t;if("object"===typeof c)return{...c,enabled:n};return{enabled:n}}(),G=function(e,t){return B4(e,t)}(H,B.draggable.measure);!function(e){let{activeNode:n,measure:r,initialRect:a,config:s=!0}=e;const i=(0,t.useRef)(!1),{x:o,y:l}="boolean"===typeof s?{x:s,y:s}:s;n2((()=>{if(!o&&!l||!n)return void(i.current=!1);if(i.current||!a)return;const e=null==n?void 0:n.node.current;if(!e||!1===e.isConnected)return;const t=B2(r(e),a);if(o||(t.x=0),l||(t.y=0),i.current=!0,Math.abs(t.x)>0||Math.abs(t.y)>0){const n=G2(e);n&&n.scrollBy({top:t.y,left:t.x})}}),[n,o,l,a,r])}({activeNode:null!=_?S.get(_):null,config:q.layoutShiftCompensation,initialRect:G,measure:B.draggable.measure});const K=U4(H,B.draggable.measure,G),Y=U4(H?H.parentElement:null),X=(0,t.useRef)({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:C,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Z=C.getNodeFor(null==(n=X.current.over)?void 0:n.id),J=function(e){let{measure:n}=e;const[r,a]=(0,t.useState)(null),s=W4({callback:(0,t.useCallback)((e=>{for(const{target:t}of e)if(Q1(t)){a((e=>{const r=n(t);return e?{...e,width:r.width,height:r.height}:r}));break}}),[n])}),i=(0,t.useCallback)((e=>{const t=G4(e);null==s||s.disconnect(),t&&(null==s||s.observe(t)),a(t?n(t):null)}),[n,s]),[o,l]=i2(i);return(0,t.useMemo)((()=>({nodeRef:o,rect:r,setRef:l})),[r,o,l])}({measure:B.dragOverlay.measure}),Q=null!=(r=J.nodeRef.current)?r:H,ee=N?null!=(a=J.rect)?a:K:null,te=Boolean(J.nodeRef.current&&J.rect),ne=B2(re=te?null:K,B4(re));var re;const ae=V4(Q?Z1(Q):null),se=function(e){const n=(0,t.useRef)(e),r=s2((t=>e?t&&t!==z4&&e&&n.current&&e.parentNode===n.current.parentNode?t:q2(e):z4),[e]);return(0,t.useEffect)((()=>{n.current=e}),[e]),r}(N?null!=Z?Z:H:null),ie=function(e,n){void 0===n&&(n=H2);const[r]=e,a=V4(r?Z1(r):null),[s,i]=(0,t.useState)(q4);function o(){i((()=>e.length?e.map((e=>e4(e)?a:new l4(n(e),e))):q4))}const l=W4({callback:o});return n2((()=>{null==l||l.disconnect(),o(),e.forEach((e=>null==l?void 0:l.observe(e)))}),[e]),s}(se),oe=s3(p,{transform:{x:E.x-ne.x,y:E.y-ne.y,scaleX:1,scaleY:1},activatorEvent:R,active:k,activeNodeRect:K,containerNodeRect:Y,draggingNodeRect:ee,over:X.current.over,overlayNodeRect:J.rect,scrollableAncestors:se,scrollableAncestorRects:ie,windowRect:ae}),le=V?u2(V,E):null,ce=function(e){const[n,r]=(0,t.useState)(null),a=(0,t.useRef)(e),s=(0,t.useCallback)((e=>{const t=K2(e.target);t&&r((e=>e?(e.set(t,Z2(t)),new Map(e)):null))}),[]);return(0,t.useEffect)((()=>{const t=a.current;if(e!==t){n(t);const i=e.map((e=>{const t=K2(e);return t?(t.addEventListener("scroll",s,{passive:!0}),[t,Z2(t)]):null})).filter((e=>null!=e));r(i.length?new Map(i):null),a.current=e}return()=>{n(e),n(t)};function n(e){e.forEach((e=>{const t=K2(e);null==t||t.removeEventListener("scroll",s)}))}}),[s,e]),(0,t.useMemo)((()=>e.length?n?Array.from(n.values()).reduce(((e,t)=>u2(e,t)),T2):s4(e):T2),[e,n])}(se),de=H4(ce),ue=H4(ce,[K]),me=u2(oe,de),he=ee?$2(ee,oe):null,pe=k&&he?m({active:k,collisionRect:he,droppableRects:$,droppableContainers:F,pointerCoordinates:le}):null,fe=R2(pe,"id"),[ve,ge]=(0,t.useState)(null),xe=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(te?oe:u2(oe,ue),null!=(i=null==ve?void 0:ve.rect)?i:null,K),ye=(0,t.useRef)(null),be=(0,t.useCallback)(((e,t)=>{let{sensor:n,options:r}=t;if(null==A.current)return;const a=S.get(A.current);if(!a)return;const i=e.nativeEvent,o=new n({active:A.current,activeNode:a,event:i,options:r,context:X,onAbort(e){if(!S.get(e))return;const{onDragAbort:t}=I.current,n={id:e};null==t||t(n),y({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!S.get(e))return;const{onDragPending:a}=I.current,s={id:e,constraint:t,initialCoordinates:n,offset:r};null==a||a(s),y({type:"onDragPending",event:s})},onStart(e){const t=A.current;if(null==t)return;const n=S.get(t);if(!n)return;const{onDragStart:r}=I.current,a={activatorEvent:i,active:{id:t,data:n.data,rect:T}};(0,s.unstable_batchedUpdates)((()=>{null==r||r(a),w(o3.Initializing),x({type:S2.DragStart,initialCoordinates:e,active:t}),y({type:"onDragStart",event:a}),O(ye.current),M(i)}))},onMove(e){x({type:S2.DragMove,coordinates:e})},onEnd:l(S2.DragEnd),onCancel:l(S2.DragCancel)});function l(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:a}=X.current;let o=null;if(t&&a){const{cancelDrop:s}=I.current;if(o={activatorEvent:i,active:t,collisions:n,delta:a,over:r},e===S2.DragEnd&&"function"===typeof s){await Promise.resolve(s(o))&&(e=S2.DragCancel)}}A.current=null,(0,s.unstable_batchedUpdates)((()=>{x({type:e}),w(o3.Uninitialized),ge(null),O(null),M(null),ye.current=null;const t=e===S2.DragEnd?"onDragEnd":"onDragCancel";if(o){const e=I.current[t];null==e||e(o),y({type:t,event:o})}}))}}ye.current=o}),[S]),je=(0,t.useCallback)(((e,t)=>(n,r)=>{const a=n.nativeEvent,s=S.get(r);if(null!==A.current||!s||a.dndKit||a.defaultPrevented)return;const i={active:s};!0===e(n,t.options,i)&&(a.dndKit={capturedBy:t.sensor},A.current=r,be(n,t))}),[S,be]),we=function(e,n){return(0,t.useMemo)((()=>e.reduce(((e,t)=>{const{sensor:r}=t;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:n(e.handler,t)})))]}),[])),[e,n])}(u,je);!function(e){(0,t.useEffect)((()=>{if(!K1)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(u),n2((()=>{K&&j===o3.Initializing&&w(o3.Initialized)}),[K,j]),(0,t.useEffect)((()=>{const{onDragMove:e}=I.current,{active:t,activatorEvent:n,collisions:r,over:a}=X.current;if(!t||!n)return;const i={active:t,activatorEvent:n,collisions:r,delta:{x:me.x,y:me.y},over:a};(0,s.unstable_batchedUpdates)((()=>{null==e||e(i),y({type:"onDragMove",event:i})}))}),[me.x,me.y]),(0,t.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:a}=X.current;if(!e||null==A.current||!t||!a)return;const{onDragOver:i}=I.current,o=r.get(fe),l=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,c={active:e,activatorEvent:t,collisions:n,delta:{x:a.x,y:a.y},over:l};(0,s.unstable_batchedUpdates)((()=>{ge(l),null==i||i(c),y({type:"onDragOver",event:c})}))}),[fe]),n2((()=>{X.current={activatorEvent:R,active:k,activeNode:H,collisionRect:he,collisions:pe,droppableRects:$,draggableNodes:S,draggingNode:Q,draggingNodeRect:ee,droppableContainers:C,over:ve,scrollableAncestors:se,scrollAdjustedTranslate:me},T.current={initial:ee,translated:he}}),[k,H,pe,he,S,Q,ee,$,C,ve,se,me]),O4({...q,delta:E,draggingRect:he,pointerCoordinates:le,scrollableAncestors:se,scrollableAncestorRects:ie});const Ne=(0,t.useMemo)((()=>({active:k,activeNode:H,activeNodeRect:K,activatorEvent:R,collisions:pe,containerNodeRect:Y,dragOverlay:J,draggableNodes:S,droppableContainers:C,droppableRects:$,over:ve,measureDroppableContainers:U,scrollableAncestors:se,scrollableAncestorRects:ie,measuringConfiguration:B,measuringScheduled:z,windowRect:ae})),[k,H,K,R,pe,Y,J,S,C,$,ve,U,se,ie,B,z,ae]),_e=(0,t.useMemo)((()=>({activatorEvent:R,activators:we,active:k,activeNodeRect:K,ariaDescribedById:{draggable:L},dispatch:x,draggableNodes:S,over:ve,measureDroppableContainers:U})),[R,we,k,K,x,L,S,ve,U]);return t.createElement(j2.Provider,{value:b},t.createElement(e3.Provider,{value:_e},t.createElement(t3.Provider,{value:Ne},t.createElement(i3.Provider,{value:xe},d)),t.createElement(a3,{disabled:!1===(null==l?void 0:l.restoreFocus)})),t.createElement(_2,{...l,hiddenTextDescribedById:L}))})),d3=(0,t.createContext)(null),u3="button";function m3(e){let{id:n,data:r,disabled:a=!1,attributes:s}=e;const i=c2("Draggable"),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:m,over:h}=(0,t.useContext)(e3),{role:p=u3,roleDescription:f="draggable",tabIndex:v=0}=null!=s?s:{},g=(null==c?void 0:c.id)===n,x=(0,t.useContext)(g?i3:d3),[y,b]=i2(),[j,w]=i2(),N=function(e,n){return(0,t.useMemo)((()=>e.reduce(((e,t)=>{let{eventName:r,handler:a}=t;return e[r]=e=>{a(e,n)},e}),{})),[e,n])}(o,n),_=a2(r);n2((()=>(m.set(n,{id:n,key:i,node:y,activatorNode:j,data:_}),()=>{const e=m.get(n);e&&e.key===i&&m.delete(n)})),[m,n]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:(0,t.useMemo)((()=>({role:p,tabIndex:v,"aria-disabled":a,"aria-pressed":!(!g||p!==u3)||void 0,"aria-roledescription":f,"aria-describedby":u.draggable})),[a,p,v,g,f,u.draggable]),isDragging:g,listeners:a?void 0:N,node:y,over:h,setNodeRef:b,setActivatorNodeRef:w,transform:x}}function h3(){return(0,t.useContext)(t3)}const p3={timeout:25};function f3(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function v3(e,t){return e.reduce(((e,n,r)=>{const a=t.get(n);return a&&(e[r]=a),e}),Array(e.length))}function g3(e){return null!==e&&e>=0}const x3=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const s=f3(t,r,n),i=t[a],o=s[a];return o&&i?{x:o.left-i.left,y:o.top-i.top,scaleX:o.width/i.width,scaleY:o.height/i.height}:null},y3={scaleX:1,scaleY:1},b3=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:s,overIndex:i}=e;const o=null!=(t=s[n])?t:r;if(!o)return null;if(a===n){const e=s[i];return e?{x:0,y:n<i?e.top+e.height-(o.top+o.height):e.top-o.top,...y3}:null}const l=function(e,t,n){const r=e[t],a=e[t-1],s=e[t+1];if(!r)return 0;if(n<t)return a?r.top-(a.top+a.height):s?s.top-(r.top+r.height):0;return s?s.top-(r.top+r.height):a?r.top-(a.top+a.height):0}(s,a,n);return a>n&&a<=i?{x:0,y:-o.height-l,...y3}:a<n&&a>=i?{x:0,y:o.height+l,...y3}:{x:0,y:0,...y3}};const j3="Sortable",w3=t.createContext({activeIndex:-1,containerId:j3,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:x3,disabled:{draggable:!1,droppable:!1}});function N3(e){let{children:n,id:r,items:a,strategy:s=x3,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=h3(),m=c2(j3,r),h=Boolean(null!==l.rect),p=(0,t.useMemo)((()=>a.map((e=>"object"===typeof e&&"id"in e?e.id:e))),[a]),f=null!=o,v=o?p.indexOf(o.id):-1,g=d?p.indexOf(d.id):-1,x=(0,t.useRef)(p),y=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(p,x.current),b=-1!==g&&-1===v||y,j=function(e){return"boolean"===typeof e?{draggable:e,droppable:e}:e}(i);n2((()=>{y&&f&&u(p)}),[y,p,f,u]),(0,t.useEffect)((()=>{x.current=p}),[p]);const w=(0,t.useMemo)((()=>({activeIndex:v,containerId:m,disabled:j,disableTransforms:b,items:p,overIndex:g,useDragOverlay:h,sortedRects:v3(p,c),strategy:s})),[v,m,j.draggable,j.droppable,b,p,g,c,h,s]);return t.createElement(w3.Provider,{value:w},n)}const _3=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return f3(n,r,a).indexOf(t)},S3=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:s,newIndex:i,previousItems:o,previousContainerId:l,transition:c}=e;return!(!c||!r)&&((o===s||a!==i)&&(!!n||i!==a&&t===l))},E3={duration:200,easing:"ease"},C3="transform",D3=f2.Transition.toString({property:C3,duration:0,easing:"linear"}),T3={roleDescription:"sortable"};function k3(e){let{animateLayoutChanges:n=S3,attributes:r,disabled:a,data:s,getNewIndex:i=_3,id:o,strategy:l,resizeObserverConfig:c,transition:d=E3}=e;const{items:u,containerId:m,activeIndex:h,disabled:p,disableTransforms:f,sortedRects:v,overIndex:g,useDragOverlay:x,strategy:y}=(0,t.useContext)(w3),b=function(e,t){var n,r;if("boolean"===typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(a,p),j=u.indexOf(o),w=(0,t.useMemo)((()=>({sortable:{containerId:m,index:j,items:u},...s})),[m,s,j,u]),N=(0,t.useMemo)((()=>u.slice(u.indexOf(o))),[u,o]),{rect:_,node:S,isOver:E,setNodeRef:C}=function(e){let{data:n,disabled:r=!1,id:a,resizeObserverConfig:s}=e;const i=c2("Droppable"),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=(0,t.useContext)(e3),u=(0,t.useRef)({disabled:r}),m=(0,t.useRef)(!1),h=(0,t.useRef)(null),p=(0,t.useRef)(null),{disabled:f,updateMeasurementsFor:v,timeout:g}={...p3,...s},x=a2(null!=v?v:a),y=W4({callback:(0,t.useCallback)((()=>{m.current?(null!=p.current&&clearTimeout(p.current),p.current=setTimeout((()=>{d(Array.isArray(x.current)?x.current:[x.current]),p.current=null}),g)):m.current=!0}),[g]),disabled:f||!o}),b=(0,t.useCallback)(((e,t)=>{y&&(t&&(y.unobserve(t),m.current=!1),e&&y.observe(e))}),[y]),[j,w]=i2(b),N=a2(n);return(0,t.useEffect)((()=>{y&&j.current&&(y.disconnect(),m.current=!1,y.observe(j.current))}),[j,y]),(0,t.useEffect)((()=>(l({type:S2.RegisterDroppable,element:{id:a,key:i,disabled:r,node:j,rect:h,data:N}}),()=>l({type:S2.UnregisterDroppable,key:i,id:a}))),[a]),(0,t.useEffect)((()=>{r!==u.current.disabled&&(l({type:S2.SetDroppableDisabled,id:a,key:i,disabled:r}),u.current.disabled=r)}),[a,i,r,l]),{active:o,rect:h,isOver:(null==c?void 0:c.id)===a,node:j,over:c,setNodeRef:w}}({id:o,data:w,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:D,activatorEvent:T,activeNodeRect:k,attributes:A,setNodeRef:P,listeners:O,isDragging:R,over:M,setActivatorNodeRef:I,transform:L}=m3({id:o,data:w,attributes:{...T3,...r},disabled:b.draggable}),F=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t.useMemo)((()=>e=>{n.forEach((t=>t(e)))}),n)}(C,P),B=Boolean(D),W=B&&!f&&g3(h)&&g3(g),$=!x&&R,U=$&&W?L:null,z=W?null!=U?U:(null!=l?l:y)({rects:v,activeNodeRect:k,activeIndex:h,overIndex:g,index:j}):null,H=g3(h)&&g3(g)?i({id:o,items:u,activeIndex:h,overIndex:g}):j,V=null==D?void 0:D.id,q=(0,t.useRef)({activeId:V,items:u,newIndex:H,containerId:m}),G=u!==q.current.items,K=n({active:D,containerId:m,isDragging:R,isSorting:B,id:o,index:j,items:u,newIndex:q.current.newIndex,previousItems:q.current.items,previousContainerId:q.current.containerId,transition:d,wasDragging:null!=q.current.activeId}),Y=function(e){let{disabled:n,index:r,node:a,rect:s}=e;const[i,o]=(0,t.useState)(null),l=(0,t.useRef)(r);return n2((()=>{if(!n&&r!==l.current&&a.current){const e=s.current;if(e){const t=H2(a.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&o(n)}}r!==l.current&&(l.current=r)}),[n,r,a,s]),(0,t.useEffect)((()=>{i&&o(null)}),[i]),i}({disabled:!K,index:j,node:S,rect:_});return(0,t.useEffect)((()=>{B&&q.current.newIndex!==H&&(q.current.newIndex=H),m!==q.current.containerId&&(q.current.containerId=m),u!==q.current.items&&(q.current.items=u)}),[B,H,m,u]),(0,t.useEffect)((()=>{if(V===q.current.activeId)return;if(null!=V&&null==q.current.activeId)return void(q.current.activeId=V);const e=setTimeout((()=>{q.current.activeId=V}),50);return()=>clearTimeout(e)}),[V]),{active:D,activeIndex:h,attributes:A,data:w,rect:_,index:j,newIndex:H,items:u,isOver:E,isSorting:B,isDragging:R,listeners:O,node:S,overIndex:g,over:M,setNodeRef:F,setActivatorNodeRef:I,setDroppableNodeRef:C,setDraggableNodeRef:P,transform:null!=Y?Y:z,transition:function(){if(Y||G&&q.current.newIndex===j)return D3;if($&&!h2(T)||!d)return;if(B||K)return f2.Transition.toString({...d,property:C3});return}()}}function A3(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"===typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const P3=[h4.Down,h4.Right,h4.Up,h4.Left],O3=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:s,over:i,scrollableAncestors:o}}=t;if(P3.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];s.getEnabled().forEach((n=>{if(!n||null!=n&&n.disabled)return;const s=a.get(n.id);if(s)switch(e.code){case h4.Down:r.top<s.top&&t.push(n);break;case h4.Up:r.top>s.top&&t.push(n);break;case h4.Left:r.left>s.left&&t.push(n);break;case h4.Right:r.left<s.left&&t.push(n)}}));const l=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=O2(t),s=[];for(const i of r){const{id:e}=i,t=n.get(e);if(t){const n=O2(t),r=a.reduce(((e,t,r)=>e+k2(n[r],t)),0),o=Number((r/4).toFixed(4));s.push({id:e,data:{droppableContainer:i,value:o}})}}return s.sort(A2)})({active:n,collisionRect:r,droppableRects:a,droppableContainers:t,pointerCoordinates:null});let c=R2(l,"id");if(c===(null==i?void 0:i.id)&&l.length>1&&(c=l[1].id),null!=c){const e=s.get(n.id),t=s.get(c),i=t?a.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&i&&e&&t){const n=q2(l).some(((e,t)=>o[t]!==e)),a=R3(e,t),s=function(e,t){if(!A3(e)||!A3(t))return!1;if(!R3(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=n||!a?{x:0,y:0}:{x:s?r.width-i.width:0,y:s?r.height-i.height:0},d={x:i.left,y:i.top};return c.x&&c.y?d:m2(d,c)}}}};function R3(e,t){return!(!A3(e)||!A3(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}const M3=["textarea","multiselect","vitals","investigations","medicineAdvice"],I3=e=>{let{field:t,sectionIndex:n,fieldIndex:r,...a}=e;const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:c,isDragging:d}=k3({id:`${n}-${t.id}`}),u={transform:f2.Transform.toString(l),transition:c,opacity:d?.5:1};return(0,X.jsx)("div",{ref:o,style:u,children:(0,X.jsx)(L3,{field:t,dragHandleProps:{...s,...i},...a})})},L3=e=>{let{field:n,onToggle:r,onUpdate:a,onDelete:s,selectedTemplate:i,dragHandleProps:o}=e;const[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(n.label||""),[m,h]=(0,t.useState)(n.type||""),[p,f]=(0,t.useState)("");(0,t.useEffect)((()=>{var e;l&&(u(n.label||""),h(n.type||""),"textarea"===n.type?f(n.templates||[]):f(null!==(e=n.suggestions)&&void 0!==e?e:""))}),[l,n]);return(0,X.jsxs)(Io.lG,{open:l,onOpenChange:c,children:[(0,X.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,X.jsxs)("div",{className:"flex items-center gap-3",children:[(0,X.jsx)("div",{...o,className:"cursor-grab active:cursor-grabbing p-1 hover:bg-gray-200 rounded",children:(0,X.jsx)(Rs.YtH,{className:"h-4 w-4 text-gray-500"})}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{className:"font-medium",children:n.label}),(0,X.jsxs)("p",{className:"text-sm text-gray-500",children:["Type: ",n.type,n.component&&` (${n.component})`]})]})]}),(0,X.jsxs)("div",{className:"flex items-center gap-3",children:[(0,X.jsx)(Io.zM,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,X.jsx)(Rs.L64,{className:"h-4 w-4"})})}),s&&(0,X.jsx)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-700",onClick:e=>{e.stopPropagation(),s()},children:(0,X.jsx)(Rs.ucK,{className:"h-4 w-4"})}),(0,X.jsx)("span",{className:"text-sm text-gray-500",children:n.disabled?"Disabled":"Enabled"}),(0,X.jsx)(NW.d,{checked:!n.disabled,onCheckedChange:r})]})]}),(0,X.jsxs)(Io.Cf,{children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Edit Field"}),(0,X.jsx)(Io.rr,{children:"Update the properties of this prescription field."})]}),(0,X.jsxs)("div",{className:"space-y-4 py-2",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{children:"ID"}),(0,X.jsx)(Vn.p,{id:"field-id",value:n.id,disabled:!0})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"field-label",children:"Label"}),(0,X.jsx)(Vn.p,{id:"field-label",value:d,onChange:e=>u(e.target.value)})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{children:"Type"}),(0,X.jsxs)(A.l6,{value:m,onValueChange:h,disabled:n.id,children:[(0,X.jsx)(A.bq,{className:"w-full",children:(0,X.jsx)(A.yv,{placeholder:"Select type"})}),(0,X.jsx)(A.gC,{children:M3.map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{children:"Data Source/Suggestions"}),"textarea"===m?(0,X.jsx)(z1,{value:p,onChange:e=>f(e),templates:n.templates||[],onTemplatesChange:e=>{a({templates:e})},formTemplate:i,field:n}):(0,X.jsx)(G1,{value:p,onChange:e=>f(e),suggestions:Array.isArray(n.suggestions)?n.suggestions:[],onSuggestionsChange:e=>f(e),formTemplate:i,field:n})]})]}),(0,X.jsxs)(Io.Es,{children:[(0,X.jsx)(Io.HM,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"outline",children:"Cancel"})}),(0,X.jsx)(w.$,{onClick:()=>{const e={label:d,type:m};if("multiselect"===m){let t=p;"string"===typeof t&&t.includes(",")&&(t=t.split(",").map((e=>e.trim())).filter(Boolean)),e.suggestions=t}a(e),c(!1)},children:"Save"})]})]})]})},F3=e=>{let{open:n,onOpenChange:r,onSave:a}=e;const[s,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(M3[0]);return(0,X.jsx)(Io.lG,{open:n,onOpenChange:r,children:(0,X.jsxs)(Io.Cf,{children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Add New Field"}),(0,X.jsx)(Io.rr,{children:"Provide details for the new custom field."})]}),(0,X.jsxs)("div",{className:"space-y-4 py-2",children:[(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{htmlFor:"new-field-label",children:"Label"}),(0,X.jsx)(Vn.p,{id:"new-field-label",value:s,onChange:e=>i(e.target.value),placeholder:"e.g., Clinical Findings"})]}),(0,X.jsxs)("div",{className:"space-y-2",children:[(0,X.jsx)(Ks.J,{children:"Type"}),(0,X.jsxs)(A.l6,{value:o,onValueChange:l,children:[(0,X.jsx)(A.bq,{className:"w-full",children:(0,X.jsx)(A.yv,{placeholder:"Select type"})}),(0,X.jsx)(A.gC,{children:M3.map((e=>(0,X.jsx)(A.eb,{value:e,children:e},e)))})]})]})]}),(0,X.jsxs)(Io.Es,{children:[(0,X.jsx)(Io.HM,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"outline",children:"Cancel"})}),(0,X.jsx)(w.$,{onClick:()=>{s&&o&&(a({label:s,type:o,id:`custom-${s.toLowerCase().replace(/\s+/g,"-")}-${Date.now()}`,isCustom:!0}),i(""),l(M3[0]),r(!1))},children:"Add Field"})]})]})})},B3=()=>{const e=(0,j.wA)(),{toast:n}=(0,H.dj)(),{templates:r,selectedTemplate:a,formConfig:s,selectedDoctors:i,status:o}=(0,j.d4)((e=>e.doctorPrescription)),l=(0,j.d4)((e=>e.staff.doctors)),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),f=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t.useMemo)((()=>[...n].filter((e=>null!=e))),[...n])}(D2(_4),D2(y4,{coordinateGetter:O3}));(0,t.useEffect)((()=>{e(An())}),[e]);const v=t=>{const{active:n,over:r}=t;if(!r||n.id===r.id)return;const[a,i]=n.id.split("-"),[o,l]=r.id.split("-");if(a!==o)return;const c=parseInt(a),d=s.sections[c],u=d.fields.findIndex((e=>e.id===i)),m=d.fields.findIndex((e=>e.id===l));if(u!==m){const t=JSON.parse(JSON.stringify(s)),n=f3(t.sections[c].fields,u,m);t.sections[c].fields=n,e(Mn(t))}},g=e=>r.some((t=>{var n;return t._id!==(null===a||void 0===a?void 0:a._id)&&(null===(n=t.associatedDoctors)||void 0===n?void 0:n.some((t=>t._id===e)))})),x=e=>{const t=r.find((t=>{var n;return null===(n=t.associatedDoctors)||void 0===n?void 0:n.some((t=>t._id===e))}));return(null===t||void 0===t?void 0:t.name)||""};return a?(0,X.jsxs)("div",{className:"container mx-auto p-6",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("h1",{className:"text-2xl font-bold",children:a.name}),(0,X.jsx)(w.$,{variant:"ghost",className:"mt-2",onClick:()=>e(Fn()),children:"\u2190 Back to Templates"})]}),(0,X.jsxs)("div",{className:"flex gap-3",children:[(0,X.jsxs)(w.$,{variant:"outline",onClick:()=>d(!0),className:"flex items-center gap-2",children:[(0,X.jsx)(Rs.nXn,{className:"h-4 w-4"}),"Manage Doctors"]}),(0,X.jsx)(w.$,{onClick:async()=>{const t=await e(Pn({name:a.name,value:s,associatedDoctors:i,_id:a._id}));Pn.fulfilled.match(t)?n({title:"Template Saved",description:"Prescription template saved successfully"}):n({variant:"destructive",title:"Error",description:t.payload||"Failed to save prescription template"})},disabled:"loading"===o,children:"loading"===o?"Saving...":"Save Changes"})]})]}),(0,X.jsx)(F3,{open:u,onOpenChange:m,onSave:t=>{if(null!==h){const n=JSON.parse(JSON.stringify(s));n.sections[h].fields||(n.sections[h].fields=[]),n.sections[h].fields.push(t),e(Mn(n))}}}),(0,X.jsx)(Io.lG,{open:c,onOpenChange:d,children:(0,X.jsxs)(Io.Cf,{className:"sm:max-w-[425px]",children:[(0,X.jsxs)(Io.c7,{children:[(0,X.jsx)(Io.L3,{children:"Associate Doctors"}),(0,X.jsx)(Io.rr,{children:"Select doctors who can use this prescription template. Doctors already assigned to other templates cannot be selected."})]}),(0,X.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:l.map((t=>{const r=g(t._id),a=r?x(t._id):null;return(0,X.jsxs)("div",{className:"flex items-center space-x-2 py-2",children:[(0,X.jsx)(zl,{id:t._id,checked:i.some((e=>e._id===t._id)),onCheckedChange:()=>(t=>{if(i.some((e=>e._id===t)))e(In(i.filter((e=>e._id!==t))));else{if(g(t)){const e=x(t);return void n({variant:"destructive",title:"Doctor Already Assigned",description:`This doctor is already assigned to template: ${e}`})}const r=l.find((e=>e._id===t));r&&e(In([...i,{_id:r._id,name:r.name}]))}})(t._id),disabled:r}),(0,X.jsxs)("div",{className:"flex flex-col",children:[(0,X.jsx)(Ks.J,{htmlFor:t._id,className:r?"text-gray-400":"",children:t.name}),r&&(0,X.jsxs)("span",{className:"text-xs text-gray-400",children:["Assigned to: ",a]})]})]},t._id)}))}),(0,X.jsx)(Io.Es,{children:(0,X.jsx)(Io.HM,{asChild:!0,children:(0,X.jsx)(w.$,{children:"Done"})})})]})}),null===s||void 0===s?void 0:s.sections.map(((t,n)=>(0,X.jsx)(k.Zp,{className:"mb-6",children:(0,X.jsxs)("div",{className:"p-6",children:[(0,X.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,X.jsx)("h2",{className:"text-xl font-semibold",children:t.title}),(0,X.jsx)(w.$,{variant:"outline",onClick:()=>(e=>{p(e),m(!0)})(n),children:"Add Field"})]}),(0,X.jsx)(c3,{sensors:f,collisionDetection:I2,onDragEnd:v,children:(0,X.jsx)(N3,{items:t.fields.map((e=>`${n}-${e.id}`)),strategy:b3,children:(0,X.jsx)("div",{className:"space-y-4",children:t.fields.map(((t,r)=>(0,X.jsx)(I3,{field:t,sectionIndex:n,fieldIndex:r,selectedTemplate:a,onToggle:()=>{const t=JSON.parse(JSON.stringify(s)),a=t.sections[n].fields[r];a.disabled=!a.disabled,e(Mn(t))},onUpdate:t=>{const a=JSON.parse(JSON.stringify(s));a.sections[n].fields[r]={...a.sections[n].fields[r],...t},e(Mn(a))},onDelete:t.isCustom?()=>((t,n)=>{const r=JSON.parse(JSON.stringify(s));r.sections[t].fields.splice(n,1),e(Mn(r))})(n,r):void 0},t.id)))})})})]})},t.id)))]}):(0,X.jsxs)("div",{className:"container mx-auto p-6",children:[(0,X.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Prescription Templates"}),(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.map((t=>{var n;return(0,X.jsxs)(k.Zp,{className:"p-6 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>(t=>{e(Rn(t))})(t),children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-2",children:t.name}),(0,X.jsxs)("p",{className:"text-gray-600 text-sm",children:["Associated Doctors: ",(null===(n=t.associatedDoctors)||void 0===n?void 0:n.length)||0]}),(0,X.jsx)("p",{className:"text-gray-600 text-sm mt-2",children:"Click to view and edit template"})]},t._id)})),(0,X.jsx)(k.Zp,{className:"p-6 cursor-pointer hover:shadow-lg transition-shadow border-dashed flex items-center justify-center",onClick:()=>e(Ln()),children:(0,X.jsxs)("div",{className:"text-center",children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Create New Template"}),(0,X.jsx)("p",{className:"text-gray-600 text-sm",children:"Click to create a new prescription template"})]})})]})]})};function W3(){const e=(0,j.wA)(),n=(0,a.Zp)(),{allDoctorData:r,status:s,error:i}=(0,j.d4)((e=>e.doctorData));(0,t.useEffect)((()=>{e(wn())}),[e]);return"loading"===s?(0,X.jsx)("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):i?(0,X.jsxs)("div",{className:"flex items-center justify-center h-screen text-red-500",children:["Error: ",i]}):(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,X.jsx)(w.$,{onClick:()=>{n("/settings")},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Doctor Wise Data"})]}),(0,X.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:r&&r.length>0?r.map((e=>{var t,r,a;return(0,X.jsxs)(k.Zp,{onClick:()=>{return t=e.doctor._id,void n(`/settings/doctor-wise-data/${t}`);var t},className:"cursor-pointer hover:shadow-lg transition-shadow",children:[(0,X.jsxs)(k.aR,{children:[(0,X.jsx)(k.ZB,{children:e.doctor.name}),(0,X.jsx)(k.BT,{children:"Click to view and edit details"})]}),(0,X.jsxs)(k.Wu,{className:"space-y-2",children:[(0,X.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,X.jsx)("span",{className:"font-semibold text-primary",children:(null===(t=e.medicines)||void 0===t?void 0:t.length)||0})," ","Medicines"]}),(0,X.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,X.jsx)("span",{className:"font-semibold text-primary",children:(null===(r=e.diagnosis)||void 0===r?void 0:r.length)||0})," ","Diagnoses"]}),(0,X.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,X.jsx)("span",{className:"font-semibold text-primary",children:(null===(a=e.comorbidities)||void 0===a?void 0:a.length)||0})," ","Comorbidities"]})]})]},e.doctor._id)})):(0,X.jsx)("div",{className:"col-span-full text-center py-12",children:(0,X.jsx)("p",{className:"text-muted-foreground",children:"No doctor-specific data has been configured yet."})})})]})}function $3(){var e;const n=(0,j.wA)(),r=(0,a.Zp)(),{doctorId:s}=(0,a.g)(),{currentDoctorData:i,status:o,error:l}=(0,j.d4)((e=>e.doctorData)),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)({medicines:[],diagnosis:[],comorbidities:[]}),[h,p]=(0,t.useState)({medicines:"",diagnosis:"",comorbidities:""});(0,t.useEffect)((()=>(s&&n(Nn(s)),()=>{n(En())})),[n,s]),(0,t.useEffect)((()=>{i&&m({medicines:i.medicines||[],diagnosis:i.diagnosis||[],comorbidities:i.comorbidities||[]})}),[i]);const f=()=>{d(!c)},v=(e,t)=>(0,X.jsxs)("div",{children:[(0,X.jsx)(Ks.J,{className:"text-sm font-medium",children:t}),(0,X.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:u[e].map(((t,n)=>(0,X.jsxs)(Yo.E,{variant:"secondary",className:"flex items-center gap-2",children:[t,(0,X.jsx)("button",{onClick:()=>((e,t)=>{m((n=>({...n,[e]:n[e].filter(((e,n)=>n!==t))})))})(e,n),className:"rounded-full outline-none focus:ring-1 focus:ring-destructive",children:(0,X.jsx)(T.A,{className:"h-3 w-3"})})]},n)))}),(0,X.jsx)("div",{className:"flex gap-2 mt-2",children:(0,X.jsx)(Vn.p,{value:h[e],onChange:t=>p({...h,[e]:t.target.value}),onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),(e=>{const t=h[e].trim();if(t){const n=t.split(",").map((e=>e.trim())).filter((t=>t&&!u[e].includes(t)));n.length>0&&m((t=>({...t,[e]:[...t[e],...n]}))),p((t=>({...t,[e]:""})))}})(e))},placeholder:`Add ${t.toLowerCase()}(s), comma-separated...`})})]}),g=(e,t)=>(0,X.jsxs)("div",{children:[(0,X.jsx)("h4",{className:"text-sm font-semibold mb-2",children:t}),(0,X.jsx)("div",{className:"flex flex-wrap gap-2",children:i[e]&&i[e].length>0?i[e].map(((e,t)=>(0,X.jsx)(Yo.E,{children:e},t))):(0,X.jsxs)("p",{className:"text-sm text-muted-foreground",children:["No ",e," listed."]})})]});return"loading"===o?(0,X.jsx)("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):l?(0,X.jsxs)("div",{className:"flex items-center justify-center h-screen text-red-500",children:["Error: ",l]}):(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2",children:[(0,X.jsx)(w.$,{onClick:()=>{r("/settings/doctor-wise-data")},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(_,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Doctor Details"})]}),!c&&(0,X.jsx)(w.$,{onClick:f,children:"Edit"})]}),(0,X.jsxs)(k.Zp,{children:[(0,X.jsx)(k.aR,{children:(0,X.jsx)(k.ZB,{children:(null===i||void 0===i||null===(e=i.doctor)||void 0===e?void 0:e.name)||"Loading..."})}),(0,X.jsx)(k.Wu,{children:c?(0,X.jsxs)("div",{className:"space-y-4",children:[v("medicines","Medicines"),v("diagnosis","Diagnosis"),v("comorbidities","Comorbidities"),(0,X.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,X.jsx)(w.$,{variant:"outline",onClick:f,children:"Cancel"}),(0,X.jsx)(w.$,{onClick:()=>{const e={doctor:s,...u};n(jn(e)).then((()=>{d(!1),p({medicines:"",diagnosis:"",comorbidities:""})}))},children:"Save"})]})]}):(0,X.jsxs)("div",{className:"space-y-4",children:[g("medicines","Medicines"),g("diagnosis","Diagnosis"),g("comorbidities","Comorbidities")]})})]})]})}function U3(){const e=(0,a.Zp)(),[n,r]=(0,t.useState)(!1),s=()=>{r(!1)},i=(t,n)=>{t.preventDefault(),s(),"scrollToFeatures"===n&&setTimeout((()=>{e("/",{state:{scrollToFeatures:!0}})}),300)};return(0,X.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,X.jsxs)("header",{className:"px-2 lg:px-6 h-16 flex items-center justify-between bg-white shadow-sm",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsxs)(Qi,{open:n,onOpenChange:r,children:[(0,X.jsx)(eo,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"ghost",size:"icon",className:"md:hidden mr-0",children:[(0,X.jsx)(Zs,{className:"h-6 w-6"}),(0,X.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,X.jsx)(ao,{side:"left",children:(0,X.jsxs)("nav",{className:"flex flex-col gap-4 mt-4",children:[(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",onClick:s,children:"Home"}),(0,X.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:e=>i(e,"scrollToFeatures"),children:"Features"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",onClick:s,children:"About"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",onClick:s,children:"Contact"})]})})]}),(0,X.jsxs)(f,{className:"flex items-center justify-center",to:"/",children:[(0,X.jsx)(Xi,{className:"h-6 w-6 sm:h-7 sm:w-7 text-blue-600"}),(0,X.jsx)("span",{className:"ml-2 text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:"The Hospital"})]})]}),(0,X.jsxs)("nav",{className:"hidden md:flex items-center space-x-4",children:[(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",children:"Home"}),(0,X.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:e=>i(e,"scrollToFeatures"),children:"Features"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",children:"About"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",children:"Contact"})]})]}),(0,X.jsx)("main",{className:"flex-1 container mx-auto px-4 py-8",children:(0,X.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,X.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Privacy Policy"}),(0,X.jsxs)("div",{className:"space-y-6",children:[(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"1. Information We Collect"}),(0,X.jsx)("p",{className:"text-gray-600",children:"We collect information that you provide directly to us, including but not limited to:"}),(0,X.jsxs)("ul",{className:"list-disc list-inside mt-2 text-gray-600",children:[(0,X.jsx)("li",{children:"Personal identification information (Name, email address, phone number, etc.)"}),(0,X.jsx)("li",{children:"Medical history and health information"}),(0,X.jsx)("li",{children:"Insurance and payment information"}),(0,X.jsx)("li",{children:"Communication preferences"})]})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"2. How We Use Your Information"}),(0,X.jsx)("p",{className:"text-gray-600",children:"We use the collected information for various purposes:"}),(0,X.jsxs)("ul",{className:"list-disc list-inside mt-2 text-gray-600",children:[(0,X.jsx)("li",{children:"To provide and maintain our services"}),(0,X.jsx)("li",{children:"To notify you about changes to our services"}),(0,X.jsx)("li",{children:"To provide customer support"}),(0,X.jsx)("li",{children:"To gather analysis or valuable information to improve our services"}),(0,X.jsx)("li",{children:"To monitor the usage of our services"})]})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"3. Data Security"}),(0,X.jsx)("p",{className:"text-gray-600",children:"The security of your data is important to us. We implement appropriate security measures to protect your personal information from unauthorized access, alteration, disclosure, or destruction."})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"4. Data Sharing and Disclosure"}),(0,X.jsx)("p",{className:"text-gray-600",children:"We may share your personal information with:"}),(0,X.jsxs)("ul",{className:"list-disc list-inside mt-2 text-gray-600",children:[(0,X.jsx)("li",{children:"Healthcare providers involved in your care"}),(0,X.jsx)("li",{children:"Insurance companies for billing purposes"}),(0,X.jsx)("li",{children:"Service providers who assist in our operations"}),(0,X.jsx)("li",{children:"Legal authorities when required by law"})]})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"5. Your Rights"}),(0,X.jsx)("p",{className:"text-gray-600",children:"You have the right to:"}),(0,X.jsxs)("ul",{className:"list-disc list-inside mt-2 text-gray-600",children:[(0,X.jsx)("li",{children:"Access your personal information"}),(0,X.jsx)("li",{children:"Correct inaccurate or incomplete information"}),(0,X.jsx)("li",{children:"Request deletion of your information"}),(0,X.jsx)("li",{children:"Object to processing of your information"}),(0,X.jsx)("li",{children:"Data portability"})]})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"6. Contact Us"}),(0,X.jsx)("p",{className:"text-gray-600",children:"If you have any questions about this Privacy Policy, please contact us at:"}),(0,X.jsxs)("p",{className:"mt-2 text-gray-600",children:["Email: thousandways.help@gmail.com",(0,X.jsx)("br",{}),"Phone: +91 9942000425",(0,X.jsx)("br",{}),"Address: Thousand Ways Private Limited, Dariyapur, Bodh Gaya, Bihar 824237, India"]})]})]})]})}),(0,X.jsxs)("footer",{className:"flex flex-col sm:flex-row justify-between items-center py-6 px-4 md:px-6 border-t bg-white",children:[(0,X.jsx)("p",{className:"text-xs text-gray-500 mb-2 sm:mb-0",children:"\xa9 2024 TheHospital. All rights reserved."}),(0,X.jsxs)("nav",{className:"flex gap-4",children:[(0,X.jsx)(f,{className:"text-xs hover:underline underline-offset-4",to:"/terms",children:"Terms of Service"}),(0,X.jsx)(f,{className:"text-xs hover:underline underline-offset-4",to:"/privacy",children:"Privacy"})]})]})]})}function z3(){const e=(0,a.Zp)(),[n,r]=(0,t.useState)(!1),s=()=>{r(!1)},i=(t,n)=>{t.preventDefault(),s(),"scrollToFeatures"===n&&setTimeout((()=>{e("/",{state:{scrollToFeatures:!0}})}),300)};return(0,X.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,X.jsxs)("header",{className:"px-2 lg:px-6 h-16 flex items-center justify-between bg-white shadow-sm",children:[(0,X.jsxs)("div",{className:"flex items-center",children:[(0,X.jsxs)(Qi,{open:n,onOpenChange:r,children:[(0,X.jsx)(eo,{asChild:!0,children:(0,X.jsxs)(w.$,{variant:"ghost",size:"icon",className:"md:hidden mr-0",children:[(0,X.jsx)(Zs,{className:"h-6 w-6"}),(0,X.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,X.jsx)(ao,{side:"left",children:(0,X.jsxs)("nav",{className:"flex flex-col gap-4 mt-4",children:[(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",onClick:s,children:"Home"}),(0,X.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:e=>i(e,"scrollToFeatures"),children:"Features"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",onClick:s,children:"About"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",onClick:s,children:"Contact"})]})})]}),(0,X.jsxs)(f,{className:"flex items-center justify-center",to:"/",children:[(0,X.jsx)(Xi,{className:"h-6 w-6 sm:h-7 sm:w-7 text-blue-600"}),(0,X.jsx)("span",{className:"ml-2 text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:"The Hospital"})]})]}),(0,X.jsxs)("nav",{className:"hidden md:flex items-center space-x-4",children:[(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",children:"Home"}),(0,X.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:e=>i(e,"scrollToFeatures"),children:"Features"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",children:"About"}),(0,X.jsx)(f,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",children:"Contact"})]})]}),(0,X.jsx)("main",{className:"flex-1 container mx-auto px-4 py-8",children:(0,X.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,X.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Terms of Service"}),(0,X.jsxs)("div",{className:"space-y-6",children:[(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"1. Acceptance of Terms"}),(0,X.jsx)("p",{className:"text-gray-600",children:"By accessing and using The Hospital's services, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our services."})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"2. Service Description"}),(0,X.jsx)("p",{className:"text-gray-600",children:"The Hospital provides hospital management and healthcare services, including but not limited to:"}),(0,X.jsxs)("ul",{className:"list-disc list-inside mt-2 text-gray-600",children:[(0,X.jsx)("li",{children:"Patient registration and management"}),(0,X.jsx)("li",{children:"Medical record keeping"}),(0,X.jsx)("li",{children:"Appointment scheduling"}),(0,X.jsx)("li",{children:"Billing and payment processing"}),(0,X.jsx)("li",{children:"Healthcare provider coordination"})]})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"3. User Responsibilities"}),(0,X.jsx)("p",{className:"text-gray-600",children:"Users of our services agree to:"}),(0,X.jsxs)("ul",{className:"list-disc list-inside mt-2 text-gray-600",children:[(0,X.jsx)("li",{children:"Provide accurate and complete information"}),(0,X.jsx)("li",{children:"Maintain the confidentiality of their account credentials"}),(0,X.jsx)("li",{children:"Comply with all applicable laws and regulations"}),(0,X.jsx)("li",{children:"Use the services only for their intended purpose"}),(0,X.jsx)("li",{children:"Not interfere with or disrupt the services"})]})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"4. Payment Terms"}),(0,X.jsx)("p",{className:"text-gray-600",children:"Users agree to pay all fees and charges associated with their use of our services according to the fees, charges, and billing terms in effect at the time the service is used."})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"5. Limitation of Liability"}),(0,X.jsx)("p",{className:"text-gray-600",children:"The Hospital shall not be liable for any indirect, incidental, special, consequential, or punitive damages resulting from your use of or inability to use the service."})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"6. Changes to Terms"}),(0,X.jsx)("p",{className:"text-gray-600",children:"We reserve the right to modify these terms at any time. We will notify users of any material changes by posting the new Terms of Service on this page."})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"7. Contact Information"}),(0,X.jsx)("p",{className:"text-gray-600",children:"If you have any questions about these Terms of Service, please contact us at:"}),(0,X.jsxs)("p",{className:"mt-2 text-gray-600",children:["Email: thousandways.help@gmail.com",(0,X.jsx)("br",{}),"Phone: +91 9942000425",(0,X.jsx)("br",{}),"Address: Thousand Ways Private Limited, Dariyapur, Bodh Gaya, Bihar 824237, India"]})]})]})]})}),(0,X.jsxs)("footer",{className:"flex flex-col sm:flex-row justify-between items-center py-6 px-4 md:px-6 border-t bg-white",children:[(0,X.jsx)("p",{className:"text-xs text-gray-500 mb-2 sm:mb-0",children:"\xa9 2024 TheHospital. All rights reserved."}),(0,X.jsxs)("nav",{className:"flex gap-4",children:[(0,X.jsx)(f,{className:"text-xs hover:underline underline-offset-4",to:"/terms",children:"Terms of Service"}),(0,X.jsx)(f,{className:"text-xs hover:underline underline-offset-4",to:"/privacy",children:"Privacy"})]})]})]})}const H3=()=>{const[e,n]=(0,t.useState)({from:null,to:null}),[r,s]=(0,t.useState)({from:null,to:null}),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(""),[m,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(!1),[v,g]=(0,t.useState)(!1),[x,y]=(0,t.useState)(!1),[b,N]=(0,t.useState)(!1),{toast:_}=(0,H.dj)(),S=(0,j.wA)(),{isLoading:E}=(0,j.d4)((e=>e.loader)),C=(0,a.Zp)();return(0,X.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,X.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,X.jsx)(w.$,{onClick:()=>{C(-1)},variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:(0,X.jsx)(Uo.A,{className:"h-4 w-4"})}),(0,X.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Manage Records"})]}),(0,X.jsxs)("div",{className:"space-y-6",children:[(0,X.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold text-destructive",children:"Delete All OPD Records in Date Range"}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"This action is irreversible. All OPD visits, including their associated bills and payments, within the selected date range will be permanently deleted."}),(0,X.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[(0,X.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,X.jsx)(Ks.J,{htmlFor:"opd-date-range",children:"Date Range"}),(0,X.jsx)(M.Ur,{from:e.from,to:e.to,onSelect:e=>n(e||{from:null,to:null}),onSearch:()=>{},onCancel:()=>n({from:null,to:null})})]}),(0,X.jsxs)(Ce,{open:p,onOpenChange:f,children:[(0,X.jsx)(De,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"destructive",disabled:!e.from||!e.to,children:"Delete All Records in Range"})}),(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Are you absolutely sure?"}),(0,X.jsxs)(Me,{children:["This action cannot be undone. This will permanently delete all OPD records from"," ",(0,X.jsx)("strong",{children:e.from?(0,Go.GP)(e.from,"PPP"):""})," to"," ",(0,X.jsx)("strong",{children:e.to?(0,Go.GP)(e.to,"PPP"):""}),"."]})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{disabled:E,children:"Cancel"}),(0,X.jsx)(Ie,{onClick:t=>{t.preventDefault(),(async()=>{if(e.from&&e.to){S((0,it.r)(!0));try{const t=await fetch(`${M.B8}/api/manage-records/delete-opd-records-by-date`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startDate:(0,Go.GP)(e.from,"yyyy-MM-dd"),endDate:(0,Go.GP)(e.to,"yyyy-MM-dd")}),credentials:"include"}),r=await t.json();if(!t.ok)throw new Error(r.error||"An error occurred while deleting records.");_({title:"Success",description:r.message,variant:"success"}),n({from:null,to:null})}catch(t){_({title:"Error",description:t.message,variant:"destructive"})}finally{S((0,it.r)(!1)),f(!1)}}else _({title:"Error",description:"Please select a date range.",variant:"destructive"})})()},disabled:E,className:"bg-destructive hover:bg-destructive/90",children:E?"Deleting...":"Yes, delete records"})]})]})]})]})]}),(0,X.jsx)(Mo,{}),(0,X.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold text-destructive",children:"Selectively Delete OPD Records"}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"For each day in the date range, keep a random number of records between the min and max values, and delete the rest."}),(0,X.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 items-end",children:[(0,X.jsxs)("div",{className:"w-full",children:[(0,X.jsx)(Ks.J,{htmlFor:"selective-date-range",children:"Date Range"}),(0,X.jsx)(M.Ur,{from:r.from,to:r.to,onSelect:e=>s(e||{from:null,to:null}),onSearch:()=>{},onCancel:()=>s({from:null,to:null})})]}),(0,X.jsxs)("div",{className:"w-full ",children:[(0,X.jsx)(Ks.J,{htmlFor:"min-records",children:"Min Records to Keep"}),(0,X.jsx)(Vn.p,{id:"min-records",type:"number",placeholder:"e.g., 20",value:i,onChange:e=>o(e.target.value)})]}),(0,X.jsxs)("div",{className:"w-full",children:[(0,X.jsx)(Ks.J,{htmlFor:"max-records",children:"Max Records to Keep"}),(0,X.jsx)(Vn.p,{id:"max-records",type:"number",placeholder:"e.g., 30",value:l,onChange:e=>c(e.target.value)})]}),(0,X.jsxs)(Ce,{open:v,onOpenChange:g,children:[(0,X.jsx)(De,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"destructive",disabled:!r.from||!r.to||!i||!l,children:"Selectively Delete Records"})}),(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Are you absolutely sure?"}),(0,X.jsxs)(Me,{children:["This will selectively delete OPD records from"," ",(0,X.jsx)("strong",{children:r.from?(0,Go.GP)(r.from,"PPP"):""})," to"," ",(0,X.jsx)("strong",{children:r.to?(0,Go.GP)(r.to,"PPP"):""}),", keeping between ",(0,X.jsx)("strong",{children:i})," and ",(0,X.jsx)("strong",{children:l})," records per day. This action cannot be undone."]})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{disabled:E,children:"Cancel"}),(0,X.jsx)(Ie,{onClick:e=>{e.preventDefault(),(async()=>{if(r.from&&r.to&&i&&l)if(parseInt(i)>parseInt(l))_({title:"Error",description:"Min records cannot be greater than max records.",variant:"destructive"});else{S((0,it.r)(!0));try{const e=await fetch(`${M.B8}/api/manage-records/selective-delete-opd`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startDate:(0,Go.GP)(r.from,"yyyy-MM-dd"),endDate:(0,Go.GP)(r.to,"yyyy-MM-dd"),minRecords:i,maxRecords:l}),credentials:"include"}),t=await e.json();if(!e.ok)throw new Error(t.error||"An error occurred during selective deletion.");_({title:"Success",description:t.message,variant:"success"}),s({from:null,to:null}),o(""),c("")}catch(e){_({title:"Error",description:e.message,variant:"destructive"})}finally{S((0,it.r)(!1)),g(!1)}}else _({title:"Error",description:"Please fill all fields for selective delete.",variant:"destructive"})})()},disabled:E,className:"bg-destructive hover:bg-destructive/90",children:E?"Deleting...":"Yes, proceed"})]})]})]})]})]}),(0,X.jsx)(Mo,{}),(0,X.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold text-blue-600",children:"Re-sequence Patient Registration Numbers for a Specific Year"}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"This action will re-sequence all patient registration numbers for the selected year to fill any gaps from deleted records. This process is irreversible."}),(0,X.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[(0,X.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,X.jsx)(Ks.J,{htmlFor:"resequence-year",children:"Year"}),(0,X.jsx)(Vn.p,{id:"resequence-year",type:"number",placeholder:`e.g., ${(new Date).getFullYear()}`,value:d,onChange:e=>u(e.target.value)})]}),(0,X.jsxs)(Ce,{open:x,onOpenChange:y,children:[(0,X.jsx)(De,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"outline",className:"text-blue-600 border-blue-600 hover:bg-blue-50",disabled:!d,children:"Re-sequence Registration Numbers"})}),(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Are you absolutely sure?"}),(0,X.jsxs)(Me,{children:["This will permanently re-sequence all patient registration numbers for the year ",(0,X.jsx)("strong",{children:d}),". This action cannot be undone."]})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{disabled:E,children:"Cancel"}),(0,X.jsx)(Ie,{onClick:e=>{e.preventDefault(),(async()=>{if(d){S((0,it.r)(!0));try{const e=await fetch(`${M.B8}/api/manage-records/resequence-registration-numbers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({year:d}),credentials:"include"}),t=await e.json();if(!e.ok)throw new Error(t.error||"An error occurred while re-sequencing records.");_({title:"Success",description:t.message,variant:"success"})}catch(e){_({title:"Error",description:e.message,variant:"destructive"})}finally{S((0,it.r)(!1)),y(!1)}}else _({title:"Error",description:"Please enter a year to re-sequence.",variant:"destructive"})})()},disabled:E,className:"bg-blue-600 hover:bg-blue-700",children:E?"Processing...":"Yes, re-sequence now"})]})]})]})]})]}),(0,X.jsx)(Mo,{}),(0,X.jsxs)("div",{className:"p-4 border rounded-md",children:[(0,X.jsx)("h3",{className:"text-lg font-semibold text-purple-600",children:"Re-sequence Service Bill Invoice Numbers"}),(0,X.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"This action will re-sequence all service bill invoice numbers for the selected year to ensure they are consecutive. This process is irreversible."}),(0,X.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[(0,X.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,X.jsx)(Ks.J,{htmlFor:"resequence-invoice-year",children:"Year"}),(0,X.jsx)(Vn.p,{id:"resequence-invoice-year",type:"number",placeholder:`e.g., ${(new Date).getFullYear()}`,value:m,onChange:e=>h(e.target.value)})]}),(0,X.jsxs)(Ce,{open:b,onOpenChange:N,children:[(0,X.jsx)(De,{asChild:!0,children:(0,X.jsx)(w.$,{variant:"outline",className:"text-purple-600 border-purple-600 hover:bg-purple-50",disabled:!m,children:"Re-sequence Invoice Numbers"})}),(0,X.jsxs)(Ae,{children:[(0,X.jsxs)(Pe,{children:[(0,X.jsx)(Re,{children:"Are you absolutely sure?"}),(0,X.jsxs)(Me,{children:["This will permanently re-sequence all service bill invoice numbers for the year ",(0,X.jsx)("strong",{children:m}),". This action cannot be undone."]})]}),(0,X.jsxs)(Oe,{children:[(0,X.jsx)(Le,{disabled:E,children:"Cancel"}),(0,X.jsx)(Ie,{onClick:e=>{e.preventDefault(),(async()=>{if(m){S((0,it.r)(!0));try{const e=await fetch(`${M.B8}/api/manage-records/resequence-service-bill-invoice-numbers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({year:m}),credentials:"include"}),t=await e.json();if(!e.ok)throw new Error(t.error||"An error occurred while re-sequencing invoices.");_({title:"Success",description:t.message,variant:"success"})}catch(e){_({title:"Error",description:e.message,variant:"destructive"})}finally{S((0,it.r)(!1)),N(!1)}}else _({title:"Error",description:"Please enter a year to re-sequence.",variant:"destructive"})})()},disabled:E,className:"bg-purple-600 hover:bg-purple-700",children:E?"Processing...":"Yes, re-sequence now"})]})]})]})]})]})]})]})},V3=e=>{let{children:n,permission:r}=e;const s=(0,a.Zp)(),{userData:i}=(0,j.d4)((e=>e.user)),o=Ki(r);return(0,t.useEffect)((()=>{i&&!o&&s("/unauthorized",{replace:!0})}),[i,o,s]),i&&o?n:null},q3=(0,N.A)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),G3=()=>{const e=(0,a.Zp)();return(0,X.jsxs)("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-200px)] text-center p-4",children:[(0,X.jsx)(q3,{className:"w-16 h-16 text-red-500 mb-4"}),(0,X.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Access Denied"}),(0,X.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:"You do not have the required permissions to view this page."}),(0,X.jsxs)("div",{className:"flex space-x-4",children:[(0,X.jsx)(w.$,{onClick:()=>e(-1),variant:"outline",children:"Go Back"}),(0,X.jsx)(f,{to:"/",children:(0,X.jsx)(w.$,{children:"Go to Homepage"})})]})]})},K3=()=>{const[e,n]=(0,t.useState)(!1),r=(0,j.wA)(),s=(0,j.d4)((e=>e.loader.isLoading)),i=(0,j.d4)((e=>e.user.isAuthenticated)),[o,l]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{r((0,it.r)(!0));const e=(new Date).toLocaleDateString("en-In").split("/").reverse().join("-");r(Ye()).then((()=>{if(i)return Promise.all([r((0,Be.PP)({startDate:e})),r(pn()),r(L()),r(We()),r(Qe()),r(Ct()),r(lt()),r((0,R.QK)()),r(un())])})).finally((()=>{r((0,it.r)(!1)),l(!1)}))}),[r,i]),o?(0,X.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,X.jsxs)("div",{className:"relative",children:[(0,X.jsx)("div",{className:"w-24 h-24 rounded-full border-8 border-blue-200"}),(0,X.jsx)("div",{className:"absolute top-0 left-0 w-24 h-24 rounded-full border-t-8 border-blue-500 animate-spin"}),(0,X.jsx)("div",{className:"absolute top-0 left-0 w-24 h-24 rounded-full border-8 border-transparent animate-pulse"})]})}):(0,X.jsxs)("div",{className:"flex flex-col relative",children:[s&&(0,X.jsx)("div",{className:"youtube-loader"}),(0,X.jsxs)(b.F,{className:"h-screen",children:[i&&(0,X.jsx)(Bo,{isCollapsed:e,setIsCollapsed:n,navItems:Yi}),(0,X.jsxs)("div",{className:"flex",children:[i&&(0,X.jsx)(Zi,{isCollapsed:e}),(0,X.jsx)("main",{className:(i?e?"md:ml-16":"md:ml-56":"")+" px-0 sm:px-4 w-full h-full bg-gray-50 transition-all duration-300",children:(0,X.jsxs)(a.BV,{children:[(0,X.jsx)(a.qh,{path:"/",element:i?(0,X.jsx)(BQ,{}):(0,X.jsx)(io,{})}),(0,X.jsx)(a.qh,{path:"/about",element:(0,X.jsx)(mQ,{})}),(0,X.jsx)(a.qh,{path:"/contact",element:(0,X.jsx)(vQ,{})}),(0,X.jsx)(a.qh,{path:"/privacy",element:(0,X.jsx)(U3,{})}),(0,X.jsx)(a.qh,{path:"/terms",element:(0,X.jsx)(z3,{})}),i&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(a.qh,{path:"/unauthorized",element:(0,X.jsx)(G3,{})}),(0,X.jsx)(a.qh,{path:"/patient-overview/:patientId",element:(0,X.jsx)(WQ,{})}),(0,X.jsx)(a.qh,{path:"/billings",element:(0,X.jsx)(qg,{})}),(0,X.jsx)(a.qh,{path:"/patients",element:(0,X.jsx)(Lx,{})}),(0,X.jsx)(a.qh,{path:"/patients/:patientId",element:(0,X.jsx)(Gx,{})}),(0,X.jsx)(a.qh,{path:"/appointments",element:(0,X.jsx)(yy,{})}),(0,X.jsx)(a.qh,{path:"/doctors",element:(0,X.jsx)(ox,{})}),(0,X.jsx)(a.qh,{path:"/rooms",element:(0,X.jsx)(Xx,{})}),(0,X.jsx)(a.qh,{path:"/staff",element:(0,X.jsx)(V3,{permission:"edit_staff",children:(0,X.jsx)(Zx,{})})}),(0,X.jsx)(a.qh,{path:"/settings",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(Jx,{})})}),(0,X.jsx)(a.qh,{path:"/settings/manage-records",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(H3,{})})}),(0,X.jsx)(a.qh,{path:"/staff/:staffId",element:(0,X.jsx)(uy,{})}),(0,X.jsx)(a.qh,{path:"/analytics",element:(0,X.jsx)(by,{})}),(0,X.jsx)(a.qh,{path:"/pharmacy",element:(0,X.jsx)(a.C5,{to:"/pharmacy/sales",replace:!0})}),(0,X.jsx)(a.qh,{path:"/pharmacy/:tab",element:(0,X.jsx)(GB,{})}),(0,X.jsx)(a.qh,{path:"/pharmacy/all-bills",element:(0,X.jsx)(aW,{})}),(0,X.jsx)(a.qh,{path:"/addstaff",element:(0,X.jsx)(iW,{})}),(0,X.jsx)(a.qh,{path:"/editstaff/:staffId",element:(0,X.jsx)(iW,{})}),(0,X.jsx)(a.qh,{path:"/lab",element:(0,X.jsx)(hW,{})}),(0,X.jsx)(a.qh,{path:"/lab/list",element:(0,X.jsx)(Sc,{})}),(0,X.jsx)(a.qh,{path:"/lab/registration",element:(0,X.jsx)(Gl,{})}),(0,X.jsx)(a.qh,{path:"/lab/all-tests",element:(0,X.jsx)(Ec,{})}),(0,X.jsx)(a.qh,{path:"/lab/blood-work/create",element:(0,X.jsx)(lW,{})}),(0,X.jsx)(a.qh,{path:"/create-room",element:(0,X.jsx)(Xs,{})}),(0,X.jsx)(a.qh,{path:"/patients/discharge/:patientId?",element:(0,X.jsx)(pW.A,{})}),(0,X.jsx)(a.qh,{path:"/patients/admitted",element:(0,X.jsx)($Q,{})}),(0,X.jsx)(a.qh,{path:"/patients/add-services/:patientId",element:(0,X.jsx)(UQ,{})}),(0,X.jsx)(a.qh,{path:"/services",element:(0,X.jsx)(aQ,{})}),(0,X.jsx)(a.qh,{path:"/billings/create-service-bill",element:(0,X.jsx)(oQ,{})}),(0,X.jsx)(a.qh,{path:"/statistics",element:(0,X.jsx)(V3,{permission:"view_financial",children:(0,X.jsx)(qc,{})})}),(0,X.jsx)(a.qh,{path:"/billings/edit/:billId",element:(0,X.jsx)(oQ,{})}),(0,X.jsx)(a.qh,{path:"/settings/hospital-info",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(yW,{})})}),(0,X.jsx)(a.qh,{path:"/expenses",element:(0,X.jsx)(wQ,{})}),(0,X.jsx)(a.qh,{path:"/payments",element:(0,X.jsx)(w1,{})}),(0,X.jsx)(a.qh,{path:"/settings/customization",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(EQ,{})})}),(0,X.jsx)(a.qh,{path:"/search",element:(0,X.jsx)(PQ,{})}),(0,X.jsx)(a.qh,{path:"/opd-procedure/:patientId",element:(0,X.jsx)(OQ,{})}),(0,X.jsx)(a.qh,{path:"/settings/lab-templates",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(N1,{})})}),(0,X.jsx)(a.qh,{path:"/settings/create-test-template",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(zQ,{})})}),(0,X.jsx)(a.qh,{path:"/settings/printing-templates",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(HQ,{})})}),(0,X.jsx)(a.qh,{path:"/settings/printing-templates/discharge-preview",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(GQ,{})})}),(0,X.jsx)(a.qh,{path:"/settings/printing-templates/header-preview",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(KQ,{})})}),(0,X.jsx)(a.qh,{path:"/settings/printing-templates/lab-billing-preview",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(F1,{})})}),(0,X.jsx)(a.qh,{path:"/settings/printing-templates/opd-preview",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(YQ,{})})}),(0,X.jsx)(a.qh,{path:"/settings/printing-templates/opd-rx-preview",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(XQ,{})})}),(0,X.jsx)(a.qh,{path:"/settings/printing-templates/opd-bill-token-preview",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(ZQ,{})})}),(0,X.jsx)(a.qh,{path:"/settings/printing-templates/lab-report-preview",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(L1,{})})}),(0,X.jsx)(a.qh,{path:"/settings/printing-templates/merge-template-preview",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(JQ,{})})}),(0,X.jsx)(a.qh,{path:"/settings/printing-templates/consent-preview",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(qs,{})})}),(0,X.jsx)(a.qh,{path:"/settings/prefix-settings",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(QQ,{})})}),(0,X.jsx)(a.qh,{path:"/settings/discharge-form-templates",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(Fe,{})})}),(0,X.jsx)(a.qh,{path:"/patients/:ipdAdmissionId/babies",element:(0,X.jsx)(g1,{})}),(0,X.jsx)(a.qh,{path:"patients/babies",element:(0,X.jsx)(j1,{})}),(0,X.jsx)(a.qh,{path:"/babies/:babyId",element:(0,X.jsx)(x1,{})}),(0,X.jsx)(a.qh,{path:"/settings/department",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(b1,{})})}),(0,X.jsx)(a.qh,{path:"/settings/edit-test-template",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(M1,{})})}),(0,X.jsx)(a.qh,{path:"/settings/hospital-settings",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(B1,{})})}),(0,X.jsx)(a.qh,{path:"/settings/consultation-fees",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)($1,{})})}),(0,X.jsx)(a.qh,{path:"/settings/subscription",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(U1,{})})}),(0,X.jsx)(a.qh,{path:"/settings/prescription-settings",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(B3,{})})}),(0,X.jsx)(a.qh,{path:"/settings/doctor-wise-data",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)(W3,{})})}),(0,X.jsx)(a.qh,{path:"/settings/doctor-wise-data/:doctorId",element:(0,X.jsx)(V3,{permission:"edit_hospital",children:(0,X.jsx)($3,{})})})]})]})})]})]})]})},Y3=()=>(0,X.jsx)(j.Kq,{store:Hn,children:(0,X.jsx)(m,{children:(0,X.jsx)(K3,{})})});var X3="ToastProvider",[Z3,J3,Q3]=(0,Qn.N)("Toast"),[e5,t5]=(0,V.A)("Toast",[Q3]),[n5,r5]=e5(X3),a5=e=>{const{__scopeToast:n,label:r="Notification",duration:a=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=e,[l,c]=t.useState(null),[d,u]=t.useState(0),m=t.useRef(!1),h=t.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${X3}\`. Expected non-empty \`string\`.`),(0,X.jsx)(Z3.Provider,{scope:n,children:(0,X.jsx)(n5,{scope:n,label:r,duration:a,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:t.useCallback((()=>u((e=>e+1))),[]),onToastRemove:t.useCallback((()=>u((e=>e-1))),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:o})})};a5.displayName=X3;var s5="ToastViewport",i5=["F8"],o5="toast.viewportPause",l5="toast.viewportResume",c5=t.forwardRef(((e,n)=>{const{__scopeToast:r,hotkey:a=i5,label:s="Notifications ({hotkey})",...i}=e,o=r5(s5,r),l=J3(r),c=t.useRef(null),d=t.useRef(null),u=t.useRef(null),m=t.useRef(null),h=(0,q.s)(n,m,o.onViewportChange),p=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),f=o.toastCount>0;t.useEffect((()=>{const e=e=>{0!==a.length&&a.every((t=>e[t]||e.code===t))&&m.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[a]),t.useEffect((()=>{const e=c.current,t=m.current;if(f&&e&&t){const n=()=>{if(!o.isClosePausedRef.current){const e=new CustomEvent(o5);t.dispatchEvent(e),o.isClosePausedRef.current=!0}},r=()=>{if(o.isClosePausedRef.current){const e=new CustomEvent(l5);t.dispatchEvent(e),o.isClosePausedRef.current=!1}},a=t=>{!e.contains(t.relatedTarget)&&r()},s=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",a),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",s),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",a),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}}),[f,o.isClosePausedRef]);const v=t.useCallback((e=>{let{tabbingDirection:t}=e;const n=l().map((e=>{const n=e.ref.current,r=[n,...D5(n)];return"forwards"===t?r:r.reverse()}));return("forwards"===t?n.reverse():n).flat()}),[l]);return t.useEffect((()=>{const e=m.current;if(e){const t=t=>{const n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){const n=document.activeElement,r=t.shiftKey;if(t.target===e&&r)return void d.current?.focus();const a=v({tabbingDirection:r?"backwards":"forwards"}),s=a.findIndex((e=>e===n));T5(a.slice(s+1))?t.preventDefault():r?d.current?.focus():u.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}}),[l,v]),(0,X.jsxs)(tr.lg,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:f?void 0:"none"},children:[f&&(0,X.jsx)(u5,{ref:d,onFocusFromOutsideViewport:()=>{T5(v({tabbingDirection:"forwards"}))}}),(0,X.jsx)(Z3.Slot,{scope:r,children:(0,X.jsx)(Jn.sG.ol,{tabIndex:-1,...i,ref:h})}),f&&(0,X.jsx)(u5,{ref:u,onFocusFromOutsideViewport:()=>{T5(v({tabbingDirection:"backwards"}))}})]})}));c5.displayName=s5;var d5="ToastFocusProxy",u5=t.forwardRef(((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,s=r5(d5,n);return(0,X.jsx)(fi.s,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:e=>{const t=e.relatedTarget;!s.viewport?.contains(t)&&r()}})}));u5.displayName=d5;var m5="Toast",h5=t.forwardRef(((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:s,...i}=e,[o=!0,l]=(0,Zn.i)({prop:r,defaultProp:a,onChange:s});return(0,X.jsx)(or.C,{present:n||o,children:(0,X.jsx)(v5,{open:o,...i,ref:t,onClose:()=>l(!1),onPause:(0,lr.c)(e.onPause),onResume:(0,lr.c)(e.onResume),onSwipeStart:(0,K.m)(e.onSwipeStart,(e=>{e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:(0,K.m)(e.onSwipeMove,(e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)})),onSwipeCancel:(0,K.m)(e.onSwipeCancel,(e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:(0,K.m)(e.onSwipeEnd,(e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),l(!1)}))})})}));h5.displayName=m5;var[p5,f5]=e5(m5,{onClose(){}}),v5=t.forwardRef(((e,n)=>{const{__scopeToast:r,type:a="foreground",duration:i,open:o,onClose:l,onEscapeKeyDown:c,onPause:d,onResume:u,onSwipeStart:m,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,...v}=e,g=r5(m5,r),[x,y]=t.useState(null),b=(0,q.s)(n,(e=>y(e))),j=t.useRef(null),w=t.useRef(null),N=i||g.duration,_=t.useRef(0),S=t.useRef(N),E=t.useRef(0),{onToastAdd:C,onToastRemove:D}=g,T=(0,lr.c)((()=>{const e=x?.contains(document.activeElement);e&&g.viewport?.focus(),l()})),k=t.useCallback((e=>{e&&e!==1/0&&(window.clearTimeout(E.current),_.current=(new Date).getTime(),E.current=window.setTimeout(T,e))}),[T]);t.useEffect((()=>{const e=g.viewport;if(e){const t=()=>{k(S.current),u?.()},n=()=>{const e=(new Date).getTime()-_.current;S.current=S.current-e,window.clearTimeout(E.current),d?.()};return e.addEventListener(o5,n),e.addEventListener(l5,t),()=>{e.removeEventListener(o5,n),e.removeEventListener(l5,t)}}}),[g.viewport,N,d,u,k]),t.useEffect((()=>{o&&!g.isClosePausedRef.current&&k(N)}),[o,N,g.isClosePausedRef,k]),t.useEffect((()=>(C(),()=>D())),[C,D]);const A=t.useMemo((()=>x?S5(x):null),[x]);return g.viewport?(0,X.jsxs)(X.Fragment,{children:[A&&(0,X.jsx)(g5,{__scopeToast:r,role:"status","aria-live":"foreground"===a?"assertive":"polite","aria-atomic":!0,children:A}),(0,X.jsx)(p5,{scope:r,onClose:T,children:s.createPortal((0,X.jsx)(Z3.ItemSlot,{scope:r,children:(0,X.jsx)(tr.bL,{asChild:!0,onEscapeKeyDown:(0,K.m)(c,(()=>{g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1})),children:(0,X.jsx)(Jn.sG.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:(0,K.m)(e.onKeyDown,(e=>{"Escape"===e.key&&(c?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))})),onPointerDown:(0,K.m)(e.onPointerDown,(e=>{0===e.button&&(j.current={x:e.clientX,y:e.clientY})})),onPointerMove:(0,K.m)(e.onPointerMove,(e=>{if(!j.current)return;const t=e.clientX-j.current.x,n=e.clientY-j.current.y,r=Boolean(w.current),a=["left","right"].includes(g.swipeDirection),s=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,i=a?s(0,t):0,o=a?0:s(0,n),l="touch"===e.pointerType?10:2,c={x:i,y:o},d={originalEvent:e,delta:c};r?(w.current=c,E5("toast.swipeMove",h,d,{discrete:!1})):C5(c,g.swipeDirection,l)?(w.current=c,E5("toast.swipeStart",m,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(j.current=null)})),onPointerUp:(0,K.m)(e.onPointerUp,(e=>{const t=w.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),w.current=null,j.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};C5(t,g.swipeDirection,g.swipeThreshold)?E5("toast.swipeEnd",f,r,{discrete:!0}):E5("toast.swipeCancel",p,r,{discrete:!0}),n.addEventListener("click",(e=>e.preventDefault()),{once:!0})}}))})})}),g.viewport)})]}):null})),g5=e=>{const{__scopeToast:n,children:r,...a}=e,s=r5(m5,n),[i,o]=t.useState(!1),[l,c]=t.useState(!1);return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};const t=(0,lr.c)(e);(0,ho.N)((()=>{let e=0,n=0;return e=window.requestAnimationFrame((()=>n=window.requestAnimationFrame(t))),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}}),[t])}((()=>o(!0))),t.useEffect((()=>{const e=window.setTimeout((()=>c(!0)),1e3);return()=>window.clearTimeout(e)}),[]),l?null:(0,X.jsx)(ir.Z,{asChild:!0,children:(0,X.jsx)(fi.s,{...a,children:i&&(0,X.jsxs)(X.Fragment,{children:[s.label," ",r]})})})},x5=t.forwardRef(((e,t)=>{const{__scopeToast:n,...r}=e;return(0,X.jsx)(Jn.sG.div,{...r,ref:t})}));x5.displayName="ToastTitle";var y5=t.forwardRef(((e,t)=>{const{__scopeToast:n,...r}=e;return(0,X.jsx)(Jn.sG.div,{...r,ref:t})}));y5.displayName="ToastDescription";var b5="ToastAction",j5=t.forwardRef(((e,t)=>{const{altText:n,...r}=e;return n.trim()?(0,X.jsx)(_5,{altText:n,asChild:!0,children:(0,X.jsx)(N5,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${b5}\`. Expected non-empty \`string\`.`),null)}));j5.displayName=b5;var w5="ToastClose",N5=t.forwardRef(((e,t)=>{const{__scopeToast:n,...r}=e,a=f5(w5,n);return(0,X.jsx)(_5,{asChild:!0,children:(0,X.jsx)(Jn.sG.button,{type:"button",...r,ref:t,onClick:(0,K.m)(e.onClick,a.onClose)})})}));N5.displayName=w5;var _5=t.forwardRef(((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return(0,X.jsx)(Jn.sG.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})}));function S5(e){const t=[];return Array.from(e.childNodes).forEach((e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...S5(e))}})),t}function E5(e,t,n,r){let{discrete:a}=r;const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),a?(0,Jn.hO)(s,i):s.dispatchEvent(i)}var C5=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.abs(e.x),a=Math.abs(e.y),s=r>a;return"left"===t||"right"===t?s&&r>n:!s&&a>n};function D5(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function T5(e){const t=document.activeElement;return e.some((e=>e===t||(e.focus(),document.activeElement!==t)))}var k5=c5,A5=h5,P5=x5,O5=y5,R5=j5,M5=N5;const I5=a5,L5=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(k5,{ref:t,className:(0,Ee.cn)("fixed top-10 right-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:max-w-[420px]",n),...r})}));L5.displayName=k5.displayName;const F5=(0,Ji.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-y-0 data-[swipe=end]:translate-y-[var(--radix-toast-swipe-end-y)] data-[swipe=move]:translate-y-[var(--radix-toast-swipe-move-y)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full duration-300",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground font-Roboto",success:"border-green-500 bg-[#28a745] text-white font-Roboto"}},defaultVariants:{variant:"default"}}),B5=t.forwardRef(((e,t)=>{let{className:n,variant:r,...a}=e;return(0,X.jsx)(A5,{ref:t,className:(0,Ee.cn)(F5({variant:r}),n),...a,children:(0,X.jsxs)("div",{className:"flex items-center",children:["success"===r&&(0,X.jsx)(Ly,{className:"h-6 w-6 mr-2 flex-shrink-0"}),"destructive"===r&&(0,X.jsx)(Rs.Pip,{className:"h-6 w-6 mr-2 flex-shrink-0"}),(0,X.jsx)("div",{children:a.children})]})})}));B5.displayName=A5.displayName;t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(R5,{ref:t,className:(0,Ee.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...r})})).displayName=R5.displayName;const W5=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(M5,{ref:t,className:(0,Ee.cn)("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...r,children:(0,X.jsx)(Rs.MKb,{className:"h-4 w-4"})})}));W5.displayName=M5.displayName;const $5=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(P5,{ref:t,className:(0,Ee.cn)("text-sm font-semibold [&+div]:text-xs",n),...r})}));$5.displayName=P5.displayName;const U5=t.forwardRef(((e,t)=>{let{className:n,...r}=e;return(0,X.jsx)(O5,{ref:t,className:(0,Ee.cn)("text-sm opacity-90",n),...r})}));function z5(){const{toasts:e}=(0,H.dj)();return(0,X.jsxs)(I5,{children:[e.map((function(e){let{id:t,title:n,description:r,action:a,...s}=e;return(0,X.jsxs)(B5,{...s,children:[(0,X.jsxs)("div",{className:"grid gap-1",children:[n&&(0,X.jsx)($5,{children:n}),r&&(0,X.jsx)(U5,{children:r})]}),a,(0,X.jsx)(W5,{})]},t)})),(0,X.jsx)(L5,{})]})}U5.displayName=O5.displayName;r.createRoot(document.getElementById("root")).render((0,X.jsxs)(j.Kq,{store:Hn,children:[(0,X.jsx)(Y3,{}),(0,X.jsx)(z5,{})]}))})()})();
//# sourceMappingURL=main.2a35ac62.js.map